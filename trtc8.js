!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}("undefined"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=681)}([function(e,t,n){(function(t){!function(t,n){e.exports=n()}(0,function(){"use strict";function e(e,t){return t={exports:{}},e(t,t.exports),t.exports}var n=function(e){var t=e.id,n=e.viewBox,r=e.content;this.id=t,this.viewBox=n,this.content=r};n.prototype.stringify=function(){return this.content},n.prototype.toString=function(){return this.stringify()},n.prototype.destroy=function(){var e=this;["id","viewBox","content"].forEach(function(t){return delete e[t]})};var r=function(e){var t=!!document.importNode,n=(new DOMParser).parseFromString(e,"image/svg+xml").documentElement;return t?document.importNode(n,!0):n},i=("undefined"!=typeof window?window:void 0!==t||"undefined"!=typeof self&&self,e(function(e,t){!function(t,n){e.exports=n()}(0,function(){function e(e){return e&&"object"==typeof e&&"[object RegExp]"!==Object.prototype.toString.call(e)&&"[object Date]"!==Object.prototype.toString.call(e)}function t(e){return Array.isArray(e)?[]:{}}function n(n,r){return r&&!0===r.clone&&e(n)?o(t(n),n,r):n}function r(t,r,i){var a=t.slice();return r.forEach(function(r,s){void 0===a[s]?a[s]=n(r,i):e(r)?a[s]=o(t[s],r,i):-1===t.indexOf(r)&&a.push(n(r,i))}),a}function i(t,r,i){var a={};return e(t)&&Object.keys(t).forEach(function(e){a[e]=n(t[e],i)}),Object.keys(r).forEach(function(s){e(r[s])&&t[s]?a[s]=o(t[s],r[s],i):a[s]=n(r[s],i)}),a}function o(e,t,o){var a=Array.isArray(t),s=o||{arrayMerge:r},l=s.arrayMerge||r;return a?Array.isArray(e)?l(e,t,o):n(t,o):i(e,t,o)}return o.all=function(e,t){if(!Array.isArray(e)||e.length<2)throw new Error("first argument should be an array with at least two elements");return e.reduce(function(e,n){return o(e,n,t)})},o})})),o=e(function(e,t){var n={svg:{name:"xmlns",uri:"http://www.w3.org/2000/svg"},xlink:{name:"xmlns:xlink",uri:"http://www.w3.org/1999/xlink"}};t.default=n,e.exports=t.default}),a=function(e){return Object.keys(e).map(function(t){return t+'="'+e[t].toString().replace(/"/g,"&quot;")+'"'}).join(" ")},s=o.svg,l=o.xlink,c={};c[s.name]=s.uri,c[l.name]=l.uri;var u=function(e,t){void 0===e&&(e="");var n=i(c,t||{});return"<svg "+a(n)+">"+e+"</svg>"};return function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={isMounted:{}};return n.isMounted.get=function(){return!!this.node},t.createFromExistingNode=function(e){return new t({id:e.getAttribute("id"),viewBox:e.getAttribute("viewBox"),content:e.outerHTML})},t.prototype.destroy=function(){this.isMounted&&this.unmount(),e.prototype.destroy.call(this)},t.prototype.mount=function(e){if(this.isMounted)return this.node;var t="string"==typeof e?document.querySelector(e):e,n=this.render();return this.node=n,t.appendChild(n),n},t.prototype.render=function(){var e=this.stringify();return r(u(e)).childNodes[0]},t.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},Object.defineProperties(t.prototype,n),t}(n)})}).call(t,n(15))},function(e,t,n){(function(t){!function(t,n){e.exports=n()}(0,function(){"use strict";function e(e,t){return t={exports:{}},e(t,t.exports),t.exports}function n(e){return e=e||Object.create(null),{on:function(t,n){(e[t]||(e[t]=[])).push(n)},off:function(t,n){e[t]&&e[t].splice(e[t].indexOf(n)>>>0,1)},emit:function(t,n){(e[t]||[]).map(function(e){e(n)}),(e["*"]||[]).map(function(e){e(t,n)})}}}function r(e,t){return S(e).reduce(function(e,n){if(!n.attributes)return e;var r=S(n.attributes),i=t?r.filter(t):r;return e.concat(i)},[])}function i(e){return e.replace(P,function(e){return"%"+e[0].charCodeAt(0).toString(16).toUpperCase()})}function o(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function a(e,t,n){return S(e).forEach(function(e){var r=e.getAttribute(L);if(r&&0===r.indexOf(t)){var i=r.replace(t,n);e.setAttributeNS(O,L,i)}}),e}var s=("undefined"!=typeof window?window:void 0!==t||"undefined"!=typeof self&&self,e(function(e,t){!function(t,n){e.exports=n()}(0,function(){function e(e){return e&&"object"==typeof e&&"[object RegExp]"!==Object.prototype.toString.call(e)&&"[object Date]"!==Object.prototype.toString.call(e)}function t(e){return Array.isArray(e)?[]:{}}function n(n,r){return r&&!0===r.clone&&e(n)?o(t(n),n,r):n}function r(t,r,i){var a=t.slice();return r.forEach(function(r,s){void 0===a[s]?a[s]=n(r,i):e(r)?a[s]=o(t[s],r,i):-1===t.indexOf(r)&&a.push(n(r,i))}),a}function i(t,r,i){var a={};return e(t)&&Object.keys(t).forEach(function(e){a[e]=n(t[e],i)}),Object.keys(r).forEach(function(s){e(r[s])&&t[s]?a[s]=o(t[s],r[s],i):a[s]=n(r[s],i)}),a}function o(e,t,o){var a=Array.isArray(t),s=o||{arrayMerge:r},l=s.arrayMerge||r;return a?Array.isArray(e)?l(e,t,o):n(t,o):i(e,t,o)}return o.all=function(e,t){if(!Array.isArray(e)||e.length<2)throw new Error("first argument should be an array with at least two elements");return e.reduce(function(e,n){return o(e,n,t)})},o})})),l=e(function(e,t){var n={svg:{name:"xmlns",uri:"http://www.w3.org/2000/svg"},xlink:{name:"xmlns:xlink",uri:"http://www.w3.org/1999/xlink"}};t.default=n,e.exports=t.default}),c=function(e){return Object.keys(e).map(function(t){return t+'="'+e[t].toString().replace(/"/g,"&quot;")+'"'}).join(" ")},u=l.svg,d=l.xlink,f={};f[u.name]=u.uri,f[d.name]=d.uri;var p,h=function(e,t){void 0===e&&(e="");var n=s(f,t||{});return"<svg "+c(n)+">"+e+"</svg>"},g=l.svg,m=l.xlink,v={attrs:(p={style:["position: absolute","width: 0","height: 0"].join("; ")},p[g.name]=g.uri,p[m.name]=m.uri,p)},b=function(e){this.config=s(v,e||{}),this.symbols=[]};b.prototype.add=function(e){var t=this,n=t.symbols,r=this.find(e.id);return r?(n[n.indexOf(r)]=e,!1):(n.push(e),!0)},b.prototype.remove=function(e){var t=this,n=t.symbols,r=this.find(e);return!!r&&(n.splice(n.indexOf(r),1),r.destroy(),!0)},b.prototype.find=function(e){return this.symbols.filter(function(t){return t.id===e})[0]||null},b.prototype.has=function(e){return null!==this.find(e)},b.prototype.stringify=function(){var e=this.config,t=e.attrs,n=this.symbols.map(function(e){return e.stringify()}).join("");return h(n,t)},b.prototype.toString=function(){return this.stringify()},b.prototype.destroy=function(){this.symbols.forEach(function(e){return e.destroy()})};var _=function(e){var t=e.id,n=e.viewBox,r=e.content;this.id=t,this.viewBox=n,this.content=r};_.prototype.stringify=function(){return this.content},_.prototype.toString=function(){return this.stringify()},_.prototype.destroy=function(){var e=this;["id","viewBox","content"].forEach(function(t){return delete e[t]})};var y,w=function(e){var t=!!document.importNode,n=(new DOMParser).parseFromString(e,"image/svg+xml").documentElement;return t?document.importNode(n,!0):n},x=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={isMounted:{}};return n.isMounted.get=function(){return!!this.node},t.createFromExistingNode=function(e){return new t({id:e.getAttribute("id"),viewBox:e.getAttribute("viewBox"),content:e.outerHTML})},t.prototype.destroy=function(){this.isMounted&&this.unmount(),e.prototype.destroy.call(this)},t.prototype.mount=function(e){if(this.isMounted)return this.node;var t="string"==typeof e?document.querySelector(e):e,n=this.render();return this.node=n,t.appendChild(n),n},t.prototype.render=function(){var e=this.stringify();return w(h(e)).childNodes[0]},t.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},Object.defineProperties(t.prototype,n),t}(_),k={autoConfigure:!0,mountTo:"body",syncUrlsWithBaseTag:!1,listenLocationChangeEvent:!0,locationChangeEvent:"locationChange",locationChangeAngularEmitter:!1,usagesToUpdate:"use[*|href]",moveGradientsOutsideSymbol:!1},S=function(e){return Array.prototype.slice.call(e,0)},C={isChrome:function(){return/chrome/i.test(navigator.userAgent)},isFirefox:function(){return/firefox/i.test(navigator.userAgent)},isIE:function(){return/msie/i.test(navigator.userAgent)||/trident/i.test(navigator.userAgent)},isEdge:function(){return/edge/i.test(navigator.userAgent)}},T=function(e,t){var n=document.createEvent("CustomEvent");n.initCustomEvent(e,!1,!1,t),window.dispatchEvent(n)},E=function(e){var t=[];return S(e.querySelectorAll("style")).forEach(function(e){e.textContent+="",t.push(e)}),t},I=function(e){return(e||window.location.href).split("#")[0]},A=function(e){angular.module("ng").run(["$rootScope",function(t){t.$on("$locationChangeSuccess",function(t,n,r){T(e,{oldUrl:r,newUrl:n})})}])},R=function(e,t){return void 0===t&&(t="linearGradient, radialGradient, pattern"),S(e.querySelectorAll("symbol")).forEach(function(e){S(e.querySelectorAll(t)).forEach(function(t){e.parentNode.insertBefore(t,e)})}),e},O=l.xlink.uri,L="xlink:href",P=/[{}|\\\^\[\]`"<>]/g,M=["clipPath","colorProfile","src","cursor","fill","filter","marker","markerStart","markerMid","markerEnd","mask","stroke","style"],$=M.map(function(e){return"["+e+"]"}).join(","),N=function(e,t,n,s){var l=i(n),c=i(s);r(e.querySelectorAll($),function(e){var t=e.localName,n=e.value;return-1!==M.indexOf(t)&&-1!==n.indexOf("url("+l)}).forEach(function(e){return e.value=e.value.replace(new RegExp(o(l),"g"),c)}),a(t,l,c)},D={MOUNT:"mount",SYMBOL_MOUNT:"symbol_mount"},F=function(e){function t(t){var r=this;void 0===t&&(t={}),e.call(this,s(k,t));var i=n();this._emitter=i,this.node=null;var o=this,a=o.config;if(a.autoConfigure&&this._autoConfigure(t),a.syncUrlsWithBaseTag){var l=document.getElementsByTagName("base")[0].getAttribute("href");i.on(D.MOUNT,function(){return r.updateUrls("#",l)})}var c=this._handleLocationChange.bind(this);this._handleLocationChange=c,a.listenLocationChangeEvent&&window.addEventListener(a.locationChangeEvent,c),a.locationChangeAngularEmitter&&A(a.locationChangeEvent),i.on(D.MOUNT,function(e){a.moveGradientsOutsideSymbol&&R(e)}),i.on(D.SYMBOL_MOUNT,function(e){a.moveGradientsOutsideSymbol&&R(e.parentNode),(C.isIE()||C.isEdge())&&E(e)})}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={isMounted:{}};return r.isMounted.get=function(){return!!this.node},t.prototype._autoConfigure=function(e){var t=this,n=t.config;void 0===e.syncUrlsWithBaseTag&&(n.syncUrlsWithBaseTag=void 0!==document.getElementsByTagName("base")[0]),void 0===e.locationChangeAngularEmitter&&(n.locationChangeAngularEmitter="angular"in window),void 0===e.moveGradientsOutsideSymbol&&(n.moveGradientsOutsideSymbol=C.isFirefox())},t.prototype._handleLocationChange=function(e){var t=e.detail,n=t.oldUrl,r=t.newUrl;this.updateUrls(n,r)},t.prototype.add=function(t){var n=this,r=e.prototype.add.call(this,t);return this.isMounted&&r&&(t.mount(n.node),this._emitter.emit(D.SYMBOL_MOUNT,t.node)),r},t.prototype.attach=function(e){var t=this,n=this;if(n.isMounted)return n.node;var r="string"==typeof e?document.querySelector(e):e;return n.node=r,this.symbols.forEach(function(e){e.mount(n.node),t._emitter.emit(D.SYMBOL_MOUNT,e.node)}),S(r.querySelectorAll("symbol")).forEach(function(e){var t=x.createFromExistingNode(e);t.node=e,n.add(t)}),this._emitter.emit(D.MOUNT,r),r},t.prototype.destroy=function(){var e=this,t=e.config,n=e.symbols,r=e._emitter;n.forEach(function(e){return e.destroy()}),r.off("*"),window.removeEventListener(t.locationChangeEvent,this._handleLocationChange),this.isMounted&&this.unmount()},t.prototype.mount=function(e,t){void 0===e&&(e=this.config.mountTo),void 0===t&&(t=!1);var n=this;if(n.isMounted)return n.node;var r="string"==typeof e?document.querySelector(e):e,i=n.render();return this.node=i,t&&r.childNodes[0]?r.insertBefore(i,r.childNodes[0]):r.appendChild(i),this._emitter.emit(D.MOUNT,i),i},t.prototype.render=function(){return w(this.stringify())},t.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},t.prototype.updateUrls=function(e,t){if(!this.isMounted)return!1;var n=document.querySelectorAll(this.config.usagesToUpdate);return N(this.node,n,I(e)+"#",I(t)+"#"),!0},Object.defineProperties(t.prototype,r),t}(b),q=e(function(e){/*!
  * domready (c) Dustin Diaz 2014 - License MIT
  */
!function(t,n){e.exports=function(){var e,t=[],n=document,r=n.documentElement.doScroll,i=(r?/^loaded|^c/:/^loaded|^i|^c/).test(n.readyState);return i||n.addEventListener("DOMContentLoaded",e=function(){for(n.removeEventListener("DOMContentLoaded",e),i=1;e=t.shift();)e()}),function(e){i?setTimeout(e,0):t.push(e)}}()}()}),U=!!window.__SVG_SPRITE__;U?y=window.__SVG_SPRITE__:(y=new F({attrs:{id:"__SVG_SPRITE_NODE__"}}),window.__SVG_SPRITE__=y);var B=function(){var e=document.getElementById("__SVG_SPRITE_NODE__");e?y.attach(e):y.mount(document.body,!0)};return document.body?B():q(B),y})}).call(t,n(15))},function(e,t){var n=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(6),i=n(2),o=n(30),a=n(32),s=n(31),l=function(e,t,n){var c,u,d,f=e&l.F,p=e&l.G,h=e&l.S,g=e&l.P,m=e&l.B,v=e&l.W,b=p?i:i[t]||(i[t]={}),_=b.prototype,y=p?r:h?r[t]:(r[t]||{}).prototype;p&&(n=t);for(c in n)(u=!f&&y&&void 0!==y[c])&&s(b,c)||(d=u?y[c]:n[c],b[c]=p&&"function"!=typeof y[c]?n[c]:m&&u?o(d,r):v&&y[c]==d?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(d):g&&"function"==typeof d?o(Function.call,d):d,g&&((b.virtual||(b.virtual={}))[c]=d,e&l.R&&_&&!_[c]&&a(_,c,d)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(84),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(56),o=r(i),a=n(13),s=r(a),l=n(4),c=r(l),u=n(20),d=r(u),f=n(5),p=r(f),h=n(21),g=r(h),m=n(8),v=r(m),b=n(35),_=r(b),y=n(230),w=r(y),x=n(233),k=r(x),S=n(42),C=n(51),T=n(92),E=window.Tracker,I=(0,_.default)(null),A=function(e){return e?I[e]:(0,v.default)((0,_.default)(null),I)},R=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,c.default)(this,t);var n=void 0;e=(0,v.default)({},(0,S.isString)(e)?{name:e}:e),n=e.name;var r=(0,d.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e)),i=A(n);if(n&&i){var o;return i.$opts=(0,v.default)(i.$opts,e),o=i,(0,d.default)(r,o)}return r.$opts=e,T.eventBus.$trigger("newTracker",r.$name,e),r}return(0,g.default)(t,e),(0,p.default)(t,null,[{key:"$noConflict",value:function(){return E===this&&(window.Tracker=E),this}},{key:"$getInstance",value:function(e){return A(e)}}]),(0,p.default)(t,[{key:"$extend",value:function(e,t){var n=(0,w.default)(this,e),r=n.$name=t.name||(0,S.generateName)();return n.$countReset().$setTheme(t).$_storeInstance(r,n),T.eventBus.$trigger("newTracker",r,t),n}},{key:"$_storeInstance",value:function(e,t){var n=this.constructor.$countInstance||0;e=this.$name=e||this.$opts.name||(0,S.generateName)(),A(e)||(t=t||this,t[C.INSTANCE_NAME]=e,I[e]=t,this.constructor.$countInstance=++n)}}]),t}(k.default);R.$create=function(e,t){var n=new this(t),r=(0,w.default)(n,e);return r.$countReset().$_storeInstance(n[C.INSTANCE_NAME],r),r},R.$use=function(e){var t=this,n=Array.prototype.slice.call(arguments,1);if(!e||e[C.PLUGED_ATTR])return e&&e.config&&e.config.apply(e,n),this;var r=e.events,i=e.provides;return e.super=this,e.initialize&&e.initialize.apply(e,n),r&&(0,o.default)(r).forEach(function(t){var n=r[t];T.eventBus.$on(t,n,void 0,e)}),i&&(0,o.default)(i).forEach(function(n){var r=i[n];t.prototype[n]=r.bind(e)}),e[C.PLUGED_ATTR]=!0,this},R.$on=T.eventBus.$on.bind(T.eventBus),t.default=window.T=window.Tracker=R},function(e,t,n){e.exports={default:n(218),__esModule:!0}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var r=n(80)("wks"),i=n(62),o=n(6).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t,n){e.exports={default:n(182),__esModule:!0}},function(e,t,n){var r=n(9);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports={default:n(220),__esModule:!0}},function(e,t,n){e.exports={default:n(183),__esModule:!0}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){e.exports=!n(33)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){"use strict";function r(e){return"[object Array]"===C.call(e)}function i(e){return void 0===e}function o(e){return null!==e&&!i(e)&&null!==e.constructor&&!i(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function a(e){return"[object ArrayBuffer]"===C.call(e)}function s(e){return"undefined"!=typeof FormData&&e instanceof FormData}function l(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function c(e){return"string"==typeof e}function u(e){return"number"==typeof e}function d(e){return null!==e&&"object"==typeof e}function f(e){return"[object Date]"===C.call(e)}function p(e){return"[object File]"===C.call(e)}function h(e){return"[object Blob]"===C.call(e)}function g(e){return"[object Function]"===C.call(e)}function m(e){return d(e)&&g(e.pipe)}function v(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function b(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function _(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function y(e,t){if(null!==e&&void 0!==e)if("object"!=typeof e&&(e=[e]),r(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}function w(){function e(e,n){"object"==typeof t[n]&&"object"==typeof e?t[n]=w(t[n],e):t[n]=e}for(var t={},n=0,r=arguments.length;n<r;n++)y(arguments[n],e);return t}function x(){function e(e,n){"object"==typeof t[n]&&"object"==typeof e?t[n]=x(t[n],e):t[n]="object"==typeof e?x({},e):e}for(var t={},n=0,r=arguments.length;n<r;n++)y(arguments[n],e);return t}function k(e,t,n){return y(t,function(t,r){e[r]=n&&"function"==typeof t?S(t,n):t}),e}var S=n(129),C=Object.prototype.toString;e.exports={isArray:r,isArrayBuffer:a,isBuffer:o,isFormData:s,isArrayBufferView:l,isString:c,isNumber:u,isObject:d,isUndefined:i,isDate:f,isFile:p,isBlob:h,isFunction:g,isStream:m,isURLSearchParams:v,isStandardBrowserEnv:_,forEach:y,merge:w,deepMerge:x,extend:k,trim:b}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(14),o=r(i),a=n(8),s=r(a),l=n(46),c=r(l),u=n(34),d=r(u),f=n(4),p=r(f),h=n(5),g=r(h),m=n(140),v=r(m),b=n(261),_=r(b),y=n(165),w=r(y),x=n(350),k=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,p.default)(this,e),this.name=t.name,this.title=t.title,this.moveable=t.moveable,this.visible=t.visible,this.overlay=t.overlay,this.resizable=t.resizable,this.moveHandler=t.moveHandler,this.onopenurl=t.onopenurl||function(e){},this.src=t.src,this.className=t.className,this.style=t.style||{},this.animateCss=t.animateCss||{},this.autoHeight=t.autoHeight,this.frameborder=t.frameborder||0,this.container=t.container||n.container||document.body,this.html=t.html||"",this.data=t.data||{},this.opts=n,n.zIndex=n.zIndex||this.style.zIndex||this.style["z-index"]||1,this.widthOffset=t.widthOffset||0,this.heightOffset=t.heightOffset||0,this.cssText=t.cssText||"",this.script=t.script,this.props=t.props||{},this.onerror=t.onerror,this.onload=t.onload,this.onremove=t.onremove,this.onCreated=t.onCreated,this.onMounted=t.onMounted,!1===this.visible&&(this.style.display="none"),this.setElement(),this.src?this.moveable&&x.drag.call(this):this.render(),this.mounted()}return(0,g.default)(e,[{key:"created",value:function(){this.window.onRefresh=this.refresh.bind(this),this.window.setInViewPort=this.setInViewPort.bind(this),this.window.getRootEl=this.getRootEl.bind(this),this.onCreated&&this.onCreated(this.opts)}},{key:"mounted",value:function(){this.window.onInit&&this.window.onInit(this.data),this.window.onShow&&this.window.onShow(this.data,this.opts.params),this.onMounted&&this.onMounted(this.opts)}},{key:"inject",value:function(e){var t=this;return e=e||this.props,(0,d.default)(e).forEach(function(n){var r=e[n];t.window[n]="function"==typeof r?r.call(t):r}),this}},{key:"setElement",value:function(){var e,t=this,n=this.el=document.createElement("div"),r=this.iframe=document.createElement("iframe"),i="";if(this.title&&(i+='<div class="qd__title">'+this.title+"</div>",this.src&&(i+='<a class="qd__href" href="'+this.src+'" target="_blank" title="扩展至浏览器打开">\n                    <svg viewBox="0 0 12 12"><use xlink:href="#basic_extend_window"></use></svg>\n                </a>'),i+='<a class="qd__close" href="javascript:;" title="关闭窗口">\n                <svg viewBox="0 0 12 12"><use xlink:href="#basic_extend_close"></use></svg>\n            </a>'),this.resizable&&(i+='\n                <div class="qd__resize_left"></div>\n                <div class="qd__resize_right"></div>\n                <div class="qd__resize_bottom"></div>\n                <div class="qd__resize_corner_left"></div>\n                <div class="qd__resize_corner_right"></div>\n            '),this.overlay&&(i+='<div class="qd__overlay" style="display:none;position: absolute;left: 0;top: 0;bottom: 0;right: 0;background: rgba(38, 45, 61,.6);"></div>'),r.setAttribute("src",this.src||"about:blank"),r.setAttribute("frameborder",this.frameborder),r.setAttribute("width","100%"),r.setAttribute("height","100%"),n.innerHTML=i,n.appendChild(r),this.className&&(e=n.classList).add.apply(e,(0,c.default)(this.className)),this.moveable){n.style.transform="translate3d(0,0,0)"}return this.animateCss.in&&this.animateCss.in.length&&(0,w.default)(n,this.animateCss.in),this.css(),this.position(),this.container.appendChild(n),this.window=r.contentWindow,this.doc=r.contentDocument,this.overlay=n.querySelector(".qd__overlay"),r.addEventListener("load",function(e){var n=t.doc=r.contentDocument||{},i=n.title||"";(i.indexOf("404")>=0||i.indexOf("错误")>=0)&&t.onerror&&t.onerror(e),t.src&&t.src&&t.onload&&t.onload()}),this.title&&(n.querySelector(".qd__close").addEventListener("click",this.onremove.bind(this)),n.querySelector(".qd__href")&&n.querySelector(".qd__href").addEventListener("click",this.onopenurl.bind(this))),this.resizable&&x.resize.call(this),this.created(),this}},{key:"getRootEl",value:function(){return this.el}},{key:"render",value:function(e){var t=void 0,n=void 0;return e=e||this.data||{},this.doc.open(),this.inject(),this.doc.close(),this.cssText&&(t=document.createElement("style"),t.innerHTML=this.cssText,this.doc.head.appendChild(t)),this.html&&(this.doc.body.innerHTML=(0,v.default)(this.html)(e)),this.script&&(n=document.createElement("script"),n.innerHTML=this.script,this.doc.body.appendChild(n)),this.refresh(),this.onload&&this.onload(),this.moveable&&x.drag.call(this),this}},{key:"setInViewPort",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width||Math.max(this.el.offsetWidth,this.el.scrollWidth,this.el.clientWidth)+this.widthOffset,n=window.innerWidth-t,r=this.el.offsetLeft;this.css((0,s.default)(e,{left:Math.min(n,r)}))}},{key:"css",value:function(e){var t=this.el;return e=e||this.style,(0,d.default)(e).forEach(function(n){var r=e[n];"z-index"===n||"zIndex"===n?t.style["z-index"]=r:t.style[n]=r+("number"==typeof r?"px":"")}),this}},{key:"position",value:function(){"static"!==this.opts.position&&this.opts.relativeEl&&_.default.call(this,(0,s.default)({},this.opts,this.opts.params))}},{key:"refresh",value:function(e){if(e)_.default.call(this,(0,s.default)({},this.opts,this.opts.params));else if(this.autoHeight){var t=this.doc.querySelector(this.autoHeight)||this.doc.body;t&&this.css({height:t.offsetHeight-1}),this.position()}}},{key:"show",value:function(){this.css({visibility:"visible",display:"block"});try{!this.visible&&this.window.onShow(this.data,this.opts.params)}catch(e){}return this.visible=!0,this}},{key:"hide",value:function(e){this.visible=!1,this.css({display:"none"});try{this.window.onHide(e)}catch(e){}return this}},{key:"remove",value:function(e){var t=this;return this.removing=this.removing||new o.default(function(n){var r=function(){t.visible=!1;try{t.window.onHide&&t.window.onHide(e),t.window.onRemove(e)}catch(e){}t.el.parentElement.removeChild(t.el),n()};t.animateCss.out&&t.animateCss.out.length?(0,w.default)(t.el,t.animateCss.out).then(r):r()}),this.removing}},{key:"isVisible",value:function(){return this.visible}},{key:"showOverlay",value:function(){this.overlay&&(this.overlay.style.display="block")}},{key:"hideOverlay",value:function(){this.overlay&&(this.overlay.style.display="none")}}]),e}();t.default=k},function(e,t){function n(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var o=r(i);return[n].concat(i.sources.map(function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"})).concat([o]).join("\n")}return[n].join("\n")}function r(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var r=n(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(28),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,i.default)(t))&&"function"!=typeof t?e:t}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(114),o=r(i),a=n(35),s=r(a),l=n(28),c=r(l);t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,c.default)(t)));e.prototype=(0,s.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(o.default?(0,o.default)(e,t):e.__proto__=t)}},,function(e,t,n){var r=n(12),i=n(105),o=n(76),a=Object.defineProperty;t.f=n(16)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(8),o=r(i),a=n(14),s=r(a),l=n(469),c=r(l),u=n(140),d=r(u),f=n(165),p=r(f),h=n(318),g=r(h),m=n(471),v=r(m),b=n(7),_=r(b),y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,n=e.name,r=t.isCallingState(),i=e.className||["qd__iframe"],a=void 0;return r&&i.push("qd__is-calling"),"mainFrame"===n&&(a=new _.default(n+".changeState")),(0,o.default)(e,{style:(0,o.default)({boxShadow:"0px 2px 18px 2px rgba(172, 172, 172, 0.3)",borderRadius:"6px",overflow:"hidden",transition:"border-color .3s ease"},e.style||{}),className:i,widthOffset:5,animateCss:(0,o.default)({in:["qd__animated","qd__fadeInDown"],out:["qd__animated","qd__fadeOutUp"]},e.animateCss),props:(0,o.default)({Promise:function(){return s.default},$:function(){return new c.default(this.doc)},render:function(){return d.default},cssAnimate:function(){return p.default},notice:function(){return new g.default({evt:t,doc:this.doc})},qd:t,console:console,highLight:function(){return v.default}},e.props||{}),onMounted:function(){function e(e){o&&o.classList[e?"add":"remove"]("is-calling"),i&&i.classList[e?"add":"remove"]("qd__is-calling"),a&&a.$log("toggleClass, is-calling:"+e)}var r=this.doc,i=this.el,o=r.querySelector&&r.querySelector(".bg-main"),s=!1;e(t.isCallingState()),a&&a.$log(n+" is created"),t.one("stateChange._"+n,function(n,r,i){var l=t.getState("currentTab"),c=t.getState("direction"),u=t.isCallingState(r);if(u!==t.isCallingState(i)||"online"===r&&s){if("call-state"!==l&&"calling"===r&&"callin"===c)return s=!0,void(a&&a.$log("toggleClass ignored as isChangeStopped is true"));if(s=!1,!("call-state"===l||u||o&&o.classList.contains("is-calling")))return void(a&&a.$log("toggleClass ignored"));e(u)}}),t.one("_tabChange."+n+"_onLoad",function(n,r){if("call-state"===r&&s){e(t.isCallingState()),s=!1}})}})};t.default=y},function(e,t,n){t=e.exports=n(19)(!1),t.push([e.i,".qd__animated {\n    animation-duration: .3s;\n    animation-fill-mode: both\n}\n\n.qd__slideDown {\n    animation-name: slideDown;\n}\n\n.qd__slideUp{\n    animation-name: slideUp;\n}\n\n.qd__none-event{\n    pointer-events: none;\n}\n\n.qd__title{\n    height: 20px;\n    line-height: 20px;\n    font-size: 14px;\n    padding: 12px 16px 8px;\n    color: #262d3d;\n    background-color: #f4f7fb;\n    transition: background-color .26s linear;\n    user-select: none;\n    -webkit-user-select: none;\n    font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n}\n\n.qd__href,\n.qd__close{\n    width: 15px;\n    height: 15px;\n    position: absolute;\n    top: 6px;\n    color: #a1abc2;\n}\n.qd__href{\n    right: 31px;\n}\n.qd__close{\n    right: 6px;\n}\n.qd__href:hover,\n.qd__close:hover{\n    color: #262d3d;\n}\n\n.qd__iframe{\n    border: 1px solid #d4d8e1;\n    background: #fff;\n}\n.qd__is-calling{\n    border-color: #1e2031;\n    background-color: #1e2031;\n}\n.qd__is-calling .qd__title{\n    color: #f8f9fb;\n    background-color: #1e2031;\n}\n.qd__is-calling .qd__href,\n.qd__is-calling .qd__close{\n    color: #7e879a;\n}\n.qd__is-calling .qd__href:hover,\n.qd__is-calling .qd__close:hover{\n    color: #f8f9fb;\n}\n\n.qd__resize_left,\n.qd__resize_right{\n    position: absolute;\n    width: 3px;\n    height: 100%;\n    top: 0;\n    cursor: ew-resize;\n}\n.qd__resize_left{\n    left: 0;\n}\n.qd__resize_right{\n    right: 0;\n}\n.qd__resize_bottom{\n    position: absolute;\n    width: 100%;\n    height: 3px;\n    left: 0;\n    bottom: 0;\n    cursor: ns-resize;\n}\n.qd__resize_corner_left,\n.qd__resize_corner_right{\n    position: absolute;\n    width: 10px;\n    height: 10px;\n    bottom: 0;\n}\n.qd__resize_corner_left{\n    left: 0;\n    cursor: nesw-resize;\n}\n.qd__resize_corner_right{\n    right: 0;\n    cursor: nwse-resize;\n}\n\n@keyframes fadeInDown {\n    0% {\n        opacity: 0;\n        transform: translate3d(0, -5%, 0);\n    }\n\n    to {\n        opacity: 1;\n        transform: translateZ(0);\n    }\n}\n\n@keyframes fadeOutUp {\n    0% {\n        opacity: 1;\n        transform: translateZ(0);\n    }\n\n    to {\n        opacity: 0;\n        transform: translate3d(0, -5%, 0);\n    }\n}\n\n@keyframes fadeInUp {\n    0% {\n        opacity: 0;\n        transform: translate3d(0, 5%, 0);\n    }\n\n    to {\n        opacity: 1;\n        transform: translateZ(0);\n    }\n}\n\n@keyframes fadeOutDown {\n    0% {\n        opacity: 1;\n        transform: translateZ(0);\n    }\n\n    to {\n        opacity: 0;\n        transform: translate3d(0, 5%, 0);\n    }\n}\n\n@keyframes fadeIn {\n    0% {\n        opacity: 0;\n        transform: translate3d(0, -10%, 0) scale(1.2, 1.2);\n    }\n\n    to {\n        opacity: 1;\n        transform: translateZ(0);\n    }\n}\n\n@keyframes slideInDown {\n    0% {\n        opacity: 0;\n        transform: translate3d(0, -100%, 0);\n    }\n\n    to {\n        opacity: 1;\n        transform: translateZ(0);\n    }\n}\n\n@keyframes slideOutUp {\n    0% {\n        opacity: 1;\n        transform: translateZ(0);\n    }\n\n    to {\n        opacity: 0;\n        transform: translate3d(0, -100%, 0);\n    }\n}\n\n@keyframes slideDown {\n    0% {\n        transform: translate3d(0, -100%, 0);\n    }\n\n    to {\n        transform: translateZ(0);\n    }\n}\n\n@keyframes slideUp {\n    0% {\n        transform: translateZ(0);\n    }\n\n    to {\n        transform: translate3d(0, -100%, 0);\n    }\n}\n\n@keyframes bgfadeIn {\n    0% {\n        opacity: 0;\n    }\n\n    to {\n        opacity: 1;\n    }\n}\n\n@keyframes bgfadeOut {\n    0% {\n        opacity: 1;\n    }\n\n    to {\n        opacity: 0;\n    }\n}\n\n.qd__fadeIn {\n    animation-name: fadeIn;\n}\n\n.qd__fadeOutUp{\n    animation-name: fadeOutUp;\n}\n.qd__fadeOutDown,\n.qd-revert.qd__fadeOutUp{\n    animation-name: fadeOutDown;\n}\n\n.qd__fadeInDown,\n.qd-revert.qd__fadeInUp{\n    animation-name: fadeInDown;\n}\n\n.qd__fadeInUp,\n.qd-revert.qd__fadeInDown {\n    animation-name: fadeInUp;\n}\n\n.qd__slideInDown {\n    animation-name: slideInDown;\n}\n\n.qd__slideOutUp{\n    animation-name: slideOutUp;\n}\n\n.qd__bgfadeIn {\n    animation-name: bgfadeIn;\n}\n\n.qd__bgfadeOut{\n    animation-name: bgfadeOut;\n}\n\n.qd__mini{\n    width: 210px!important;\n    height: 32px!important;\n    min-width: auto!important;\n}\n\n.qd__expand {\n    animation-duration: .15s;\n    animation-fill-mode: both;\n    min-width: auto!important;\n    animation-name: expand;\n}\n\n.qd__collapse{\n    animation-duration: .15s;\n    animation-fill-mode: both;\n    min-width: auto!important;\n    animation-name: collapse;\n}\n\n@keyframes expand {\n    0% {\n        width: 210px;\n        height: 32px;\n    }\n\n    40% {\n        height: 100px;\n    }\n\n    to {\n        width: var(--qd-bar-width);\n        height: 100px;\n    }\n}\n\n@keyframes collapse {\n    0% {\n        width: var(--qd-bar-width);\n    }\n\n    70% {\n        height: 32px;\n    }\n\n    to {\n        width: 210px;\n        height: 32px;\n    }\n}",""])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e.keys().map(function(t){return e(t).default.content}).join()},i=function(e){return'<svg style="position:absolute;width:0;height:0;"><defs>'+r(e)+"</defs></svg>"};t.default=i},function(e,t,n){function r(e){return n(i(e))}function i(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var o={"./action-break.svg":480,"./action-consult.svg":481,"./action-consultback.svg":482,"./action-dial.svg":483,"./action-hangup.svg":484,"./action-hold.svg":485,"./action-insert.svg":486,"./action-multi.svg":487,"./action-mute.svg":488,"./action-postedit.svg":489,"./action-transfer.svg":490,"./action-unhold.svg":491,"./action-unmute.svg":492,"./arrow-down.svg":493,"./arrow-move.svg":494,"./arrow-up.svg":495,"./arrow.svg":496,"./arrow_double_left_line.svg":497,"./arrow_down_small_line.svg":498,"./arrow_left.svg":499,"./arrow_left_small_line.svg":500,"./arrow_right.svg":501,"./arrow_right_small_line.svg":502,"./asr-auto.svg":503,"./asr-manual.svg":504,"./auto-answer.svg":505,"./avatar-c.svg":506,"./basic_calendar_line.svg":507,"./basic_detail_line.svg":508,"./basic_email_line.svg":509,"./basic_extend_close.svg":510,"./basic_extend_window.svg":511,"./basic_group_line.svg":512,"./basic_me_fill.svg":513,"./basic_me_line.svg":514,"./basic_more2_line.svg":515,"./basic_search_line.svg":516,"./basic_send_fill.svg":517,"./basic_volume_line.svg":518,"./busy.svg":519,"./c-add-custom.svg":520,"./c-add-remark.svg":521,"./c-add-schedule.svg":522,"./c-icard.svg":523,"./c-order.svg":524,"./c-orderpop.svg":525,"./c-schedule.svg":526,"./call-answer.svg":527,"./call-in.svg":528,"./call-out.svg":529,"./checked.svg":530,"./clear.svg":531,"./close.svg":532,"./collapse-a.svg":533,"./collapse-b.svg":534,"./default-search-dark.svg":535,"./default-search.svg":536,"./default_setting-dark.svg":537,"./default_setting.svg":538,"./delete.svg":539,"./device_mobile.svg":540,"./device_pc.svg":541,"./idle.svg":542,"./input-clear.svg":543,"./input-search.svg":544,"./ip.svg":545,"./ivr.svg":546,"./logout.svg":547,"./mic.svg":548,"./more.svg":549,"./person.svg":550,"./pstn.svg":551,"./rest.svg":552,"./schedule.svg":553,"./signal_1.svg":554,"./signal_2.svg":555,"./signal_3.svg":556,"./signal_4.svg":557,"./signal_5.svg":558,"./status-busy.svg":559,"./status-idle.svg":560,"./status-rest.svg":561,"./switchboard.svg":562,"./timer.svg":563,"./tip-error.svg":564,"./tip-success.svg":565,"./tip-warning.svg":566,"./voip.svg":567};r.keys=function(){return Object.keys(o)},r.resolve=i,e.exports=r,r.id=27},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(102),o=r(i),a=n(103),s=r(a),l="function"==typeof s.default&&"symbol"==typeof o.default?function(e){return typeof e}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};t.default="function"==typeof s.default&&"symbol"===l(o.default)?function(e){return void 0===e?"undefined":l(e)}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":void 0===e?"undefined":l(e)}},function(e,t,n){var r=n(90),i=n(77);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(37);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(23),i=n(50);e.exports=n(16)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){e.exports={default:n(189),__esModule:!0}},function(e,t,n){e.exports={default:n(225),__esModule:!0}},function(e,t,n){var r=n(77);e.exports=function(e){return Object(r(e))}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={prefix:"_qd_sdk_",ns:"_sdk_ns",ev_action:"_qd_sdk_action_",ev_goon:"_qd_sdk_goon_",ev_goon_ticketExpired:"_qd_sdk_goon_.ticketExpired",ev_goon_holdAction:"_qd_sdk_goon_.holdAction",ev_ticketExpired:"ticketExpired",socketUrl:"https://api.qidian.qq.com",socketPath:"/websocket",socketV2Path:"/websocket_v2",checkParamsFail:"缺少参数",connectFail:"连接已断开",configFail:"鉴权失败",code:{success:0,ticketExpired:302007,paramsError:2,connectError:3,configError:4,reject:5,limited:6,statusLimited:7,timeout:804,registrationFailed:805,agentDisconnect:806}};t.frequenceLimits=["agentMakeCall","getAgentAnalysisStatus"],t.reconnectActions=["agentMakeCall","agentSetWorkStatus","getScheduleList","changeAnswerType","agentOffWork","agentOnWork","setRestStatus","setAutoAnswer"],t.callTypeCode={normal:1,consult:2,transfer:3,monitor:4,breakIn:5,breakDown:6,other:0},t.answerType={pstn:1,voip:2,hardware:4},t.callClientType={agent:0,customer:1},t.callDirection={callIn:1,callOut:2}},function(e,t,n){var r=n(106),i=n(81);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){"use strict";var r=n(176)(!0);n(86)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t){e.exports={}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(193);Object.defineProperty(t,"generateName",{enumerable:!0,get:function(){return r.generateName}});var i=n(194);Object.defineProperty(t,"getColorStr",{enumerable:!0,get:function(){return i.getColorStr}});var o=n(113);Object.defineProperty(t,"getRandomColor",{enumerable:!0,get:function(){return o.getRandomColor}});var a=n(196);Object.defineProperty(t,"isObject",{enumerable:!0,get:function(){return a.isObject}}),Object.defineProperty(t,"isString",{enumerable:!0,get:function(){return a.isString}}),Object.defineProperty(t,"isArray",{enumerable:!0,get:function(){return a.isArray}}),Object.defineProperty(t,"isFunction",{enumerable:!0,get:function(){return a.isFunction}}),Object.defineProperty(t,"isNumber",{enumerable:!0,get:function(){return a.isNumber}}),Object.defineProperty(t,"isRegExp",{enumerable:!0,get:function(){return a.isRegExp}}),Object.defineProperty(t,"isUndefined",{enumerable:!0,get:function(){return a.isUndefined}}),Object.defineProperty(t,"isClass",{enumerable:!0,get:function(){return a.isClass}})},function(e,t,n){var r=n(3),i=n(2),o=n(33);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function s(e,t){switch(t){case"FIXED_LINE":return e[0];case"MOBILE":return e[1];case"TOLL_FREE":return e[2];case"PREMIUM_RATE":return e[3];case"PERSONAL_NUMBER":return e[4];case"VOICEMAIL":return e[5];case"UAN":return e[6];case"PAGER":return e[7];case"VOIP":return e[8];case"SHARED_COST":return e[9]}}function l(e){if(!e)throw new Error("[libphonenumber-js] `metadata` argument not passed. Check your arguments.");if(!x(e)||!x(e.countries))throw new Error("[libphonenumber-js] `metadata` argument was passed but it's not a valid metadata. Must be an object having `.countries` child object property. Got ".concat(x(e)?"an object of shape: { "+Object.keys(e).join(", ")+" }":"a "+k(e)+": "+e,"."))}function c(e,t){return t=new v(t),t.hasCountry(e)?t.country(e).ext():m}function u(e,t){if(t=new v(t),t.hasCountry(e))return t.country(e).countryCallingCode();throw new Error("Unknown country: ".concat(e))}function d(e,t){return void 0!==t.countries[e]}function f(e){this.v1=!e.version,this.v2=void 0!==e.version&&-1===Object(p.a)(e.version,h),this.v3=void 0!==e.version&&-1===Object(p.a)(e.version,g),this.v4=void 0!==e.version}n.d(t,"a",function(){return v}),t.c=c,t.b=u,t.d=d;var p=n(447),h="1.2.0",g="1.7.35",m=" ext. ",v=function(){function e(t){i(this,e),l(t),this.metadata=t,f.call(this,t)}return a(e,[{key:"getCountries",value:function(){return Object.keys(this.metadata.countries).filter(function(e){return"001"!==e})}},{key:"getCountryMetadata",value:function(e){return this.metadata.countries[e]}},{key:"nonGeographic",value:function(){if(!(this.v1||this.v2||this.v3))return this.metadata.nonGeographic||this.metadata.nonGeographical}},{key:"hasCountry",value:function(e){return void 0!==this.getCountryMetadata(e)}},{key:"hasCallingCode",value:function(e){if(this.getCountryCodesForCallingCode(e))return!0;if(this.nonGeographic()){if(this.nonGeographic()[e])return!0}else{var t=this.countryCallingCodes()[e];if(t&&1===t.length&&"001"===t[0])return!0}}},{key:"isNonGeographicCallingCode",value:function(e){return this.nonGeographic()?!!this.nonGeographic()[e]:!this.getCountryCodesForCallingCode(e)}},{key:"country",value:function(e){return this.selectNumberingPlan(e)}},{key:"selectNumberingPlan",value:function(e,t){if(e&&"001"!==e){if(!this.hasCountry(e))throw new Error("Unknown country: ".concat(e));this.numberingPlan=new b(this.getCountryMetadata(e),this)}else if(t){if(!this.hasCallingCode(t))throw new Error("Unknown calling code: ".concat(t));this.numberingPlan=new b(this.getNumberingPlanMetadata(t),this)}else this.numberingPlan=void 0;return this}},{key:"getCountryCodesForCallingCode",value:function(e){var t=this.countryCallingCodes()[e];if(t){if(1===t.length&&3===t[0].length)return;return t}}},{key:"getCountryCodeForCallingCode",value:function(e){var t=this.getCountryCodesForCallingCode(e);if(t)return t[0]}},{key:"getNumberingPlanMetadata",value:function(e){var t=this.getCountryCodeForCallingCode(e);if(t)return this.getCountryMetadata(t);if(this.nonGeographic()){var n=this.nonGeographic()[e];if(n)return n}else{var r=this.countryCallingCodes()[e];if(r&&1===r.length&&"001"===r[0])return this.metadata.countries["001"]}}},{key:"countryCallingCode",value:function(){return this.numberingPlan.callingCode()}},{key:"IDDPrefix",value:function(){return this.numberingPlan.IDDPrefix()}},{key:"defaultIDDPrefix",value:function(){return this.numberingPlan.defaultIDDPrefix()}},{key:"nationalNumberPattern",value:function(){return this.numberingPlan.nationalNumberPattern()}},{key:"possibleLengths",value:function(){return this.numberingPlan.possibleLengths()}},{key:"formats",value:function(){return this.numberingPlan.formats()}},{key:"nationalPrefixForParsing",value:function(){return this.numberingPlan.nationalPrefixForParsing()}},{key:"nationalPrefixTransformRule",value:function(){return this.numberingPlan.nationalPrefixTransformRule()}},{key:"leadingDigits",value:function(){return this.numberingPlan.leadingDigits()}},{key:"hasTypes",value:function(){return this.numberingPlan.hasTypes()}},{key:"type",value:function(e){return this.numberingPlan.type(e)}},{key:"ext",value:function(){return this.numberingPlan.ext()}},{key:"countryCallingCodes",value:function(){return this.v1?this.metadata.country_phone_code_to_countries:this.metadata.country_calling_codes}},{key:"chooseCountryByCountryCallingCode",value:function(e){this.selectNumberingPlan(null,e)}},{key:"hasSelectedNumberingPlan",value:function(){return void 0!==this.numberingPlan}}]),e}(),b=function(){function e(t,n){i(this,e),this.globalMetadataObject=n,this.metadata=t,f.call(this,n.metadata)}return a(e,[{key:"callingCode",value:function(){return this.metadata[0]}},{key:"getDefaultCountryMetadataForRegion",value:function(){return this.globalMetadataObject.getNumberingPlanMetadata(this.callingCode())}},{key:"IDDPrefix",value:function(){if(!this.v1&&!this.v2)return this.metadata[1]}},{key:"defaultIDDPrefix",value:function(){if(!this.v1&&!this.v2)return this.metadata[12]}},{key:"nationalNumberPattern",value:function(){return this.v1||this.v2?this.metadata[1]:this.metadata[2]}},{key:"possibleLengths",value:function(){if(!this.v1)return this.metadata[this.v2?2:3]}},{key:"_getFormats",value:function(e){return e[this.v1?2:this.v2?3:4]}},{key:"formats",value:function(){var e=this;return(this._getFormats(this.metadata)||this._getFormats(this.getDefaultCountryMetadataForRegion())||[]).map(function(t){return new _(t,e)})}},{key:"nationalPrefix",value:function(){return this.metadata[this.v1?3:this.v2?4:5]}},{key:"_getNationalPrefixFormattingRule",value:function(e){return e[this.v1?4:this.v2?5:6]}},{key:"nationalPrefixFormattingRule",value:function(){return this._getNationalPrefixFormattingRule(this.metadata)||this._getNationalPrefixFormattingRule(this.getDefaultCountryMetadataForRegion())}},{key:"_nationalPrefixForParsing",value:function(){return this.metadata[this.v1?5:this.v2?6:7]}},{key:"nationalPrefixForParsing",value:function(){return this._nationalPrefixForParsing()||this.nationalPrefix()}},{key:"nationalPrefixTransformRule",value:function(){return this.metadata[this.v1?6:this.v2?7:8]}},{key:"_getNationalPrefixIsOptionalWhenFormatting",value:function(){return!!this.metadata[this.v1?7:this.v2?8:9]}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return this._getNationalPrefixIsOptionalWhenFormatting(this.metadata)||this._getNationalPrefixIsOptionalWhenFormatting(this.getDefaultCountryMetadataForRegion())}},{key:"leadingDigits",value:function(){return this.metadata[this.v1?8:this.v2?9:10]}},{key:"types",value:function(){return this.metadata[this.v1?9:this.v2?10:11]}},{key:"hasTypes",value:function(){return(!this.types()||0!==this.types().length)&&!!this.types()}},{key:"type",value:function(e){if(this.hasTypes()&&s(this.types(),e))return new w(s(this.types(),e),this)}},{key:"ext",value:function(){return this.v1||this.v2?m:this.metadata[13]||m}}]),e}(),_=function(){function e(t,n){i(this,e),this._format=t,this.metadata=n}return a(e,[{key:"pattern",value:function(){return this._format[0]}},{key:"format",value:function(){return this._format[1]}},{key:"leadingDigitsPatterns",value:function(){return this._format[2]||[]}},{key:"nationalPrefixFormattingRule",value:function(){return this._format[3]||this.metadata.nationalPrefixFormattingRule()}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return!!this._format[4]||this.metadata.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"nationalPrefixIsMandatoryWhenFormattingInNationalFormat",value:function(){return this.usesNationalPrefix()&&!this.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"usesNationalPrefix",value:function(){return this.nationalPrefixFormattingRule()&&!y.test(this.nationalPrefixFormattingRule())}},{key:"internationalFormat",value:function(){return this._format[5]||this.format()}}]),e}(),y=/^\(?\$1\)?$/,w=function(){function e(t,n){i(this,e),this.type=t,this.metadata=n}return a(e,[{key:"pattern",value:function(){return this.metadata.v1?this.type:this.type[0]}},{key:"possibleLengths",value:function(){if(!this.metadata.v1)return this.type[1]||this.metadata.possibleLengths()}}]),e}(),x=function(e){return"object"===r(e)},k=function(e){return r(e)}},function(e,t,n){n(174);for(var r=n(6),i=n(32),o=n(41),a=n(10)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<s.length;l++){var c=s[l],u=r[c],d=u&&u.prototype;d&&!d[a]&&i(d,a,c),o[c]=o.Array}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(95),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,i.default)(e)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=!0},function(e,t,n){var r=n(62)("meta"),i=n(9),o=n(31),a=n(23).f,s=0,l=Object.isExtensible||function(){return!0},c=!n(33)(function(){return l(Object.preventExtensions({}))}),u=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},d=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!l(e))return"F";if(!t)return"E";u(e)}return e[r].i},f=function(e,t){if(!o(e,r)){if(!l(e))return!0;if(!t)return!1;u(e)}return e[r].w},p=function(e){return c&&h.NEED&&l(e)&&!o(e,r)&&u(e),e},h=e.exports={KEY:r,NEED:!1,fastKey:d,getWeak:f,onFreeze:p}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MSG_TYPE=t.LOG_TYPE_ENUM=t.LOG_TYPE=t.THEME=t.COLORS=t.DARK_THEME=t.DARK_COLORS=t.LIGHT_THEME=t.LIGHT_COLORS=t.IS_DARK_MODE=t.PLUGED_ATTR=t.DEBUG_ATTR=t.PROXIED_ATTR=t.INSTANCE_NAME=void 0;var r=n(195),i=(t.INSTANCE_NAME="tracker.name",t.PROXIED_ATTR="tracker.proxyed",t.DEBUG_ATTR="trace.debug",t.PLUGED_ATTR="tracker.pluged",t.IS_DARK_MODE=window.matchMedia("(prefers-color-scheme: dark)").matches),o=t.LIGHT_COLORS=["#0b0","#2196f3","#c9c955","#607d8b","#3f51b5","#893ab7","#9c27b0","#9c0","#06c","#052","#66c","#996","#f93","#630","#c90","#692","#903","#c33","#303","#069"],a=t.LIGHT_THEME={totalLabelBgColor:"#ccc",timeLabelBgColor:"#ccc",msgErrorBgColor:"#b00",msgInfoColor:"#bbb",msgWarnColor:"#000",msgWarnBgColor:"#ff0",tagColor:"#666",tagBgColor:"#fff",tagStyle:"border: 1px solid #bbb;",listLabelColor:"#999",listInfoColor:"#555",listLabelWarningColor:"#aa0",listInfoWarningColor:"#f00",logMsgColor:"#009"},s=t.DARK_COLORS=o.map(r.invertColor),l=t.DARK_THEME={totalLabelBgColor:"#999",timeLabelBgColor:"#999",msgErrorBgColor:"#8dd",msgInfoColor:"#aaa",msgWarnColor:"#fefefe",msgWarnBgColor:"#06f",tagColor:"#777",tagBgColor:"#fefefe",tagStyle:"border: 1px solid #666;",listLabelColor:"#888",listInfoColor:"#ccc",listLabelWarningColor:"#4bf",listInfoWarningColor:"#8ff",logMsgColor:"#ff6"};t.COLORS=i?s:o,t.THEME=i?l:a,t.LOG_TYPE={TRACE:0,INFO:1,WARN:2,EEROR:3},t.LOG_TYPE_ENUM={0:"TRACE",1:"INFO",2:"WARN",3:"EEROR"},t.MSG_TYPE={TIME:0,LABEL:1,MSG:2,TOTAL_LABEL:3,TAGS:4,LIST:5}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(23).f,i=n(31),o=n(10)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){var r=n(30),i=n(115),o=n(116),a=n(12),s=n(65),l=n(91),c={},u={},t=e.exports=function(e,t,n,d,f){var p,h,g,m,v=f?function(){return e}:l(e),b=r(n,d,t?2:1),_=0;if("function"!=typeof v)throw TypeError(e+" is not iterable!");if(o(v)){for(p=s(e.length);p>_;_++)if((m=t?b(a(h=e[_])[0],h[1]):b(e[_]))===c||m===u)return m}else for(g=v.call(e);!(h=g.next()).done;)if((m=i(g,b,h.value,t))===c||m===u)return m};t.BREAK=c,t.RETURN=u},function(e,t,n){(function(r){function i(){return"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function o(){var e=arguments,n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var i=0,o=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,r),e}function a(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}}function l(){try{return t.storage.debug}catch(e){}if(void 0!==r&&"env"in r)return Object({NODE_ENV:"production"}).DEBUG}t=e.exports=n(323),t.log=a,t.formatArgs=o,t.save=s,t.load=l,t.useColors=i,t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(l())}).call(t,n(150))},function(e,t,n){e.exports={default:n(191),__esModule:!0}},function(e,t,n){e.exports={default:n(262),__esModule:!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return function(t){return{}.toString.call(t)==="[object "+e+"]"}},i=r("Object"),o=r("String"),a=Array.isArray||r("Array"),s=r("Function"),l=r("Number"),c=r("RegExp"),u=r("Undefined");t.isObject=i,t.isString=o,t.isArray=a,t.isFunction=s,t.isNumber=l,t.isRegExp=c,t.isUndefined=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.status={0:"normal",1:"connect",2:"calling",3:"online",4:"over",13:"stopService",19:"error",20:"hold",21:"unHold",22:"transfer",23:"consult",24:"consultBack",33:"prepare",35:"consultTransfer",36:"multi",37:"monitor",38:"breakIn",39:"breakDown",300:"postEdit"},t.statusCode={normal:0,connect:1,calling:2,online:3,over:4,stopService:13,error:19,hold:20,unHold:21,transfer:22,consult:23,consultBack:24,consultTransfer:35,multi:36,monitor:37,breakIn:38,breakDown:39,postEdit:300},t.consultTypeCode={employee:1,systemservice:2,outline:3},t.callTypeCode={normal:1,consult:2,transfer:3,monitor:4,breakIn:5,breakDown:6,other:0},t.answerType={pstn:1,voip:2,hardware:4},t.callClientType={agent:0,customer:1},t.callDirection={callIn:1,callOut:2},t.routeType=["轮询分配","空闲最长优先","通话次数最少优先","平均空闲最长优先","技能分优先","自定义API"]},function(e,t,n){var r=n(12),i=n(143),o=n(81),a=n(79)("IE_PROTO"),s=function(){},l=function(){var e,t=n(75)("iframe"),r=o.length;for(t.style.display="none",n(107).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;r--;)delete l.prototype[o[r]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=l(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(52),i=n(50),o=n(29),a=n(76),s=n(31),l=n(105),c=Object.getOwnPropertyDescriptor;t.f=n(16)?c:function(e,t){if(e=o(e),t=a(t,!0),l)try{return c(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(78),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){var r=n(9);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){t.f=n(10)},function(e,t,n){e.exports=n(266)},function(e,t,n){"use strict";t.__esModule=!0;var r=n(14),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e){return function(){var t=e.apply(this,arguments);return new i.default(function(e,n){function r(o,a){try{var s=t[o](a),l=s.value}catch(e){return void n(e)}if(!s.done)return i.default.resolve(l).then(function(e){r("next",e)},function(e){r("throw",e)});e(l)}return r("next")})}}},function(e,t,n){(function(e){function r(e,n){return n("b"+t.packets[e.type]+e.data.data)}function i(e,n,r){if(!n)return t.encodeBase64Packet(e,r);var i=e.data,o=new Uint8Array(i),a=new Uint8Array(1+i.byteLength);a[0]=b[e.type];for(var s=0;s<o.length;s++)a[s+1]=o[s];return r(a.buffer)}function o(e,n,r){if(!n)return t.encodeBase64Packet(e,r);var i=new FileReader;return i.onload=function(){e.data=i.result,t.encodePacket(e,n,!0,r)},i.readAsArrayBuffer(e.data)}function a(e,n,r){if(!n)return t.encodeBase64Packet(e,r);if(v)return o(e,n,r);var i=new Uint8Array(1);return i[0]=b[e.type],r(new w([i.buffer,e.data]))}function s(e){try{e=h.decode(e)}catch(e){return!1}return e}function l(e,t,n){for(var r=new Array(e.length),i=p(e.length,n),o=0;o<e.length;o++)!function(e,n,i){t(n,function(t,n){r[e]=n,i(t,r)})}(o,e[o],i)}var c,u=n(337),d=n(207),f=n(338),p=n(339),h=n(340);e&&e.ArrayBuffer&&(c=n(341));var g="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),m="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),v=g||m;t.protocol=3;var b=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},_=u(b),y={type:"error",data:"parser error"},w=n(342);t.encodePacket=function(t,n,o,s){"function"==typeof n&&(s=n,n=!1),"function"==typeof o&&(s=o,o=null);var l=void 0===t.data?void 0:t.data.buffer||t.data;if(e.ArrayBuffer&&l instanceof ArrayBuffer)return i(t,n,s);if(w&&l instanceof e.Blob)return a(t,n,s);if(l&&l.base64)return r(t,s);var c=b[t.type];return void 0!==t.data&&(c+=o?h.encode(String(t.data)):String(t.data)),s(""+c)},t.encodeBase64Packet=function(n,r){var i="b"+t.packets[n.type];if(w&&n.data instanceof e.Blob){var o=new FileReader;return o.onload=function(){var e=o.result.split(",")[1];r(i+e)},o.readAsDataURL(n.data)}var a;try{a=String.fromCharCode.apply(null,new Uint8Array(n.data))}catch(e){for(var s=new Uint8Array(n.data),l=new Array(s.length),c=0;c<s.length;c++)l[c]=s[c];a=String.fromCharCode.apply(null,l)}return i+=e.btoa(a),r(i)},t.decodePacket=function(e,n,r){if(void 0===e)return y;if("string"==typeof e){if("b"==e.charAt(0))return t.decodeBase64Packet(e.substr(1),n);if(r&&!1===(e=s(e)))return y;var i=e.charAt(0);return Number(i)==i&&_[i]?e.length>1?{type:_[i],data:e.substring(1)}:{type:_[i]}:y}var o=new Uint8Array(e),i=o[0],a=f(e,1);return w&&"blob"===n&&(a=new w([a])),{type:_[i],data:a}},t.decodeBase64Packet=function(e,t){var n=_[e.charAt(0)];if(!c)return{type:n,data:{base64:!0,data:e.substr(1)}};var r=c.decode(e.substr(1));return"blob"===t&&w&&(r=new w([r])),{type:n,data:r}},t.encodePayload=function(e,n,r){function i(e){return e.length+":"+e}function o(e,r){t.encodePacket(e,!!a&&n,!0,function(e){r(null,i(e))})}"function"==typeof n&&(r=n,n=null);var a=d(e);return n&&a?w&&!v?t.encodePayloadAsBlob(e,r):t.encodePayloadAsArrayBuffer(e,r):e.length?void l(e,o,function(e,t){return r(t.join(""))}):r("0:")},t.decodePayload=function(e,n,r){if("string"!=typeof e)return t.decodePayloadAsBinary(e,n,r);"function"==typeof n&&(r=n,n=null);var i;if(""==e)return r(y,0,1);for(var o,a,s="",l=0,c=e.length;l<c;l++){var u=e.charAt(l);if(":"!=u)s+=u;else{if(""==s||s!=(o=Number(s)))return r(y,0,1);if(a=e.substr(l+1,o),s!=a.length)return r(y,0,1);if(a.length){if(i=t.decodePacket(a,n,!0),y.type==i.type&&y.data==i.data)return r(y,0,1);if(!1===r(i,l+o,c))return}l+=o,s=""}}return""!=s?r(y,0,1):void 0},t.encodePayloadAsArrayBuffer=function(e,n){function r(e,n){t.encodePacket(e,!0,!0,function(e){return n(null,e)})}if(!e.length)return n(new ArrayBuffer(0));l(e,r,function(e,t){var r=t.reduce(function(e,t){var n;return n="string"==typeof t?t.length:t.byteLength,e+n.toString().length+n+2},0),i=new Uint8Array(r),o=0;return t.forEach(function(e){var t="string"==typeof e,n=e;if(t){for(var r=new Uint8Array(e.length),a=0;a<e.length;a++)r[a]=e.charCodeAt(a);n=r.buffer}i[o++]=t?0:1;for(var s=n.byteLength.toString(),a=0;a<s.length;a++)i[o++]=parseInt(s[a]);i[o++]=255;for(var r=new Uint8Array(n),a=0;a<r.length;a++)i[o++]=r[a]}),n(i.buffer)})},t.encodePayloadAsBlob=function(e,n){function r(e,n){t.encodePacket(e,!0,!0,function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var r=new Uint8Array(e.length),i=0;i<e.length;i++)r[i]=e.charCodeAt(i);e=r.buffer,t[0]=0}for(var o=e instanceof ArrayBuffer?e.byteLength:e.size,a=o.toString(),s=new Uint8Array(a.length+1),i=0;i<a.length;i++)s[i]=parseInt(a[i]);if(s[a.length]=255,w){var l=new w([t.buffer,s.buffer,e]);n(null,l)}})}l(e,r,function(e,t){return n(new w(t))})},t.decodePayloadAsBinary=function(e,n,r){"function"==typeof n&&(r=n,n=null);for(var i=e,o=[],a=!1;i.byteLength>0;){for(var s=new Uint8Array(i),l=0===s[0],c="",u=1;255!=s[u];u++){if(c.length>310){a=!0;break}c+=s[u]}if(a)return r(y,0,1);i=f(i,2+c.length),c=parseInt(c);var d=f(i,0,c);if(l)try{d=String.fromCharCode.apply(null,new Uint8Array(d))}catch(e){var p=new Uint8Array(d);d="";for(var u=0;u<p.length;u++)d+=String.fromCharCode(p[u])}o.push(d),i=f(i,c)}var h=o.length;o.forEach(function(e,i){r(t.decodePacket(e,n,!0),i,h)})}}).call(t,n(15))},function(e,t,n){var r=n(47),i=n(10)("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),i))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(32);e.exports=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:r(e,i,t[i]);return e}},function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"b",function(){return i}),n.d(t,"a",function(){return o}),n.d(t,"e",function(){return a}),n.d(t,"f",function(){return s}),n.d(t,"d",function(){return l});var r=2,i=17,o=3,a="0-9０-９٠-٩۰-۹",s="".concat("-‐-―−ー－").concat("／/").concat("．.").concat("  ­​⁠　").concat("()（）［］\\[\\]").concat("~⁓∼～"),l="+＋"},function(e,t,n){var r=n(9),i=n(6).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(9);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(80)("keys"),i=n(62);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(2),i=n(6),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(48)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(6),i=n(2),o=n(48),a=n(67),s=n(23).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,n){"use strict";function r(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=i(t),this.reject=i(n)}var i=n(37);e.exports.f=function(e){return new r(e)}},function(e,t,n){e.exports={default:n(216),__esModule:!0}},function(e,t,n){var r=n(106),i=n(81).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){"use strict";var r=n(48),i=n(3),o=n(93),a=n(32),s=n(41),l=n(175),c=n(53),u=n(94),d=n(10)("iterator"),f=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,h,g,m,v){l(n,t,h);var b,_,y,w=function(e){if(!f&&e in C)return C[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},x=t+" Iterator",k="values"==g,S=!1,C=e.prototype,T=C[d]||C["@@iterator"]||g&&C[g],E=T||w(g),I=g?k?w("entries"):E:void 0,A="Array"==t?C.entries||T:T;if(A&&(y=u(A.call(new e)))!==Object.prototype&&y.next&&(c(y,x,!0),r||"function"==typeof y[d]||a(y,d,p)),k&&T&&"values"!==T.name&&(S=!0,E=function(){return T.call(this)}),r&&!v||!f&&!S&&C[d]||a(C,d,E),s[t]=E,s[x]=p,g)if(b={values:k?E:w("values"),keys:m?E:w("keys"),entries:I},v)for(_ in b)_ in C||o(C,_,b[_]);else i(i.P+i.F*(f||S),t,b);return b}},function(e,t,n){function r(e){if(e)return i(e)}function i(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r,i=0;i<n.length;i++)if((r=n[i])===t||r.fn===t){n.splice(i,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){"use strict";function r(e){if(e)return i(e)}function i(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}Object.defineProperty(t,"__esModule",{value:!0}),t.Emitter=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r,i=0;i<n.length;i++)if((r=n[i])===t||r.fn===t){n.splice(i,1);break}return 0===n.length&&delete this._callbacks["$"+e],this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,t)}return this},r.prototype.emitReserved=r.prototype.emit,r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){e.exports={default:n(277),__esModule:!0}},function(e,t,n){var r=n(47);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(71),i=n(10)("iterator"),o=n(41);e.exports=n(2).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.eventBus=void 0;var i=n(46),o=r(i),a=n(8),s=r(a),l=n(4),c=r(l),u=n(5),d=r(u),f=n(42),p=[].slice,h=/\s+/,g=function(){return!0},m=function(e,t,n){(e||"").split(h).forEach(function(e){n(e,t)})},v=function(e){return new RegExp("(?:^|)"+e.replace(" "," .* ?")+"(?: |$)")},b=function(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}},_=function(e,t,n,r){var i=void 0,o=void 0;return o=b(t),o.ns&&(i=v(o.ns)),e.filter(function(e){return e&&(!o.e||e.e===o.e)&&(!o.ns||i.test(e.ns))&&(!n||e.cb===n||e.cb._cb===n)&&(!r||e.ctx===r)})},y=function(){function e(t,n){if((0,c.default)(this,e),!(this instanceof e))return new e(t,n);n&&(0,s.default)(this,n),this.type=t}return(0,d.default)(e,[{key:"isDefaultPrevented",value:function(){return!1}},{key:"isPropagationStopped",value:function(){return!1}},{key:"preventDefault",value:function(){this.isDefaultPrevented=g}},{key:"stopPropagation",value:function(){this.isPropagationStopped=g}}]),e}(),w=function(){function e(){(0,c.default)(this,e)}return(0,d.default)(e,[{key:"$on",value:function(e,t,n,r){var i=this,o=void 0;return t?(o=this._events||(this._events=[]),m(e,t,function(e,t){var a=b(e);a.cb=t,a.ctx=r,a.ctx2=r||i,a.args=n,a.id=o.length,o.push(a)}),this):this}},{key:"$once",value:function(e,t,n,r){var i=this;return t?(m(e,t,function(e,t){var o=function n(){return i.$off(e,n),t.apply(r||i,arguments)};o._cb=t,i.$on(e,o,n,r)}),this):this}},{key:"$one",value:function(e,t,n,r){var i=this;return t?(m(e,t,function(e,t){i.$off(e),i.$on(e,t,n,r)}),this):this}},{key:"$off",value:function(e,t,n){var r=this._events;return r?e||t||n?(m(e,t,function(e,t){_(r,e,t,n).forEach(function(e){delete r[e.id]})}),this):(this._events=[],this):this}},{key:"$trigger",value:function(e,t){var n=-1,r=void 0===t,i=void 0,a=void 0,s=void 0,l=void 0,c=!0;if(t=r?[]:(0,f.isArray)(t)?t:p.call(arguments,1),!this._events||!e)return this;if("string"==typeof e&&(e=new y(e)),e.args=[].concat((0,o.default)(t)),i=_(this._events,e.type),s=i.length)for(;++n<s;)if(l=i[n],r&&(t=[l.args]),(a=e.isPropagationStopped())||!1===l.cb.apply(l.ctx2,t)){c=!1,a||(e.stopPropagation(),e.preventDefault());break}return c}},{key:"$isEvent",value:function(e){return e instanceof y}}]),e}();t.eventBus=new w;t.default=w},function(e,t,n){e.exports=n(32)},function(e,t,n){var r=n(31),i=n(36),o=n(79)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){e.exports={default:n(227),__esModule:!0}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){e&&(0,p.isFunction)(e)&&v.push(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.Player=void 0;var o=n(68),a=r(o),s=n(69),l=r(s),c=n(4),u=r(c),d=n(5),f=r(d);t.registerSilentCb=i;var p=n(58),h=n(7),g=r(h),m=new g.default("player"),v=[],b=t.Player=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.default)(this,e);var n=this.el=new Audio;!t.autoplay&&n.setAttribute("autoplay","autoplay"),n.setAttribute("playsinline","playsinline"),n.setAttribute("crossOrigin","anonymous"),this.src=t.src,this.volume=t.volume||100,this.setVolume(),this.deviceId=t.deviceId}return(0,f.default)(e,[{key:"play",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,l.default)(a.default.mark(function e(t){var n,r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.URL||window.webkitURL,t=t||this.src){e.next=4;break}return e.abrupt("return");case 4:return"string"==typeof t?this.el.src=t:this.el.srcObject=t,e.prev=5,e.next=8,this.el.play();case 8:e.next=15;break;case 10:e.prev=10,e.t0=e.catch(5),r=e.t0.message,r.includes("interact with the document first")&&v.length>0&&v.forEach(function(e){e()}),m.$warn("play stream error, "+r);case 15:case"end":return e.stop()}},e,this,[[5,10]])}));return e}()},{key:"pause",value:function(){this.el.pause()}},{key:"setLoop",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.el.loop=!!e&&"loop"}},{key:"setVolume",value:function(e){var t=void 0;e=isNaN(parseInt(e,10))?this.volume:e,t=e/100,this.unmute(),this.el.volume=t}},{key:"setMute",value:function(){this.el.muted=!0}},{key:"unmute",value:function(){this.el.muted=!1}},{key:"setSinkId",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,l.default)(a.default.mark(function e(t){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.deviceId===t||!this.el.setSinkId){e.next=4;break}return e.next=3,this.el.setSinkId(t);case 3:this.deviceId=t;case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"setAutoplay",value:function(e){this.el.autoplay=!!e&&"autoplay"}},{key:"setPreload",value:function(e){this.el.preload=e}},{key:"setSrc",value:function(e){this.el.src=e,this.src=e}}]),e}(),_="https://qidian-rhino-1251316161.cos.ap-guangzhou.myqcloud.com/jssdk/dida.mp3",y=new b,w=new b,x=new b,k=new b;w.setLoop(),x.setLoop(),x.setAutoplay(!1),x.setPreload("auto"),x.setSrc(_),k.setLoop(!1),k.setAutoplay(!1),k.setPreload("auto"),k.setSrc(_),t.default={ring:function(){w.play("https://qidian-rhino-1251316161.cos.ap-guangzhou.myqcloud.com/jssdk/ring.wav"),m.$log("incomming ringing")},ringback:function(){w.play("https://qidian-rhino-1251316161.cos.ap-guangzhou.myqcloud.com/jssdk/ringback.wav"),m.$log("calling ringing")},ringPause:function(){w.pause(),m.$log("ringing stopped")},play:function(e){y.play(e),m.$log("play voice")},setVolume:function(e){w.setVolume(e),y.setVolume(e),m.$log("set volume")},setMute:function(){y.setMute(),m.$log("set mute")},unmute:function(){y.unmute(),m.$log("unmute")},setSinkId:function(e){y.setSinkId(e),w.setSinkId(e)},playBg:function(){x.unmute(),x.setVolume(2),x.el.play(),m.$log("bg audio play")},stopBg:function(){x.pause(),m.$log("bg audio pause")},playInteractTone:function(){k.unmute(),k.setVolume(2),k.el.play(),m.$log("interact tone play")},stopInteractTone:function(){k.pause(),m.$log("interact tone pause")}}},function(e,t,n){"use strict";function r(e,t,n){c||(c=new TextDecoder);var r=t||e[0]<48||e[0]>54;return(0,o.decodePacket)(r?e:c.decode(e),n)}Object.defineProperty(t,"__esModule",{value:!0}),t.decodePayload=t.decodePacket=t.encodePayload=t.encodePacketToBinary=t.encodePacket=t.protocol=void 0,t.decodePacketFromBinary=r;var i=n(365),o=n(366),a=String.fromCharCode(30),s=function(e,t){var n=e.length,r=new Array(n),o=0;e.forEach(function(e,s){(0,i.encodePacket)(e,!1,function(e){r[s]=e,++o===n&&t(r.join(a))})})},l=function(e,t){for(var n=e.split(a),r=[],i=0;i<n.length;i++){var s=(0,o.decodePacket)(n[i],t);if(r.push(s),"error"===s.type)break}return r},c=void 0;t.protocol=4;t.encodePacket=i.encodePacket,t.encodePacketToBinary=i.encodePacketToBinary,t.encodePayload=s,t.decodePacket=o.decodePacket,t.decodePayload=l},function(e,t,n){"use strict";function r(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce(function(t,n){return e.hasOwnProperty(n)&&(t[n]=e[n]),t},{})}function i(e,t){t.useNativeTimers?(e.setTimeoutFn=l.bind(s.globalThisShim),e.clearTimeoutFn=c.bind(s.globalThisShim)):(e.setTimeoutFn=s.globalThisShim.setTimeout.bind(s.globalThisShim),e.clearTimeoutFn=s.globalThisShim.clearTimeout.bind(s.globalThisShim))}function o(e){return"string"==typeof e?a(e):Math.ceil((e.byteLength||e.size)*u)}function a(e){for(var t=0,n=0,r=0,i=e.length;r<i;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}Object.defineProperty(t,"__esModule",{value:!0}),t.pick=r,t.installTimerFunctions=i,t.byteLength=o;var s=n(125),l=s.globalThisShim.setTimeout,c=s.globalThisShim.clearTimeout,u=1.33},function(e,t){e.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){e.exports={default:n(251),__esModule:!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPositionHooks=t.setPositionHook=t.getCreateHooks=t.setCreateHook=t.getBeforeCreateHooks=t.setBeforeCreateHooks=void 0;var r=n(35),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=(0,i.default)(null),a=(0,i.default)(null),s=(0,i.default)(null);t.setBeforeCreateHooks=function(e,t){s[e]||(s[e]=t)},t.getBeforeCreateHooks=function(){return s},t.setCreateHook=function(e,t){o[e]||(o[e]=t)},t.getCreateHooks=function(){return o},t.setPositionHook=function(e,t){a[e]||(a[e]=t)},t.getPositionHooks=function(){return a}},function(e,t,n){e.exports={default:n(177),__esModule:!0}},function(e,t,n){e.exports={default:n(178),__esModule:!0}},function(e,t,n){"use strict";var r=n(6),i=n(31),o=n(16),a=n(3),s=n(93),l=n(49).KEY,c=n(33),u=n(80),d=n(53),f=n(62),p=n(10),h=n(67),g=n(82),m=n(179),v=n(120),b=n(12),_=n(9),y=n(36),w=n(29),x=n(76),k=n(50),S=n(60),C=n(108),T=n(61),E=n(64),I=n(23),A=n(39),R=T.f,O=I.f,L=C.f,P=r.Symbol,M=r.JSON,$=M&&M.stringify,N=p("_hidden"),D=p("toPrimitive"),F={}.propertyIsEnumerable,q=u("symbol-registry"),U=u("symbols"),B=u("op-symbols"),j=Object.prototype,V="function"==typeof P&&!!E.f,H=r.QObject,Y=!H||!H.prototype||!H.prototype.findChild,z=o&&c(function(){return 7!=S(O({},"a",{get:function(){return O(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=R(j,t);r&&delete j[t],O(e,t,n),r&&e!==j&&O(j,t,r)}:O,G=function(e){var t=U[e]=S(P.prototype);return t._k=e,t},W=V&&"symbol"==typeof P.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof P},K=function(e,t,n){return e===j&&K(B,t,n),b(e),t=x(t,!0),b(n),i(U,t)?(n.enumerable?(i(e,N)&&e[N][t]&&(e[N][t]=!1),n=S(n,{enumerable:k(0,!1)})):(i(e,N)||O(e,N,k(1,{})),e[N][t]=!0),z(e,t,n)):O(e,t,n)},X=function(e,t){b(e);for(var n,r=m(t=w(t)),i=0,o=r.length;o>i;)K(e,n=r[i++],t[n]);return e},Z=function(e,t){return void 0===t?S(e):X(S(e),t)},J=function(e){var t=F.call(this,e=x(e,!0));return!(this===j&&i(U,e)&&!i(B,e))&&(!(t||!i(this,e)||!i(U,e)||i(this,N)&&this[N][e])||t)},Q=function(e,t){if(e=w(e),t=x(t,!0),e!==j||!i(U,t)||i(B,t)){var n=R(e,t);return!n||!i(U,t)||i(e,N)&&e[N][t]||(n.enumerable=!0),n}},ee=function(e){for(var t,n=L(w(e)),r=[],o=0;n.length>o;)i(U,t=n[o++])||t==N||t==l||r.push(t);return r},te=function(e){for(var t,n=e===j,r=L(n?B:w(e)),o=[],a=0;r.length>a;)!i(U,t=r[a++])||n&&!i(j,t)||o.push(U[t]);return o};V||(P=function(){if(this instanceof P)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function(n){this===j&&t.call(B,n),i(this,N)&&i(this[N],e)&&(this[N][e]=!1),z(this,e,k(1,n))};return o&&Y&&z(j,e,{configurable:!0,set:t}),G(e)},s(P.prototype,"toString",function(){return this._k}),T.f=Q,I.f=K,n(85).f=C.f=ee,n(52).f=J,E.f=te,o&&!n(48)&&s(j,"propertyIsEnumerable",J,!0),h.f=function(e){return G(p(e))}),a(a.G+a.W+a.F*!V,{Symbol:P});for(var ne="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;ne.length>re;)p(ne[re++]);for(var ie=A(p.store),oe=0;ie.length>oe;)g(ie[oe++]);a(a.S+a.F*!V,"Symbol",{for:function(e){return i(q,e+="")?q[e]:q[e]=P(e)},keyFor:function(e){if(!W(e))throw TypeError(e+" is not a symbol!");for(var t in q)if(q[t]===e)return t},useSetter:function(){Y=!0},useSimple:function(){Y=!1}}),a(a.S+a.F*!V,"Object",{create:Z,defineProperty:K,defineProperties:X,getOwnPropertyDescriptor:Q,getOwnPropertyNames:ee,getOwnPropertySymbols:te});var ae=c(function(){E.f(1)});a(a.S+a.F*ae,"Object",{getOwnPropertySymbols:function(e){return E.f(y(e))}}),M&&a(a.S+a.F*(!V||c(function(){var e=P();return"[null]"!=$([e])||"{}"!=$({a:e})||"{}"!=$(Object(e))})),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(_(t)||void 0!==e)&&!W(e))return v(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!W(t))return t}),r[1]=t,$.apply(M,r)}}),P.prototype[D]||n(32)(P.prototype,D,P.prototype.valueOf),d(P,"Symbol"),d(Math,"Math",!0),d(r.JSON,"JSON",!0)},function(e,t,n){e.exports=!n(16)&&!n(33)(function(){return 7!=Object.defineProperty(n(75)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(31),i=n(29),o=n(172)(!1),a=n(79)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),l=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;t.length>l;)r(s,n=t[l++])&&(~o(c,n)||c.push(n));return c}},function(e,t,n){var r=n(6).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(29),i=n(85).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return i(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?s(e):i(r(e))}},function(e,t,n){var r=n(12),i=n(37),o=n(10)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[o])?t:i(n)}},function(e,t,n){var r,i,o,a=n(30),s=n(145),l=n(107),c=n(75),u=n(6),d=u.process,f=u.setImmediate,p=u.clearImmediate,h=u.MessageChannel,g=u.Dispatch,m=0,v={},b=function(){var e=+this;if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},_=function(e){b.call(e.data)};f&&p||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return v[++m]=function(){s("function"==typeof e?e:Function(e),t)},r(m),m},p=function(e){delete v[e]},"process"==n(47)(d)?r=function(e){d.nextTick(a(b,e,1))}:g&&g.now?r=function(e){g.now(a(b,e,1))}:h?(i=new h,o=i.port2,i.port1.onmessage=_,r=a(o.postMessage,o,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(r=function(e){u.postMessage(e+"","*")},u.addEventListener("message",_,!1)):r="onreadystatechange"in c("script")?function(e){l.appendChild(c("script")).onreadystatechange=function(){l.removeChild(this),b.call(e)}}:function(e){setTimeout(a(b,e,1),0)}),e.exports={set:f,clear:p}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var r=n(12),i=n(9),o=n(83);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomColor=void 0;var r=n(51);t.getRandomColor=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.IS_DARK_MODE;return"hsl("+Math.floor(360*Math.random())+", 100%, "+(e?30:60)+"%)"}},function(e,t,n){e.exports={default:n(222),__esModule:!0}},function(e,t,n){var r=n(12);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t,n){var r=n(41),i=n(10)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){var r=n(10)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(e){}return n}},function(e,t,n){e.exports={default:n(231),__esModule:!0}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){var r=n(47);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){"use strict";var r=n(6),i=n(2),o=n(23),a=n(16),s=n(10)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:r[e];a&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(30),i=n(90),o=n(36),a=n(65),s=n(279);e.exports=function(e,t){var n=1==e,l=2==e,c=3==e,u=4==e,d=6==e,f=5==e||d,p=t||s;return function(t,s,h){for(var g,m,v=o(t),b=i(v),_=r(s,h,3),y=a(b.length),w=0,x=n?p(t,y):l?p(t,0):void 0;y>w;w++)if((f||w in b)&&(g=b[w],m=_(g,w,v),e))if(n)x[w]=m;else if(m)switch(e){case 3:return!0;case 5:return g;case 6:return w;case 2:x.push(g)}else if(u)return!1;return d?-1:c||u?u:x}}},function(e,t,n){"use strict";var r=n(23),i=n(50);e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Transport=void 0;var i=n(5),o=r(i),a=n(163),s=r(a),l=n(13),c=r(l),u=n(4),d=r(u),f=n(20),p=r(f),h=n(21),g=r(h),m=n(97),v=n(88),b=n(98),_=n(271),y=function(e){function t(e,n,r){(0,d.default)(this,t);var i=(0,p.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));return i.description=n,i.context=r,i.type="TransportError",i}return(0,g.default)(t,e),t}(Error);t.Transport=function(e){function t(e){(0,d.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,c.default)(t)).call(this));return n.writable=!1,(0,b.installTimerFunctions)(n,e),n.opts=e,n.query=e.query,n.socket=e.socket,n}return(0,g.default)(t,e),(0,o.default)(t,[{key:"onError",value:function(e,n,r){return(0,s.default)(t.prototype.__proto__||(0,c.default)(t.prototype),"emitReserved",this).call(this,"error",new y(e,n,r)),this}},{key:"open",value:function(){return this.readyState="opening",this.doOpen(),this}},{key:"close",value:function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}},{key:"send",value:function(e){"open"===this.readyState&&this.write(e)}},{key:"onOpen",value:function(){this.readyState="open",this.writable=!0,(0,s.default)(t.prototype.__proto__||(0,c.default)(t.prototype),"emitReserved",this).call(this,"open")}},{key:"onData",value:function(e){var t=(0,m.decodePacket)(e,this.socket.binaryType);this.onPacket(t)}},{key:"onPacket",value:function(e){(0,s.default)(t.prototype.__proto__||(0,c.default)(t.prototype),"emitReserved",this).call(this,"packet",e)}},{key:"onClose",value:function(e){this.readyState="closed",(0,s.default)(t.prototype.__proto__||(0,c.default)(t.prototype),"emitReserved",this).call(this,"close",e)}},{key:"pause",value:function(e){}},{key:"createUri",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}},{key:"_hostname",value:function(){var e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}},{key:"_port",value:function(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}},{key:"_query",value:function(e){var t=(0,_.encode)(e);return t.length?"?"+t:""}}]),t}(v.Emitter)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.globalThisShim=function(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()}()},function(e,t,n){"use strict";var r=n(6),i=n(3),o=n(49),a=n(33),s=n(32),l=n(73),c=n(54),u=n(72),d=n(9),f=n(53),p=n(23).f,h=n(122)(0),g=n(16);e.exports=function(e,t,n,m,v,b){var _=r[e],y=_,w=v?"set":"add",x=y&&y.prototype,k={};return g&&"function"==typeof y&&(b||x.forEach&&!a(function(){(new y).entries().next()}))?(y=t(function(t,n){u(t,y,e,"_c"),t._c=new _,void 0!=n&&c(n,v,t[w],t)}),h("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in x&&(!b||"clear"!=e)&&s(y.prototype,e,function(n,r){if(u(this,y,e),!t&&b&&!d(n))return"get"==e&&void 0;var i=this._c[e](0===n?0:n,r);return t?this:i})}),b||p(y.prototype,"size",{get:function(){return this._c.size}})):(y=m.getConstructor(t,e,v,w),l(y.prototype,n),o.NEED=!0),f(y,e),k[e]=y,i(i.G+i.W+i.F,k),b||m.setStrong(y,e,v),y}},function(e,t,n){"use strict";var r=n(3);e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){"use strict";var r=n(3),i=n(37),o=n(30),a=n(54);e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,s,l=arguments[1];return i(this),t=void 0!==l,t&&i(l),void 0==e?new this:(n=[],t?(r=0,s=o(l,arguments[2],2),a(e,!1,function(e){n.push(s(e,r++))})):a(e,!1,n.push,n),new this(n))}})}},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";function r(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var i=n(17);e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(i.isURLSearchParams(t))o=t.toString();else{var a=[];i.forEach(t,function(e,t){null!==e&&void 0!==e&&(i.isArray(e)?t+="[]":e=[e],i.forEach(e,function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),a.push(r(t)+"="+r(e))}))}),o=a.join("&")}if(o){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";(function(t){function r(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var i=n(17),o=n(240),a={"Content-Type":"application/x-www-form-urlencoded"},s={adapter:function(){var e;return"undefined"!=typeof XMLHttpRequest?e=n(133):void 0!==t&&"[object process]"===Object.prototype.toString.call(t)&&(e=n(133)),e}(),transformRequest:[function(e,t){return o(t,"Accept"),o(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(r(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)?(r(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};s.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],function(e){s.headers[e]={}}),i.forEach(["post","put","patch"],function(e){s.headers[e]=i.merge(a)}),e.exports=s}).call(t,n(150))},function(e,t,n){"use strict";var r=n(17),i=n(241),o=n(130),a=n(243),s=n(246),l=n(247),c=n(134);e.exports=function(e){return new Promise(function(t,u){var d=e.data,f=e.headers;r.isFormData(d)&&delete f["Content-Type"];var p=new XMLHttpRequest;if(e.auth){var h=e.auth.username||"",g=e.auth.password||"";f.Authorization="Basic "+btoa(h+":"+g)}var m=a(e.baseURL,e.url);if(p.open(e.method.toUpperCase(),o(m,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,p.onreadystatechange=function(){if(p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in p?s(p.getAllResponseHeaders()):null,r=e.responseType&&"text"!==e.responseType?p.response:p.responseText,o={data:r,status:p.status,statusText:p.statusText,headers:n,config:e,request:p};i(t,u,o),p=null}},p.onabort=function(){p&&(u(c("Request aborted",e,"ECONNABORTED",p)),p=null)},p.onerror=function(){u(c("Network Error",e,null,p)),p=null},p.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),u(c(t,e,"ECONNABORTED",p)),p=null},r.isStandardBrowserEnv()){var v=n(248),b=(e.withCredentials||l(m))&&e.xsrfCookieName?v.read(e.xsrfCookieName):void 0;b&&(f[e.xsrfHeaderName]=b)}if("setRequestHeader"in p&&r.forEach(f,function(e,t){void 0===d&&"content-type"===t.toLowerCase()?delete f[t]:p.setRequestHeader(t,e)}),r.isUndefined(e.withCredentials)||(p.withCredentials=!!e.withCredentials),e.responseType)try{p.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){p&&(p.abort(),u(e),p=null)}),void 0===d&&(d=null),p.send(d)})}},function(e,t,n){"use strict";var r=n(242);e.exports=function(e,t,n,i,o){var a=new Error(e);return r(a,t,n,i,o)}},function(e,t,n){"use strict";var r=n(17);e.exports=function(e,t){t=t||{};var n={},i=["url","method","params","data"],o=["headers","auth","proxy"],a=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];r.forEach(i,function(e){void 0!==t[e]&&(n[e]=t[e])}),r.forEach(o,function(i){r.isObject(t[i])?n[i]=r.deepMerge(e[i],t[i]):void 0!==t[i]?n[i]=t[i]:r.isObject(e[i])?n[i]=r.deepMerge(e[i]):void 0!==e[i]&&(n[i]=e[i])}),r.forEach(a,function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])});var s=i.concat(o).concat(a),l=Object.keys(t).filter(function(e){return-1===s.indexOf(e)});return r.forEach(l,function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])}),n}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){"use strict";t.__esModule=!0;var r=n(8),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=i.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},function(e,t,n){"use strict";function r(e,t){return e=e||"",new RegExp("^(?:"+t+")$").test(e)}function i(e,t){for(var n=e.slice(),r=t,i=Array.isArray(r),o=0,r=i?r:r[Symbol.iterator]();;){var a;if(i){if(o>=r.length)break;a=r[o++]}else{if(o=r.next(),o.done)break;a=o.value}var s=a;e.indexOf(s)<0&&n.push(s)}return n.sort(function(e,t){return e-t})}t.a=r,t.b=i},function(e,t,n){"use strict";function r(e,t,n){if(t=t||{},e.country){n=new a.a(n),n.selectNumberingPlan(e.country,e.countryCallingCode);var r=t.v2?e.nationalNumber:e.phone;if(Object(s.a)(r,n.nationalNumberPattern())){if(i(r,"FIXED_LINE",n))return n.type("MOBILE")&&""===n.type("MOBILE").pattern()?"FIXED_LINE_OR_MOBILE":n.type("MOBILE")?i(r,"MOBILE",n)?"FIXED_LINE_OR_MOBILE":"FIXED_LINE":"FIXED_LINE_OR_MOBILE";for(var o=0,c=l;o<c.length;o++){var u=c[o];if(i(r,u,n))return u}}}}function i(e,t,n){return!(!(t=n.type(t))||!t.pattern())&&(!(t.possibleLengths()&&t.possibleLengths().indexOf(e.length)<0)&&Object(s.a)(e,t.pattern()))}function o(e,t,n){var r=n.type(t),i=r&&r.possibleLengths()||n.possibleLengths();if(!i)return"IS_POSSIBLE";if("FIXED_LINE_OR_MOBILE"===t){if(!n.type("FIXED_LINE"))return o(e,"MOBILE",n);var a=n.type("MOBILE");a&&(i=Object(s.b)(i,a.possibleLengths()))}else if(t&&!r)return"INVALID_LENGTH";var l=e.length,c=i[0];return c===l?"IS_POSSIBLE":c>l?"TOO_SHORT":i[i.length-1]<l?"TOO_LONG":i.indexOf(l,1)>=0?"IS_POSSIBLE":"INVALID_LENGTH"}t.b=r,t.a=o;var a=n(44),s=n(138),l=["MOBILE","PREMIUM_RATE","TOLL_FREE","SHARED_COST","VOIP","PERSONAL_NUMBER","PAGER","UAN","VOICEMAIL"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(28),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=function e(t,n){return e["object"===(void 0===n?"undefined":(0,i.default)(n))?"render":"compile"].apply(e,arguments)};!function(e,t){e.version="2.0.0",e.openTag="<%",e.closeTag="%>",e.isEscape=!0,e.isCompress=!1,e.parser=null,e.render=function(e,t){var n=r(e);return void 0===n?i({id:e,name:"Render Error",message:"No Template"}):n(t)},e.compile=function(t,r){function a(n){try{return new c(n)+""}catch(o){return l?(o.id=t||r,o.name="Render Error",o.source=r,i(o)):e.compile(t,r,!0)(n)}}var s=arguments,l=s[2];"string"!=typeof r&&(l=s[1],r=s[0],t="anonymous");try{var c=o(r,l)}catch(e){return e.id=t||r,e.name="Syntax Error",i(e)}return a.prototype=c.prototype,a.toString=function(){return c.toString()},"anonymous"!==t&&(n[t]=a),a},e.helper=function(t,n){e.prototype[t]=n},e.onerror=function(e){var n="[template]:\n"+e.id+"\n\n[name]:\n"+e.name;e.message&&(n+="\n\n[message]:\n"+e.message),e.line&&(n+="\n\n[line]:\n"+e.line,n+="\n\n[source]:\n"+e.source.split(/\n/)[e.line-1].replace(/^[\s\t]+/,"")),e.temp&&(n+="\n\n[temp]:\n"+e.temp),t.console&&console.error(n)};var n={},r=function(r){var i=n[r];if(void 0===i&&"document"in t){var o=document.getElementById(r);if(o){var a=o.value||o.innerHTML;return e.compile(r,a.replace(/^\s*|\s*$/g,""))}}else if(n.hasOwnProperty(r))return i},i=function(t){function n(){return n+""}return e.onerror(t),n.toString=function(){return"{Template Error}"},n},o=function(){e.prototype={$render:e.render,$escapeHTML:function(e){return"string"==typeof e?e.replace(/&(?![\w#]+;)|[<>"']/g,function(e){return{"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"}[e]}):e},$specialCharEscapeHTML:function(e){return"string"==typeof e?e.replace(/(['"\\\/])/g,"\\$1"):e},$getValue:function(e){return"string"==typeof e||"number"==typeof e?e:"function"==typeof e?e():""}};var t=Array.prototype.forEach||function(e,t){for(var n=this.length>>>0,r=0;r<n;r++)r in this&&e.call(t,this[r],r,this)},n=function(e,n){t.call(e,n)},r="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined",i=new RegExp(["/\\*(.|\n)*?\\*/|//[^\n]*\n|//[^\n]*$","'[^']*'|\"[^\"]*\"","\\.[s\t\n]*[\\$\\w]+","\\b"+r.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),o=function(e){return e=e.replace(i,",").replace(/[^\w\$]+/g,",").replace(/^,|^\d+|,\d+|,$/g,""),e?e.split(","):[]};return function(t,r){function i(t){return h+=t.split(/\n/).length-1,e.isCompress&&(t=t.replace(/[\n\r\t\s]+/g," ")),t=t.replace(/('|"|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n"),(t=y[1]+"'"+t+"'"+y[2])+"\n"}function a(t){var n=h;if(d?t=d(t):r&&(t=t.replace(/\n/g,function(){return"$line="+ ++h+";"})),0===t.indexOf("=")){var i=0!==t.indexOf("=="),o=0===t.indexOf("#=");if(t=t.replace(/^=*|[\s;]*$/g,""),(i||o)&&e.isEscape){var a=t.replace(/\s*\([^\)]+\)/,"");m.hasOwnProperty(a)||/^(include|print)$/.test(a)||(t=(o?"$specialCharEscapeHTML":"$escapeHTML")+"($getValue("+t+"))")}else t="$getValue("+t+")";t=y[1]+t+y[2]}return r&&(t="$line="+n+";"+t),s(t),t+"\n"}function s(e){e=o(e),n(e,function(e){g.hasOwnProperty(e)||(l(e),g[e]=!0)})}function l(e){var t;"print"===e?t=x:"include"===e?(v.$render=m.$render,t=k):(t="$data."+e,m.hasOwnProperty(e)&&(v[e]=m[e],t=0===e.indexOf("$")?"$helpers."+e:t+"===undefined?$helpers."+e+":"+t)),b+=e+"="+t+","}var c=e.openTag,u=e.closeTag,d=e.parser,f=t,p="",h=1,g={$data:!0,$helpers:!0,$out:!0,$line:!0},m=e.prototype,v={},b="var $helpers=this,"+(r?"$line=0,":""),_="".trim,y=_?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],w=_?"if(content!==undefined){$out+=content;return content}":"$out.push(content);",x="function(content){"+w+"}",k="function(id,data){if(data===undefined){data=$data}var content=$helpers.$render(id,data);"+w+"}";n(f.split(c),function(e,t){e=e.split(u);var n=e[0],r=e[1];1===e.length?p+=i(n):(p+=a(n),r&&(p+=i(r)))}),f=p,r&&(f="try{"+f+"}catch(e){e.line=$line;throw e}"),f="'use strict';"+b+y[0]+f+"return new String("+y[3]+")";try{var S=new Function("$data",f);return S.prototype=v,S}catch(e){throw e.temp="function anonymous($data) {"+f+"}",e}}}()}(o,window),t.default=o},function(e,t,n){e.exports=n(235)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),o=r(i),a=n(8),s=r(a),l=n(57),c=r(l),u=n(13),d=r(u),f=n(4),p=r(f),h=n(20),g=r(h),m=n(21),v=r(m),b=function(){var e=function(e){function t(){return(0,p.default)(this,t),(0,g.default)(this,(t.__proto__||(0,d.default)(t)).apply(this,arguments))}return(0,v.default)(t,e),t}(this);e.prototype.constructor=this;for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=!0,o=!1,a=void 0;try{for(var l,u=(0,c.default)(n);!(i=(l=u.next()).done);i=!0){var f=l.value;f&&(f.prototype&&(0,s.default)(e,f),(0,s.default)(e.prototype,f.prototype||f))}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}return e},_=function(){function e(){(0,p.default)(this,e)}return(0,o.default)(e,[{key:"extend",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,l=(0,c.default)(t);!(r=(a=l.next()).done);r=!0){var u=a.value;u&&(0,s.default)(this,u.prototype||u)}}catch(e){i=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(i)throw o}}return this}}],[{key:"extend",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return b.apply(this,t)}}]),e}();t.default=_},function(e,t,n){var r=n(23),i=n(12),o=n(39);e.exports=n(16)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,l=0;s>l;)r.f(e,n=a[l++],t[n]);return e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getEvents=t.isEvent=t.trigger=t.off=t.one=t.once=t.on=void 0;var i=n(46),o=r(i),a=n(8),s=r(a),l=n(4),c=r(l),u=n(5),d=r(u),f=n(58),p=/\s+/,h=function(){return!0},g=function(e,t,n){(e||"").split(p).forEach(function(e){n(e,t)})},m=function(e){return new RegExp("(?:^|)"+e.replace(" "," .* ?")+"(?: |$)")},v=function(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}},b=function(e,t,n,r){var i=void 0,o=void 0;return o=v(t),o.ns&&(i=m(o.ns)),e&&(!o.e||e.e===o.e)&&(!o.ns||i.test(e.ns))&&(!n||e.cb===n||e.cb._cb===n)&&(!r||e.ctx===r)},_=function(e,t,n,r){return e.filter(function(e){return b(e,t,n,r)})},y=function(e){return e?_(this._events,e):this._events},w=function(){function e(t,n){if((0,c.default)(this,e),!(this instanceof e))return new e(t,n);n&&(0,s.default)(this,n),this.type=t}return(0,d.default)(e,[{key:"isDefaultPrevented",value:function(){return!1}},{key:"isPropagationStopped",value:function(){return!1}},{key:"preventDefault",value:function(){this.isDefaultPrevented=h}},{key:"stopPropagation",value:function(){this.isPropagationStopped=h}}]),e}(),x=function(e,t,n,r){var i=this,o=void 0;return t?(o=this._events||(this._events=[]),g(e,t,function(e,t){var a=v(e);a.cb=t,a.ctx=r,a.ctx2=r||i,a.args=n,o.push(a)}),this):this},k=function(e,t,n,r){var i=this;return t?(g(e,t,function(e,t){var o=function n(){return i.off(e,n),t.apply(r||i,arguments)};o._cb=t,i.on(e,o,n,r)}),this):this},S=function(e,t,n,r){var i=this;return t?(g(e,t,function(e,t){i.off(e),i.on(e,t,n,r)}),this):this},C=function(e,t,n){var r=this._events;return r?e||t||n?(g(e,t,function(e,t){for(var i,o=r.length,a=0;a<o;a++)i=r[a],b(i,e,t,n)&&(r.splice(a,1),--o,--a)}),this):(this._events=[],this):this},T=function(e,t){var n=-1,r=void 0===t,i=void 0,a=void 0,s=void 0,l=void 0;if(t=r?[]:(0,f.isArray)(t)?t:[t],!this._events||!e)return this;if("string"==typeof e&&(e=new w(e)),e.args=[].concat((0,o.default)(t)),t.unshift(e),i=_(this._events,e.type),s=i.length)for(;++n<s;)if(l=i[n],r&&(t=[l.args]),(a=e.isPropagationStopped())||!1===l.cb.apply(l.ctx2,t)){a||(e.stopPropagation(),e.preventDefault());break}return this},E=function(e){return e instanceof w};t.on=x,t.once=k,t.one=S,t.off=C,t.trigger=T,t.isEvent=E,t.getEvents=y},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){function r(){}function i(e){var n="",r=!1;return n+=e.type,t.BINARY_EVENT!=e.type&&t.BINARY_ACK!=e.type||(n+=e.attachments,n+="-"),e.nsp&&"/"!=e.nsp&&(r=!0,n+=e.nsp),null!=e.id&&(r&&(n+=",",r=!1),n+=e.id),null!=e.data&&(r&&(n+=","),n+=f.stringify(e.data)),d("encoded %j as %s",e,n),n}function o(e,t){function n(e){var n=h.deconstructPacket(e),r=i(n.packet),o=n.buffers;o.unshift(r),t(o)}h.removeBlobs(e,n)}function a(){this.reconstructor=null}function s(e){var n={},r=0;if(n.type=Number(e.charAt(0)),null==t.types[n.type])return u();if(t.BINARY_EVENT==n.type||t.BINARY_ACK==n.type){for(var i="";"-"!=e.charAt(++r)&&(i+=e.charAt(r),r!=e.length););if(i!=Number(i)||"-"!=e.charAt(r))throw new Error("Illegal attachments");n.attachments=Number(i)}if("/"==e.charAt(r+1))for(n.nsp="";++r;){var o=e.charAt(r);if(","==o)break;if(n.nsp+=o,r==e.length)break}else n.nsp="/";var a=e.charAt(r+1);if(""!==a&&Number(a)==a){for(n.id="";++r;){var o=e.charAt(r);if(null==o||Number(o)!=o){--r;break}if(n.id+=e.charAt(r),r==e.length)break}n.id=Number(n.id)}return e.charAt(++r)&&(n=l(n,e.substr(r))),d("decoded %s as %j",e,n),n}function l(e,t){try{e.data=f.parse(t)}catch(e){return u()}return e}function c(e){this.reconPack=e,this.buffers=[]}function u(e){return{type:t.ERROR,data:"parser error"}}var d=n(325)("socket.io-parser"),f=n(328),p=n(330),h=n(331),g=n(203);t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=r,t.Decoder=a,r.prototype.encode=function(e,n){if(d("encoding packet %j",e),t.BINARY_EVENT==e.type||t.BINARY_ACK==e.type)o(e,n);else{n([i(e)])}},p(a.prototype),a.prototype.add=function(e){var n;if("string"==typeof e)n=s(e),t.BINARY_EVENT==n.type||t.BINARY_ACK==n.type?(this.reconstructor=new c(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!g(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",n))}},a.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},c.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){var t=h.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},c.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,t,n){(function(t){var r=n(335);e.exports=function(e){var n=e.xdomain,i=e.xscheme,o=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!n||r))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!i&&o)return new XDomainRequest}catch(e){}if(!n)try{return new(t[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}}).call(t,n(15))},function(e,t,n){function r(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}var i=n(70),o=n(87);e.exports=r,o(r.prototype),r.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},r.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},r.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},r.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},r.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},r.prototype.onData=function(e){var t=i.decodePacket(e,this.socket.binaryType);this.onPacket(t)},r.prototype.onPacket=function(e){this.emit("packet",e)},r.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(e,t){t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(u===setTimeout)return setTimeout(e,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function o(e){if(d===clearTimeout)return clearTimeout(e);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function a(){g&&p&&(g=!1,p.length?h=p.concat(h):m=-1,h.length&&s())}function s(){if(!g){var e=i(a);g=!0;for(var t=h.length;t;){for(p=h,h=[];++m<t;)p&&p[m].run();m=-1,t=h.length}p=null,g=!1,o(e)}}function l(e,t){this.fun=e,this.array=t}function c(){}var u,d,f=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(e){u=n}try{d="function"==typeof clearTimeout?clearTimeout:r}catch(e){d=r}}();var p,h=[],g=!1,m=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new l(e,t)),1!==h.length||g||i(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.prependListener=c,f.prependOnceListener=c,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.desenResponse=t.desenEvent=t.desenState=void 0;var r=n(11),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.desenState=function(e){return e.asrRecords&&(e.asrRecords=e.asrRecords.length),e},t.desenEvent=function(e,t){if("asrPush"===e){var n=JSON.parse((0,i.default)(t));return n.result&&(n.result.str_line_ctx="***"),n}return t},t.desenResponse=function(e,t){if("getCallAsrResult"===e){var n=JSON.parse((0,i.default)(t));return(n.record||[]).forEach(function(e){e.str_line_ctx="***"}),n}return t}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(197),o=r(i),a=n(141),s=r(a),l=n(286),c=r(l);t.default={events:{log:function(e){e.uin=this.uin,c.default.save(e)}},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.uin=e.uin,n=e.url,r=e.reportUrl;r&&/^http/.test(r)&&c.default.setLogUrl(r),n&&this.report({uin:t,url:n})},config:function(e){this.evSource&&this.evSource.close(),this.initialize(e)},report:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.uin,n=e.url,r=n+"/pushdata/"+t,i=n+"/stream/"+t,a=void 0;n&&(a=this.evSource=new EventSource(i),a.onmessage=function(e){e.data===t&&o.default.getLogData().then(function(e){s.default.post(r,e).catch(function(){})})})}}},function(e,t,n){"use strict";var r=n(16),i=n(39),o=n(64),a=n(52),s=n(36),l=n(90),c=Object.assign;e.exports=!c||n(33)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=r})?function(e,t){for(var n=s(e),c=arguments.length,u=1,d=o.f,f=a.f;c>u;)for(var p,h=l(arguments[u++]),g=d?i(h).concat(d(h)):i(h),m=g.length,v=0;m>v;)p=g[v++],r&&!f.call(h,p)||(n[p]=h[p]);return n}:c},function(e,t,n){e.exports={default:n(298),__esModule:!0}},function(e,t,n){e.exports={default:n(300),__esModule:!0}},function(e,t,n){var r=n(85),i=n(64),o=n(12),a=n(6).Reflect;e.exports=a&&a.ownKeys||function(e){var t=r.f(o(e)),n=i.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(16),i=n(39),o=n(29),a=n(52).f;e.exports=function(e){return function(t){for(var n,s=o(t),l=i(s),c=l.length,u=0,d=[];c>u;)n=l[u++],r&&!a.call(s,n)||d.push(e?[n,s[n]]:s[n]);return d}}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){return c(e)||l(e,t)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function l(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}function c(e){if(Array.isArray(e))return e}function u(){var e=d(arguments),t=e.text,n=e.options,r=e.metadata;return Object(f.a)(t,n,r)}function d(e){var t,n,r,o=Array.prototype.slice.call(e),s=a(o,4),l=s[0],c=s[1],u=s[2],d=s[3];if("string"!=typeof l)throw new TypeError("A text for parsing must be a string.");if(t=l,c&&"string"!=typeof c){if(!p(c))throw new Error("Invalid second argument: ".concat(c));u?(n=c,r=u):r=c}else d?(n=u,r=d):(n=void 0,r=u),c&&(n=i({defaultCountry:c},n));return{text:t,options:n,metadata:r}}t.a=u,t.b=d;var f=n(305),p=function(e){return"object"===r(e)}},function(e,t,n){"use strict";function r(e){return o[e]}function i(e){for(var t="",n=e.split(""),i=Array.isArray(n),o=0,n=i?n:n[Symbol.iterator]();;){var a;if(i){if(o>=n.length)break;a=n[o++]}else{if(o=n.next(),o.done)break;a=o.value}var s=a,l=r(s);l&&(t+=l)}return t}t.b=r,t.a=i;var o={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","０":"0","１":"1","２":"2","３":"3","４":"4","５":"5","６":"6","７":"7","８":"8","９":"9","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9"}},function(e,t,n){"use strict";function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){i(e,t,n[t])})}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}n.d(t,"a",function(){return h});var l=n(44),c=n(308),u=n(257),d=(n(449),n(139)),f=n(310),p=!1,h=function(){function e(t,n,r){if(o(this,e),!t)throw new TypeError("`country` or `countryCallingCode` not passed");if(!n)throw new TypeError("`nationalNumber` not passed");var i=new l.a(r);g(t)?(this.country=t,i.country(t),t=i.countryCallingCode()):p&&i.isNonGeographicCallingCode(t)&&(this.country="001"),this.countryCallingCode=t,this.nationalNumber=n,this.number="+"+this.countryCallingCode+this.nationalNumber,this.metadata=r}return s(e,[{key:"isPossible",value:function(){return Object(c.a)(this,{v2:!0},this.metadata)}},{key:"isValid",value:function(){return Object(u.a)(this,{v2:!0},this.metadata)}},{key:"isNonGeographic",value:function(){return new l.a(this.metadata).isNonGeographicCallingCode(this.countryCallingCode)}},{key:"isEqual",value:function(e){return this.number===e.number&&this.ext===e.ext}},{key:"getType",value:function(){return Object(d.b)(this,{v2:!0},this.metadata)}},{key:"format",value:function(e,t){return Object(f.c)(this,e,t?r({},t,{v2:!0}):{v2:!0},this.metadata)}},{key:"formatNational",value:function(e){return this.format("NATIONAL",e)}},{key:"formatInternational",value:function(e){return this.format("INTERNATIONAL",e)}},{key:"getURI",value:function(e){return this.format("RFC3966",e)}}]),e}(),g=function(e){return/^[A-Z]{2}$/.test(e)}},function(e,t,n){"use strict";function r(e,t){if(e<0||t<=0||t<e)throw new TypeError;return"{".concat(e,",").concat(t,"}")}function i(e,t){var n=t.search(e);return n>=0?t.slice(0,n):t}function o(e,t){return 0===e.indexOf(t)}function a(e,t){return e.indexOf(t,e.length-t.length)===e.length-t.length}t.b=r,t.d=i,t.c=o,t.a=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return"[object Object]"===Object.prototype.toString.call(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.Decoder=t.Encoder=t.PacketType=t.protocol=void 0;var o=n(13),a=r(o),s=n(20),l=r(s),c=n(163),u=r(c),d=n(21),f=r(d),p=n(11),h=r(p),g=n(4),m=r(g),v=n(5),b=r(v),_=n(88),y=n(363),w=n(268),x=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],k=(t.protocol=5,t.PacketType=void 0);!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(k||(t.PacketType=k={}));var S=(t.Encoder=function(){function e(t){(0,m.default)(this,e),this.replacer=t}return(0,b.default)(e,[{key:"encode",value:function(e){return e.type!==k.EVENT&&e.type!==k.ACK||!(0,w.hasBinary)(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===k.EVENT?k.BINARY_EVENT:k.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}},{key:"encodeAsString",value:function(e){var t=""+e.type;return e.type!==k.BINARY_EVENT&&e.type!==k.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=(0,h.default)(e.data,this.replacer)),t}},{key:"encodeAsBinary",value:function(e){var t=(0,y.deconstructPacket)(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}]),e}(),t.Decoder=function(e){function t(e){(0,m.default)(this,t);var n=(0,l.default)(this,(t.__proto__||(0,a.default)(t)).call(this));return n.reviver=e,n}return(0,f.default)(t,e),(0,b.default)(t,[{key:"add",value:function(e){var n=void 0;if("string"==typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);var r=n.type===k.BINARY_EVENT;r||n.type===k.BINARY_ACK?(n.type=r?k.EVENT:k.ACK,this.reconstructor=new S(n),0===n.attachments&&(0,u.default)(t.prototype.__proto__||(0,a.default)(t.prototype),"emitReserved",this).call(this,"decoded",n)):(0,u.default)(t.prototype.__proto__||(0,a.default)(t.prototype),"emitReserved",this).call(this,"decoded",n)}else{if(!(0,w.isBinary)(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,(0,u.default)(t.prototype.__proto__||(0,a.default)(t.prototype),"emitReserved",this).call(this,"decoded",n))}}},{key:"decodeString",value:function(e){var n=0,r={type:Number(e.charAt(0))};if(void 0===k[r.type])throw new Error("unknown packet type "+r.type);if(r.type===k.BINARY_EVENT||r.type===k.BINARY_ACK){for(var i=n+1;"-"!==e.charAt(++n)&&n!=e.length;);var o=e.substring(i,n);if(o!=Number(o)||"-"!==e.charAt(n))throw new Error("Illegal attachments");r.attachments=Number(o)}if("/"===e.charAt(n+1)){for(var a=n+1;++n;){if(","===e.charAt(n))break;if(n===e.length)break}r.nsp=e.substring(a,n)}else r.nsp="/";var s=e.charAt(n+1);if(""!==s&&Number(s)==s){for(var l=n+1;++n;){var c=e.charAt(n);if(null==c||Number(c)!=c){--n;break}if(n===e.length)break}r.id=Number(e.substring(l,n+1))}if(e.charAt(++n)){var u=this.tryParse(e.substr(n));if(!t.isPayloadValid(r.type,u))throw new Error("invalid payload");r.data=u}return r}},{key:"tryParse",value:function(e){try{return JSON.parse(e,this.reviver)}catch(e){return!1}}},{key:"destroy",value:function(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}],[{key:"isPayloadValid",value:function(e,t){switch(e){case k.CONNECT:return i(t);case k.DISCONNECT:return void 0===t;case k.CONNECT_ERROR:return"string"==typeof t||i(t);case k.EVENT:case k.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===x.indexOf(t[0]));case k.ACK:case k.BINARY_ACK:return Array.isArray(t)}}}]),t}(_.Emitter),function(){function e(t){(0,m.default)(this,e),this.packet=t,this.buffers=[],this.reconPack=t}return(0,b.default)(e,[{key:"takeBinaryData",value:function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=(0,y.reconstructPacket)(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}},{key:"finishedReconstruction",value:function(){this.reconPack=null,this.buffers=[]}}]),e}())},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(13),o=r(i),a=n(154),s=r(a);t.default=function e(t,n,r){null===t&&(t=Function.prototype);var i=(0,s.default)(t,n);if(void 0===i){var a=(0,o.default)(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var l=i.get;if(void 0!==l)return l.call(r)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultBinaryType=t.usingBrowserWebSocket=t.WebSocket=t.nextTick=void 0;var r=n(14),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=n(125);t.nextTick=function(){return"function"==typeof i.default&&"function"==typeof i.default.resolve?function(e){return i.default.resolve().then(e)}:function(e,t){return t(e,0)}}(),t.WebSocket=o.globalThisShim.WebSocket||o.globalThisShim.MozWebSocket,t.usingBrowserWebSocket=!0,t.defaultBinaryType="arraybuffer"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(46),o=r(i),a=n(14),s=r(a),l=n(58),c=function(e,t,n){return e=(0,l.isArray)(e)?e:e?[e]:[],new s.default(function(r){if(!e||0===e.length||t&&!t.length)return void r();e.forEach(function(e){var i,a;n&&(i=e.classList).remove.apply(i,(0,o.default)(n)),(a=e.classList).add.apply(a,(0,o.default)(t)),e.handler&&e.removeEventListener("animationend",e.handler),e.handler=function(e){var n;(n=this.classList).remove.apply(n,(0,o.default)(t)),r(),e&&e.stopPropagation()},e.addEventListener("animationend",e.handler)})})};t.default=c},function(e,t,n){"use strict";var r=n(23).f,i=n(60),o=n(73),a=n(30),s=n(72),l=n(54),c=n(86),u=n(119),d=n(121),f=n(16),p=n(49).fastKey,h=n(66),g=f?"_s":"size",m=function(e,t){var n,r=p(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,c){var u=e(function(e,r){s(e,u,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[g]=0,void 0!=r&&l(r,n,e[c],e)});return o(u.prototype,{clear:function(){for(var e=h(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[g]=0},delete:function(e){var n=h(this,t),r=m(n,e);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[g]--}return!!r},forEach:function(e){h(this,t);for(var n,r=a(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!m(h(this,t),e)}}),f&&r(u.prototype,"size",{get:function(){return h(this,t)[g]}}),u},def:function(e,t,n){var r,i,o=m(e,t);return o?o.v=n:(e._l=o={i:i=p(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[g]++,"F"!==i&&(e._i[i]=o)),e},getEntry:m,setStrong:function(e,t,n){c(e,t,function(e,n){this._t=h(e,t),this._k=n,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?u(0,n.k):"values"==t?u(0,n.v):u(0,[n.k,n.v]):(e._t=void 0,u(1))},n?"entries":"values",!n,!0),d(t)}}},function(e,t,n){var r=n(71),i=n(282);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(void 0===e)return"-";var t=Math.floor(e/3600)<10?"0"+Math.floor(e/3600):Math.floor(e/3600),n=Math.floor(e/60%60)<10?"0"+Math.floor(e/60%60):Math.floor(e/60%60),r=Math.floor(e%60)<10?"0"+Math.floor(e%60):Math.floor(e%60);return e=Number(t)>0?t+":"+n+":"+r:n+":"+r}},function(e,t,n){e.exports={default:n(390),__esModule:!0}},function(e,t){e.exports=function(){}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&d[e])return d[e];var t=new a.default(function(t,n){var r=document.head||document.getElementsByTagName("head")[0]||document.documentElement,i=document.createElement("script");i.async=!0,i.onload=i.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(t(),c.$log("script loaded:'"+e+"'"))},i.onerror=function(t){n(),u.$error("error occur on load script, url:'"+e+"'")},i.src=e,r.appendChild(i),c.$log("script url:'"+e+"'")});return d[e]=t,t}Object.defineProperty(t,"__esModule",{value:!0});var o=n(14),a=r(o);t.default=i;var s=n(7),l=r(s),c=new l.default("loader"),u=new l.default("ErrLog"),d={}},function(e,t,n){var r=n(29),i=n(65),o=n(173);e.exports=function(e){return function(t,n,a){var s,l=r(t),c=i(l.length),u=o(a,c);if(e&&n!=n){for(;c>u;)if((s=l[u++])!=s)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}}},function(e,t,n){var r=n(78),i=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},function(e,t,n){"use strict";var r=n(170),i=n(119),o=n(41),a=n(29);e.exports=n(86)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,n):"values"==t?i(0,e[n]):i(0,[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t,n){"use strict";var r=n(60),i=n(50),o=n(53),a={};n(32)(a,n(10)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(78),i=n(77);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),l=r(n),c=s.length;return l<0||l>=c?e?"":void 0:(o=s.charCodeAt(l),o<55296||o>56319||l+1===c||(a=s.charCodeAt(l+1))<56320||a>57343?e?s.charAt(l):o:e?s.slice(l,l+2):a-56320+(o-55296<<10)+65536)}}},function(e,t,n){n(40),n(45),e.exports=n(67).f("iterator")},function(e,t,n){n(104),n(63),n(180),n(181),e.exports=n(2).Symbol},function(e,t,n){var r=n(39),i=n(64),o=n(52);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var a,s=n(e),l=o.f,c=0;s.length>c;)l.call(e,a=s[c++])&&t.push(a);return t}},function(e,t,n){n(82)("asyncIterator")},function(e,t,n){n(82)("observable")},function(e,t,n){var r=n(2),i=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},function(e,t,n){n(63),n(40),n(45),n(184),n(187),n(188),e.exports=n(2).Promise},function(e,t,n){"use strict";var r,i,o,a,s=n(48),l=n(6),c=n(30),u=n(71),d=n(3),f=n(9),p=n(37),h=n(72),g=n(54),m=n(109),v=n(110).set,b=n(185)(),_=n(83),y=n(111),w=n(186),x=n(112),k=l.TypeError,S=l.process,C=S&&S.versions,T=C&&C.v8||"",E=l.Promise,I="process"==u(S),A=function(){},R=i=_.f,O=!!function(){try{var e=E.resolve(1),t=(e.constructor={})[n(10)("species")]=function(e){e(A,A)};return(I||"function"==typeof PromiseRejectionEvent)&&e.then(A)instanceof t&&0!==T.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(e){}}(),L=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},P=function(e,t){if(!e._n){e._n=!0;var n=e._c;b(function(){for(var r=e._v,i=1==e._s,o=0;n.length>o;)!function(t){var n,o,a,s=i?t.ok:t.fail,l=t.resolve,c=t.reject,u=t.domain;try{s?(i||(2==e._h&&N(e),e._h=1),!0===s?n=r:(u&&u.enter(),n=s(r),u&&(u.exit(),a=!0)),n===t.promise?c(k("Promise-chain cycle")):(o=L(n))?o.call(n,l,c):l(n)):c(r)}catch(e){u&&!a&&u.exit(),c(e)}}(n[o++]);e._c=[],e._n=!1,t&&!e._h&&M(e)})}},M=function(e){v.call(l,function(){var t,n,r,i=e._v,o=$(e);if(o&&(t=y(function(){I?S.emit("unhandledRejection",i,e):(n=l.onunhandledrejection)?n({promise:e,reason:i}):(r=l.console)&&r.error&&r.error("Unhandled promise rejection",i)}),e._h=I||$(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},$=function(e){return 1!==e._h&&0===(e._a||e._c).length},N=function(e){v.call(l,function(){var t;I?S.emit("rejectionHandled",e):(t=l.onrejectionhandled)&&t({promise:e,reason:e._v})})},D=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),P(t,!0))},F=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw k("Promise can't be resolved itself");(t=L(e))?b(function(){var r={_w:n,_d:!1};try{t.call(e,c(F,r,1),c(D,r,1))}catch(e){D.call(r,e)}}):(n._v=e,n._s=1,P(n,!1))}catch(e){D.call({_w:n,_d:!1},e)}}};O||(E=function(e){h(this,E,"Promise","_h"),p(e),r.call(this);try{e(c(F,this,1),c(D,this,1))}catch(e){D.call(this,e)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(73)(E.prototype,{then:function(e,t){var n=R(m(this,E));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=I?S.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&P(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=c(F,e,1),this.reject=c(D,e,1)},_.f=R=function(e){return e===E||e===a?new o(e):i(e)}),d(d.G+d.W+d.F*!O,{Promise:E}),n(53)(E,"Promise"),n(121)("Promise"),a=n(2).Promise,d(d.S+d.F*!O,"Promise",{reject:function(e){var t=R(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(s||!O),"Promise",{resolve:function(e){return x(s&&this===a?E:this,e)}}),d(d.S+d.F*!(O&&n(117)(function(e){E.all(e).catch(A)})),"Promise",{all:function(e){var t=this,n=R(t),r=n.resolve,i=n.reject,o=y(function(){var n=[],o=0,a=1;g(e,!1,function(e){var s=o++,l=!1;n.push(void 0),a++,t.resolve(e).then(function(e){l||(l=!0,n[s]=e,--a||r(n))},i)}),--a||r(n)});return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=R(t),r=n.reject,i=y(function(){g(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},function(e,t,n){var r=n(6),i=n(110).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,l="process"==n(47)(a);e.exports=function(){var e,t,n,c=function(){var r,i;for(l&&(r=a.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(l)n=function(){a.nextTick(c)};else if(!o||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var u=s.resolve(void 0);n=function(){u.then(c)}}else n=function(){i.call(r,c)};else{var d=!0,f=document.createTextNode("");new o(c).observe(f,{characterData:!0}),n=function(){f.data=d=!d}}return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t,n){var r=n(6),i=r.navigator;e.exports=i&&i.userAgent||""},function(e,t,n){"use strict";var r=n(3),i=n(2),o=n(6),a=n(109),s=n(112);r(r.P+r.R,"Promise",{finally:function(e){var t=a(this,i.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then(function(){return n})}:e,n?function(n){return s(t,e()).then(function(){throw n})}:e)}})},function(e,t,n){"use strict";var r=n(3),i=n(83),o=n(111);r(r.S,"Promise",{try:function(e){var t=i.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){n(190),e.exports=n(2).Object.keys},function(e,t,n){var r=n(36),i=n(39);n(43)("keys",function(){return function(e){return i(r(e))}})},function(e,t,n){n(192);var r=n(2).Object;e.exports=function(e){return r.getOwnPropertyNames(e)}},function(e,t,n){n(43)("getOwnPropertyNames",function(){return n(108).f})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.generateName=function(){return Math.floor(16777215*Math.random()).toString(16)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getColorStr=void 0;var r=n(113);t.getColorStr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"none",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#fff",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e="random"===e?(0,r.getRandomColor)():e,t="random"===t?(0,r.getRandomColor)():t,n+"border-radius: 2px; margin: 0 3px 3px 0; background: "+e+"; color: "+t+";"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){return t=t||2,(new Array(t).join("0")+e).slice(-t)};t.invertColor=function(e){if(0===e.indexOf("#")&&(e=e.slice(1)),3===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),6!==e.length)throw new Error("Invalid HEX color.");var t=(255-parseInt(e.slice(0,2),16)).toString(16),n=(255-parseInt(e.slice(2,4),16)).toString(16),i=(255-parseInt(e.slice(4,6),16)).toString(16);return"#"+r(t)+r(n)+r(i)}},function(e,t,n){"use strict";function r(e,t){if("function"!=typeof e)return!1;var n=e.toString();return void 0!==e.prototype&&(e.prototype.constructor===e&&("class"===n.slice(0,5)||((0,o.default)(e.prototype).length>=2||!/^function\s+\(|^function\s+anonymous\(/.test(n)&&(!(!t||!/^function\s+[A-Z]/.test(n))||!!/\b\(this\b|\bthis[\.\[]\b/.test(n)&&(!(t&&!/classCallCheck\(this/.test(n))||/^function\sdefault_\d+\s*\(/.test(n))))))}Object.defineProperty(t,"__esModule",{value:!0}),t.isClass=t.isUndefined=t.isRegExp=t.isNumber=t.isFunction=t.isArray=t.isString=t.isObject=void 0;var i=n(56),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=function(e){return function(t){return{}.toString.call(t)==="[object "+e+"]"}},s=a("Object"),l=a("String"),c=Array.isArray||a("Array"),u=a("Function"),d=a("Number"),f=a("RegExp"),p=a("Undefined");t.isObject=s,t.isString=l,t.isArray=c,t.isFunction=u,t.isNumber=d,t.isRegExp=f,t.isUndefined=p,t.isClass=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(14),o=r(i),a=n(34),s=r(a),l=n(198),c=r(l),u=n(42),d=n(51),f=void 0;c.default.config.set("verbose",!1),c.default.keep(1),f=new c.default("trackerlog");var p=function(e){return(0,u.isObject)(e)?(0,s.default)(e):e};t.default={events:{log:function(e){f.info("log",e)}},isFiltered:function(e,t){var n=p(t.names),r=p(t.types),i=p(t.totalLabelBgColors),o=p(t.totalLabels);return!(!(n&&0!==n.length||r&&0!==r.length||i&&0!==i.length||o&&0!==o.length)||n&&n.indexOf(e.name)>-1||r&&r.indexOf(d.LOG_TYPE_ENUM[e.type])>-1||o&&o.indexOf(e.totalLabel)>-1||i&&e.totalLabel&&i.indexOf(e.totalLabelBgColor)>-1)},getLogData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=this.isFiltered.bind(this),r=function(t){var r=[];return t.forEach(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.data||t;t.namespace&&"trackerlog"!==t.namespace||n(i,e)||r.push(i)}),r};return new o.default(function(e,n){t?e(r(t)):c.default.all(function(t){e(r(t))})})}}},function(e,t,n){!function(t,n){e.exports=n()}(0,function(){"use strict";function e(e){return e?p[e]:p}function t(e,t){var n={};"string"==typeof e?n[e]=t:"[object Object]"===Object.prototype.toString.call(e)&&(n=e),l(p,n)}function n(e){g&&console.error("Logline: "+e)}function r(e,t,n,r){g&&h.get().verbose&&window.console[m[t.toUpperCase()]||m.INFO](e+" "+t.toUpperCase()+" "+n,r||"")}function i(e){var t,n={};if("object"!==(void 0===e?"undefined":o(e)))return e;for(t in e)e.hasOwnProperty(t)&&"function"!=typeof e[t]&&(n[t]=i(e[t]));return n}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},u=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},d=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},f={verbose:!0},p=l({},f),h=t;h.set=t,h.get=e;var g=window.console,m={INFO:"log",WARN:"warn",ERROR:"error",CRITICAL:"error"},v=function(){function e(t){a(this,e),this._namespace=t}return s(e,[{key:"_record",value:function(e,t,r){n("method _record is not implemented.")}},{key:"info",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this._record.apply(this,["info"].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this._record.apply(this,["warn"].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this._record.apply(this,["error"].concat(t))}},{key:"critical",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this._record.apply(this,["critical"].concat(t))}}],[{key:"init",value:function(e){return!0}},{key:"transTimeFormat",value:function(e,t){if(!e||/^\d{13}$/.test(e))return+e;if(t&&!/^\d{13}$/.test(t))throw new TypeError("relative time should be standard unix timestamp");return(t||Date.now())-24*e.replace(/d$/,"")*3600*1e3}},{key:"get",value:function(e,t,r){n("method get is not implemented.")}},{key:"keep",value:function(e){n("method keep is not implemented.")}},{key:"clean",value:function(){n("method clean is not implemented.")}},{key:"STATUS",get:function(){return{INITING:1,INITED:2,FAILED:4}}}]),e}(),b=function(){function e(){a(this,e),this._pool=[]}return s(e,[{key:"push",value:function(e,t){e.context=t,this._pool.push(e)}},{key:"consume",value:function(){for(var e;e=this._pool.shift();)e.call(e.context)}}]),e}(),_=function(e){function t(){var e;a(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)))}return u(t,e),s(t,[{key:"_record",value:function(e,o,a){var s=this;try{if(t.status!==v.STATUS.INITED)return t._pool.push(function(){return s._record(e,o,a)}),void(t.status!==v.STATUS.INITING&&t.init());r(this._namespace,e,o,a);var l=t.db.transaction(["logs"],"readwrite");l.onerror=function(e){return n(e.target.error)},l.objectStore("logs").add({time:Date.now(),level:e,namespace:this._namespace,descriptor:o,data:i(a)}).onerror=function(e){t.status=v.STATUS.FAILED,n(e.target.error)}}catch(e){n("failed to write, "+e.message)}}}],[{key:"init",value:function(e){var r=this;try{if(t.support||n("your platform does not support indexeddb protocol."),t.status)return!1;t._pool=t._pool||new b,t._database=e||"logline",t.status=c(t.__proto__||Object.getPrototypeOf(t),"STATUS",this).INITING,t.request=window.indexedDB.open(t._database),t.request.onerror=function(e){return n("protocol indexeddb is prevented.")},t.request.onsuccess=function(e){t.db=e.target.result,t.status=c(t.__proto__||Object.getPrototypeOf(t),"STATUS",r).INITED,t._pool.consume(),t.db.onerror=function(e){return n(e.target.error)}},t.request.onupgradeneeded=function(e){var t=e.target.result,n=t.createObjectStore("logs",{autoIncrement:!0});n.createIndex("namespace","namespace",{unique:!1}),n.createIndex("level","level",{unique:!1}),n.createIndex("descriptor","descriptor",{unique:!1}),n.createIndex("data","data",{unique:!1})}}catch(e){n("failed init, "+e.message)}}},{key:"get",value:function(e,r,i){try{if(t.status!==c(t.__proto__||Object.getPrototypeOf(t),"STATUS",this).INITED)return t._pool.push(function(){return t.get(e,r,i)});e=v.transTimeFormat(e),r=v.transTimeFormat(r);var o=t._getTransactionStore(IDBTransaction.READ_ONLY);if(!o)return i([]);if(o.getAll){var a=void 0,s=[];o.getAll().onsuccess=function(t){a=t.target.result;for(var n=0;n<a.length;n++)e&&a[n].time<e||r&&a[n].time>r||s.push(a[n]);i(s)}}else{var l=o.openCursor(),u=[];l.onsuccess=function(t){var n=t.target.result;if(n){if(e&&n.value.time<e||r&&n.value.time>r)return n.continue();u.push({time:n.value.time,level:n.value.level,namespace:n.value.namespace,descriptor:n.value.descriptor,data:n.value.data}),n.continue()}else i(u)}}}catch(e){n("failed to get logs, "+e.message)}}},{key:"keep",value:function(e){try{if(t.status!==c(t.__proto__||Object.getPrototypeOf(t),"STATUS",this).INITED)return t._pool.push(function(){return t.keep(e)});var r=t._getTransactionStore("readwrite");if(!r)return!1;if(e){var i=Date.now()-24*(e||2)*3600*1e3,o=r.openCursor();o.onsuccess=function(e){var t=e.target.result;t&&t.value.time<i&&(r.delete(t.primaryKey),t.continue())},o.onerror=function(t){return n("unable to locate logs earlier than "+e+"d.")}}else r.clear().onerror=function(e){return n(e.target.error)}}catch(e){n("failed to keep logs, "+e.message)}}},{key:"clean",value:function(){try{if(t.status!==c(t.__proto__||Object.getPrototypeOf(t),"STATUS",this).INITED)return t._pool.push(function(){return t.clean()});t.db.close();var e=window.indexedDB.deleteDatabase(t._database);e.onerror=function(e){return n(e.target.error)},e.onsuccess=function(e){delete t.status,delete t.db}}catch(e){n("failed to cleanup logs, "+e.message)}}},{key:"_getTransactionStore",value:function(e){try{if(t.db){var r=t.db.transaction(["logs"],e||"readwrite");return r.onerror=function(e){return n(e.target.error)},r.objectStore("logs")}n("log database is not created or connections are closed, considering init it.")}catch(e){return n("failed to generate new transaction, "+e.message),!1}}},{key:"support",get:function(){return!!(window.indexedDB&&window.IDBTransaction&&window.IDBKeyRange)}}]),t}(v),y=function(e){function t(){var e;a(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)))}return u(t,e),s(t,[{key:"_record",value:function(e,i,o){var a;try{a=window.localStorage.getItem(t._database)?JSON.parse(window.localStorage.getItem(t._database)):[],a.push([Date.now(),this._namespace,e,i,o]),r(this._namespace,e,i,o),window.localStorage.setItem(t._database,JSON.stringify(a))}catch(e){window.localStorage.removeItem(t._database),window.localStorage.setItem(t._database,JSON.stringify([])),n("failed to write, may be localStorage is full, "+e.message)}}}],[{key:"init",value:function(e){try{t.support||n("your platform does not support localstorage protocol."),t._database=e||"logline",window.localStorage.getItem(t._database)||window.localStorage.setItem(t._database,JSON.stringify([])),t.status=c(t.__proto__||Object.getPrototypeOf(t),"STATUS",this).INITED}catch(e){n("failed to init, "+e.message)}}},{key:"get",value:function(e,r,i){var o,a;try{for(o=JSON.parse(window.localStorage.getItem(t._database)),e=v.transTimeFormat(e),r=v.transTimeFormat(r),a=0;a<o.length;a++)e&&o[a][0]<e||r&&o[a][0]>r||(o[a]={time:o[a][0],namespace:o[a][1],level:o[a][2],descriptor:o[a][3],data:o[a][4]});i(o)}catch(e){n("failed to get, "+e.message),i([])}}},{key:"keep",value:function(e){var r;try{r=e?(window.localStorage.getItem(t._database)?JSON.parse(window.localStorage.getItem(t._database)):[]).filter(function(t){return t.time>=Date.now()-24*(e||2)*3600*1e3}):[],window.localStorage.setItem(t._database,JSON.stringify(r))}catch(e){n("failed to keep, "+e.message)}}},{key:"clean",value:function(){try{delete t.status,window.localStorage.removeItem(t._database)}catch(e){n("failed to clean, "+e.message)}}},{key:"support",get:function(){return"localStorage"in window}}]),t}(v),w=function(e){function t(){var e;a(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)))}return u(t,e),s(t,[{key:"_record",value:function(e,i,o){var a=this;if(t.status!==v.STATUS.INITED)return t._pool.push(function(){return a._record(e,i,o)}),void(t.status!==v.STATUS.INITING&&t.init());try{r(this._namespace,e,i,o),t._db.transaction(function(t){t.executeSql("INSERT INTO logs (time, namespace, level, descriptor, data) VALUES(?, ?, ?, ? ,?)",[Date.now(),a._namespace,e,i,void 0===o||""===o?"":JSON.stringify(o)||""],function(){},function(e,t){n("write error, "+t.message)})})}catch(e){n("error inserting record, "+e.message)}}}],[{key:"init",value:function(e){var r=this;if(t.support||n(new Error("your platform does not support websql protocol.")),t.status)return!1;t._pool=t._pool||new b,t._database=e||"logline",t.status=c(t.__proto__||Object.getPrototypeOf(t),"STATUS",this).INITING;try{t._db=window.openDatabase(t._database,"1.0","cats loves logs",5085593.6),t._db.transaction(function(e){e.executeSql("CREATE TABLE IF NOT EXISTS logs (time, namespace, level, descriptor, data)",[],function(){t.status=c(t.__proto__||Object.getPrototypeOf(t),"STATUS",r).INITED,t._pool.consume()},function(e,i){t.status=c(t.__proto__||Object.getPrototypeOf(t),"STATUS",r).FAILED,n("unable to create table, "+i.message)})})}catch(e){n("unable to init log database, "+e.message)}}},{key:"get",value:function(e,r,i){if(t.status!==c(t.__proto__||Object.getPrototypeOf(t),"STATUS",this).INITED)return t._pool.push(function(){return t.get(e,r,i)});e=v.transTimeFormat(e),r=v.transTimeFormat(r);try{t._db.transaction(function(t){t.executeSql("SELECT * FROM logs ORDER BY time DESC",[],function(t,n){for(var o,a,s=[],l=n.rows.length;--l>=0;)if(a=n.rows.item(l),!(e&&a.time<e||r&&a.time>r)){o=JSON.parse(JSON.stringify(a));try{o.data=JSON.parse(o.data)}catch(e){}s.push(o)}i(s)},function(e,t){n(t.message)})})}catch(e){n("unable to collect logs from database.")}}},{key:"keep",value:function(e){if(t.status!==c(t.__proto__||Object.getPrototypeOf(t),"STATUS",this).INITED)return t._pool.push(function(){return t.keep(e)});try{t._db.transaction(function(t){e?t.executeSql("DELETE FROM logs WHERE time < ?",[Date.now()-24*(e||2)*3600*1e3],function(){},function(e,t){n(t.message)}):t.executeSql("DELETE FROM logs",[],function(){},function(e,t){n(t.message)})})}catch(e){n("unable to clean logs from database.")}}},{key:"clean",value:function(){if(t.status!==c(t.__proto__||Object.getPrototypeOf(t),"STATUS",this).INITED)return void t._pool.push(function(){return t.clean()});try{t._db.transaction(function(e){e.executeSql("DROP TABLE logs",[],function(){delete t.status},function(e,t){n(t.message)})})}catch(e){n("unable to clean log database.")}}},{key:"support",get:function(){return"openDatabase"in window}}]),t}(v),x=function(){function e(t){if(a(this,e),!(this instanceof e))return new e(t);try{return e._checkProtocol(),new e._protocol(t)}catch(e){return new v(t)}}return s(e,null,[{key:"_initProtocol",value:function(t){e._protocol=t,e._protocol.init(e._database||"logline")}},{key:"_checkProtocol",value:function(){if(!e._protocol){for(var t=Object.keys(e.PROTOCOL),r=void 0;r=e.PROTOCOL[t.shift()];)if(r.support)return void e._initProtocol(r);n("protocols "+t.join(", ").toLowerCase()+" are not supported on this platform")}}},{key:"get",value:function(t,n,r){switch(e._checkProtocol(),arguments.length){case 1:r=t,t=void 0;break;case 2:r=n,n=void 0}e._protocol.get(t,n,r)}},{key:"all",value:function(t){e.get(t)}},{key:"keep",value:function(t){return e._checkProtocol(),e._protocol.keep(t),this}},{key:"clean",value:function(){return e._checkProtocol(),e._protocol.clean(),this}},{key:"using",value:function(t,r){return-1===[_,y,w].indexOf(t)&&n("specialfied protocol "+(t?t+" ":"")+"is not available"),e._protocol?this:(e.database(r||e._database),e._initProtocol(t),this)}},{key:"database",value:function(t){e._database=t}},{key:"config",get:function(){return h}}]),e}();return x.PROTOCOL={INDEXEDDB:_,LOCALSTORAGE:y,WEBSQL:w},x.INTERFACE=Object.freeze(v),x.env={verbose:!0},x})},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}var o,a,s=n(417),l=i(s),c=n(423),u=i(c),d=n(100),f=i(d),p=n(169),h=i(p),g=n(89),m=i(g),v=n(426),b=i(v),_=n(290),y=i(_),w=n(430),x=i(w),k=n(433),S=i(k),C=n(155),T=i(C),E=n(11),I=i(E),A=n(296),R=i(A),O=n(8),L=i(O),P=n(56),M=i(P),$=n(289),N=i($),D=n(95),F=i(D),q=n(436),U=i(q),B=n(292),j=i(B),V=n(293),H=i(V),Y=n(102),z=i(Y),G=n(14),W=i(G),K=n(114),X=i(K),Z=n(13),J=i(Z),Q=n(35),ee=i(Q),te=n(103),ne=i(te),re=n(84),ie=i(re),oe=n(294),ae=i(oe),se=n(118),le=i(se),ce=n(154),ue=i(ce),de=n(295),fe=i(de),pe=n(34),he=i(pe),ge=n(28),me=i(ge);!function(r,i){"object"==(0,me.default)(t)&&void 0!==e?e.exports=i():(o=i,void 0!==(a="function"==typeof o?o.call(t,n,t,e):o)&&(e.exports=a))}(0,function(){function e(e,t){var n=(0,he.default)(e);if(fe.default){var r=(0,fe.default)(e);t&&(r=r.filter(function(t){return(0,ue.default)(e,t).enumerable})),n.push.apply(n,r)}return n}function t(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach(function(e){p(t,e,r[e])}):le.default?(0,ae.default)(t,(0,le.default)(r)):e(Object(r)).forEach(function(e){(0,ie.default)(t,e,(0,ue.default)(r,e))})}return t}function n(){function e(e,t,n){return(0,ie.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,n,o){var a=t&&t.prototype instanceof i?t:i,s=(0,ee.default)(a.prototype),l=new f(o||[]);return s._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return h()}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var l=c(s,n);if(l){if(l===x)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var u=r(e,t,n);if("normal"===u.type){if(i=n.done?"completed":"suspendedYield",u.arg===x)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(i="completed",n.method="throw",n.arg=u.arg)}}}(e,n,l),s}function r(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function i(){}function o(){}function a(){}function s(t){["next","throw","return"].forEach(function(n){e(t,n,function(e){return this._invoke(n,e)})})}function l(e,t){function n(i,o,a,s){var l=r(e[i],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==(void 0===u?"undefined":(0,me.default)(u))&&v.call(u,"__await")?t.resolve(u.__await).then(function(e){n("next",e,a,s)},function(e){n("throw",e,a,s)}):t.resolve(u).then(function(e){c.value=e,a(c)},function(e){return n("throw",e,a,s)})}s(l.arg)}var i;this._invoke=function(e,r){function o(){return new t(function(t,i){n(e,r,t,i)})}return i=i?i.then(o,o):o()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return x;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return x}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,x;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,x):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,x)}function u(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function d(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(u,this),this.reset(!0)}function p(e){if(e){var t=e[_];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(v.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:h}}function h(){return{value:void 0,done:!0}}n=function(){return g};var g={},m=Object.prototype,v=m.hasOwnProperty,b="function"==typeof ne.default?ne.default:{},_=b.iterator||"@@iterator",y=b.asyncIterator||"@@asyncIterator",w=b.toStringTag||"@@toStringTag";try{e({},"")}catch(t){e=function(e,t,n){return e[t]=n}}g.wrap=t;var x={},k={};e(k,_,function(){return this});var S=J.default,C=S&&S(S(p([])));C&&C!==m&&v.call(C,_)&&(k=C);var T=a.prototype=i.prototype=(0,ee.default)(k);return o.prototype=a,e(T,"constructor",a),e(a,"constructor",o),o.displayName=e(a,w,"GeneratorFunction"),g.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===o||"GeneratorFunction"===(t.displayName||t.name))},g.mark=function(t){return X.default?(0,X.default)(t,a):(t.__proto__=a,e(t,w,"GeneratorFunction")),t.prototype=(0,ee.default)(T),t},g.awrap=function(e){return{__await:e}},s(l.prototype),e(l.prototype,y,function(){return this}),g.AsyncIterator=l,g.async=function(e,n,r,i,o){void 0===o&&(o=W.default);var a=new l(t(e,n,r,i),o);return g.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},s(T),e(T,w,"Generator"),e(T,_,function(){return this}),e(T,"toString",function(){return"[object Generator]"}),g.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},g.values=p,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(d),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,r){return o.type="throw",o.arg=e,n.next=t,r&&(n.method="next",n.arg=void 0),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),s=v.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&v.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,x):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),x},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),d(n),x}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;d(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:p(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),x}},g}function i(e){return(i="function"==typeof ne.default&&"symbol"==(0,me.default)(z.default)?function(e){return void 0===e?"undefined":(0,me.default)(e)}:function(e){return e&&"function"==typeof ne.default&&e.constructor===ne.default&&e!==ne.default.prototype?"symbol":void 0===e?"undefined":(0,me.default)(e)})(e)}function o(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):W.default.resolve(l).then(r,i)}function a(e){return function(){var t=this,n=arguments;return new W.default(function(r,i){function a(e){o(l,r,i,a,s,"next",e)}function s(e){o(l,r,i,a,s,"throw",e)}var l=e.apply(t,n);a(void 0)})}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,ie.default)(e,r.key,r)}}function d(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e,t,n){return t in e?(0,ie.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=(0,ee.default)(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}function v(e){return(v=X.default?J.default.bind():function(e){return e.__proto__||(0,J.default)(e)})(e)}function _(e,t){return(_=X.default?X.default.bind():function(e,t){return e.__proto__=t,e})(e,t)}function w(){if("undefined"==typeof Reflect||!H.default)return!1;if(H.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call((0,H.default)(Boolean,[],function(){})),!0}catch(e){return!1}}function k(e,t,n){return k=w()?H.default.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&_(i,n.prototype),i},k.apply(null,arguments)}function C(e){var t="function"==typeof j.default?new j.default:void 0;return(C=function(e){function n(){return k(e,arguments,v(this).constructor)}if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}return n.prototype=(0,ee.default)(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),_(n,e)})(e)}function E(e,t){if(t&&("object"==(void 0===t?"undefined":(0,me.default)(t))||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function A(e){var t=w();return function(){var n,r=v(e);if(t){var i=v(this).constructor;n=(0,H.default)(r,arguments,i)}else n=r.apply(this,arguments);return E(this,n)}}function O(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}function P(){return P="undefined"!=typeof Reflect&&U.default?U.default.bind():function(e,t,n){var r=O(e,t);if(r){var i=(0,ue.default)(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},P.apply(this,arguments)}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:void 0!==ne.default&&e[z.default]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||q(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if(void 0!==ne.default&&null!=e[z.default]||null!=e["@@iterator"])return(0,F.default)(e)}(e)||q(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){if(e){if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?(0,F.default)(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(e,t):void 0}}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function V(e,t){var n=void 0!==ne.default&&e[z.default]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=q(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Y(e,t,n,r,i){var o={};return(0,he.default)(r).forEach(function(e){o[e]=r[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&((0,ie.default)(e,t,o),o=null),o}function G(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function K(e,t,n){if(e.RTCPeerConnection){var r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);var o=function(e){var t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new j.default),this._eventMap[t].set(r,o),i.apply(this,[e,o])};var o=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(n))return o.apply(this,arguments);var r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===(0,he.default)(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,r])},(0,ie.default)(r,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}}function Z(e){return"boolean"!=typeof e?new Error("Argument type: "+(void 0===e?"undefined":(0,me.default)(e))+". Please use a boolean."):(bs=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function Q(e){return"boolean"!=typeof e?new Error("Argument type: "+(void 0===e?"undefined":(0,me.default)(e))+". Please use a boolean."):(_s=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function te(){if("object"==("undefined"==typeof window?"undefined":(0,me.default)(window))){if(bs)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function re(e,t){_s&&console.warn(e+" is deprecated, please use "+t+" instead.")}function oe(e){return"[object Object]"===Object.prototype.toString.call(e)}function se(e){return oe(e)?(0,he.default)(e).reduce(function(t,n){var r=oe(e[n]),i=r?se(e[n]):e[n],o=r&&!(0,he.default)(i).length;return void 0===i||o?t:(0,L.default)(t,(0,R.default)({},n,i))},{}):e}function ce(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),(0,he.default)(t).forEach(function(r){r.endsWith("Id")?ce(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(function(t){ce(e,e.get(t),n)})}))}function de(e,t,n){var r=n?"outbound-rtp":"inbound-rtp",i=new j.default;if(null===t)return i;var o=[];return e.forEach(function(e){"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)}),o.forEach(function(t){e.forEach(function(n){n.type===r&&n.trackId===t.id&&ce(e,n,i)})}),i}function pe(e,t){var n=e&&e.navigator;if(n.mediaDevices){var r=function(e){if("object"!=(void 0===e?"undefined":(0,me.default)(e))||e.mandatory||e.optional)return e;var t={};return(0,he.default)(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r="object"==(0,me.default)(e[n])?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];var o={};"number"==typeof r.ideal?(o[i("min",n)]=r.ideal,t.optional.push(o),o={},o[i("max",n)]=r.ideal,t.optional.push(o)):(o[i("",n)]=r.ideal,t.optional.push(o))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach(function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])})}}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(t.version>=61)return i(e);if((e=JSON.parse((0,I.default)(e)))&&"object"==(0,me.default)(e.audio)){var o=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};o((e=JSON.parse((0,I.default)(e))).audio,"autoGainControl","googAutoGainControl"),o(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"==(0,me.default)(e.video)){var a=e.video.facingMode;a=a&&("object"==(void 0===a?"undefined":(0,me.default)(a))?a:{ideal:a});var s=t.version<66;if(a&&("user"===a.exact||"environment"===a.exact||"user"===a.ideal||"environment"===a.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||s)){var l=void 0;if(delete e.video.facingMode,"environment"===a.exact||"environment"===a.ideal?l=["back","rear"]:"user"!==a.exact&&"user"!==a.ideal||(l=["front"]),l)return n.mediaDevices.enumerateDevices().then(function(t){var n=(t=t.filter(function(e){return"videoinput"===e.kind})).find(function(e){return l.some(function(t){return e.label.toLowerCase().includes(t)})});return!n&&t.length&&l.includes("back")&&(n=t[t.length-1]),n&&(e.video.deviceId=a.exact?{exact:n.deviceId}:{ideal:n.deviceId}),e.video=r(e.video),ys("chrome: "+(0,I.default)(e)),i(e)})}e.video=r(e.video)}return ys("chrome: "+(0,I.default)(e)),i(e)},o=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,r){i(e,function(e){n.webkitGetUserMedia(e,t,function(e){r&&r(o(e))})})}.bind(n),n.mediaDevices.getUserMedia){var a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(e){return i(e,function(e){return a(e).then(function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach(function(e){e.stop()}),new DOMException("","NotFoundError");return t},function(e){return W.default.reject(o(e))})})}}}}function ge(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function ve(e){if("object"!=(void 0===e?"undefined":(0,me.default)(e))||!e.RTCPeerConnection||"ontrack"in e.RTCPeerConnection.prototype)K(e,"track",function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e});else{Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",function(r){var i=void 0;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find(function(e){return e.track&&e.track.id===r.track.id}):{track:r.track};var o=new Event("track");o.track=r.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],n.dispatchEvent(o)}),t.stream.getTracks().forEach(function(r){var i=void 0;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find(function(e){return e.track&&e.track.id===r.id}):{track:r};var o=new Event("track");o.track=r,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],n.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}}function be(e){if("object"==(void 0===e?"undefined":(0,me.default)(e))&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){var i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};var r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach(function(e){n._senders.push(t(n,e))})};var o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],o.apply(this,[e]),e.getTracks().forEach(function(e){var n=t._senders.find(function(t){return t.track===e});n&&t._senders.splice(t._senders.indexOf(n),1)})}}else if("object"==(void 0===e?"undefined":(0,me.default)(e))&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var a=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=a.apply(this,[]);return t.forEach(function(t){return t._pc=e}),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function _e(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,n=Array.prototype.slice.call(arguments),r=n[0],i=n[1],o=n[2];if(arguments.length>0&&"function"==typeof r)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof r))return t.apply(this,[]);var a=function(e){var t={};return e.result().forEach(function(e){var n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach(function(t){n[t]=e.stat(t)}),t[n.id]=n}),t},s=function(e){return new j.default((0,he.default)(e).map(function(t){return[t,e[t]]}))};if(arguments.length>=2){var l=function(e){i(s(a(e)))};return t.apply(this,[l,r])}return new W.default(function(n,r){t.apply(e,[function(e){n(s(a(e)))},r])}).then(i,o)}}}function ye(e){if("object"==(void 0===e?"undefined":(0,me.default)(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach(function(t){return t._pc=e}),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then(function(t){return de(t,e.track,!0)})}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var r=e.RTCPeerConnection.prototype.getReceivers;r&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=r.apply(this,[]);return t.forEach(function(t){return t._pc=e}),t}),K(e,"track",function(e){return e.receiver._pc=e.srcElement,e}),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then(function(t){return de(t,e.track,!1)})}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t=arguments[0],n=void 0,r=void 0,o=void 0;return this.getSenders().forEach(function(e){e.track===t&&(n?o=!0:n=e)}),this.getReceivers().forEach(function(e){return e.track===t&&(r?o=!0:r=e),e.track===t}),o||n&&r?W.default.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):n?n.getStats():r?r.getStats():W.default.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return i.apply(this,arguments)}}}}function we(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},(0,he.default)(this._shimmedLocalStreams).map(function(t){return e._shimmedLocalStreams[t][0]})};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(function(e){if(t.getSenders().find(function(t){return t.track===e}))throw new DOMException("Track already exists.","InvalidAccessError")});var r=this.getSenders();n.apply(this,arguments);var i=this.getSenders().filter(function(e){return-1===r.indexOf(e)});this._shimmedLocalStreams[e.id]=[e].concat(i)};var r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&(0,he.default)(this._shimmedLocalStreams).forEach(function(n){var r=t._shimmedLocalStreams[n].indexOf(e);-1!==r&&t._shimmedLocalStreams[n].splice(r,1),1===t._shimmedLocalStreams[n].length&&delete t._shimmedLocalStreams[n]}),i.apply(this,arguments)}}function xe(e,t){function n(e,t){var n=t.sdp;return(0,he.default)(e._reverseStreams||[]).forEach(function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)}),new RTCSessionDescription({type:t.type,sdp:n})}function r(e,t){var n=t.sdp;return(0,he.default)(e._reverseStreams||[]).forEach(function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)}),new RTCSessionDescription({type:t.type,sdp:n})}if(e.RTCPeerConnection){if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return we(e);var i=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=i.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map(function(t){return e._reverseStreams[t.id]})};var o=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var n=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach(function(e){if(n.getSenders().find(function(t){return t.track===e}))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[t.id]){var r=new e.MediaStream(t.getTracks());this._streams[t.id]=r,this._reverseStreams[r.id]=t,t=r}o.apply(this,[t])};var a=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},a.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){var r=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find(function(e){return e===t}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(function(e){return e.track===t}))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var o=this._streams[n.id];if(o)o.addTrack(t),W.default.resolve().then(function(){r.dispatchEvent(new Event("negotiationneeded"))});else{var a=new e.MediaStream([t]);this._streams[n.id]=a,this._reverseStreams[a.id]=n,this.addStream(a)}return this.getSenders().find(function(e){return e.track===t})},["createOffer","createAnswer"].forEach(function(t){var r=e.RTCPeerConnection.prototype[t],i=(0,R.default)({},t,function(){var e=this,t=arguments;return arguments.length&&"function"==typeof arguments[0]?r.apply(this,[function(r){var i=n(e,r);t[0].apply(null,[i])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):r.apply(this,arguments).then(function(t){return n(e,t)})});e.RTCPeerConnection.prototype[t]=i[t]});var s=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=r(this,arguments[0]),s.apply(this,arguments)):s.apply(this,arguments)};var l=(0,ue.default)(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=l.get.apply(this);return""===e.type?e:n(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");var n=void 0;this._streams=this._streams||{},(0,he.default)(this._streams).forEach(function(r){t._streams[r].getTracks().find(function(t){return e.track===t})&&(n=t._streams[r])}),n&&(1===n.getTracks().length?this.removeStream(this._reverseStreams[n.id]):n.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}}function ke(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var n=e.RTCPeerConnection.prototype[t],r=(0,R.default)({},t,function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)});e.RTCPeerConnection.prototype[t]=r[t]})}function Se(e,t){K(e,"negotiationneeded",function(e){var n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e})}function Ce(e,t,n,r,i){var o=Ss.writeRtpDescription(e.kind,t);if(o+=Ss.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=Ss.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":i||"active"),o+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var a=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=a;var s="msid:"+(r?r.id:"-")+" "+a+"\r\n";o+="a="+s,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+Ss.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+Ss.localCName+"\r\n"),o}function Te(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]},i=function(e,t,n,i){var o=r(e.parameters.apt,n),a=r(t.parameters.apt,i);return o&&a&&o.name.toLowerCase()===a.name.toLowerCase()};return e.codecs.forEach(function(r){for(var o=0;o<t.codecs.length;o++){var a=t.codecs[o];if(r.name.toLowerCase()===a.name.toLowerCase()&&r.clockRate===a.clockRate){if("rtx"===r.name.toLowerCase()&&r.parameters&&a.parameters.apt&&!i(r,a,e.codecs,t.codecs))continue;(a=JSON.parse((0,I.default)(a))).numChannels=Math.min(r.numChannels,a.numChannels),n.codecs.push(a),a.rtcpFeedback=a.rtcpFeedback.filter(function(e){for(var t=0;t<r.rtcpFeedback.length;t++)if(r.rtcpFeedback[t].type===e.type&&r.rtcpFeedback[t].parameter===e.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(e){for(var r=0;r<t.headerExtensions.length;r++){var i=t.headerExtensions[r];if(e.uri===i.uri){n.headerExtensions.push(i);break}}}),n}function Ee(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function Ie(e,t){var n=e.getRemoteCandidates().find(function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type});return n||e.addRemoteCandidate(t),!n}function Ae(e,t){var n=new Error(t);return n.name=e,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],n}function Re(e){var t=e&&e.navigator,n=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return n(e).catch(function(e){return W.default.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}}(e))})}}function Oe(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function Le(e,t){if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var n=(0,ue.default)(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){n.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);var r=Cs(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=function(e,t){var n=!1;return(e=JSON.parse((0,I.default)(e))).filter(function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&re("RTCIceServer.url","RTCIceServer.urls");var r="string"==typeof t;return r&&(t=[t]),t=t.filter(function(e){if(0===e.indexOf("stun:"))return!1;var t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!n?(n=!0,!0):t&&!n}),delete e.url,e.urls=r?t[0]:t,!!t.length}})}(e.iceServers,t.version),te("ICE servers after filtering:",e.iceServers)),new r(e)},e.RTCPeerConnection.prototype=r.prototype}function Pe(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}function Me(e,t){var n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){re("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var i=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"==(void 0===e?"undefined":(0,me.default)(e))&&"object"==(0,me.default)(e.audio)&&(e=JSON.parse((0,I.default)(e)),i(e.audio,"autoGainControl","mozAutoGainControl"),i(e.audio,"noiseSuppression","mozNoiseSuppression")),o(e)},r&&r.prototype.getSettings){var a=r.prototype.getSettings;r.prototype.getSettings=function(){var e=a.apply(this,arguments);return i(e,"mozAutoGainControl","autoGainControl"),i(e,"mozNoiseSuppression","noiseSuppression"),e}}if(r&&r.prototype.applyConstraints){var s=r.prototype.applyConstraints;r.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"==(void 0===e?"undefined":(0,me.default)(e))&&(e=JSON.parse((0,I.default)(e)),i(e,"autoGainControl","mozAutoGainControl"),i(e,"noiseSuppression","mozNoiseSuppression")),s.apply(this,[e])}}}}function $e(e){"object"==(void 0===e?"undefined":(0,me.default)(e))&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function Ne(e,t){if("object"==(void 0===e?"undefined":(0,me.default)(e))&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var n=e.RTCPeerConnection.prototype[t],r=(0,R.default)({},t,function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)});e.RTCPeerConnection.prototype[t]=r[t]});var n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=Array.prototype.slice.call(arguments),i=e[0],o=e[1],a=e[2];return r.apply(this,[i||null]).then(function(e){if(t.version<53&&!o)try{e.forEach(function(e){e.type=n[e.type]||e.type})}catch(t){if("TypeError"!==t.name)throw t;e.forEach(function(t,r){e.set(r,(0,L.default)({},t,{type:n[t.type]||t.type}))})}return e}).then(o,a)}}}function De(e){if("object"==(void 0===e?"undefined":(0,me.default)(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&!(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach(function(t){return t._pc=e}),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):W.default.resolve(new j.default)}}}function Fe(e){if("object"==(void 0===e?"undefined":(0,me.default)(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&!(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,n=t.apply(this,[]);return n.forEach(function(t){return t._pc=e}),n}),K(e,"track",function(e){return e.receiver._pc=e.srcElement,e}),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function qe(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;re("removeStream","removeTrack"),this.getSenders().forEach(function(n){n.track&&e.getTracks().includes(n.track)&&t.removeTrack(n)})})}function Ue(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function Be(e){if("object"==(void 0===e?"undefined":(0,me.default)(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach(function(e){if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});var r=t.apply(this,arguments);if(n){var i=r.sender,o=i.getParameters();(!("encodings"in o)||1===o.encodings.length&&0===(0,he.default)(o.encodings[0]).length)&&(o.encodings=e.sendEncodings,i.sendEncodings=e.sendEncodings,this.setParametersPromises.push(i.setParameters(o).then(function(){delete i.sendEncodings}).catch(function(){delete i.sendEncodings})))}return r})}}function je(e){if("object"==(void 0===e?"undefined":(0,me.default)(e))&&e.RTCRtpSender){var t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){var e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}}function Ve(e){if("object"==(void 0===e?"undefined":(0,me.default)(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=this,n=arguments;return this.setParametersPromises&&this.setParametersPromises.length?W.default.all(this.setParametersPromises).then(function(){return t.apply(e,n)}).finally(function(){e.setParametersPromises=[]}):t.apply(this,arguments)}}}function He(e){if("object"==(void 0===e?"undefined":(0,me.default)(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=this,n=arguments;return this.setParametersPromises&&this.setParametersPromises.length?W.default.all(this.setParametersPromises).then(function(){return t.apply(e,n)}).finally(function(){e.setParametersPromises=[]}):t.apply(this,arguments)}}}function Ye(e){if("object"==(void 0===e?"undefined":(0,me.default)(e))&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach(function(r){return t.call(n,r,e)}),e.getVideoTracks().forEach(function(r){return t.call(n,r,e)})},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=this,r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i&&i.forEach(function(e){n._localStreams?n._localStreams.includes(e)||n._localStreams.push(e):n._localStreams=[e]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var n=this._localStreams.indexOf(e);if(-1!==n){this._localStreams.splice(n,1);var r=e.getTracks();this.getSenders().forEach(function(e){r.includes(e.track)&&t.removeTrack(e)})}})}}function ze(e){if("object"==(void 0===e?"undefined":(0,me.default)(e))&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach(function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var n=new Event("addstream");n.stream=e,t.dispatchEvent(n)}})})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach(function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}})}),t.apply(e,arguments)}}}function Ge(e){if("object"==(void 0===e?"undefined":(0,me.default)(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),W.default.resolve()):i},t.createAnswer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),W.default.resolve()):i};var s=function(e,t,n){var r=i.apply(this,[e]);return n?(r.then(t,n),W.default.resolve()):r};t.setLocalDescription=s,s=function(e,t,n){var r=o.apply(this,[e]);return n?(r.then(t,n),W.default.resolve()):r},t.setRemoteDescription=s,s=function(e,t,n){var r=a.apply(this,[e]);return n?(r.then(t,n),W.default.resolve()):r},t.addIceCandidate=s}}function We(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=function(e){return r(Ke(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function Ke(e){return e&&void 0!==e.video?(0,L.default)({},e,{video:se(e.video)}):e}function Xe(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){for(var r=[],i=0;i<e.iceServers.length;i++){var o=e.iceServers[i];!o.hasOwnProperty("urls")&&o.hasOwnProperty("url")?(re("RTCIceServer.url","RTCIceServer.urls"),o=JSON.parse((0,I.default)(o)),o.urls=o.url,delete o.url,r.push(o)):r.push(e.iceServers[i])}e.iceServers=r}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}}function Ze(e){"object"==(void 0===e?"undefined":(0,me.default)(e))&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function Je(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var n=this.getTransceivers().find(function(e){return"audio"===e.receiver.track.kind});!1===e.offerToReceiveAudio&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveAudio||n||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var r=this.getTransceivers().find(function(e){return"video"===e.receiver.track.kind});!1===e.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveVideo||r||this.addTransceiver("video")}return t.apply(this,arguments)}}function Qe(e){"object"!=(void 0===e?"undefined":(0,me.default)(e))||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}function et(e){if(e.RTCIceCandidate&&!(e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==(void 0===e?"undefined":(0,me.default)(e))&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse((0,I.default)(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var n=new t(e),r=ks.parseCandidate(e.candidate),i=(0,L.default)(n,r);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,K(e,"icecandidate",function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t})}}function tt(e,t){if(e.RTCPeerConnection){"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var n=function(e){if(!e||!e.sdp)return!1;var t=ks.splitSections(e.sdp);return t.shift(),t.some(function(e){var t=ks.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")})},r=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=parseInt(t[1],10);return n!=n?-1:n},i=function(e){var n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},o=function(e,n){var r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);var i=ks.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){"plan-b"===this.getConfiguration().sdpSemantics&&Object.defineProperty(this,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){var e=r(arguments[0]),s=i(e),l=o(arguments[0],e),c=void 0;c=0===s&&0===l?Number.POSITIVE_INFINITY:0===s||0===l?Math.max(s,l):Math.min(s,l);var u={};Object.defineProperty(u,"maxMessageSize",{get:function(){return c}}),this._sctp=u}return a.apply(this,arguments)}}}function nt(e){function t(e,t){var n=e.send;e.send=function(){var r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=n.apply(this,arguments);return t(e,this),e},K(e,"datachannel",function(e){return t(e.channel,e.target),e})}}function rt(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(function(e){var n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}}function it(e,t){if(e.RTCPeerConnection&&!("chrome"===t.browser&&t.version>=71||"safari"===t.browser&&t.version>=605)){var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){var r=t.sdp.split("\n").filter(function(e){return"a=extmap-allow-mixed"!==e.trim()}).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:r}):t.sdp=r}return n.apply(this,arguments)}}}function ot(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?W.default.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),W.default.resolve())})}}function at(){var e="unknown",t="unknown";return mI.get(!0)&&(e=mI.get(!0)[0],t=mI.get(!0)[1]),{name:e,version:t}}function st(e){var t=e.key,n=e.data,r=e.link,i=e.addDocLink,o=void 0===i||i,a="",s="",l="";kI(WT[t])?a=WT[t](n):CI(WT[t])&&(a=WT[t]);var c=function(){if(window.TRTC_ERROR_INFO&&window.TRTC_ERROR_LINK)return{TRTC_ERROR_INFO:window.TRTC_ERROR_INFO,TRTC_ERROR_LINK:window.TRTC_ERROR_LINK};var e=localStorage.getItem(nT);if(e){e=JSON.parse(e);var t=document.createElement("script");t.type="text/javascript",t.text=e.message,document.body.appendChild(t);var n=window.TRTC_ERROR_INFO,r=window.TRTC_ERROR_LINK;return document.body.removeChild(t),{TRTC_ERROR_INFO:n,TRTC_ERROR_LINK:r}}return{}}(),u=c.TRTC_ERROR_INFO,d=c.TRTC_ERROR_LINK;r?l="".concat(r.className,".html#").concat(r.fnName):d&&d[t]&&(kI(d[t])?l=d[t](n):CI(d[t])&&(l=d[t]));var f=a;return OI()&&(u&&u[t]&&(kI(u[t])?s=u[t](n):CI(u[t])&&(s=u[t])),s&&(f=o?s+"\n请查看文档: "+vI("zh-cn",l)+"\n\n":s+"\n\n",f+=a)),o&&(f+=" \nRefer to: "+vI("en",l)+"\n"),f}function lt(){var e=navigator.userAgent,t=navigator.connection,n=e.match(/NetType\/\w+/)?e.match(/NetType\/\w+/)[0]:"";"3gnet"===(n=n.toLowerCase().replace("nettype/",""))&&(n="3g");var r=t&&t.type&&t.type.toLowerCase(),i=t&&t.effectiveType&&t.effectiveType.toLowerCase();"slow-2"===i&&(i="2g");var o=n||"unknown";if(r)switch(r){case"cellular":case"wimax":o=i||"unknown";break;case"wifi":o="wifi";break;case"ethernet":o="wired";break;case"none":case"other":case"unknown":o="unknown"}return o}function ct(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e<=1?n:ct(e-1,n,t+n)}function ut(e){var t=Math.round(e/2)+1;return t>6?13e3:1e3*ct(t)}function dt(e){return(0,y.default)(Object.prototype.toString,e,[]).replace(/^\[object\s(\w+)\]$/,"$1").toLowerCase()}function ft(e){var t={};return t.urls="turn:".concat(e.url),SI(e.username)||SI(e.credential)||(t.username=e.username,t.credential=e.credential,t.credentialType="password",SI(e.credentialType)||(t.credentialType=e.credentialType)),t}function pt(){return performance&&performance.now?Math.floor(performance.now()):Date.now()}function ht(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"big";if(!CI(e))return 0;var n=e.split(".");return"big"===t?(Number(n[0])<<24|Number(n[1])<<16|Number(n[2])<<8|Number(n[3]))>>>0:(Number(n[3])<<24|Number(n[2])<<16|Number(n[1])<<8|Number(n[0]))>>>0}function gt(e){var t=e.url,n=e.body,r=e.method,i=e.timeout,o=new XMLHttpRequest;return new W.default(function(e,a){o.onload=function(t){if(o.status>=200&&o.status<300&&o.responseText.length>0)try{var n=JSON.parse(o.response);e({data:n})}catch(t){e({data:o.response})}else o.status>0&&a({code:o.status,message:"request failed, readyState:".concat(o.readyState," status:").concat(o.status," loaded size:").concat(t.loaded)})};var s=function(e){a({code:o.readyState,message:"request ".concat(e.type,", readyState:").concat(o.readyState," status:").concat(o.status," loaded size:").concat(e.loaded)})};o.onerror=s,o.onabort=s,o.ontimeout=s,o.timeout=i||5e3,o.open(r||"POST",t,!0),o.send(n)})}function mt(e){var t=e.retryFunction,r=e.settings,i=e.onError,o=e.onRetrying,s=e.onRetryFailed,l=e.context;return function(){for(var e=this,c=arguments.length,u=new Array(c),d=0;d<c;d++)u[d]=arguments[d];var f=r.retries||5,p=0,h=-1,g=0,m=function(){var c=a(n().mark(function a(c,d){var v,b,_,y;return n().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return v=l||e,n.prev=1,n.next=4,t.apply(v,u);case 4:b=n.sent,p=0,c(b),n.next=14;break;case 9:n.prev=9,n.t0=n.catch(1),_=function(){clearTimeout(h),p=0,g=2,d(n.t0)},y=function(){2!==g&&p<f?(p++,g=1,kI(o)&&o.call(v,p,_),h=setTimeout(function(){h=-1,m(c,d)},SI(r.timeout)?1e3:r.timeout)):(_(),kI(s)&&s.call(v,n.t0))},kI(i)?i.call(v,n.t0,y,d,u):y();case 14:case"end":return n.stop()}},a,null,[[1,9]])}));return function(e,t){return c.apply(this,arguments)}}();return new W.default(m)}}function vt(e){if(null==e)return!0;if("boolean"==typeof e)return!1;if("number"==typeof e)return 0===e;if("string"==typeof e)return 0===e.length;if("function"==typeof e)return 0===e.length;if(Array.isArray(e))return 0===e.length;if(e instanceof Error)return""===e.message;if(xI(e))switch(Object.prototype.toString.call(e)){case"[object File]":case"[object Map]":case"[object Set]":return 0===e.size;case"[object Object]":for(var t in e)if(kR.call(e,t))return!1;return!0}return!1}function bt(e){var t=GR(e);return t.media.forEach(function(e){if(e.type===hS){var t=new m.default;e.rtp.forEach(function(e){var n=e.payload;return"H264"===e.codec&&t.add(n)}),e.fmtp.forEach(function(e){var n=e.payload,r=e.config.match(/apt=(\d+)/);r&&r[1]&&t.has(Number(r[1]))&&t.add(n)});var n=function(e){var n=e.payload;return!t.has(n)};e.rtp=e.rtp.filter(n),e.rtcpFb=e.rtcpFb.filter(n),e.fmtp=e.fmtp.filter(n),e.payloads=e.payloads.split(" ").filter(function(e){return!t.has(Number(e))}).join(" ")}}),WR(t)}function _t(){return yt.apply(this,arguments)}function yt(){return yt=a(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new W.default(function(){var e=a(n().mark(function e(t){var r,i,o,s,l,c,u,d,f,p,h,g,m,v;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={encode:!1,decode:!1},i=null,e.prev=2,o=document.createElement("canvas"),s=o.getContext("2d"),o.width=640,o.height=480,l=setInterval(function(){s.fillText("test",Math.floor(640*Math.random()),Math.floor(480*Math.random()))},33),c=-1,u=-1,i=function(){clearInterval(c),clearInterval(l),clearTimeout(u),f.close(),p.close(),d.getTracks().forEach(function(e){return e.stop()})},u=setTimeout(function(){i(),t(r)},3e3),d=o.captureStream(),f=new RTCPeerConnection({}),p=new RTCPeerConnection({offerToReceiveAudio:!0,offerToReceiveVideo:!0}),f.addEventListener("icecandidate",function(e){return p.addIceCandidate(e.candidate)}),p.addEventListener("icecandidate",function(e){return f.addIceCandidate(e.candidate)}),f.addTrack(d.getVideoTracks()[0],d),e.next=20,f.createOffer();case 20:return h=e.sent,e.next=23,f.setLocalDescription(h);case 23:return e.next=25,p.setRemoteDescription(h);case 25:return e.next=27,p.createAnswer();case 27:return g=e.sent,m=GR(g.sdp),v=m.media[0].rtp.findIndex(function(e){return"H264"===e.codec}),m.media[0].rtp=[m.media[0].rtp[v]],m.media[0].fmtp=m.media[0].fmtp.filter(function(e){return e.payload===m.media[0].rtp[0].payload}),m.media[0].rtcpFb=m.media[0].rtcpFb.filter(function(e){return e.payload===m.media[0].rtp[0].payload}),g.sdp=WR(m),e.next=36,p.setLocalDescription(g);case 36:return e.next=38,f.setRemoteDescription(g);case 38:c=setInterval(a(n().mark(function e(){var o,a;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.encode&&r.decode&&(i(),t(r)),e.next=3,f.getStats();case 3:return o=e.sent,e.next=6,p.getStats();case 6:a=e.sent,r.encode||o.forEach(function(e){"outbound-rtp"===e.type&&e.mediaType===hS&&e.framesEncoded>0&&(r.encode=!0)}),r.decode||a.forEach(function(e){"inbound-rtp"===e.type&&e.mediaType===hS&&e.framesDecoded>0&&(r.decode=!0)});case 9:case"end":return e.stop()}},e)})),500),e.next=46;break;case 41:e.prev=41,e.t0=e.catch(2),i(),aA.warn(e.t0),t(r);case 46:case"end":return e.stop()}},e,null,[[2,41]])}));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)})),yt.apply(this,arguments)}function wt(){return(0,he.default)(bO.detail).findIndex(function(e){return!bO.detail[e]})>=0}function xt(){wt()&&(aA.warn(st({key:BT})),aA.info("".concat(navigator.userAgent," ").concat((0,I.default)(bO.detail))))}function kt(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia)}function St(){return"RTCPeerConnection"in window&&"getReceivers"in window.RTCPeerConnection.prototype}function Ct(){return"RTCPeerConnection"in window&&"getSenders"in window.RTCPeerConnection.prototype}function Tt(){return"RTCPeerConnection"in window&&"getTransceivers"in window.RTCPeerConnection.prototype}function Et(){return"RTCPeerConnection"in window&&"addTransceiver"in window.RTCPeerConnection.prototype}function It(){return"RTCRtpSender"in window&&"replaceTrack"in window.RTCRtpSender.prototype}function At(){return"RTCRtpSender"in window&&"setParameters"in window.RTCRtpSender.prototype&&Ct()}function Rt(){return!!SI(navigator.mediaDevices)&&(aA.error(WT.NOT_SUPPORTED_MEDIA),!0)}function Ot(){return"http:"===location.protocol&&!hI&&(aA.warn(st({key:UT})),!0)}function Lt(e){return!("candidate-pair"!==e.type||!e.nominated||"in-progress"!==e.state&&"succeeded"!==e.state||EI(e.selected)&&!e.selected)}function Pt(){var e="unknown";return IO.get(!0)&&(e=IO.get(!0)),e}function Mt(){var e="";return screen.width&&(e+=(screen.width?screen.width*window.devicePixelRatio:"")+" * "+(screen.height?screen.height*window.devicePixelRatio:"")),e}function $t(){var e=!1;return(navigator.getUserMedia||navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)&&(e=!0),e}function Nt(){for(var e={isSupported:!1},t=["AudioContext","webkitAudioContext","mozAudioContext","msAudioContext"],n=0;n<t.length;n++)if(t[n]in window){e.isSupported=!0;break}return e.isSupported}function Dt(){return!(TE&&nI()<86||uE&&TI(uI)&&uI<15||oI&&oI<63||!(yO()&&"captureStream"in HTMLCanvasElement.prototype))}function Ft(){return Ft=a(n().mark(function e(){var t;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ot()&&!Rt()){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,qt();case 4:return t=e.sent,e.abrupt("return",t.filter(function(e){return e.kind===RS}).map(function(e,t){var n=e.label;e.label||(n="camera_"+t);var r={label:n,deviceId:e.deviceId,kind:e.kind};return e.groupId&&(r.groupId=e.groupId),e.getCapabilities&&(r.getCapabilities=function(){return e.getCapabilities()}),r}));case 6:case"end":return e.stop()}},e)})),Ft.apply(this,arguments)}function qt(){return Ut.apply(this,arguments)}function Ut(){return(Ut=a(n().mark(function e(){var t;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ot()&&!Rt()){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,navigator.mediaDevices.enumerateDevices();case 4:return(t=e.sent).forEach(function(e){jO.add("".concat(e.deviceId,"_").concat(e.kind))}),e.abrupt("return",t);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Bt(){return jt.apply(this,arguments)}function jt(){return jt=a(n().mark(function e(){var t;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qt();case 2:return t=e.sent,e.abrupt("return",t.filter(function(e){return e.kind!==AS||e.deviceId!=iT}).map(function(e,t){var n=e.label;e.label||(n=e.kind+"_"+t);var r={label:n,deviceId:e.deviceId,kind:e.kind};return e.groupId&&(r.groupId=e.groupId),e.getCapabilities&&(r.getCapabilities=function(){return e.getCapabilities()}),r}));case 4:case"end":return e.stop()}},e)})),jt.apply(this,arguments)}function Vt(){return Ht.apply(this,arguments)}function Ht(){return Ht=a(n().mark(function e(){var t;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qt();case 2:return t=e.sent,e.abrupt("return",t.filter(function(e){return e.kind===AS&&e.deviceId!==iT}).map(function(e,t){var n=e.label;e.label||(n="microphone_"+t);var r={label:n,deviceId:e.deviceId,kind:e.kind};return e.groupId&&(r.groupId=e.groupId),e.getCapabilities&&(r.getCapabilities=function(){return e.getCapabilities()}),r}));case 4:case"end":return e.stop()}},e)})),Ht.apply(this,arguments)}function Yt(){return Yt=a(n().mark(function e(){var t;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qt();case 2:return t=e.sent,e.abrupt("return",t.filter(function(e){return"audiooutput"===e.kind}).map(function(e,t){var n=e.label;e.label||(n="speaker_"+t);var r={label:n,deviceId:e.deviceId,kind:e.kind};return e.groupId&&(r.groupId=e.groupId),r}));case 4:case"end":return e.stop()}},e)})),Yt.apply(this,arguments)}function zt(e){var t;if(e instanceof CanvasCaptureMediaStreamTrack)return!1;if(!(e instanceof MediaStreamTrack))return!1;var n=e.label.toLocaleLowerCase();if(n.includes("camera")||n.includes("webcam"))return!0;var r="".concat(null===(t=e.getSettings())||void 0===t?void 0:t.deviceId,"_").concat(RS);return!!jO.has(r)}function Gt(e,t){return Wt.apply(this,arguments)}function Wt(){return(Wt=a(n().mark(function e(t,r){var i,o;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vt();case 2:if(i=e.sent,(null==(o=i.find(function(e){return e.deviceId===rT}))?void 0:o.groupId)!==t||o.label!==r){e.next=6;break}return e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Kt(e,t,n,r){if(this.useStringRoomId_){if(!CI(e)||!/^[A-Za-z\d\s!#$%&()+\-:;<=.>?@[\]^_{}|~,]{1,64}$/.test(e))throw new _R({code:bR.INVALID_PARAMETER,message:st({key:ET,data:t,link:{className:r,fnName:n}})})}else if(!(TI(e)&&/^[1-9]\d*$/.test(String(e))&&e<4294967295))throw new _R({code:bR.INVALID_PARAMETER,message:st({key:IT,data:t,link:{className:r,fnName:n}})})}function Xt(e,t,n,r){if(!/^[A-Za-z\d_-]*$/.test(e))throw new _R({code:bR.INVALID_PARAMETER,message:st({key:LT,data:t,link:{className:r,fnName:n}})})}function Zt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n,r){var i=r.value;return r.value=function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return Qt.call(this,t,r,n,this.name_),i.apply(this,r)},r}}function Jt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e,r,i){var o=i.value;return i.value=a(n().mark(function e(){var i,a,s,l=arguments;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(i=l.length,a=new Array(i),s=0;s<i;s++)a[s]=l[s];return Qt.call(this,t,a,r,this.name_),e.abrupt("return",o.apply(this,a));case 3:case"end":return e.stop()}},e,this)})),i}}function Qt(e,t,n,r){try{for(var i=0;i<e.length;i++)en.call(this,{rule:e[i],value:t[i],key:e[i].name,fnName:n,className:r})}catch(e){throw aA.error(e),e}}function en(e){var t=this,n=e.rule,r=e.value,i=e.key,o=e.fnName,a=e.className;if(SI(r)){if(n.required)throw new _R({code:bR.INVALID_PARAMETER,message:st({key:xT,data:{key:i,rule:n,fnName:o,value:r},link:{className:a,fnName:o}})});if(SI(n.defaultValue))return;r=n.defaultValue}if(Array.isArray(n.type)){if(!n.type.map(function(e){return e.toLowerCase()}).includes(dt(r)))throw new _R({code:bR.INVALID_PARAMETER,message:st({key:kT,data:{key:i,rule:n,fnName:o,value:r},link:{className:a,fnName:o}})})}else if(!SI(n.type)&&dt(r)!==n.type)throw new _R({code:bR.INVALID_PARAMETER,message:st({key:kT,data:{key:i,rule:n,fnName:o,value:r},link:{className:a,fnName:o}})});if(!1===n.allowEmpty){var s=TI(r)&&(0===r||(0,u.default)(r)),l=CI(r)&&""===r.trim();if(s||l)throw new _R({code:bR.INVALID_PARAMETER,message:st({key:ST,data:{key:i,rule:n,fnName:o,value:r},link:{className:a,fnName:o}})})}if(n.notLessThanZero&&TI(r)&&r<0)throw new _R({code:bR.INVALID_PARAMETER,message:st({key:FT,data:{key:i,rule:n,fnName:o,value:r},link:{className:a,fnName:o}})});if(CI(n.instanceOf)){if(!r||r.name_!==n.instanceOf)throw new _R({code:bR.INVALID_PARAMETER,message:st({key:CT,data:{key:i,rule:n,fnName:o,value:r},link:{className:a,fnName:o}})})}else if(kI(n.instanceOf)&&!(r instanceof n.instanceOf))throw new _R({code:bR.INVALID_PARAMETER,message:st({key:CT,data:{key:i,rule:n,fnName:o,value:r},link:{className:a,fnName:o}})});if(n.values&&!n.values.includes(r))throw new _R({code:bR.INVALID_PARAMETER,message:st({key:TT,data:{key:i,rule:n,fnName:o,value:r},link:{className:a,fnName:o}})});var c=n.properties;xI(c)&&II(r)&&(0,he.default)(c).forEach(function(e){en.call(t,{rule:c[e],value:r&&r[e],key:"".concat(i,".").concat(e),fnName:o,className:a})});var d=n.arrayItem;xI(d)&&AI(r)&&r.forEach(function(e,n){en.call(t,{rule:d,value:e,key:"".concat(i,"[").concat(n,"]"),fnName:o,className:a})}),kI(n.validate)&&n.validate.call(this,r,i,o,a,this)}function tn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{retries:5,timeout:2e3};return function(t,n,r){var i=mt({retryFunction:r.value,settings:e,onError:e.onError,onRetrying:e.onRetrying,onRetryFailed:e.onRetryFailed});return r.value=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.apply(this,t)},r}}function nn(e){return function(t,n,r){var i=r.value;return r.value=function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];try{e||(e=this.name_),mj.handleFunctionState({className:e,fnName:n,params:r}),e=void 0}catch(e){this.log_.info(e)}return i.apply(this,r)},r}}function rn(e){return on.apply(this,arguments)}function on(){return(on=a(n().mark(function e(r){var i,o,a,s,l,c;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i={echoCancellation:r.echoCancellation,autoGainControl:r.autoGainControl,noiseSuppression:r.noiseSuppression},r.audio){e.next=5;break}i=!1,e.next=15;break;case 5:if(vt(r.microphoneId)){e.next=9;break}i=t({deviceId:r.useExact?{exact:r.microphoneId}:r.microphoneId,sampleRate:r.sampleRate,channelCount:r.channelCount},i),e.next=15;break;case 9:return i=t({sampleRate:r.sampleRate,channelCount:r.channelCount},i),e.next=12,QH.getMicrophones();case 12:o=e.sent,(a=o.filter(function(e){return e.deviceId.length>0})).length>0&&(i.deviceId={exact:a[0].deviceId});case 15:return s={},l={ideal:r.width,max:r.width},c={ideal:r.height,max:r.height},fE&&FE&&r.width*r.height<101376&&(l=r.width,c=r.height),s=!SI(r.facingMode)&&r.video?{facingMode:r.facingMode,width:l,height:c,frameRate:r.frameRate}:!vt(r.cameraId)&&r.video?{deviceId:r.useExact?{exact:r.cameraId}:r.cameraId,width:l,height:c,frameRate:r.frameRate}:!!r.video&&(!!SI(r.width)||{width:l,height:c,frameRate:r.frameRate}),e.abrupt("return",{audio:i,video:s});case 21:case"end":return e.stop()}},e)}))).apply(this,arguments)}function an(e){var t={echoCancellation:e.echoCancellation,autoGainControl:e.autoGainControl,noiseSuppression:e.noiseSuppression,sampleRate:e.sampleRate,channelCount:e.channelCount};return SI(e.microphoneId)||(t.deviceId=e.microphoneId),{audio:t,video:!1}}function sn(e){var t={systemAudio:"include",selfBrowserSurface:"include",surfaceSwitching:"include"},n={width:sI?{max:e.width}:{ideal:e.width,max:e.width},height:sI?{max:e.height}:{ideal:e.height,max:e.height},frameRate:e.frameRate,displaySurface:"monitor"};return t.video=n,SI(e.audioConstraints)||(t.audio=e.audioConstraints),t}function ln(){return function(e,n,r){var i=r.value,o=function e(n){var r=n.fn,i=n.args,o=n.context,a=n.resolve,s=n.reject;r.apply(o,i).then(a,s).finally(function(){var n=WV.get(o);n&&(n.shift(),n[0]&&e(t({},n[0])))})};return r.value=function(){for(var e=this,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return new W.default(function(t,a){if(WV.has(e)){var s=WV.get(e),l=s.length;s.push({fn:i,args:r,context:e,resolve:t,reject:a,name:n}),0===l&&o({fn:i,args:r,context:e,resolve:t,reject:a})}else WV.set(e,[{fn:i,args:r,context:e,resolve:t,reject:a,name:n}]),o({fn:i,args:r,context:e,resolve:t,reject:a})})},r}}function cn(){return function(e,t,r){var i=r.value,o=new m.default;return r.value=a(n().mark(function e(){var r,a,s,l,c=arguments;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!o.has(this)){e.next=2;break}throw new _R({code:bR.INVALID_OPERATION,message:st({key:wT,data:{name:t}})});case 2:for(e.prev=2,o.add(this),r=c.length,a=new Array(r),s=0;s<r;s++)a[s]=c[s];return e.next=7,i.apply(this,a);case 7:return l=e.sent,o.delete(this),e.abrupt("return",l);case 12:throw e.prev=12,e.t0=e.catch(2),o.delete(this),e.t0;case 16:case"end":return e.stop()}},e,this,[[2,12]])})),r}}function un(e){return dn.apply(this,arguments)}function dn(){return dn=a(n().mark(function e(t){var r,i,o,a,s,l,c,u,d,f,p,h,g;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.userId,i=t.sdkAppId,o=t.useStringRoomId,a=t.roomId,s=t.userSig,l={delta:0,count:[1,1],msg:[]},e.prev=2,(c=new FormData).append("userId",String(r)),c.append("sdkAppId",String(i)),c.append("isStrGroupId",o),c.append("groupId",String(a)),c.append("sdkVersion",Rs),c.append("userSig",String(s)),VC&&c.append("oversea",!0),u=pt(),e.next=14,gn(c,l,i);case 14:return(d=e.sent).config&&d.config.loggerDomain&&HS(d.config.loggerDomain),l.delta=pt()-u,fn({stat:l,userId:r}),e.abrupt("return",d);case 21:throw e.prev=21,e.t0=e.catch(2),f=AI(e.t0)?e.t0[0]:e.t0,p=TI(f.code)?f.code:0,h="get websocket url failed: ".concat(f.message.includes("timeout")?"timeout":f.message),g=new _R({code:bR.SCHEDULE_FAILED,extraCode:p,message:st({key:AT,data:{error:h,code:p}})}),aA.error(g),fn({stat:l,userId:r,roomId:a,error:g}),g;case 30:case"end":return e.stop()}},e,null,[[2,21]])})),dn.apply(this,arguments)}function fn(e){var t=e.stat,n=e.userId,r=e.error;r?CR.logFailedEvent({eventType:CC,error:r,userId:n}):CR.logSuccessEvent({eventType:CC,delta:t.delta,userId:n}),CR.uploadEvent({log:"stat-schedule:"+(0,I.default)(t),userId:n})}function pn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:OS;return t=VC||(yI(e)?n===OS?BC:jC:n===OS?qC:UC),"https://".concat(t,"/api/v1/config")}function hn(e,t,n){return new W.default(function(r,i){gt({url:e,body:t,timeout:n.timeout}).then(function(e){0===e.data.code?r(e.data.data):i({code:e.data.code,message:e.data.msg})}).catch(i)})}function gn(e,t,n){return new W.default(function(r,i){var o,a=null;(o=[zH(function(e){return t.count[0]=e+1},function(e,n){t.msg[0]=e.message,a||n()})(pn(n,OS),e,{get timeout(){return 1e3*ct(2+t.count[0])}}),zH(function(e){return t.count[1]=e+1},function(e,n){t.msg[1]=e.message,a||n()})(pn(n,LS),e,{get timeout(){return 1e3*ct(2+t.count[1])}})],new W.default(function(e,t){var n=[];o.forEach(function(r){r.then(e).catch(function(e){n.push(e),n.length===o.length&&t(n)})})})).then(function(e){r(a=e)}).catch(i)})}var mn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:{},vn=function(e){return e&&e.Math==Math&&e},bn=vn("object"==("undefined"==typeof globalThis?"undefined":(0,me.default)(globalThis))&&globalThis)||vn("object"==("undefined"==typeof window?"undefined":(0,me.default)(window))&&window)||vn("object"==("undefined"==typeof self?"undefined":(0,me.default)(self))&&self)||vn("object"==(void 0===mn?"undefined":(0,me.default)(mn))&&mn)||function(){return this}()||Function("return this")(),_n={},yn=function(e){try{return!!e()}catch(e){return!0}},wn=!yn(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),xn=!yn(function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}),kn=xn,Sn=Function.prototype.call,Cn=kn?Sn.bind(Sn):function(){return Sn.apply(Sn,arguments)},Tn={},En={}.propertyIsEnumerable,In=ue.default,An=In&&!En.call({1:2},1);Tn.f=An?function(e){var t=In(this,e);return!!t&&t.enumerable}:En;var Rn,On,Ln=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},Pn=xn,Mn=Function.prototype,$n=Mn.call,Nn=Pn&&Mn.bind.bind($n,$n),Dn=function(e){return Pn?Nn(e):function(){return $n.apply(e,arguments)}},Fn=Dn,qn=Fn({}.toString),Un=Fn("".slice),Bn=function(e){return Un(qn(e),8,-1)},jn=Bn,Vn=Dn,Hn=function(e){if("Function"===jn(e))return Vn(e)},Yn=yn,zn=Bn,Gn=Object,Wn=Hn("".split),Kn=Yn(function(){return!Gn("z").propertyIsEnumerable(0)})?function(e){return"String"==zn(e)?Wn(e,""):Gn(e)}:Gn,Xn=function(e){return null==e},Zn=Xn,Jn=TypeError,Qn=function(e){if(Zn(e))throw Jn("Can't call method on "+e);return e},er=Kn,tr=Qn,nr=function(e){return er(tr(e))},rr="object"==("undefined"==typeof document?"undefined":(0,me.default)(document))&&document.all,ir={all:rr,IS_HTMLDDA:void 0===rr&&void 0!==rr},or=ir.all,ar=ir.IS_HTMLDDA?function(e){return"function"==typeof e||e===or}:function(e){return"function"==typeof e},sr=ar,lr=ir.all,cr=ir.IS_HTMLDDA?function(e){return"object"==(void 0===e?"undefined":(0,me.default)(e))?null!==e:sr(e)||e===lr}:function(e){return"object"==(void 0===e?"undefined":(0,me.default)(e))?null!==e:sr(e)},ur=bn,dr=ar,fr=function(e){return dr(e)?e:void 0},pr=function(e,t){return arguments.length<2?fr(ur[e]):ur[e]&&ur[e][t]},hr=Hn({}.isPrototypeOf),gr=pr("navigator","userAgent")||"",mr=bn,vr=gr,br=mr.process,_r=mr.Deno,yr=br&&br.versions||_r&&_r.version,wr=yr&&yr.v8;wr&&(On=(Rn=wr.split("."))[0]>0&&Rn[0]<4?1:+(Rn[0]+Rn[1])),!On&&vr&&(!(Rn=vr.match(/Edge\/(\d+)/))||Rn[1]>=74)&&(Rn=vr.match(/Chrome\/(\d+)/))&&(On=+Rn[1]);var xr=On,kr=xr,Sr=yn,Cr=!!fe.default&&!Sr(function(){var e=(0,ne.default)();return!String(e)||!(Object(e)instanceof ne.default)||!ne.default.sham&&kr&&kr<41}),Tr=Cr&&!ne.default.sham&&"symbol"==(0,me.default)(z.default),Er=pr,Ir=ar,Ar=hr,Rr=Object,Or=Tr?function(e){return"symbol"==(void 0===e?"undefined":(0,me.default)(e))}:function(e){var t=Er("Symbol");return Ir(t)&&Ar(t.prototype,Rr(e))},Lr=String,Pr=function(e){try{return Lr(e)}catch(e){return"Object"}},Mr=ar,$r=Pr,Nr=TypeError,Dr=function(e){if(Mr(e))return e;throw Nr($r(e)+" is not a function")},Fr=Dr,qr=Xn,Ur=function(e,t){var n=e[t];return qr(n)?void 0:Fr(n)},Br=Cn,jr=ar,Vr=cr,Hr=TypeError,Yr={exports:{}},zr=bn,Gr=ie.default,Wr=function(e,t){try{Gr(zr,e,{value:t,configurable:!0,writable:!0})}catch(n){zr[e]=t}return t},Kr=Wr,Xr="__core-js_shared__",Zr=bn[Xr]||Kr(Xr,{}),Jr=Zr;(Yr.exports=function(e,t){return Jr[e]||(Jr[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.25.5",mode:"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.5/LICENSE",source:"https://github.com/zloirock/core-js"});var Qr=Qn,ei=Object,ti=function(e){return ei(Qr(e))},ni=ti,ri=Hn({}.hasOwnProperty),ii=Object.hasOwn||function(e,t){return ri(ni(e),t)},oi=Hn,ai=0,si=Math.random(),li=oi(1..toString),ci=function(e){return"Symbol("+(void 0===e?"":e)+")_"+li(++ai+si,36)},ui=bn,di=Yr.exports,fi=ii,pi=ci,hi=Cr,gi=Tr,mi=di("wks"),vi=ui.Symbol,bi=vi&&vi.for,_i=gi?vi:vi&&vi.withoutSetter||pi,yi=function(e){if(!fi(mi,e)||!hi&&"string"!=typeof mi[e]){var t="Symbol."+e;hi&&fi(vi,e)?mi[e]=vi[e]:mi[e]=gi&&bi?bi(t):_i(t)}return mi[e]},wi=Cn,xi=cr,ki=Or,Si=Ur,Ci=function(e,t){var n,r;if("string"===t&&jr(n=e.toString)&&!Vr(r=Br(n,e)))return r;if(jr(n=e.valueOf)&&!Vr(r=Br(n,e)))return r;if("string"!==t&&jr(n=e.toString)&&!Vr(r=Br(n,e)))return r;throw Hr("Can't convert object to primitive value")},Ti=TypeError,Ei=yi("toPrimitive"),Ii=function(e,t){if(!xi(e)||ki(e))return e;var n,r=Si(e,Ei);if(r){if(void 0===t&&(t="default"),n=wi(r,e,t),!xi(n)||ki(n))return n;throw Ti("Can't convert object to primitive value")}return void 0===t&&(t="number"),Ci(e,t)},Ai=Ii,Ri=Or,Oi=function(e){var t=Ai(e,"string");return Ri(t)?t:t+""},Li=cr,Pi=bn.document,Mi=Li(Pi)&&Li(Pi.createElement),$i=function(e){return Mi?Pi.createElement(e):{}},Ni=$i,Di=!wn&&!yn(function(){return 7!=Object.defineProperty(Ni("div"),"a",{get:function(){return 7}}).a}),Fi=wn,qi=Cn,Ui=Tn,Bi=Ln,ji=nr,Vi=Oi,Hi=ii,Yi=Di,zi=ue.default;_n.f=Fi?zi:function(e,t){if(e=ji(e),t=Vi(t),Yi)try{return zi(e,t)}catch(e){}if(Hi(e,t))return Bi(!qi(Ui.f,e,t),e[t])};var Gi={},Wi=wn&&yn(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),Ki=cr,Xi=String,Zi=TypeError,Ji=function(e){if(Ki(e))return e;throw Zi(Xi(e)+" is not an object")},Qi=wn,eo=Di,to=Wi,no=Ji,ro=Oi,io=TypeError,oo=ie.default,ao=ue.default;Gi.f=Qi?to?function(e,t,n){if(no(e),t=ro(t),no(n),"function"==typeof e&&"prototype"===t&&"value"in n&&"writable"in n&&!n.writable){var r=ao(e,t);r&&r.writable&&(e[t]=n.value,n={configurable:"configurable"in n?n.configurable:r.configurable,enumerable:"enumerable"in n?n.enumerable:r.enumerable,writable:!1})}return oo(e,t,n)}:oo:function(e,t,n){if(no(e),t=ro(t),no(n),eo)try{return oo(e,t,n)}catch(e){}if("get"in n||"set"in n)throw io("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var so=Gi,lo=Ln,co=wn?function(e,t,n){return so.f(e,t,lo(1,n))}:function(e,t,n){return e[t]=n,e},uo={exports:{}},fo=wn,po=ii,ho=Function.prototype,go=fo&&ue.default,mo=po(ho,"name"),vo={EXISTS:mo,PROPER:mo&&"something"===function(){}.name,CONFIGURABLE:mo&&(!fo||fo&&go(ho,"name").configurable)},bo=ar,_o=Zr,yo=Hn(Function.toString);bo(_o.inspectSource)||(_o.inspectSource=function(e){return yo(e)});var wo,xo,ko,So=_o.inspectSource,Co=ar,To=bn.WeakMap,Eo=Co(To)&&/native code/.test(String(To)),Io=Yr.exports,Ao=ci,Ro=Io("keys"),Oo=function(e){return Ro[e]||(Ro[e]=Ao(e))},Lo={},Po=Eo,Mo=bn,$o=cr,No=co,Do=ii,Fo=Zr,qo=Oo,Uo=Lo,Bo="Object already initialized",jo=Mo.TypeError,Vo=Mo.WeakMap;if(Po||Fo.state){var Ho=Fo.state||(Fo.state=new Vo);Ho.get=Ho.get,Ho.has=Ho.has,Ho.set=Ho.set,wo=function(e,t){if(Ho.has(e))throw jo(Bo);return t.facade=e,Ho.set(e,t),t},xo=function(e){return Ho.get(e)||{}},ko=function(e){return Ho.has(e)}}else{var Yo=qo("state");Uo[Yo]=!0,wo=function(e,t){if(Do(e,Yo))throw jo(Bo);return t.facade=e,No(e,Yo,t),t},xo=function(e){return Do(e,Yo)?e[Yo]:{}},ko=function(e){return Do(e,Yo)}}var zo={set:wo,get:xo,has:ko,enforce:function(e){return ko(e)?xo(e):wo(e,{})},getterFor:function(e){return function(t){var n;if(!$o(t)||(n=xo(t)).type!==e)throw jo("Incompatible receiver, "+e+" required");return n}}},Go=yn,Wo=ar,Ko=ii,Xo=wn,Zo=vo.CONFIGURABLE,Jo=So,Qo=zo.enforce,ea=zo.get,ta=ie.default,na=Xo&&!Go(function(){return 8!==ta(function(){},"length",{value:8}).length}),ra=String(String).split("String"),ia=uo.exports=function(e,t,n){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!Ko(e,"name")||Zo&&e.name!==t)&&(Xo?ta(e,"name",{value:t,configurable:!0}):e.name=t),na&&n&&Ko(n,"arity")&&e.length!==n.arity&&ta(e,"length",{value:n.arity});try{n&&Ko(n,"constructor")&&n.constructor?Xo&&ta(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var r=Qo(e);return Ko(r,"source")||(r.source=ra.join("string"==typeof t?t:"")),e};Function.prototype.toString=ia(function(){return Wo(this)&&ea(this).source||Jo(this)},"toString");var oa=ar,aa=Gi,sa=uo.exports,la=Wr,ca=function(e,t,n,r){r||(r={});var i=r.enumerable,o=void 0!==r.name?r.name:t;if(oa(n)&&sa(n,o,r),r.global)i?e[t]=n:la(t,n);else{try{r.unsafe?e[t]&&(i=!0):delete e[t]}catch(e){}i?e[t]=n:aa.f(e,t,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return e},ua={},da=Math.ceil,fa=Math.floor,pa=N.default||function(e){var t=+e;return(t>0?fa:da)(t)},ha=function(e){var t=+e;return t!=t||0===t?0:pa(t)},ga=ha,ma=Math.max,va=Math.min,ba=function(e,t){var n=ga(e);return n<0?ma(n+t,0):va(n,t)},_a=ha,ya=Math.min,wa=function(e){return e>0?ya(_a(e),9007199254740991):0},xa=wa,ka=function(e){return xa(e.length)},Sa=nr,Ca=ba,Ta=ka,Ea=function(e){return function(t,n,r){var i,o=Sa(t),a=Ta(o),s=Ca(r,a);if(e&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((e||s in o)&&o[s]===n)return e||s||0;return!e&&-1}},Ia={includes:Ea(!0),indexOf:Ea(!1)},Aa=ii,Ra=nr,Oa=Ia.indexOf,La=Lo,Pa=Hn([].push),Ma=function(e,t){var n,r=Ra(e),i=0,o=[];for(n in r)!Aa(La,n)&&Aa(r,n)&&Pa(o,n);for(;t.length>i;)Aa(r,n=t[i++])&&(~Oa(o,n)||Pa(o,n));return o},$a=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Na=Ma,Da=$a.concat("length","prototype");ua.f=M.default||function(e){return Na(e,Da)};var Fa={};Fa.f=fe.default;var qa=pr,Ua=ua,Ba=Fa,ja=Ji,Va=Hn([].concat),Ha=qa("Reflect","ownKeys")||function(e){var t=Ua.f(ja(e)),n=Ba.f;return n?Va(t,n(e)):t},Ya=ii,za=Ha,Ga=_n,Wa=Gi,Ka=yn,Xa=ar,Za=/#|\.prototype\./,Ja=function(e,t){var n=es[Qa(e)];return n==ns||n!=ts&&(Xa(t)?Ka(t):!!t)},Qa=Ja.normalize=function(e){return String(e).replace(Za,".").toLowerCase()},es=Ja.data={},ts=Ja.NATIVE="N",ns=Ja.POLYFILL="P",rs=Ja,is=bn,os=_n.f,as=co,ss=ca,ls=Wr,cs=function(e,t,n){for(var r=za(t),i=Wa.f,o=Ga.f,a=0;a<r.length;a++){var s=r[a];Ya(e,s)||n&&Ya(n,s)||i(e,s,o(t,s))}},us=rs,ds=function(e,t){var n,r,i,o,a,s=e.target,l=e.global,c=e.stat;if(n=l?is:c?is[s]||ls(s,{}):(is[s]||{}).prototype)for(r in t){if(o=t[r],i=e.dontCallGetSet?(a=os(n,r))&&a.value:n[r],!us(l?r:s+(c?".":"#")+r,e.forced)&&void 0!==i){if((void 0===o?"undefined":(0,me.default)(o))==(void 0===i?"undefined":(0,me.default)(i)))continue;cs(o,i)}(e.sham||i&&i.sham)&&as(o,"sham",!0),ss(n,r,o,e)}},fs=ds,ps=yn,hs=nr,gs=_n.f,ms=wn,vs=ps(function(){gs(1)});fs({target:"Object",stat:!0,forced:!ms||vs,sham:!ms},{getOwnPropertyDescriptor:function(e,t){return gs(hs(e),t)}});var bs=!0,_s=!0,ys=te,ws=(0,T.default)({__proto__:null,shimMediaStream:ge,shimOnTrack:ve,shimGetSendersWithDtmf:be,shimGetStats:_e,shimSenderReceiverGetStats:ye,shimAddTrackRemoveTrackWithNative:we,shimAddTrackRemoveTrack:xe,shimPeerConnection:ke,fixNegotiationNeeded:Se,shimGetUserMedia:pe,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then(function(t){var r=n.video&&n.video.width,i=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}}),xs={exports:{}};!function(e){var t={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map(function(e){return e.trim()})},t.splitSections=function(e){return e.split("\nm=").map(function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"})},t.getDescription=function(e){var n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){var n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter(function(e){return 0===e.indexOf(n)})},t.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:n[t[r]]=t[r+1]}return n},t.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substr(14).split(" ")},t.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},t.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)n[(t=r[i].trim().split("="))[0].trim()]=t[1];return n},t.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&(0,he.default)(e.parameters).length){var r=[];(0,he.default)(e.parameters).forEach(function(t){e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)}),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},t.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},t.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map(function(e){return parseInt(e,10)})}},t.getMid=function(e){var n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substr(6)},t.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach(function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),n},t.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==(0,me.default)(e.keyParams)?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){var r=t.matchPrefix(e+n,"a=ice-ufrag:")[0],i=t.matchPrefix(e+n,"a=ice-pwd:")[0];return r&&i?{usernameFragment:r.substr(12),password:i.substr(10)}:null},t.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},t.parseRtpParameters=function(e){for(var n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(" "),i=3;i<r.length;i++){var o=r[i],a=t.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(a){var s=t.parseRtpMap(a),l=t.matchPrefix(e,"a=fmtp:"+o+" ");switch(s.parameters=l.length?t.parseFmtp(l[0]):{},s.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(t.parseRtcpFb),n.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(s.name.toUpperCase())}}}return t.matchPrefix(e,"a=extmap:").forEach(function(e){n.headerExtensions.push(t.parseExtmap(e))}),n},t.writeRtpDescription=function(e,n){var r="";r+="m="+e+" ",r+=n.codecs.length>0?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=n.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType}).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach(function(e){r+=t.writeRtpMap(e),r+=t.writeFmtp(e),r+=t.writeRtcpFb(e)});var i=0;return n.codecs.forEach(function(e){e.maxptime>i&&(i=e.maxptime)}),i>0&&(r+="a=maxptime:"+i+"\r\n"),r+="a=rtcp-mux\r\n",n.headerExtensions&&n.headerExtensions.forEach(function(e){r+=t.writeExtmap(e)}),r},t.parseRtpEncodingParameters=function(e){var n,r=[],i=t.parseRtpParameters(e),o=-1!==i.fecMechanisms.indexOf("RED"),a=-1!==i.fecMechanisms.indexOf("ULPFEC"),s=t.matchPrefix(e,"a=ssrc:").map(function(e){return t.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute}),l=s.length>0&&s[0].ssrc,c=t.matchPrefix(e,"a=ssrc-group:FID").map(function(e){return e.substr(17).split(" ").map(function(e){return parseInt(e,10)})});c.length>0&&c[0].length>1&&c[0][0]===l&&(n=c[0][1]),i.codecs.forEach(function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var t={ssrc:l,codecPayloadType:parseInt(e.parameters.apt,10)};l&&n&&(t.rtx={ssrc:n}),r.push(t),o&&((t=JSON.parse((0,I.default)(t))).fec={ssrc:l,mechanism:a?"red+ulpfec":"red"},r.push(t))}}),0===r.length&&l&&r.push({ssrc:l});var u=t.matchPrefix(e,"b=");return u.length&&(u=0===u[0].indexOf("b=TIAS:")?parseInt(u[0].substr(7),10):0===u[0].indexOf("b=AS:")?1e3*parseInt(u[0].substr(5),10)*.95-16e3:void 0,r.forEach(function(e){e.maxBitrate=u})),r},t.parseRtcpParameters=function(e){var n={},r=t.matchPrefix(e,"a=ssrc:").map(function(e){return t.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0];r&&(n.cname=r.value,n.ssrc=r.ssrc);var i=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=i.length>0,n.compound=0===i.length;var o=t.matchPrefix(e,"a=rtcp-mux");return n.mux=o.length>0,n},t.parseMsid=function(e){var n,r=t.matchPrefix(e,"a=msid:");if(1===r.length)return{stream:(n=r[0].substr(7).split(" "))[0],track:n[1]};var i=t.matchPrefix(e,"a=ssrc:").map(function(e){return t.parseSsrcMedia(e)}).filter(function(e){return"msid"===e.attribute});return i.length>0?{stream:(n=i[0].value.split(" "))[0],track:n[1]}:void 0},t.parseSctpDescription=function(e){var n,r=t.parseMLine(e),i=t.matchPrefix(e,"a=max-message-size:");i.length>0&&(n=parseInt(i[0].substr(19),10)),isNaN(n)&&(n=65536);var o=t.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:r.fmt,maxMessageSize:n};if(t.matchPrefix(e,"a=sctpmap:").length>0){var a=t.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(a[0],10),protocol:a[1],maxMessageSize:n}}},t.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(e,n,r){var i=void 0!==n?n:2;return"v=0\r\no="+(r||"thisisadapterortc")+" "+(e||t.generateSessionId())+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.writeMediaSection=function(e,n,r,i){var o=t.writeRtpDescription(e.kind,n);if(o+=t.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=t.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",e.direction?o+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var a="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+a,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+a,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+t.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+t.localCName+"\r\n"),o},t.getDirection=function(e,n){for(var r=t.splitLines(e),i=0;i<r.length;i++)switch(r[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[i].substr(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substr(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){var n=t.splitLines(e)[0].substr(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){var n=t.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var n=t.splitLines(e),r=0;r<n.length;r++)if(n[r].length<2||"="!==n[r].charAt(1))return!1;return!0},e.exports=t}(xs);var ks=xs.exports,Ss=xs.exports,Cs=function(e,t){function n(t,n){n.addTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function r(t,n,r,i){var o=new Event("track");o.track=n,o.receiver=r,o.transceiver={receiver:r},o.streams=i,e.setTimeout(function(){t._dispatchEvent("track",o)})}var i=function(n){var r=this,i=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){r[e]=i[e].bind(i)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",n=JSON.parse((0,I.default)(n||{})),this.usingBundle="max-bundle"===n.bundlePolicy,"negotiate"===n.rtcpMuxPolicy)throw Ae("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(n.rtcpMuxPolicy||(n.rtcpMuxPolicy="require"),n.iceTransportPolicy){case"all":case"relay":break;default:n.iceTransportPolicy="all"}switch(n.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:n.bundlePolicy="balanced"}if(n.iceServers=function(e,t){var n=!1;return(e=JSON.parse((0,I.default)(e))).filter(function(e){if(e&&(e.urls||e.url)){var r=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var i="string"==typeof r;return i&&(r=[r]),r=r.filter(function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||n?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(n=!0,!0)}),delete e.url,e.urls=i?r[0]:r,!!r.length}})}(n.iceServers||[],t),this._iceGatherers=[],n.iceCandidatePoolSize)for(var o=n.iceCandidatePoolSize;o>0;o--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:n.iceServers,gatherPolicy:n.iceTransportPolicy}));else n.iceCandidatePoolSize=0;this._config=n,this.transceivers=[],this._sdpSessionId=Ss.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(i.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(i.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),i.prototype.onicecandidate=null,i.prototype.onaddstream=null,i.prototype.ontrack=null,i.prototype.onremovestream=null,i.prototype.onsignalingstatechange=null,i.prototype.oniceconnectionstatechange=null,i.prototype.onconnectionstatechange=null,i.prototype.onicegatheringstatechange=null,i.prototype.onnegotiationneeded=null,i.prototype.ondatachannel=null,i.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},i.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},i.prototype.getConfiguration=function(){return this._config},i.prototype.getLocalStreams=function(){return this.localStreams},i.prototype.getRemoteStreams=function(){return this.remoteStreams},i.prototype._createTransceiver=function(e,t){var n=this.transceivers.length>0,r={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&n)r.iceTransport=this.transceivers[0].iceTransport,r.dtlsTransport=this.transceivers[0].dtlsTransport;else{var i=this._createIceAndDtlsTransports();r.iceTransport=i.iceTransport,r.dtlsTransport=i.dtlsTransport}return t||this.transceivers.push(r),r},i.prototype.addTrack=function(t,n){if(this._isClosed)throw Ae("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var r;if(this.transceivers.find(function(e){return e.track===t}))throw Ae("InvalidAccessError","Track already exists.");for(var i=0;i<this.transceivers.length;i++)this.transceivers[i].track||this.transceivers[i].kind!==t.kind||(r=this.transceivers[i]);return r||(r=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(n)&&this.localStreams.push(n),r.track=t,r.stream=n,r.rtpSender=new e.RTCRtpSender(t,r.dtlsTransport),r.rtpSender},i.prototype.addStream=function(e){var n=this;if(t>=15025)e.getTracks().forEach(function(t){n.addTrack(t,e)});else{var r=e.clone();e.getTracks().forEach(function(e,t){var n=r.getTracks()[t];e.addEventListener("enabled",function(e){n.enabled=e.enabled})}),r.getTracks().forEach(function(e){n.addTrack(e,r)})}},i.prototype.removeTrack=function(t){if(this._isClosed)throw Ae("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find(function(e){return e.rtpSender===t});if(!n)throw Ae("InvalidAccessError","Sender was not created by this connection.");var r=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null,-1===this.transceivers.map(function(e){return e.stream}).indexOf(r)&&this.localStreams.indexOf(r)>-1&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},i.prototype.removeStream=function(e){var t=this;e.getTracks().forEach(function(e){var n=t.getSenders().find(function(t){return t.track===e});n&&t.removeTrack(n)})},i.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},i.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},i.prototype._createIceGatherer=function(t,n){var r=this;if(n&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var i=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(i,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var n=!e.candidate||0===(0,he.default)(e.candidate).length;i.state=n?"completed":"gathering",null!==r.transceivers[t].bufferedCandidateEvents&&r.transceivers[t].bufferedCandidateEvents.push(e)},i.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),i},i.prototype._gather=function(t,n){var r=this,i=this.transceivers[n].iceGatherer;if(!i.onlocalcandidate){var o=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,i.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),i.onlocalcandidate=function(e){if(!(r.usingBundle&&n>0)){var o=new Event("icecandidate");o.candidate={sdpMid:t,sdpMLineIndex:n};var a=e.candidate,s=!a||0===(0,he.default)(a).length;if(s)"new"!==i.state&&"gathering"!==i.state||(i.state="completed");else{"new"===i.state&&(i.state="gathering"),a.component=1,a.ufrag=i.getLocalParameters().usernameFragment;var l=Ss.writeCandidate(a);o.candidate=(0,L.default)(o.candidate,Ss.parseCandidate(l)),o.candidate.candidate=l,o.candidate.toJSON=function(){return{candidate:o.candidate.candidate,sdpMid:o.candidate.sdpMid,sdpMLineIndex:o.candidate.sdpMLineIndex,usernameFragment:o.candidate.usernameFragment}}}var c=Ss.getMediaSections(r._localDescription.sdp);c[o.candidate.sdpMLineIndex]+=s?"a=end-of-candidates\r\n":"a="+o.candidate.candidate+"\r\n",r._localDescription.sdp=Ss.getDescription(r._localDescription.sdp)+c.join("");var u=r.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});"gathering"!==r.iceGatheringState&&(r.iceGatheringState="gathering",r._emitGatheringStateChange()),s||r._dispatchEvent("icecandidate",o),u&&(r._dispatchEvent("icecandidate",new Event("icecandidate")),r.iceGatheringState="complete",r._emitGatheringStateChange())}},e.setTimeout(function(){o.forEach(function(e){i.onlocalcandidate(e)})},0)}},i.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var r=new e.RTCDtlsTransport(n);return r.ondtlsstatechange=function(){t._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:r}},i.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var r=this.transceivers[e].dtlsTransport;r&&(delete r.ondtlsstatechange,delete r.onerror,delete this.transceivers[e].dtlsTransport)},i.prototype._transceive=function(e,n,r){var i=Te(e.localCapabilities,e.remoteCapabilities);n&&e.rtpSender&&(i.encodings=e.sendEncodingParameters,i.rtcp={cname:Ss.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(i.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(i)),r&&e.rtpReceiver&&i.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach(function(e){delete e.rtx}),e.recvEncodingParameters.length?i.encodings=e.recvEncodingParameters:i.encodings=[{}],i.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(i.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(i.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(i))},i.prototype.setLocalDescription=function(e){var t,n,r=this;if(-1===["offer","answer"].indexOf(e.type))return W.default.reject(Ae("TypeError",'Unsupported type "'+e.type+'"'));if(!Ee("setLocalDescription",e.type,r.signalingState)||r._isClosed)return W.default.reject(Ae("InvalidStateError","Can not set local "+e.type+" in state "+r.signalingState));if("offer"===e.type)t=Ss.splitSections(e.sdp),n=t.shift(),t.forEach(function(e,t){var n=Ss.parseRtpParameters(e);r.transceivers[t].localCapabilities=n}),r.transceivers.forEach(function(e,t){r._gather(e.mid,t)});else if("answer"===e.type){t=Ss.splitSections(r._remoteDescription.sdp),n=t.shift();var i=Ss.matchPrefix(n,"a=ice-lite").length>0;t.forEach(function(e,t){var o=r.transceivers[t],a=o.iceGatherer,s=o.iceTransport,l=o.dtlsTransport,c=o.localCapabilities,u=o.remoteCapabilities;if(!(Ss.isRejected(e)&&0===Ss.matchPrefix(e,"a=bundle-only").length||o.rejected)){var d=Ss.getIceParameters(e,n),f=Ss.getDtlsParameters(e,n);i&&(f.role="server"),r.usingBundle&&0!==t||(r._gather(o.mid,t),"new"===s.state&&s.start(a,d,i?"controlling":"controlled"),"new"===l.state&&l.start(f));var p=Te(c,u);r._transceive(o,p.codecs.length>0,!1)}})}return r._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?r._updateSignalingState("have-local-offer"):r._updateSignalingState("stable"),W.default.resolve()},i.prototype.setRemoteDescription=function(i){var o=this;if(-1===["offer","answer"].indexOf(i.type))return W.default.reject(Ae("TypeError",'Unsupported type "'+i.type+'"'));if(!Ee("setRemoteDescription",i.type,o.signalingState)||o._isClosed)return W.default.reject(Ae("InvalidStateError","Can not set remote "+i.type+" in state "+o.signalingState));var a={};o.remoteStreams.forEach(function(e){a[e.id]=e});var s=[],l=Ss.splitSections(i.sdp),c=l.shift(),u=Ss.matchPrefix(c,"a=ice-lite").length>0,d=Ss.matchPrefix(c,"a=group:BUNDLE ").length>0;o.usingBundle=d;var f=Ss.matchPrefix(c,"a=ice-options:")[0];return o.canTrickleIceCandidates=!!f&&f.substr(14).split(" ").indexOf("trickle")>=0,l.forEach(function(r,l){var f=Ss.splitLines(r),p=Ss.getKind(r),h=Ss.isRejected(r)&&0===Ss.matchPrefix(r,"a=bundle-only").length,g=f[0].substr(2).split(" ")[2],m=Ss.getDirection(r,c),v=Ss.parseMsid(r),b=Ss.getMid(r)||Ss.generateIdentifier();if(h||"application"===p&&("DTLS/SCTP"===g||"UDP/DTLS/SCTP"===g))o.transceivers[l]={mid:b,kind:p,protocol:g,rejected:!0};else{var _,y,w,x,k,S,C,T,E;!h&&o.transceivers[l]&&o.transceivers[l].rejected&&(o.transceivers[l]=o._createTransceiver(p,!0));var I,A,R=Ss.parseRtpParameters(r);h||(I=Ss.getIceParameters(r,c),(A=Ss.getDtlsParameters(r,c)).role="client"),C=Ss.parseRtpEncodingParameters(r);var O=Ss.parseRtcpParameters(r),L=Ss.matchPrefix(r,"a=end-of-candidates",c).length>0,P=Ss.matchPrefix(r,"a=candidate:").map(function(e){return Ss.parseCandidate(e)}).filter(function(e){return 1===e.component});if(("offer"===i.type||"answer"===i.type)&&!h&&d&&l>0&&o.transceivers[l]&&(o._disposeIceAndDtlsTransports(l),o.transceivers[l].iceGatherer=o.transceivers[0].iceGatherer,o.transceivers[l].iceTransport=o.transceivers[0].iceTransport,o.transceivers[l].dtlsTransport=o.transceivers[0].dtlsTransport,o.transceivers[l].rtpSender&&o.transceivers[l].rtpSender.setTransport(o.transceivers[0].dtlsTransport),o.transceivers[l].rtpReceiver&&o.transceivers[l].rtpReceiver.setTransport(o.transceivers[0].dtlsTransport)),"offer"!==i.type||h)"answer"!==i.type||h||(y=(_=o.transceivers[l]).iceGatherer,w=_.iceTransport,x=_.dtlsTransport,k=_.rtpReceiver,S=_.sendEncodingParameters,T=_.localCapabilities,o.transceivers[l].recvEncodingParameters=C,o.transceivers[l].remoteCapabilities=R,o.transceivers[l].rtcpParameters=O,P.length&&"new"===w.state&&(!u&&!L||d&&0!==l?P.forEach(function(e){Ie(_.iceTransport,e)}):w.setRemoteCandidates(P)),d&&0!==l||("new"===w.state&&w.start(y,I,"controlling"),"new"===x.state&&x.start(A)),!Te(_.localCapabilities,_.remoteCapabilities).codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&_.sendEncodingParameters[0].rtx&&delete _.sendEncodingParameters[0].rtx,o._transceive(_,"sendrecv"===m||"recvonly"===m,"sendrecv"===m||"sendonly"===m),!k||"sendrecv"!==m&&"sendonly"!==m?delete _.rtpReceiver:(E=k.track,v?(a[v.stream]||(a[v.stream]=new e.MediaStream),n(E,a[v.stream]),s.push([E,k,a[v.stream]])):(a.default||(a.default=new e.MediaStream),n(E,a.default),s.push([E,k,a.default]))));else{(_=o.transceivers[l]||o._createTransceiver(p)).mid=b,_.iceGatherer||(_.iceGatherer=o._createIceGatherer(l,d)),P.length&&"new"===_.iceTransport.state&&(!L||d&&0!==l?P.forEach(function(e){Ie(_.iceTransport,e)}):_.iceTransport.setRemoteCandidates(P)),T=e.RTCRtpReceiver.getCapabilities(p),t<15019&&(T.codecs=T.codecs.filter(function(e){return"rtx"!==e.name})),S=_.sendEncodingParameters||[{ssrc:1001*(2*l+2)}];var M,$=!1;"sendrecv"===m||"sendonly"===m?($=!_.rtpReceiver,k=_.rtpReceiver||new e.RTCRtpReceiver(_.dtlsTransport,p),$&&(E=k.track,v&&"-"===v.stream||(v?(a[v.stream]||(a[v.stream]=new e.MediaStream,Object.defineProperty(a[v.stream],"id",{get:function(){return v.stream}})),Object.defineProperty(E,"id",{get:function(){return v.track}}),M=a[v.stream]):(a.default||(a.default=new e.MediaStream),M=a.default)),M&&(n(E,M),_.associatedRemoteMediaStreams.push(M)),s.push([E,k,M]))):_.rtpReceiver&&_.rtpReceiver.track&&(_.associatedRemoteMediaStreams.forEach(function(t){var n=t.getTracks().find(function(e){return e.id===_.rtpReceiver.track.id});n&&function(t,n){n.removeTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(n,t)}),_.associatedRemoteMediaStreams=[]),_.localCapabilities=T,_.remoteCapabilities=R,_.rtpReceiver=k,_.rtcpParameters=O,_.sendEncodingParameters=S,_.recvEncodingParameters=C,o._transceive(o.transceivers[l],!1,$)}}}),void 0===o._dtlsRole&&(o._dtlsRole="offer"===i.type?"active":"passive"),o._remoteDescription={type:i.type,sdp:i.sdp},"offer"===i.type?o._updateSignalingState("have-remote-offer"):o._updateSignalingState("stable"),(0,he.default)(a).forEach(function(t){var n=a[t];if(n.getTracks().length){if(-1===o.remoteStreams.indexOf(n)){o.remoteStreams.push(n);var i=new Event("addstream");i.stream=n,e.setTimeout(function(){o._dispatchEvent("addstream",i)})}s.forEach(function(e){var t=e[0],i=e[1];n.id===e[2].id&&r(o,t,i,[n])})}}),s.forEach(function(e){e[2]||r(o,e[0],e[1],[])}),e.setTimeout(function(){o&&o.transceivers&&o.transceivers.forEach(function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))})},4e3),W.default.resolve()},i.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},i.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},i.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout(function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}},0))},i.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++}),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",n)}},i.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)}),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var n=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",n)}},i.prototype.createOffer=function(){var n=this;if(n._isClosed)return W.default.reject(Ae("InvalidStateError","Can not call createOffer after close"));var r=n.transceivers.filter(function(e){return"audio"===e.kind}).length,i=n.transceivers.filter(function(e){return"video"===e.kind}).length,o=arguments[0];if(o){if(o.mandatory||o.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==o.offerToReceiveAudio&&(r=!0===o.offerToReceiveAudio?1:!1===o.offerToReceiveAudio?0:o.offerToReceiveAudio),void 0!==o.offerToReceiveVideo&&(i=!0===o.offerToReceiveVideo?1:!1===o.offerToReceiveVideo?0:o.offerToReceiveVideo)}for(n.transceivers.forEach(function(e){"audio"===e.kind?--r<0&&(e.wantReceive=!1):"video"===e.kind&&--i<0&&(e.wantReceive=!1)});r>0||i>0;)r>0&&(n._createTransceiver("audio"),r--),i>0&&(n._createTransceiver("video"),i--);var a=Ss.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.transceivers.forEach(function(r,i){var o=r.track,a=r.kind,s=r.mid||Ss.generateIdentifier();r.mid=s,r.iceGatherer||(r.iceGatherer=n._createIceGatherer(i,n.usingBundle));var l=e.RTCRtpSender.getCapabilities(a);t<15019&&(l.codecs=l.codecs.filter(function(e){return"rtx"!==e.name})),l.codecs.forEach(function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),r.remoteCapabilities&&r.remoteCapabilities.codecs&&r.remoteCapabilities.codecs.forEach(function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)})}),l.headerExtensions.forEach(function(e){(r.remoteCapabilities&&r.remoteCapabilities.headerExtensions||[]).forEach(function(t){e.uri===t.uri&&(e.id=t.id)})});var c=r.sendEncodingParameters||[{ssrc:1001*(2*i+1)}];o&&t>=15019&&"video"===a&&!c[0].rtx&&(c[0].rtx={ssrc:c[0].ssrc+1}),r.wantReceive&&(r.rtpReceiver=new e.RTCRtpReceiver(r.dtlsTransport,a)),r.localCapabilities=l,r.sendEncodingParameters=c}),"max-compat"!==n._config.bundlePolicy&&(a+="a=group:BUNDLE "+n.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),a+="a=ice-options:trickle\r\n",n.transceivers.forEach(function(e,t){a+=Ce(e,e.localCapabilities,"offer",e.stream,n._dtlsRole),a+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===n.iceGatheringState||0!==t&&n.usingBundle||(e.iceGatherer.getLocalCandidates().forEach(function(e){e.component=1,a+="a="+Ss.writeCandidate(e)+"\r\n"}),"completed"===e.iceGatherer.state&&(a+="a=end-of-candidates\r\n"))});var s=new e.RTCSessionDescription({type:"offer",sdp:a});return W.default.resolve(s)},i.prototype.createAnswer=function(){var n=this;if(n._isClosed)return W.default.reject(Ae("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==n.signalingState&&"have-local-pranswer"!==n.signalingState)return W.default.reject(Ae("InvalidStateError","Can not call createAnswer in signalingState "+n.signalingState));var r=Ss.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.usingBundle&&(r+="a=group:BUNDLE "+n.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),r+="a=ice-options:trickle\r\n";var i=Ss.getMediaSections(n._remoteDescription.sdp).length;n.transceivers.forEach(function(e,o){if(!(o+1>i)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?r+="m=application 0 DTLS/SCTP 5000\r\n":r+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?r+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(r+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(r+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var a;e.stream&&("audio"===e.kind?a=e.stream.getAudioTracks()[0]:"video"===e.kind&&(a=e.stream.getVideoTracks()[0]),a&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1}));var s=Te(e.localCapabilities,e.remoteCapabilities);!s.codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,r+=Ce(e,s,"answer",e.stream,n._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(r+="a=rtcp-rsize\r\n")}});var o=new e.RTCSessionDescription({type:"answer",sdp:r});return W.default.resolve(o)},i.prototype.addIceCandidate=function(e){var t,n=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?W.default.reject(new TypeError("sdpMLineIndex or sdpMid required")):new W.default(function(r,i){if(!n._remoteDescription)return i(Ae("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var o=e.sdpMLineIndex;if(e.sdpMid)for(var a=0;a<n.transceivers.length;a++)if(n.transceivers[a].mid===e.sdpMid){o=a;break}var s=n.transceivers[o];if(!s)return i(Ae("OperationError","Can not add ICE candidate"));if(s.rejected)return r();var l=(0,he.default)(e.candidate).length>0?Ss.parseCandidate(e.candidate):{};if("tcp"===l.protocol&&(0===l.port||9===l.port))return r();if(l.component&&1!==l.component)return r();if((0===o||o>0&&s.iceTransport!==n.transceivers[0].iceTransport)&&!Ie(s.iceTransport,l))return i(Ae("OperationError","Can not add ICE candidate"));var c=e.candidate.trim();0===c.indexOf("a=")&&(c=c.substr(2)),(t=Ss.getMediaSections(n._remoteDescription.sdp))[o]+="a="+(l.type?c:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=Ss.getDescription(n._remoteDescription.sdp)+t.join("")}else for(var u=0;u<n.transceivers.length&&(n.transceivers[u].rejected||(n.transceivers[u].iceTransport.addRemoteCandidate({}),(t=Ss.getMediaSections(n._remoteDescription.sdp))[u]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=Ss.getDescription(n._remoteDescription.sdp)+t.join(""),!n.usingBundle));u++);r()})},i.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var n=null;if(this.transceivers.forEach(function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)}),!n)throw Ae("InvalidAccessError","Invalid selector.");return n.getStats()}var r=[];return this.transceivers.forEach(function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(t){e[t]&&r.push(e[t].getStats())})}),W.default.all(r).then(function(e){var t=new j.default;return e.forEach(function(e){e.forEach(function(e){t.set(e.id,e)})}),t})},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(t){var n=e[t];if(n&&n.prototype&&n.prototype.getStats){var r=n.prototype.getStats;n.prototype.getStats=function(){return r.apply(this).then(function(e){var t=new j.default;return(0,he.default)(e).forEach(function(n){var r;e[n].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(r=e[n]).type]||r.type,t.set(n,e[n])}),t})}}});var o=["createOffer","createAnswer"];return o.forEach(function(e){var t=i.prototype[e];i.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then(function(t){"function"==typeof e[0]&&e[0].apply(null,[t])},function(t){"function"==typeof e[1]&&e[1].apply(null,[t])}):t.apply(this,arguments)}}),(o=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(e){var t=i.prototype[e];i.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)},function(t){"function"==typeof e[2]&&e[2].apply(null,[t])}):t.apply(this,arguments)}}),["getStats"].forEach(function(e){var t=i.prototype[e];i.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)}):t.apply(this,arguments)}}),i},Ts=(0,T.default)({__proto__:null,shimPeerConnection:Le,shimReplaceTrack:Pe,shimGetUserMedia:Re,shimGetDisplayMedia:Oe}),Es=(0,T.default)({__proto__:null,shimOnTrack:$e,shimPeerConnection:Ne,shimSenderGetStats:De,shimReceiverGetStats:Fe,shimRemoveStream:qe,shimRTCDataChannel:Ue,shimAddTransceiver:Be,shimGetParameters:je,shimCreateOffer:Ve,shimCreateAnswer:He,shimGetUserMedia:Me,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){var r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,W.default.reject(r)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}}),Is=(0,T.default)({__proto__:null,shimLocalStreamsAPI:Ye,shimRemoteStreamsAPI:ze,shimCallbacksAPI:Ge,shimGetUserMedia:We,shimConstraints:Ke,shimRTCIceServerUrls:Xe,shimTrackEventTransceiver:Ze,shimCreateOfferLegacy:Je,shimAudioContext:Qe}),As=(0,T.default)({__proto__:null,shimRTCIceCandidate:et,shimMaxMessageSize:tt,shimSendThrowTypeError:nt,shimConnectionState:rt,removeExtmapAllowMixed:it,shimAddIceCandidateNullOrEmpty:ot});!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.window,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},r=te,i=function(e){var t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;var n=e.navigator;if(n.mozGetUserMedia)t.browser="firefox",t.version=G(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=G(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.mediaDevices&&n.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=G(n.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=G(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}(t),o={browserDetails:i,commonShim:As,extractVersion:G,disableLog:Z,disableWarnings:Q};switch(i.browser){case"chrome":if(!ws||!ke||!n.shimChrome)return r("Chrome shim is not included in this adapter release."),o;if(null===i.version)return r("Chrome shim can not determine version, not shimming."),o;r("adapter.js shimming chrome."),o.browserShim=ws,ot(t,i),pe(t,i),ge(t),ke(t,i),ve(t),xe(t,i),be(t),_e(t),ye(t),Se(t,i),et(t),rt(t),tt(t,i),nt(t),it(t,i);break;case"firefox":if(!Es||!Ne||!n.shimFirefox)return r("Firefox shim is not included in this adapter release."),o;r("adapter.js shimming firefox."),o.browserShim=Es,ot(t,i),Me(t,i),Ne(t,i),$e(t),qe(t),De(t),Fe(t),Ue(t),Be(t),je(t),Ve(t),He(t),et(t),rt(t),tt(t,i),nt(t);break;case"edge":if(!Ts||!Le||!n.shimEdge)return r("MS edge shim is not included in this adapter release."),o;r("adapter.js shimming edge."),o.browserShim=Ts,Re(t),Oe(t),Le(t,i),Pe(t),tt(t,i),nt(t);break;case"safari":if(!Is||!n.shimSafari)return r("Safari shim is not included in this adapter release."),o;r("adapter.js shimming safari."),o.browserShim=Is,ot(t,i),Xe(t),Je(t),Ge(t),Ye(t),ze(t),Ze(t),We(t),Qe(t),et(t),tt(t,i),nt(t),it(t,i);break;default:r("Unsupported browser!")}}({window:"undefined"==typeof window?void 0:window});var Rs="4.15.10",Os={},Ls=Ma,Ps=$a,Ms=he.default||function(e){return Ls(e,Ps)},$s=wn,Ns=Wi,Ds=Gi,Fs=Ji,qs=nr,Us=Ms;Os.f=$s&&!Ns?ae.default:function(e,t){Fs(e);for(var n,r=qs(t),i=Us(t),o=i.length,a=0;o>a;)Ds.f(e,n=i[a++],r[n]);return e};var Bs,js=pr("document","documentElement"),Vs=Ji,Hs=Os,Ys=$a,zs=Lo,Gs=js,Ws=$i,Ks=Oo("IE_PROTO"),Xs=function(){},Zs=function(e){return"<script>"+e+"<\/script>"},Js=function(e){e.write(Zs("")),e.close();var t=e.parentWindow.Object;return e=null,t},Qs=function(){try{Bs=new ActiveXObject("htmlfile")}catch(e){}var e,t;Qs="undefined"!=typeof document?document.domain&&Bs?Js(Bs):((t=Ws("iframe")).style.display="none",Gs.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(Zs("document.F=Object")),e.close(),e.F):Js(Bs);for(var n=Ys.length;n--;)delete Qs.prototype[Ys[n]];return Qs()};zs[Ks]=!0;var el=ee.default||function(e,t){var n;return null!==e?(Xs.prototype=Vs(e),n=new Xs,Xs.prototype=null,n[Ks]=e):n=Qs(),void 0===t?n:Hs.f(n,t)},tl=yi,nl=el,rl=Gi.f,il=tl("unscopables"),ol=Array.prototype;null==ol[il]&&rl(ol,il,{configurable:!0,value:nl(null)});var al,sl,ll,cl=function(e){ol[il][e]=!0},ul={},dl=!yn(function(){function e(){}return e.prototype.constructor=null,(0,J.default)(new e)!==e.prototype}),fl=ii,pl=ar,hl=ti,gl=dl,ml=Oo("IE_PROTO"),vl=Object,bl=vl.prototype,_l=gl?vl.getPrototypeOf:function(e){var t=hl(e);if(fl(t,ml))return t[ml];var n=t.constructor;return pl(n)&&t instanceof n?n.prototype:t instanceof vl?bl:null},yl=yn,wl=ar,xl=cr,kl=_l,Sl=ca,Cl=yi("iterator"),Tl=!1;[].keys&&("next"in(ll=[].keys())?(sl=kl(kl(ll)))!==Object.prototype&&(al=sl):Tl=!0),(!xl(al)||yl(function(){var e={};return al[Cl].call(e)!==e}))&&(al={}),wl(al[Cl])||Sl(al,Cl,function(){return this});var El={IteratorPrototype:al,BUGGY_SAFARI_ITERATORS:Tl},Il=Gi.f,Al=ii,Rl=yi("toStringTag"),Ol=function(e,t,n){e&&!n&&(e=e.prototype),e&&!Al(e,Rl)&&Il(e,Rl,{configurable:!0,value:t})},Ll=El.IteratorPrototype,Pl=el,Ml=Ln,$l=Ol,Nl=ul,Dl=function(){return this},Fl=function(e,t,n,r){var i=t+" Iterator";return e.prototype=Pl(Ll,{next:Ml(+!r,n)}),$l(e,i,!1),Nl[i]=Dl,e},ql=ar,Ul=String,Bl=TypeError,jl=Hn,Vl=Ji,Hl=function(e){if("object"==(void 0===e?"undefined":(0,me.default)(e))||ql(e))return e;throw Bl("Can't set "+Ul(e)+" as a prototype")},Yl=X.default||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=jl((0,ue.default)(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return Vl(n),Hl(r),t?e(n,r):n.__proto__=r,n}}():void 0),zl=ds,Gl=Cn,Wl=ar,Kl=Fl,Xl=_l,Zl=Yl,Jl=Ol,Ql=co,ec=ca,tc=ul,nc=vo.PROPER,rc=vo.CONFIGURABLE,ic=El.IteratorPrototype,oc=El.BUGGY_SAFARI_ITERATORS,ac=yi("iterator"),sc="values",lc="entries",cc=function(){return this},uc=function(e,t,n,r,i,o,a){Kl(n,t,r);var s,l,c,u=function(e){if(e===i&&g)return g;if(!oc&&e in p)return p[e];switch(e){case"keys":case sc:case lc:return function(){return new n(this,e)}}return function(){return new n(this)}},d=t+" Iterator",f=!1,p=e.prototype,h=p[ac]||p["@@iterator"]||i&&p[i],g=!oc&&h||u(i),m="Array"==t&&p.entries||h;if(m&&(s=Xl(m.call(new e)))!==Object.prototype&&s.next&&(Xl(s)!==ic&&(Zl?Zl(s,ic):Wl(s[ac])||ec(s,ac,cc)),Jl(s,d,!0)),nc&&i==sc&&h&&h.name!==sc&&(rc?Ql(p,"name",sc):(f=!0,g=function(){return Gl(h,this)})),i)if(l={values:u(sc),keys:o?g:u("keys"),entries:u(lc)},a)for(c in l)(oc||f||!(c in p))&&ec(p,c,l[c]);else zl({target:t,proto:!0,forced:oc||f},l);return p[ac]!==g&&ec(p,ac,g,{name:i}),tc[t]=g,l},dc=function(e,t){return{value:e,done:t}},fc=nr,pc=cl,hc=ul,gc=zo,mc=Gi.f,vc=uc,bc=dc,_c=wn,yc="Array Iterator",wc=gc.set,xc=gc.getterFor(yc),kc=vc(Array,"Array",function(e,t){wc(this,{type:yc,target:fc(e),index:0,kind:t})},function(){var e=xc(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,bc(void 0,!0)):bc("keys"==n?r:"values"==n?t[r]:[r,t[r]],!1)},"values"),Sc=hc.Arguments=hc.Array;if(pc("keys"),pc("values"),pc("entries"),_c&&"values"!==Sc.name)try{mc(Sc,"name",{value:"values"})}catch(e){}var Cc={};Cc[yi("toStringTag")]="z";var Tc="[object z]"===String(Cc),Ec=Tc,Ic=ar,Ac=Bn,Rc=yi("toStringTag"),Oc=Object,Lc="Arguments"==Ac(function(){return arguments}()),Pc=Ec?Ac:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Oc(e),Rc))?n:Lc?Ac(t):"Object"==(r=Ac(t))&&Ic(t.callee)?"Arguments":r},Mc=Pc,$c=Tc?{}.toString:function(){return"[object "+Mc(this)+"]"};Tc||ca(Object.prototype,"toString",$c,{unsafe:!0});var Nc={exports:{}},Dc={},Fc=Oi,qc=Gi,Uc=Ln,Bc=function(e,t,n){var r=Fc(t);r in e?qc.f(e,r,Uc(0,n)):e[r]=n},jc=ba,Vc=ka,Hc=Bc,Yc=Array,zc=Math.max,Gc=function(e,t,n){for(var r=Vc(e),i=jc(t,r),o=jc(void 0===n?r:n,r),a=Yc(zc(o-i,0)),s=0;i<o;i++,s++)Hc(a,s,e[i]);return a.length=s,a},Wc=Bn,Kc=nr,Xc=ua.f,Zc=Gc,Jc="object"==("undefined"==typeof window?"undefined":(0,me.default)(window))&&window&&M.default?(0,M.default)(window):[];Dc.f=function(e){return Jc&&"Window"==Wc(e)?function(e){try{return Xc(e)}catch(e){return Zc(Jc)}}(e):Xc(Kc(e))};var Qc=yn(function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);(0,S.default)(e)&&Object.defineProperty(e,"a",{value:8})}}),eu=yn,tu=cr,nu=Bn,ru=Qc,iu=S.default,ou=eu(function(){iu(1)})||ru?function(e){return!!tu(e)&&(!ru||"ArrayBuffer"!=nu(e))&&(!iu||iu(e))}:iu,au=!yn(function(){return(0,S.default)((0,x.default)({}))}),su=ds,lu=Hn,cu=Lo,uu=cr,du=ii,fu=Gi.f,pu=ua,hu=Dc,gu=ou,mu=au,vu=!1,bu=ci("meta"),_u=0,yu=function(e){fu(e,bu,{value:{objectID:"O"+_u++,weakData:{}}})},wu=Nc.exports={enable:function(){wu.enable=function(){},vu=!0;var e=pu.f,t=lu([].splice),n={};n[bu]=1,e(n).length&&(pu.f=function(n){for(var r=e(n),i=0,o=r.length;i<o;i++)if(r[i]===bu){t(r,i,1);break}return r},su({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:hu.f}))},fastKey:function(e,t){if(!uu(e))return"symbol"==(void 0===e?"undefined":(0,me.default)(e))?e:("string"==typeof e?"S":"P")+e;if(!du(e,bu)){if(!gu(e))return"F";if(!t)return"E";yu(e)}return e[bu].objectID},getWeakData:function(e,t){if(!du(e,bu)){if(!gu(e))return!0;if(!t)return!1;yu(e)}return e[bu].weakData},onFreeze:function(e){return mu&&vu&&gu(e)&&!du(e,bu)&&yu(e),e}};cu[bu]=!0;var xu=Dr,ku=xn,Su=Hn(Hn.bind),Cu=function(e,t){return xu(e),void 0===t?e:ku?Su(e,t):function(){return e.apply(t,arguments)}},Tu=ul,Eu=yi("iterator"),Iu=Array.prototype,Au=function(e){return void 0!==e&&(Tu.Array===e||Iu[Eu]===e)},Ru=Pc,Ou=Ur,Lu=Xn,Pu=ul,Mu=yi("iterator"),$u=function(e){if(!Lu(e))return Ou(e,Mu)||Ou(e,"@@iterator")||Pu[Ru(e)]},Nu=Cn,Du=Dr,Fu=Ji,qu=Pr,Uu=$u,Bu=TypeError,ju=function(e,t){var n=arguments.length<2?Uu(e):t;if(Du(n))return Fu(Nu(n,e));throw Bu(qu(e)+" is not iterable")},Vu=Cn,Hu=Ji,Yu=Ur,zu=function(e,t,n){var r,i;Hu(e);try{if(!(r=Yu(e,"return"))){if("throw"===t)throw n;return n}r=Vu(r,e)}catch(e){i=!0,r=e}if("throw"===t)throw n;if(i)throw r;return Hu(r),n},Gu=Cu,Wu=Cn,Ku=Ji,Xu=Pr,Zu=Au,Ju=ka,Qu=hr,ed=ju,td=$u,nd=zu,rd=TypeError,id=function(e,t){this.stopped=e,this.result=t},od=id.prototype,ad=function(e,t,n){var r,i,o,a,s,l,c,u=n&&n.that,d=!(!n||!n.AS_ENTRIES),f=!(!n||!n.IS_RECORD),p=!(!n||!n.IS_ITERATOR),h=!(!n||!n.INTERRUPTED),g=Gu(t,u),m=function(e){return r&&nd(r,"normal",e),new id(!0,e)},v=function(e){return d?(Ku(e),h?g(e[0],e[1],m):g(e[0],e[1])):h?g(e,m):g(e)};if(f)r=e.iterator;else if(p)r=e;else{if(!(i=td(e)))throw rd(Xu(e)+" is not iterable");if(Zu(i)){for(o=0,a=Ju(e);a>o;o++)if((s=v(e[o]))&&Qu(od,s))return s;return new id(!1)}r=ed(e,i)}for(l=f?e.next:r.next;!(c=Wu(l,r)).done;){try{s=v(c.value)}catch(e){nd(r,"throw",e)}if("object"==(void 0===s?"undefined":(0,me.default)(s))&&s&&Qu(od,s))return s}return new id(!1)},sd=hr,ld=TypeError,cd=function(e,t){if(sd(t,e))return e;throw ld("Incorrect invocation")},ud=yi("iterator"),dd=!1;try{var fd=0,pd={next:function(){return{done:!!fd++}},return:function(){dd=!0}};pd[ud]=function(){return this},(0,F.default)(pd,function(){throw 2})}catch(e){}var hd=function(e,t){if(!t&&!dd)return!1;var n=!1;try{var r={};r[ud]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n},gd=ar,md=cr,vd=Yl,bd=function(e,t,n){var r,i;return vd&&gd(r=t.constructor)&&r!==n&&md(i=r.prototype)&&i!==n.prototype&&vd(e,i),e},_d=ds,yd=bn,wd=Hn,xd=rs,kd=ca,Sd=Nc.exports,Cd=ad,Td=cd,Ed=ar,Id=Xn,Ad=cr,Rd=yn,Od=hd,Ld=Ol,Pd=bd,Md=function(e,t,n){var r=-1!==e.indexOf("Map"),i=-1!==e.indexOf("Weak"),o=r?"set":"add",a=yd[e],s=a&&a.prototype,l=a,c={},u=function(e){var t=wd(s[e]);kd(s,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(i&&!Ad(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return i&&!Ad(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(i&&!Ad(e))&&t(this,0===e?0:e)}:function(e,n){return t(this,0===e?0:e,n),this})};if(xd(e,!Ed(a)||!(i||s.forEach&&!Rd(function(){(new a).entries().next()}))))l=n.getConstructor(t,e,r,o),Sd.enable();else if(xd(e,!0)){var d=new l,f=d[o](i?{}:-0,1)!=d,p=Rd(function(){d.has(1)}),h=Od(function(e){new a(e)}),g=!i&&Rd(function(){for(var e=new a,t=5;t--;)e[o](t,t);return!e.has(-0)});h||((l=t(function(e,t){Td(e,s);var n=Pd(new a,e,l);return Id(t)||Cd(t,n[o],{that:n,AS_ENTRIES:r}),n})).prototype=s,s.constructor=l),(p||g)&&(u("delete"),u("has"),r&&u("get")),(g||f)&&u(o),i&&s.clear&&delete s.clear}return c[e]=l,_d({global:!0,constructor:!0,forced:l!=a},c),Ld(l,e),i||n.setStrong(l,e,r),l},$d=ca,Nd=function(e,t,n){for(var r in t)$d(e,r,t[r],n);return e},Dd=pr,Fd=Gi,qd=wn,Ud=yi("species"),Bd=function(e){var t=Dd(e),n=Fd.f;qd&&t&&!t[Ud]&&n(t,Ud,{configurable:!0,get:function(){return this}})},jd=Gi.f,Vd=el,Hd=Nd,Yd=Cu,zd=cd,Gd=Xn,Wd=ad,Kd=uc,Xd=dc,Zd=Bd,Jd=wn,Qd=Nc.exports.fastKey,ef=zo.set,tf=zo.getterFor,nf={getConstructor:function(e,t,n,r){var i=e(function(e,i){zd(e,o),ef(e,{type:t,index:Vd(null),first:void 0,last:void 0,size:0}),Jd||(e.size=0),Gd(i)||Wd(i,e[r],{that:e,AS_ENTRIES:n})}),o=i.prototype,a=tf(t),s=function(e,t,n){var r,i,o=a(e),s=l(e,t);return s?s.value=n:(o.last=s={index:i=Qd(t,!0),key:t,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=s),r&&(r.next=s),Jd?o.size++:e.size++,"F"!==i&&(o.index[i]=s)),e},l=function(e,t){var n,r=a(e),i=Qd(t);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==t)return n};return Hd(o,{clear:function(){for(var e=a(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,Jd?e.size=0:this.size=0},delete:function(e){var t=this,n=a(t),r=l(t,e);if(r){var i=r.next,o=r.previous;delete n.index[r.index],r.removed=!0,o&&(o.next=i),i&&(i.previous=o),n.first==r&&(n.first=i),n.last==r&&(n.last=o),Jd?n.size--:t.size--}return!!r},forEach:function(e){for(var t,n=a(this),r=Yd(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!l(this,e)}}),Hd(o,n?{get:function(e){var t=l(this,e);return t&&t.value},set:function(e,t){return s(this,0===e?0:e,t)}}:{add:function(e){return s(this,e=0===e?0:e,e)}}),Jd&&jd(o,"size",{get:function(){return a(this).size}}),i},setStrong:function(e,t,n){var r=t+" Iterator",i=tf(t),o=tf(r);Kd(e,t,function(e,t){ef(this,{type:r,target:e,state:i(e),kind:t,last:void 0})},function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?Xd("keys"==t?n.key:"values"==t?n.value:[n.key,n.value],!1):(e.target=void 0,Xd(void 0,!0))},n?"entries":"values",!n,!0),Zd(t)}};Md("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},nf);var rf=Pc,of=String,af=function(e){if("Symbol"===rf(e))throw TypeError("Cannot convert a Symbol value to a string");return of(e)},sf=Hn,lf=ha,cf=af,uf=Qn,df=sf("".charAt),ff=sf("".charCodeAt),pf=sf("".slice),hf=function(e){return function(t,n){var r,i,o=cf(uf(t)),a=lf(n),s=o.length;return a<0||a>=s?e?"":void 0:(r=ff(o,a))<55296||r>56319||a+1===s||(i=ff(o,a+1))<56320||i>57343?e?df(o,a):r:e?pf(o,a,a+2):i-56320+(r-55296<<10)+65536}},gf={codeAt:hf(!1),charAt:hf(!0)},mf=gf.charAt,vf=af,bf=zo,_f=uc,yf=dc,wf="String Iterator",xf=bf.set,kf=bf.getterFor(wf);_f(String,"String",function(e){xf(this,{type:wf,string:vf(e),index:0})},function(){var e,t=kf(this),n=t.string,r=t.index;return r>=n.length?yf(void 0,!0):(e=mf(n,r),t.index+=e.length,yf(e,!1))});var Sf={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Cf=$i("span").classList,Tf=Cf&&Cf.constructor&&Cf.constructor.prototype,Ef=Tf===Object.prototype?void 0:Tf,If=bn,Af=Sf,Rf=Ef,Of=kc,Lf=co,Pf=yi,Mf=Pf("iterator"),$f=Pf("toStringTag"),Nf=Of.values,Df=function(e,t){if(e){if(e[Mf]!==Nf)try{Lf(e,Mf,Nf)}catch(t){e[Mf]=Nf}if(e[$f]||Lf(e,$f,t),Af[t])for(var n in Of)if(e[n]!==Of[n])try{Lf(e,n,Of[n])}catch(t){e[n]=Of[n]}}};for(var Ff in Af)Df(If[Ff]&&If[Ff].prototype,Ff);Df(Rf,"DOMTokenList");var qf=xn,Uf=Function.prototype,Bf=Uf.apply,jf=Uf.call,Vf="object"==("undefined"==typeof Reflect?"undefined":(0,me.default)(Reflect))&&y.default||(qf?jf.bind(Bf):function(){return jf.apply(Bf,arguments)}),Hf=Hn([].slice),Yf=TypeError,zf=function(e,t){if(e<t)throw Yf("Not enough arguments");return e},Gf=bn,Wf=Vf,Kf=ar,Xf=Hf,Zf=zf,Jf=/MSIE .\./.test(gr),Qf=Gf.Function,ep=function(e){return Jf?function(t,n){var r=Zf(arguments.length,1)>2,i=Kf(t)?t:Qf(t),o=r?Xf(arguments,2):void 0;return e(r?function(){Wf(i,this,o)}:i,n)}:e},tp={setTimeout:ep(Gf.setTimeout),setInterval:ep(Gf.setInterval)},np=tp.setInterval;ds({global:!0,bind:!0,forced:bn.setInterval!==np},{setInterval:np});var rp=tp.setTimeout;ds({global:!0,bind:!0,forced:bn.setTimeout!==rp},{setTimeout:rp}),Md("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},nf);var ip=Bn,op=Array.isArray||function(e){return"Array"==ip(e)},ap=Hn,sp=yn,lp=ar,cp=Pc,up=So,dp=function(){},fp=[],pp=pr("Reflect","construct"),hp=/^\s*(?:class|function)\b/,gp=ap(hp.exec),mp=!hp.exec(dp),vp=function(e){if(!lp(e))return!1;try{return pp(dp,fp,e),!0}catch(e){return!1}},bp=function(e){if(!lp(e))return!1;switch(cp(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return mp||!!gp(hp,up(e))}catch(e){return!0}};bp.sham=!0;var _p=!pp||sp(function(){var e;return vp(vp.call)||!vp(Object)||!vp(function(){e=!0})||e})?bp:vp,yp=op,wp=_p,xp=cr,kp=yi("species"),Sp=Array,Cp=function(e){var t;return yp(e)&&(t=e.constructor,(wp(t)&&(t===Sp||yp(t.prototype))||xp(t)&&null===(t=t[kp]))&&(t=void 0)),void 0===t?Sp:t},Tp=function(e,t){return new(Cp(e))(0===t?0:t)},Ep=Cu,Ip=Kn,Ap=ti,Rp=ka,Op=Tp,Lp=Hn([].push),Pp=function(e){var t=1==e,n=2==e,r=3==e,i=4==e,o=6==e,a=7==e,s=5==e||o;return function(l,c,u,d){for(var f,p,h=Ap(l),g=Ip(h),m=Ep(c,u),v=Rp(g),b=0,_=d||Op,y=t?_(l,v):n||a?_(l,0):void 0;v>b;b++)if((s||b in g)&&(p=m(f=g[b],b,h),e))if(t)y[b]=p;else if(p)switch(e){case 3:return!0;case 5:return f;case 6:return b;case 2:Lp(y,f)}else switch(e){case 4:return!1;case 7:Lp(y,f)}return o?-1:r||i?i:y}},Mp={forEach:Pp(0),map:Pp(1),filter:Pp(2),some:Pp(3),every:Pp(4),find:Pp(5),findIndex:Pp(6),filterReject:Pp(7)},$p=yn,Np=xr,Dp=yi("species"),Fp=function(e){return Np>=51||!$p(function(){var t=[];return(t.constructor={})[Dp]=function(){return{foo:1}},1!==t[e](Boolean).foo})},qp=Mp.map;ds({target:"Array",proto:!0,forced:!Fp("map")},{map:function(e){return qp(this,e,arguments.length>1?arguments[1]:void 0)}});var Up=wn,Bp=op,jp=TypeError,Vp=ue.default,Hp=Up&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}(),Yp=TypeError,zp=function(e){if(e>9007199254740991)throw Yp("Maximum allowed index exceeded");return e},Gp=Pr,Wp=TypeError,Kp=function(e,t){if(!delete e[t])throw Wp("Cannot delete property "+Gp(t)+" of "+Gp(e))},Xp=ds,Zp=ti,Jp=ba,Qp=ha,eh=ka,th=Hp?function(e,t){if(Bp(e)&&!Vp(e,"length").writable)throw jp("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t},nh=zp,rh=Tp,ih=Bc,oh=Kp,ah=Fp("splice"),sh=Math.max,lh=Math.min;Xp({target:"Array",proto:!0,forced:!ah},{splice:function(e,t){var n,r,i,o,a,s,l=Zp(this),c=eh(l),u=Jp(e,c),d=arguments.length;for(0===d?n=r=0:1===d?(n=0,r=c-u):(n=d-2,r=lh(sh(Qp(t),0),c-u)),nh(c+n-r),i=rh(l,r),o=0;o<r;o++)(a=u+o)in l&&ih(i,o,l[a]);if(i.length=r,n<r){for(o=u;o<c-r;o++)s=o+n,(a=o+r)in l?l[s]=l[a]:oh(l,s);for(o=c;o>c-r+n;o--)oh(l,o-1)}else if(n>r)for(o=c-r;o>u;o--)s=o+n-1,(a=o+r-1)in l?l[s]=l[a]:oh(l,s);for(o=0;o<n;o++)l[o+u]=arguments[o+2];return th(l,c-r+n),i}});var ch=yn,uh=function(e,t){var n=[][e];return!!n&&ch(function(){n.call(null,t||function(){return 1},1)})},dh=Mp.forEach,fh=uh("forEach")?[].forEach:function(e){return dh(this,e,arguments.length>1?arguments[1]:void 0)};ds({target:"Array",proto:!0,forced:[].forEach!=fh},{forEach:fh});var ph=bn,hh=Sf,gh=Ef,mh=fh,vh=co,bh=function(e){if(e&&e.forEach!==mh)try{vh(e,"forEach",mh)}catch(t){e.forEach=mh}};for(var _h in hh)hh[_h]&&bh(ph[_h]&&ph[_h].prototype);bh(gh);var yh=ds,wh=Kn,xh=nr,kh=uh,Sh=Hn([].join),Ch=wh!=Object,Th=kh("join",",");yh({target:"Array",proto:!0,forced:Ch||!Th},{join:function(e){return Sh(xh(this),void 0===e?",":e)}});var Eh=Mp.filter;ds({target:"Array",proto:!0,forced:!Fp("filter")},{filter:function(e){return Eh(this,e,arguments.length>1?arguments[1]:void 0)}});var Ih=ds,Ah=yn,Rh=op,Oh=cr,Lh=ti,Ph=ka,Mh=zp,$h=Bc,Nh=Tp,Dh=Fp,Fh=xr,qh=yi("isConcatSpreadable"),Uh=Fh>=51||!Ah(function(){var e=[];return e[qh]=!1,e.concat()[0]!==e}),Bh=Dh("concat"),jh=function(e){if(!Oh(e))return!1;var t=e[qh];return void 0!==t?!!t:Rh(e)};Ih({target:"Array",proto:!0,arity:1,forced:!Uh||!Bh},{concat:function(e){var t,n,r,i,o,a=Lh(this),s=Nh(a,0),l=0;for(t=-1,r=arguments.length;t<r;t++)if(jh(o=-1===t?a:arguments[t]))for(i=Ph(o),Mh(l+i),n=0;n<i;n++,l++)n in o&&$h(s,l,o[n]);else Mh(l+1),$h(s,l++,o);return s.length=l,s}});var Vh=Hn,Hh=ca,Yh=Date.prototype,zh="Invalid Date",Gh=Vh(Yh.toString),Wh=Vh(Yh.getTime);String(new Date(NaN))!=zh&&Hh(Yh,"toString",function(){var e=Wh(this);return e==e?Gh(this):zh});var Kh=ha,Xh=af,Zh=Qn,Jh=RangeError,Qh=function(e){var t=Xh(Zh(this)),n="",r=Kh(e);if(r<0||1/0==r)throw Jh("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n},eg=Hn,tg=wa,ng=af,rg=Qn,ig=eg(Qh),og=eg("".slice),ag=Math.ceil,sg=function(e){return function(t,n,r){var i,o,a=ng(rg(t)),s=tg(n),l=a.length,c=void 0===r?" ":ng(r);return s<=l||""==c?a:((o=ig(c,ag((i=s-l)/c.length))).length>i&&(o=og(o,0,i)),e?a+o:o+a)}},lg={start:sg(!1),end:sg(!0)},cg=lg.start;ds({target:"String",proto:!0,forced:/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(gr)},{padStart:function(e){return cg(this,e,arguments.length>1?arguments[1]:void 0)}});var ug=Ji,dg=function(){var e=ug(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t},fg=yn,pg=bn.RegExp,hg=fg(function(){var e=pg("a","y");return e.lastIndex=2,null!=e.exec("abcd")}),gg=hg||fg(function(){return!pg("a","y").sticky}),mg={BROKEN_CARET:hg||fg(function(){var e=pg("^r","gy");return e.lastIndex=2,null!=e.exec("str")}),MISSED_STICKY:gg,UNSUPPORTED_Y:hg},vg=yn,bg=bn.RegExp,_g=vg(function(){var e=bg(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}),yg=yn,wg=bn.RegExp,xg=yg(function(){var e=wg("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}),kg=Cn,Sg=Hn,Cg=af,Tg=dg,Eg=mg,Ig=Yr.exports,Ag=el,Rg=zo.get,Og=_g,Lg=xg,Pg=Ig("native-string-replace",String.prototype.replace),Mg=RegExp.prototype.exec,$g=Mg,Ng=Sg("".charAt),Dg=Sg("".indexOf),Fg=Sg("".replace),qg=Sg("".slice),Ug=function(){var e=/a/,t=/b*/g;return kg(Mg,e,"a"),kg(Mg,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),Bg=Eg.BROKEN_CARET,jg=void 0!==/()??/.exec("")[1];(Ug||jg||Bg||Og||Lg)&&($g=function(e){var t,n,r,i,o,a,s,l=this,c=Rg(l),u=Cg(e),d=c.raw;if(d)return d.lastIndex=l.lastIndex,t=kg($g,d,u),l.lastIndex=d.lastIndex,t;var f=c.groups,p=Bg&&l.sticky,h=kg(Tg,l),g=l.source,m=0,v=u;if(p&&(h=Fg(h,"y",""),-1===Dg(h,"g")&&(h+="g"),v=qg(u,l.lastIndex),l.lastIndex>0&&(!l.multiline||l.multiline&&"\n"!==Ng(u,l.lastIndex-1))&&(g="(?: "+g+")",v=" "+v,m++),n=new RegExp("^(?:"+g+")",h)),jg&&(n=new RegExp("^"+g+"$(?!\\s)",h)),Ug&&(r=l.lastIndex),i=kg(Mg,p?n:l,v),p?i?(i.input=qg(i.input,m),i[0]=qg(i[0],m),i.index=l.lastIndex,l.lastIndex+=i[0].length):l.lastIndex=0:Ug&&i&&(l.lastIndex=l.global?i.index+i[0].length:r),jg&&i&&i.length>1&&kg(Pg,i[0],n,function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(i[o]=void 0)}),i&&f)for(i.groups=a=Ag(null),o=0;o<f.length;o++)a[(s=f[o])[0]]=i[s[1]];return i});var Vg=$g;ds({target:"RegExp",proto:!0,forced:/./.exec!==Vg},{exec:Vg});var Hg=Hn,Yg=ca,zg=Vg,Gg=yn,Wg=yi,Kg=co,Xg=Wg("species"),Zg=RegExp.prototype,Jg=function(e,t,n,r){var i=Wg(e),o=!Gg(function(){var t={};return t[i]=function(){return 7},7!=""[e](t)}),a=o&&!Gg(function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[Xg]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return t=!0,null},n[i](""),!t});if(!o||!a||n){var s=Hg(/./[i]),l=t(i,""[e],function(e,t,n,r,i){var a=Hg(e),l=t.exec;return l===zg||l===Zg.exec?o&&!i?{done:!0,value:s(t,n,r)}:{done:!0,value:a(n,t,r)}:{done:!1}});Yg(String.prototype,e,l[0]),Yg(Zg,i,l[1])}r&&Kg(Zg[i],"sham",!0)},Qg=gf.charAt,em=function(e,t,n){return t+(n?Qg(e,t).length:1)},tm=Hn,nm=ti,rm=Math.floor,im=tm("".charAt),om=tm("".replace),am=tm("".slice),sm=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,lm=/\$([$&'`]|\d{1,2})/g,cm=Cn,um=Ji,dm=ar,fm=Bn,pm=Vg,hm=TypeError,gm=function(e,t){var n=e.exec;if(dm(n)){var r=cm(n,e,t);return null!==r&&um(r),r}if("RegExp"===fm(e))return cm(pm,e,t);throw hm("RegExp#exec called on incompatible receiver")},mm=Vf,vm=Cn,bm=Hn,_m=Jg,ym=yn,wm=Ji,xm=ar,km=Xn,Sm=ha,Cm=wa,Tm=af,Em=Qn,Im=em,Am=Ur,Rm=function(e,t,n,r,i,o){var a=n+e.length,s=r.length,l=lm;return void 0!==i&&(i=nm(i),l=sm),om(o,l,function(o,l){var c;switch(im(l,0)){case"$":return"$";case"&":return e;case"`":return am(t,0,n);case"'":return am(t,a);case"<":c=i[am(l,1,-1)];break;default:var u=+l;if(0===u)return o;if(u>s){var d=rm(u/10);return 0===d?o:d<=s?void 0===r[d-1]?im(l,1):r[d-1]+im(l,1):o}c=r[u-1]}return void 0===c?"":c})},Om=gm,Lm=yi("replace"),Pm=Math.max,Mm=Math.min,$m=bm([].concat),Nm=bm([].push),Dm=bm("".indexOf),Fm=bm("".slice),qm="$0"==="a".replace(/./,"$0"),Um=!!/./[Lm]&&""===/./[Lm]("a","$0"),Bm=!ym(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")});_m("replace",function(e,t,n){var r=Um?"$":"$0";return[function(e,n){var r=Em(this),i=km(e)?void 0:Am(e,Lm);return i?vm(i,e,r,n):vm(t,Tm(r),e,n)},function(e,i){var o=wm(this),a=Tm(e);if("string"==typeof i&&-1===Dm(i,r)&&-1===Dm(i,"$<")){var s=n(t,o,a,i);if(s.done)return s.value}var l=xm(i);l||(i=Tm(i));var c=o.global;if(c){var u=o.unicode;o.lastIndex=0}for(var d=[];;){var f=Om(o,a);if(null===f)break;if(Nm(d,f),!c)break;""===Tm(f[0])&&(o.lastIndex=Im(a,Cm(o.lastIndex),u))}for(var p,h="",g=0,m=0;m<d.length;m++){for(var v=Tm((f=d[m])[0]),b=Pm(Mm(Sm(f.index),a.length),0),_=[],y=1;y<f.length;y++)Nm(_,void 0===(p=f[y])?p:String(p));var w=f.groups;if(l){var x=$m([v],_,b,a);void 0!==w&&Nm(x,w);var k=Tm(mm(i,void 0,x))}else k=Rm(v,a,b,_,w,i);b>=g&&(h+=Fm(a,g,b)+k,g=b+v.length)}return h+Fm(a,g)}]},!Bm||!qm||Um);var jm=Cn,Vm=ii,Hm=hr,Ym=dg,zm=RegExp.prototype,Gm=function(e){var t=e.flags;return void 0!==t||"flags"in zm||Vm(e,"flags")||!Hm(zm,e)?t:jm(Ym,e)},Wm=vo.PROPER,Km=ca,Xm=Ji,Zm=af,Jm=yn,Qm=Gm,ev="toString",tv=RegExp.prototype.toString,nv=Jm(function(){return"/a/b"!=tv.call({source:"a",flags:"b"})}),rv=Wm&&tv.name!=ev;(nv||rv)&&Km(RegExp.prototype,ev,function(){var e=Xm(this);return"/"+Zm(e.source)+"/"+Zm(Qm(e))},{unsafe:!0});var iv=yn,ov=yi("iterator"),av=!iv(function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach(function(e,r){t.delete("b"),n+=r+e}),!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[ov]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}),sv=Gc,lv=Math.floor,cv=function e(t,n){var r=t.length,i=lv(r/2);return r<8?uv(t,n):dv(t,e(sv(t,0,i),n),e(sv(t,i),n),n)},uv=function(e,t){for(var n,r,i=e.length,o=1;o<i;){for(r=o,n=e[o];r&&t(e[r-1],n)>0;)e[r]=e[--r];r!==o++&&(e[r]=n)}return e},dv=function(e,t,n,r){for(var i=t.length,o=n.length,a=0,s=0;a<i||s<o;)e[a+s]=a<i&&s<o?r(t[a],n[s])<=0?t[a++]:n[s++]:a<i?t[a++]:n[s++];return e},fv=cv,pv=ds,hv=bn,gv=Cn,mv=Hn,vv=wn,bv=av,_v=ca,yv=Nd,wv=Ol,xv=Fl,kv=zo,Sv=cd,Cv=ar,Tv=ii,Ev=Cu,Iv=Pc,Av=Ji,Rv=cr,Ov=af,Lv=el,Pv=Ln,Mv=ju,$v=$u,Nv=zf,Dv=fv,Fv=yi("iterator"),qv="URLSearchParams",Uv="URLSearchParamsIterator",Bv=kv.set,jv=kv.getterFor(qv),Vv=kv.getterFor(Uv),Hv=ue.default,Yv=function(e){if(!vv)return hv[e];var t=Hv(hv,e);return t&&t.value},zv=Yv("fetch"),Gv=Yv("Request"),Wv=Yv("Headers"),Kv=Gv&&Gv.prototype,Xv=Wv&&Wv.prototype,Zv=hv.RegExp,Jv=hv.TypeError,Qv=hv.decodeURIComponent,eb=hv.encodeURIComponent,tb=mv("".charAt),nb=mv([].join),rb=mv([].push),ib=mv("".replace),ob=mv([].shift),ab=mv([].splice),sb=mv("".split),lb=mv("".slice),cb=/\+/g,ub=Array(4),db=function(e){return ub[e-1]||(ub[e-1]=Zv("((?:%[\\da-f]{2}){"+e+"})","gi"))},fb=function(e){try{return Qv(e)}catch(t){return e}},pb=function(e){var t=ib(e,cb," "),n=4;try{return Qv(t)}catch(e){for(;n;)t=ib(t,db(n--),fb);return t}},hb=/[!'()~]|%20/g,gb={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},mb=function(e){return gb[e]},vb=function(e){return ib(eb(e),hb,mb)},bb=xv(function(e,t){Bv(this,{type:Uv,iterator:Mv(jv(e).entries),kind:t})},"Iterator",function(){var e=Vv(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n},!0),_b=function(e){this.entries=[],this.url=null,void 0!==e&&(Rv(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===tb(e,0)?lb(e,1):e:Ov(e)))};_b.prototype={type:qv,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,r,i,o,a,s,l=$v(e);if(l)for(n=(t=Mv(e,l)).next;!(r=gv(n,t)).done;){if(o=(i=Mv(Av(r.value))).next,(a=gv(o,i)).done||(s=gv(o,i)).done||!gv(o,i).done)throw Jv("Expected sequence with length 2");rb(this.entries,{key:Ov(a.value),value:Ov(s.value)})}else for(var c in e)Tv(e,c)&&rb(this.entries,{key:c,value:Ov(e[c])})},parseQuery:function(e){if(e)for(var t,n,r=sb(e,"&"),i=0;i<r.length;)(t=r[i++]).length&&(n=sb(t,"="),rb(this.entries,{key:pb(ob(n)),value:pb(nb(n,"="))}))},serialize:function(){for(var e,t=this.entries,n=[],r=0;r<t.length;)e=t[r++],rb(n,vb(e.key)+"="+vb(e.value));return nb(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var yb=function(){Sv(this,wb);var e=arguments.length>0?arguments[0]:void 0;Bv(this,new _b(e))},wb=yb.prototype;if(yv(wb,{append:function(e,t){Nv(arguments.length,2);var n=jv(this);rb(n.entries,{key:Ov(e),value:Ov(t)}),n.updateURL()},delete:function(e){Nv(arguments.length,1);for(var t=jv(this),n=t.entries,r=Ov(e),i=0;i<n.length;)n[i].key===r?ab(n,i,1):i++;t.updateURL()},get:function(e){Nv(arguments.length,1);for(var t=jv(this).entries,n=Ov(e),r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){Nv(arguments.length,1);for(var t=jv(this).entries,n=Ov(e),r=[],i=0;i<t.length;i++)t[i].key===n&&rb(r,t[i].value);return r},has:function(e){Nv(arguments.length,1);for(var t=jv(this).entries,n=Ov(e),r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){Nv(arguments.length,1);for(var n,r=jv(this),i=r.entries,o=!1,a=Ov(e),s=Ov(t),l=0;l<i.length;l++)(n=i[l]).key===a&&(o?ab(i,l--,1):(o=!0,n.value=s));o||rb(i,{key:a,value:s}),r.updateURL()},sort:function(){var e=jv(this);Dv(e.entries,function(e,t){return e.key>t.key?1:-1}),e.updateURL()},forEach:function(e){for(var t,n=jv(this).entries,r=Ev(e,arguments.length>1?arguments[1]:void 0),i=0;i<n.length;)r((t=n[i++]).value,t.key,this)},keys:function(){return new bb(this,"keys")},values:function(){return new bb(this,"values")},entries:function(){return new bb(this,"entries")}},{enumerable:!0}),_v(wb,Fv,wb.entries,{name:"entries"}),_v(wb,"toString",function(){return jv(this).serialize()},{enumerable:!0}),wv(yb,qv),pv({global:!0,constructor:!0,forced:!bv},{URLSearchParams:yb}),!bv&&Cv(Wv)){var xb=mv(Xv.has),kb=mv(Xv.set),Sb=function(e){if(Rv(e)){var t,n=e.body;if(Iv(n)===qv)return t=e.headers?new Wv(e.headers):new Wv,xb(t,"content-type")||kb(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),Lv(e,{body:Pv(0,Ov(n)),headers:Pv(0,t)})}return e};if(Cv(zv)&&pv({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return zv(e,arguments.length>1?Sb(arguments[1]):{})}}),Cv(Gv)){var Cb=function(e){return Sv(this,Kv),new Gv(e,arguments.length>1?Sb(arguments[1]):{})};Kv.constructor=Cb,Cb.prototype=Kv,pv({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:Cb})}}var Tb={URLSearchParams:yb,getState:jv},Eb=b.default||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},Ib=Cn,Ab=Ji,Rb=Xn,Ob=Qn,Lb=Eb,Pb=af,Mb=Ur,$b=gm;Jg("search",function(e,t,n){return[function(t){var n=Ob(this),r=Rb(t)?void 0:Mb(t,e);return r?Ib(r,t,n):new RegExp(t)[e](Pb(n))},function(e){var r=Ab(this),i=Pb(e),o=n(t,r,i);if(o.done)return o.value;var a=r.lastIndex;Lb(a,0)||(r.lastIndex=0);var s=$b(r,i);return Lb(r.lastIndex,a)||(r.lastIndex=a),null===s?-1:s.index}]}),(new Date).getTime();var Nb=0,Db=function(){return(new Date).getTime()+Nb},Fb=function(){var e=new Date;return e.setTime(Db()),e.toLocaleString()},qb=Cn,Ub=Ji,Bb=Xn,jb=wa,Vb=af,Hb=Qn,Yb=Ur,zb=em,Gb=gm;Jg("match",function(e,t,n){return[function(t){var n=Hb(this),r=Bb(t)?void 0:Yb(t,e);return r?qb(r,t,n):new RegExp(t)[e](Vb(n))},function(e){var r=Ub(this),i=Vb(e),o=n(t,r,i);if(o.done)return o.value;if(!r.global)return Gb(r,i);var a=r.unicode;r.lastIndex=0;for(var s,l=[],c=0;null!==(s=Gb(r,i));){var u=Vb(s[0]);l[c]=u,""===u&&(r.lastIndex=zb(i,jb(r.lastIndex),a)),c++}return 0===c?null:l}]});var Wb=cr,Kb=Bn,Xb=yi("match"),Zb=function(e){var t;return Wb(e)&&(void 0!==(t=e[Xb])?!!t:"RegExp"==Kb(e))},Jb=Gi.f,Qb=wn,e_=bn,t_=Hn,n_=rs,r_=bd,i_=co,o_=ua.f,a_=hr,s_=Zb,l_=af,c_=Gm,u_=mg,d_=ca,f_=yn,p_=ii,h_=zo.enforce,g_=Bd,m_=_g,v_=xg,b_=yi("match"),__=e_.RegExp,y_=__.prototype,w_=e_.SyntaxError,x_=t_(y_.exec),k_=t_("".charAt),S_=t_("".replace),C_=t_("".indexOf),T_=t_("".slice),E_=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,I_=/a/g,A_=/a/g,R_=new __(I_)!==I_,O_=u_.MISSED_STICKY,L_=u_.UNSUPPORTED_Y;if(n_("RegExp",Qb&&(!R_||O_||m_||v_||f_(function(){return A_[b_]=!1,__(I_)!=I_||__(A_)==A_||"/a/i"!=__(I_,"i")})))){for(var P_=(function e(t,n){var r,i,o,a,s,l,c=a_(y_,this),u=s_(t),d=void 0===n,f=[],p=t;if(!c&&u&&d&&t.constructor===e)return t;if((u||a_(y_,t))&&(t=t.source,d&&(n=c_(p))),t=void 0===t?"":l_(t),n=void 0===n?"":l_(n),p=t,m_&&"dotAll"in I_&&(i=!!n&&C_(n,"s")>-1)&&(n=S_(n,/s/g,"")),r=n,O_&&"sticky"in I_&&(o=!!n&&C_(n,"y")>-1)&&L_&&(n=S_(n,/y/g,"")),v_&&(a=function(e){for(var t,n=e.length,r=0,i="",o=[],a={},s=!1,l=!1,c=0,u="";r<=n;r++){if("\\"===(t=k_(e,r)))t+=k_(e,++r);else if("]"===t)s=!1;else if(!s)switch(!0){case"["===t:s=!0;break;case"("===t:x_(E_,T_(e,r+1))&&(r+=2,l=!0),i+=t,c++;continue;case">"===t&&l:if(""===u||p_(a,u))throw new w_("Invalid capture group name");a[u]=!0,o[o.length]=[u,c],l=!1,u="";continue}l?u+=t:i+=t}return[i,o]}(t),t=a[0],f=a[1]),s=r_(__(t,n),c?this:y_,e),(i||o||f.length)&&(l=h_(s),i&&(l.dotAll=!0,l.raw=e(function(e){for(var t,n=e.length,r=0,i="",o=!1;r<=n;r++)"\\"!==(t=k_(e,r))?o||"."!==t?("["===t?o=!0:"]"===t&&(o=!1),i+=t):i+="[\\s\\S]":i+=t+k_(e,++r);return i}(t),r)),o&&(l.sticky=!0),f.length&&(l.groups=f)),t!==p)try{i_(s,"source",""===p?"(?:)":p)}catch(e){}return s}),M_=o_(__),$_=0;M_.length>$_;)!function(e,t,n){n in e||Jb(e,n,{configurable:!0,get:function(){return t[n]},set:function(e){t[n]=e}})}(P_,__,M_[$_++]);y_.constructor=P_,P_.prototype=y_,d_(e_,"RegExp",P_,{constructor:!0})}g_("RegExp");var N_=Hn(1..valueOf),D_="\t\n\v\f\r                　\u2028\u2029\ufeff",F_=Qn,q_=af,U_=Hn("".replace),B_="[\t\n\v\f\r                　\u2028\u2029\ufeff]",j_=RegExp("^"+B_+B_+"*"),V_=RegExp(B_+B_+"*$"),H_=function(e){return function(t){var n=q_(F_(t));return 1&e&&(n=U_(n,j_,"")),2&e&&(n=U_(n,V_,"")),n}},Y_={start:H_(1),end:H_(2),trim:H_(3)},z_=wn,G_=bn,W_=Hn,K_=rs,X_=ca,Z_=ii,J_=bd,Q_=hr,ey=Or,ty=Ii,ny=yn,ry=ua.f,iy=_n.f,oy=Gi.f,ay=N_,sy=Y_.trim,ly=G_.Number,cy=ly.prototype,uy=G_.TypeError,dy=W_("".slice),fy=W_("".charCodeAt),py=function(e){var t=ty(e,"number");return"bigint"==typeof t?t:hy(t)},hy=function(e){var t,n,r,i,o,a,s,l,c=ty(e,"number");if(ey(c))throw uy("Cannot convert a Symbol value to a number");if("string"==typeof c&&c.length>2)if(c=sy(c),43===(t=fy(c,0))||45===t){if(88===(n=fy(c,2))||120===n)return NaN}else if(48===t){switch(fy(c,1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+c}for(a=(o=dy(c,2)).length,s=0;s<a;s++)if((l=fy(o,s))<48||l>i)return NaN;return parseInt(o,r)}return+c};if(K_("Number",!ly(" 0o1")||!ly("0b1")||ly("+0x1"))){for(var gy,my=function e(t){var n=arguments.length<1?0:ly(py(t)),r=this;return Q_(cy,r)&&ny(function(){ay(r)})?J_(Object(n),r,e):n},vy=z_?ry(ly):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),by=0;vy.length>by;by++)Z_(ly,gy=vy[by])&&!Z_(my,gy)&&oy(my,gy,iy(ly,gy));my.prototype=cy,cy.constructor=my,X_(G_,"Number",my,{constructor:!0})}var _y=Ia.includes,yy=cl;ds({target:"Array",proto:!0,forced:yn(function(){return!Array(1).includes()})},{includes:function(e){return _y(this,e,arguments.length>1?arguments[1]:void 0)}}),yy("includes");var wy=Zb,xy=TypeError,ky=function(e){if(wy(e))throw xy("The method doesn't accept regular expressions");return e},Sy=yi("match"),Cy=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[Sy]=!1,"/./"[e](t)}catch(e){}}return!1},Ty=ds,Ey=ky,Iy=Qn,Ay=af,Ry=Cy,Oy=Hn("".indexOf);Ty({target:"String",proto:!0,forced:!Ry("includes")},{includes:function(e){return!!~Oy(Ay(Iy(this)),Ay(Ey(e)),arguments.length>1?arguments[1]:void 0)}});var Ly=ds,Py=Ia.indexOf,My=uh,$y=Hn([].indexOf),Ny=!!$y&&1/$y([1],1,-0)<0,Dy=My("indexOf");Ly({target:"Array",proto:!0,forced:Ny||!Dy},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return Ny?$y(this,e,t)||0:Py(this,e,t)}});var Fy=ti,qy=_l,Uy=dl;ds({target:"Object",stat:!0,forced:yn(function(){qy(1)}),sham:!Uy},{getPrototypeOf:function(e){return qy(Fy(e))}});var By=Vf,jy=Dr,Vy=Ji;ds({target:"Reflect",stat:!0,forced:!yn(function(){(0,y.default)(function(){})})},{apply:function(e,t,n){return By(jy(e),t,Vy(n))}});var Hy=wn,Yy=vo.EXISTS,zy=Hn,Gy=Gi.f,Wy=Function.prototype,Ky=zy(Wy.toString),Xy=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,Zy=zy(Xy.exec);Hy&&!Yy&&Gy(Wy,"name",{configurable:!0,get:function(){try{return Zy(Xy,Ky(this))[1]}catch(e){return""}}});var Jy=ds,Qy=Date,ew=Hn(Qy.prototype.getTime);Jy({target:"Date",stat:!0},{now:function(){return ew(new Qy)}});var tw,nw,rw,iw,ow="process"==Bn(bn.process),aw=_p,sw=Pr,lw=TypeError,cw=function(e){if(aw(e))return e;throw lw(sw(e)+" is not a constructor")},uw=Ji,dw=cw,fw=Xn,pw=yi("species"),hw=function(e,t){var n,r=uw(e).constructor;return void 0===r||fw(n=uw(r)[pw])?t:dw(n)},gw=/(?:ipad|iphone|ipod).*applewebkit/i.test(gr),mw=bn,vw=Vf,bw=Cu,_w=ar,yw=ii,ww=yn,xw=js,kw=Hf,Sw=$i,Cw=zf,Tw=gw,Ew=ow,Iw=mw.setImmediate,Aw=mw.clearImmediate,Rw=mw.process,Ow=mw.Dispatch,Lw=mw.Function,Pw=mw.MessageChannel,Mw=mw.String,$w=0,Nw={};try{tw=mw.location}catch(e){}var Dw=function(e){if(yw(Nw,e)){var t=Nw[e];delete Nw[e],t()}},Fw=function(e){return function(){Dw(e)}},qw=function(e){Dw(e.data)},Uw=function(e){mw.postMessage(Mw(e),tw.protocol+"//"+tw.host)};Iw&&Aw||(Iw=function(e){Cw(arguments.length,1);var t=_w(e)?e:Lw(e),n=kw(arguments,1);return Nw[++$w]=function(){vw(t,void 0,n)},nw($w),$w},Aw=function(e){delete Nw[e]},Ew?nw=function(e){Rw.nextTick(Fw(e))}:Ow&&Ow.now?nw=function(e){Ow.now(Fw(e))}:Pw&&!Tw?(iw=(rw=new Pw).port2,rw.port1.onmessage=qw,nw=bw(iw.postMessage,iw)):mw.addEventListener&&_w(mw.postMessage)&&!mw.importScripts&&tw&&"file:"!==tw.protocol&&!ww(Uw)?(nw=Uw,mw.addEventListener("message",qw,!1)):nw="onreadystatechange"in Sw("script")?function(e){xw.appendChild(Sw("script")).onreadystatechange=function(){xw.removeChild(this),Dw(e)}}:function(e){setTimeout(Fw(e),0)});var Bw,jw,Vw,Hw,Yw,zw,Gw,Ww,Kw={set:Iw,clear:Aw},Xw=bn,Zw=/ipad|iphone|ipod/i.test(gr)&&void 0!==Xw.Pebble,Jw=/web0s(?!.*chrome)/i.test(gr),Qw=bn,ex=Cu,tx=_n.f,nx=Kw.set,rx=gw,ix=Zw,ox=Jw,ax=ow,sx=Qw.MutationObserver||Qw.WebKitMutationObserver,lx=Qw.document,cx=Qw.process,ux=Qw.Promise,dx=tx(Qw,"queueMicrotask"),fx=dx&&dx.value;fx||(Bw=function(){var e,t;for(ax&&(e=cx.domain)&&e.exit();jw;){t=jw.fn,jw=jw.next;try{t()}catch(e){throw jw?Hw():Vw=void 0,e}}Vw=void 0,e&&e.enter()},rx||ax||ox||!sx||!lx?!ix&&ux&&ux.resolve?((Gw=ux.resolve(void 0)).constructor=ux,Ww=ex(Gw.then,Gw),Hw=function(){Ww(Bw)}):ax?Hw=function(){cx.nextTick(Bw)}:(nx=ex(nx,Qw),Hw=function(){nx(Bw)}):(Yw=!0,zw=lx.createTextNode(""),new sx(Bw).observe(zw,{characterData:!0}),Hw=function(){zw.data=Yw=!Yw}));var px=fx||function(e){var t={fn:e,next:void 0};Vw&&(Vw.next=t),jw||(jw=t,Hw()),Vw=t},hx=bn,gx=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},mx=function(){this.head=null,this.tail=null};mx.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}};var vx=mx,bx=bn.Promise,_x="object"==("undefined"==typeof Deno?"undefined":(0,me.default)(Deno))&&Deno&&"object"==(0,me.default)(Deno.version),yx=!_x&&!ow&&"object"==("undefined"==typeof window?"undefined":(0,me.default)(window))&&"object"==("undefined"==typeof document?"undefined":(0,me.default)(document)),wx=bn,xx=bx,kx=ar,Sx=rs,Cx=So,Tx=yi,Ex=yx,Ix=_x,Ax=xr;xx&&xx.prototype;var Rx=Tx("species"),Ox=!1,Lx=kx(wx.PromiseRejectionEvent),Px=Sx("Promise",function(){var e=Cx(xx),t=e!==String(xx);if(!t&&66===Ax)return!0;if(!Ax||Ax<51||!/native code/.test(e)){var n=new xx(function(e){e(1)}),r=function(e){e(function(){},function(){})};if((n.constructor={})[Rx]=r,!(Ox=n.then(function(){})instanceof r))return!0}return!t&&(Ex||Ix)&&!Lx}),Mx={CONSTRUCTOR:Px,REJECTION_EVENT:Lx,SUBCLASSING:Ox},$x={},Nx=Dr,Dx=TypeError,Fx=function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw Dx("Bad Promise constructor");t=e,n=r}),this.resolve=Nx(t),this.reject=Nx(n)};$x.f=function(e){return new Fx(e)};var qx,Ux,Bx,jx=ds,Vx=ow,Hx=bn,Yx=Cn,zx=ca,Gx=Yl,Wx=Ol,Kx=Bd,Xx=Dr,Zx=ar,Jx=cr,Qx=cd,ek=hw,tk=Kw.set,nk=px,rk=function(e,t){var n=hx.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))},ik=gx,ok=vx,ak=zo,sk=bx,lk=$x,ck="Promise",uk=Mx.CONSTRUCTOR,dk=Mx.REJECTION_EVENT,fk=Mx.SUBCLASSING,pk=ak.getterFor(ck),hk=ak.set,gk=sk&&sk.prototype,mk=sk,vk=gk,bk=Hx.TypeError,_k=Hx.document,yk=Hx.process,wk=lk.f,xk=wk,kk=!!(_k&&_k.createEvent&&Hx.dispatchEvent),Sk="unhandledrejection",Ck=function(e){var t;return!(!Jx(e)||!Zx(t=e.then))&&t},Tk=function(e,t){var n,r,i,o=t.value,a=1==t.state,s=a?e.ok:e.fail,l=e.resolve,c=e.reject,u=e.domain;try{s?(a||(2===t.rejection&&Ok(t),t.rejection=1),!0===s?n=o:(u&&u.enter(),n=s(o),u&&(u.exit(),i=!0)),n===e.promise?c(bk("Promise-chain cycle")):(r=Ck(n))?Yx(r,n,l,c):l(n)):c(o)}catch(e){u&&!i&&u.exit(),c(e)}},Ek=function(e,t){e.notified||(e.notified=!0,nk(function(){for(var n,r=e.reactions;n=r.get();)Tk(n,e);e.notified=!1,t&&!e.rejection&&Ak(e)}))},Ik=function(e,t,n){var r,i;kk?((r=_k.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),Hx.dispatchEvent(r)):r={promise:t,reason:n},!dk&&(i=Hx["on"+e])?i(r):e===Sk&&rk("Unhandled promise rejection",n)},Ak=function(e){Yx(tk,Hx,function(){var t,n=e.facade,r=e.value;if(Rk(e)&&(t=ik(function(){Vx?yk.emit("unhandledRejection",r,n):Ik(Sk,n,r)}),e.rejection=Vx||Rk(e)?2:1,t.error))throw t.value})},Rk=function(e){return 1!==e.rejection&&!e.parent},Ok=function(e){Yx(tk,Hx,function(){var t=e.facade;Vx?yk.emit("rejectionHandled",t):Ik("rejectionhandled",t,e.value)})},Lk=function(e,t,n){return function(r){e(t,r,n)}},Pk=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,Ek(e,!0))},Mk=function e(t,n,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===n)throw bk("Promise can't be resolved itself");var i=Ck(n);i?nk(function(){var r={done:!1};try{Yx(i,n,Lk(e,r,t),Lk(Pk,r,t))}catch(e){Pk(r,e,t)}}):(t.value=n,t.state=1,Ek(t,!1))}catch(e){Pk({done:!1},e,t)}}};if(uk&&(vk=(mk=function(e){Qx(this,vk),Xx(e),Yx(qx,this);var t=pk(this);try{e(Lk(Mk,t),Lk(Pk,t))}catch(e){Pk(t,e)}}).prototype,(qx=function(e){hk(this,{type:ck,done:!1,notified:!1,parent:!1,reactions:new ok,rejection:!1,state:0,value:void 0})}).prototype=zx(vk,"then",function(e,t){var n=pk(this),r=wk(ek(this,mk));return n.parent=!0,r.ok=!Zx(e)||e,r.fail=Zx(t)&&t,r.domain=Vx?yk.domain:void 0,0==n.state?n.reactions.add(r):nk(function(){Tk(r,n)}),r.promise}),Ux=function(){var e=new qx,t=pk(e);this.promise=e,this.resolve=Lk(Mk,t),this.reject=Lk(Pk,t)},lk.f=wk=function(e){return e===mk||void 0===e?new Ux(e):xk(e)},Zx(sk)&&gk!==Object.prototype)){Bx=gk.then,fk||zx(gk,"then",function(e,t){var n=this;return new mk(function(e,t){Yx(Bx,n,e,t)}).then(e,t)},{unsafe:!0});try{delete gk.constructor}catch(e){}Gx&&Gx(gk,vk)}jx({global:!0,constructor:!0,wrap:!0,forced:uk},{Promise:mk}),Wx(mk,ck,!1),Kx(ck);var $k=bx,Nk=Mx.CONSTRUCTOR||!hd(function(e){$k.all(e).then(void 0,function(){})}),Dk=Cn,Fk=Dr,qk=$x,Uk=gx,Bk=ad;ds({target:"Promise",stat:!0,forced:Nk},{all:function(e){var t=this,n=qk.f(t),r=n.resolve,i=n.reject,o=Uk(function(){var n=Fk(t.resolve),o=[],a=0,s=1;Bk(e,function(e){var l=a++,c=!1;s++,Dk(n,t,e).then(function(e){c||(c=!0,o[l]=e,--s||r(o))},i)}),--s||r(o)});return o.error&&i(o.value),n.promise}});var jk=ds,Vk=Mx.CONSTRUCTOR,Hk=bx,Yk=pr,zk=ar,Gk=ca,Wk=Hk&&Hk.prototype;if(jk({target:"Promise",proto:!0,forced:Vk,real:!0},{catch:function(e){return this.then(void 0,e)}}),zk(Hk)){var Kk=Yk("Promise").prototype.catch;Wk.catch!==Kk&&Gk(Wk,"catch",Kk,{unsafe:!0})}var Xk=Cn,Zk=Dr,Jk=$x,Qk=gx,eS=ad;ds({target:"Promise",stat:!0,forced:Nk},{race:function(e){var t=this,n=Jk.f(t),r=n.reject,i=Qk(function(){var i=Zk(t.resolve);eS(e,function(e){Xk(i,t,e).then(n.resolve,r)})});return i.error&&r(i.value),n.promise}});var tS=Cn,nS=$x;ds({target:"Promise",stat:!0,forced:Mx.CONSTRUCTOR},{reject:function(e){var t=nS.f(this);return tS(t.reject,void 0,e),t.promise}});var rS=Ji,iS=cr,oS=$x,aS=function(e,t){if(rS(e),iS(t)&&t.constructor===e)return t;var n=oS.f(e);return(0,n.resolve)(t),n.promise},sS=ds,lS=Mx.CONSTRUCTOR,cS=aS;pr("Promise"),sS({target:"Promise",stat:!0,forced:lS},{resolve:function(e){return cS(this,e)}});var uS=ti,dS=Ms;ds({target:"Object",stat:!0,forced:yn(function(){dS(1)})},{keys:function(e){return dS(uS(e))}});var fS="canvas",pS="audio",hS="video",gS="screen",mS="small",vS="big",bS="auxiliary",_S="aux",yS="smallVideo",wS="environment",xS="mute",kS="unmute",SS="ended",CS="playing",TS="pause",ES="error",IS="loadeddata",AS="audioinput",RS="videoinput",OS="main",LS="backup",PS="sei-message",MS="PLAYING",$S="PAUSED",NS="STOPPED",DS="inactive",FS="sendonly",qS="recvonly",US="track",BS="qcloud",jS="",VS="jssdk_log",HS=function(e){return jS=e},YS="live",zS="anchor",GS="audience",WS="5Y2wZK8nANNAoVw6dSAHVjNxrD1ObBM2kBPV",KS="224d130c-7b5c-415b-aaa2-79c2eb5a6df2",XS=OS,ZS=bS,JS="unknown",QS="DISCONNECTED",eC="CONNECTING",tC="RECONNECTING",nC="CONNECTED",rC="connecting",iC="closed",oC="connected",aC="publish",sC="unpublish",lC="subscribe",cC="unsubscribe",uC="uplink-connection",dC="uplink-reconnection",fC="downlink-connection",pC="downlink-reconnection",hC="setLocalDescription",gC="setRemoteDescription",mC="iceConnectionState",vC="stream-initialize",bC="websocketConnectionState",_C="websocketReconnectionState",yC="update-stream",wC="recover-subscription",xC="start-mix-transcode",kC="stop-mix-transcode",SC="player-error",CC="schedule",TC="unsubscribe",EC="subscribe_change",IC="unified-plan",AC="plan-b",RC={MANUAL:"manual",PRESET_LAYOUT:"preset-layout"},OC={REMOTE:"$PLACE_HOLDER_REMOTE$"},LC={IT_AUDIO_VIDEO:0,IT_PICTURE:2,IT_CANVAS:3,IT_PURE_AUDIO:4,IT_PURE_VIDEO:5},PC="string",MC="number",$C="boolean",NC="object",DC={ADD:"add",REMOVE:"remove"},FC={unknown:0,wifi:1,"4g":2,"3g":3,"2g":4,wired:5},qC="schedule.rtc.qq.com",UC="schedule.rtc.qcloud.com",BC="schedule.rtc.tencentcloud.com",jC="schedule-ecdn.rtc.tencentcloud.com",VC="",HC=function(e){return VC=e},YC="TRTC",zC="Client",GC="LocalStream",WC="RemoteStream",KC="Stream",XC="web.sdk.qcloud.com",ZC="web.sdk.tencent.cn",JC="web.sdk.cloud.tencent.cn",QC="https://console.cloud.tencent.com/trtc",eT="https://".concat(XC,"/trtc/webrtc/doc"),tT="".concat(eT,"/zh-cn/"),nT="trtc_error_assistance",rT="default",iT="communications",oT={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,NONE:5},aT=(0,he.default)(oT),sT=["normal leave","timeout leave","kick","role change"],lT="ric",cT="raf",uT="timeout",dT="Resolution reset to 1080p, need to upgrade ability here https://cloud.tencent.com/document/product/647/85386",fT={"TRTC.checkSystemRequirements":40001,"TRTC.isScreenShareSupported":40002,"TRTC.isSmallStreamSupported":40003,"TRTC.createClient.rtc":40004,"TRTC.createClient.live":40005,"TRTC.createClient.intRoomId":40006,"TRTC.createClient.stringRoomId":40007,"TRTC.createClient.autoSubscribe":40008,"TRTC.createClient.manualSubscribe":40009,"TRTC.enableUploadLog":40010,"TRTC.disableUploadLog":40011,"Client.publish":40012,"Client.publish.isAuxiliary":40013,"Client.switchRole":40014,"Client.startPublishCDNStream":40015,"Client.stopPublishCDNStream":40016,"Client.startMixTranscode":40017,"Client.stopMixTranscode":40018,"Client.enableAudioVolumeEvaluation":40019,"Client.enableSmallStream":40020,"Client.disableSmallStream":40021,"Client.setSmallStreamProfile":40022,"Client.setRemoteVideoStreamType":40023,"Client.sendSEIMessage":40024,"Client.setProxyServer":40025,"Client.setTurnServer":40026,"LocalStream.setAudioProfile.standard":40027,"LocalStream.setAudioProfile.high":40028,"LocalStream.setAudioProfile.standard-stereo":40029,"LocalStream.setAudioProfile.high-stereo":40030,"LocalStream.setVideoProfile.120p":40031,"LocalStream.setVideoProfile.120p_2":40032,"LocalStream.setVideoProfile.180p":40033,"LocalStream.setVideoProfile.180p_2":40034,"LocalStream.setVideoProfile.240p":40035,"LocalStream.setVideoProfile.240p_2":40036,"LocalStream.setVideoProfile.360p":40037,"LocalStream.setVideoProfile.360p_2":40038,"LocalStream.setVideoProfile.480p":40039,"LocalStream.setVideoProfile.480p_2":40040,"LocalStream.setVideoProfile.720p":40041,"LocalStream.setVideoProfile.1080p":40042,"LocalStream.setVideoProfile.1440p":40043,"LocalStream.setVideoProfile.4K":40044,"LocalStream.setScreenProfile.480p":40045,"LocalStream.setScreenProfile.480p_2":40046,"LocalStream.setScreenProfile.720p":40047,"LocalStream.setScreenProfile.720p_2":40048,"LocalStream.setScreenProfile.1080p":40049,"LocalStream.setScreenProfile.1080p_2":40050,"LocalStream.setVideoContentHint.motion":40051,"LocalStream.setVideoContentHint.detail":40052,"LocalStream.setVideoContentHint.text":40053,"LocalStream.setAudioCaptureVolume":40054,"LocalStream.getVideoFrame":40055,"RemoteStream.setAudioOutput":40056,"RemoteStream.getVideoFrame":40057,AI_DENOISER:1700,SPATIAL_AUDIO:1701,"2K_4K":1704},pT=Qn,hT=af,gT=/"/g,mT=Hn("".replace),vT=function(e,t,n,r){var i=hT(pT(e)),o="<"+t;return""!==n&&(o+=" "+n+'="'+mT(hT(r),gT,"&quot;")+'"'),o+">"+i+"</"+t+">"},bT=yn,_T=function(e){return bT(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3})},yT=vT;ds({target:"String",proto:!0,forced:_T("link")},{link:function(e){return yT(this,"a","href",e)}}),ds({target:"Array",stat:!0},{isArray:op});var wT="AVOID_REPEATED_CALL",xT="INVALID_PARAMETER_REQUIRED",kT="INVALID_PARAMETER_TYPE",ST="INVALID_PARAMETER_EMPTY",CT="INVALID_PARAMETER_INSTANCE",TT="INVALID_PARAMETER_RANGE",ET="INVALID_ROOMID_STRING",IT="INVALID_ROOMID_INTEGER",AT="JOIN_ROOM_FAILED",RT="INVALID_REMOTE_STREAM",OT="INVALID_OPERATION_START_PUBLISH_CDN",LT="INVALID_STREAM_ID",PT="START_PUBLISH_CDN_FAILED",MT="STOP_PUBLISH_CDN_FAILED",$T="INVALID_REPLACE_TRACK",NT="INVALID_STREAM_INITIALIZED",DT="CLIENT_DESTROYED",FT="CANNOT_LESS_THAN_ZERO",qT="PLAY_FAILED",UT="NOT_SUPPORTED_HTTP",BT="NOT_SUPPORTED_WEBRTC",jT="NOT_SUPPORTED_H264ENCODE",VT="NOT_SUPPORTED_H264DECODE",HT="NOT_SUPPORTED_TRACK",YT="SIGNAL_RESPONSE_FAILED",zT="SEI_NOT_SUPPORT",GT="API_CALL_ABORTED",WT={AVOID_REPEATED_CALL:function(e){return"previous ".concat(e.name,"() is ongoing, please avoid repeated calls.")},INVALID_PARAMETER_REQUIRED:function(e){var t=e.key,n=e.rule,r=e.fnName,i=e.value;return"'".concat(t||n.name,"' is a required param when calling ").concat(r,"(), received: ").concat(i,".")},INVALID_PARAMETER_TYPE:function(e){var t=e.key,n=e.rule,r=e.fnName,i=e.value,o="".concat(t||n.name),a="";return a=Array.isArray(n.type)?n.type.join("|"):n.type,"'".concat(o,"' must be type of ").concat(a," when calling ").concat(r,"(), received type: ").concat(dt(i),".")},INVALID_PARAMETER_EMPTY:function(e){var t=e.key,n=e.rule,r=e.fnName,i=e.value;return"'".concat(t||n.name,"' cannot be '").concat(i,"' when calling ").concat(r,"().")},INVALID_PARAMETER_INSTANCE:function(e){var t=e.key,n=e.rule,r=e.fnName,i=e.value,o="".concat(t||n.name),a="".concat(n.instanceOf.name||n.instanceOf);return"'".concat(o,"' must be instanceof ").concat(a," when calling ").concat(r,"(), received type: ").concat(dt(i),".")},INVALID_PARAMETER_RANGE:function(e){var t=e.key,n=e.rule,r=e.fnName,i=e.value;return"'".concat(t||n.name,"' must be one of ").concat(n.values.join("|")," when calling ").concat(r,"(), received: ").concat(i,".")},API_CALL_TIMEOUT:function(e){return"".concat(e.commandDesc||e.command," timeout observed.")},SIGNAL_CHANNEL_RECONNECTION_FAILED:"signal channel reconnection failed, please check your network.",SIGNAL_CHANNEL_SETUP_FAILED:function(e){return"SignalChannel setup failure: (errorCode: ".concat(e.errorCode,", errorMsg: ").concat(e.errorMsg," }).")},ERROR_MESSAGE:function(e){var t="".concat(e.type," failed");return e.message&&(t="".concat(t,": ").concat(e.message,".")),t},EXCHANGE_SDP_TIMEOUT:"exchange sdp timeout.",DOWNLINK_RECONNECTION_FAILED:"downlink reconnection failed, please check your network and re-join room.",EXCHANGE_SDP_FAILED:function(e){return"exchange sdp failed ".concat(e.errMsg,".")},UPDATE_OFFER_TIMEOUT:"update offer timeout observed.",UPLINK_RECONNECTION_FAILED:"uplink reconnection failed, please check your network and publish again.",INVALID_RECORDID:"recordId must be an integer number.",INVALID_PURE_AUDIO:"pureAudioPushMode must be 1 or 2.",INVALID_STREAMID:"streamId must be a sting literal within 64 bytes, and not be empty.",INVALID_USER_DEFINE_RECORDID:"userDefineRecordId must be a sting literal contains (a-zA-Z),(0-9), underline and hyphen, within 64 bytes, and not be empty.",INVALID_USER_DEFINE_PUSH_ARGS:"userDefinePushArgs must be a sting literal within 256 bytes, and not be empty.",INVALID_PROXY:'proxy server url must start with "wss://".',INVALID_JOIN:"duplicate join() called.",INVALID_ROOMID_STRING:function(e){return"'".concat(e,"' must be validate string when useStringRoomId is true.")},INVALID_ROOMID_INTEGER:function(e){return"'".concat(e,"' must be an integer between [1, 4294967294] when useStringRoomId is false.")},INVALID_SIGNAL_CHANNEL:"SignalChannel is not ready yet.",JOIN_ROOM_TIMEOUT:"join room timeout.",JOIN_ROOM_FAILED:function(e){var t=e.error,n=e.code;return"Failed to join room - ".concat(t," code: ").concat(n)},REJOIN_ROOM_FAILED:function(e){return"reJoin room: ".concat(e.roomId," failed, please check your network.")},INVALID_DESTROY:"please call leave() before destroy().",INVALID_PUBLISH:"please call join() before publish().",INVALID_UNPUBLISH:"stream has not been published yet.",INVALID_AUDIENCE:"no permission to publish() under live/".concat(GS,', please call switchRole("').concat(zS,'") firstly before publish().'),INVALID_INITIALIZE:"cannot publish stream because stream is not initialized, is switching device, or has been closed.",INVALID_DUPLICATE_PUBLISHING:function(e){return"duplicate ".concat(e," stream publishing, please unpublish your prev ").concat(e," stream and then re-publish.")},INVALID_SUBSCRIBE_UNDEFINED:"stream is undefined or null.",INVALID_SUBSCRIBE_LOCAL:"stream cannot be LocalStream.",INVALID_REMOTE_STREAM:"remoteStream does not exist because it has been unpublished by remote peer.",SUBSCRIBE_FAILED:function(e){var t=e.message,n=e.stream;return"failed to subscribe ".concat(n.getUserId()," ").concat(n.getType()," stream, reason: ").concat(t,".")},INVALID_ROLE:"switchRole can only be called in live mode.",INVALID_PARAMETER_SWITCH_ROLE:"role could only be set to a value as ".concat(zS," or ").concat(GS,"."),INVALID_OPERATION_SWITCH_ROLE:"please call join() before switchRole().",SWITCH_ROLE_TIMEOUT:"switchRole timeout.",SWITCH_ROLE_FAILED:function(e){return"switchRole failed, errCode: ".concat(e.code," errMsg: ").concat(e.message,".")},CLIENT_BANNED:function(e){return"client was banned because of "+e.message+"."},INVALID_OPERATION_START_PUBLISH_CDN:"please call startPublishCDNStream() before client join the room or after client join the room and successfully publish the local stream.",INVALID_OPERATION_STOP_PUBLISH_CDN:"please call startPublishCDNStream() before stopPublishCDNStream().",START_PUBLISH_CDN_FAILED:function(e){return"startPublishCDNStream failed, errMsg: ".concat(e.message,".")},STOP_PUBLISH_CDN_FAILED:function(e){return"stopPublishCDNStream failed, errMsg: ".concat(e.message,".")},INVALID_STREAM_ID:function(e){return"'".concat(e,"' can only consist of uppercase and lowercase english letters (a-zA-Z), numbers (0-9), hyphens and underscores.")},START_MIX_TRANSCODE:"please call startMixTranscode() after join().",STOP_MIX_TRANSCODE:"please call stopMixTranscode() after startMixTranscode().",INVALID_AUDIO_VOLUME:"interval must be a number.",ENABLE_SMALL_STREAM_PUBLISHED:"Cannot enable small stream after localStream published.",DISABLE_SMALL_STREAM_PUBLISHED:"Cannot disable small stream after localStream published.",NOT_SUPPORTED_SMALL_STREAM:"your browser does not support opening small stream.",INVALID_SMALL_STREAM_PROFILE:"small stream profile is invalid.",INVALID_PARAMETER_REMOTE_STREAM:"remoteStream is invalid.",INVALID_OPERATION_CHANGE_SMALL:"cannot switch to the small stream without subscribing to the video of remoteStream.",REMOTE_NOT_PUBLISH_SMALL_STREAM:"remote peer does not publish small stream.",INVALID_SWITCH_DEVICE:"cannot switch device on current stream.",INVALID_SWITCH_DEVICE_PUBLISHING:"cannot switch device when publishing localStream.",INVALID_REPLACE_TRACK:"cannot replace track when publishing localStream.",INVALID_INITIALIZE_LOCAL_STREAM:"local stream has not initialized yet.",INVALID_ADD_TRACK_REPETITIVE:"previous addTrack is ongoing, please avoid repetitive execution.",INVALID_ADD_TRACK_REMOVING:"cannot add track when a track is removing.",INVALID_ADD_TRACK_PUBLISHING:"cannot add track when publishing localStream.",INVALID_STREAM_INITIALIZED:"your local stream haven't been initialized yet.",INVALID_ADD_TRACK_NUMBER:"a Stream has at most one audio track and one video track.",INVALID_REMOVE_AUDIO_TRACK:"remove audio track is not supported on your browser.",INVALID_REMOVE_AUDIO_ADDING:"cannot remove track when a track is adding.",INVALID_REMOVE_AUDIO_ON:"previous removeTrack is ongoing, please avoid repetitive execution.",INVALID_REMOVE_TRACK_PUBLISHING:"cannot remove track when publishing localStream.",INVALID_REMOVE_TRACK_NOT_PUBLISHING:"the track to be removed is not being publishing.",INVALID_REMOVE_TRACK_NUMBER:"remove the only video track is not supported, please use replaceTrack or muteVideo.",INVALID_REPLACE_TRACK_NO_TRACK:function(e){return"cannot replace ".concat(e.kind," track because stream has not ").concat(e.kind," track")},START_MIX_TRANSCODE_FAILED:function(e){return"startMixTranscode failed, errMsg: ".concat(e.message,".")},STOP_MIX_TRANSCODE_FAILED:function(e){return"stopMixTranscode failed, errMsg: ".concat(e.message,".")},MIX_TRANSCODE_NOT_STARTED:"mixTranscode has not been started.",CANNOT_LESS_THAN_ZERO:function(e){var t=e.key,n=e.rule,r=e.fnName;return e.value,"'".concat(t||n.name,"' cannot be less than 0 when calling ").concat(r,"().")},MIX_PARAMS_VIDEO_FRAMERATE:"'config.videoFramerate' should be an integer between 0 and 30, excluding 0.",MIX_PARAMS_VIDEO_GOP:"'config.videoGOP' should be an integer between 1 and 8.",MIX_PARAMS_AUDIO_BITRATE:"'config.audioBitrate' should be an integer between 32 and 192.",MIX_PARAMS_USER_Z_ORDER:function(e){return"'".concat(e,"' is required and must be between 1 and 15.")},MIX_PARAMS_NOT_SELF:"'config.mixUsers' must contain self.",MIX_PARAMS_USER_STREAM:"'config.videoWidth' and 'config.videoHeight' of output stream should be contain all mix stream.",INVALID_PLAY:"duplicate play() call observed, please stop() firstly.",INVALID_ELEMENT_ID:function(e){var t=e.key,n=e.fnName;return"'".concat(t,"' is not found in the document object when calling ").concat(n,"().")},INVALID_ELEMENT_ID_TYPE:function(e){var t=e.key,n=e.fnName,r=e.type;return"the element corresponding to '".concat(t,"' must be instanceof HTMLDivElement when calling ").concat(n,"(), received: ").concat(r,".")},PLAY_FAILED:function(e){return"".concat(e.media," play failed，browser exception: ").concat(e.error.toString())},INVALID_USERID:"userId cannot be all spaces.",INVALID_CREATE_STREAM_SOURCE:"LocalStream must be created by createStream() with either audio/video or audioSource/videoSource, but can not be mixed with audio/video and audioSource/videoSource.",INVALID_CREATE_STREAM_SCREEN:"screen/video cannot be both true.",INVALID_CREATE_STREAM_AUDIO:"audio/screenAudio cannot be both true.",INVALID_CREATE_STREAM_SCREEN_AUDIO:"when screen is true, screenAudio can be configured.",NOT_SUPPORTED_HTTP:"http protocol does not support the ability to capture and publish streams, please use the https protocol.",NOT_SUPPORTED_WEBRTC:"your browser or environment does not support full WebRTC capabilities.",NOT_SUPPORTED_PROFILE:"your browser does not support setVideoProfile.",NOT_SUPPORTED_MEDIA:"your browser or environment does not support navigator.mediaDevices.",NOT_SUPPORTED_H264ENCODE:"your device does not support H.264 encoding.",NOT_SUPPORTED_H264DECODE:"your device does not support H.264 decoding.",NOT_SUPPORTED_TRACK:function(e){return"".concat(e,"Track is not supported on your browser.")},NOT_SUPPORTED_SWITCH_DEVICE:"switchDevice is not supported on your browser.",NOT_SUPPORTED_CAPTURE:"Your browser or environment does not support screen sharing, please check whether the browser version.",MICROPHONE_NOT_FOUND:"no microphone detected, please check your microphone and the configuration on TRTC.createStream.",CAMERA_NOT_FOUND:"no camera detected, please check your camera and the configuration on TRTC.createStream.",SIGNAL_RESPONSE_FAILED:function(e){return"".concat(e.signalResponse," failed, response code is ").concat(e.code," , errMsg: ").concat(e.message,".")},CATCH_HANDLER_ERROR:function(e){var t=e.name,n=e.event;return"an error was caught on ".concat(t,".on('").concat(n,"', handler), please check your code on 'handler'.")},API_NOT_EXIST:function(e){return"experimental api ".concat(e.name," does not exist.")},REPEAT_JOIN:function(e){return"[".concat(e,"] is calling client.join api or has already joined room, please avoid repeated join.")},CONNECTION_CLOSED:"remoteStream has been unsubscribed or unpublished by remote user.",SUBSCRIBE_ALL_FALSE:"cannot subscribe when both audio & video are false, use client.unsubscribe() instead",CLIENT_DESTROYED:function(e){return"failed to call ".concat(e.funName,"() because client was destroyed.")},SEI_NOT_SUPPORT:function(e){return"not support to sendSEIMessage".concat(!1===e?" without using h264 codec":"")},SEI_DISABLED:"SEI is disabled, to enable SEI: TRTC.createClient({ enableSEI: true })",SEI_EMPTY:"buffer cannot be empty",SEI_OVERSIZE:function(e){return"buffer size(".concat(e,") is over 1000 Bytes")},SEI_BEFORE_PUBLISH:"please call sendSEIMessage() after publish() success",SEI_NOT_VIDEO:"cannot send sei when localStream has not video.",CALL_FREQUENCY_LIMIT:function(e){var t=e.isSize,n=e.name,r=e.timesInSecond,i=e.maxSizeInSecond;return"api ".concat(n," call ").concat(t?"size":"times"," is over ").concat(t?i+" bytes":r," in a second.")},CONNECTION_ABORTED:function(e){return"connection aborted due to: "+e},API_CALL_ABORTED:function(e){return e.message.includes("REMOTE_STREAM_NOT_EXIST")?"Subscribe ".concat(e.stream.getUserId()," ").concat(e.stream.getType()," stream aborted, reason: remote user ").concat(e.stream.getUserId()," unpublished stream."):"API aborted, reason: ".concat(e.message)},DUPLICATE_AUX:"only one auxiliary stream can be published in a room.",NOT_SUPPORTED_AUX:"publish auxiliary stream is not supported on your browser."},KT=bn,XT=yn,ZT=af,JT=Y_.trim,QT=Hn("".charAt),eE=KT.parseFloat,tE=KT.Symbol,nE=tE&&tE.iterator,rE=1/eE("\t\n\v\f\r                　\u2028\u2029\ufeff-0")!=-1/0||nE&&!XT(function(){eE(Object(nE))})?function(e){var t=JT(ZT(e)),n=eE(t);return 0===n&&"-"==QT(t,0)?-0:n}:eE;ds({global:!0,forced:parseFloat!=rE},{parseFloat:rE});var iE=window.navigator&&window.navigator.userAgent||"",oE=/AppleWebKit\/([\d.]+)/i.exec(iE);oE&&parseFloat(oE.pop());var aE=/iPad/i.test(iE),sE=navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/Macintosh/.test(iE),lE=/iPhone/i.test(iE)&&!aE,cE=/iPod/i.test(iE),uE=lE||aE||cE||sE,dE=/Android/i.test(iE);dE&&function(){var e=iE.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);t&&n&&parseFloat(e[1]+"."+e[2])}(),dE&&/webkit/i.test(iE);var fE=/Firefox/i.test(iE),pE=fE&&function(){var e=iE.match(/Firefox\/(\d+)/);return e&&e[1]?parseFloat(e[1]):null}(),hE=/Edge\//i.test(iE),gE=hE&&function(){var e=iE.match(/Edge\/(\d+)/i);if(e&&e[1])return e[1]}(),mE=/Edg\//i.test(iE),vE=mE&&function(){var e=iE.match(/Edg\/(\d+)/);return e&&e[1]?parseFloat(e[1]):null}(),bE=/SogouMobileBrowser\//i.test(iE),_E=bE&&function(){var e=iE.match(/SogouMobileBrowser\/(\d+)/);return e&&e[1]?parseFloat(e[1]):null}(),yE=/MetaSr\s/i.test(iE),wE=yE&&function(){var e=iE.match(/MetaSr(\s\d+(\.\d+)+)/);return e&&e[1]?parseFloat(e[1]):null}(),xE=/TBS\/\d+/i.test(iE),kE=xE&&function(){var e=iE.match(/TBS\/(\d+)/i);if(e&&e[1])return e[1]}(),SE=/XWEB\/\d+/i.test(iE),CE=SE&&function(){var e=iE.match(/XWEB\/(\d+)/i);if(e&&e[1])return e[1]}();/MSIE\s8\.0/.test(iE),/MSIE\/\d+/i.test(iE)&&function(){var e=/MSIE\s(\d+)\.\d/.exec(iE),t=e&&parseFloat(e[1]);!t&&/Trident\/7.0/i.test(iE)&&/rv:11.0/.test(iE)&&(t=11)}();var TE=/(micromessenger|webbrowser)/i.test(iE),EE=TE&&function(){var e=iE.match(/MicroMessenger\/(\d+)/i);if(e&&e[1])return e[1]}(),IE=!xE&&/MQQBrowser\/\d+/i.test(iE)&&/COVC\/\d+/i.test(iE),AE=!xE&&/MQQBrowser\/\d+/i.test(iE)&&!/COVC\/\d+/i.test(iE),RE=(AE||IE)&&function(){var e=iE.match(/ MQQBrowser\/([\d.]+)/);return e&&e[1]?e[1]:null}(),OE=!xE&&/ QQBrowser\/\d+/i.test(iE),LE=OE&&function(){var e=iE.match(/ QQBrowser\/([\d.]+)/);return e&&e[1]?e[1]:null}(),PE=!xE&&/QQBrowserLite\/\d+/i.test(iE),ME=PE&&function(){var e=iE.match(/QQBrowserLite\/([\d.]+)/);return e&&e[1]?e[1]:null}(),$E=!xE&&/MQBHD\/\d+/i.test(iE),NE=$E&&function(){var e=iE.match(/MQBHD\/([\d.]+)/);return e&&e[1]?e[1]:null}(),DE=/Windows/i.test(iE),FE=!uE&&/MAC OS X/i.test(iE),qE=!dE&&/Linux/i.test(iE);/MicroMessenger/i.test(iE);var UE=/UCBrowser/i.test(iE);/Electron/i.test(iE);var BE,jE,VE,HE,YE=/MiuiBrowser/i.test(iE),zE=YE&&function(){var e=iE.match(/MiuiBrowser\/([\d.]+)/);return e&&e[1]?e[1]:null}(),GE=/HuaweiBrowser/i.test(iE),WE=/Huawei/i.test(iE),KE=GE&&function(){var e=iE.match(/HuaweiBrowser\/([\d.]+)/);return e&&e[1]?e[1]:null}(),XE=/SamsungBrowser/i.test(iE),ZE=XE&&function(){var e=iE.match(/SamsungBrowser\/([\d.]+)/);return e&&e[1]?e[1]:null}(),JE=/HeyTapBrowser/i.test(iE),QE=JE&&function(){var e=iE.match(/HeyTapBrowser\/([\d.]+)/);return e&&e[1]?e[1]:null}(),eI=/VivoBrowser/i.test(iE),tI=eI&&function(){var e=iE.match(/VivoBrowser\/([\d.]+)/);return e&&e[1]?e[1]:null}(),nI=function(){var e=iE.match(/Chrome\/(\d+)/);return e&&e[1]?Number(e[1]):null},rI=/Chrome/i.test(iE),iI=!hE&&!yE&&!bE&&!xE&&!SE&&!mE&&!OE&&!YE&&!GE&&!XE&&!JE&&!eI&&/Chrome/i.test(iE),oI=iI&&nI(),aI=iI&&function(){var e=iE.match(/Chrome\/([\d.]+)/);return e&&e[1]?e[1]:null}(),sI=!rI&&!AE&&!IE&&!PE&&!$E&&/Safari/i.test(iE),lI=function(){if(sI){var e=iE.match(/Version\/([\d.]+)/);if(e&&e[1])return e[1]}return""}(),cI=/Android.*(wv|.0.0.0)/.test(iE),uI=function(){if(sE)return lI;if(uE){var e=iE.match(/OS (\d+)_(\d+)/i);if(e&&e[1]){var t=e[1];return e[2]&&(t+=".".concat(e[2])),t}}return""}(),dI="15.1"===lI,fI="15.1"===uI,pI=14===(BE=Number(uI.split(".")[0]))||13===BE,hI="file:"===location.protocol||"localhost"===location.hostname||"127.0.0.1"===location.hostname,gI=function(){if(SI(jE))try{jE=window.localStorage}catch(e){aA.warn(e),jE=!1}return jE},mI=new j.default([[fE,["Firefox",pE]],[mE,["Edg",vE]],[iI,["Chrome",aI]],[sI,["Safari",lI]],[xE,["TBS",kE]],[SE,["XWEB",CE]],[TE&&lE,["WeChat",EE]],[OE,["QQ(Win)",LE]],[AE,["QQ(Mobile)",RE]],[IE,["QQ(Mobile X5)",RE]],[PE,["QQ(Mac)",ME]],[$E,["QQ(iPad)",NE]],[YE,["MI",zE]],[GE,["HW",KE]],[XE,["Samsung",ZE]],[JE,["OPPO",QE]],[eI,["VIVO",tI]],[hE,["EDGE",gE]],[bE,["SogouMobile",_E]],[yE,["Sogou",wE]]]),vI=function(e,t){return t?eT+"/"+e+"/"+t:eT+"/"+e+"/index.html"},bI=function(){if(!gI())return!1;var e=localStorage.getItem(nT);e&&!function(e){var t=e.saveTime&&(new Date).getTime()-e.saveTime>=6048e5,n=!e.saveVersion||e.saveVersion!==Rs;return t||n}(JSON.parse(e))||(aA.info("init debug info"),function(){var e=new XMLHttpRequest;if(e.open("GET","https://web.sdk.qcloud.com/trtc/webrtc/download/error-message/0.0.3/script.js",!1),e.send(null),4===e.readyState&&200===e.status){var t=document.createElement("script");t.type="text/javascript",t.text=e.responseText,document.body.appendChild(t),localStorage.setItem(nT,(0,I.default)({message:e.responseText,saveTime:(new Date).getTime(),saveVersion:Rs})),document.body.removeChild(t)}}())},_I=function(){return function(e){var t=window.location.search.match(new RegExp("(\\?|&)trtc_env=([^&]*)(&|$)"));return t?decodeURIComponent(t[2]):""}()},yI=function(e){return(e=Number(e))>0&&e<14e8},wI=function(e,t){var n;n=jS?jS.includes("http")?jS:"https://"+jS:yI(e)?"https://apisgp.my-imcloud.com":"https://yun.tim.qq.com";var r=Math.floor(Math.random()*Math.pow(2,31));return"".concat(n,"/v5/AVQualityReportSvc/C2S?random=").concat(r,"&sdkappid=").concat(e,"&cmdtype=").concat(t)},xI=function(e){if(!e||"object"!==i(e)||"[object Object]"!=Object.prototype.toString.call(e))return!1;var t=(0,J.default)(e);if(null===t)return!0;var n=Object.prototype.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Function.prototype.toString.call(n)===Function.prototype.toString.call(Object)},kI=function(e){return"function"==typeof e},SI=function(e){return void 0===e},CI=function(e){return"string"==typeof e},TI=function(e){return"number"==typeof e},EI=function(e){return"boolean"==typeof e},II=function(e){return"object"===dt(e)},AI=function(e){return"array"===dt(e)},RI=function(e){return dt(e)==="MediaStreamTrack".toLowerCase()},OI=function(){var e=navigator.language||navigator.userLanguage;return"zh"===(e=e.substr(0,2))},LI=(VE=!1,HE=document.visibilityState,function(){document.visibilityState!==HE&&aA.info("visibility change: ".concat(document.visibilityState)),VE||(document.addEventListener("visibilitychange",function(){aA.info("visibility change: "+document.visibilityState),HE=document.visibilityState}),VE=!0)});window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext;var PI=function(){return new window.AudioContext},MI=function(){var e;return function(){return e||(e=new window.AudioContext,e.onstatechange=function(){aA.info("gain context state: ".concat(e.state)),"suspended"===e.state?(e.resume(),document.addEventListener("click",e.resume)):"interrupted"===e.state?e.resume():document.removeEventListener("click",e.resume)},e)}}(),$I=!!window.AudioWorkletNode,NI=function(e,t){var n=e.emit;return e.emit=function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];try{n.apply(e,i)}catch(e){var a=st({key:"CATCH_HANDLER_ERROR",data:{name:t,event:i[0]},addDocLink:!1});aA.warn(a+"\n\n"+e.stack)}},e},DI=function(e){return+e<10?"0".concat(e):e},FI=function(e){var t=e.match(/^\d+\.\d+\.\d+/)[0];if(!t)return e;var n=t.split("."),r=DI(n[1])+DI(n[2]);return n[1]-15>0&&(n[1]="15"),n[2]-15>0&&(n[2]="15"),n.join(".")+"."+r},qI={exports:{}};!function(e){function t(){}function n(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function r(e,t,r,i,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new n(r,i||e,o),l=s?s+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],a]:e._events[l].push(a):(e._events[l]=a,e._eventsCount++),e}function i(e,n){0==--e._eventsCount?e._events=new t:delete e._events[n]}function o(){this._events=new t,this._eventsCount=0}var a=Object.prototype.hasOwnProperty,s="~";ee.default&&(t.prototype=(0,ee.default)(null),(new t).__proto__||(s=!1)),o.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)a.call(e,t)&&n.push(s?t.slice(1):t);return fe.default?n.concat((0,fe.default)(e)):n},o.prototype.listeners=function(e){var t=s?s+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,o=new Array(i);r<i;r++)o[r]=n[r].fn;return o},o.prototype.listenerCount=function(e){var t=s?s+e:e,n=this._events[t];return n?n.fn?1:n.length:0},o.prototype.emit=function(e,t,n,r,i,o){var a=s?s+e:e;if(!this._events[a])return!1;var l,c,u=this._events[a],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,r),!0;case 5:return u.fn.call(u.context,t,n,r,i),!0;case 6:return u.fn.call(u.context,t,n,r,i,o),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var f,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,n);break;case 4:u[c].fn.call(u[c].context,t,n,r);break;default:if(!l)for(f=1,l=new Array(d-1);f<d;f++)l[f-1]=arguments[f];u[c].fn.apply(u[c].context,l)}}return!0},o.prototype.on=function(e,t,n){return r(this,e,t,n,!1)},o.prototype.once=function(e,t,n){return r(this,e,t,n,!0)},o.prototype.removeListener=function(e,t,n,r){var o=s?s+e:e;if(!this._events[o])return this;if(!t)return i(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||r&&!a.once||n&&a.context!==n||i(this,o);else{for(var l=0,c=[],u=a.length;l<u;l++)(a[l].fn!==t||r&&!a[l].once||n&&a[l].context!==n)&&c.push(a[l]);c.length?this._events[o]=1===c.length?c[0]:c:i(this,o)}return this},o.prototype.removeAllListeners=function(e){var n;return e?(n=s?s+e:e,this._events[n]&&i(this,n)):(this._events=new t,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=s,o.EventEmitter=o,e.exports=o}(qI);var UI=qI.exports,BI=new UI,jI=1,VI=4,HI=5,YI=22,zI=30,GI=33,WI=31,KI=32,XI=110,ZI=113,JI=114,QI=301,eA=302,tA=303,nA=d(function e(t){s(this,e),this.log=t.log,this.level=t.level,this.userId=t.userId,this.sdkAppId=t.sdkAppId,this.forAllJoinedClients=t.forAllJoinedClients,this.uploaded=!1}),rA=function(){function e(t){s(this,e),this.id_=t.id,this.userId_=t.userId,this.sdkAppId_=t.sdkAppId,this.type_=t.type,this.isLocal_=!EI(t.isLocal)||t.isLocal}return d(e,[{key:"setUserId",value:function(e){this.userId_=e}},{key:"setSdkAppId",value:function(e){this.sdkAppId_=e}},{key:"log",value:function(e,t){aA.log({log:"[".concat(this.isLocal_?"↑":"↓").concat(this.id_,"] ").concat(this.type_?this.type_+" ":"").concat(t),level:e,forAllJoinedClients:SI(this.userId_),userId:this.userId_,sdkAppId:this.sdkAppId_})}},{key:"info",value:function(e){this.log(oT.INFO,e)}},{key:"debug",value:function(e){this.log(oT.DEBUG,e)}},{key:"warn",value:function(e){this.log(oT.WARN,e)}},{key:"error",value:function(e){this.log(oT.ERROR,e)}}]),e}(),iA=!(uE||dE),oA=function(){function e(){var t=this;s(this,e),this.clients_=new m.default,this.queue_=[],this.timeoutId_=-1,this.logLevel_=oT.DEBUG,this.logLevelToUpload_=oT.INFO,this.enableUploadLog_=!0,this.isAbleToUpload_=!1,this.checkURLParam(),BI.on(zI,function(e){var n=e.client;-1===t.timeoutId_&&t.startUpload(),t.clients_.add(n)}),BI.on(GI,function(e){var n=e.client;return t.clients_.delete(n)}),BI.on(WI,function(e){e&&xI(e.config)&&aT[e.config.logLevelToUpload]&&(t.logLevelToUpload_=e.config.logLevelToUpload)}),BI.on(VI,this.setIsAbleToUpload,this),BI.on(HI,this.setIsAbleToUpload,this)}var t,r;return d(e,[{key:"getIsAbleToUpload",value:function(){return this.isAbleToUpload_}},{key:"setIsAbleToUpload",value:function(){this.isAbleToUpload_=!0,BI.off(VI,this.setIsAbleToUpload,this),BI.off(HI,this.setIsAbleToUpload,this)}},{key:"startUpload",value:(r=a(n().mark(function e(){var t=this;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.upload();case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:this.timeoutId_=setTimeout(function(){return t.startUpload()},2e3);case 8:case"end":return e.stop()}},e,this,[[0,5]])})),function(){return r.apply(this,arguments)})},{key:"getLogsToUpload",value:function(){var e=this,t={map:new j.default,splicedQueue:[]};if(this.queue_[0].forAllJoinedClients&&0===this.clients_.size)return t;for(var n=0;n<this.queue_.length&&"break"!==function(){if(50===n)return"break";var r=e.queue_[n];r.forAllJoinedClients?e.clients_.forEach(function(e){if(e.getIsJoined()){var n=e.getUserId(),i=e.getSDKAppId();t.map.has(n)?t.map.get(n).logs.push(r):t.map.set(n,{userId:n,sdkAppId:i,logs:[r]})}}):t.map.has(r.userId)?t.map.get(r.userId).logs.push(r):t.map.set(r.userId,{userId:r.userId,sdkAppId:r.sdkAppId,logs:[r]})}();n++);return t.map.size>0&&(t.splicedQueue=this.queue_.splice(0,n)),t}},{key:"upload",value:(t=a(n().mark(function e(){var t,r,i,o,a,s,l,c,u,d;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.queue_.length&&this.isAbleToUpload_){e.next=2;break}return e.abrupt("return");case 2:if(t=this.getLogsToUpload(),r=t.map,i=t.splicedQueue,0!==r.size){e.next=5;break}return e.abrupt("return");case 5:e.prev=5,o=D(r.values()),a=0;case 8:if(!(a<o.length)){e.next=16;break}return s=o[a],l=s.userId,c=s.sdkAppId,u=s.logs,e.next=12,this.uploadLogWithRetry((0,I.default)({timestamp:Fb(),sdkAppId:String(c),userId:l,version:Rs,log:u.map(function(e){return e.log}).join("\n")}),c);case 12:u.forEach(function(e){return e.uploaded=!0});case 13:a++,e.next=8;break;case 16:e.next=20;break;case 18:e.prev=18,e.t0=e.catch(5);case 20:d=i.filter(function(e){return!e.uploaded}),d.length>0&&(this.queue_=d.concat(this.queue_));case 22:case"end":return e.stop()}},e,this,[[5,18]])})),function(){return t.apply(this,arguments)})},{key:"uploadLogWithRetry",value:function(e,t){return mt({retryFunction:function(){return gt({url:wI(t,VS),body:e,timeout:5e3})},settings:{retries:3,timeout:1e3},onError:function(e,t){t()}})()}},{key:"getPrefix",value:function(e){var t=new Date;return t.setTime(Db()),String.prototype.padStart?"[".concat(t.toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/,"$1"),":").concat(t.getMilliseconds().toString().padStart(3,"0"),"] <").concat(aT[e],">"):"[".concat(t.toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/,"$1"),":").concat(t.getMilliseconds(),"] <").concat(aT[e],">")}},{key:"getLogLevel",value:function(){return this.logLevel_}},{key:"setLogLevel",value:function(e){SI(aT[e])||(this.logLevel_!==e&&this.info("setLogLevel ".concat(e)),this.logLevel_=e)}},{key:"enableUploadLog",value:function(){this.enableUploadLog_=!0}},{key:"disableUploadLog",value:function(){this.enableUploadLog_=!1}},{key:"log",value:function(e){var t=e.log,n=e.level,r=e.forAllJoinedClients,i=void 0===r||r,o=e.userId,a=e.sdkAppId;if(t="".concat(this.getPrefix(n)," ").concat(t),this.enableUploadLog_&&n>=this.logLevelToUpload_&&this.queue_.push(new nA({log:t,level:n,userId:o,sdkAppId:a,forAllJoinedClients:i})),!(n<this.logLevel_)){var s=aT[n]?aT[n].toLowerCase():"info";iA?console[s]("%cTRTC%c%s","padding: 1px 4px;border-radius: 3px;color: #fff;background: #1E88E5;","display: inline",t):console[s](t)}}},{key:"debug",value:function(e){this.log({log:e,level:oT.DEBUG})}},{key:"info",value:function(e){this.log({log:e,level:oT.INFO})}},{key:"warn",value:function(e){this.log({log:e,level:oT.WARN})}},{key:"error",value:function(e){this.log({log:e,level:oT.ERROR})}},{key:"createLogger",value:function(e){return new rA(e)}},{key:"checkURLParam",value:function(){var e=new URLSearchParams(location.search).get("logLevelToUpload");aT[e]&&(this.logLevelToUpload_=e)}}]),e}(),aA=new oA,sA=!0,lA=cr,cA=Math.floor,uA=h.default||function(e){return!lA(e)&&isFinite(e)&&cA(e)===e};ds({target:"Number",stat:!0},{isInteger:uA});var dA,fA=ds,pA=Hn,hA=_n.f,gA=wa,mA=af,vA=ky,bA=Qn,_A=Cy,yA=pA("".startsWith),wA=pA("".slice),xA=Math.min,kA=_A("startsWith");fA({target:"String",proto:!0,forced:!(!kA&&(dA=hA(String.prototype,"startsWith"))&&!dA.writable||kA)},{startsWith:function(e){var t=mA(bA(this));vA(e);var n=gA(xA(arguments.length>1?arguments[1]:void 0,t.length)),r=mA(e);return yA?yA(t,r,n):wA(t,n,n+r.length)===r}});var SA=wn,CA=Hn,TA=Cn,EA=yn,IA=Ms,AA=Fa,RA=Tn,OA=ti,LA=Kn,PA=L.default,MA=ie.default,$A=CA([].concat),NA=!PA||EA(function(){if(SA&&1!==PA({b:1},PA(MA({},"a",{enumerable:!0,get:function(){MA(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=(0,ne.default)(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=PA({},e)[n]||IA(PA({},t)).join("")!=r})?function(e,t){for(var n=OA(e),r=arguments.length,i=1,o=AA.f,a=RA.f;r>i;)for(var s,l=LA(arguments[i++]),c=o?$A(IA(l),o(l)):IA(l),u=c.length,d=0;u>d;)s=c[d++],SA&&!TA(a,l,s)||(n[s]=l[s]);return n}:PA,DA=NA;ds({target:"Object",stat:!0,arity:2,forced:L.default!==DA},{assign:DA});var FA=Hn,qA=Dr,UA=cr,BA=ii,jA=Hf,VA=xn,HA=Function,YA=FA([].concat),zA=FA([].join),GA={},WA=function(e,t,n){if(!BA(GA,t)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";GA[t]=HA("C,a","return new C("+zA(r,",")+")")}return GA[t](e,n)},KA=VA?HA.bind:function(e){var t=qA(this),n=t.prototype,r=jA(arguments,1),i=function n(){var i=YA(r,jA(arguments));return this instanceof n?WA(t,i.length,i):t.apply(e,i)};return UA(n)&&(i.prototype=n),i},XA=KA;ds({target:"Function",proto:!0,forced:Function.bind!==XA},{bind:XA});var ZA=ds,JA=Mp.findIndex,QA=cl,eR="findIndex",tR=!0;eR in[]&&Array(1).findIndex(function(){tR=!1}),ZA({target:"Array",proto:!0,forced:tR},{findIndex:function(e){return JA(this,e,arguments.length>1?arguments[1]:void 0)}}),QA(eR);var nR=wn,rR=Hn,iR=Ms,oR=nr,aR=rR(Tn.f),sR=rR([].push),lR=function(e){return function(t){for(var n,r=oR(t),i=iR(r),o=i.length,a=0,s=[];o>a;)n=i[a++],nR&&!aR(r,n)||sR(s,e?[n,r[n]]:r[n]);return s}},cR={entries:lR(!0),values:lR(!1)}.values;ds({target:"Object",stat:!0},{values:function(e){return cR(e)}});var uR="DISCONNECTED",dR="CONNECTING",fR="RECONNECTING",pR="CONNECTED",hR={CLIENT_BANNED:9,CHANNEL_SETUP_RESULT:19,CHANNEL_RECONNECT_RESULT:514,JOIN_ROOM_RESULT:20,PEER_JOIN:4134,PEER_LEAVE:4135,STREAM_ADDED:16,STREAM_REMOVED:18,UPLINK_NETWORK_STATS:22,UPDATE_REMOTE_MUTE_STAT:23,PUBLISH_RESULT:4098,PUBLISH_STATE_CHANGE_RESULT:4112,UNPUBLISH_RESULT:4100,SUBSCRIBE_RESULT:4102,UNSUBSCRIBE_RESULT:4104,SUBSCRIBE_CHANGE_RESULT:4106,MUTE_RESULT:4108,UPDATE_OFFER_RESULT:4128,START_PUBLISH_TENCENT_CDN_RES:1286,STOP_PUBLISH_TENCENT_CDN_RES:1288,START_PUBLISH_GIVEN_CDN_RES:777,STOP_PUBLISH_GIVEN_CDN_RES:779,START_MIX_TRANSCODE_RES:781,STOP_MIX_TRANSCODE_RES:783,USER_LIST_RES:4137,SWITCH_ROLE_RES:4110,UPDATE_CONSTRAINT_CONFIG_RES:772},gR=[hR.UPDATE_REMOTE_MUTE_STAT,hR.UPLINK_NETWORK_STATS,hR.USER_LIST_RES,hR.MUTE_RESULT],mR={CLIENT_BANNED:"client-banned",CHANNEL_SETUP_RESULT:"channel-setup-result",CHANNEL_RECONNECT_RESULT:"channel-reconnect-result",JOIN_ROOM_RESULT:"join-room-result",PEER_JOIN:"peer-join",PEER_LEAVE:"peer-leave",STREAM_ADDED:"stream-added",STREAM_REMOVED:"stream-removed",UPLINK_NETWORK_STATS:"uplink-network-stats",UPDATE_REMOTE_MUTE_STAT:"update-remote-mute-stat",PUBLISH_RESULT:"publish-result",PUBLISH_STATE_CHANGE_RESULT:"publish-state-change-result",UNPUBLISH_RESULT:"unpublish-result",SUBSCRIBE_RESULT:"subscribe-result",SUBSCRIBE_CHANGE_RESULT:"subscribe-change-result",UNSUBSCRIBE_RESULT:"unsubscribe-result",UPDATE_OFFER_RESULT:"update-offer-result",START_PUBLISH_TENCENT_CDN_RES:"start-publish-tencent-cdn-res",STOP_PUBLISH_TENCENT_CDN_RES:"stop-publish-tencent-cdn-res",START_PUBLISH_GIVEN_CDN_RES:"start-publish-given-cdn-res",STOP_PUBLISH_GIVEN_CDN_RES:"stop-publish-given-cdn-res",START_MIX_TRANSCODE_RES:"start-mix-transcode-res",STOP_MIX_TRANSCODE_RES:"stop-mix-transcode-res",USER_LIST_RES:"user-list-res",SWITCH_ROLE_RES:"switch_role_res",MUTE_RESULT:"mute-result",UPDATE_CONSTRAINT_CONFIG_RES:"update-contraint-config-res"},vR="unpublish",bR={INVALID_PARAMETER:4096,INVALID_OPERATION:4097,NOT_SUPPORTED:4098,DEVICE_NOT_FOUND:4099,INITIALIZE_FAILED:4100,SIGNAL_CHANNEL_SETUP_FAILED:16385,SIGNAL_CHANNEL_ERROR:16386,ICE_TRANSPORT_ERROR:16387,JOIN_ROOM_FAILED:16388,CREATE_OFFER_FAILED:16389,SIGNAL_CHANNEL_RECONNECTION_FAILED:16390,UPLINK_RECONNECTION_FAILED:16391,DOWNLINK_RECONNECTION_FAILED:16392,REMOTE_STREAM_NOT_EXIST:16400,CLIENT_BANNED:16448,SERVER_TIMEOUT:16449,SUBSCRIPTION_TIMEOUT:16450,PLAY_NOT_ALLOWED:16451,DEVICE_AUTO_RECOVER_FAILED:16452,START_PUBLISH_CDN_FAILED:16453,STOP_PUBLISH_CDN_FAILED:16454,START_MIX_TRANSCODE_FAILED:16455,STOP_MIX_TRANSCODE_FAILED:16456,NOT_SUPPORTED_H264:16457,SWITCH_ROLE_FAILED:16458,API_CALL_TIMEOUT:16459,SCHEDULE_FAILED:16460,API_CALL_ABORTED:16461,UNKNOWN:65535},_R=function(e){function t(e){var r,i=e.name,o=void 0===i?"RtcError":i,a=e.message,l=e.code,c=void 0===l?bR.UNKNOWN:l,u=e.extraCode,d=void 0===u?0:u,f=e.constraint;s(this,t);var p="<".concat(function(e){for(var t in bR)if(bR[t]===e)return t;return"UNKNOWN"}(c)," 0x").concat(c.toString(16),">");return(r=n.call(this,a+"".concat(f?" constraint: ".concat(f):"")+"".concat(null!=a&&a.includes(p)?"":" "+p))).code_=c,r.extraCode_=d,r.name=o,r.message_=a,f&&(r.constraint=f),r}g(t,e);var n=A(t);return d(t,[{key:"getCode",value:function(){return this.code_}},{key:"getExtraCode",value:function(){return this.extraCode_}}]),t}(C(Error)),yR=new j.default,wR=function(e,t){var n=yR.get(e);n||(yR.set(e,[]),n=yR.get(e)),n.push(t)},xR=function(e){var t=yR.get(e),n=[];return t?(yR.delete(e),n=t.map(function(e){return{uint32_event_id:e.eventId,uint64_date:e.timestamp,str_userid:e.remoteUserId,str_event_json:e.eventDesc}})):n=[],n},kR=Object.prototype.hasOwnProperty,SR=function(){function e(){s(this,e);var t=at(),n=t.name,r=t.version;this.roomIdMap_=new j.default,this.configs_={sdkAppId:"",userId:"",version:Rs,env:BS,browserVersion:n+r,ua:navigator.userAgent}}return d(e,[{key:"setConfig",value:function(e){var t=e.sdkAppId,n=e.env,r=e.userId,i=e.roomId;t!==this.configs_.sdkAppId&&(this.configs_.sdkAppId=String(t)),this.configs_.env=n,this.configs_.userId=r,this.roomIdMap_.set(r,String(i))}},{key:"logEvent",value:function(e){if(!hI){var n=t(t(t({},e),this.configs_),{},{userId:e.userId||this.configs_.userId});SI(n.code)&&(n.code="failed"===n.result?bR.UNKNOWN:0),this.sendRequest(wI(this.configs_.sdkAppId,"jssdk_event"),n)}}},{key:"logSuccessEvent",value:function(e){hI||(this.logEvent(t(t({},e),{},{result:"success",roomId:this.roomIdMap_.get(e.userId)})),this.configs_.env===BS&&this.uploadEventToKibana(t(t({},e),{},{result:"success"})))}},{key:"logFailedEvent",value:function(e){if(!hI){var n=e.eventType,r=e.code,i=e.error,o=e.userId,a={roomId:this.roomIdMap_.get(o),userId:o,eventType:n,result:"failed",code:r||(i instanceof _R?i.getExtraCode()||i.getCode():bR.UNKNOWN)};this.logEvent(a),this.configs_.env===BS&&this.uploadEventToKibana(t(t({},a),{},{error:i}))}}},{key:"uploadEventToKibana",value:function(e){var t="stat-".concat(e.eventType,"-").concat(e.result);"delta-join"!==e.eventType&&"delta-leave"!==e.eventType&&"delta-publish"!==e.eventType||(t="".concat(e.eventType,":").concat(e.delta)),this.uploadEvent({log:t,userId:e.userId}),"failed"===e.result&&(t="stat-".concat(e.eventType,"-").concat(e.result,"-").concat(e.code),this.uploadEvent({log:t,userId:e.userId,error:e.error}))}},{key:"uploadEvent",value:function(e){var t=e.log,n=e.userId,r=e.error,i={timestamp:Fb(),sdkAppId:this.configs_.sdkAppId,userId:n||this.configs_.userId,version:this.configs_.version,log:t};r&&(i.errorInfo=r.message),this.sendRequest(wI(this.configs_.sdkAppId,VS),i)}},{key:"sendRequest",value:function(e,t){var n=this;aA.getIsAbleToUpload()?gt({url:e,body:(0,I.default)(t)}).catch(function(){}):setTimeout(function(){n.sendRequest(e,t)},1e3)}}]),e}(),CR=new SR,TR=function(){function e(t){s(this,e),this.client_=t.client,this.sdkAppId_=t.sdkAppId,this.userId_=t.userId,this.userSig_=t.userSig,this.url_=t.url,this.backupUrl_=t.backupUrl;var n="?sdkAppId=".concat(encodeURIComponent(this.sdkAppId_),"&userId=").concat(encodeURIComponent(this.userId_),"&userSig=").concat(encodeURIComponent(this.userSig_),"&roomId=").concat(encodeURIComponent(t.roomId)),r=this.client_.getSystemResult();if(r&&r.detail){var i=r.detail,o=i.isH264EncodeSupported,a=i.isVp8EncodeSupported,l=i.isH264DecodeSupported,c=i.isVp8DecodeSupported;n+="&enc264=".concat(Number(o),"&dec264=").concat(Number(l),"&encVp8=").concat(Number(a),"&decVp8=").concat(Number(c))}t.signalDomainWhenUnifiedProxy&&(n+="&signalDomain=".concat(encodeURIComponent(t.signalDomainWhenUnifiedProxy))),this.urlWithParam_="".concat(this.url_).concat(n),this.backupUrlWithParam_="".concat(this.backupUrl_).concat(n),this.isConnected_=!1,this.isConnecting_=!1,this.socketInUse_=null,this.socket_=null,this.backupSocket_=null,this.backupTimer_=-1,this.signalInfo_={},this.currentState_=uR,this.reconnectionCount_=0,this.reconnectionTimer_=-1,this.lastMessageTime_=-1,this.seq_=0,this.log_=aA.createLogger({id:"ws|"+this.userId_,userId:this.userId_,sdkAppId:this.sdkAppId_}),this.emitter_=new UI}return d(e,[{key:"isOnline",get:function(){return this.currentState_===pR&&Date.now()-this.lastMessageTime_<12e3}},{key:"connect",value:function(){var e=this;return new W.default(function(t,n){e.log_.info("connect to url: ".concat(e.urlWithParam_)),e.emitConnectionStateChanged(dR),e.socket_=new WebSocket(e.urlWithParam_),e.bindSocket(e.socket_),e.backupTimer_=setTimeout(function(){e.isConnected_||(e.log_.info("trying to connect to backupUrl"),e.tryConnectBackup())},5e3),e.once(3,t),e.once(4,n)})}},{key:"tryConnectBackup",value:function(){this.backupSocket_||(this.unbindAndCloseSocket(OS),this.log_.debug("try to connect to url: ".concat(this.backupUrlWithParam_)),this.backupSocket_=new WebSocket(this.backupUrlWithParam_),this.bindSocket(this.backupSocket_))}},{key:"bindSocket",value:function(e){e.onopen=this.onopen.bind(this),e.onclose=this.onclose.bind(this),e.onerror=this.onerror.bind(this),e.onmessage=this.onmessage.bind(this)}},{key:"unbindSocket",value:function(e){e.onopen=function(){},e.onclose=function(){},e.onerror=function(){},e.onmessage=function(){}}},{key:"unbindAndCloseSocket",value:function(e){if(e===OS){if(this.socket_){this.unbindSocket(this.socket_);try{this.socket_.close(1e3)}catch(e){}this.socket_=null}}else if(this.backupSocket_){this.unbindSocket(this.backupSocket_);try{this.backupSocket_.close(1e3)}catch(e){}this.backupSocket_=null}}},{key:"clearBackupTimer",value:function(){-1!==this.backupTimer_&&(clearTimeout(this.backupTimer_),this.backupTimer_=-1)}},{key:"clearReconnectionTimer",value:function(){-1!==this.reconnectionTimer_&&(clearTimeout(this.reconnectionTimer_),this.reconnectionTimer_=-1)}},{key:"onopen",value:function(e){if(!this.isConnected_){this.isConnected_=!0,this.isConnecting_=!1,this.isReconnecting_&&vt(this.signalInfo_)&&this.stopReconnection(),this.clearBackupTimer(),e.target===this.socket_?(this.unbindAndCloseSocket(LS),this.socketInUse_=this.socket_):(this.unbindAndCloseSocket(OS),this.socketInUse_=this.backupSocket_);var t=e.target.url;this.log_.info("websocket[".concat(t,"] is connected")),this.currentState_===dR?this.addSignalEvent(32791,"signal channel is connected"):this.currentState_===fR&&this.addSignalEvent(32795,"signal channel reconnect success"),this.emitConnectionStateChanged(pR),this.emitter_.emit(3)}}},{key:"onclose",value:function(e){var t=e.target.url,n=e.target===this.socketInUse_;this.log_.info("websocket[".concat(t," InUse: ").concat(n,"] is closed with code: ").concat(e.code)),e.target===this.socketInUse_&&(this.isConnected_=!1,this.emitConnectionStateChanged(uR),this.addSignalEvent(32790,"signal channel is disconnected"),e.wasClean&&1e3===e.code||(this.log_.warn("onclose code:".concat(e.code," reason:").concat(e.reason)),this.log_.warn("close current websocket and schedule a reconnect timeout"),this.socketInUse_.onclose=function(){},this.socketInUse_.close(4011),this.socket_=this.backupSocket_=this.socketInUse_=null,this.reconnect(OS)))}},{key:"onerror",value:function(e){var t=e.target.url;this.log_.error("websocket[".concat(t,"] error observed")),this.isConnected_?e.target===this.socketInUse_&&(this.isConnected_=!1,this.unbindAndCloseSocket(OS),this.unbindAndCloseSocket(LS),this.socketInUse_=null,this.reconnect(OS)):(this.isReconnecting_||CR.logFailedEvent({userId:this.client_.getUserId(),eventType:bC,code:bR.UNKNOWN}),e.target==this.socket_?(this.unbindAndCloseSocket(OS),this.reconnect(LS)):(this.unbindAndCloseSocket(LS),this.reconnect(OS))),this.isConnecting_=!1,this.isConnected_=!1}},{key:"onmessage",value:function(e){if(this.isConnected_){this.lastMessageTime_=Date.now();var t=JSON.parse(e.data),n=t.cmd,r=t.data,i=(0,f.default)(hR),o=(0,he.default)(hR)[i.indexOf(n)],a=mR[o];switch(gR.includes(n)||(this.log_.debug("received msg: ".concat(e.data)),this.log_.info("Received event: [ ".concat(a||"unknown cmd: "+n," ]"))),n){case hR.CHANNEL_SETUP_RESULT:if(0===t.code)this.signalInfo_.clientIp=r.clientIp,this.signalInfo_.signalIp=r.signalInnerIp,this.signalInfo_.tinyId=t.tinyId,r.svrTime&&function(e){Nb=e-(new Date).getTime();var t=new Date;t.setTime(e),aA.info("baseTime from server: "+t+" offset: "+Nb)}(r.svrTime),this.log_.info("ChannelSetup Success"),CR.logSuccessEvent({userId:this.userId_,eventType:bC}),this.emitter_.emit(1,{signalInfo:this.signalInfo_});else{var s=new _R({code:bR.SIGNAL_CHANNEL_SETUP_FAILED,extraCode:t.code,message:st({key:"SIGNAL_CHANNEL_SETUP_FAILED",data:{errorCode:t.code,errorMsg:t.message}})});this.log_.error("".concat(t.code,", ").concat(t.message)),this.close(),CR.logFailedEvent({userId:this.userId_,eventType:bC,error:s}),this.emitter_.emit(5,s)}break;case hR.JOIN_ROOM_RESULT:0===t.code&&(this.signalInfo_.relayIp=r.relayOuterIp,this.signalInfo_.relayInnerIp=r.relayInnerIp,this.signalInfo_.relayPort=r.relayPort,this.log_.info("signalIp:".concat(this.signalInfo_.signalIp," clientIp:").concat(this.signalInfo_.clientIp," relayIp: ").concat(this.signalInfo_.relayIp))),this.emitter_.emit(a,{data:t});break;case hR.CHANNEL_RECONNECT_RESULT:0===t.code?(this.log_.warn("reconnect success"),this.stopReconnection(),CR.logSuccessEvent({userId:this.userId_,eventType:_C}),this.client_.syncUserList(),this.client_.checkConnectionsToReconnect()):(this.log_.warn("reconnect failed, ".concat(t.code," ").concat(t.message)),this.client_.reJoin());break;default:this.emitter_.emit(a,{data:t})}}}},{key:"addSignalEvent",value:function(e,t){wR(this.userId_,{eventId:e,eventDesc:t,timestamp:Db(),userId:this.userId_,tinyId:this.signalInfo_.tinyId})}},{key:"reconnect",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:OS;if(this.isConnecting_||-1!==this.reconnectionTimer_)this.log_.info("signal channel is reconnecting, ignoring current reconnection");else{if(this.reconnectionCount_>=30){this.log_.warn("SDK has tried reconnect signal channel for ".concat(30," times, but all failed. please check your network"));var n=new _R({code:bR.SIGNAL_CHANNEL_RECONNECTION_FAILED,message:st({key:"SIGNAL_CHANNEL_RECONNECTION_FAILED"})});return CR.logFailedEvent({userId:this.client_.getUserId(),eventType:_C,error:n}),this.addSignalEvent(32796,"signal channel reconnect fail"),void this.emitter_.emit(4,n)}this.isConnecting_=!0,this.reconnectionCount_++,this.currentState_!==fR&&(this.emitConnectionStateChanged(fR),this.addSignalEvent(32794,"signal channel is reconnecting")),this.log_.warn("reconnecting to ".concat(t," signal channel [").concat(this.reconnectionCount_,"/").concat(30,"]"));var r=this.getReconnectionUrl(t);t===OS?(this.socket_=new WebSocket(r),this.bindSocket(this.socket_)):(this.backupSocket_=new WebSocket(r),this.bindSocket(this.backupSocket_));var i=ut(this.reconnectionCount_);this.reconnectionTimer_=setTimeout(function(){e.log_.warn("reconnect ".concat(t," signal channel timeout(").concat(i/1e3,"s), close and try again")),e.isConnecting_=!1,e.clearReconnectionTimer(),e.unbindAndCloseSocket(t),e.reconnect(t===OS?LS:OS)},i)}}},{key:"isConnected",value:function(){return this.isConnected_}},{key:"isReconnecting_",get:function(){return-1!==this.reconnectionTimer_}},{key:"getReconnectionUrl",value:function(e){var t=e===OS?this.urlWithParam_:this.backupUrlWithParam_;if(!vt(this.signalInfo_)&&-1===t.indexOf("&rc=1")){var n=this.client_.getRoomId(),r=this.client_.getUseStringRoomId();t+="&rc=1&relayInnerIp=".concat(this.signalInfo_.relayInnerIp,"&relayOuterIp=").concat(this.signalInfo_.relayIp,"&relayPort=").concat(this.signalInfo_.relayPort,"&roomId=").concat(n,"&useStringRoomId=").concat(r)}return t}},{key:"send",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.isConnected_){var n={cmd:e,data:t,userId:this.userId_,tinyId:this.signalInfo_.tinyId,seq:++this.seq_};return this.socketInUse_.send((0,I.default)(n)),n.seq}}},{key:"sendWaitForResponse",value:function(e){var t=this,n=e.command,r=e.data,i=e.timeout,o=void 0===i?5e3:i,a=e.responseCommand,s=e.commandDesc,l=e.enableLog,c=void 0===l||l;return new W.default(function(e,i){var l=setTimeout(function(){t.off(a,u);var e=new _R({code:bR.API_CALL_TIMEOUT,message:st({key:"API_CALL_TIMEOUT",data:{commandDesc:s,command:n}})});c&&t.log_.warn(e),i(e)},o),u=function n(r){r.data.seq===d&&(clearTimeout(l),t.off(a,n),e(r))};t.on(a,u);var d=t.send(n,r)})}},{key:"sendWaitForResponseWithRetry",value:function(){var e=this,t=arguments.length<=0?void 0:arguments[0],n=t.commandDesc,r=t.command,i=t.retries,o=void 0===i?0:i,a=t.retryTimeout,s=void 0===a?0:a;return mt({retryFunction:this.sendWaitForResponse,onRetrying:function(t){e.log_.warn("".concat(n||r," timeout observed, retrying [").concat(t,"/").concat(o,"]"))},settings:{retries:o,timeout:s},context:this}).apply(void 0,arguments)}},{key:"getCurrentState",value:function(){return this.currentState_}},{key:"getSignalInfo",value:function(){return this.signalInfo_}},{key:"stopReconnection",value:function(){this.isReconnecting_&&(this.reconnectionCount_=0,this.clearReconnectionTimer())}},{key:"close",value:function(){this.log_.info("close SignalChannel"),this.clearBackupTimer(),this.stopReconnection(),this.signalInfo_={},this.isConnecting_=!1,this.isConnected_=!1,this.socketInUse_=null,this.unbindAndCloseSocket(OS),this.unbindAndCloseSocket(LS),this.emitConnectionStateChanged(uR)}},{key:"on",value:function(e,t,n){this.emitter_.on(e,t,n)}},{key:"removeListener",value:function(e,t,n){this.emitter_.removeListener(e,t,n)}},{key:"once",value:function(e,t,n){this.emitter_.once(e,t,n)}},{key:"off",value:function(e,t,n){this.emitter_.off(e,t,n)}},{key:"emitConnectionStateChanged",value:function(e){e!==this.currentState_&&(this.emitter_.emit(2,{prevState:this.currentState_,state:e}),this.currentState_=e)}}]),e}(),ER=ds,IR=Mp.find,AR=cl,RR=!0;"find"in[]&&Array(1).find(function(){RR=!1}),ER({target:"Array",proto:!0,forced:RR},{find:function(e){return IR(this,e,arguments.length>1?arguments[1]:void 0)}}),AR("find");var OR={},LR={},PR={exports:{}},MR=PR.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t+=null!=e["network-id"]?" network-id %d":"%v",t+=null!=e["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(null!=e.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=null!=e.id?"id=%s %s":"%v%s",t+=null!=e.mediaClockValue?"=%s":"",t+=null!=e.rateNumerator?" rate=%s":"",t+=null!=e.rateDenominator?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};(0,he.default)(MR).forEach(function(e){MR[e].forEach(function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")})}),function(e){var t=function(e){return String(Number(e))===e?Number(e):e},n=function(e,n,r){var i=e.name&&e.names;e.push&&!n[e.push]?n[e.push]=[]:i&&!n[e.name]&&(n[e.name]={});var o=e.push?{}:i?n[e.name]:n;!function(e,n,r,i){if(i&&!r)n[i]=t(e[1]);else for(var o=0;o<r.length;o+=1)null!=e[o+1]&&(n[r[o]]=t(e[o+1]))}(r.match(e.reg),o,e.names,e.name),e.push&&n[e.push].push(o)},r=PR.exports,i=RegExp.prototype.test.bind(/^([a-z])=(.*)/);e.parse=function(e){var t={},o=[],a=t;return e.split(/(\r\n|\r|\n)/).filter(i).forEach(function(e){var t=e[0],i=e.slice(2);"m"===t&&(o.push({rtp:[],fmtp:[]}),a=o[o.length-1]);for(var s=0;s<(r[t]||[]).length;s+=1){var l=r[t][s];if(l.reg.test(i))return n(l,a,i)}}),t.media=o,t};var o=function(e,n){var r=n.split(/=(.+)/,2);return 2===r.length?e[r[0]]=t(r[1]):1===r.length&&n.length>1&&(e[r[0]]=void 0),e};e.parseParams=function(e){return e.split(/;\s?/).reduce(o,{})},e.parseFmtpConfig=e.parseParams,e.parsePayloads=function(e){return e.toString().split(" ").map(Number)},e.parseRemoteCandidates=function(e){for(var n=[],r=e.split(" ").map(t),i=0;i<r.length;i+=3)n.push({component:r[i],ip:r[i+1],port:r[i+2]});return n},e.parseImageAttributes=function(e){return e.split(" ").map(function(e){return e.substring(1,e.length-1).split(",").reduce(o,{})})},e.parseSimulcastStreamList=function(e){return e.split(";").map(function(e){return e.split(",").map(function(e){var n,r=!1;return"~"!==e[0]?n=t(e):(n=t(e.substring(1,e.length)),r=!0),{scid:n,paused:r}})})}}(LR);var $R=PR.exports,NR=/%[sdv%]/g,DR=function(e){var t=1,n=arguments,r=n.length;return e.replace(NR,function(e){if(t>=r)return e;var i=n[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(i);case"%d":return Number(i);case"%v":return""}})},FR=function(e,t,n){var r=[e+"="+(t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format)];if(t.names)for(var i=0;i<t.names.length;i+=1){var o=t.names[i];t.name?r.push(n[t.name][o]):r.push(n[t.names[i]])}else r.push(n[t.name]);return DR.apply(null,r)},qR=["v","o","s","i","u","e","p","c","b","t","r","z","a"],UR=["i","c","b","a"],BR=LR,jR=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach(function(e){null==e.payloads&&(e.payloads="")});var n=t.outerOrder||qR,r=t.innerOrder||UR,i=[];return n.forEach(function(t){$R[t].forEach(function(n){n.name in e&&null!=e[n.name]?i.push(FR(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach(function(e){i.push(FR(t,n,e))})})}),e.media.forEach(function(e){i.push(FR("m",$R.m[0],e)),r.forEach(function(t){$R[t].forEach(function(n){n.name in e&&null!=e[n.name]?i.push(FR(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach(function(e){i.push(FR(t,n,e))})})})}),i.join("\r\n")+"\r\n"};OR.write=jR,OR.parse=BR.parse,OR.parseParams=BR.parseParams,OR.parseFmtpConfig=BR.parseFmtpConfig,OR.parsePayloads=BR.parsePayloads,OR.parseRemoteCandidates=BR.parseRemoteCandidates,OR.parseImageAttributes=BR.parseImageAttributes,OR.parseSimulcastStreamList=BR.parseSimulcastStreamList;var VR,HR,YR,zR,GR=function(e){return OR.parse(e)},WR=function(e){return OR.write(e)},KR=function(e){var t=GR(e);return t.media.forEach(function(e){e.type===pS&&e.fmtp.forEach(function(e){e.config+=";sprop-stereo=1;stereo=1"})}),WR(t)},XR=ds,ZR=Hn,JR=ha,QR=N_,eO=Qh,tO=yn,nO=RangeError,rO=String,iO=Math.floor,oO=ZR(eO),aO=ZR("".slice),sO=ZR(1..toFixed),lO=function e(t,n,r){return 0===n?r:n%2==1?e(t,n-1,r*t):e(t*t,n/2,r)},cO=function(e,t,n){for(var r=-1,i=n;++r<6;)i+=t*e[r],e[r]=i%1e7,i=iO(i/1e7)},uO=function(e,t){for(var n=6,r=0;--n>=0;)r+=e[n],e[n]=iO(r/t),r=r%t*1e7},dO=function(e){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==e[t]){var r=rO(e[t]);n=""===n?r:n+oO("0",7-r.length)+r}return n};XR({target:"Number",proto:!0,forced:tO(function(){return"0.000"!==sO(8e-5,3)||"1"!==sO(.9,0)||"1.25"!==sO(1.255,2)||"1000000000000000128"!==sO(0xde0b6b3a7640080,0)})||!tO(function(){sO({})})},{toFixed:function(e){var t,n,r,i,o=QR(this),a=JR(e),s=[0,0,0,0,0,0],l="",c="0";if(a<0||a>20)throw nO("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return rO(o);if(o<0&&(l="-",o=-o),o>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(o*lO(2,69,1))-69)<0?o*lO(2,-t,1):o/lO(2,t,1),n*=4503599627370496,(t=52-t)>0){for(cO(s,0,n),r=a;r>=7;)cO(s,1e7,0),r-=7;for(cO(s,lO(10,r,1),0),r=t-1;r>=23;)uO(s,1<<23),r-=23;uO(s,1<<r),cO(s,1,1),uO(s,2),c=dO(s)}else cO(s,0,n),cO(s,1<<-t,0),c=dO(s)+oO("0",a);return c=a>0?l+((i=c.length)<=a?"0."+oO("0",a-i)+c:aO(c,0,i-a)+"."+aO(c,i-a)):l+c}});var fO=(null===(VR=window)||void 0===VR?void 0:VR.requestIdleCallback)||function(e){var t=Date.now();return setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})},1e3)},pO=(null===(HR=window)||void 0===HR?void 0:HR.cancelIdleCallback)||function(e){clearTimeout(e)},hO=(null===(YR=window)||void 0===YR?void 0:YR.cancelAnimationFrame)||(null===(zR=window)||void 0===zR?void 0:zR.mozCancelAnimationFrame),gO=function(){function e(){s(this,e)}return d(e,null,[{key:"generateTaskID",value:function(){return this.currentTaskID++}},{key:"run",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uT,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;r=t(t({},"interval"===e?{delay:2e3,count:0,backgroundTask:!0}:e===lT?{delay:1e4,count:0}:e===cT?{fps:60,delay:16.6,count:0,backgroundTask:!0}:{delay:2e3,count:0,backgroundTask:!0}),r),II(n)&&(r=t(t({},r),n)),kI(e)&&(n=e,e=uT);var i=t({taskID:this.generateTaskID(),loopCount:0,intervalID:null,timeoutID:null,rafID:null,ricID:null,taskName:e,callback:n},r);return this.taskMap.set(i.taskID,i),this[e](i),i.taskID}},{key:"interval",value:function(e){var t=this;return e.intervalID=setInterval(function(){e.callback(),e.loopCount+=1,t.isBreakLoop(e)},e.delay)}},{key:"timeout",value:function(e){var t=this;return e.timeoutID=setTimeout(function n(){if(e.callback(),e.loopCount+=1,!t.isBreakLoop(e))return e.timeoutID=setTimeout(n,e.delay)},e.delay)}},{key:"ric",value:function(e){var t,n=this,r=pt();return e.ricID=fO(function i(){if((t=pt()-r)>=e.delay&&(r=pt()-Math.floor(t%e.delay),e.callback(),e.loopCount+=1),!n.isBreakLoop(e))return e.ricID=fO(i,{timeout:e.delay})},{timeout:e.delay})}},{key:"raf",value:function(e){var t=this;e.delay=(1e3/e.fps).toFixed(2);var n,r=pt(),i=function i(){if(document.hidden&&e.backgroundTask){if(n=pt()-r,r=pt(),e.callback(),e.loopCount+=1,t.isBreakLoop(e))return;return e.timeoutID=setTimeout(i,e.delay-Math.floor(n%e.delay))}if((n=pt()-r)>=e.delay&&(r=pt()-Math.floor(n%e.delay),e.callback(),e.loopCount+=1),!t.isBreakLoop(e))return e.rafID=requestAnimationFrame(i)};if(e.rafID=requestAnimationFrame(i),e.backgroundTask){var o=function(){if(document.hidden){var t=pt()-r;t>=e.delay?i():e.timeoutID=setTimeout(i,e.delay-t)}};document.addEventListener("visibilitychange",o),e.onVisibilitychange=o,document.hidden&&o()}return e.taskID}},{key:"hasTask",value:function(e){return this.taskMap.has(e)}},{key:"clearTask",value:function(e){if(!this.taskMap.has(e))return!0;var t=this.taskMap.get(e),n=t.intervalID,r=t.timeoutID,i=t.rafID,o=t.ricID,a=t.onVisibilitychange;return n&&clearInterval(n),r&&clearTimeout(r),i&&hO(i),o&&pO(o),a&&document.removeEventListener("visibilitychange",a),this.taskMap.delete(e),!0}},{key:"isBreakLoop",value:function(e){return!this.taskMap.has(e.taskID)||0!==e.count&&e.loopCount>=e.count&&(this.clearTask(e.taskID),!0)}}]),e}();p(gO,"taskMap",new j.default),p(gO,"currentTaskID",1);var mO=function(){function e(){s(this,e),this.prefix_="TRTC",this.queue_=new j.default,this.checkStorage()}return d(e,[{key:"getRealKey",value:function(e){return"".concat(this.prefix_,"_").concat(e)}},{key:"checkStorage",value:function(){var e=this;if(gI()){(0,he.default)(localStorage).filter(function(t){if(t.startsWith(e.prefix_)){var n=JSON.parse(localStorage.getItem(t));if(n&&n.expiresIn<Date.now())return!0}return!1}).forEach(function(e){return localStorage.removeItem(e)})}}},{key:"doFlush",value:function(){if(gI())try{var e,t=V(this.queue_);try{for(t.s();!(e=t.n()).done;){var n=$(e.value,2),r=n[0],i=n[1];localStorage.setItem(r,(0,I.default)(i))}}catch(e){t.e(e)}finally{t.f()}}catch(e){aA.warn(e)}}},{key:"getItem",value:function(e){if(!gI())return null;try{var t=JSON.parse(localStorage.getItem(this.getRealKey(e)));return t&&t.expiresIn>=Date.now()?t.value:null}catch(e){aA.warn(e)}}},{key:"setItem",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(gI())try{var r={expiresIn:Date.now()+6048e5,value:t};n?localStorage.setItem(this.getRealKey(e),(0,I.default)(r)):(this.queue_.set(this.getRealKey(e),r),gO.hasTask(this.intervalId_)||(this.intervalId_=gO.run(lT,this.doFlush.bind(this),{count:1})))}catch(e){aA.warn(e)}}},{key:"deleteItem",value:function(e){if(!gI())return!1;try{return e=this.getRealKey(e),this.queue_.delete(e),localStorage.removeItem(e),!0}catch(e){return aA.warn(e),!1}}},{key:"clear",value:function(){if(gI())try{localStorage.clear()}catch(e){aA.warn(e)}}}]),e}(),vO=new mO,bO={result:!1,detail:{isBrowserSupported:!1,isWebRTCSupported:!1,isMediaDevicesSupported:!1,isH264EncodeSupported:!1,isVp8EncodeSupported:!1,isH264DecodeSupported:!1,isVp8DecodeSupported:!1}},_O="checkResult",yO=function(){return!(UE||hE||mE&&vE<80||fE&&pE<56)},wO=function(){return["RTCPeerConnection","webkitRTCPeerConnection","RTCIceGatherer"].filter(function(e){return e in window}).length>0},xO=function(){if(!navigator.mediaDevices)return!1;var e=["getUserMedia","enumerateDevices"];return e.filter(function(e){return e in navigator.mediaDevices}).length===e.length},kO=function(){var e=a(n().mark(function e(){var t,r,i,o,a,s;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!bO.detail.isH264EncodeSupported||!bO.detail.isVp8EncodeSupported){e.next=2;break}return e.abrupt("return",{isH264EncodeSupported:bO.detail.isH264EncodeSupported,isVp8EncodeSupported:bO.detail.isVp8EncodeSupported});case 2:return t="",r=!1,i=!1,e.prev=5,o=new RTCPeerConnection,(a=document.createElement(fS)).getContext("2d"),s=a.captureStream(0),o.addTrack(s.getVideoTracks()[0],s),e.next=13,o.createOffer();case 13:return-1!==(t=e.sent).sdp.toLowerCase().indexOf("h264")&&(r=!0),-1!==t.sdp.toLowerCase().indexOf("vp8")&&(i=!0),o.close(),bO.detail.isH264EncodeSupported=r,bO.detail.isVp8EncodeSupported=i,e.abrupt("return",{isH264EncodeSupported:bO.detail.isH264EncodeSupported,isVp8EncodeSupported:bO.detail.isVp8EncodeSupported});case 22:return e.prev=22,e.t0=e.catch(5),e.abrupt("return",{isH264EncodeSupported:!1,isVp8EncodeSupported:!1});case 25:case"end":return e.stop()}},e,null,[[5,22]])}));return function(){return e.apply(this,arguments)}}(),SO=function(){var e=a(n().mark(function e(){var t,r,i,o;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!bO.detail.isH264DecodeSupported||!bO.detail.isVp8DecodeSupported){e.next=2;break}return e.abrupt("return",{isH264DecodeSupported:bO.detail.isH264DecodeSupported,isVp8DecodeSupported:bO.detail.isVp8DecodeSupported});case 2:return t="",r=!1,i=!1,e.prev=5,o=new RTCPeerConnection,e.next=9,o.createOffer({offerToReceiveAudio:1,offerToReceiveVideo:1});case 9:return-1!==(t=e.sent).sdp.toLowerCase().indexOf("h264")&&(r=!0),-1!==t.sdp.toLowerCase().indexOf("vp8")&&(i=!0),o.close(),e.abrupt("return",{isH264DecodeSupported:r,isVp8DecodeSupported:i});case 16:return e.prev=16,e.t0=e.catch(5),e.abrupt("return",{isH264DecodeSupported:!1,isVp8DecodeSupported:!1});case 19:case"end":return e.stop()}},e,null,[[5,16]])}));return function(){return e.apply(this,arguments)}}(),CO=function(){var e=a(n().mark(function e(){var t,r,i,o,a,s,l,c,u,d,f,p,h;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(wt()){e.next=2;break}return e.abrupt("return",bO);case 2:return t=yO(),r=wO(),i=xO(),e.next=7,kO();case 7:return o=e.sent,a=o.isH264EncodeSupported,s=o.isVp8EncodeSupported,e.next=12,SO();case 12:if(l=e.sent,c=l.isH264DecodeSupported,u=l.isVp8DecodeSupported,a&&s){e.next=21;break}return e.next=18,kO();case 18:d=e.sent,a=d.isH264EncodeSupported,s=d.isVp8EncodeSupported;case 21:if(!(a&&c&&(JE||eI||cI)&&!xE&&nI()<79)){e.next=29;break}return e.next=24,_t();case 24:f=e.sent,p=f.encode,h=f.decode,a=p,c=h;case 29:return bO.result=t&&r&&i&&(a||s)&&(c||u),bO.detail.isBrowserSupported=t,bO.detail.isWebRTCSupported=r,bO.detail.isMediaDevicesSupported=i,bO.detail.isH264EncodeSupported=a,bO.detail.isVp8EncodeSupported=s,bO.detail.isH264DecodeSupported=c,bO.detail.isVp8DecodeSupported=u,xt(),vO.setItem(_O,{ua:navigator.userAgent,checkResult:bO},!0),e.abrupt("return",bO);case 40:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),TO=function(e,t){var n=null;return function(){if(n)return n;for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(n=e.apply(this,r)).then(function(e){return n=null,e}).catch(function(e){throw n=null,e}),n}}(CO),EO="RTCRtpSender"in window&&"createEncodedStreams"in window.RTCRtpSender.prototype&&nI()>=86,IO=new j.default([[dE,"Android"],[uE,"iOS"],[DE,"Windows"],[FE,"MacOS"],[qE,"Linux"]]),AO=window.MediaStreamTrack&&"getSettings"in MediaStreamTrack.prototype,RO=window.MediaStreamTrack&&"getCapabilities"in MediaStreamTrack.prototype,OO=function(){var e,t,n;return(null===(e=window)||void 0===e?void 0:e.OffscreenCanvas)&&(null===(t=window)||void 0===t?void 0:t.MediaStreamTrackProcessor)&&(null===(n=window)||void 0===n?void 0:n.MediaStreamTrackGenerator)};!function(){Ot();var e=vO.getItem(_O);e&&e.ua===navigator.userAgent&&(bO=e.checkResult),TO()}();var LO={STREAM_ADDED:"stream-added",STREAM_REMOVED:"stream-removed",STREAM_UPDATED:"stream-updated",STREAM_PUBLISHED:"stream-published",STREAM_SUBSCRIBED:"stream-subscribed",STREAM_UNSUBSCRIBED:"stream-unsubscribed",STATE_CHANGED:"state-changed",ERROR:"error",CONNECTION_STATE_CHANGED:"connection-state-changed",SEI_MESSAGE:PS},PO={STREAM_ADDED:"stream-added",STREAM_REMOVED:"stream-removed",STREAM_UPDATED:"stream-updated",STREAM_SUBSCRIBED:"stream-subscribed",CONNECTION_STATE_CHANGED:"connection-state-changed",PEER_JOIN:"peer-join",PEER_LEAVE:"peer-leave",MUTE_AUDIO:"mute-audio",MUTE_VIDEO:"mute-video",UNMUTE_AUDIO:"unmute-audio",UNMUTE_VIDEO:"unmute-video",CLIENT_BANNED:"client-banned",NETWORK_QUALITY:"network-quality",AUDIO_VOLUME:"audio-volume",SEI_MESSAGE:PS,ERROR:"error"},MO="player-state-changed",$O="error",NO="player-state-changed",DO=vT;ds({target:"String",proto:!0,forced:_T("small")},{small:function(){return DO(this,"small","","")}});var FO,qO=function(){function e(t){s(this,e);var n=t.getUserId();this.log_=aA.createLogger({id:n,userId:n,sdkAppId:t.getSDKAppId()}),this.prevReportTime_=0,this.prevReport_={},this.prevEncoderImplementation_="",this.prevQualityLimitationReason_="",this.prevDecoderImplementationMap_=new j.default}var t,r,i,o;return d(e,[{key:"statInterval",get:function(){return 0===this.prevReportTime_?2:(Date.now()-this.prevReportTime_)/1e3}},{key:"getSenderStats",value:(o=a(n().mark(function e(t){var r,i,o,a,s=this;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r={audio:{bytesSent:0,packetsSent:0,audioLevel:0,totalAudioEnergy:0},video:{bytesSent:0,packetsSent:0,framesEncoded:0,frameWidth:0,frameHeight:0,framesSent:0,fpsCapture:0},small:{bytesSent:0,packetsSent:0,framesEncoded:0,frameWidth:0,frameHeight:0,framesSent:0,fpsCapture:0},auxiliary:{bytesSent:0,packetsSent:0,framesEncoded:0,frameWidth:0,frameHeight:0,framesSent:0,fpsCapture:0},rtt:0},i=t.getPeerConnection(),o=t.getSSRC(),!i){e.next=15;break}return e.prev=4,e.next=7,i.getStats();case 7:e.sent.forEach(function(e){if("outbound-rtp"===e.type)if(e.mediaType===hS){if(!fE&&0===e.bytesSent)return;e.ssrc!==o.video||SI(e.encoderImplementation)||s.prevEncoderImplementation_===e.encoderImplementation||(s.log_.info("encoderImplementation change to ".concat(e.encoderImplementation)),s.prevEncoderImplementation_=e.encoderImplementation),e.ssrc!==o.video||SI(e.qualityLimitationReason)||s.prevQualityLimitationReason_===e.qualityLimitationReason||(s.log_.info("qualityLimitationReason change to ".concat(e.qualityLimitationReason)),s.prevQualityLimitationReason_=e.qualityLimitationReason);var n=hS;e.ssrc===o.small?n=mS:e.ssrc===o.auxiliary&&(n=bS),r[n].bytesSent=e.bytesSent,r[n].packetsSent=e.packetsSent,r[n].framesEncoded=e.framesEncoded}else e.mediaType===pS&&(r.audio.bytesSent=e.bytesSent,r.audio.packetsSent=e.packetsSent);else"candidate-pair"===e.type?Lt(e)&&TI(e.currentRoundTripTime)&&(r.rtt=Math.floor(1e3*e.currentRoundTripTime)):"media-source"===e.type&&(e.kind===pS?(r.audio.audioLevel=e.audioLevel||0,r.audio.totalAudioEnergy=e.totalAudioEnergy||0):e.kind===hS&&(e.trackIdentifier===t.getVideoTrackId(hS)?r.video.fpsCapture=e.framesPerSecond:e.trackIdentifier===t.getVideoTrackId(bS)?r.auxiliary.fpsCapture=e.framesPerSecond:r.small.fpsCapture=e.framesPerSecond));var i;SI(e.audioLevel)||(r.audio.audioLevel=e.audioLevel||0,r.audio.totalAudioEnergy=e.totalAudioEnergy||0),SI(e.frameWidth)||(e.trackIdentifier===t.getVideoTrackId(hS)||e.ssrc===o.video?i=hS:e.trackIdentifier===t.getVideoTrackId(bS)||e.ssrc===o.auxiliary?i=bS:e.trackIdentifier!==t.getVideoTrackId(mS)&&e.ssrc!==o.small||(i=mS),i&&(r[i].frameWidth=e.frameWidth,r[i].frameHeight=e.frameHeight,r[i].framesSent=e.framesSent))}),0===r.audio.audioLevel&&(r.audio.audioLevel=(null===(a=t.getLocalStream())||void 0===a?void 0:a.getInternalAudioLevel())||0),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),this.log_.warn("failed to getStats on sender connection "+e.t0);case 15:return e.abrupt("return",r);case 16:case"end":return e.stop()}},e,this,[[4,12]])})),function(e){return o.apply(this,arguments)})},{key:"getReceiverStats",value:(i=a(n().mark(function e(t){var r,i,o,a,s,l=this;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r={tinyId:t.getTinyId(),userId:t.getUserId(),rtt:0,hasAudio:!1,hasVideo:!1,hasAuxiliary:!1,audio:{bytesReceived:0,packetsReceived:0,packetsLost:0,jitter:0,audioLevel:0,totalAudioEnergy:0},video:{bytesReceived:0,packetsReceived:0,packetsLost:0,framesReceived:0,framesDecoded:0,frameWidth:0,frameHeight:0},auxiliary:{bytesReceived:0,packetsReceived:0,packetsLost:0,framesReceived:0,framesDecoded:0,frameWidth:0,frameHeight:0}},!(i=t.getPeerConnection())){e.next=16;break}return e.prev=3,o=t.getSSRC(),a=t.getTrackState(),e.next=8,i.getStats();case 8:e.sent.forEach(function(e){if("inbound-rtp"===e.type){if(e.mediaType===pS&&e.ssrc===o.audio&&a.audio)r.audio.packetsReceived=e.packetsReceived,r.audio.bytesReceived=e.bytesReceived,r.audio.packetsLost=e.packetsLost,r.audio.jitter=e.jitter,r.hasAudio=!0;else if(e.mediaType===hS){if(fE&&0===e.bytesReceived)return;e.ssrc===o.video&&a.video&&(r.video.packetsReceived=e.packetsReceived,r.video.bytesReceived=e.bytesReceived,r.video.packetsLost=e.packetsLost,r.video.framesReceived=e.framesReceived,r.video.framesDecoded=e.framesDecoded,r.video.fpsDecoded=e.framesPerSecond,r.hasVideo=!0,!e.decoderImplementation||l.prevDecoderImplementationMap_.has(r.userId)&&l.prevDecoderImplementationMap_.get(r.userId)===e.decoderImplementation||(l.log_.info("".concat(r.userId," decoderImplementation change to ").concat(e.decoderImplementation)),l.prevDecoderImplementationMap_.set(r.userId,e.decoderImplementation))),e.ssrc===o.auxiliary&&a.auxiliary&&(r.auxiliary.packetsReceived=e.packetsReceived,r.auxiliary.bytesReceived=e.bytesReceived,r.auxiliary.packetsLost=e.packetsLost,r.auxiliary.framesReceived=e.framesReceived,r.auxiliary.framesDecoded=e.framesDecoded,r.auxiliary.fpsDecoded=e.framesPerSecond,r.hasAuxiliary=!0)}}else"candidate-pair"===e.type&&Lt(e)&&TI(e.currentRoundTripTime)&&(r.rtt=Math.floor(1e3*e.currentRoundTripTime));SI(e.frameWidth)||(e.trackIdentifier!==t.getMainStreamVideoTrackId()&&e.ssrc!==o.video||(r.video.frameWidth=e.frameWidth,r.video.frameHeight=e.frameHeight),e.trackIdentifier!==t.getAuxStreamVideoTrackId()&&e.ssrc!==o.auxiliary||(r.auxiliary.frameWidth=e.frameWidth,r.auxiliary.frameHeight=e.frameHeight)),SI(e.audioLevel)||(r.audio.audioLevel=e.audioLevel||0,r.audio.totalAudioEnergy=e.totalAudioEnergy||0)}),0===r.audio.audioLevel&&(r.audio.audioLevel=(null===(s=t.getMainStream())||void 0===s?void 0:s.getInternalAudioLevel())||0),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),this.log_.warn("failed to getStats on receiver connection "+e.t0);case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}},e,this,[[3,13]])})),function(e){return i.apply(this,arguments)})},{key:"getStats",value:(r=a(n().mark(function e(t,r){var i,o,a,s,l,c,u;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i={},!t){e.next=5;break}return e.next=4,this.getSenderStats(t);case 4:i=e.sent;case 5:o=[],a=V(r),e.prev=7,a.s();case 9:if((s=a.n()).done){e.next=17;break}return(l=$(s.value,2))[0],c=l[1],e.next=13,this.getReceiverStats(c);case 13:u=e.sent,o.push(u);case 15:e.next=9;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(7),a.e(e.t0);case 22:return e.prev=22,a.f(),e.finish(22);case 25:return e.abrupt("return",{senderStats:i,receiverStats:o});case 26:case"end":return e.stop()}},e,this,[[7,19,22,25]])})),function(e,t){return r.apply(this,arguments)})},{key:"getDifferenceValue",value:function(e,t){if(vt(e))return t;var n=t-e;return n<0?0:n}},{key:"prepareReport",value:function(e){var t=this,n=e.stats,r=e.report,i=e.freezeMap;if(!vt(n.senderStats)){var o;o={uint32_audio_level:1e8*n.senderStats.audio.audioLevel,uint32_audio_energy:1e6*n.senderStats.audio.totalAudioEnergy,uint32_audio_codec_bitrate:n.senderStats.audio.bytesSent,audioLevel:n.senderStats.audio.audioLevel};var a=[],s={uint32_video_stream_type:2,uint32_video_codec_fps:n.senderStats.video.framesSent,uint32_video_capture_fps:n.senderStats.video.fpsCapture,uint32_video_width:n.senderStats.video.frameWidth,uint32_video_height:n.senderStats.video.frameHeight,uint32_video_codec_bitrate:n.senderStats.video.bytesSent,uint32_video_enc_fps:n.senderStats.video.framesEncoded};if(a.push(s),n.senderStats.small.bytesSent){var l={uint32_video_stream_type:3,uint32_video_codec_fps:n.senderStats.small.framesSent||0,uint32_video_capture_fps:n.senderStats.small.fpsCapture||0,uint32_video_width:n.senderStats.small.frameWidth||0,uint32_video_height:n.senderStats.small.frameHeight||0,uint32_video_codec_bitrate:n.senderStats.small.bytesSent,uint32_video_enc_fps:n.senderStats.small.framesEncoded||0};a.push(l)}if(n.senderStats.auxiliary.bytesSent){var c={uint32_video_stream_type:7,uint32_video_codec_fps:n.senderStats.auxiliary.framesSent||0,uint32_video_capture_fps:n.senderStats.auxiliary.fpsCapture||0,uint32_video_width:n.senderStats.auxiliary.frameWidth||0,uint32_video_height:n.senderStats.auxiliary.frameHeight||0,uint32_video_codec_bitrate:n.senderStats.auxiliary.bytesSent,uint32_video_enc_fps:n.senderStats.auxiliary.framesEncoded||0};a.push(c)}var u={uint32_bitrate:0,uint32_rtt:n.senderStats.rtt};r.msg_up_stream_info={msg_audio_status:o,msg_video_status:a,msg_network_status:u}}var d=this.statInterval;r.msg_down_stream_info=[],n.receiverStats.forEach(function(e){var t={};if(t.msg_user_info={str_identifier:e.userId,uint64_tinyid:e.tinyId},t.msg_network_status={uint32_rtt:e.rtt},t.msg_video_status={},e.hasAudio){var n={uint32_audio_codec_bitrate:e.audio.bytesReceived,uint32_audio_total_bitrate:e.audio.bytesReceived,uint32_audio_level:1e8*e.audio.audioLevel,uint32_audio_energy:1e6*e.audio.totalAudioEnergy,uint32_audio_receive:e.audio.packetsReceived,uint32_audio_origin_lost:e.audio.packetsLost,audioLevel:e.audio.audioLevel};t.msg_audio_status=n}if(t.msg_video_status=[],e.hasVideo){var o=i.get(e.userId+"_"+XS),a=o?o.duration:0,s={uint32_video_stream_type:2,uint32_video_receive_fps:e.video.framesReceived,uint32_video_width:e.video.frameWidth,uint32_video_height:e.video.frameHeight,uint32_video_codec_bitrate:e.video.bytesReceived,uint32_video_receive:e.video.packetsReceived,uint32_video_origin_lost:e.video.packetsLost,uint32_video_block_time:a,uint32_video_dec_fps:e.video.framesDecoded};t.msg_video_status.push(s)}if(e.hasAuxiliary){var l=i.get(e.userId+"_"+ZS),c=l?l.duration:0,u={uint32_video_stream_type:7,uint32_video_receive_fps:e.auxiliary.framesReceived,uint32_video_width:e.auxiliary.frameWidth,uint32_video_height:e.auxiliary.frameHeight,uint32_video_codec_bitrate:e.auxiliary.bytesReceived,uint32_video_receive:e.auxiliary.packetsReceived+e.auxiliary.packetsLost,uint32_video_origin_lost:e.auxiliary.packetsLost,uint32_video_block_time:c,uint32_video_dec_fps:e.auxiliary.framesDecoded};t.msg_video_status.push(u)}r.msg_down_stream_info.push(t)});var f=this.prevReport_;if(this.prevReport_=JSON.parse((0,I.default)(r)),r.msg_up_stream_info.msg_audio_status&&f.msg_up_stream_info.msg_audio_status){var p=f.msg_up_stream_info.msg_audio_status,h=r.msg_up_stream_info.msg_audio_status,g=this.getDifferenceValue(p.uint32_audio_codec_bitrate,h.uint32_audio_codec_bitrate);h.uint32_audio_codec_bitrate=Math.round(8*g/d),r.msg_up_stream_info.msg_network_status.uint32_bitrate+=h.uint32_audio_codec_bitrate}var m=f.msg_up_stream_info.msg_video_status;r.msg_up_stream_info.msg_video_status.forEach(function(e){var n=m.find(function(t){return t.uint32_video_stream_type===e.uint32_video_stream_type});if(!n||0===n.uint32_video_codec_bitrate)return e.uint32_video_codec_bitrate=0,e.uint32_video_enc_fps=0,void(e.uint32_video_codec_fps=0);var i=n.uint32_video_codec_bitrate,o=n.uint32_video_enc_fps,a=n.uint32_video_codec_fps,s=t.getDifferenceValue(i,e.uint32_video_codec_bitrate);e.uint32_video_codec_bitrate=Math.round(8*s/d),r.msg_up_stream_info.msg_network_status.uint32_bitrate+=e.uint32_video_codec_bitrate,e.uint32_video_enc_fps=Math.round(t.getDifferenceValue(o,e.uint32_video_enc_fps)/d),e.uint32_video_codec_fps=Math.round(t.getDifferenceValue(a,e.uint32_video_codec_fps)/d)});var v=r.msg_down_stream_info,b=f.msg_down_stream_info;return v.forEach(function(e){var n=b.find(function(t){return t.msg_user_info.uint64_tinyid===e.msg_user_info.uint64_tinyid});if(n){if(e.msg_audio_status&&n.msg_audio_status){var r=e.msg_audio_status,i=n.msg_audio_status;r.uint32_audio_origin_lost=t.getDifferenceValue(i.uint32_audio_origin_lost,r.uint32_audio_origin_lost),r.uint32_audio_receive=t.getDifferenceValue(i.uint32_audio_receive,r.uint32_audio_receive),r.uint32_audio_receive+=r.uint32_audio_origin_lost;var o=t.getDifferenceValue(i.uint32_audio_codec_bitrate,r.uint32_audio_codec_bitrate);r.uint32_audio_codec_bitrate=Math.round(8*o/d),r.uint32_audio_total_bitrate=Math.round(8*o/d)}if(e.msg_video_status&&n.msg_video_status){var a=e.msg_video_status,s=n.msg_video_status;a.forEach(function(e){var n=s.find(function(t){return t.uint32_video_stream_type===e.uint32_video_stream_type});if(!n)return e.uint32_video_receive=0,e.uint32_video_origin_lost=0,e.uint32_video_codec_bitrate=0,e.uint32_video_receive_fps=0,void(e.uint32_video_dec_fps=0);var r=n.uint32_video_receive,i=n.uint32_video_origin_lost,o=n.uint32_video_codec_bitrate,a=n.uint32_video_receive_fps,l=n.uint32_video_dec_fps;e.uint32_video_origin_lost=t.getDifferenceValue(i,e.uint32_video_origin_lost),e.uint32_video_receive=t.getDifferenceValue(r,e.uint32_video_receive)+e.uint32_video_origin_lost;var c=t.getDifferenceValue(o,e.uint32_video_codec_bitrate);e.uint32_video_codec_bitrate=Math.round(8*c/d);var u=t.getDifferenceValue(a,e.uint32_video_receive_fps);e.uint32_video_receive_fps=Math.round(u/d),e.uint32_video_dec_fps=Math.round(t.getDifferenceValue(l,e.uint32_video_dec_fps)/d)})}}}),r}},{key:"getStatsReport",value:(t=a(n().mark(function e(t){var r,i,o,a,s;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.uplinkConnection,i=t.downlinkConnections,o=t.freezeMap,a={msg_up_stream_info:{msg_audio_status:{uint32_audio_format:0,uint32_audio_sample_rate:0,uint32_audio_codec_bitrate:0,uint32_audio_receive:0,uint32_audio_origin_lost:0,uint32_audio_level:0,uint32_audio_energy:0,audioLevel:0},msg_video_status:[{uint32_video_stream_type:0,uint32_video_codec_fps:0,uint32_video_capture_fps:0,uint32_video_width:0,uint32_video_height:0,uint32_video_codec_bitrate:0,uint32_video_receive:0,uint32_video_origin_lost:0,uint32_video_final_lost:0,uint32_video_enc_fps:0}],msg_network_status:{uint32_bitrate:0,uint32_rtt:0,uint32_lost:0}},msg_down_stream_info:[{msg_user_info:{str_identifier:"",uint64_tinyid:""},msg_audio_status:{uint32_audio_format:0,uint32_audio_sample_rate:0,uint32_audio_codec_bitrate:0,uint32_audio_total_bitrate:0,uint32_audio_level:0,uint32_audio_energy:0,uint32_audio_receive:0,uint32_audio_origin_lost:0,uint32_audio_final_lost:0,audioLevel:0},msg_video_status:[{uint32_video_stream_type:0,uint32_video_receive_fps:0,uint32_video_width:0,uint32_video_height:0,uint32_video_codec_bitrate:0,uint32_video_receive:0,uint32_video_origin_lost:0,uint32_video_block_time:0,uint32_video_dec_fps:0}],msg_network_status:{uint32_bitrate:0,uint32_rtt:0,uint32_lost:0,uint32_jitter:0}}]},e.next=4,this.getStats(r,i);case 4:return s=e.sent,"{}"===(0,I.default)(this.prevReport_)&&(this.prevReport_=JSON.parse((0,I.default)(a))),this.prepareReport({stats:s,report:a,freezeMap:o,uplinkConnection:r,downlinkConnections:i}),this.prevReportTime_=Date.now(),e.abrupt("return",a);case 9:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"reset",value:function(){this.prevReportTime_=0,this.prevReport_={},this.prevEncoderImplementation_="",this.prevQualityLimitationReason_="",this.prevDecoderImplementationMap_=new j.default}}]),e}(),UO=function(){function e(t){var n=t.signalChannel,r=t.connections,i=t.client;s(this,e),this.client_=i,this.signalChannel_=n,this.connections_=r,this.client_=i,this.log_=aA.createLogger({id:"q|"+this.client_.getUserId(),userId:this.client_.getUserId(),sdkAppId:this.client_.getSDKAppId()}),this.uplinkConnection_=null,this.uplinkNetworkQuality_=0,this.uplinkRTT_=0,this.uplinkLoss_=0,this.downlinkNetworkQuality_=0,this.downlinkRTT_=0,this.downlinkLoss_=0,this.downlinkPrevStatMap_=new j.default,this.downlinkLossAndRTTMap_=new j.default,this.interval_=-1,this.emitter_=new UI,this.initialize()}var t,r;return d(e,[{key:"uplinkNetworkQuality",get:function(){return this.uplinkNetworkQuality_},set:function(e){e!==this.uplinkNetworkQuality_&&this.log_.info("uplink network quality change ".concat(this.uplinkNetworkQuality," -> ").concat(e,", rtt: ").concat(this.uplinkRTT_,", loss: ").concat(this.uplinkLoss_)),this.uplinkNetworkQuality_=e}},{key:"downlinkNetworkQuality",get:function(){return this.downlinkNetworkQuality_},set:function(e){if(e!==this.downlinkNetworkQuality_){var t=this.getAverageLossAndRTT(D(this.downlinkLossAndRTTMap_.values())),n=t.rtt,r=t.loss;this.log_.info("downlink network quality change ".concat(this.downlinkNetworkQuality," -> ").concat(e,", rtt: ").concat(n,", loss: ").concat(r))}this.downlinkNetworkQuality_=e}},{key:"initialize",value:function(){var e=this;this.signalChannel_.on(mR.UPLINK_NETWORK_STATS,function(t){e.handleUplinkNetworkQuality(t)}),this.signalChannel_.on(2,this.handleSignalConnectionStateChange.bind(this)),this.start()}},{key:"handleUplinkNetworkQuality",value:function(e){if(!this.uplinkConnection_)return this.uplinkNetworkQuality=0,this.uplinkLoss_=0,void(this.uplinkRTT_=0);var t=this.uplinkConnection_.getPeerConnection();if(t&&this.isPeerConnectionDisconnected(t))return this.uplinkNetworkQuality=6,this.uplinkLoss_=0,void(this.uplinkRTT_=0);if(0===e.data.code){var n=e.data.data,r=n.expectAudPkg+n.expectVidPkg,i=n.recvAudPkg+n.recvVidPkg,o=r-i,a=n.delay;if(a&&this.updateDelay(a),0===r&&0===i)return;this.uplinkLoss_=o<=0?0:Math.round(o/r*100),this.uplinkRTT_=n.rtt,this.uplinkNetworkQuality=this.getNetworkQuality(this.uplinkLoss_,this.uplinkRTT_)}}},{key:"handleDownlinkNetworkQuality",value:(r=a(n().mark(function e(){var t,r,i,o,a,s,l,c,u,d,f,p,h,g,m,v=this;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connections_&&0!==this.connections_.size){e.next=3;break}return this.downlinkNetworkQuality=0,e.abrupt("return");case 3:if(t=D(this.connections_.values()),r=t.filter(function(e){return e.getPeerConnection()&&e.getPeerConnection().connectionState===oC}),t.filter(function(e){return e.getPeerConnection()&&v.isPeerConnectionDisconnected(e.getPeerConnection())}).length!==t.length){e.next=9;break}return this.downlinkNetworkQuality=6,e.abrupt("return");case 9:i=0;case 10:if(!(i<r.length)){e.next=31;break}return o=r[i].getPeerConnection(),e.next=14,this.getStat(o);case 14:if(a=e.sent,s=a.rtt,l=a.totalPacketsLost,c=a.totalPacketsReceived,this.downlinkPrevStatMap_.has(o)){e.next=21;break}return this.downlinkPrevStatMap_.set(o,{totalPacketsLost:l,totalPacketsReceived:c}),e.abrupt("continue",28);case 21:u=0,d=this.downlinkPrevStatMap_.get(o),f=l-d.totalPacketsLost,p=c-d.totalPacketsReceived,u=f<=0||p<0?0:Math.round(f/(f+p)*100),this.downlinkPrevStatMap_.set(o,{totalPacketsLost:l,totalPacketsReceived:c}),this.downlinkLossAndRTTMap_.set(o,{rtt:s,loss:u,userId:r[i].getUserId()});case 28:i++,e.next=10;break;case 31:if(D(this.downlinkPrevStatMap_.keys()).forEach(function(e){v.isPeerConnectionDisconnected(e)&&(v.downlinkPrevStatMap_.delete(e),v.downlinkLossAndRTTMap_.delete(e))}),0!==this.downlinkLossAndRTTMap_.size){e.next=34;break}return e.abrupt("return");case 34:h=this.getAverageLossAndRTT(D(this.downlinkLossAndRTTMap_.values())),g=h.rtt,m=h.loss,this.downlinkRTT_=g,this.downlinkLoss_=m,this.downlinkNetworkQuality=this.getNetworkQuality(m,g);case 38:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"getStat",value:(t=a(n().mark(function e(t){var r,i,o,a;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r={rtt:0,totalPacketsLost:0,totalPacketsReceived:0},t&&St()){e.next=3;break}return e.abrupt("return",r);case 3:i=t.getReceivers(),e.prev=4,o=0;case 6:if(!(o<i.length)){e.next=15;break}return a=i[o],e.next=10,a.getStats();case 10:e.sent.forEach(function(e){"candidate-pair"===e.type&&TI(e.currentRoundTripTime)&&(r.rtt=Math.round(1e3*e.currentRoundTripTime)),"inbound-rtp"!==e.type||e.mediaType!==pS&&e.mediaType!==hS||(r.totalPacketsLost+=e.packetsLost,r.totalPacketsReceived+=e.packetsReceived)});case 12:o++,e.next=6;break;case 15:return e.abrupt("return",r);case 18:return e.prev=18,e.t0=e.catch(4),e.abrupt("return",r);case 21:case"end":return e.stop()}},e,null,[[4,18]])})),function(e){return t.apply(this,arguments)})},{key:"getAverageLossAndRTT",value:function(e){var t={rtt:0,loss:0};return Array.isArray(e)&&e.length>0&&(e.forEach(function(e){t.rtt+=e.rtt,t.loss+=e.loss}),(0,he.default)(t).forEach(function(n){t[n]=Math.round(t[n]/e.length)})),t}},{key:"getNetworkQuality",value:function(e,t){return e>50||t>500?5:e>30||t>350?4:e>20||t>200?3:e>10||t>100?2:e>=0||t>=0?1:0}},{key:"handleSignalConnectionStateChange",value:function(e){e.state===uR?(this.uplinkRTT_=0,this.uplinkLoss_=0,this.uplinkNetworkQuality=6):e.state===pR&&6===this.uplinkNetworkQuality&&(this.uplinkNetworkQuality=5)}},{key:"handleUplinkConnectionStateChange",value:function(e){var t=e.state;t===QS?(this.uplinkLoss_=0,this.uplinkRTT_=0,this.uplinkNetworkQuality=6):t===nC&&6===this.uplinkNetworkQuality&&(this.uplinkNetworkQuality=5)}},{key:"isPeerConnectionDisconnected",value:function(e){return!(!e||"disconnected"!==e.connectionState&&"failed"!==e.connectionState&&e.connectionState!==iC)}},{key:"setUplinkConnection",value:function(e){this.uplinkConnection_=e,this.uplinkConnection_?this.uplinkConnection_.on(LO.CONNECTION_STATE_CHANGED,this.handleUplinkConnectionStateChange.bind(this)):(this.uplinkNetworkQuality=0,this.uplinkRTT_=0,this.uplinkLoss_=0)}},{key:"start",value:function(){var e=this;-1===this.interval_?(this.log_.info("start network quality calculating"),this.interval_=gO.run(lT,function(){e.handleDownlinkNetworkQuality(),BI.emit(300,{client:e.client_,uplinkNetworkQuality:e.uplinkNetworkQuality,downlinkNetworkQuality:e.downlinkNetworkQuality,uplinkRTT:e.uplinkRTT_,uplinkLoss:e.uplinkLoss_,downlinkRTT:e.downlinkRTT_,downlinkLoss:e.downlinkLoss_,downlinkLossAndRTTMap:e.downlinkLossAndRTTMap_}),e.emitter_.emit(PO.NETWORK_QUALITY,{uplinkNetworkQuality:e.uplinkNetworkQuality,downlinkNetworkQuality:e.downlinkNetworkQuality,uplinkRTT:e.uplinkRTT_,uplinkLoss:e.uplinkLoss_,downlinkRTT:e.downlinkRTT_,downlinkLoss:e.downlinkLoss_})},{delay:2e3})):this.log_.info("network quality calculating is already started")}},{key:"stop",value:function(){this.log_.info("stop network quality calculating"),-1!==this.interval_&&(gO.clearTask(this.interval_),this.interval_=-1),this.downlinkLossAndRTTMap_.clear(),this.downlinkPrevStatMap_.clear()}},{key:"on",value:function(e,t){this.emitter_.on(e,t)}},{key:"updateDelay",value:function(e){var t=this;e.forEach(function(e){var n=e.srcTinyId,r=e.videoDelay,i=e.audioDelay,o=t.connections_.get(n);o&&o.setDelay({videoDelay:r,audioDelay:i})})}}]),e}(),BO=function(){function e(t){s(this,e),this.log_=aA.createLogger({id:t.client.getUserId(),userId:t.client.getUserId(),sdkAppId:t.client.getSDKAppId()}),this.localStream_=null,this.prevDevices_=[],this.initialize()}var t,r;return d(e,[{key:"initialize",value:function(){navigator.mediaDevices&&(this.onDeviceChange=this.onDeviceChange.bind(this),navigator.mediaDevices.addEventListener("devicechange",this.onDeviceChange))}},{key:"destroy",value:function(){navigator.mediaDevices&&navigator.mediaDevices.removeEventListener("devicechange",this.onDeviceChange)}},{key:"onDeviceChange",value:(r=a(n().mark(function e(){var t,r,i,o=this;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.localStream_&&this.localStream_.getMediaStream()&&!this.localStream_.getScreen()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Bt();case 4:t=e.sent,r=t.filter(function(e){return o.prevDevices_.findIndex(function(t){var n=t.deviceId;return e.deviceId===n})<0}),i=this.prevDevices_.filter(function(e){return t.findIndex(function(t){var n=t.deviceId;return e.deviceId===n})<0}),r.length>0&&this.handleDeviceAdded(this.prevDevices_,r),i.length>0&&this.handleDeviceRemoved(t,i),this.prevDevices_=t;case 10:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"setLocalStream",value:(t=a(n().mark(function e(t){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}return e.next=3,Bt();case 3:this.prevDevices_=e.sent;case 4:this.localStream_=t;case 5:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"handleDeviceAdded",value:function(e,t){var n,r;if(this.localStream_){this.log_.warn("devicesAdded: ".concat((0,I.default)(t))),this.localStream_.updateDeviceIdInUse();var i=t.filter(function(e){return e.kind===RS}),o=t.filter(function(e){return e.kind===AS}),a=e.filter(function(e){return e.kind===RS}),s=e.filter(function(e){return e.kind===AS}),l=i.length>0&&0===a.length&&"live"!==(null===(n=this.localStream_.getVideoTrack())||void 0===n?void 0:n.readyState),c=o.length>0&&0===s.length&&"live"!==(null===(r=this.localStream_.getAudioTrack())||void 0===r?void 0:r.readyState);if(c&&l)return this.log_.info("new microphone and camera detected, but there was no device before."),void this.localStream_.recoverCapture({audio:!0,video:!0,cameraId:i[0].deviceId,microphoneId:o[0].deviceId});l&&(this.log_.info("new camera detected, but there was no camera before."),this.localStream_.recoverCapture({audio:!1,video:!0,cameraId:i[0].deviceId})),c&&(this.log_.info("new microphone detected, but there was no microphone before."),this.localStream_.recoverCapture({audio:!0,video:!1,microphoneId:o[0].deviceId}))}}},{key:"handleDeviceRemoved",value:function(e,t){if(this.localStream_){this.log_.warn("devicesRemoved: ".concat((0,I.default)(t))),this.localStream_.updateDeviceIdInUse();var n=!1,r=!1,i=this.localStream_.getCameraId(),o=this.localStream_.getMicrophoneId();if(o===rT){var a=this.localStream_.getMicrophoneGroupId(),s=e.filter(function(e){return e.deviceId===rT&&e.kind===AS})[0];s&&s.groupId!==a&&(r=!0)}if(t.forEach(function(e){var t=e.deviceId;i.length>0&&t===i?n=!0:o.length>0&&t===o&&(r=!0)}),n&&r)return this.log_.warn("current camera and microphone in use is lost, cameraId: ".concat(i,", microphoneId: ").concat(o)),void((this.localStream_.getAudio()||this.localStream_.getVideo())&&this.localStream_.recoverCapture({video:!0,audio:!0}));n&&(this.log_.warn("current camera in use is lost, deviceId: ".concat(i)),this.localStream_.getVideo()&&this.localStream_.recoverCapture({video:!0,audio:!1})),r&&(this.log_.warn("current microphone in use is lost, deviceId: ".concat(o)),this.localStream_.getAudio()&&this.localStream_.recoverCapture({video:!1,audio:!0}))}}}]),e}(),jO=new m.default,VO=uo.exports,HO=Gi,YO=Ji,zO=zu,GO=Cu,WO=Cn,KO=ti,XO=function(e,t,n,r){try{return r?t(YO(n)[0],n[1]):t(n)}catch(t){zO(e,"throw",t)}},ZO=Au,JO=_p,QO=ka,eL=Bc,tL=ju,nL=$u,rL=Array,iL=function(e){var t=KO(e),n=JO(this),r=arguments.length,i=r>1?arguments[1]:void 0,o=void 0!==i;o&&(i=GO(i,r>2?arguments[2]:void 0));var a,s,l,c,u,d,f=nL(t),p=0;if(!f||this===rL&&ZO(f))for(a=QO(t),s=n?new this(a):rL(a);a>p;p++)d=o?i(t[p],p):t[p],eL(s,p,d);else for(u=(c=tL(t,f)).next,s=n?new this:[];!(l=WO(u,c)).done;p++)d=o?XO(c,i,[l.value,p],!0):l.value,eL(s,p,d);return s.length=p,s},oL=Hn,aL=2147483647,sL=/[^\0-\u007E]/,lL=/[.\u3002\uFF0E\uFF61]/g,cL="Overflow: input needs wider integers to process",uL=RangeError,dL=oL(lL.exec),fL=Math.floor,pL=String.fromCharCode,hL=oL("".charCodeAt),gL=oL([].join),mL=oL([].push),vL=oL("".replace),bL=oL("".split),_L=oL("".toLowerCase),yL=function(e){return e+22+75*(e<26)},wL=function(e,t,n){var r=0;for(e=n?fL(e/700):e>>1,e+=fL(e/t);e>455;)e=fL(e/35),r+=36;return fL(r+36*e/(e+38))},xL=function(e){var t=[];e=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=hL(e,n++);if(i>=55296&&i<=56319&&n<r){var o=hL(e,n++);56320==(64512&o)?mL(t,((1023&i)<<10)+(1023&o)+65536):(mL(t,i),n--)}else mL(t,i)}return t}(e);var n,r,i=e.length,o=128,a=0,s=72;for(n=0;n<e.length;n++)(r=e[n])<128&&mL(t,pL(r));var l=t.length,c=l;for(l&&mL(t,"-");c<i;){var u=aL;for(n=0;n<e.length;n++)(r=e[n])>=o&&r<u&&(u=r);var d=c+1;if(u-o>fL((aL-a)/d))throw uL(cL);for(a+=(u-o)*d,o=u,n=0;n<e.length;n++){if((r=e[n])<o&&++a>aL)throw uL(cL);if(r==o){for(var f=a,p=36;;){var h=p<=s?1:p>=s+26?26:p-s;if(f<h)break;var g=f-h,m=36-h;mL(t,pL(yL(h+g%m))),f=fL(g/m),p+=36}mL(t,pL(yL(f))),s=wL(a,d,c==l),a=0,c++}}a++,o++}return gL(t,"")},kL=ds,SL=wn,CL=av,TL=bn,EL=Cu,IL=Hn,AL=ca,RL=function(e,t,n){return n.get&&VO(n.get,t,{getter:!0}),n.set&&VO(n.set,t,{setter:!0}),HO.f(e,t,n)},OL=cd,LL=ii,PL=NA,ML=iL,$L=Gc,NL=gf.codeAt,DL=function(e){var t,n,r=[],i=bL(vL(_L(e),lL,"."),".");for(t=0;t<i.length;t++)n=i[t],mL(r,dL(sL,n)?"xn--"+xL(n):n);return gL(r,".")},FL=af,qL=Ol,UL=zf,BL=Tb,jL=zo,VL=jL.set,HL=jL.getterFor("URL"),YL=BL.URLSearchParams,zL=BL.getState,GL=TL.URL,WL=TL.TypeError,KL=TL.parseInt,XL=Math.floor,ZL=Math.pow,JL=IL("".charAt),QL=IL(/./.exec),eP=IL([].join),tP=IL(1..toString),nP=IL([].pop),rP=IL([].push),iP=IL("".replace),oP=IL([].shift),aP=IL("".split),sP=IL("".slice),lP=IL("".toLowerCase),cP=IL([].unshift),uP="Invalid scheme",dP="Invalid host",fP="Invalid port",pP=/[a-z]/i,hP=/[\d+-.a-z]/i,gP=/\d/,mP=/^0x/i,vP=/^[0-7]+$/,bP=/^\d+$/,_P=/^[\da-f]+$/i,yP=/[\0\t\n\r #%/:<>?@[\\\]^|]/,wP=/[\0\t\n\r #/:<>?@[\\\]^|]/,xP=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,kP=/[\t\n\r]/g,SP=function(e){var t,n,r,i;if("number"==typeof e){for(t=[],n=0;n<4;n++)cP(t,e%256),e=XL(e/256);return eP(t,".")}if("object"==(void 0===e?"undefined":(0,me.default)(e))){for(t="",r=function(e){for(var t=null,n=1,r=null,i=0,o=0;o<8;o++)0!==e[o]?(i>n&&(t=r,n=i),r=null,i=0):(null===r&&(r=o),++i);return i>n&&(t=r,n=i),t}(e),n=0;n<8;n++)i&&0===e[n]||(i&&(i=!1),r===n?(t+=n?":":"::",i=!0):(t+=tP(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},CP={},TP=PL({},CP,{" ":1,'"':1,"<":1,">":1,"`":1}),EP=PL({},TP,{"#":1,"?":1,"{":1,"}":1}),IP=PL({},EP,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),AP=function(e,t){var n=NL(e,0);return n>32&&n<127&&!LL(t,e)?e:encodeURIComponent(e)},RP={ftp:21,file:null,http:80,https:443,ws:80,wss:443},OP=function(e,t){var n;return 2==e.length&&QL(pP,JL(e,0))&&(":"==(n=JL(e,1))||!t&&"|"==n)},LP=function(e){var t;return e.length>1&&OP(sP(e,0,2))&&(2==e.length||"/"===(t=JL(e,2))||"\\"===t||"?"===t||"#"===t)},PP=function(e){return"."===e||"%2e"===lP(e)},MP={},$P={},NP={},DP={},FP={},qP={},UP={},BP={},jP={},VP={},HP={},YP={},zP={},GP={},WP={},KP={},XP={},ZP={},JP={},QP={},eM={},tM=function e(t,n,r){var i,o,a,s=FL(t);if(n){if(o=this.parse(s))throw WL(o);this.searchParams=null}else{if(void 0!==r&&(i=new e(r,!0)),o=this.parse(s,null,i))throw WL(o);(a=zL(new YL)).bindURL(this),this.searchParams=a}};tM.prototype={type:"URL",parse:function(e,t,n){var r,i,o,a,s,l=this,c=t||MP,u=0,d="",f=!1,p=!1,h=!1;for(e=FL(e),t||(l.scheme="",l.username="",l.password="",l.host=null,l.port=null,l.path=[],l.query=null,l.fragment=null,l.cannotBeABaseURL=!1,e=iP(e,xP,"")),e=iP(e,kP,""),r=ML(e);u<=r.length;){switch(i=r[u],c){case MP:if(!i||!QL(pP,i)){if(t)return uP;c=NP;continue}d+=lP(i),c=$P;break;case $P:if(i&&(QL(hP,i)||"+"==i||"-"==i||"."==i))d+=lP(i);else{if(":"!=i){if(t)return uP;d="",c=NP,u=0;continue}if(t&&(l.isSpecial()!=LL(RP,d)||"file"==d&&(l.includesCredentials()||null!==l.port)||"file"==l.scheme&&!l.host))return;if(l.scheme=d,t)return void(l.isSpecial()&&RP[l.scheme]==l.port&&(l.port=null));d="","file"==l.scheme?c=GP:l.isSpecial()&&n&&n.scheme==l.scheme?c=DP:l.isSpecial()?c=BP:"/"==r[u+1]?(c=FP,u++):(l.cannotBeABaseURL=!0,rP(l.path,""),c=JP)}break;case NP:if(!n||n.cannotBeABaseURL&&"#"!=i)return uP;if(n.cannotBeABaseURL&&"#"==i){l.scheme=n.scheme,l.path=$L(n.path),l.query=n.query,l.fragment="",l.cannotBeABaseURL=!0,c=eM;break}c="file"==n.scheme?GP:qP;continue;case DP:if("/"!=i||"/"!=r[u+1]){c=qP;continue}c=jP,u++;break;case FP:if("/"==i){c=VP;break}c=ZP;continue;case qP:if(l.scheme=n.scheme,i==FO)l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,l.path=$L(n.path),l.query=n.query;else if("/"==i||"\\"==i&&l.isSpecial())c=UP;else if("?"==i)l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,l.path=$L(n.path),l.query="",c=QP;else{if("#"!=i){l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,l.path=$L(n.path),l.path.length--,c=ZP;continue}l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,l.path=$L(n.path),l.query=n.query,l.fragment="",c=eM}break;case UP:if(!l.isSpecial()||"/"!=i&&"\\"!=i){if("/"!=i){l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,c=ZP;continue}c=VP}else c=jP;break;case BP:if(c=jP,"/"!=i||"/"!=JL(d,u+1))continue;u++;break;case jP:if("/"!=i&&"\\"!=i){c=VP;continue}break;case VP:if("@"==i){f&&(d="%40"+d),f=!0,o=ML(d);for(var g=0;g<o.length;g++){var m=o[g];if(":"!=m||h){var v=AP(m,IP);h?l.password+=v:l.username+=v}else h=!0}d=""}else if(i==FO||"/"==i||"?"==i||"#"==i||"\\"==i&&l.isSpecial()){if(f&&""==d)return"Invalid authority";u-=ML(d).length+1,d="",c=HP}else d+=i;break;case HP:case YP:if(t&&"file"==l.scheme){c=KP;continue}if(":"!=i||p){if(i==FO||"/"==i||"?"==i||"#"==i||"\\"==i&&l.isSpecial()){if(l.isSpecial()&&""==d)return dP;if(t&&""==d&&(l.includesCredentials()||null!==l.port))return;if(a=l.parseHost(d))return a;if(d="",c=XP,t)return;continue}"["==i?p=!0:"]"==i&&(p=!1),d+=i}else{if(""==d)return dP;if(a=l.parseHost(d))return a;if(d="",c=zP,t==YP)return}break;case zP:if(!QL(gP,i)){if(i==FO||"/"==i||"?"==i||"#"==i||"\\"==i&&l.isSpecial()||t){if(""!=d){var b=KL(d,10);if(b>65535)return fP;l.port=l.isSpecial()&&b===RP[l.scheme]?null:b,d=""}if(t)return;c=XP;continue}return fP}d+=i;break;case GP:if(l.scheme="file","/"==i||"\\"==i)c=WP;else{if(!n||"file"!=n.scheme){c=ZP;continue}if(i==FO)l.host=n.host,l.path=$L(n.path),l.query=n.query;else if("?"==i)l.host=n.host,l.path=$L(n.path),l.query="",c=QP;else{if("#"!=i){LP(eP($L(r,u),""))||(l.host=n.host,l.path=$L(n.path),l.shortenPath()),c=ZP;continue}l.host=n.host,l.path=$L(n.path),l.query=n.query,l.fragment="",c=eM}}break;case WP:if("/"==i||"\\"==i){c=KP;break}n&&"file"==n.scheme&&!LP(eP($L(r,u),""))&&(OP(n.path[0],!0)?rP(l.path,n.path[0]):l.host=n.host),c=ZP;continue;case KP:if(i==FO||"/"==i||"\\"==i||"?"==i||"#"==i){if(!t&&OP(d))c=ZP;else if(""==d){if(l.host="",t)return;c=XP}else{if(a=l.parseHost(d))return a;if("localhost"==l.host&&(l.host=""),t)return;d="",c=XP}continue}d+=i;break;case XP:if(l.isSpecial()){if(c=ZP,"/"!=i&&"\\"!=i)continue}else if(t||"?"!=i)if(t||"#"!=i){if(i!=FO&&(c=ZP,"/"!=i))continue}else l.fragment="",c=eM;else l.query="",c=QP;break;case ZP:if(i==FO||"/"==i||"\\"==i&&l.isSpecial()||!t&&("?"==i||"#"==i)){if(".."===(s=lP(s=d))||"%2e."===s||".%2e"===s||"%2e%2e"===s?(l.shortenPath(),"/"==i||"\\"==i&&l.isSpecial()||rP(l.path,"")):PP(d)?"/"==i||"\\"==i&&l.isSpecial()||rP(l.path,""):("file"==l.scheme&&!l.path.length&&OP(d)&&(l.host&&(l.host=""),d=JL(d,0)+":"),rP(l.path,d)),d="","file"==l.scheme&&(i==FO||"?"==i||"#"==i))for(;l.path.length>1&&""===l.path[0];)oP(l.path);"?"==i?(l.query="",c=QP):"#"==i&&(l.fragment="",c=eM)}else d+=AP(i,EP);break;case JP:"?"==i?(l.query="",c=QP):"#"==i?(l.fragment="",c=eM):i!=FO&&(l.path[0]+=AP(i,CP));break;case QP:t||"#"!=i?i!=FO&&("'"==i&&l.isSpecial()?l.query+="%27":l.query+="#"==i?"%23":AP(i,CP)):(l.fragment="",c=eM);break;case eM:i!=FO&&(l.fragment+=AP(i,TP))}u++}},parseHost:function(e){var t,n,r;if("["==JL(e,0)){if("]"!=JL(e,e.length-1))return dP;if(!(t=function(e){var t,n,r,i,o,a,s,l=[0,0,0,0,0,0,0,0],c=0,u=null,d=0,f=function(){return JL(e,d)};if(":"==f()){if(":"!=JL(e,1))return;d+=2,u=++c}for(;f();){if(8==c)return;if(":"!=f()){for(t=n=0;n<4&&QL(_P,f());)t=16*t+KL(f(),16),d++,n++;if("."==f()){if(0==n)return;if(d-=n,c>6)return;for(r=0;f();){if(i=null,r>0){if(!("."==f()&&r<4))return;d++}if(!QL(gP,f()))return;for(;QL(gP,f());){if(o=KL(f(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;d++}l[c]=256*l[c]+i,2!=++r&&4!=r||c++}if(4!=r)return;break}if(":"==f()){if(d++,!f())return}else if(f())return;l[c++]=t}else{if(null!==u)return;d++,u=++c}}if(null!==u)for(a=c-u,c=7;0!=c&&a>0;)s=l[c],l[c--]=l[u+a-1],l[u+--a]=s;else if(8!=c)return;return l}(sP(e,1,-1))))return dP;this.host=t}else if(this.isSpecial()){if(e=DL(e),QL(yP,e))return dP;if(null===(t=function(e){var t,n,r,i,o,a,s,l=aP(e,".");if(l.length&&""==l[l.length-1]&&l.length--,(t=l.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(i=l[r]))return e;if(o=10,i.length>1&&"0"==JL(i,0)&&(o=QL(mP,i)?16:8,i=sP(i,8==o?1:2)),""===i)a=0;else{if(!QL(10==o?bP:8==o?vP:_P,i))return e;a=KL(i,o)}rP(n,a)}for(r=0;r<t;r++)if(a=n[r],r==t-1){if(a>=ZL(256,5-t))return null}else if(a>255)return null;for(s=nP(n),r=0;r<n.length;r++)s+=n[r]*ZL(256,3-r);return s}(e)))return dP;this.host=t}else{if(QL(wP,e))return dP;for(t="",n=ML(e),r=0;r<n.length;r++)t+=AP(n[r],CP);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return LL(RP,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&OP(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,r=e.password,i=e.host,o=e.port,a=e.path,s=e.query,l=e.fragment,c=t+":";return null!==i?(c+="//",e.includesCredentials()&&(c+=n+(r?":"+r:"")+"@"),c+=SP(i),null!==o&&(c+=":"+o)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?a[0]:a.length?"/"+eP(a,"/"):"",null!==s&&(c+="?"+s),null!==l&&(c+="#"+l),c},setHref:function(e){var t=this.parse(e);if(t)throw WL(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new nM(e.path[0]).origin}catch(e){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+SP(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(FL(e)+":",MP)},getUsername:function(){return this.username},setUsername:function(e){var t=ML(FL(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=AP(t[n],IP)}},getPassword:function(){return this.password},setPassword:function(e){var t=ML(FL(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=AP(t[n],IP)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?SP(e):SP(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,HP)},getHostname:function(){var e=this.host;return null===e?"":SP(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,YP)},getPort:function(){var e=this.port;return null===e?"":FL(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""==(e=FL(e))?this.port=null:this.parse(e,zP))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+eP(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,XP))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""==(e=FL(e))?this.query=null:("?"==JL(e,0)&&(e=sP(e,1)),this.query="",this.parse(e,QP)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!=(e=FL(e))?("#"==JL(e,0)&&(e=sP(e,1)),this.fragment="",this.parse(e,eM)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var nM=function(e){var t=OL(this,rM),n=UL(arguments.length,1)>1?arguments[1]:void 0,r=VL(t,new tM(e,!1,n));SL||(t.href=r.serialize(),t.origin=r.getOrigin(),t.protocol=r.getProtocol(),t.username=r.getUsername(),t.password=r.getPassword(),t.host=r.getHost(),t.hostname=r.getHostname(),t.port=r.getPort(),t.pathname=r.getPathname(),t.search=r.getSearch(),t.searchParams=r.getSearchParams(),t.hash=r.getHash())},rM=nM.prototype,iM=function(e,t){return{get:function(){return HL(this)[e]()},set:t&&function(e){return HL(this)[t](e)},configurable:!0,enumerable:!0}};if(SL&&(RL(rM,"href",iM("serialize","setHref")),RL(rM,"origin",iM("getOrigin")),RL(rM,"protocol",iM("getProtocol","setProtocol")),RL(rM,"username",iM("getUsername","setUsername")),RL(rM,"password",iM("getPassword","setPassword")),RL(rM,"host",iM("getHost","setHost")),RL(rM,"hostname",iM("getHostname","setHostname")),RL(rM,"port",iM("getPort","setPort")),RL(rM,"pathname",iM("getPathname","setPathname")),RL(rM,"search",iM("getSearch","setSearch")),RL(rM,"searchParams",iM("getSearchParams")),RL(rM,"hash",iM("getHash","setHash"))),AL(rM,"toJSON",function(){return HL(this).serialize()},{enumerable:!0}),AL(rM,"toString",function(){return HL(this).serialize()},{enumerable:!0}),GL){var oM=GL.createObjectURL,aM=GL.revokeObjectURL;oM&&AL(nM,"createObjectURL",EL(oM,GL)),aM&&AL(nM,"revokeObjectURL",EL(aM,GL))}qL(nM,"URL"),kL({global:!0,constructor:!0,forced:!CL,sham:!SL},{URL:nM});var sM,lM,cM=new Blob(["class VolumeMeter extends AudioWorkletProcessor{constructor(){super();this.volume=0;this.intervalTime=200;this.tick=this.intervalTime;this.isStop=false;this.port.onmessage=event=>{const{data}=event;switch(data.name){case'setIntervalTime':this.intervalTime=data.intervalTime;break;case'stop':this.isStop=true;break}}}process(inputs){const input=inputs[0];if(this.isStop){return false}if(input.length>0){const firstChannel=input[0];let sum=0;let rms;for(let i=0;i<firstChannel.length;++i){sum+=firstChannel[i]*firstChannel[i]}rms=Math.sqrt(sum/firstChannel.length);this.volume=Math.max(rms,this.volume*0.95);this.tick-=firstChannel.length;if(this.tick<0){this.tick+=(this.intervalTime/1000)*sampleRate;this.port.postMessage({volume:this.volume})}}return true}}registerProcessor('volume-meter',VolumeMeter);"],{type:"application/javascript"}),uM=!1,dM=function(){function e(t){s(this,e),this.context_=t.context,this.addModuleToContext()}var t;return d(e,[{key:"addModuleToContext",value:(t=a(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.context_.audioWorklet.addModule(URL.createObjectURL(cM));case 3:aA.info("worklet addModule success"),BI.emit(eA),uM=!0,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),aA.info("worklet addModule catch error. ".concat(e.t0.message)),BI.emit(tA);case 12:case"end":return e.stop()}},e,this,[[0,8]])})),function(){return t.apply(this,arguments)})},{key:"initWorkletSuccess",get:function(){return uM}}]),e}(),fM=0,pM=function(){function e(t){s(this,e);var n=t.track,r=t.log,i=t.stream;this.volume_=0,this.log_=r,this.track_=n,this.stream_=i,sM||(sM=PI()),this.audioCtx_=sM,this.destination_=this.audioCtx_.destination;var o=new MediaStream;o.addTrack(this.track_),this.streamSource_=this.audioCtx_.createMediaStreamSource(o),this.audioWorkletNode_=null,this.scriptProcessorNode_=null,this.interval_=200,BI.on(QI,this.resume,this),BI.on(KI,this.handleAudioLevelInterval,this),$I?(BI.on(eA,this.initAudioWorklet,this),BI.on(tA,this.initScriptProcessor,this),this.preload()):this.initScriptProcessor(),fM+=1}return d(e,[{key:"preload",value:function(){lM?lM.initWorkletSuccess&&this.initAudioWorklet():lM=new dM({context:sM})}},{key:"initAudioWorklet",value:function(){var e=this;if(!this.audioWorkletNode_)try{this.audioWorkletNode_=new AudioWorkletNode(this.audioCtx_,"volume-meter"),this.audioWorkletNode_.port.onmessage=function(t){e.volume_=t.data.volume||0},this.streamSource_.connect(this.audioWorkletNode_).connect(this.destination_),this.handleAudioLevelInterval({interval:this.interval_})}catch(e){this.log_.warn("load volume meter failed, load again."),this.initScriptProcessor()}}},{key:"initScriptProcessor",value:function(){var e=this;if(!this.scriptProcessorNode_)try{this.scriptProcessorNode_=this.audioCtx_.createScriptProcessor(2048,1,1),this.scriptProcessorNode_.onaudioprocess=function(t){for(var n=t.inputBuffer.getChannelData(0),r=0,i=0;i<n.length;++i)r+=n[i]*n[i];e.volume_=Math.sqrt(r/n.length)||0},this.streamSource_.connect(this.scriptProcessorNode_),this.scriptProcessorNode_.connect(this.destination_)}catch(e){this.log_.error("volumeMeter init script processor error: "+e)}}},{key:"destroy",value:function(){var e;this.streamSource_&&this.streamSource_.disconnect(),this.scriptProcessorNode_&&(this.scriptProcessorNode_.onaudioprocess=null,this.scriptProcessorNode_.disconnect()),this.audioWorkletNode_&&(this.audioWorkletNode_.port.postMessage({name:"stop"}),this.audioWorkletNode_.port.onmessage=null,this.audioWorkletNode_.disconnect()),this.audioWorkletNode_=null,this.scriptProcessorNode_=null,this.audioCtx_=null,BI.off(QI,this.resume,this),BI.off(KI,this.handleAudioLevelInterval,this),BI.off(eA,this.initAudioWorklet,this),BI.off(tA,this.initScriptProcessor,this),fM>0&&(fM-=1),0===fM&&(null===(e=sM)||void 0===e||e.close(),sM=null,lM=null)}},{key:"resume",value:function(){var e;null===(e=sM)||void 0===e||e.resume()}},{key:"getInternalAudioLevel",value:function(){return this.volume_}},{key:"getCalculatedVolume",value:function(){return this.volume_.toFixed(2)}},{key:"handleAudioLevelInterval",value:function(e){var t,n=e.interval;this.interval_=n,null===(t=this.audioWorkletNode_)||void 0===t||t.port.postMessage({name:"setIntervalTime",intervalTime:n})}}]),e}(),hM=function(){function e(t){s(this,e),this.stream_=t.stream,this.userId_=t.stream.getUserId(),this.log_=this.stream_.getLogger(),this.track_=t.track,t.gainedTrack&&(this.gainedTrack_=t.gainedTrack),this.div_=t.div,this.muted_=t.muted,this.outputDeviceId_=t.outputDeviceId,this.volume_=t.volume,this.pausedRetryCount_=5,this.emitter_=new UI,this.initializeElement(),this.state_="NONE",this.volumeMeter_=new pM({stream:this.stream_,track:this.gainedTrack_||this.track_,log:this.log_})}var t,r,i,o;return d(e,[{key:"isPlaying",get:function(){return this.state_===MS}},{key:"initializeElement",value:function(){if(this.isAudioElementInit()){var e=new MediaStream;e.addTrack(this.gainedTrack_||this.track_);var t=document.createElement(pS);t.srcObject=e,t.muted=this.muted_,t.setAttribute("id","audio_".concat(this.stream_.getId())),t.setAttribute("autoplay","autoplay"),t.setAttribute("playsinline","playsinline"),this.div_.appendChild(t),this.element_=t}this.handleEvents()}},{key:"setMuted",value:function(e){this.element_&&(this.element_.muted=e,this.muted_=e)}},{key:"play",value:(o=a(n().mark(function e(){var t;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.outputDeviceId_||!this.element_){e.next=3;break}return e.next=3,this.element_.setSinkId(this.outputDeviceId_);case 3:if(this.setVolume(this.volume_),e.prev=4,!this.element_){e.next=8;break}return e.next=8,this.element_.play();case 8:e.next=16;break;case 10:if(e.prev=10,e.t0=e.catch(4),t=st({key:qT,data:{media:"Audio",error:e.t0}}),this.log_.warn(t),!t.includes("NotAllowedError")){e.next=16;break}throw new _R({code:bR.PLAY_NOT_ALLOWED,message:t});case 16:case"end":return e.stop()}},e,this,[[4,10]])})),function(){return o.apply(this,arguments)})},{key:"handleEvents",value:function(){this.handleElementEvent=this.handleElementEvent.bind(this),this.handleTrackEvent=this.handleTrackEvent.bind(this),this.element_&&(this.element_.addEventListener(CS,this.handleElementEvent),this.element_.addEventListener(SS,this.handleElementEvent),this.element_.addEventListener(TS,this.handleElementEvent),this.element_.addEventListener(ES,this.handleElementEvent)),this.track_.addEventListener(SS,this.handleTrackEvent),this.track_.addEventListener(xS,this.handleTrackEvent),this.track_.addEventListener(kS,this.handleTrackEvent),this.track_.readyState===SS&&this.handleTrackEvent({type:SS}),this.track_.muted&&this.handleTrackEvent({type:xS})}},{key:"handleElementEvent",value:(i=a(n().mark(function e(t){var r,i,o,a,s,l,c,u=this;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.type,e.t0=r,e.next=e.t0===CS?4:e.t0===SS?9:e.t0===TS?12:e.t0===ES?21:32;break;case 4:return this.log_.info("audio player is playing"),this.state_=MS,BI.emit(103,{stream:this.stream_}),this.emitter_.emit(NO,{state:this.state_,reason:CS}),e.abrupt("break",32);case 9:return this.log_.info("audio player is ended"),this.state_!==NS&&(this.state_=NS,this.emitter_.emit(NO,{state:this.state_,reason:SS})),e.abrupt("break",32);case 12:return this.log_.info("audio player is paused"),this.state_=$S,this.emitter_.emit(NO,{state:this.state_,reason:TS}),(i=this.div_&&document.getElementById(this.div_.id))||this.log_.warn("audio player has been remove, element ID: ".concat(this.div_.id)),o=nI(),this.pausedRetryCount_>0&&(TI(o)&&o<=70||!i)&&(this.resume(),this.pausedRetryCount_--),uE&&(this.interval_=gO.run(function(){u.element_&&u.state_===$S&&u.resume()},{delay:3e3})),e.abrupt("break",32);case 21:if(!this.element_||!this.element_.error){e.next=31;break}return a="".concat(Pt(),"/").concat(at().name,"/").concat(at().version),e.next=25,QH.getSpeakers();case 25:s=e.sent,l=s[0].label,(c=s.find(function(e){return e.deviceId===u.outputDeviceId_}))&&(l=c.label),this.log_.error("audio player error observed. code: ".concat(this.element_.error.code," message: ").concat(this.element_.error.message," deviceInfo: ").concat(a," speaker: ").concat(l)),CR.uploadEvent("stat-".concat(this.stream_.getType(),"-audio-").concat(SC,"-").concat(this.element_.error.code,"-").concat(a,"-").concat(l),this.element_.error);case 31:return e.abrupt("break",32);case 32:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"handleTrackEvent",value:function(e){var t=e.type;switch(t){case SS:this.log_.info("audio track is ended"),this.state_!==NS&&(this.state_=NS,this.emitter_.emit(NO,{state:this.state_,reason:SS})),BI.emit(137,{stream:this.stream_,type:t});break;case xS:this.log_.info("audio track is unable to provide media output"),this.stream_.isRemote()||LI(),this.state_!==$S&&(this.state_=$S,this.emitter_.emit(NO,{state:this.state_,reason:xS})),BI.emit(136,{stream:this.stream_,type:t});break;case kS:this.log_.info("audio track is able to provide media output"),this.state_===$S&&(this.state_=MS,this.emitter_.emit(NO,{state:this.state_,reason:kS}))}}},{key:"unbindEvents",value:function(){this.element_&&(this.element_.removeEventListener(CS,this.handleElementEvent),this.element_.removeEventListener(SS,this.handleElementEvent),this.element_.removeEventListener(TS,this.handleElementEvent),this.element_.removeEventListener(ES,this.handleElementEvent)),this.track_&&(this.track_.removeEventListener(SS,this.handleTrackEvent),this.track_.removeEventListener(xS,this.handleTrackEvent),this.track_.removeEventListener(kS,this.handleTrackEvent))}},{key:"setSinkId",value:(r=a(n().mark(function e(t){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.outputDeviceId_===t){e.next=5;break}if(!this.element_){e.next=4;break}return e.next=4,this.element_.setSinkId(t);case 4:this.outputDeviceId_=t;case 5:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"setVolume",value:function(e){this.element_&&(this.log_.info("audioElement setVolume to : ".concat(e)),this.element_.volume=e)}},{key:"getAudioLevel",value:function(){return this.volumeMeter_.getCalculatedVolume()}},{key:"getInternalAudioLevel",value:function(){return this.volumeMeter_.getInternalAudioLevel()}},{key:"stop",value:function(){this.unbindEvents(),this.element_&&(this.div_.removeChild(this.element_),this.element_.srcObject=null,this.element_=null),this.volumeMeter_&&(this.volumeMeter_.destroy(),this.volumeMeter_=null),this.interval_>0&&gO.clearTask(this.interval_)}},{key:"resume",value:(t=a(n().mark(function e(){var t;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.volumeMeter_&&this.volumeMeter_.resume(),!this.element_){e.next=5;break}return e.next=5,this.element_.play();case 5:e.next=13;break;case 7:if(e.prev=7,e.t0=e.catch(0),t=st({key:qT,data:{media:"Audio",error:e.t0}}),this.log_.warn(t),!t.includes("NotAllowedError")){e.next=13;break}throw new _R({code:bR.PLAY_NOT_ALLOWED,message:t});case 13:case"end":return e.stop()}},e,this,[[0,7]])})),function(){return t.apply(this,arguments)})},{key:"on",value:function(e,t){this.emitter_.on(e,t)}},{key:"isAudioElementInit",value:function(){return!("15.2"===uI||"15.3"===uI||"15.4"===uI)||"local"!==this.stream_.getType()||!this.muted_||(this.log_.info("audioElement is muted."),!1)}}]),e}(),gM=vo.PROPER,mM=yn,vM=D_,bM=Y_.trim;ds({target:"String",proto:!0,forced:function(e){return mM(function(){return!!vM[e]()||"​᠎"!=="​᠎"[e]()||gM&&vM[e].name!==e})}("trim")},{trim:function(){return bM(this)}});var _M="trtc_autoplay",yM="".concat(_M,"_mask"),wM="".concat(_M,"_wrapper"),xM="".concat(_M,"_header"),kM="".concat(_M,"_content"),SM="".concat(_M,"_action_wrapper"),CM="".concat(_M,"_question"),TM="".concat(_M,"_collapse"),EM="".concat(_M,"_action_confirm"),IM="".concat(_M,"_detail"),AM="#2473E8",RM="dialog",OM="".concat(RM,"-show"),LM="".concat(RM,"-1"),PM="".concat(RM,"-2"),MM=!1,$M=function(){return!!document.querySelector(".".concat(wM))},NM="".concat(eT,"/").concat(OI()?"zh-cn":"en","/tutorial-21-advanced-auto-play-policy.html"),DM="<br><a href='".concat(NM,"' target='_blank'>").concat(OI()?"其他方案？":"Any other solution?","</a>"),FM="".concat(OI()?"浏览器自动播放策略：在用户与页面产生交互（点击、触摸）之前，浏览器禁止播放有声媒体。该弹窗用于帮助用户恢复音视频播放。".concat(DM):"Autoplay Policy: Before user interacts with the web page (clicking, touching), page will not be allowed to play media with sound. This Dialog is used to help users resume playback. ".concat(DM)),qM=function(){function e(){if(s(this,e),this.dialogNode_=null,this.bodyPosition_="",this.content="音视频播放被浏览器拦截，请点击“恢复播放”。",OI()||(this.content='Media playback failed. Click the "Resume" to resume playback.'),!MM){var t=document.createElement("style");t.innerHTML=".".concat(yM,"{position:fixed;top:0;left:0;right:0;bottom:0;width:100vw;height:100vh;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,0.5);z-index:1500;}.").concat(yM," div:not(.").concat(SM,"){display:block !important;}.").concat(wM,"{padding:14px;background:#fff;border-radius:3px;box-shadow:0px 3px 15px #434343;border:1px solid #d1cfcf;max-width:500px;}.").concat(wM," a{color:").concat(AM,";}.").concat(xM,"{overflow:hidden;text-overflow:ellipsis;font-size:16px;font-weight:600;}.").concat(kM,"{margin:8px 0;}.").concat(SM,"{width:100%;display:flex !important;align-items:center;justify-content:right;float:right;}.").concat(TM,"{margin-right:auto;cursor:pointer}.").concat(CM,"{height:100%;line-height:16px;cursor:pointer;}.").concat(EM,"{margin-left:8px;color:#fff;background:").concat(AM,";padding:4px 12px;outline:none;border:1px solid;border-radius:3px;font-weight:bold;}.").concat(EM,":hover{opacity:0.9;}.").concat(TM,",.").concat(EM,",.").concat(kM,",.").concat(CM,"{font-size:14px;}@media screen and (max-width:750px){.").concat(wM,"{width:80vw;}}"),document.head.appendChild(t),MM=!0}this.showDetail_=!1,this.isCollapseClicked_=!1,this.isQuestionClicked_=!1,this.addDiaLog()}return d(e,[{key:"createDiaLog",value:function(){var e=document.createElement("template");e.innerHTML='<div class="'.concat(yM,"\"><div class='").concat(wM,"'><div class='").concat(xM,"'>").concat(location.host,"</div><div class='").concat(kM,"'>").concat(this.content,"</div><div class='").concat(IM,'\' style="visibility:hidden;width:100%;height:0;font-size:12px;color:gray;">').concat(FM,"</div><div class='").concat(SM,"'></div></div></div>").trim();var t=document.createElement("button");t.className=EM,t.innerText=OI()?"恢复播放":"Resume",t.onclick=this.onConfirm.bind(this);var n=document.createElement("div");n.className=CM,n.innerHTML='<?xml version="1.0" encoding="UTF-8"?>\n    <svg class="icon" width="18" height="18" p-id="2030" t="1639646523624" version="1.1" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg">\n    <path d="m464 784.35c0 26.51 21.49 48 48 48s48-21.49 48-48-21.49-48-48-48-48 21.49-48 48z" p-id="2031"/>\n    <path d="m512 960c-247.04 0-448-200.96-448-448s200.96-448 448-448 448 200.96 448 448-200.96 448-448 448zm0-831.71c-211.58 0-383.71 172.13-383.71 383.71 0 211.55 172.13 383.71 383.71 383.71 211.55 0 383.71-172.16 383.71-383.71 0-211.58-172.16-383.71-383.71-383.71z" p-id="2032"/>\n    <path d="m512 673.7c-17.665 0-32.001-14.336-32.001-31.999v-54.112c0-52.353 40-92.352 75.328-127.65 25.887-25.92 52.672-52.672 52.672-74.017 0-53.343-43.072-96.735-95.999-96.735-53.823 0-95.999 41.536-95.999 94.559 0 17.665-14.336 31.999-32.001 31.999s-32.001-14.336-32.001-31.999c0-87.424 71.775-158.56 160-158.56s160 72.095 160 160.74c0 47.904-36.32 84.192-71.424 119.3-27.84 27.776-56.576 56.512-56.576 82.336v54.112c0 17.665-14.336 32.032-32.001 32.032z" p-id="2033"/>\n    </svg>\n    ',n.onclick=this.onQuestionClick.bind(this);var r=document.createElement("div");r.className=TM,r.innerText="".concat(OI()?"详情 >":"Detail >"),r.onclick=this.onCollapseClick.bind(this);var i=e.content.firstChild,o=i.querySelector(".".concat(SM));return o.appendChild(r),o.appendChild(n),o.appendChild(t),i}},{key:"addDiaLog",value:function(){$M()||(this.dialogNode_=this.createDiaLog(),document.body.appendChild(this.dialogNode_),this.dialogNode_.onclick=this.onConfirm.bind(this),this.dialogNode_.querySelector(".".concat(wM)).onclick=function(e){return e.stopPropagation()},this.bodyPosition_=document.body.style.position,document.body.style.position="fixed",aA.info("show autoplay dialog"),CR.uploadEvent({log:OM}))}},{key:"deleteDiaLog",value:function(){this.dialogNode_&&(document.body.removeChild(this.dialogNode_),document.body.style.position=this.bodyPosition_,this.dialogNode_=null)}},{key:"onConfirm",value:function(){aA.warn("confirm clicked, try resume stream"),BI.emit(QI),this.deleteDiaLog()}},{key:"onCollapseClick",value:function(){var e=this.dialogNode_.querySelector(".".concat(IM));e.style.visibility="".concat(this.showDetail_?"hidden":"visible"),e.style.height="".concat(this.showDetail_?0:"fit-content"),this.showDetail_=!this.showDetail_,this.isCollapseClicked_||CR.uploadEvent({log:LM}),this.isCollapseClicked_=!0}},{key:"onQuestionClick",value:function(){window.open(NM,"_blank"),this.isQuestionClicked_||CR.uploadEvent({log:PM}),this.isQuestionClicked_=!0}}]),e}(),UM=function(){function e(t){s(this,e),this.stream_=t.stream,this.userId_=t.stream.getUserId(),this.log_=this.stream_.getLogger(),this.track_=t.track,this.div_=t.div,this.muted_=t.muted,this.objectFit_=t.objectFit,this.mirror_=t.mirror,this.emitter_=new UI,this.initializeElement(),this.state_="NONE",this.pausedRetryCount_=5}var t;return d(e,[{key:"isPlaying",get:function(){return this.state_===MS}},{key:"initializeElement",value:function(){var e=new MediaStream;e.addTrack(this.track_);var t=document.createElement(hS);t.srcObject=e,t.muted=!0;var n="width: 100%; height: 100%; object-fit: ".concat(this.objectFit_,";");this.mirror_&&(n+="transform: scaleX(-1);"),t.setAttribute("id","video_".concat(this.stream_.getId())),t.setAttribute("style",n),t.setAttribute("autoplay","autoplay"),t.setAttribute("playsinline","playsinline"),this.div_&&this.div_.appendChild(t),this.element_=t,this.handleEvents()}},{key:"setRect",value:function(e){var t=e.width,n=e.height;this.element_&&(this.element_.style.width=t+"px",this.element_.style.height=n+"px")}},{key:"setMirror",value:function(e){this.element_&&(this.element_.style.transform=e?"scaleX(-1)":"",this.mirror_=e)}},{key:"setObjectFit",value:function(e){this.element_&&(this.element_.style.objectFit="".concat(e),this.objectFit_=e)}},{key:"play",value:(t=a(n().mark(function e(){var t;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.element_.play();case 3:e.next=11;break;case 5:if(e.prev=5,e.t0=e.catch(0),t=st({key:qT,data:{media:"Video",error:e.t0}}),this.log_.warn(t),!t.includes("NotAllowedError")){e.next=11;break}throw new _R({code:bR.PLAY_NOT_ALLOWED,message:t});case 11:case"end":return e.stop()}},e,this,[[0,5]])})),function(){return t.apply(this,arguments)})},{key:"handleEvents",value:function(){this.handleElementEvent=this.handleElementEvent.bind(this),this.handleTrackEvent=this.handleTrackEvent.bind(this),this.element_.addEventListener(CS,this.handleElementEvent),this.element_.addEventListener(SS,this.handleElementEvent),this.element_.addEventListener(TS,this.handleElementEvent),this.element_.addEventListener(ES,this.handleElementEvent),this.element_.addEventListener(IS,this.handleElementEvent),this.track_.addEventListener(SS,this.handleTrackEvent),this.track_.addEventListener(xS,this.handleTrackEvent),this.track_.addEventListener(kS,this.handleTrackEvent),this.track_.readyState===SS&&this.handleTrackEvent({type:SS}),this.track_.muted&&this.handleTrackEvent({type:xS})}},{key:"handleElementEvent",value:function(e){var t=this;switch(e.type){case CS:this.log_.info("video player is playing"),this.state_=MS,BI.emit(102,{stream:this.stream_}),this.emitter_.emit(NO,{state:this.state_,reason:CS}),this.interval_&&(gO.clearTask(this.interval_),this.interval_=null);break;case SS:this.log_.info("video player is ended"),this.state_!==NS&&(this.state_=NS,this.emitter_.emit(NO,{state:this.state_,reason:SS}));break;case TS:this.log_.info("video player is paused"),this.div_&&!document.getElementById(this.div_.id)&&this.log_.warn("video player has been remove, element ID: ".concat(this.div_.id)),this.state_=$S,this.emitter_.emit(NO,{state:this.state_,reason:TS}),this.pausedRetryCount_>0&&!$M()&&(this.log_.info("video player auto resume when video paused"),this.resume(),this.pausedRetryCount_--),uE&&(this.interval_=gO.run(function(){t.element_&&t.state_===$S&&t.resume()},{delay:3e3}));break;case ES:if(this.element_&&this.element_.error){var n="".concat(Pt(),"/").concat(at().name,"/").concat(at().version);this.log_.error("video player error observed. code: ".concat(this.element_.error.code," message: ").concat(this.element_.error.message," deviceInfo: ").concat(n)),CR.uploadEvent("stat-".concat(this.stream_.getType(),"-video-").concat(SC,"-").concat(this.element_.error.code,"-").concat(n),this.element_.error)}break;case IS:BI.emit(133,{stream:this.stream_})}}},{key:"handleTrackEvent",value:function(e){var t=e.type;switch(t){case SS:this.log_.info("video track is ended"),BI.emit(135,{stream:this.stream_,type:t}),this.state_!==NS&&(this.state_=NS,this.emitter_.emit(NO,{state:this.state_,reason:SS}));break;case xS:this.log_.info("video track is unable to provide media output"),this.stream_.isRemote()||LI(),BI.emit(130,{stream:this.stream_,type:t}),this.state_!==$S&&(this.state_=$S,this.emitter_.emit(NO,{state:this.state_,reason:xS}));break;case kS:this.log_.info("video track is able to provide media output"),BI.emit(131,{stream:this.stream_}),this.state_===$S&&(this.state_=MS,this.emitter_.emit(NO,{state:this.state_,reason:kS}))}}},{key:"unbindEvents",value:function(){this.element_&&(this.element_.removeEventListener(CS,this.handleElementEvent),this.element_.removeEventListener(SS,this.handleElementEvent),this.element_.removeEventListener(TS,this.handleElementEvent),this.element_.removeEventListener(ES,this.handleElementEvent),this.element_.removeEventListener(IS,this.handleElementEvent)),this.track_&&(this.track_.removeEventListener(SS,this.handleTrackEvent),this.track_.removeEventListener(xS,this.handleTrackEvent),this.track_.removeEventListener(kS,this.handleTrackEvent))}},{key:"stop",value:function(){this.unbindEvents(),this.div_&&this.div_.removeChild(this.element_),this.element_.srcObject=null,this.element_=null,this.interval_&&gO.clearTask(this.interval_)}},{key:"resume",value:function(){return this.play()}},{key:"getVideoFrame",value:function(){var e=document.createElement("canvas");return e.width=this.element_.videoWidth,e.height=this.element_.videoHeight,e.getContext("2d").drawImage(this.element_,0,0),e.toDataURL("image/png")}},{key:"on",value:function(e,t){this.emitter_.on(e,t)}},{key:"getElement",value:function(){return this.element_?this.element_:null}}]),e}(),BM="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,jM=ha,VM=wa,HM=RangeError,YM=function(e){if(void 0===e)return 0;var t=jM(e),n=VM(t);if(t!==n)throw HM("Wrong length or index");return n},zM=Array,GM=Math.abs,WM=Math.pow,KM=Math.floor,XM=Math.log,ZM=Math.LN2,JM={pack:function(e,t,n){var r,i,o,a=zM(n),s=8*n-t-1,l=(1<<s)-1,c=l>>1,u=23===t?WM(2,-24)-WM(2,-77):0,d=e<0||0===e&&1/e<0?1:0,f=0;for((e=GM(e))!=e||1/0===e?(i=e!=e?1:0,r=l):(r=KM(XM(e)/ZM),e*(o=WM(2,-r))<1&&(r--,o*=2),(e+=r+c>=1?u/o:u*WM(2,1-c))*o>=2&&(r++,o/=2),r+c>=l?(i=0,r=l):r+c>=1?(i=(e*o-1)*WM(2,t),r+=c):(i=e*WM(2,c-1)*WM(2,t),r=0));t>=8;)a[f++]=255&i,i/=256,t-=8;for(r=r<<t|i,s+=t;s>0;)a[f++]=255&r,r/=256,s-=8;return a[--f]|=128*d,a},unpack:function(e,t){var n,r=e.length,i=8*r-t-1,o=(1<<i)-1,a=o>>1,s=i-7,l=r-1,c=e[l--],u=127&c;for(c>>=7;s>0;)u=256*u+e[l--],s-=8;for(n=u&(1<<-s)-1,u>>=-s,s+=t;s>0;)n=256*n+e[l--],s-=8;if(0===u)u=1-a;else{if(u===o)return n?NaN:c?-1/0:1/0;n+=WM(2,t),u-=a}return(c?-1:1)*n*WM(2,u-t)}},QM=ti,e$=ba,t$=ka,n$=function(e){for(var t=QM(this),n=t$(t),r=arguments.length,i=e$(r>1?arguments[1]:void 0,n),o=r>2?arguments[2]:void 0,a=void 0===o?n:e$(o,n);a>i;)t[i++]=e;return t},r$=bn,i$=Hn,o$=wn,a$=BM,s$=vo,l$=co,c$=Nd,u$=yn,d$=cd,f$=ha,p$=wa,h$=YM,g$=JM,m$=_l,v$=Yl,b$=ua.f,_$=Gi.f,y$=n$,w$=Gc,x$=Ol,k$=s$.PROPER,S$=s$.CONFIGURABLE,C$=zo.get,T$=zo.set,E$="ArrayBuffer",I$="Wrong index",A$=r$.ArrayBuffer,R$=A$,O$=R$&&R$.prototype,L$=r$.DataView,P$=L$&&L$.prototype,M$=Object.prototype,$$=r$.Array,N$=r$.RangeError,D$=i$(y$),F$=i$([].reverse),q$=g$.pack,U$=g$.unpack,B$=function(e){return[255&e]},j$=function(e){return[255&e,e>>8&255]},V$=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},H$=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},Y$=function(e){return q$(e,23,4)},z$=function(e){return q$(e,52,8)},G$=function(e,t){_$(e.prototype,t,{get:function(){return C$(this)[t]}})},W$=function(e,t,n,r){var i=h$(n),o=C$(e);if(i+t>o.byteLength)throw N$(I$);var a=C$(o.buffer).bytes,s=i+o.byteOffset,l=w$(a,s,s+t);return r?l:F$(l)},K$=function(e,t,n,r,i,o){var a=h$(n),s=C$(e);if(a+t>s.byteLength)throw N$(I$);for(var l=C$(s.buffer).bytes,c=a+s.byteOffset,u=r(+i),d=0;d<t;d++)l[c+d]=u[o?d:t-d-1]};if(a$){var X$=k$&&A$.name!==E$;if(u$(function(){A$(1)})&&u$(function(){new A$(-1)})&&!u$(function(){return new A$,new A$(1.5),new A$(NaN),1!=A$.length||X$&&!S$}))X$&&S$&&l$(A$,"name",E$);else{(R$=function(e){return d$(this,O$),new A$(h$(e))}).prototype=O$;for(var Z$,J$=b$(A$),Q$=0;J$.length>Q$;)(Z$=J$[Q$++])in R$||l$(R$,Z$,A$[Z$]);O$.constructor=R$}v$&&m$(P$)!==M$&&v$(P$,M$);var eN=new L$(new R$(2)),tN=i$(P$.setInt8);eN.setInt8(0,2147483648),eN.setInt8(1,2147483649),!eN.getInt8(0)&&eN.getInt8(1)||c$(P$,{setInt8:function(e,t){tN(this,e,t<<24>>24)},setUint8:function(e,t){tN(this,e,t<<24>>24)}},{unsafe:!0})}else O$=(R$=function(e){d$(this,O$);var t=h$(e);T$(this,{bytes:D$($$(t),0),byteLength:t}),o$||(this.byteLength=t)}).prototype,L$=function(e,t,n){d$(this,P$),d$(e,O$);var r=C$(e).byteLength,i=f$(t);if(i<0||i>r)throw N$("Wrong offset");if(i+(n=void 0===n?r-i:p$(n))>r)throw N$("Wrong length");T$(this,{buffer:e,byteLength:n,byteOffset:i}),o$||(this.buffer=e,this.byteLength=n,this.byteOffset=i)},P$=L$.prototype,o$&&(G$(R$,"byteLength"),G$(L$,"buffer"),G$(L$,"byteLength"),G$(L$,"byteOffset")),c$(P$,{getInt8:function(e){return W$(this,1,e)[0]<<24>>24},getUint8:function(e){return W$(this,1,e)[0]},getInt16:function(e){var t=W$(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=W$(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return H$(W$(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return H$(W$(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return U$(W$(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return U$(W$(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){K$(this,1,e,B$,t)},setUint8:function(e,t){K$(this,1,e,B$,t)},setInt16:function(e,t){K$(this,2,e,j$,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){K$(this,2,e,j$,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){K$(this,4,e,V$,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){K$(this,4,e,V$,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){K$(this,4,e,Y$,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){K$(this,8,e,z$,t,arguments.length>2?arguments[2]:void 0)}});x$(R$,E$),x$(L$,"DataView");var nN={ArrayBuffer:R$,DataView:L$},rN=ds,iN=Hn,oN=yn,aN=Ji,sN=ba,lN=wa,cN=hw,uN=nN.ArrayBuffer,dN=nN.DataView,fN=dN.prototype,pN=iN(uN.prototype.slice),hN=iN(fN.getUint8),gN=iN(fN.setUint8);rN({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:oN(function(){return!new uN(2).slice(1,void 0).byteLength})},{slice:function(e,t){if(pN&&void 0===t)return pN(aN(this),e);for(var n=aN(this).byteLength,r=sN(e,n),i=sN(void 0===t?n:t,n),o=new(cN(this,uN))(lN(i-r)),a=new dN(this),s=new dN(o),l=0;r<i;)gN(s,l++,hN(a,r++));return o}}),ds({global:!0,constructor:!0,forced:!BM},{DataView:nN.DataView});var mN=ds,vN=op,bN=Hn([].reverse),_N=[1,2];mN({target:"Array",proto:!0,forced:String(_N)===String(_N.reverse())},{reverse:function(){return vN(this)&&(this.length=this.length),bN(this)}});var yN=Dr,wN=ti,xN=Kn,kN=ka,SN=TypeError,CN=function(e){return function(t,n,r,i){yN(n);var o=wN(t),a=xN(o),s=kN(o),l=e?s-1:0,c=e?-1:1;if(r<2)for(;;){if(l in a){i=a[l],l+=c;break}if(l+=c,e?l<0:s<=l)throw SN("Reduce of empty array with no initial value")}for(;e?l>=0:s>l;l+=c)l in a&&(i=n(i,a[l],l,o));return i}},TN={left:CN(!1),right:CN(!0)},EN=TN.left,IN=xr,AN=ow;ds({target:"Array",proto:!0,forced:!uh("reduce")||!AN&&IN>79&&IN<83},{reduce:function(e){var t=arguments.length;return EN(this,e,t,t>1?arguments[1]:void 0)}});var RN=Bd,ON=nN.ArrayBuffer;ds({global:!0,constructor:!0,forced:bn.ArrayBuffer!==ON},{ArrayBuffer:ON}),RN("ArrayBuffer");var LN=ds,PN=op,MN=_p,$N=cr,NN=ba,DN=ka,FN=nr,qN=Bc,UN=yi,BN=Hf,jN=Fp("slice"),VN=UN("species"),HN=Array,YN=Math.max;LN({target:"Array",proto:!0,forced:!jN},{slice:function(e,t){var n,r,i,o=FN(this),a=DN(o),s=NN(e,a),l=NN(void 0===t?a:t,a);if(PN(o)&&(n=o.constructor,(MN(n)&&(n===HN||PN(n.prototype))||$N(n)&&null===(n=n[VN]))&&(n=void 0),n===HN||void 0===n))return BN(o,s,l);for(r=new(void 0===n?HN:n)(YN(l-s,0)),i=0;s<l;s++,i++)s in o&&qN(r,i,o[s]);return r.length=i,r}});var zN=bn,GN=yn,WN=Hn,KN=af,XN=Y_.trim,ZN=D_,JN=zN.parseInt,QN=zN.Symbol,eD=QN&&QN.iterator,tD=/^[+-]?0x/i,nD=WN(tD.exec),rD=8!==JN(ZN+"08")||22!==JN(ZN+"0x16")||eD&&!GN(function(){JN(Object(eD))})?function(e,t){var n=XN(KN(e));return JN(n,t>>>0||(nD(tD,n)?16:10))}:JN;ds({global:!0,forced:parseInt!=rD},{parseInt:rD});var iD,oD,aD,sD={exports:{}},lD=BM,cD=wn,uD=bn,dD=ar,fD=cr,pD=ii,hD=Pc,gD=Pr,mD=co,vD=ca,bD=Gi.f,_D=hr,yD=_l,wD=Yl,xD=yi,kD=ci,SD=zo.enforce,CD=zo.get,TD=uD.Int8Array,ED=TD&&TD.prototype,ID=uD.Uint8ClampedArray,AD=ID&&ID.prototype,RD=TD&&yD(TD),OD=ED&&yD(ED),LD=Object.prototype,PD=uD.TypeError,MD=xD("toStringTag"),$D=kD("TYPED_ARRAY_TAG"),ND=lD&&!!wD&&"Opera"!==hD(uD.opera),DD=!1,FD={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},qD={BigInt64Array:8,BigUint64Array:8},UD=function e(t){var n=yD(t);if(fD(n)){var r=CD(n);return r&&pD(r,"TypedArrayConstructor")?r.TypedArrayConstructor:e(n)}},BD=function(e){if(!fD(e))return!1;var t=hD(e);return pD(FD,t)||pD(qD,t)};for(iD in FD)(aD=(oD=uD[iD])&&oD.prototype)?SD(aD).TypedArrayConstructor=oD:ND=!1;for(iD in qD)(aD=(oD=uD[iD])&&oD.prototype)&&(SD(aD).TypedArrayConstructor=oD);if((!ND||!dD(RD)||RD===Function.prototype)&&(RD=function(){throw PD("Incorrect invocation")},ND))for(iD in FD)uD[iD]&&wD(uD[iD],RD);if((!ND||!OD||OD===LD)&&(OD=RD.prototype,ND))for(iD in FD)uD[iD]&&wD(uD[iD].prototype,OD);if(ND&&yD(AD)!==OD&&wD(AD,OD),cD&&!pD(OD,MD))for(iD in DD=!0,bD(OD,MD,{get:function(){return fD(this)?this[$D]:void 0}}),FD)uD[iD]&&mD(uD[iD],$D,iD);var jD={NATIVE_ARRAY_BUFFER_VIEWS:ND,TYPED_ARRAY_TAG:DD&&$D,aTypedArray:function(e){if(BD(e))return e;throw PD("Target is not a typed array")},aTypedArrayConstructor:function(e){if(dD(e)&&(!wD||_D(RD,e)))return e;throw PD(gD(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n,r){if(cD){if(n)for(var i in FD){var o=uD[i];if(o&&pD(o.prototype,e))try{delete o.prototype[e]}catch(n){try{o.prototype[e]=t}catch(e){}}}OD[e]&&!n||vD(OD,e,n?t:ND&&ED[e]||t,r)}},exportTypedArrayStaticMethod:function(e,t,n){var r,i;if(cD){if(wD){if(n)for(r in FD)if((i=uD[r])&&pD(i,e))try{delete i[e]}catch(e){}if(RD[e]&&!n)return;try{return vD(RD,e,n?t:ND&&RD[e]||t)}catch(e){}}for(r in FD)!(i=uD[r])||i[e]&&!n||vD(i,e,t)}},getTypedArrayConstructor:UD,isView:function(e){if(!fD(e))return!1;var t=hD(e);return"DataView"===t||pD(FD,t)||pD(qD,t)},isTypedArray:BD,TypedArray:RD,TypedArrayPrototype:OD},VD=bn,HD=yn,YD=hd,zD=jD.NATIVE_ARRAY_BUFFER_VIEWS,GD=VD.ArrayBuffer,WD=VD.Int8Array,KD=!zD||!HD(function(){WD(1)})||!HD(function(){new WD(-1)})||!YD(function(e){new WD,new WD(null),new WD(1.5),new WD(e)},!0)||HD(function(){return 1!==new WD(new GD(2),1,void 0).length}),XD=ha,ZD=RangeError,JD=function(e){var t=XD(e);if(t<0)throw ZD("The argument can't be less than 0");return t},QD=RangeError,eF=function(e,t){var n=JD(e);if(n%t)throw QD("Wrong offset");return n},tF=Pc,nF=Hn("".slice),rF=Ii,iF=TypeError,oF=function(e){var t=rF(e,"number");if("number"==typeof t)throw iF("Can't convert number to bigint");return BigInt(t)},aF=Cu,sF=Cn,lF=cw,cF=ti,uF=ka,dF=ju,fF=$u,pF=Au,hF=function(e){return"Big"===nF(tF(e),0,3)},gF=jD.aTypedArrayConstructor,mF=oF,vF=ds,bF=bn,_F=Cn,yF=wn,wF=KD,xF=jD,kF=nN,SF=cd,CF=Ln,TF=co,EF=uA,IF=wa,AF=YM,RF=eF,OF=Oi,LF=ii,PF=Pc,MF=cr,$F=Or,NF=el,DF=hr,FF=Yl,qF=ua.f,UF=function(e){var t,n,r,i,o,a,s,l,c=lF(this),u=cF(e),d=arguments.length,f=d>1?arguments[1]:void 0,p=void 0!==f,h=fF(u);if(h&&!pF(h))for(l=(s=dF(u,h)).next,u=[];!(a=sF(l,s)).done;)u.push(a.value);for(p&&d>2&&(f=aF(f,arguments[2])),n=uF(u),r=new(gF(c))(n),i=hF(r),t=0;n>t;t++)o=p?f(u[t],t):u[t],r[t]=i?mF(o):+o;return r},BF=Mp.forEach,jF=Bd,VF=Gi,HF=_n,YF=bd,zF=zo.get,GF=zo.set,WF=zo.enforce,KF=VF.f,XF=HF.f,ZF=Math.round,JF=bF.RangeError,QF=kF.ArrayBuffer,eq=QF.prototype,tq=kF.DataView,nq=xF.NATIVE_ARRAY_BUFFER_VIEWS,rq=xF.TYPED_ARRAY_TAG,iq=xF.TypedArray,oq=xF.TypedArrayPrototype,aq=xF.aTypedArrayConstructor,sq=xF.isTypedArray,lq="BYTES_PER_ELEMENT",cq="Wrong length",uq=function(e,t){aq(e);for(var n=0,r=t.length,i=new e(r);r>n;)i[n]=t[n++];return i},dq=function(e,t){KF(e,t,{get:function(){return zF(this)[t]}})},fq=function(e){var t;return DF(eq,e)||"ArrayBuffer"==(t=PF(e))||"SharedArrayBuffer"==t},pq=function(e,t){return sq(e)&&!$F(t)&&t in e&&EF(+t)&&t>=0},hq=function(e,t){return t=OF(t),pq(e,t)?CF(2,e[t]):XF(e,t)},gq=function(e,t,n){return t=OF(t),!(pq(e,t)&&MF(n)&&LF(n,"value"))||LF(n,"get")||LF(n,"set")||n.configurable||LF(n,"writable")&&!n.writable||LF(n,"enumerable")&&!n.enumerable?KF(e,t,n):(e[t]=n.value,e)};yF?(nq||(HF.f=hq,VF.f=gq,dq(oq,"buffer"),dq(oq,"byteOffset"),dq(oq,"byteLength"),dq(oq,"length")),vF({target:"Object",stat:!0,forced:!nq},{getOwnPropertyDescriptor:hq,defineProperty:gq}),sD.exports=function(e,t,n){var r=e.match(/\d+$/)[0]/8,i=e+(n?"Clamped":"")+"Array",o="get"+e,a="set"+e,s=bF[i],l=s,c=l&&l.prototype,u={},d=function(e,t){KF(e,t,{get:function(){return function(e,t){var n=zF(e);return n.view[o](t*r+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,i){var o=zF(e);n&&(i=(i=ZF(i))<0?0:i>255?255:255&i),o.view[a](t*r+o.byteOffset,i,!0)}(this,t,e)},enumerable:!0})};nq?wF&&(l=t(function(e,t,n,i){return SF(e,c),YF(MF(t)?fq(t)?void 0!==i?new s(t,RF(n,r),i):void 0!==n?new s(t,RF(n,r)):new s(t):sq(t)?uq(l,t):_F(UF,l,t):new s(AF(t)),e,l)}),FF&&FF(l,iq),BF(qF(s),function(e){e in l||TF(l,e,s[e])}),l.prototype=c):(l=t(function(e,t,n,i){SF(e,c);var o,a,s,u=0,f=0;if(MF(t)){if(!fq(t))return sq(t)?uq(l,t):_F(UF,l,t);o=t,f=RF(n,r);var p=t.byteLength;if(void 0===i){if(p%r)throw JF(cq);if((a=p-f)<0)throw JF(cq)}else if((a=IF(i)*r)+f>p)throw JF(cq);s=a/r}else s=AF(t),o=new QF(a=s*r);for(GF(e,{buffer:o,byteOffset:f,byteLength:a,length:s,view:new tq(o)});u<s;)d(e,u++)}),FF&&FF(l,iq),c=l.prototype=NF(oq)),c.constructor!==l&&TF(c,"constructor",l),WF(c).TypedArrayConstructor=l,rq&&TF(c,rq,i);var f=l!=s;u[i]=l,vF({global:!0,constructor:!0,forced:f,sham:!nq},u),lq in l||TF(l,lq,r),lq in c||TF(c,lq,r),jF(i)}):sD.exports=function(){},(0,sD.exports)("Uint8",function(e){return function(t,n,r){return e(this,t,n,r)}});var mq=ti,vq=ba,bq=ka,_q=Kp,yq=Math.min,wq=[].copyWithin||function(e,t){var n=mq(this),r=bq(n),i=vq(e,r),o=vq(t,r),a=arguments.length>2?arguments[2]:void 0,s=yq((void 0===a?r:vq(a,r))-o,r-i),l=1;for(o<i&&i<o+s&&(l=-1,o+=s-1,i+=s-1);s-- >0;)o in n?n[i]=n[o]:_q(n,i),i+=l,o+=l;return n},xq=jD,kq=Hn(wq),Sq=xq.aTypedArray;(0,xq.exportTypedArrayMethod)("copyWithin",function(e,t){return kq(Sq(this),e,t,arguments.length>2?arguments[2]:void 0)});var Cq=Mp.every,Tq=jD.aTypedArray;(0,jD.exportTypedArrayMethod)("every",function(e){return Cq(Tq(this),e,arguments.length>1?arguments[1]:void 0)});var Eq=n$,Iq=oF,Aq=Pc,Rq=Cn,Oq=yn,Lq=jD.aTypedArray,Pq=jD.exportTypedArrayMethod,Mq=Hn("".slice);Pq("fill",function(e){var t=arguments.length;Lq(this);var n="Big"===Mq(Aq(this),0,3)?Iq(e):+e;return Rq(Eq,this,n,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)},Oq(function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),1!==e}));var $q=ka,Nq=hw,Dq=jD.aTypedArrayConstructor,Fq=jD.getTypedArrayConstructor,qq=function(e){return Dq(Nq(e,Fq(e)))},Uq=function(e,t){for(var n=0,r=$q(t),i=new e(r);r>n;)i[n]=t[n++];return i},Bq=qq,jq=Mp.filter,Vq=function(e,t){return Uq(Bq(e),t)},Hq=jD.aTypedArray;(0,jD.exportTypedArrayMethod)("filter",function(e){var t=jq(Hq(this),e,arguments.length>1?arguments[1]:void 0);return Vq(this,t)});var Yq=Mp.find,zq=jD.aTypedArray;(0,jD.exportTypedArrayMethod)("find",function(e){return Yq(zq(this),e,arguments.length>1?arguments[1]:void 0)});var Gq=Mp.findIndex,Wq=jD.aTypedArray;(0,jD.exportTypedArrayMethod)("findIndex",function(e){return Gq(Wq(this),e,arguments.length>1?arguments[1]:void 0)});var Kq=Mp.forEach,Xq=jD.aTypedArray;(0,jD.exportTypedArrayMethod)("forEach",function(e){Kq(Xq(this),e,arguments.length>1?arguments[1]:void 0)});var Zq=Ia.includes,Jq=jD.aTypedArray;(0,jD.exportTypedArrayMethod)("includes",function(e){return Zq(Jq(this),e,arguments.length>1?arguments[1]:void 0)});var Qq=Ia.indexOf,eU=jD.aTypedArray;(0,jD.exportTypedArrayMethod)("indexOf",function(e){return Qq(eU(this),e,arguments.length>1?arguments[1]:void 0)});var tU=bn,nU=yn,rU=Hn,iU=jD,oU=kc,aU=yi("iterator"),sU=tU.Uint8Array,lU=rU(oU.values),cU=rU(oU.keys),uU=rU(oU.entries),dU=iU.aTypedArray,fU=iU.exportTypedArrayMethod,pU=sU&&sU.prototype,hU=!nU(function(){pU[aU].call([1])}),gU=!!pU&&pU.values&&pU[aU]===pU.values&&"values"===pU.values.name,mU=function(){return lU(dU(this))};fU("entries",function(){return uU(dU(this))},hU),fU("keys",function(){return cU(dU(this))},hU),fU("values",mU,hU||!gU,{name:"values"}),fU(aU,mU,hU||!gU,{name:"values"});var vU=jD.aTypedArray,bU=jD.exportTypedArrayMethod,_U=Hn([].join);bU("join",function(e){return _U(vU(this),e)});var yU=Vf,wU=nr,xU=ha,kU=ka,SU=uh,CU=Math.min,TU=[].lastIndexOf,EU=!!TU&&1/[1].lastIndexOf(1,-0)<0,IU=SU("lastIndexOf"),AU=EU||!IU?function(e){if(EU)return yU(TU,this,arguments)||0;var t=wU(this),n=kU(t),r=n-1;for(arguments.length>1&&(r=CU(r,xU(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}:TU,RU=Vf,OU=AU,LU=jD.aTypedArray;(0,jD.exportTypedArrayMethod)("lastIndexOf",function(e){var t=arguments.length;return RU(OU,LU(this),t>1?[e,arguments[1]]:[e])});var PU=Mp.map,MU=qq,$U=jD.aTypedArray;(0,jD.exportTypedArrayMethod)("map",function(e){return PU($U(this),e,arguments.length>1?arguments[1]:void 0,function(e,t){return new(MU(e))(t)})});var NU=TN.left,DU=jD.aTypedArray;(0,jD.exportTypedArrayMethod)("reduce",function(e){var t=arguments.length;return NU(DU(this),e,t,t>1?arguments[1]:void 0)});var FU=TN.right,qU=jD.aTypedArray;(0,jD.exportTypedArrayMethod)("reduceRight",function(e){var t=arguments.length;return FU(qU(this),e,t,t>1?arguments[1]:void 0)});var UU=jD.aTypedArray,BU=jD.exportTypedArrayMethod,jU=Math.floor;BU("reverse",function(){for(var e,t=this,n=UU(t).length,r=jU(n/2),i=0;i<r;)e=t[i],t[i++]=t[--n],t[n]=e;return t});var VU=bn,HU=Cn,YU=jD,zU=ka,GU=eF,WU=ti,KU=yn,XU=VU.RangeError,ZU=VU.Int8Array,JU=ZU&&ZU.prototype,QU=JU&&JU.set,eB=YU.aTypedArray,tB=YU.exportTypedArrayMethod,nB=!KU(function(){var e=new Uint8ClampedArray(2);return HU(QU,e,{length:1,0:3},1),3!==e[1]}),rB=nB&&YU.NATIVE_ARRAY_BUFFER_VIEWS&&KU(function(){var e=new ZU(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]});tB("set",function(e){eB(this);var t=GU(arguments.length>1?arguments[1]:void 0,1),n=WU(e);if(nB)return HU(QU,this,n,t);var r=this.length,i=zU(n),o=0;if(i+t>r)throw XU("Wrong length");for(;o<i;)this[t+o]=n[o++]},!nB||rB);var iB=qq,oB=Hf,aB=jD.aTypedArray;(0,jD.exportTypedArrayMethod)("slice",function(e,t){for(var n=oB(aB(this),e,t),r=iB(this),i=0,o=n.length,a=new r(o);o>i;)a[i]=n[i++];return a},yn(function(){new Int8Array(1).slice()}));var sB=Mp.some,lB=jD.aTypedArray;(0,jD.exportTypedArrayMethod)("some",function(e){return sB(lB(this),e,arguments.length>1?arguments[1]:void 0)});var cB=gr.match(/firefox\/(\d+)/i),uB=!!cB&&+cB[1],dB=/MSIE|Trident/.test(gr),fB=gr.match(/AppleWebKit\/(\d+)\./),pB=!!fB&&+fB[1],hB=Hn,gB=yn,mB=Dr,vB=fv,bB=uB,_B=dB,yB=xr,wB=pB,xB=jD.aTypedArray,kB=jD.exportTypedArrayMethod,SB=bn.Uint16Array,CB=SB&&hB(SB.prototype.sort),TB=!(!CB||gB(function(){CB(new SB(2),null)})&&gB(function(){CB(new SB(2),{})})),EB=!!CB&&!gB(function(){if(yB)return yB<74;if(bB)return bB<67;if(_B)return!0;if(wB)return wB<602;var e,t,n=new SB(516),r=Array(516);for(e=0;e<516;e++)t=e%4,n[e]=515-e,r[e]=e-2*t+3;for(CB(n,function(e,t){return(e/4|0)-(t/4|0)}),e=0;e<516;e++)if(n[e]!==r[e])return!0});kB("sort",function(e){return void 0!==e&&mB(e),EB?CB(this,e):vB(xB(this),function(e){return function(t,n){return void 0!==e?+e(t,n)||0:n!=n?-1:t!=t?1:0===t&&0===n?1/t>0&&1/n<0?1:-1:t>n}}(e))},!EB||TB);var IB=wa,AB=ba,RB=qq,OB=jD.aTypedArray;(0,jD.exportTypedArrayMethod)("subarray",function(e,t){var n=OB(this),r=n.length,i=AB(e,r);return new(RB(n))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,IB((void 0===t?r:AB(t,r))-i))});var LB=Vf,PB=jD,MB=yn,$B=Hf,NB=bn.Int8Array,DB=PB.aTypedArray,FB=PB.exportTypedArrayMethod,qB=[].toLocaleString,UB=!!NB&&MB(function(){qB.call(new NB(1))});FB("toLocaleString",function(){return LB(qB,UB?$B(DB(this)):DB(this),$B(arguments))},MB(function(){return[1,2].toLocaleString()!=new NB([1,2]).toLocaleString()})||!MB(function(){NB.prototype.toLocaleString.call([1,2])}));var BB=jD.exportTypedArrayMethod,jB=yn,VB=Hn,HB=bn.Uint8Array,YB=HB&&HB.prototype||{},zB=[].toString,GB=VB([].join);jB(function(){zB.call({})})&&(zB=function(){return GB(this)}),BB("toString",zB,YB.toString!=zB);var WB=function(){function e(t,n,r){s(this,e),this.isUplink_=r,this.connection_=t,this.log_=n,this.seiMessageList_=[],this.seiPayloadType_=243,this.mainVideoSenderOrReceiver_=null,this.mainVideoAbortController_=null,this.abortMap_=new j.default,this.onSEIMessage=null}return d(e,[{key:"isRunning",get:function(){return!!this.mainVideoAbortController_}},{key:"start",value:function(e){this.mainVideoSenderOrReceiver_=e;var t=e.createEncodedStreams(),n=t.readable,r=t.writable,i=new TransformStream({transform:this.isUplink_?this.encodeVideoFrame.bind(this):this.decodeVideoFrame.bind(this)});this.mainVideoAbortController_=new AbortController,n.pipeThrough(i).pipeTo(r,{signal:this.mainVideoAbortController_.signal}).catch(function(){})}},{key:"restart",value:function(e){this.stop(),this.start(e)}},{key:"stop",value:function(){var e;null===(e=this.mainVideoAbortController_)||void 0===e||e.abort(),this.mainVideoAbortController_=null}},{key:"destroy",value:function(){this.stop(),this.abortMap_.forEach(function(e){return e.abort()}),this.abortMap_.clear(),this.log_=null,this.onSEIMessage=null,this.mainVideoSenderOrReceiver_=null,this.connection_=null}},{key:"handleEncodedStreams",value:function(){var e=this;try{var t=this.connection_.getPeerConnection();this.clearUnusedSenderOrReceiver(t),this.isUplink_?t.getSenders().forEach(function(t,n){if(1===n){if(t===e.mainVideoSenderOrReceiver_)return;e.isRunning?e.restart(t):e.start(t)}else{if(e.abortMap_.has(t))return;e.pipeSenderOrReceiver(t)}}):t.getReceivers().forEach(function(t,n){var r;e.abortMap_.has(t)||t===e.mainVideoSenderOrReceiver_||(1===n&&(null===(r=t.track)||void 0===r?void 0:r.kind)===hS?e.isRunning?e.restart(t):e.start(t):e.pipeSenderOrReceiver(t))})}catch(e){this.log_.warn(e)}}},{key:"pipeSenderOrReceiver",value:function(e){var t=e.createEncodedStreams(),n=t.readable,r=t.writable,i=new AbortController;this.abortMap_.set(e,i),n.pipeTo(r,{signal:i.signal}).catch(function(){})}},{key:"clearUnusedSenderOrReceiver",value:function(e){var t=this;this.abortMap_.forEach(function(n,r){(t.isUplink_?e.getSenders():e.getReceivers()).find(function(e){return e===r})||(n.abort(),t.abortMap_.delete(r))})}},{key:"push",value:function(e,t){t&&t.seiPayloadType&&(this.seiPayloadType_=t.seiPayloadType),this.seiMessageList_.push(e)}},{key:"hasSEI",value:function(e){var t=new DataView(e);return 1===t.getInt32(0)&&6===t.getInt8(4)}},{key:"isEmptyFrame",value:function(e){return"empty"===e.type||0===e.data.byteLength}},{key:"getNaluCount",value:function(e){for(var t=0,n=0,r=new DataView(e),i=0;i<e.byteLength;i++)switch(r.getUint8(i)){case 0:t++;break;case 1:2!==t&&3!==t||n++,t=0;break;default:t=0}return n}},{key:"encodeVideoFrame",value:function(e,t){try{if(this.connection_.isH264&&this.seiMessageList_.length>0&&!this.isEmptyFrame(e)){var n=9-this.getNaluCount(e.data);if(n<=0)return;for(var r=this.seiMessageList_.splice(0,n).reverse().map(this.encodeSEINalu.bind(this)),i=r.reduce(function(e,t){return e+t.dataView.byteLength},0),o=new ArrayBuffer(i+e.data.byteLength),a=new DataView(o),s=new DataView(e.data),l=0,c=0;c<r.length;c++)for(var u=0;u<r[c].dataView.byteLength;u++)a.setInt8(l++,r[c].dataView.getInt8(u));for(var d=0;d<e.data.byteLength;d++)a.setInt8(l++,s.getInt8(d));e.data=o,this.log_.debug("".concat(r.length," sei sent"))}}catch(e){this.log_.warn(e)}t.enqueue(e)}},{key:"decodeVideoFrame",value:function(e,t){var n=this;try{if(this.connection_.isH264&&!this.isEmptyFrame(e)&&this.hasSEI(e.data)){for(var r=[],i=new DataView(e.data),o=0,a=-1,s=-1,l=0;l<e.data.byteLength;l++){var c=i.getUint8(l);if(0===c)o++;else if(1===c){if(2===o||3===o){var u=l-o;if(-1===a?a=u:-1===s&&(s=u,r.push(new KB(new DataView(i.buffer.slice(a,s)))),a=u,s=-1),!(6===i.getUint8(l+1))){e.data=new DataView(i.buffer.slice(u)).buffer;break}}o=0}else o=0}this.log_.debug("".concat(r.length," sei received")),kI(this.onSEIMessage)&&r.reverse().forEach(function(e){n.onSEIMessage({seiPayloadType:e.seiPayloadType,data:e.seiPayload.buffer})})}}catch(e){this.log_.warn(e)}t.enqueue(e)}},{key:"encodeSEINalu",value:function(e){var t=e.byteLength,n=parseInt(t/255),r=t%255,i=[];i.push(0,0,0,1,6,this.seiPayloadType_);for(var o=0;o<n;o++)i.push(255);i.push(r);var a=new DataView(e);return i.push.apply(i,D(new Uint8Array(a.buffer))),i.push(128),new KB(new DataView(new Uint8Array(i).buffer),!0)}}]),e}(),KB=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];s(this,e),this.dataView=t,this.isSEI&&(n?this.addPreventionByte():this.removePreventionByte())}return d(e,[{key:"addPreventionByte",value:function(){for(var e=this.seiPayloadStartIndex,t=this.dataView.byteLength-2,n=[],r=0,i=e;i<=t;i++){var o=this.dataView.getInt8(i);switch(o){case 0:case 1:case 2:case 3:2===r&&(n.push(3),r=0),0==o?r++:r=0,n.push(o);break;default:r=0,n.push(o)}}n.push(this.dataView.getInt8(this.dataView.byteLength-1));var a=new DataView(new Uint8Array([].concat(D(new Uint8Array(this.dataView.buffer).slice(0,e)),n)).buffer);this.dataView=a}},{key:"removePreventionByte",value:function(){for(var e=this.seiPayloadStartIndex,t=this.dataView.byteLength-1,n=[],r=0,i=e;i<=t;i++)switch(this.dataView.getInt8(i)){case 0:r++,n.push(this.dataView.getInt8(i));break;case 3:2!==r&&n.push(this.dataView.getInt8(i)),r=0;break;default:n.push(this.dataView.getInt8(i)),r=0}var o=new DataView(new Uint8Array([].concat(D(new Uint8Array(this.dataView.buffer).slice(0,e)),n)).buffer);this.dataView=o}},{key:"isSEI",get:function(){return 6===this.dataView.getUint8(4)}},{key:"seiPayloadStartIndex",get:function(){for(var e=6,t=6;t<this.dataView.buffer.byteLength&&(e++,255===this.dataView.getUint8(t));t++);return e}},{key:"seiPayloadType",get:function(){return this.isSEI?this.dataView.getUint8(5):null}},{key:"seiPayload",get:function(){if(!this.isSEI)return null;for(var e=0,t=6,n=6;n<this.dataView.buffer.byteLength;n++){var r=this.dataView.getUint8(n);if(t++,255!==r){e+=r;break}e+=255}for(var i=new ArrayBuffer(e),o=new DataView(i),a=0;a<i.byteLength;a++,t++)o.setInt8(a,this.dataView.getInt8(t));return o}}]),e}(),XB=function(){function e(t){s(this,e),this.userId_=t.userId,this.tinyId_=t.tinyId,this.client_=t.client,this.sdpSemantics_=t.client.getSdpSemantics(),this.isUplink_=t.isUplink,this.log_=aA.createLogger({id:"n|"+this.userId_,userId:this.client_.getUserId(),sdkAppId:this.client_.getSDKAppId(),isLocal:this.isUplink_}),this.signalChannel_=t.signalChannel,this.peerConnection_=null,this.isErrorObserved_=!1,this.emitter_=new UI,this.currentState_=QS,this.waitForPeerConnectionConnectedPromise_=null,this.isReconnecting_=!1,this.reconnectionCount_=0,this.reconnectionTimer_=-1,this.isFirstConnection_=!0,this.delay_={audioDelay:0,videoDelay:0},this.enableSEI_=t.enableSEI,this.enableSEI_&&EO&&(this.sei_=new WB(this,this.log_,this.isUplink_))}var t;return d(e,[{key:"initialize",value:function(){var e={encodedInsertableStreams:this.enableSEI_&&EO,iceServers:this.client_.getIceServers(),iceTransportPolicy:this.client_.getIceTransportPolicy(),sdpSemantics:this.sdpSemantics_,bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",tcpCandidatePolicy:"disable",IceTransportsType:"nohost"};this.peerConnection_=new RTCPeerConnection(e),this.peerConnection_.onconnectionstatechange=this.onConnectionStateChange.bind(this)}},{key:"close",value:function(){this.log_.info("closing connection"),this.closePeerConnection(),this.sei_&&(this.sei_.destroy(),this.sei_=null)}},{key:"closePeerConnection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.peerConnection_&&(this.peerConnection_.onconnectionstatechange=function(){},this.peerConnection_.close(),this.peerConnection_=null,e&&this.emitConnectionStateChangedEvent(QS))}},{key:"getDTLSTransportState",value:function(){if(!this.peerConnection_)return JS;var e=null;if(this.isUplink_){if(!Ct()||0===this.peerConnection_.getSenders().length)return JS;e=this.peerConnection_.getSenders()[0].transport}else{if(!St()||0===this.peerConnection_.getReceivers().length)return JS;e=this.peerConnection_.getReceivers()[0].transport}return e?e.state:JS}},{key:"onConnectionStateChange",value:function(e){var t=this.peerConnection_.iceConnectionState,n=this.getDTLSTransportState();if(this.log_.info("onConnectionStateChange() connectionState: "+e.target.connectionState),this.log_.info("ICE Transport state: ".concat(t,", DTLS Transport state: ").concat(n)),e.target.connectionState===rC&&this.emitConnectionStateChangedEvent(eC),"failed"===e.target.connectionState||e.target.connectionState===iC){var r="".concat(this.isUplink_?"uplink":"downlink"," ICE/DTLS Transport connection ").concat(e.target.connectionState,". ICE Transport state: ").concat(t,", DTLS Transport state: ").concat(n),i=new _R({message:r,code:bR.ICE_TRANSPORT_ERROR});CR.logFailedEvent({userId:this.client_.getUserId(),eventType:mC,error:i}),this.emitConnectionStateChangedEvent(QS),this.isErrorObserved_||this.emitter_.emit(LO.ERROR,i)}e.target.connectionState!==oC&&"completed"!==e.target.connectionState||(this.logSelectedCandidate(),CR.logSuccessEvent({userId:this.client_.getUserId(),eventType:mC}),this.emitConnectionStateChangedEvent(nC))}},{key:"emitConnectionStateChangedEvent",value:function(e){e!==this.currentState_&&(this.currentState_===tC&&e===eC||(BI.emit(200,{client:this.client_,connection:this,prevState:this.currentState_,state:e}),this.emitter_.emit(LO.CONNECTION_STATE_CHANGED,{prevState:this.currentState_,state:e}),this.currentState_=e))}},{key:"hitTest",value:function(e){return(0===e||"0"===e)&&this.isUplink_||e===this.tinyId_}},{key:"addEventInternal",value:function(e,t){var n=this.client_.getUserId(),r={eventId:e,eventDesc:t,timestamp:Db(),userId:n,tinyId:this.client_.getTinyId()};this.isUplink_||(r.remoteUserId=this.userId_,r.remoteTinyId=this.tinyId_),wR(n,r)}},{key:"getPeerConnection",value:function(){return this.peerConnection_}},{key:"getClient",value:function(){return this.client_}},{key:"getUserId",value:function(){return this.userId_}},{key:"getTinyId",value:function(){return this.tinyId_}},{key:"logSelectedCandidate",value:(t=a(n().mark(function e(){var t,r,i,o,a,s,l;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.peerConnection_){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.peerConnection_.getStats();case 4:t=e.sent,r=V(t),e.prev=6,r.s();case 8:if((i=r.n()).done){e.next=18;break}if((o=$(i.value,2))[0],!Lt(a=o[1])){e.next=16;break}return s=t.get(a.localCandidateId),l=t.get(a.remoteCandidateId),s&&this.log_.info("local candidate: ".concat(s.candidateType," ").concat(s.protocol,":").concat(s.ip||s.address,":").concat(s.port," ").concat(s.networkType||""," ").concat("relay"===s.candidateType?"relayProtocol:"+s.relayProtocol:"")),l&&this.log_.info("remote candidate: ".concat(l.candidateType," ").concat(l.protocol,":").concat(l.ip||l.address,":").concat(l.port)),e.abrupt("break",18);case 16:e.next=8;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(6),r.e(e.t0);case 23:return e.prev=23,r.f(),e.finish(23);case 26:case"end":return e.stop()}},e,this,[[6,20,23,26]])})),function(){return t.apply(this,arguments)})},{key:"getCurrentState",value:function(){return this.currentState_}},{key:"waitForPeerConnectionConnected",value:function(){var e=this;return this.waitForPeerConnectionConnectedPromise_||(this.waitForPeerConnectionConnectedPromise_=new W.default(function(t,n){if(e.currentState_===nC)return t();var r=-1,i=function(e){e.state===nC&&(clearTimeout(r),a(),t())},o=function(t){t.client===e.client_&&(clearTimeout(r),a(),n(new _R({code:bR.API_CALL_ABORTED,message:st({key:"CONNECTION_ABORTED",data:"leave room"})})))},a=function(){BI.off(YI,o,e),e.emitter_.off(LO.CONNECTION_STATE_CHANGED,i,e)};r=setTimeout(function(){a();var e=new _R({code:bR.API_CALL_TIMEOUT,message:"connection timeout"});n(e)},1e4),BI.on(YI,o,e),e.emitter_.on(LO.CONNECTION_STATE_CHANGED,i,e)}),this.waitForPeerConnectionConnectedPromise_=this.waitForPeerConnectionConnectedPromise_.then(function(t){return e.waitForPeerConnectionConnectedPromise_=null,t}).catch(function(t){throw e.waitForPeerConnectionConnectedPromise_=null,t})),this.waitForPeerConnectionConnectedPromise_}},{key:"getReconnectionCount",value:function(){return this.reconnectionCount_}},{key:"startReconnection",value:function(){this.isReconnecting_=!0,this.emitConnectionStateChangedEvent(tC),this.reconnect(),this.addEventInternal(this.isUplink_?32797:32800,"".concat(this.isUplink_?"uplink":"downlink","-connection is reconnecting"))}},{key:"stopReconnection",value:function(){this.log_.info("stop reconnection"),this.isReconnecting_=!1,this.reconnectionCount_=0,this.clearReconnectionTimer(),this.signalChannel_.off(3,this.reconnect,this)}},{key:"on",value:function(e,t,n){this.emitter_.on(e,t,n)}},{key:"off",value:function(e,t,n){this.emitter_.off(e,t,n)}},{key:"setDelay",value:function(e){var t=e.audioDelay,n=e.videoDelay;this.delay_={audioDelay:t,videoDelay:n}}},{key:"getDelay",value:function(){return this.delay_}},{key:"isH264",get:function(){var e,t;return!(null===(e=this.peerConnection_)||void 0===e||null===(t=e.remoteDescription)||void 0===t||!t.sdp.includes("H264"))}}]),e}(),ZB=function(){function e(){s(this,e),this.set_=new m.default,BI.on(jI,this.add,this),BI.on(VI,this.add,this),BI.on(HI,this.delete,this),BI.on(YI,this.delete,this)}return d(e,[{key:"add",value:function(e){var t=e.client,n=e.roomId;if("rtc"!==t.getMode()){var r=this.getKey(t.getUserId(),n||t.getRoomId(),t.getSDKAppId(),t.getUseStringRoomId());this.set_.add(r)}}},{key:"delete",value:function(e){var t=e.client;if("rtc"!==t.getMode()){var n=this.getKey(t.getUserId(),t.getRoomId(),t.getSDKAppId(),t.getUseStringRoomId());this.set_.delete(n)}}},{key:"getKey",value:function(e,t,n,r){return"".concat(n,"_").concat(t,"_").concat(e,"_").concat(r)}},{key:"isJoined",value:function(e){var t=e.userId,n=e.roomId,r=e.sdkAppId,i=e.client;return"rtc"!==i.getMode()&&this.set_.has(this.getKey(t,n,r,i.getUseStringRoomId()))}}]),e}(),JB=new ZB,QB={createClient:{name:"clientConfig",required:!0,type:NC,properties:{sdkAppId:{required:!0,type:MC,allowEmpty:!1},userId:{required:!0,type:PC,allowEmpty:!1},userSig:{required:!0,type:PC,allowEmpty:!1},mode:{required:!0,type:PC,values:["rtc",YS]},useStringRoomId:{type:$C},autoSubscribe:{type:$C},enableAutoPlayDialog:{type:$C},streamId:{type:PC},userDefineRecordId:{type:PC},pureAudioPushMode:{type:MC,values:[1,2]},enableSEI:{type:$C}}},createStream:{name:"streamConfig",required:!0,type:NC,properties:{userId:{type:PC},audio:{type:$C},video:{type:$C},screen:{type:$C},screenAudio:{type:$C},microphoneId:{type:PC},cameraId:{type:PC},facingMode:{type:[PC,NC]},audioSource:{instanceOf:window.MediaStreamTrack},videoSource:{instanceOf:window.MediaStreamTrack}},validate:function(e){if(!SI(e.screen)&&e.screen&&SI(e.audio)&&(e.audio=!1),!(SI(e.audio)&&SI(e.video)||SI(e.audioSource)&&SI(e.videoSource)))throw new _R({code:bR.INVALID_PARAMETER,message:st({key:"INVALID_CREATE_STREAM_SOURCE"})});if(!SI(e.screen)&&!0===e.screen&&!0===e.video)throw new _R({code:bR.INVALID_PARAMETER,message:st({key:"INVALID_CREATE_STREAM_SCREEN"})});if(e.audio&&e.screenAudio)throw new _R({code:bR.INVALID_PARAMETER,message:st({key:"INVALID_CREATE_STREAM_AUDIO"})});if(!0!==e.screen&&!0===e.screenAudio)throw new _R({code:bR.INVALID_PARAMETER,message:st({key:"INVALID_CREATE_STREAM_SCREEN_AUDIO"})});if(!SI(e.screen)&&!0===e.screen&&!this.isScreenShareSupported())throw new _R({code:bR.INVALID_OPERATION,message:st({key:"NOT_SUPPORTED_CAPTURE"})})}}},ej={join:{name:"options",required:!0,type:NC,properties:{roomId:{required:!0,type:[MC,PC],allowEmpty:!1,validate:Kt},role:{type:[PC],values:[zS,GS]},privateMapKey:{type:[PC]}},validate:function(e){if(this.isJoined_)throw new _R({code:bR.INVALID_OPERATION,message:st({key:"INVALID_JOIN"})});if(this.checkDestroy(),JB.isJoined({userId:this.userId_,roomId:e.roomId,sdkAppId:this.sdkAppId_,client:this}))throw new _R({code:bR.INVALID_OPERATION,message:st({key:"REPEAT_JOIN",data:this.userId_})})}},publish:[{name:"stream",required:!0,instanceOf:GC,validate:function(e){if(!this.isJoined_)throw new _R({code:bR.INVALID_OPERATION,message:st({key:"INVALID_PUBLISH"})});if(this.mode_===YS&&this.role_===GS)throw new _R({code:bR.INVALID_OPERATION,message:st({key:"INVALID_AUDIENCE"})});if(!e.getIsReadyToPublish())throw new _R({code:bR.INVALID_OPERATION,message:st({key:"INVALID_INITIALIZE"})});if(this.notPublishWithoutH264Supported_)throw new _R({code:bR.NOT_SUPPORTED_H264,message:st({key:jT})})}},{name:"options",type:NC,defaultValue:{isAuxiliary:!1},properties:{isAuxiliary:{type:$C,defaultValue:!1,validate:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e&&!Et())throw new _R({code:bR.NOT_SUPPORTED,message:st({key:"NOT_SUPPORTED_AUX"})});if(this.uplinkConnection_&&(e&&this.uplinkConnection_.isAuxStreamPublished||!e&&this.uplinkConnection_.isMainStreamPublished))throw new _R({code:bR.INVALID_OPERATION,message:st({key:"INVALID_DUPLICATE_PUBLISHING",data:e?bS:"local"})});var t=this.localScreenStream_||D(this.connections_.values()).findIndex(function(e){return e.getTrackState().auxiliary})>=0;if(!this.enableMultiAuxStream_&&e&&t)throw new _R({code:bR.INVALID_OPERATION,message:st({key:"DUPLICATE_AUX"})})}}}}],unpublish:{name:"stream",required:!0,instanceOf:GC,validate:function(e){if(e!==this.localStream_&&e!==this.localAuxStream_){if(this.localStream_||this.localAuxStream_)throw new _R({code:bR.INVALID_PARAMETER,message:st({key:"INVALID_UNPUBLISH"})});this.log_.warn("Client currently has no published stream, please call publish() first.")}}},subscribe:[{name:"stream",required:!0,instanceOf:WC,validate:function(e){if(!e.getConnection())throw new _R({code:bR.INVALID_OPERATION,message:st({key:RT})});if(this.notSubscribeWithoutH264Supported_)throw new _R({code:bR.NOT_SUPPORTED_H264,message:st({key:VT})})}},{name:"options",type:NC,properties:{audio:{type:$C},video:{type:$C},smallVideo:{type:$C}},validate:function(e){var t=e.audio,n=e.video,r=e.smallVideo;if(!1===t&&!1===n&&(SI(r)||!1===r))throw new _R({code:bR.INVALID_OPERATION,message:st({key:"SUBSCRIBE_ALL_FALSE"})})}}],unsubscribe:{name:"stream",required:!0,instanceOf:WC,validate:function(e){if(!e.getConnection())throw new _R({code:bR.INVALID_OPERATION,message:st({key:RT})})}},switchRole:{name:"role",required:!0,values:[zS,GS],validate:function(){if(this.mode_!==YS)throw new _R({code:bR.INVALID_PARAMETER,message:st({key:"INVALID_ROLE"})});if(!this.isJoined_)throw new _R({code:bR.INVALID_OPERATION,message:st({key:"INVALID_OPERATION_SWITCH_ROLE"})})}},startPublishCDNStream:{name:"options",required:!1,properties:{streamId:{type:PC,validate:Xt},streamType:{type:PC,values:["main","auxiliary"]},appId:{type:MC,allowEmpty:!1},bizId:{type:MC,allowEmpty:!1},url:{type:PC,allowEmpty:!1}},validate:function(){if(this.isDestroyed_)throw new _R({code:bR.INVALID_OPERATION,message:st({key:DT,data:{funName:"startPublishCDNStream"}})})}},startMixTranscode:{name:"config",required:!0,type:NC,properties:{mode:{type:PC,values:["preset-layout","manual"]},streamId:{type:PC,validate:Xt},videoWidth:{type:MC,notLessThanZero:!0},videoHeight:{type:MC,notLessThanZero:!0},videoBitrate:{type:MC,notLessThanZero:!0,allowEmpty:!1},videoFramerate:{type:MC,validate:function(e,t,n,r){if(e<=0||e>30)throw new _R({code:bR.INVALID_PARAMETER,message:st({key:"MIX_PARAMS_VIDEO_FRAMERATE",link:{className:r,fnName:n}})})}},videoGop:{type:MC,validate:function(e,t,n,r){if(e<1||e>8)throw new _R({code:bR.INVALID_PARAMETER,message:st({key:"MIX_PARAMS_VIDEO_GOP",link:{className:r,fnName:n}})})}},audioSampleRate:{type:MC,notLessThanZero:!0},audioBitrate:{type:MC,validate:function(e,t,n,r){if(e<32||e>192)throw new _R({code:bR.INVALID_PARAMETER,message:st({key:"MIX_PARAMS_AUDIO_BITRATE",link:{className:r,fnName:n}})})}},audioChannels:{type:MC,values:[1,2]},backgroundColor:{type:MC},backgroundImage:{type:PC},mixUsers:{required:!0,type:"array",arrayItem:{require:!0,type:NC,properties:{userId:{required:!0,type:PC},roomId:{type:[PC,MC],validate:Kt},pureAudio:{type:$C},width:{type:MC,notLessThanZero:!0},height:{type:MC,notLessThanZero:!0},locationX:{type:MC,notLessThanZero:!0},locationY:{type:MC,notLessThanZero:!0},zOrder:{type:MC},streamType:{type:PC,values:["main","auxiliary"]},renderMode:{type:MC,values:[0,1,2,4]}}}}},validate:function(e,t,n,r,i){var o=0,a=0,s=e.mixUsers,l=[];if(s.forEach(function(e,t){if(l.push(e.userId),!e.pureAudio){if(!e.zOrder||e.zOrder<1||e>15)throw new _R({code:bR.INVALID_PARAMETER,message:st({key:"MIX_PARAMS_USER_Z_ORDER",data:"config.mixUsers[".concat(t,"].zOrder"),link:{className:r,fnName:n}})});e.width+e.locationX>o&&(o=e.width+e.locationX),e.height+e.locationY>a&&(a=e.height+e.locationY)}}),l.indexOf(this.getUserId())<0)throw new _R({code:bR.INVALID_PARAMETER,message:st({key:"MIX_PARAMS_NOT_SELF",link:{className:r,fnName:n}})});if(e.videoWidth<o||e.videoHeight<a)throw new _R({code:bR.INVALID_PARAMETER,message:st({key:"MIX_PARAMS_USER_STREAM",link:{className:r,fnName:n}})})}},sendSEIMessage:[{name:"buffer",required:!0,instanceOf:ArrayBuffer,validate:function(e){if(!EO)throw new _R({code:bR.NOT_SUPPORTED,message:st({key:zT})});if(!this.enableSEI_)throw new _R({code:bR.INVALID_OPERATION,message:st({key:"SEI_DISABLED"})});if(e.byteLength>1e3)throw new _R({code:bR.INVALID_PARAMETER,message:st({key:"SEI_OVERSIZE",data:e.byteLength})});if(0===e.byteLength)throw new _R({code:bR.INVALID_PARAMETER,message:st({key:"SEI_EMPTY"})});if(!this.uplinkConnection_||!this.localStream_)throw new _R({code:bR.INVALID_PARAMETER,message:st({key:"SEI_BEFORE_PUBLISH"})});if(!this.localStream_.hasVideo())throw new _R({code:bR.INVALID_OPERATION,message:st({key:"SEI_NOT_VIDEO"})});var t=this.uplinkConnection_.isH264;if(!t)throw new _R({code:bR.NOT_SUPPORTED,message:st({key:zT,data:t})})}},{name:"options",type:NC,properties:{seiPayloadType:{type:MC,values:[5,243]}}}]},tj={play:[{name:"elementId",required:!0,type:[PC,"HTMLDivElement"],validate:function(e,t,n){if(CI(e)){var r=document.getElementById(e);if(!r)throw new _R({code:bR.INVALID_PARAMETER,message:st({key:"INVALID_ELEMENT_ID",data:{key:t,fnName:n}})});if(!(r instanceof HTMLDivElement))throw new _R({code:bR.INVALID_PARAMETER,message:st({key:"INVALID_ELEMENT_ID_TYPE",data:{key:t,fnName:n,type:dt(r)}})})}}},{name:"options",type:NC,properties:{objectFit:{type:PC,values:["contain","cover","fill"]},muted:{type:$C},mirror:{type:$C}}}],addTrack:{name:US,instanceOf:MediaStreamTrack,validate:function(e){if(this.isAddingTrack_)throw new _R({code:bR.INVALID_OPERATION,message:st({key:"INVALID_ADD_TRACK_REPETITIVE"})});if(this.isRemovingTrack_)throw new _R({code:bR.INVALID_OPERATION,message:st({key:"INVALID_ADD_TRACK_REMOVING"})});if(0===this.publishState_)throw new _R({code:bR.INVALID_OPERATION,message:st({key:"INVALID_ADD_TRACK_PUBLISHING"})});var t=this.getMediaStream();if(!t)throw new _R({code:bR.INVALID_OPERATION,message:st({key:NT})});if(e.kind===pS&&t.getAudioTracks().length>0||e.kind===hS&&t.getVideoTracks().length>0)throw new _R({code:bR.INVALID_OPERATION,message:st({key:"INVALID_ADD_TRACK_NUMBER"})});if(!Tt()&&!Ct())throw new _R({code:bR.NOT_SUPPORTED,message:st({key:HT,data:"add"})})}},removeTrack:{name:US,instanceOf:MediaStreamTrack,validate:function(e){if(this.isAddingTrack_)throw new _R({code:bR.INVALID_OPERATION,message:st({key:"INVALID_REMOVE_AUDIO_ADDING"})});if(this.isRemovingTrack_)throw new _R({code:bR.INVALID_OPERATION,message:st({key:"INVALID_REMOVE_AUDIO_ON"})});if(0===this.publishState_)throw new _R({code:bR.INVALID_OPERATION,message:st({key:"INVALID_REMOVE_TRACK_PUBLISHING"})});var t=this.getMediaStream();if(!t)throw new _R({code:bR.INVALID_OPERATION,message:st({key:NT})});if(-1===t.getTracks().indexOf(e))throw new _R({code:bR.INVALID_PARAMETER,message:st({key:"INVALID_REMOVE_TRACK_NOT_PUBLISHING"})});if(!Tt()){if(1===t.getTracks().length)throw new _R({code:bR.INVALID_OPERATION,message:st({key:"INVALID_REMOVE_TRACK_NUMBER"})});if(e.kind===pS)throw new _R({code:bR.INVALID_PARAMETER,message:st({key:"INVALID_REMOVE_AUDIO_TRACK"})});if(!Ct())throw new _R({code:bR.NOT_SUPPORTED,message:st({key:HT,data:"remove"})})}}},replaceTrack:{name:US,instanceOf:MediaStreamTrack,validate:function(e){var t=this.getMediaStream();if(!t)throw new _R({code:bR.INVALID_OPERATION,message:st({key:"INVALID_INITIALIZE_LOCAL_STREAM"})});if(0===this.publishState_)throw new _R({code:bR.INVALID_OPERATION,message:st({key:$T})});if(e.kind===pS&&t.getAudioTracks().length<=0||e.kind===hS&&t.getVideoTracks().length<=0)throw new _R({code:bR.INVALID_PARAMETER,message:st({key:"INVALID_REPLACE_TRACK_NO_TRACK",data:e})});if(!It())throw new _R({code:bR.NOT_SUPPORTED,message:st({key:HT,data:"replace"})})}}},nj={TRTC:QB,CLIENT:ej,LOCAL_STREAM:{switchDevice:[{name:"type",required:!0,type:PC,values:[pS,hS]},{name:"deviceId",required:!0,type:PC,validate:function(){if(this.screen_&&!this.audio_||this.audioSource_||this.videoSource_)throw new _R({code:bR.INVALID_OPERATION,message:st({key:"INVALID_SWITCH_DEVICE"})});if(0===this.publishState_)throw new _R({code:bR.INVALID_OPERATION,message:st({key:"INVALID_SWITCH_DEVICE_PUBLISHING"})});if(!It())throw new _R({code:bR.NOT_SUPPORTED,message:st({key:"NOT_SUPPORTED_SWITCH_DEVICE"})})}}],setAudioCaptureVolume:{name:"volume",type:MC}},STREAM:tj};ds({target:"Number",stat:!0},{isNaN:function(e){return e!=e}});var rj=ds,ij=yn,oj=Dc.f;rj({target:"Object",stat:!0,forced:ij(function(){return!(0,M.default)(1)})},{getOwnPropertyNames:oj});var aj,sj,lj=iL;ds({target:"Array",stat:!0,forced:!hd(function(e){(0,F.default)(e)})},{from:lj});var cj,uj,dj,fj,pj={msg_user_info:0,uint32_video_avg_fps:0,uint32_video_width:0,uint32_video_height:0,uint32_video_avg_bitrate:0,uint32_video_block_time:0,uint32_video_play_time:0,uint32_audio_block_time:0,uint32_audio_play_time:0,uint32_audio_play_db:0,uint32_avg_down_loss:0,uint32_stream_type:0,uint32_video_render_first:0,uint32_video_block_count:0,uint32_audio_block_count:0,uint32_audio_bitrate:0,uint32_video_black_screen_subjective:0,uint32_audio_recv_bitrate:0,uint32_video_external_block_time:0},hj=d(function e(t){s(this,e),this.str_identifier=String(t.userId),this.uint64_tinyid=Number(t.tinyId),this.uint32_role=t.role}),gj=(aj=tn({timeout:500,retries:3}),sj=function(){function e(t){var r=this;s(this,e),this.frameWorkType_=t.frameWorkType||30,this.component_=t.component||0,this.client_=t.client,this.keyPrefix_="key_point",this.storageKey_="".concat(this.keyPrefix_,"_").concat(this.client_.getUserId()),this.log_=aA.createLogger({id:"kpm|"+this.client_.getUserId(),userId:this.client_.getUserId(),sdkAppId:this.client_.getSDKAppId()}),(0,M.default)(this.__proto__).forEach(function(e){e.startsWith("handle")&&kI(r[e])&&(r[e]=function(e){var t=e.fn,r=e.context;return a(n().mark(function e(){var i,o,a,s=arguments;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,i=s.length,o=new Array(i),a=0;a<i;a++)o[a]=s[a];return e.next=4,t.apply(r||this,o);case 4:return e.abrupt("return",e.sent);case 7:e.prev=7,e.t0=e.catch(0),aA.error("".concat(t.name,"() error observed ")+e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}))}({fn:r[e],context:r}))}),this.initData(),this.installEvents(),this.intervalId_=gO.run(lT,this.setStorage.bind(this),{delay:2e4})}var r,i,o;return d(e,[{key:"initData",value:function(){this.firstPublishedUserList_=[],this.networkQuality_={totalUplinkRTT:0,totalUplinkLoss:0,count:0,totalDownlinkRTTAndLossMap:new j.default},this.basicInfo={string_sdk_version:Rs,uint32_os_type:15,string_device_name:"",string_http_user_agent:navigator.userAgent,string_os_version:"",string_domain:location.host,uint32_avg_rtt:0,uint32_avg_up_loss:0,uint32_scene:"live"===this.client_.getMode()?1:0,uint32_joining_duration:0,uint32_networkType:FC[lt()],uint32_framework:this.frameWorkType_,uint32_component:this.component_},this.pathJoinRoom_={uint64_start_time:0,uint64_init_audio_start_time:0,uint64_init_audio_end_time:0,uint64_init_camera_start_time:0,uint64_init_camera_end_time:0,uint64_send_request_acc_ip_cmd_start_time:0,uint64_send_request_acc_ip_cmd_end_time:0,uint64_send_request_enter_room_cmd_start_time:0,uint64_send_request_enter_room_cmd_end_time:0,uint64_send_first_video_frame_time:0,uint64_recv_userlist_time:0,uint64_end_time:0,int32_init_audio_ret:0,int32_init_camera_ret:0,int32_send_request_acc_ip_cmd_ret:0,int32_send_request_enter_room_cmd_ret:0,int32_end_ret:0},this.pathLeaveRoom_={uint64_start_time:0,uint64_send_request_exit_room_cmd_start_time:0,uint64_send_request_exit_room_cmd_end_time:0,uint64_end_time:0,int32_send_request_exit_room_cmd_ret:0,int32_end_ret:0},this.pathMainVideoMap_=new j.default,this.pathMainAudioMap_=new j.default,this.pathAuxiliaryMap_=new j.default,this.localStreamStats_={totalVideoBitrate:0,totalVideoFPS:0,totalVideoHeight:0,totalVideoWidth:0,totalAudioLevel:0,videoCount:0,audioLevelCount:0,publishStartTime:0,statsToReport:{uint32_audio_capture_db:0,uint32_video_big_capture_fps:0,uint32_video_big_bitrate:0,uint32_video_big_resolution:0}},this.remoteStreamStatsMap_=new j.default}},{key:"installEvents",value:function(){BI.on(jI,this.handleJoinStart,this),BI.on(28,this.handleWSStart,this),BI.on(29,this.handleWSEnd,this),BI.on(2,this.handleJoinSendCMD,this),BI.on(3,this.handleJoinReceivedCMDResponce,this),BI.on(VI,this.handleJoinSuccess,this),BI.on(HI,this.handleJoinFailed,this),BI.on(24,this.handleReceivedPublishUserList,this),BI.on(200,this.handleConnectionStateChanged,this),BI.on(20,this.handleLeaveStart,this),BI.on(YI,this.handleLeaveSuccess,this),BI.on(21,this.handleLeaveSendCMD,this),BI.on(201,this.handleSendSubscribeCMD,this),BI.on(102,this.handleVideoPlaying,this),BI.on(103,this.handleAudioPlaying,this),BI.on(300,this.handleNetworkQuality,this),BI.on(23,this.handleHeartbeatStats,this),BI.on(111,this.handleRemoteStreamAdded,this),BI.on(112,this.handleRemoteStreamSubscribeStart,this),BI.on(ZI,this.handleRemoteStreamSubscribed,this),BI.on(116,this.handleRemoteStreamRemoved,this),BI.on(133,this.handleVideoLoadedData,this),BI.on(132,this.handlePlayStream,this),BI.on(27,this.handlePublishStart,this),BI.on(121,this.handleLocalStreamInitStart,this),BI.on(122,this.handleLocalStreamInitEnd,this),BI.on(123,this.handleLocalStreamInitFailed,this)}},{key:"uninstallEvents",value:function(){BI.off(jI,this.handleJoinStart,this),BI.off(28,this.handleWSStart,this),BI.off(29,this.handleWSEnd,this),BI.off(2,this.handleJoinSendCMD,this),BI.off(3,this.handleJoinReceivedCMDResponce,this),BI.off(24,this.handleReceivedPublishUserList,this),BI.off(200,this.handleConnectionStateChanged,this),BI.off(20,this.handleLeaveStart,this),BI.off(YI,this.handleLeaveSuccess,this),BI.off(VI,this.handleJoinSuccess,this),BI.off(HI,this.handleJoinFailed,this),BI.off(21,this.handleLeaveSendCMD,this),BI.off(201,this.handleSendSubscribeCMD,this),BI.off(102,this.handleVideoPlaying,this),BI.off(103,this.handleAudioPlaying,this),BI.off(300,this.handleNetworkQuality,this),BI.off(23,this.handleHeartbeatStats,this),BI.off(111,this.handleRemoteStreamAdded,this),BI.off(112,this.handleRemoteStreamSubscribeStart,this),BI.off(ZI,this.handleRemoteStreamSubscribed,this),BI.off(116,this.handleRemoteStreamRemoved,this),BI.off(133,this.handleVideoLoadedData,this),BI.off(132,this.handlePlayStream,this),BI.off(27,this.handlePublishStart,this),BI.off(121,this.handleLocalStreamInitStart,this),BI.off(122,this.handleLocalStreamInitEnd,this),BI.off(123,this.handleLocalStreamInitFailed,this)}},{key:"destroy",value:function(){this.uninstallEvents(),gO.clearTask(this.intervalId_),this.client_=null}},{key:"handleJoinStart",value:function(e){this.hitTest(e.client)&&0===this.pathJoinRoom_.uint64_start_time&&(this.pathJoinRoom_.uint64_start_time=Date.now(),this.checkStorage())}},{key:"handleWSStart",value:function(e){var t=e.client;this.hitTest(t)&&0===this.pathJoinRoom_.uint64_send_request_acc_ip_cmd_start_time&&(this.pathJoinRoom_.uint64_send_request_acc_ip_cmd_start_time=Date.now())}},{key:"handleWSEnd",value:function(e){var t=e.client,n=e.error;this.hitTest(t)&&0===this.pathJoinRoom_.uint64_send_request_acc_ip_cmd_end_time&&(this.pathJoinRoom_.uint64_send_request_acc_ip_cmd_end_time=Date.now(),n&&(this.pathJoinRoom_.int32_send_request_acc_ip_cmd_ret=n instanceof _R?Number(n.getExtraCode()||n.getCode()):bR.UNKNOWN,this.pathJoinRoom_.int32_end_ret=2))}},{key:"handleJoinSendCMD",value:function(e){this.hitTest(e.client)&&0===this.pathJoinRoom_.uint64_send_request_enter_room_cmd_start_time&&(this.pathJoinRoom_.uint64_send_request_enter_room_cmd_start_time=Date.now())}},{key:"handleJoinReceivedCMDResponce",value:function(e){this.hitTest(e.client)&&0===this.pathJoinRoom_.uint64_send_request_enter_room_cmd_end_time&&(this.pathJoinRoom_.uint64_send_request_enter_room_cmd_end_time=Date.now(),this.pathJoinRoom_.int32_send_request_enter_room_cmd_ret=e.code,0!==e.code&&(this.pathJoinRoom_.int32_end_ret=3))}},{key:"handleJoinSuccess",value:function(e){this.hitTest(e.client)&&0===this.pathJoinRoom_.uint64_end_time&&(this.pathJoinRoom_.uint64_end_time=Date.now(),this.pathJoinRoom_.int32_end_ret=0)}},{key:"handleJoinFailed",value:function(e){var t=e.client;this.hitTest(t)&&(this.pathJoinRoom_.uint64_end_time=Date.now(),0===this.pathJoinRoom_.int32_end_ret&&(this.pathJoinRoom_.int32_end_ret=3),this.prepareReport(),this.report())}},{key:"handleReceivedPublishUserList",value:function(e){this.hitTest(e.client)&&0===this.pathJoinRoom_.uint64_recv_userlist_time&&(this.pathJoinRoom_.uint64_recv_userlist_time=Date.now(),this.firstPublishedUserList_=e.data.data&&e.data.data.userList||[])}},{key:"handleConnectionStateChanged",value:function(e){var t=e.client,n=e.state,r=e.connection;if(this.hitTest(t)&&n===nC){this.client_.getUplinkConnection()===r&&0===this.pathJoinRoom_.uint64_send_first_video_frame_time&&this.localStreamStats_.publishStartTime>this.pathJoinRoom_.uint64_end_time&&this.localStreamStats_.publishStartTime-this.pathJoinRoom_.uint64_end_time<=100&&(this.pathJoinRoom_.uint64_send_first_video_frame_time=Date.now());var i=this.pathMainVideoMap_.get("".concat(r.getUserId(),"_").concat(XS));i&&0===i.statsToReport.uint64_pc_connected_time&&(i.statsToReport.uint64_pc_connected_time=Date.now())}}},{key:"handleLeaveStart",value:function(e){this.hitTest(e.client)&&(this.pathLeaveRoom_.uint64_start_time=Date.now())}},{key:"handleLeaveSuccess",value:function(e){this.hitTest(e.client)&&0===this.pathLeaveRoom_.uint64_end_time&&(this.pathLeaveRoom_.uint64_end_time=Date.now(),0!==this.pathJoinRoom_.uint64_end_time?this.basicInfo.uint32_joining_duration=this.pathLeaveRoom_.uint64_end_time-this.pathJoinRoom_.uint64_end_time:this.log_.warn("pathJoinRoom endTime is 0"),this.report())}},{key:"handleLeaveSendCMD",value:function(e){this.hitTest(e.client)&&(this.pathLeaveRoom_.uint64_send_request_exit_room_cmd_start_time=Date.now(),this.pathLeaveRoom_.uint64_send_request_exit_room_cmd_end_time=Date.now())}},{key:"handleRemoteStreamAdded",value:function(e){var n=e.client,r=e.stream;if(this.hitTest(n)){var i=r.getUserId(),o=r.getType(),a="".concat(i,"_").concat(o),s=this.remoteStreamStatsMap_.get(a);if(s)s.stream=r;else{var l={userId:i,totalVideoFPS:0,totalVideoBitrate:0,totalAudioLevel:0,totalAudioBitrate:0,totalLoss:0,audioCount:0,audioLevelCount:0,videoCount:0,networkQualityCount:0,streamAddedTime:Date.now(),subscribeStartTime:0,subscribedTime:0,playStreamTime:0,statsToReport:t({},pj),stream:r};l.statsToReport.msg_user_info=new hj({userId:i,tinyId:r.getTinyId(),role:20}),l.statsToReport.uint32_stream_type=o===XS?2:7,this.remoteStreamStatsMap_.set(a,l)}}}},{key:"handleRemoteStreamSubscribeStart",value:function(e){var t=e.client,n=e.stream;if(this.hitTest(t)){var r=n.getUserId(),i=n.getType(),o="".concat(r,"_").concat(i),a=this.remoteStreamStatsMap_.get(o);a&&0===a.subscribeStartTime&&(a.subscribeStartTime=Date.now())}}},{key:"handleSendSubscribeCMD",value:function(e){if(this.hitTest(e.client)){var t=new hj(e),n=Date.now(),r="".concat(e.userId,"_").concat(XS);e.trackState.video&&e.subscribeState.video&&!this.pathMainVideoMap_.has(r)&&this.pathMainVideoMap_.set(r,{statsToReport:{msg_user_info:t,uint64_start_enter_time:this.pathJoinRoom_.uint64_start_time,uint64_render_first_frame_time:0,uint64_combine_first_frame_time:0,uint64_pc_connected_time:0},userId:e.userId,sendSubscribeCMDTime:n}),e.trackState.audio&&e.subscribeState.audio&&!this.pathMainAudioMap_.has(r)&&this.pathMainAudioMap_.set(r,{statsToReport:{msg_user_info:t,uint64_start_enter_time:this.pathJoinRoom_.uint64_start_time,uint64_play_first_frame_time:0},userId:e.userId,sendSubscribeCMDTime:n});var i="".concat(e.userId,"_").concat(ZS);e.trackState.auxiliary&&e.subscribeState.auxiliary&&!this.pathAuxiliaryMap_.has(i)&&this.pathAuxiliaryMap_.set(i,{sendSubscribeCMDTime:n})}}},{key:"handleRemoteStreamSubscribed",value:function(e){var t=e.client,n=e.stream;if(this.hitTest(t)){var r=n.getUserId(),i=n.getType(),o="".concat(r,"_").concat(i),a=this.remoteStreamStatsMap_.get(o);a&&0===a.subscribedTime&&(a.subscribedTime=Date.now(),a.stream=n)}}},{key:"handleRemoteStreamRemoved",value:function(e){var t=e.client,n=e.stream;if(this.hitTest(t)){var r=n.getUserId(),i=n.getType(),o=this.remoteStreamStatsMap_.get("".concat(r,"_").concat(i));o&&(o.stream=null)}}},{key:"handlePlayStream",value:function(e){var t=e.stream;if(t.isRemote()&&t.getConnection()&&this.hitTest(t.getConnection().getClient())){var n=t.getConnection().getUserId(),r="".concat(n,"_").concat(t.getType());if(this.remoteStreamStatsMap_.has(r)){var i=this.remoteStreamStatsMap_.get(r);0===i.playStreamTime&&(i.playStreamTime=Date.now())}}}},{key:"handleVideoLoadedData",value:function(e){var t=e.stream;if(t.isRemote()&&t.getConnection()&&this.hitTest(t.getConnection().getClient())){var n=t.getConnection().getUserId(),r="".concat(n,"_").concat(t.getType());if(this.pathMainVideoMap_.has(r)){var i=this.pathMainVideoMap_.get(r);0===i.statsToReport.uint64_combine_first_frame_time&&(i.statsToReport.uint64_combine_first_frame_time=Date.now())}}}},{key:"handleVideoPlaying",value:function(e){var t=e.stream;if(t.isRemote()&&t.getConnection()&&this.hitTest(t.getConnection().getClient())){var n=t.getConnection().getUserId(),r="".concat(n,"_").concat(t.getType()),i=Date.now();if(this.pathMainVideoMap_.has(r)){var o=this.pathMainVideoMap_.get(r);if(0===o.statsToReport.uint64_render_first_frame_time&&(o.statsToReport.uint64_render_first_frame_time=i),this.remoteStreamStatsMap_.has(r)){var a=this.remoteStreamStatsMap_.get(r),s=a.statsToReport,l=a.playStreamTime,c=a.subscribedTime;0===s.uint32_video_render_first&&l-c<=100&&(s.uint32_video_render_first=i-o.sendSubscribeCMDTime)}}if(t.getType()===ZS&&this.pathAuxiliaryMap_.has(r)&&this.remoteStreamStatsMap_.has(r)){var u=this.remoteStreamStatsMap_.get(r),d=u.statsToReport,f=u.playStreamTime,p=u.subscribedTime;0===d.uint32_video_render_first&&f-p<=100&&(d.uint32_video_render_first=i-this.pathAuxiliaryMap_.get(r).sendSubscribeCMDTime)}}}},{key:"handleAudioPlaying",value:function(e){if(e.stream.isRemote()&&e.stream.getConnection()&&this.hitTest(e.stream.getConnection().getClient())){var t=e.stream.getConnection().getUserId(),n="".concat(t,"_").concat(e.stream.getType());if(this.pathMainAudioMap_.has(n)){var r=this.pathMainAudioMap_.get(n);0===r.statsToReport.uint64_play_first_frame_time&&(r.statsToReport.uint64_play_first_frame_time=Date.now())}}}},{key:"handleNetworkQuality",value:function(e){var t=this;this.hitTest(e.client)&&(this.networkQuality_.totalUplinkLoss+=e.uplinkLoss,this.networkQuality_.totalUplinkRTT+=e.uplinkRTT,this.networkQuality_.count++,e.downlinkLossAndRTTMap.forEach(function(e){var n=e.rtt,r=e.loss,i=e.userId,o=t.networkQuality_.totalDownlinkRTTAndLossMap.get(i);o?(o.totalRTT+=n,o.totalLoss+=r,o.count++):t.networkQuality_.totalDownlinkRTTAndLossMap.set(i,{totalRTT:n,totalLoss:r,count:1})}))}},{key:"handleHeartbeatStats",value:function(e){var t=this;if(this.hitTest(e.client)){var n=e.stats,r=n.msg_up_stream_info,i=n.msg_down_stream_info;if(r.msg_video_status[0]){var o=r.msg_video_status[0],a=o.uint32_video_codec_bitrate,s=o.uint32_video_enc_fps,l=o.uint32_video_width,c=o.uint32_video_height;this.localStreamStats_.totalVideoBitrate+=a,this.localStreamStats_.totalVideoFPS+=s,this.localStreamStats_.totalVideoWidth+=l,this.localStreamStats_.totalVideoHeight+=c,this.localStreamStats_.videoCount++}if(r.msg_audio_status){var u=r.msg_audio_status.audioLevel;Math.floor(100*u)>0&&(this.localStreamStats_.totalAudioLevel+=u,this.localStreamStats_.audioLevelCount++)}i.forEach(function(e){var n=e.msg_user_info,r=e.msg_audio_status,i=e.msg_video_status,o=n.str_identifier;if(i.forEach(function(e){var n=2===e.uint32_video_stream_type,r=7===e.uint32_video_stream_type,i="".concat(o,"_").concat(n?XS:ZS);if(t.remoteStreamStatsMap_.has(i)){var a,s,l=t.remoteStreamStatsMap_.get(i);(n&&null!==(a=l.stream)&&void 0!==a&&a.isMainVideoSubscribed||r&&null!==(s=l.stream)&&void 0!==s&&s.isAuxVideoSubscribed)&&(l.totalVideoFPS+=e.uint32_video_receive_fps,l.totalVideoBitrate+=e.uint32_video_codec_bitrate,l.videoCount++,0===l.statsToReport.uint32_video_width&&(l.statsToReport.uint32_video_width=e.uint32_video_width),0===l.statsToReport.uint32_video_height&&(l.statsToReport.uint32_video_height=e.uint32_video_height))}}),r){var a="".concat(o,"_").concat(XS);if(t.remoteStreamStatsMap_.has(a)){var s,l=t.remoteStreamStatsMap_.get(a);null!==(s=l.stream)&&void 0!==s&&s.isMainAudioSubscribed&&(l.totalAudioBitrate+=r.uint32_audio_codec_bitrate,l.audioCount++,Math.floor(100*r.audioLevel)>0&&(l.totalAudioLevel+=r.audioLevel,l.audioLevelCount++))}}})}}},{key:"handlePublishStart",value:function(e){var t=e.client;this.hitTest(t)&&0===this.localStreamStats_.publishStartTime&&(this.localStreamStats_.publishStartTime=Date.now())}},{key:"handleLocalStreamInitStart",value:function(e){var t=e.audio,n=e.video;t&&0===this.pathJoinRoom_.uint64_init_audio_start_time&&(this.pathJoinRoom_.uint64_init_audio_start_time=Date.now()),n&&0===this.pathJoinRoom_.uint64_init_camera_start_time&&(this.pathJoinRoom_.uint64_init_camera_start_time=Date.now())}},{key:"handleLocalStreamInitEnd",value:function(e){var t=e.audio,n=e.video;t&&0===this.pathJoinRoom_.uint64_init_audio_end_time&&(this.pathJoinRoom_.uint64_init_audio_end_time=Date.now()),n&&0===this.pathJoinRoom_.uint64_init_camera_end_time&&(this.pathJoinRoom_.uint64_init_camera_end_time=Date.now())}},{key:"handleLocalStreamInitFailed",value:function(e){var t=e.audio,n=e.video,r=e.error,i=r instanceof _R?r.getExtraCode()||r.getCode():{NotFoundError:1,NotAllowedError:2,NotReadableError:3,OverConstrainedError:4,AbortError:5}[r.name]||bR.UNKNOWN;t&&0===this.pathJoinRoom_.uint64_init_audio_end_time&&(this.pathJoinRoom_.int32_init_audio_ret=i,this.pathJoinRoom_.uint64_init_audio_end_time=Date.now()),n&&0===this.pathJoinRoom_.uint64_init_camera_end_time&&(this.pathJoinRoom_.int32_init_camera_ret=i,this.pathJoinRoom_.uint64_init_camera_end_time=Date.now())}},{key:"hasVideoFlag",value:function(e){return this.firstPublishedUserList_.findIndex(function(t){return t.userId===e&&1&t.flag})>=0}},{key:"hasAudioFlag",value:function(e){return this.firstPublishedUserList_.findIndex(function(t){return t.userId===e&&8&t.flag})>=0}},{key:"hasAuxFlag",value:function(e){return this.firstPublishedUserList_.findIndex(function(t){return t.userId===e&&4&t.flag})>=0}},{key:"hitTest",value:function(e){return e===this.client_}},{key:"checkStorage",value:(o=a(n().mark(function e(){var t;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t=vO.getItem(this.storageKey_))){e.next=6;break}return e.next=5,this.upload(t);case 5:vO.deleteItem(this.storageKey_);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.log_.warn(e.t0);case 11:case"end":return e.stop()}},e,this,[[0,8]])})),function(){return o.apply(this,arguments)})},{key:"setStorage",value:function(){this.prepareReport();var e=this.getReportData();0!==e.msg_path_enter_room.uint64_start_time&&vO.setItem(this.storageKey_,e)}},{key:"prepareReport",value:function(){var e=this;if(this.networkQuality_.count>0&&(this.basicInfo.uint32_avg_rtt=Math.floor(this.networkQuality_.totalUplinkRTT/this.networkQuality_.count),this.basicInfo.uint32_avg_up_loss=Math.floor(this.networkQuality_.totalUplinkLoss/this.networkQuality_.count)),this.localStreamStats_.videoCount>0){this.localStreamStats_.statsToReport.uint32_video_big_capture_fps=Math.floor(this.localStreamStats_.totalVideoFPS/this.localStreamStats_.videoCount),this.localStreamStats_.statsToReport.uint32_video_big_bitrate=Math.floor(this.localStreamStats_.totalVideoBitrate/this.localStreamStats_.videoCount);var t=Math.floor(this.localStreamStats_.totalVideoWidth/this.localStreamStats_.videoCount),n=Math.floor(this.localStreamStats_.totalVideoHeight/this.localStreamStats_.videoCount);this.localStreamStats_.statsToReport.uint32_video_big_resolution=t<<16|n}this.localStreamStats_.audioLevelCount>0&&(this.localStreamStats_.statsToReport.uint32_audio_capture_db=Math.floor(this.localStreamStats_.totalAudioLevel/this.localStreamStats_.audioLevelCount*100)),this.remoteStreamStatsMap_.forEach(function(t,n){var r=t.userId;if(e.networkQuality_.totalDownlinkRTTAndLossMap.has(r)){var i=e.networkQuality_.totalDownlinkRTTAndLossMap.get(r),o=i.totalLoss,a=i.count;t.statsToReport.uint32_avg_down_loss=Math.floor(o/a)}t.videoCount>0&&(t.statsToReport.uint32_video_avg_fps=Math.floor(t.totalVideoFPS/t.videoCount),t.statsToReport.uint32_video_avg_bitrate=Math.floor(t.totalVideoBitrate/t.videoCount)),t.audioCount>0&&(t.statsToReport.uint32_audio_recv_bitrate=t.statsToReport.uint32_audio_bitrate=Math.floor(t.totalAudioBitrate/t.audioCount)),t.audioLevelCount>0&&(t.statsToReport.uint32_audio_play_db=Math.floor(t.totalAudioLevel/t.audioLevelCount*100));var s=e.client_.getCallDurationCalculator();s&&(t.statsToReport.uint32_audio_play_time=s.getDuration(n,pS),t.statsToReport.uint32_video_play_time=s.getDuration(n,hS)),t.statsToReport.uint32_video_render_first=Math.min(t.statsToReport.uint32_video_render_first,5e3);var l=e.client_.getBadCaseDetector();if(l){var c=l.getDataFreezeDuration(n),u=c.dataFreeze,d=c.count,f=l.getRenderFreezeDuration(n).renderFreeze;t.statsToReport.uint32_video_block_count=d,t.statsToReport.uint32_video_block_time=Math.min(u,t.statsToReport.uint32_video_play_time),t.statsToReport.uint32_video_external_block_time=Math.min(f,t.statsToReport.uint32_video_play_time),l.isBlackStream(n)&&0===t.statsToReport.uint32_video_avg_fps?t.statsToReport.uint32_video_black_screen_subjective=1:t.statsToReport.uint32_video_black_screen_subjective=0}(0===t.subscribeStartTime||t.subscribeStartTime-t.streamAddedTime>100||0===t.playStreamTime)&&(e.pathMainAudioMap_.delete(n),e.pathMainVideoMap_.delete(n),t.statsToReport.uint32_video_render_first=0)}),this.pathMainAudioMap_.forEach(function(t,n){e.hasAudioFlag(t.userId)?t.statsToReport.uint64_play_first_frame_time-t.statsToReport.uint64_start_enter_time>5e3&&(t.statsToReport.uint64_play_first_frame_time=t.statsToReport.uint64_start_enter_time+5e3):e.pathMainAudioMap_.delete(n)}),this.pathMainVideoMap_.forEach(function(t,n){e.hasVideoFlag(t.userId)?t.statsToReport.uint64_render_first_frame_time-t.statsToReport.uint64_start_enter_time>5e3&&(t.statsToReport.uint64_render_first_frame_time=t.statsToReport.uint64_start_enter_time+5e3):e.pathMainVideoMap_.delete(n)}),this.pathJoinRoom_.uint64_end_time-this.pathJoinRoom_.uint64_start_time>5e3&&(this.pathJoinRoom_.uint64_end_time=this.pathJoinRoom_.uint64_start_time+5e3)}},{key:"getReportData",value:function(){var e=this.client_.getSignalInfo();return{uint32_sdk_app_id:Number(this.client_.getSDKAppId()),msg_user_info:new hj({userId:this.client_.getUserId(),tinyId:this.client_.getTinyId(),role:this.client_.getRole()===zS?20:21}),msg_basic_info:this.basicInfo,uint32_acc_ip:ht(e.relayIp),uint32_client_ip:ht(e.clientIp,"small"),uint32_acc_port:0,uint64_timestamp:Date.now(),uint32_seq:Math.floor(Math.random()*Math.pow(2,31)),msg_path_enter_room:this.pathJoinRoom_,msg_path_exit_room:this.pathLeaveRoom_,msg_path_recv_video:D(this.pathMainVideoMap_.values()).map(function(e){return e.statsToReport}),msg_quality_statistics:D(this.remoteStreamStatsMap_.values()).map(function(e){return e.statsToReport}),str_room_name:String(this.client_.getRoomId()),msg_path_recv_audio:D(this.pathMainAudioMap_.values()).map(function(e){return e.statsToReport}),uint32_info_client_ip:ht(e.clientIp,"small"),error_code:[],msg_local_statistics:this.localStreamStats_.statsToReport,msg_function_state:mj.getStateArray()}}},{key:"report",value:(i=a(n().mark(function e(){var t;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.getReportData(),e.next=4,this.upload(t);case 4:vO.deleteItem(this.storageKey_),mj.clearStateArray(),this.initData(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),this.log_.warn(e.t0);case 12:case"end":return e.stop()}},e,this,[[0,9]])})),function(){return i.apply(this,arguments)})},{key:"upload",value:(r=a(n().mark(function e(t){var r,i,o;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(hI||0===t.msg_path_enter_room.uint64_start_time||[XC,ZC,JC].findIndex(function(e){return e===location.host})>=0)){e.next=2;break}return e.abrupt("return");case 2:return r=Number(this.client_.getSDKAppId()),i=wI(r,"jssdk_new_endreport"),e.next=6,gt({url:i,body:(0,I.default)(t)});case 6:if("ok"===(o=e.sent).data){e.next=9;break}throw"key point upload failed: ".concat(o.data);case 9:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})}]),e}(),Y(sj.prototype,"upload",[aj],(0,ue.default)(sj.prototype,"upload"),sj.prototype),sj),mj=function(){function e(){s(this,e)}return d(e,null,[{key:"handleFunctionState",value:function(e){var t,n,r,i,o=e.className,a=e.fnName,s=e.params;if(!(hI||[XC,ZC,JC].findIndex(function(e){return e===location.host})>=0)){var l,c=[];if(o)switch(a){case"createClient":null!==(t=s[0])&&void 0!==t&&t.mode&&c.push("".concat(o,".").concat(a,".").concat(s[0].mode)),null!==(n=s[0])&&void 0!==n&&n.useStringRoomId?c.push("".concat(o,".").concat(a,".stringRoomId")):c.push("".concat(o,".").concat(a,".intRoomId")),null!==(r=s[0])&&void 0!==r&&r.autoSubscribe?c.push("".concat(o,".").concat(a,".autoSubscribe")):c.push("".concat(o,".").concat(a,".manualSubscribe"));break;case"publish":null!==(i=s[1])&&void 0!==i&&i.isAuxiliary?c.push("".concat(o,".").concat(a,".isAuxiliary")):c.push("".concat(o,".").concat(a));break;case"setAudioProfile":case"setVideoProfile":case"setScreenProfile":case"setVideoContentHint":CI(s[0])&&c.push("".concat(o,".").concat(a,".").concat(s[0]));break;default:c.push("".concat(o,".").concat(a))}else c.push(a);for(var u=0;u<c.length;u++){if(!(l=fT[c[u]]))return;this.stateMap.has(l)?this.stateMap.get(l).int32_call_times+=1:this.stateMap.set(l,{int32_id:l,int32_call_times:1})}}}},{key:"getStateArray",value:function(){return(0,F.default)(this.stateMap.values())}},{key:"clearStateArray",value:function(){this.stateMap.clear()}}]),e}();p(mj,"stateMap",new j.default);var vj,bj,_j,yj,wj,xj,kj,Sj,Cj,Tj,Ej,Ij,Aj,Rj,Oj=(cj=Jt.apply(void 0,D(nj.STREAM.play)),uj=nn(),dj=nn(),fj=function(){function e(t){s(this,e),this.name_=KC,this.userId_=t.userId,this.isRemote_=t.isRemote,this.type_=t.type,this.log_=aA.createLogger({id:"s".concat(t.seq?t.seq:"","|").concat(this.userId_),userId:SI(t.client)?void 0:t.client.getUserId(),sdkAppId:SI(t.client)?void 0:t.client.getSDKAppId(),isLocal:!this.isRemote_,type:this.isRemote_?this.type_:""}),this.client_=null,SI(t.client)||(this.client_=t.client),this.mediaStream_=null,this.div_=null,this.isPlaying_=!1,this.connection_=null,this.audioPlayer_=null,this.videoPlayer_=null,this.muted_=!1,this.objectFit_="cover",this.mirror_=!1,this.id_="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),this.audioOutputDeviceId_=0,this.audioVolume_=1,this.emitter_=NI(new UI,this.name_),this.connectionState_=QS,this.installEvents(),SI(t.mirror)||this.log_.warn('TRTC.createStream "mirror" option was deprecated since v4.12.1，please use localStream.play to set up preview mirror. refer to '.concat(eT,"/en/LocalStream.html#play. TRTC.createStream 接口的 mirror 选项从 v4.12.1 开始被废弃，请使用 localStream.play 设置本地流预览镜像，参考文档：").concat(eT,"/zh-cn/LocalStream.html#play。"))}var r,i,o,l,c;return d(e,[{key:"installEvents",value:function(){BI.on(QI,this.restartPlayback,this)}},{key:"uninstallEvents",value:function(){BI.off(QI,this.restartPlayback,this)}},{key:"getType",value:function(){return this.type_}},{key:"getLogger",value:function(){return this.log_}},{key:"isSubscribed",get:function(){return this.type_===XS&&this.connection_.isMainStreamSubscribed||this.type_===ZS&&this.connection_.isAuxStreamSubscribed}},{key:"isMainVideoSubscribed",get:function(){var e=this.getSubscribedState();return this.type_===XS&&e&&e.video}},{key:"isMainAudioSubscribed",get:function(){var e=this.getSubscribedState();return this.type_===XS&&e&&e.audio}},{key:"isAuxVideoSubscribed",get:function(){var e=this.getSubscribedState();return this.type_===ZS&&e&&e.auxiliary}},{key:"isSmallVideoSubscribed",get:function(){var e=this.getSubscribedState();return this.type_===XS&&e&&e.smallVideo}},{key:"emitConnectionStateChanged",value:function(e){e.state!==this.connectionState_&&(e.state!==QS&&this.isRemote_&&!this.isSubscribed||(this.emitter_.emit("connection-state-changed",e),this.connectionState_=e.state))}},{key:"setConnection",value:function(e){this.connection_!==e&&(e instanceof XB?(null!==this.connection_&&this.connection_.off(LO.CONNECTION_STATE_CHANGED,this.emitConnectionStateChanged,this),e.on(LO.CONNECTION_STATE_CHANGED,this.emitConnectionStateChanged,this)):null===e&&this.connection_.off(LO.CONNECTION_STATE_CHANGED,this.emitConnectionStateChanged,this),this.connection_=e)}},{key:"getConnection",value:function(){return this.connection_}},{key:"play",value:(c=a(n().mark(function e(t,r){var i,o,a;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.log_.info("stream ".concat(this.isPlaying_?"update":"start to"," play with elementId: ").concat(t," and options: ").concat((0,I.default)(r),".")),!this.isPlaying_){e.next=9;break}return r&&!SI(r.muted)&&(this.muted_=r.muted),r&&!SI(r.objectFit)&&(this.objectFit_=r.objectFit),this.isScreenShare()?this.mirror_=!1:r&&!SI(r.mirror)&&(this.mirror_=r.mirror),this.audioPlayer_&&this.audioPlayer_.setMuted(this.muted_),this.videoPlayer_&&(this.videoPlayer_.setObjectFit(this.objectFit_),this.videoPlayer_.setMirror(this.mirror_)),this.elementId_!==t&&(i=t,CI(t)&&(i=document.getElementById(t)),i.appendChild(this.div_),this.elementId_=t),e.abrupt("return");case 9:return this.isPlaying_=!0,(o=document.createElement("div")).setAttribute("id","player_".concat(this.id_)),o.setAttribute("style","width: 100%; height: 100%; position: relative; background-color: black; overflow: hidden;"),a=t,CI(t)&&(a=document.getElementById(t)),a.appendChild(o),this.elementId_=t,this.div_=o,this.isRemote_||(this.muted_=!0),r&&!SI(r.muted)&&(this.muted_=r.muted),this.isScreenShare()&&(this.objectFit_="contain"),r&&!SI(r.objectFit)&&(this.objectFit_=r.objectFit),this.isScreenShare()?this.mirror_=!1:(this.isRemote_||(this.mirror_=!0),r&&!SI(r.mirror)&&(this.mirror_=r.mirror)),BI.emit(132,{stream:this}),e.next=26,W.default.all([this.playAudio(),this.playVideo()]);case 26:BI.emit(100,{stream:this});case 27:case"end":return e.stop()}},e,this)})),function(e,t){return c.apply(this,arguments)})},{key:"playAudio",value:(l=a(n().mark(function e(){var r,i,o=this;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hasAudio()&&(!this.isRemote_||this.isMainAudioSubscribed)){e.next=2;break}return e.abrupt("return");case 2:if(r=this.getAudioTrack(),this.audioPlayer_||!r){e.next=17;break}return this.log_.info("create AudioPlayer and play"),this.audioPlayer_=new hM({stream:this,track:r,gainedTrack:null===(i=this.gain_)||void 0===i?void 0:i.audioTrack,div:this.div_,muted:this.muted_,outputDeviceId:this.audioOutputDeviceId_,volume:this.audioVolume_}),this.audioPlayer_.on(NO,function(e){var n={type:pS,state:e.state,reason:e.reason};BI.emit(101,t({stream:o},n)),o.emitter_.emit(MO,n)}),e.prev=7,e.next=10,this.audioPlayer_.play();case 10:e.next=17;break;case 12:throw e.prev=12,e.t0=e.catch(7),this.client_&&this.client_.getEnableAutoPlayDialog()&&new qM,this.emitter_.emit($O,e.t0),e.t0;case 17:case"end":return e.stop()}},e,this,[[7,12]])})),function(){return l.apply(this,arguments)})},{key:"playVideo",value:(o=a(n().mark(function e(){var r,i=this;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hasVideo()&&(!this.isRemote_||this.isMainVideoSubscribed||this.isAuxVideoSubscribed||this.isSmallVideoSubscribed)){e.next=2;break}return e.abrupt("return");case 2:if(r=this.getVideoTrack(),this.videoPlayer_||!r){e.next=18;break}return BI.emit(134,{stream:this}),this.log_.info("create VideoPlayer and play"),this.videoPlayer_=new UM({stream:this,track:r,div:this.div_,muted:this.muted_,objectFit:this.objectFit_,mirror:this.mirror_}),this.videoPlayer_.on(NO,function(e){var n={type:hS,state:e.state,reason:e.reason};BI.emit(101,t({stream:i},n)),i.emitter_.emit(MO,n)}),e.prev=8,e.next=11,this.videoPlayer_.play();case 11:e.next=18;break;case 13:throw e.prev=13,e.t0=e.catch(8),this.client_&&this.client_.getEnableAutoPlayDialog()&&new qM,this.emitter_.emit($O,e.t0),e.t0;case 18:case"end":return e.stop()}},e,this,[[8,13]])})),function(){return o.apply(this,arguments)})},{key:"stopAudio",value:function(){this.audioPlayer_&&(this.log_.info("stop AudioPlayer"),this.audioPlayer_.stop(),this.audioPlayer_=null)}},{key:"stopVideo",value:function(){this.videoPlayer_&&(this.log_.info("stop VideoPlayer"),this.videoPlayer_.stop(),this.videoPlayer_=null)}},{key:"restartPlayback",value:function(){this.audioPlayer_&&!this.audioPlayer_.isPlaying&&this.restartAudio(),this.videoPlayer_&&!this.videoPlayer_.isPlaying&&this.restartVideo()}},{key:"restartAudio",value:function(){this.isPlaying_&&(this.stopAudio(),this.playAudio().catch(function(e){}))}},{key:"restartVideo",value:function(){this.isPlaying_&&(this.stopVideo(),this.playVideo().catch(function(e){}))}},{key:"stop",value:function(){this.isPlaying_&&(this.isPlaying_=!1,this.stopAudio(),this.stopVideo(),this.div_.parentNode.removeChild(this.div_))}},{key:"resume",value:(i=a(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isPlaying_){e.next=2;break}return e.abrupt("return");case 2:if(this.log_.info("resume"),!this.audioPlayer_){e.next=6;break}return e.next=6,this.audioPlayer_.resume();case 6:if(!this.videoPlayer_){e.next=9;break}return e.next=9,this.videoPlayer_.resume();case 9:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"close",value:function(){this.log_.info("close stream"),this.isPlaying_&&this.stop(),this.isRemote_||(this.mediaStream_&&(this.mediaStream_.preventEvent=1,this.mediaStream_.getTracks().forEach(function(e){e.stop()}),this.mediaStream_=null),this.uninstallEvents())}},{key:"muteAudio",value:function(){return this.addRemoteEvent(!0,pS),this.doEnableTrack(pS,!1)}},{key:"muteVideo",value:function(){return this.addRemoteEvent(!0,hS),this.doEnableTrack(hS,!1)}},{key:"unmuteAudio",value:function(){return this.addRemoteEvent(!1,pS),this.doEnableTrack(pS,!0)}},{key:"unmuteVideo",value:function(){return this.addRemoteEvent(!1,hS),this.doEnableTrack(hS,!0)}},{key:"addRemoteEvent",value:function(e,t){if(this.isRemote_&&this.client_){var n=this.client_.getUserId(),r="".concat(e?xS:kS," remote ").concat(t);wR(n,{eventId:t===pS?e?32785:32787:e?32784:32786,eventDesc:r,timestamp:(new Date).getTime(),userId:n,tinyId:this.client_.getTinyId(),remoteUserId:this.userId_,remoteTinyId:this.connection_.getTinyId()})}}},{key:"doEnableTrack",value:function(e,t){var n=!1;return e===pS?this.mediaStream_.getAudioTracks().forEach(function(e){n=!0,e.enabled=t}):this.mediaStream_.getVideoTracks().forEach(function(e){n=!0,e.enabled=t}),n}},{key:"getId",value:function(){return this.id_}},{key:"getUserId",value:function(){return this.userId_}},{key:"getTinyId",value:function(){return this.connection_?this.connection_.getTinyId():""}},{key:"isPlaying",value:function(){return this.isPlaying_}},{key:"setAudioOutput",value:(r=a(n().mark(function e(t){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.audioOutputDeviceId_=t,!this.audioPlayer_){e.next=4;break}return e.next=4,this.audioPlayer_.setSinkId(t);case 4:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"setAudioVolume",value:function(e){this.audioVolume_=e,this.log_.info("setAudioVolume to ".concat(e)),this.audioPlayer_&&this.audioPlayer_.setVolume(e)}},{key:"getAudioLevel",value:function(){var e=0;return this.audioPlayer_&&(e=this.audioPlayer_.getAudioLevel()),e}},{key:"getInternalAudioLevel",value:function(){var e=0;return this.audioPlayer_&&(e=this.audioPlayer_.getInternalAudioLevel()),e}},{key:"hasAudio",value:function(){if(this.isRemote_){if(!this.connection_)return!1;var e=this.connection_.getTrackState();return this.type_===XS&&e.audio}return!!this.getAudioTrack()}},{key:"hasVideo",value:function(){if(this.isRemote_){if(!this.connection_)return!1;var e=this.connection_.getTrackState();return this.type_===ZS?e.auxiliary:e.video}return!!this.getVideoTrack()}},{key:"getSubscribedState",value:function(){return this.isRemote_&&this.connection_?this.connection_.getSubscribeState():null}},{key:"getAudioTrack",value:function(){var e=null;if(this.mediaStream_){var t=this.mediaStream_.getAudioTracks();t.length>0&&(e=t[0])}return e}},{key:"getVideoTrack",value:function(){var e=null;if(this.mediaStream_){var t=this.mediaStream_.getVideoTracks();t.length>0&&(e=t[0])}return e}},{key:"getVideoFrame",value:function(){return this.videoPlayer_?this.videoPlayer_.getVideoFrame():null}},{key:"getMediaStream",value:function(){return this.mediaStream_}},{key:"setMediaStream",value:function(e){e!==this.mediaStream_&&(this.mediaStream_&&this.mediaStream_.getTracks().forEach(function(e){return e.stop()}),this.mediaStream_=e)}},{key:"updateVideoPlayingState",value:function(e){this.isPlaying_&&(e?(this.log_.info("playing state updated, play video"),this.playVideo().catch(function(e){})):(this.log_.info("playing state updated, stop video"),this.stopVideo()))}},{key:"updateAudioPlayingState",value:function(e){this.isPlaying_&&(e?(this.log_.info("playing state updated, play audio"),this.playAudio().catch(function(e){})):(this.log_.info("playing state updated, stop audio"),this.stopAudio()))}},{key:"on",value:function(e,t,n){this.emitter_.on(e,t,n)}},{key:"off",value:function(e,t,n){"*"===e?this.emitter_.removeAllListeners():this.emitter_.off(e,t,n)}},{key:"isRemote",value:function(){return this.isRemote_}},{key:"isScreenShare",value:function(){return!this.isRemote_&&this.screen_||this.isRemote_&&this.getType()===bS}},{key:"getDiv",value:function(){return this.div_}},{key:"getObjectFit",value:function(){return this.objectFit_}},{key:"getMuted",value:function(){return this.muted_}},{key:"getClient",value:function(){return this.client_}}]),e}(),Y(fj.prototype,"play",[cj],(0,ue.default)(fj.prototype,"play"),fj.prototype),Y(fj.prototype,"setAudioOutput",[uj],(0,ue.default)(fj.prototype,"setAudioOutput"),fj.prototype),Y(fj.prototype,"getVideoFrame",[dj],(0,ue.default)(fj.prototype,"getVideoFrame"),fj.prototype),fj),Lj=function(e){function n(e){var i;s(this,n);var o={isRemote:!0,type:e.type},a=t(t({},e),o);return(i=r.call(this,a)).name_=WC,i.isStreamAddedEventEmitted_=!1,i.isAbleToCallSubscription_=!0,i}g(n,e);var r=A(n);return d(n,[{key:"installEvents",value:function(){P(v(n.prototype),"installEvents",this).call(this),BI.on(ZI,this.handleStreamSubscribed,this),BI.on(JI,this.handleStreamUnsubscribed,this)}},{key:"uninstallEvents",value:function(){P(v(n.prototype),"uninstallEvents",this).call(this),BI.off(ZI,this.handleStreamSubscribed,this),BI.off(JI,this.handleStreamUnsubscribed,this)}},{key:"handleStreamSubscribed",value:function(e){e.client===this.client_&&e.stream===this&&this.connection_.getCurrentState()===nC&&this.emitConnectionStateChanged({prevState:QS,state:nC})}},{key:"handleStreamUnsubscribed",value:function(e){e.client===this.client_&&e.stream===this&&this.emitConnectionStateChanged({prevState:nC,state:QS})}},{key:"getType",value:function(){return P(v(n.prototype),"getType",this).call(this)}},{key:"getIsAbleToCallSubscription",value:function(){return this.isAbleToCallSubscription_}},{key:"setIsAbleToCallSubscription",value:function(e){this.isAbleToCallSubscription_=e}},{key:"setIsStreamAddedEventEmitted",value:function(e){this.isStreamAddedEventEmitted_=e}},{key:"getIsStreamAddedEventEmitted",value:function(){return this.isStreamAddedEventEmitted_}},{key:"getAudioTrack",value:function(){return this.connection_&&this.connection_.getTrackState().audio?P(v(n.prototype),"getAudioTrack",this).call(this):null}},{key:"getVideoTrack",value:function(){if(!this.connection_)return null;var e=this.connection_.getTrackState();return this.type_===XS&&!e.video||this.type_===ZS&&!e.auxiliary?null:P(v(n.prototype),"getVideoTrack",this).call(this)}},{key:"close",value:function(){P(v(n.prototype),"close",this).call(this)}}]),n}(Oj),Pj=function(){function e(t){s(this,e),this.client_=t.client,this.subscribedStreams_=new j.default,this.unsubscribedStreams_=new j.default,this.subscriptedOptions_=new j.default,this.autoRecoveryFlags_=new j.default}var t,r,i;return d(e,[{key:"isEnabled",get:function(){return"webrtc"!==this.client_.getEnv()}},{key:"recover",value:(i=a(n().mark(function e(t){var r,i,o;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getUserId(),i=t.getType(),this.hasAutoRecoveryFlag(r,i)){e.next=5;break}return e.abrupt("return");case 5:if(o=this.getUnsubscribedStream(r,i)?"unsubscribe":"subscribe",e.prev=6,aA.warn("recover() try to recover subscription [".concat(o,"][").concat(r,"][").concat(i,"]")),"subscribe"!==o){e.next=13;break}return e.next=11,this.recoverSubscription(r,t);case 11:e.next=15;break;case 13:return e.next=15,this.recoverUnsubscription(r,t);case 15:CR.logSuccessEvent({userId:this.client_.getUserId(),eventType:wC}),aA.warn("recover() recover successfully [".concat(o,"][").concat(r,"][").concat(i,"]")),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(6),aA.error("recover() recover failed [".concat(o,"][").concat(r,"][").concat(i,"]"),e.t0),CR.logFailedEvent({userId:this.client_.getUserId(),eventType:wC,error:e.t0});case 23:this.deleteAutoRecoveryFlag(r,i);case 24:case"end":return e.stop()}},e,this,[[6,19]])})),function(e){return i.apply(this,arguments)})},{key:"recoverSubscription",value:(r=a(n().mark(function e(t,r){var i,o,a,s,l;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.getOptions(t,r.getType()),o=this.getSubscribedStream(t,r.getType()),i&&o){e.next=4;break}return e.abrupt("return");case 4:a=this.getStreamMuteState(o),s=a.isAudioMuted,l=a.isVideoMuted,this.mergeStream(o,r),this.recoverPlayingState(o),s&&o.doEnableTrack(pS,!1),l&&o.doEnableTrack(hS,!1);case 9:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"recoverUnsubscription",value:(t=a(n().mark(function e(t,r){var i;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.getUnsubscribedStream(t,r.getType())){e.next=3;break}return e.abrupt("return");case 3:this.mergeStream(i,r);case 4:case"end":return e.stop()}},e,this)})),function(e,n){return t.apply(this,arguments)})},{key:"getStreamMuteState",value:function(e){var t={isAudioMuted:!1,isVideoMuted:!1},n=e.getMediaStream();return n&&(t.isAudioMuted=n.getAudioTracks().map(function(e){return e.enabled}).includes(!1),t.isVideoMuted=n.getVideoTracks().map(function(e){return e.enabled}).includes(!1)),t}},{key:"recoverPlayingState",value:function(e){var t=e.isPlaying(),n=e.getDiv();if(t&&n){var r=n.parentNode;e.stop(),e.play(r,{objectFit:e.getObjectFit(),muted:e.getMuted()})}}},{key:"mergeStream",value:function(e,t){var n=t.getConnection(),r=t.getMediaStream();e.setConnection(n),n.setRemoteStream(r.id,e),e.setMediaStream(r),e.updateAudioPlayingState(t.hasAudio()),e.updateVideoPlayingState(t.hasVideo())}},{key:"addSubscriptionRecord",value:function(e,t,n){var r=t.getType();if(this.subscribedStreams_.has(e))this.subscribedStreams_.get(e).set(r,t);else{var i=new j.default;i.set(t.getType(),t),this.subscribedStreams_.set(e,i)}if(this.subscriptedOptions_.has(e))this.subscriptedOptions_.get(e).set(r,n);else{var o=new j.default;o.set(t.getType(),n),this.subscriptedOptions_.set(e,o)}this.deleteUnsubscriptionRecord(e,r)}},{key:"addUnsubscriptionRecord",value:function(e,t){if(this.unsubscribedStreams_.has(e))this.unsubscribedStreams_.get(e).set(t.getType(),t);else{var n=new j.default;n.set(t.getType(),t),this.unsubscribedStreams_.set(e,n)}this.deleteSubscriptionRecord(e,t.getType())}},{key:"getSubscribedStream",value:function(e,t){return this.subscribedStreams_.has(e)&&this.subscribedStreams_.get(e).has(t)?this.subscribedStreams_.get(e).get(t):null}},{key:"getOptions",value:function(e,t){return this.subscriptedOptions_.has(e)&&this.subscriptedOptions_.get(e).has(t)?this.subscriptedOptions_.get(e).get(t):null}},{key:"getUnsubscribedStream",value:function(e,t){return this.unsubscribedStreams_.has(e)&&this.unsubscribedStreams_.get(e).has(t)?this.unsubscribedStreams_.get(e).get(t):null}},{key:"deleteSubscriptionRecord",value:function(e,t){this.subscribedStreams_.has(e)&&this.subscribedStreams_.get(e).delete(t),this.subscriptedOptions_.has(e)&&this.subscriptedOptions_.get(e).delete(t)}},{key:"deleteUnsubscriptionRecord",value:function(e,t){this.unsubscribedStreams_.has(e)&&this.unsubscribedStreams_.get(e).delete(t)}},{key:"markAllStream",value:function(){for(var e=0,t=D(this.subscribedStreams_.entries());e<t.length;e++)for(var n=$(t[e],2),r=n[0],i=0,o=D(n[1].entries());i<o.length;i++){var a=$(o[i],1)[0];this.setAutoRecoveryFlag(r,a)}for(var s=0,l=D(this.unsubscribedStreams_.entries());s<l.length;s++)for(var c=$(l[s],2),u=c[0],d=0,f=D(c[1].entries());d<f.length;d++){var p=$(f[d],1)[0];this.setAutoRecoveryFlag(u,p)}}},{key:"setAutoRecoveryFlag",value:function(e,t){if(aA.info("setAutoRecoveryFlag() mark [".concat(e,"][").concat(t,"]")),this.autoRecoveryFlags_.has(e))this.autoRecoveryFlags_.get(e).set(t);else{var n=new j.default;n.set(t),this.autoRecoveryFlags_.set(e,n)}}},{key:"hasAutoRecoveryFlag",value:function(e,t){return!!this.isEnabled&&this.autoRecoveryFlags_.has(e)&&this.autoRecoveryFlags_.get(e).has(t)}},{key:"deleteAutoRecoveryFlag",value:function(e,t){this.autoRecoveryFlags_.has(e)&&this.autoRecoveryFlags_.get(e).delete(t)}},{key:"delete",value:function(e){this.unsubscribedStreams_.delete(e),this.subscribedStreams_.delete(e),this.subscriptedOptions_.delete(e),this.autoRecoveryFlags_.delete(e)}}]),e}(),Mj=function(){function e(t){s(this,e),this.player_=t,this.canvas_=document.createElement(fS),this.canvasCtx_=this.canvas_.getContext("2d")}return d(e,[{key:"setCanvasRect",value:function(e,t){this.canvas_.width=e,this.canvas_.height=t}},{key:"drawVideoToCanvas",value:function(){var e=this.player_.getElement(),t=e.videoHeight,n=e.videoWidth,r=n*this.canvas_.height/(t*this.canvas_.width);if(r>1.05||r<.95){var i=n*t/(this.canvas_.width*this.canvas_.height);this.setCanvasRect(n/Math.sqrt(i),t/Math.sqrt(i))}this.canvasCtx_.drawImage(e,0,0,this.canvas_.width,this.canvas_.height)}},{key:"generateVideoTrackFromCanvasCapture",value:function(e){return this.canvas_.captureStream(e).getVideoTracks()[0]}},{key:"generateStreamFromTrack",value:function(e){var t=new MediaStream;return t.addTrack(e),t}},{key:"destroy",value:function(){this.player_.stop(),this.canvas_.width=0,this.canvas_.height=0,this.canvas_=null,this.canvasCtx_=null}},{key:"canvas",get:function(){return this.canvas_}},{key:"canvasCtx",get:function(){return this.canvasCtx_}},{key:"canDrawVideoToCanvas",get:function(){if(this.player_){var e=this.player_.getElement();if(e)return e.readyState===e.HAVE_ENOUGH_DATA}return!1}}]),e}(),$j=new Blob(['let t,e,a,i;onmessage=function(n){const{action:h,data:s}=n.data;switch(h){case"render":a=s.canvas,t=a.width,e=a.height,i=a.getContext("2d"),function(t,e){const n=new TransformStream({async transform(t,e){const n=t.displayWidth,h=t.displayHeight,s=n*a.height/(h*a.width);if(s>1.05||s<.95){const t=n*h/(a.width*a.height);a.width=n/Math.sqrt(t),a.height=h/Math.sqrt(t)}i.drawImage(t,0,0,a.width,a.height);const o=new VideoFrame(a,{timestamp:t.timestamp});t.close(),e.enqueue(o)}});t.pipeThrough(n).pipeTo(e)}(s.readable,s.writable)}}'],{type:"application/javascript"}),Nj=function(){function e(t){s(this,e);var n=t.videoTrack;this.width=void 0,this.height=void 0,this.canvas=document.createElement("canvas"),this.offscreen=null,this.smallGenerator=new MediaStreamTrackGenerator({kind:"video"}),this.smallWritable=this.smallGenerator.writable,this.bigProcessor=new MediaStreamTrackProcessor({track:n}),this.bigReadable=this.bigProcessor.readable,this.initWorker()}return d(e,[{key:"initWorker",value:function(){try{this.worker=new Worker(URL.createObjectURL($j)),aA.info("init worker processor success")}catch(e){aA.warn("init worker processor failed. ".concat(e.error))}}},{key:"setCanvasRect",value:function(e,t){this.width=e,this.height=t,this.canvas.width=e,this.canvas.height=t,this.offscreen=this.canvas.transferControlToOffscreen(),this.worker.postMessage({action:"render",data:{canvas:this.offscreen,readable:this.bigReadable,writable:this.smallWritable}},[this.offscreen,this.bigReadable,this.smallWritable])}},{key:"generatorVideoTrack",value:function(){var e=new MediaStream([this.smallGenerator]);return null==e?void 0:e.getTracks()[0]}},{key:"destroy",value:function(){this.worker.terminate()}}]),e}(),Dj=function(){function e(t){s(this,e),this.localStream_=t,this.player_=null,this.processor_=null,this.initOffscreenSuccess_=!1}var t;return d(e,[{key:"initialize",value:(t=a(n().mark(function e(){var t;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(OO()&&(null===(t=navigator)||void 0===t?void 0:t.hardwareConcurrency)>=6)){e.next=13;break}return e.prev=1,e.next=4,this.initOffscreen();case 4:this.initOffscreenSuccess_=!0,aA.info("Initialize VideoGenerator successfully!"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),this.initCanvas();case 11:e.next=14;break;case 13:this.initCanvas();case 14:case"end":return e.stop()}},e,this,[[1,8]])})),function(){return t.apply(this,arguments)})},{key:"generateSmallVideoTrack",value:function(e){var t,n=e.height,r=e.width,i=e.frameRate,o=this.getSmallVideoProfile(r,n);return this.initOffscreenSuccess_?(this.processor_.setCanvasRect(o.width,o.height),t=this.processor_.generatorVideoTrack()):(this.processor_.setCanvasRect(o.width,o.height),this.player_.setRect({width:o.width,height:o.height}),t=this.processor_.generateVideoTrackFromCanvasCapture(i),this.interval_=gO.run(cT,this.render.bind(this),{fps:i})),t}},{key:"render",value:function(){this.processor_.canDrawVideoToCanvas&&this.processor_.drawVideoToCanvas()}},{key:"destroy",value:function(){gO.clearTask(this.interval_),this.processor_&&this.processor_.destroy()}},{key:"initOffscreen",value:function(){this.processor_=new Nj({videoTrack:this.localStream_.getVideoTrack()})}},{key:"initCanvas",value:function(){this.player_=new UM({stream:this.localStream_,track:this.localStream_.getVideoTrack(),muted:!0,objectFit:"cover",mirror:!1}),this.player_.play().then(function(){aA.info("VideoGenerator: play local video success")}).catch(function(){aA.error("VideoGenerator: Failed to play local video")}),this.processor_=new Mj(this.player_)}},{key:"getSmallVideoProfile",value:function(e,t){var n,r=this.localStream_.getVideoTrack(),i=this.localStream_.getVideoProfile();if(AO){var o=r.getSettings();o&&o.width&&o.height&&(i.width=o.width,i.height=o.height)}var a=i.width*i.height,s=e*t;return aA.info("big stream resolution: ".concat(i.width,"*").concat(i.height," small stream resolution: ").concat(e,"*").concat(t," ")),n=a>s?a/s:a/19200,{width:parseInt(i.width/Math.sqrt(n)),height:parseInt(i.height/Math.sqrt(n))}}}]),e}(),Fj=new j.default,qj=function(){var e=a(n().mark(function e(t){var r,i,o;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Rt()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,rn(t);case 4:if(r=e.sent,aA.info("getUserMedia with constraints: "+(0,I.default)(r)),!r.audio){e.next=11;break}return e.next=9,QH.getMicrophones();case 9:i=e.sent,aA.info("microphones: ".concat((0,I.default)(i)));case 11:if(!r.video){e.next=16;break}return e.next=14,QH.getCameras();case 14:o=e.sent,aA.info("cameras: ".concat((0,I.default)(o)));case 16:return e.prev=16,e.next=19,navigator.mediaDevices.getUserMedia(r);case 19:return e.abrupt("return",e.sent);case 22:if(e.prev=22,e.t0=e.catch(16),"NotFoundError"!==e.t0.name){e.next=29;break}if(!o||0!==o.length){e.next=27;break}throw new _R({code:bR.DEVICE_NOT_FOUND,message:st({key:"CAMERA_NOT_FOUND"})});case 27:if(!i||0!==i.length){e.next=29;break}throw new _R({code:bR.DEVICE_NOT_FOUND,message:st({key:"MICROPHONE_NOT_FOUND"})});case 29:throw new _R({code:bR.INITIALIZE_FAILED,name:e.t0.name,message:e.t0.message,constraint:e.t0.constraint});case 30:case"end":return e.stop()}},e,null,[[16,22]])}));return function(t){return e.apply(this,arguments)}}(),Uj=mt({retryFunction:qj,settings:{retries:3,timeout:500},onError:function(e,t,n,r){aA.warn("getUserMedia error: ".concat(e)),"NotReadableError"===e.name?t():e.message.includes("deviceId")&&r[0].retryWhenExactFailed?(r[0].useExact=!1,t()):n(e)},onRetrying:function(e){aA.warn("getUserMedia retrying [".concat(e,"/3]"))}}),Bj=function(){var e=a(n().mark(function e(t){var r,i,o,a,s,l,c,u,d;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Rt()){e.next=2;break}return e.abrupt("return");case 2:if(r=null,!(iI&&oI<74||sI)){e.next=27;break}return i=sn(t),aA.info("getDisplayMedia with constraints: "+(0,I.default)(i)),e.next=8,navigator.mediaDevices.getDisplayMedia(i);case 8:if(o=e.sent,!t.screenAudio){e.next=14;break}return aA.warn("Your browser not support capture system audio"),e.abrupt("return",o);case 14:if(!t.audio){e.next=24;break}return a=an(t),aA.info("getUserMedia with constraints: "+(0,I.default)(a)),e.next=19,navigator.mediaDevices.getUserMedia(a);case 19:return r=e.sent,o.addTrack(r.getAudioTracks()[0]),e.abrupt("return",o);case 24:return e.abrupt("return",o);case 25:e.next=53;break;case 27:if(!t.screenAudio){e.next=37;break}return t.audioConstraints={echoCancellation:t.echoCancellation,autoGainControl:t.autoGainControl,noiseSuppression:t.noiseSuppression,sampleRate:44100},s=sn(t),aA.info("getDisplayMedia with constraints: "+(0,I.default)(s)),e.next=33,navigator.mediaDevices.getDisplayMedia(s);case 33:return l=e.sent,e.abrupt("return",l);case 37:return c=sn(t),aA.info("getDisplayMedia with constraints: "+(0,I.default)(c)),e.next=41,navigator.mediaDevices.getDisplayMedia(c);case 41:if(u=e.sent,!t.audio){e.next=52;break}return d=an(t),aA.info("getUserMedia with constraints: "+(0,I.default)(d)),e.next=47,navigator.mediaDevices.getUserMedia(d);case 47:return r=e.sent,u.addTrack(r.getAudioTracks()[0]),e.abrupt("return",u);case 52:return e.abrupt("return",u);case 53:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),jj=new j.default([["120p",{width:160,height:120,frameRate:15,bitrate:200}],["120p_2",{width:160,height:120,frameRate:15,bitrate:100}],["180p",{width:320,height:180,frameRate:15,bitrate:350}],["180p_2",{width:320,height:180,frameRate:15,bitrate:150}],["240p",{width:320,height:240,frameRate:15,bitrate:400}],["240p_2",{width:320,height:240,frameRate:15,bitrate:200}],["360p",{width:640,height:360,frameRate:15,bitrate:800}],["360p_2",{width:640,height:360,frameRate:15,bitrate:400}],["480p",{width:640,height:480,frameRate:15,bitrate:900}],["480p_2",{width:640,height:480,frameRate:15,bitrate:500}],["720p",{width:1280,height:720,frameRate:15,bitrate:1500}],["1080p",{width:1920,height:1080,frameRate:15,bitrate:2e3}],["1440p",{width:2560,height:1440,frameRate:30,bitrate:4860}],["4K",{width:3840,height:2160,frameRate:30,bitrate:9e3}]]),Vj=new j.default([["480p",{width:640,height:480,frameRate:5,bitrate:900}],["480p_2",{width:640,height:480,frameRate:30,bitrate:1e3}],["720p",{width:1280,height:720,frameRate:5,bitrate:1200}],["720p_2",{width:1280,height:720,frameRate:30,bitrate:3e3}],["1080p",{width:1920,height:1080,frameRate:5,bitrate:1600}],["1080p_2",{width:1920,height:1080,frameRate:30,bitrate:4e3}]]),Hj=new j.default([["standard",{sampleRate:48e3,channelCount:1,bitrate:40}],["standard-stereo",{sampleRate:48e3,channelCount:2,bitrate:64}],["high",{sampleRate:48e3,channelCount:1,bitrate:128}],["high-stereo",{sampleRate:48e3,channelCount:2,bitrate:192}]]),Yj=new j.default,zj=(vj=nn(GC),bj=nn(GC),_j=nn(GC),yj=nn(GC),wj=Jt.apply(void 0,D(nj.LOCAL_STREAM.switchDevice)),xj=Jt(nj.STREAM.addTrack),kj=Jt(nj.STREAM.removeTrack),Sj=Jt(nj.STREAM.replaceTrack),Cj=tn({retries:10,timeout:3e3,onRetryFailed:function(e){CR.logFailedEvent({userId:this.client_?this.client_.getUserId():this.userId_,eventType:yC,error:e}),this.emitter_.emit($O,new _R({code:bR.DEVICE_AUTO_RECOVER_FAILED,message:e.message}))}}),Tj=Zt(nj.LOCAL_STREAM.setAudioCaptureVolume),Ej=nn(GC),Ij=function(e){function r(e){var n;s(this,r);var i=t(t({},e),{isRemote:!1,type:"local"});return(n=x.call(this,i)).name_=GC,n.client_=null,n.video_=e.video,n.audio_=e.audio,n.cameraId_=e.cameraId,n.cameraGroupId_="",n.facingMode_=e.facingMode,n.microphoneId_=e.microphoneId,n.microphoneGroupId_="",n.microphoneLabel_="",n.videoSource_=e.videoSource,n.audioSource_=e.audioSource,n.screen_=e.screen,n.screenAudio_=e.screenAudio,n.audioProfile_={echoCancellation:!0,autoGainControl:!0,noiseSuppression:!0,sampleRate:48e3,channelCount:1,bitrate:40},n.screenAudio_&&(n.audioProfile_.echoCancellation=!0,n.audioProfile_.autoGainControl=!1,n.audioProfile_.noiseSuppression=!1),EI(e.echoCancellation)&&(n.audioProfile_.echoCancellation=e.echoCancellation),EI(e.autoGainControl)&&(n.audioProfile_.autoGainControl=e.autoGainControl),EI(e.noiseSuppression)&&(n.audioProfile_.noiseSuppression=e.noiseSuppression),n.videoProfile_=jj.get("480p_2"),n.screenProfile_=Vj.get("1080p"),n.videoSetting_=null,n.muteState_={video:!1,audio:!1,auxVideo:!1},n.beautyStatus_=!1,n.prevAudioRecoverTime_=0,n.prevVideoRecoverTime_=0,n.isAudioRecovering_=!1,n.isVideoRecovering_=!1,n.initState(),n.canvas_=null,n.canvasInterval_=null,n.canvasTrack_=null,n.gain_={audioTrack:null,source:null,gainNode:null},n.captureVolume_=100,n.enableAutoRecoverCapture_=!!SI(e.enableAutoRecoverCapture)||e.enableAutoRecoverCapture,n.enableAutoRecoverOther_=!EI(e.enableAutoRecoverOther)||e.enableAutoRecoverOther,n.log_.info("stream created: ".concat(n.id_," autoRecover: ").concat(n.enableAutoRecoverCapture_)),n.isAIDenoiser=!1,n}g(r,e);var o,l,c,u,f,p,h,m,b,_,y,w,x=A(r);return d(r,[{key:"initState",value:function(){this.isAddingTrack_=!1,this.isRemovingTrack_=!1,this.setIsReadyToPublish(!1),this.setPublishState(-1)}},{key:"installEvents",value:function(){P(v(r.prototype),"installEvents",this).call(this),BI.on(135,this.onVideoTrackStopped,this),BI.on(130,this.onVideoTrackStopped,this),BI.on(137,this.onAudioTrackStopped,this),BI.on(136,this.onAudioTrackStopped,this)}},{key:"uninstallEvents",value:function(){P(v(r.prototype),"uninstallEvents",this).call(this),BI.off(135,this.onVideoTrackStopped,this),BI.off(130,this.onVideoTrackStopped,this),BI.off(137,this.onAudioTrackStopped,this),BI.off(136,this.onAudioTrackStopped,this)}},{key:"initialize",value:function(){var e=this;return new W.default(function(t,n){if(Ot())n(new _R({code:bR.INVALID_OPERATION,message:st({key:UT})}));else{if(SI(e.audio_)){var r=new MediaStream;return SI(e.audioSource_)||(r.addTrack(e.audioSource_),e.updateAudioPlayingState(!0)),SI(e.videoSource_)||(r.addTrack(e.videoSource_),e.updateVideoPlayingState(!0)),e.setMediaStream(r),CR.logSuccessEvent({userId:e.client_?e.client_.getUserId():e.userId_,eventType:vC,kind:"custom"}),e.setIsReadyToPublish(!0),t()}e.screen_?(e.log_.info("initialize stream audio: "+e.audio_+" screenAudio: "+e.screenAudio_+" screen: "+e.screen_),Bj({audio:e.audio_,screenAudio:e.screenAudio_,microphoneId:e.microphoneId_,width:e.screenProfile_.width,height:e.screenProfile_.height,frameRate:e.screenProfile_.frameRate,sampleRate:e.audioProfile_.sampleRate,channelCount:e.audioProfile_.channelCount,autoGainControl:e.audioProfile_.autoGainControl,noiseSuppression:e.audioProfile_.noiseSuppression,echoCancellation:e.audioProfile_.echoCancellation}).then(function(n){e.setMediaStream(n),e.updateAudioPlayingState(e.audio_||e.screenAudio_),e.updateVideoPlayingState(!0);var r=e.getVideoTrack();return e.listenForScreenSharingStopped(r),e.setVideoContentHint("detail"),e.updateDeviceIdInUse(),e.setIsReadyToPublish(!0),e.log_.info((0,I.default)(r.getSettings())),CR.logSuccessEvent({userId:e.client_?e.client_.getUserId():e.userId_,eventType:vC,kind:"getDisplayMedia"}),t()}).catch(function(t){CR.logFailedEvent({userId:e.client_?e.client_.getUserId():e.userId_,eventType:vC,kind:"getDisplayMedia",error:t}),e.log_.error("getDisplayMedia error observed "+t),n(t instanceof _R?t:new _R({code:bR.INITIALIZE_FAILED,name:t.name,message:t.message}))})):(BI.emit(121,{stream:e,audio:e.audio_,video:e.video_}),e.log_.info("initialize stream audio: "+e.audio_+" video: "+e.video_),Uj({audio:e.audio_,video:e.video_,facingMode:e.facingMode_,cameraId:e.cameraId_,microphoneId:e.microphoneId_,width:e.videoProfile_.width,height:e.videoProfile_.height,frameRate:e.videoProfile_.frameRate,sampleRate:e.audioProfile_.sampleRate,channelCount:e.audioProfile_.channelCount,autoGainControl:e.audioProfile_.autoGainControl,noiseSuppression:e.audioProfile_.noiseSuppression,echoCancellation:e.audioProfile_.echoCancellation,useExact:!0,retryWhenExactFailed:!0}).then(function(n){return BI.emit(122,{stream:e,audio:e.audio_,video:e.video_}),e.setMediaStream(n),n.getTracks().forEach(function(t){t.kind===hS&&AO&&(e.videoSetting_=t.getSettings()),RO&&e.log_.info("".concat(t.kind," capabilities: ").concat((0,I.default)(t.getCapabilities())))}),e.updateAudioPlayingState(e.audio_),e.updateVideoPlayingState(e.video_),e.updateDeviceIdInUse(),e.log_.info("gotStream hasAudio: "+e.hasAudio()+" hasVideo: "+e.hasVideo()),e.setIsReadyToPublish(!0),CR.logSuccessEvent({userId:e.client_?e.client_.getUserId():e.userId_,eventType:vC,kind:"getUserMedia"}),t()}).catch(function(t){BI.emit(123,{stream:e,audio:e.audio_,video:e.video_,error:t}),CR.logFailedEvent({userId:e.client_?e.client_.getUserId():e.userId_,eventType:vC,kind:"getUserMedia",error:t}),e.log_.error("getUserMedia error observed "+t),n(t)}))}})}},{key:"listenForScreenSharingStopped",value:function(e){var t=this;e.addEventListener("ended",function(e){t.log_.info("screen sharing was stopped because the video track is ended"),t.emitter_.emit("screen-sharing-stopped")})}},{key:"muteAudio",value:function(){var e=P(v(r.prototype),"muteAudio",this).call(this);return e&&(this.log_.info("localStream mute audio"),this.sendMutedFlag(pS,!0)),e}},{key:"muteVideo",value:function(){var e=P(v(r.prototype),"muteVideo",this).call(this);return e&&(this.log_.info("localStream mute video"),this.sendMutedFlag(hS,!0)),e}},{key:"unmuteAudio",value:function(){var e=P(v(r.prototype),"unmuteAudio",this).call(this);return e&&(this.log_.info("localStream unmute audio"),this.sendMutedFlag(pS,!1)),e}},{key:"unmuteVideo",value:function(){var e=P(v(r.prototype),"unmuteVideo",this).call(this);return e&&(this.log_.info("localStream unmute video"),this.sendMutedFlag(hS,!1)),e}},{key:"sendMutedFlag",value:function(e,t){this.setMuteState(e,t);var n=this.getConnection();if(n){n.sendMutedFlag(this.muteState_,this);var r=n.getUserId(),i=n.getTinyId(),o="".concat(t?xS:kS," local ").concat(e," track");wR(r,{eventId:e===pS?t?32772:32774:t?32773:32775,eventDesc:o,timestamp:Db(),userId:r,tinyId:i})}}},{key:"setMuteState",value:function(e,t){this.muteState_[e]=t,this.log_.info("set ".concat(e," muted state: [").concat(t?"mute":"unmute","]"))}},{key:"setAudioProfile",value:function(e){var n;"object"===i(e)?n=e:void 0===(n=Hj.get(e))&&(n=Hj.get("standard")),this.log_.info("setAudioProfile: "+(0,I.default)(n)),this.audioProfile_=t(t({},this.audioProfile_),n)}},{key:"setVideoProfile",value:(w=a(n().mark(function e(r){var i,o,a,s;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.connection_||At()){e.next=2;break}throw new _R({code:bR.NOT_SUPPORTED,message:st({key:"NOT_SUPPORTED_PROFILE"})});case 2:if(xI(r)?o=t(t({},this.videoProfile_),r):CI(r)&&(o=jj.get(r),SI(o)&&(o=jj.get("480p_2"))),null!==(i=this.client_)&&void 0!==i&&i.get2k4kFlag()&&(1!==this.client_.get2k4kFlag()&&!this.screen_&&o.height*o.width>=3686400?(o.width=1920,o.height=1080,this.log_.warn(dT)):mj.handleFunctionState({fnName:"2K_4K"})),o&&o.width*o.height>921600&&pI&&(o.width=1280,o.height=720,this.log_.warn("reset to 1280 * 720 on iOS 13~14")),this.log_.info("setVideoProfile "+(0,I.default)(o)),!(a=this.getVideoTrack())){e.next=10;break}return e.next=10,a.applyConstraints(o);case 10:if(s=this.videoProfile_.bitrate!==o.bitrate,this.videoProfile_=o,!s||!this.connection_){e.next=16;break}return e.next=15,this.connection_.setBandwidth({bandwidth:o.bitrate,type:hS,videoType:vS});case 15:this.connection_.sendMediaSettings(this);case 16:case"end":return e.stop()}},e,this)})),function(e){return w.apply(this,arguments)})},{key:"getVideoBitrate",value:function(){return this.screen_?this.screenProfile_.bitrate:this.videoProfile_.bitrate}},{key:"getAudioBitrate",value:function(){return this.audioProfile_.bitrate}},{key:"setScreenProfile",value:function(e){var t=e;CI(e)&&(t=Vj.get(e)||Vj.get("1080p")),this.log_.info("setScreenProfile "+(0,I.default)(e)),this.screenProfile_=t}},{key:"getVideoProfile",value:function(){return this.screen_?this.screenProfile_:this.videoProfile_}},{key:"getAudioProfile",value:function(){return this.audioProfile_}},{key:"setVideoContentHint",value:function(e){var t=this.getVideoTrack();t&&"contentHint"in t&&(this.log_.info("set video track contentHint to: "+e),t.contentHint=e,t.contentHint!==e&&this.log_.warn("Invalid video track contentHint: "+e))}},{key:"switchDevice",value:(y=a(n().mark(function e(t,r){var i,o,a,s,l,c,u,d,f,p,h,g,m,v,b,_,y,w;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.mediaStream_&&this.cameraId_!==r&&this.facingMode_!==r){e.next=2;break}return e.abrupt("return");case 2:if(o=t===hS,!(i=t===pS)||r!==this.microphoneId_){e.next=11;break}if(r===rT){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,Gt(this.microphoneGroupId_,this.microphoneLabel_);case 9:if(!e.sent){e.next=11;break}return e.abrupt("return");case 11:return this.setIsReadyToPublish(!1),this.log_.info("switchDevice "+t+" to: "+r),i&&(a=this.getAudioTrack(),s=this.getMicrophoneTrackMixed(),a&&a.stop(),s&&s.stop()),o&&((l=this.getVideoTrack())&&l.stop(),WE&&(c=this.getAudioTrack())&&(this.log_.info("stop audio track first in huawei env"),c.stop())),e.prev=15,e.next=18,Uj({audio:i||WE,video:o,facingMode:"user"===r||r===wS?r:void 0,cameraId:o?r:this.cameraId_,microphoneId:i?r:this.microphoneId_,width:this.videoProfile_.width,height:this.videoProfile_.height,frameRate:this.videoProfile_.frameRate,sampleRate:this.audioProfile_.sampleRate,channelCount:this.audioProfile_.channelCount,useExact:!0,retryWhenExactFailed:!1});case 18:if(u=e.sent,d=null,!i){e.next=25;break}(f=u.getAudioTracks()[0])&&this.isAudioTrackMixed()?(p=this.getAudioTrack(),h=QH.AudioMixerPlugin.getAudioTrackMap(),g=QH.AudioMixerPlugin.mix({targetTrack:f,sourceList:h.get(p.id).sourceList,trackList:h.get(p.id).trackList}),d=g):d=f,e.next=34;break;case 25:if(!(d=u.getVideoTracks()[0])||!this.isVideoTrackBeautified()){e.next=30;break}return e.next=29,this.generateBeautyTrack(d);case 29:d=e.sent;case 30:if(!(m=u.getAudioTracks()[0])||!WE){e.next=34;break}return e.next=34,this.replaceTrack(m);case 34:return e.next=36,this.replaceTrack(d);case 36:this.updateDeviceIdInUse(),(v=this.getConnection())&&(b=v.getUserId(),_=v.getTinyId(),y=32780,w="switch camera",i&&(y=32781,w="switch microphone"),wR(b,{eventId:y,eventDesc:w,timestamp:Db(),userId:b,tinyId:_})),this.log_.info("switch ".concat(i?"microphone":"camera"," success ")),i&&(this.audio_=!0),o&&(this.video_=!0,r!==wS&&"user"!==r||(this.facingMode_=r)),this.setIsReadyToPublish(!0),e.next=50;break;case 45:throw e.prev=45,e.t0=e.catch(15),this.log_.error(e.t0),i?this.recoverCapture({audio:!0,video:!1,microphoneId:this.microphoneId_}):this.recoverCapture({audio:!1,video:!0,cameraId:this.cameraId_,facingMode:this.facingMode_}),e.t0;case 50:case"end":return e.stop()}},e,this,[[15,45]])})),function(e,t){return y.apply(this,arguments)})},{key:"addTrack",value:(_=a(n().mark(function e(t){var r,i,o;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.kind===hS&&AO&&(r=t.getSettings(),!this.videoSetting_||r.width===this.videoSetting_.width&&r.height===this.videoSetting_.height||this.log_.warn("video resolution of the track (".concat(r.width," x ").concat(r.height,") shall be kept the same as the previous: ").concat(this.videoSetting_.width," x ").concat(this.videoSetting_.height,". It may cause abnormal Cloud Recording."))),this.isAddingTrack_=!0,this.keepMuteState(t),this.mediaStream_.addTrack(t),!(i=this.getConnection())){e.next=11;break}return o=null,t.kind===hS&&(fI||dI)&&RI(t)&&(o=this.getCanvasTrack()),e.next=11,i.addTrack(o||t,this);case 11:t.kind===pS?(this.audio_=!0,this.updateAudioPlayingState(!0),100!==this.captureVolume_&&this.setAudioCaptureVolume(this.captureVolume_)):(this.video_=!0,this.updateVideoPlayingState(!0)),this.isAddingTrack_=!1,e.next=20;break;case 15:throw e.prev=15,e.t0=e.catch(0),this.mediaStream_.removeTrack(t),this.isAddingTrack_=!1,e.t0;case 20:case"end":return e.stop()}},e,this,[[0,15]])})),function(e){return _.apply(this,arguments)})},{key:"removeTrack",value:(b=a(n().mark(function e(t){var r;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.isRemovingTrack_=!0,!(r=this.getConnection())){e.next=17;break}if(t.kind!==hS||!fI&&!dI||!this.canvasTrack_){e.next=10;break}return e.next=7,r.removeTrack(this.canvasTrack_,this);case 7:this.clearCanvas(),e.next=17;break;case 10:if(t.kind!==pS||!this.gain_.audioTrack){e.next=15;break}return e.next=13,r.removeTrack(this.gain_.audioTrack,this);case 13:e.next=17;break;case 15:return e.next=17,r.removeTrack(t,this);case 17:this.mediaStream_.removeTrack(t),t.kind===pS?(this.audio_=!1,this.updateAudioPlayingState(!1),this.stopGainNode()):(this.video_=!1,this.updateVideoPlayingState(!1)),this.isRemovingTrack_=!1,e.next=26;break;case 22:throw e.prev=22,e.t0=e.catch(0),this.isRemovingTrack_=!1,e.t0;case 26:case"end":return e.stop()}},e,this,[[0,22]])})),function(e){return b.apply(this,arguments)})},{key:"replaceTrack",value:(m=a(n().mark(function e(t){var i,o,a;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.kind===hS&&AO&&(i=t.getSettings(),!this.videoSetting_||i.width===this.videoSetting_.width&&i.height===this.videoSetting_.height||this.log_.warn("video resolution of the track (".concat(i.width," x ").concat(i.height,") shall be kept the same as the previous: ").concat(this.videoSetting_.width," x ").concat(this.videoSetting_.height,". It may cause abnormal Cloud Recording."))),this.keepMuteState(t),o=this.mediaStream_,t.kind!==pS){e.next=12;break}if(o.removeTrack(o.getAudioTracks()[0]),o.addTrack(t),P(v(r.prototype),"restartAudio",this).call(this),!this.gain_.gainNode){e.next=10;break}return this.reconnectGainNode(t),e.abrupt("return");case 10:e.next=15;break;case 12:o.removeTrack(o.getVideoTracks()[0]),o.addTrack(t),P(v(r.prototype),"restartVideo",this).call(this);case 15:if(!(a=this.getConnection())){e.next=21;break}if(t.kind!==hS||!fI&&!dI||!this.canvasTrack_){e.next=19;break}return e.abrupt("return");case 19:return e.next=21,a.replaceTrack(t,this);case 21:case"end":return e.stop()}},e,this)})),function(e){return m.apply(this,arguments)})},{key:"recoverCapture",value:(h=a(n().mark(function e(t){var r,i,o,a,s,l,c,u,d,f,p,h,g,m,v,b,_;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!this.mediaStream_||!this.enableAutoRecoverCapture_||t.audio&&!t.video&&this.isAudioRecovering_||t.video&&!t.audio&&this.isVideoRecovering_)){e.next=2;break}return e.abrupt("return");case 2:return t.audio&&(this.isAudioRecovering_=!0),t.video&&(this.isVideoRecovering_=!0),this.log_.warn("recoverCapture() trying "+(0,I.default)(t)),r=this.audio_&&t.audio,i=this.video_&&t.video,e.prev=7,e.next=10,QH.getCameras();case 10:return o=e.sent,e.next=13,QH.getMicrophones();case 13:if(a=e.sent,i&&0===o.length&&(i=!1,this.log_.warn("recoverCapture() video flag is true, but no camera detected, set video to false")),r&&0===a.length&&(r=!1,this.log_.warn("recoverCapture() audio flag is true, but no microphone detected, set audio to false")),r||i){e.next=21;break}return t.audio&&(this.isAudioRecovering_=!1),t.video&&(this.isVideoRecovering_=!1),this.log_.warn("recoverCapture() both audio and video are false, aborted"),e.abrupt("return");case 21:return s=t&&o.findIndex(function(e){return e.deviceId===t.cameraId})>=0,l=t&&a.findIndex(function(e){return e.deviceId===t.microphoneId})>=0,r&&(null===(c=this.getAudioTrack())||void 0===c||c.stop()),i&&(null===(u=this.getVideoTrack())||void 0===u||u.stop()),e.next=27,Uj({audio:r,video:i,cameraId:s?t.cameraId:void 0,microphoneId:l?t.microphoneId:void 0,facingMode:this.facingMode_,width:this.videoProfile_.width,height:this.videoProfile_.height,frameRate:this.videoProfile_.frameRate,sampleRate:this.audioProfile_.sampleRate,channelCount:this.audioProfile_.channelCount});case 27:d=e.sent,f=d.getTracks(),p=0;case 30:if(!(p<f.length)){e.next=57;break}if((h=f[p]).kind!==pS||!this.isAudioTrackMixed()){e.next=43;break}if(g=this.getAudioTrack(),m=QH.AudioMixerPlugin.getAudioTrackMap(),(v=m.get(g.id)).hasMicrophone){e.next=39;break}return h.stop(),e.abrupt("continue",54);case 39:return b=QH.AudioMixerPlugin.mix({targetTrack:h,sourceList:v.sourceList,trackList:v.trackList}),e.next=42,this.replaceTrack(b);case 42:return e.abrupt("continue",54);case 43:if(h.kind!==hS||!this.isVideoTrackBeautified()){e.next=50;break}return e.next=46,this.generateBeautyTrack(h);case 46:return _=e.sent,e.next=49,this.replaceTrack(_);case 49:return e.abrupt("continue",54);case 50:return e.next=52,this.replaceTrack(h);case 52:if("ended"!==h.readyState){e.next=54;break}throw new Error("new track is failed, muted ".concat(h.muted," readyState ").concat(h.readyState));case 54:p++,e.next=30;break;case 57:this.updateDeviceIdInUse(),CR.logSuccessEvent({userId:this.client_?this.client_.getUserId():this.userId_,eventType:yC}),t.audio&&(this.isAudioRecovering_=!1),t.video&&(this.isVideoRecovering_=!1),this.log_.warn("recoverCapture() successfully"),this.emitter_.emit("device-auto-recovered",{isCamera:t.video,isMicrophone:t.audio,cameraId:this.cameraId_,microphoneId:this.microphoneId_}),e.next=71;break;case 65:throw e.prev=65,e.t0=e.catch(7),t.audio&&(this.isAudioRecovering_=!1),t.video&&(this.isVideoRecovering_=!1),this.log_.warn("recoverCapture() failed, "+e.t0),e.t0;case 71:case"end":return e.stop()}},e,this,[[7,65]])})),function(e){return h.apply(this,arguments)})},{key:"updateDeviceIdInUse",value:function(){var e=this;if(!this.mediaStream_)return this.cameraId_="",this.cameraGroupId_="",this.microphoneId_="",void(this.microphoneGroupId_="");AO&&this.mediaStream_.getTracks().forEach(function(t){if(t.kind===pS&&e.isAudioTrackMixed()){var n=e.getMicrophoneTrackMixed();if(n){var r=n.getSettings(),i=r.deviceId,o=r.groupId;i&&(e.microphoneId_=i,e.microphoneGroupId_=o,e.microphoneLabel_=n.label)}}else if(t.kind===hS&&e.isVideoTrackBeautified()){var a=e.getBeautyOriginTrack();if(a){var s=a.getSettings(),l=s.deviceId,c=s.groupId;l&&(e.cameraId_=l,e.cameraGroupId_=c)}}else{var u=t.getSettings(),d=u.deviceId,f=u.groupId;d&&(t.kind===pS?(e.microphoneId_=d,e.microphoneGroupId_=f,e.microphoneLabel_=t.label):t.kind!==hS||e.screen_||(e.cameraId_=d,e.cameraGroupId_=f))}});var t=this.mediaStream_.getAudioTracks(),n=this.mediaStream_.getVideoTracks();t&&0===t.length&&(this.microphoneId_="",this.microphoneGroupId_=""),n&&0===n.length&&(this.cameraId_="",this.cameraGroupId_="")}},{key:"isAudioTrackMixed",value:function(){if(QH.AudioMixerPlugin){var e=QH.AudioMixerPlugin.getAudioTrackMap(),t=this.getAudioTrack();if(e&&t&&e.has(t.id))return!0}return!1}},{key:"getMicrophoneTrackMixed",value:function(){if(QH.AudioMixerPlugin){var e=QH.AudioMixerPlugin.getAudioTrackMap(),t=this.getAudioTrack();if(e&&t&&e.has(t.id)){var n=e.get(t.id);return n.hasMicrophone?n.microphoneTrack:null}}return null}},{key:"isVideoTrackBeautified",value:function(){if(QH.beautyTrackMap){var e=QH.beautyTrackMap,t=this.getVideoTrack();if(t&&e.has(t.id))return!0}return!1}},{key:"getBeautyOriginTrack",value:function(){if(QH.beautyTrackMap){var e=QH.beautyTrackMap,t=this.getVideoTrack();if(t&&e.has(t.id)){var n=e.get(t.id);if(n.originTrack)return n.originTrack}}return null}},{key:"generateBeautyTrack",value:(p=a(n().mark(function e(t){var r,i,o,a;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null,i=this.getVideoTrack(),o=QH.beautyTrackMap.get(i.id),a=o.param,o.type){e.next=8;break}r=o.pluginInstance.generateBeautyTrack(t),e.next=22;break;case 8:e.t0=o.type,e.next="beauty"===e.t0?11:"virtual"===e.t0?13:"mixed"===e.t0?17:21;break;case 11:return r=o.pluginInstance.generateBeautyTrack(t),e.abrupt("break",22);case 13:return e.next=15,o.pluginInstance.generateVirtualTrack({videoTrack:t,type:a.type,img:a.img});case 15:case 19:return r=e.sent,e.abrupt("break",22);case 17:return e.next=19,o.pluginInstance.generateMixedTrack({videoTrack:t,type:a.type,img:a.img});case 21:return e.abrupt("break",22);case 22:return o.pluginInstance.deleteSource(i.id),this.log_.info("regenerate beauty track, track id = ".concat(t.id)),e.abrupt("return",r);case 25:case"end":return e.stop()}},e,this)})),function(e){return p.apply(this,arguments)})},{key:"getScreen",value:function(){return this.screen_}},{key:"hasScreenTrack",value:function(){if(this.screen_)return!0;var e=this.getVideoTrack();return!!e&&("detail"===e.contentHint||"text"===e.contentHint)}},{key:"getVideo",value:function(){return this.video_}},{key:"getAudio",value:function(){return this.audio_}},{key:"getCameraId",value:function(){return this.cameraId_}},{key:"getMicrophoneId",value:function(){return this.microphoneId_}},{key:"getMicrophoneGroupId",value:function(){return this.microphoneGroupId_}},{key:"getIsReadyToPublish",value:function(){return this.isReadyToPublish_}},{key:"setIsReadyToPublish",value:function(e){this.isReadyToPublish_=e}},{key:"setPublishState",value:function(e){this.publishState_=e}},{key:"setBeautyStatus",value:function(e){this.beautyStatus_=!!e}},{key:"getBeautyStatus",value:function(){return this.beautyStatus_}},{key:"syncMuteState",value:function(){var e=this.getAudioTrack(),t=this.getVideoTrack();if(e){var n=!e.enabled;this.setMuteState(pS,n)}if(t){var r=!t.enabled;this.setMuteState(hS,r)}this.connection_&&this.connection_.sendMutedFlag(this.muteState_,this)}},{key:"keepMuteState",value:function(e){e instanceof MediaStreamTrack&&this.muteState_[e.kind]&&(e.enabled=!1,this.log_.warn("prev ".concat(e.kind," track is muted, keep mute state")))}},{key:"onVideoTrackStopped",value:(f=a(n().mark(function e(t){var r,i,o=this;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.stream,i=t.type,r===this&&this.video_&&this.cameraId_&&zt(this.getVideoTrack())&&!this.isVideoRecovering_&&(i!==xS||!FE||!sI)){e.next=3;break}return e.abrupt("return");case 3:if(!(Date.now()-this.prevVideoRecoverTime_<2e3)){e.next=6;break}return setTimeout(function(){return o.onVideoTrackStopped({stream:r,type:i})},2e3),e.abrupt("return");case 6:i===xS?setTimeout(function(){var e=o.getVideoTrack();null!=e&&e.muted&&"visible"===document.visibilityState&&o.recoverVideoCapture(i)},5e3):this.recoverVideoCapture(i);case 7:case"end":return e.stop()}},e,this)})),function(e){return f.apply(this,arguments)})},{key:"onAudioTrackStopped",value:(u=a(n().mark(function e(t){var r,i,o=this;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.stream,i=t.type,!(r!==this||!this.audio_||!this.microphoneId_||this.isAudioRecovering_||i===xS&&FE&&sI)){e.next=3;break}return e.abrupt("return");case 3:if(!(Date.now()-this.prevAudioRecoverTime_<2e3)){e.next=6;break}return setTimeout(function(){return o.onAudioTrackStopped({stream:r,type:i})},2e3),e.abrupt("return");case 6:i===xS?setTimeout(function(){var e=o.getAudioTrack();null!=e&&e.muted&&"visible"===document.visibilityState&&o.recoverAudioCapture(i)},5e3):this.recoverAudioCapture(i);case 7:case"end":return e.stop()}},e,this)})),function(e){return u.apply(this,arguments)})},{key:"recoverAudioCapture",value:(c=a(n().mark(function e(t){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.prevAudioRecoverTime_=Date.now(),CR.uploadEvent({log:"stat-local-audio-".concat(t),userId:this.userId_}),e.t0=this,e.next=5,this.getRecoverCaptureDeviceId(!1);case 5:e.t1=e.sent,e.t2={audio:!0,video:!1,microphoneId:e.t1},e.t0.recoverCapture.call(e.t0,e.t2);case 8:case"end":return e.stop()}},e,this)})),function(e){return c.apply(this,arguments)})},{key:"recoverVideoCapture",value:(l=a(n().mark(function e(t){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.prevVideoRecoverTime_=Date.now(),CR.uploadEvent({log:"stat-local-video-".concat(t),userId:this.userId_}),e.t0=this,e.next=5,this.getRecoverCaptureDeviceId(!0);case 5:e.t1=e.sent,e.t2={audio:!1,video:!0,cameraId:e.t1},e.t0.recoverCapture.call(e.t0,e.t2);case 8:case"end":return e.stop()}},e,this)})),function(e){return l.apply(this,arguments)})},{key:"getRecoverCaptureDeviceId",value:(o=a(n().mark(function e(){var t,r,i,o,a=arguments;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!(a.length>0&&void 0!==a[0])||a[0],!(r=t?this.cameraId_:this.microphoneId_)||!this.enableAutoRecoverOther_){e.next=17;break}if(Yj.has(r)?Yj.set(r,Yj.get(r)+1):Yj.set(r,1),!((i=Yj.get(r))>=3)){e.next=17;break}if(!t){e.next=12;break}return e.next=9,QH.getCameras();case 9:e.t0=e.sent.find(function(e){return!Yj.has(e.deviceId)}),e.next=15;break;case 12:return e.next=14,QH.getMicrophones();case 14:e.t0=e.sent.find(function(e){return!Yj.has(e.deviceId)});case 15:(o=e.t0)&&(this.log_.warn("".concat(t?"camera":"mic"," ").concat(r," capture fail ").concat(i," times, change new ").concat(o.deviceId)),r=o.deviceId);case 17:return e.abrupt("return",r);case 18:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)})},{key:"setAudioVolume",value:function(e){P(v(r.prototype),"setAudioVolume",this).call(this,e)}},{key:"clearCanvas",value:function(){this.canvasInterval_&&(gO.clearTask(this.canvasInterval_),this.canvasInterval_=null,this.canvas_=null,this.canvasTrack_=null)}},{key:"getCanvasTrack",value:function(){var e=this;if(this.canvasTrack_)return this.canvasTrack_;this.log_.info("gen canvas track");var t=this.getVideoTrack().getSettings(),n=t.width,r=t.height,i=t.frameRate;this.canvas_=document.createElement("canvas");var o=this.canvas_.getContext("2d");this.canvas_.width=n,this.canvas_.height=r,this.canvasInterval_=gO.run(cT,function(){if(e.hasVideo()){var t=e.getVideoTrack().getSettings();t.width===e.canvas_.width&&t.height===e.canvas_.height||(e.canvas_.width=t.width,e.canvas_.height=t.height)}e.videoPlayer_&&e.videoPlayer_.element_&&o.drawImage(e.videoPlayer_.element_,0,0,e.canvas_.width,e.canvas_.height)},{fps:Math.max(15,i)});var a=this.canvas_.captureStream();return this.canvasTrack_=a.getVideoTracks()[0],this.canvasTrack_}},{key:"setClient",value:function(e,t){e&&(this.log_.setUserId(e.getUserId()),this.log_.setSdkAppId(e.getSDKAppId()),t||this.syncMuteState()),this.client_=e}},{key:"setAudioCaptureVolume",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;if(!this.hasAudio()||t<0||!It())return!1;if(this.captureVolume_===t)return!0;this.captureVolume_=t,this.log_.info("setCaptureVolume "+t),t/=100;var n=MI();if(this.gain_.gainNode)this.gain_.gainNode.gain.value=t;else{var i,o=new MediaStream;o.addTrack(this.getAudioTrack());var a=n.createMediaStreamDestination(),s=n.createMediaStreamSource(o),l=n.createGain();l.gain.value=t,s.connect(l),l.connect(a);var c=a.stream.getAudioTracks()[0],u=function(t){return e.log_.info("gained audio track ".concat(t))};c.onmute=function(){return u("muted")},c.onunmute=function(){return u("unmuted")},c.onended=function(){return u("ended")},this.gain_={source:s,audioTrack:c,gainNode:l},null===(i=this.connection_)||void 0===i||i.replaceTrack(c),P(v(r.prototype),"restartAudio",this).call(this)}return!0}},{key:"getGainedTrack",value:function(){return this.gain_.audioTrack}},{key:"reconnectGainNode",value:function(e){this.log_.warn("reconnect gain node");var t=new MediaStream;t.addTrack(e);var n=MI().createMediaStreamSource(t);n.connect(this.gain_.gainNode),this.gain_.source.disconnect(),this.gain_.source=n}},{key:"stopGainNode",value:function(){var e=this.gain_,t=e.audioTrack,n=e.source,r=e.gainNode;r&&(n.disconnect(),r.disconnect(),t.onmute=null,t.onunmute=null,t.onended=null,t.stop(),this.gain_={source:null,gainNode:null,audioTrack:null}),this.captureVolume_=100}},{key:"close",value:function(){this.setIsReadyToPublish(!1),this.stopGainNode(),P(v(r.prototype),"close",this).call(this)}},{key:"setIsAIDenoiser",value:function(e){this.isAIDenoiser=e}}]),r}(Oj),Y(Ij.prototype,"setAudioProfile",[vj],(0,ue.default)(Ij.prototype,"setAudioProfile"),Ij.prototype),Y(Ij.prototype,"setVideoProfile",[bj],(0,ue.default)(Ij.prototype,"setVideoProfile"),Ij.prototype),Y(Ij.prototype,"setScreenProfile",[_j],(0,ue.default)(Ij.prototype,"setScreenProfile"),Ij.prototype),Y(Ij.prototype,"setVideoContentHint",[yj],(0,ue.default)(Ij.prototype,"setVideoContentHint"),Ij.prototype),Y(Ij.prototype,"switchDevice",[wj],(0,ue.default)(Ij.prototype,"switchDevice"),Ij.prototype),Y(Ij.prototype,"addTrack",[xj],(0,ue.default)(Ij.prototype,"addTrack"),Ij.prototype),Y(Ij.prototype,"removeTrack",[kj],(0,ue.default)(Ij.prototype,"removeTrack"),Ij.prototype),Y(Ij.prototype,"replaceTrack",[Sj],(0,ue.default)(Ij.prototype,"replaceTrack"),Ij.prototype),Y(Ij.prototype,"recoverCapture",[Cj],(0,ue.default)(Ij.prototype,"recoverCapture"),Ij.prototype),Y(Ij.prototype,"setAudioCaptureVolume",[Tj,Ej],(0,ue.default)(Ij.prototype,"setAudioCaptureVolume"),Ij.prototype),Ij),Gj={voiceActivityDetection:!1},Wj=(Aj=tn({retries:1,timeout:0,onRetrying:function(e){this.log_.warn("connection timeout, retrying [".concat(e,"]"))},onError:function(e,t,n){e.message.includes("timeout")?(this.reset(),this.initialize(),t()):n(e)}}),Rj=function(e){function r(e){var t;return s(this,r),(t=O.call(this,e)).localStream_=null,t.exchangeSDPTimeout_=-1,t.localAuxStream_=null,t.publishingStream_=null,t.isPublishingAuxStream_=!1,t.smallGenerator_=null,t.isSDPExchanging_=!1,t.ssrc_={audio:0,video:0,small:0,auxiliary:0},t.mediaSettings_={videoCodec:"",videoWidth:0,videoHeight:0,videoBps:0,videoFps:0,audioCodec:"opus",audioFs:0,audioChannel:0,audioBps:0,smallVideoWidth:0,smallVideoHeight:0,smallVideoFps:0,smallVideoBps:0,auxVideoWidth:0,auxVideoHeight:0,auxVideoFps:0,auxVideoBps:0},t.mixedAudioTrack_=null,t}g(r,e);var i,o,l,c,u,f,p,h,m,b,_,y,w,x,k,S,C,T,E,R,O=A(r);return d(r,[{key:"isMainStreamPublished",get:function(){return!!this.localStream_}},{key:"isAuxStreamPublished",get:function(){return!!this.localAuxStream_}},{key:"publishState",get:function(){var e=this,t={audio:!1,bigVideo:!1,smallVideo:!1,auxVideo:!1};if(this.peerConnection_){var n,r,i,o,a=this.peerConnection_.getSenders();a&&(Tt()?(t.audio=!(null===(n=a[0])||void 0===n||!n.track),t.bigVideo=!(null===(r=a[1])||void 0===r||!r.track),t.smallVideo=!(null===(i=a[2])||void 0===i||!i.track),t.auxVideo=!(null===(o=a[3])||void 0===o||!o.track)):a.forEach(function(n){n.track&&(n.track.kind===pS?t.audio=!0:(t.bigVideo=!0,e.smallGenerator_&&(t.smallVideo=!0)))}))}return t}},{key:"initialize",value:function(){P(v(r.prototype),"initialize",this).call(this),this.installEvents()}},{key:"reset",value:function(){this.isReconnecting_&&this.stopReconnection(),this.closePeerConnection(),this.uninstallEvents(),this.clearExchangeSDPTimeout(),this.localStream_&&this.localStream_.clearCanvas()}},{key:"close",value:function(){P(v(r.prototype),"close",this).call(this),this.reset(),this.emitConnectionStateChangedEvent(QS),this.smallGenerator_&&(this.smallGenerator_.destroy(),this.smallGenerator_=null)}},{key:"installEvents",value:function(){this.emitter_.on(LO.ERROR,this.handleError,this),this.emitter_.on(LO.CONNECTION_STATE_CHANGED,this.handleConnectionStateChange,this)}},{key:"uninstallEvents",value:function(){this.emitter_.off(LO.ERROR,this.handleError,this),this.emitter_.off(LO.CONNECTION_STATE_CHANGED,this.handleConnectionStateChange,this)}},{key:"publish",value:(R=a(n().mark(function e(t,r){var i,o,a,s,l,c;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.publishingStream_=t,this.isPublishingAuxStream_=r,a=t.getVideoTrack(),s=null,!a||r||!this.client_.getIsEnableSmallStream()){e.next=9;break}return this.smallGenerator_=new Dj(t),e.next=8,this.smallGenerator_.initialize();case 8:s=this.smallGenerator_.generateSmallVideoTrack(this.client_.smallStreamConfig_);case 9:if(null===(i=this.client_)||void 0===i||!i.get2k4kFlag()){e.next=18;break}if(l=1===this.client_.get2k4kFlag(),c=t.getVideoProfile(),l||t.getScreen()||!(c.height*c.width>=3686400)){e.next=18;break}return c.width=1920,c.height=1080,this.log_.warn(dT),e.next=18,t.setVideoProfile(c);case 18:if(this.updateMediaSettings(t,r),!Et()){e.next=24;break}return e.next=22,this.publishByTransceiver(t,s,r);case 22:e.next=26;break;case 24:return e.next=26,this.publishByAddTrack(t,s);case 26:return this.publishingStream_=null,this.isPublishingAuxStream_=!1,r?this.localAuxStream_=t:this.localStream_=t,null===(o=this.sei_)||void 0===o||o.handleEncodedStreams(),e.abrupt("return",t);case 31:case"end":return e.stop()}},e,this)})),function(e,t){return R.apply(this,arguments)})},{key:"publishByTransceiver",value:(E=a(n().mark(function e(t,r,i){var o,a,s,l,c,u,d;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.log_.info("publish by transceiver"),o=t.getMediaStream(),a=t.getAudioTrack(),s=t.getVideoTrack(),l=null,(fI||dI)&&RI(s)&&(l=t.getCanvasTrack()),0!==(c=this.peerConnection_.getTransceivers()).length){e.next=16;break}return this.peerConnection_.addTransceiver(a||pS,{direction:FS,streams:[o]}),this.peerConnection_.addTransceiver(i?hS:l||s||hS,{direction:FS,streams:[o]}),this.peerConnection_.addTransceiver(r||hS,{direction:FS,streams:[o]}),this.peerConnection_.addTransceiver(i?l||s:hS,{direction:FS,streams:[o]}),e.next=14,this.connect();case 14:e.next=46;break;case 16:if(u=[],!a){e.next=29;break}if(!c[0].sender.track){e.next=24;break}return this.mixAudioTrack(c[0].sender.track,a),e.next=22,c[0].sender.replaceTrack(this.mixedAudioTrack_);case 22:e.next=27;break;case 24:return e.next=26,c[0].sender.replaceTrack(a);case 26:u.push(0);case 27:return e.next=29,this.setBandwidth({bandwidth:t.getAudioBitrate(),type:pS});case 29:if(!s){e.next=42;break}return d=i?3:1,e.next=33,c[d].sender.replaceTrack(l||s);case 33:return e.next=35,this.setBandwidth({bandwidth:t.getVideoBitrate(),type:hS,videoType:i?bS:vS});case 35:if(u.push(d),!r){e.next=42;break}return e.next=39,c[2].sender.replaceTrack(r);case 39:return e.next=41,this.setBandwidth({bandwidth:this.client_.smallStreamConfig.bitrate,type:hS,videoType:mS});case 41:u.push(2);case 42:return e.next=44,this.setTransceiverDirection(FS,u);case 44:return e.next=46,this.doPublishChange();case 46:case"end":return e.stop()}},e,this)})),function(e,t,n){return E.apply(this,arguments)})},{key:"publishByAddTrack",value:(T=a(n().mark(function e(t,r){var i,o,a,s;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.log_.info("publish by addtrack"),i=t.getMediaStream(),o=t.getAudioTrack(),a=t.getVideoTrack(),o&&this.peerConnection_.addTrack(o,i),a&&(this.peerConnection_.addTrack(a,i),r&&((s=new MediaStream).addTrack(r),this.peerConnection_.addTrack(r,s))),e.next=8,this.connect();case 8:case"end":return e.stop()}},e,this)})),function(e,t){return T.apply(this,arguments)})},{key:"unpublish",value:(C=a(n().mark(function e(r){var i,o,a,s;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Tt()){e.next=2;break}return e.abrupt("return",this.doUnpublish());case 2:if(i=r.getAudioTrack(),o=r===this.localAuxStream_,a=this.peerConnection_.getSenders(),s=[],!i){e.next=17;break}if(!this.mixedAudioTrack_){e.next=14;break}return this.log_.info("has mixed audioTrack, use another audioTrack"),e.next=11,a[0].replaceTrack(o?this.localStream_.getAudioTrack():this.localAuxStream_.getAudioTrack());case 11:this.destroyMixedAudioTrack(),e.next=17;break;case 14:return e.next=16,a[0].replaceTrack(null);case 16:s.push(0);case 17:if(!o){e.next=25;break}return e.next=20,a[3].replaceTrack(null);case 20:this.localAuxStream_=null,this.mediaSettings_=t(t({},this.mediaSettings_),{},{auxVideoBps:0,auxVideoFps:0,auxVideoWidth:0,auxVideoHeight:0}),s.push(3),e.next=32;break;case 25:return e.next=27,a[1].replaceTrack(null);case 27:return e.next=29,a[2].replaceTrack(null);case 29:this.localStream_=null,this.mediaSettings_=t(t({},this.mediaSettings_),{},{videoWidth:0,videoHeight:0,videoBps:0,videoFps:0,audioFs:0,audioChannel:0,audioBps:0,smallVideoWidth:0,smallVideoHeight:0,smallVideoFps:0,smallVideoBps:0}),s.push(1,2);case 32:if(!this.localStream_&&!this.localAuxStream_){e.next=39;break}return e.next=35,this.setTransceiverDirection(DS,s);case 35:return e.next=37,this.doPublishChange();case 37:e.next=41;break;case 39:return e.next=41,this.doUnpublish();case 41:case"end":return e.stop()}},e,this)})),function(e){return C.apply(this,arguments)})},{key:"doPublishChange",value:(S=a(n().mark(function e(){var t;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={state:this.publishState,constraintConfig:this.mediaSettings_},e.next=3,this.signalChannel_.sendWaitForResponse({command:"publish_state_change",data:t,responseCommand:mR.PUBLISH_STATE_CHANGE_RESULT});case 3:case"end":return e.stop()}},e,this)})),function(){return S.apply(this,arguments)})},{key:"doUnpublish",value:function(){var e=this;return this.signalChannel_.sendWaitForResponse({command:vR,commandDesc:"unpublish",responseCommand:mR.UNPUBLISH_RESULT}).then(function(){e.close()}).catch(function(){e.close()})}},{key:"updateMediaSettings",value:function(e,t){var n=this;this.localAuxStream_&&e===this.localAuxStream_&&(t=!0);var r=this.client_.getSystemResult().detail,i=r.isH264EncodeSupported,o=r.isVp8EncodeSupported;i?this.mediaSettings_.videoCodec="H264":o&&(this.mediaSettings_.videoCodec="VP8"),AO?e.getMediaStream().getTracks().forEach(function(r){var i=r.getSettings();if(r.kind===pS){var o=1;i.channelCount&&(o=i.channelCount),n.mediaSettings_.audioChannel=o,n.mediaSettings_.audioBps=1e3*e.getAudioBitrate(),n.mediaSettings_.audioFs=i.sampleRate}else if(r.kind===hS){if(t)return n.mediaSettings_.auxVideoWidth=i.width,n.mediaSettings_.auxVideoHeight=i.height,n.mediaSettings_.auxVideoFps=i.frameRate,void(n.mediaSettings_.auxVideoBps=1e3*e.getVideoBitrate());n.client_.getIsEnableSmallStream()&&(n.mediaSettings_.smallVideoWidth=n.client_.smallStreamConfig.width,n.mediaSettings_.smallVideoHeight=n.client_.smallStreamConfig.height,n.mediaSettings_.smallVideoFps=n.client_.smallStreamConfig.frameRate,n.mediaSettings_.smallVideoBps=1e3*n.client_.smallStreamConfig.bitrate),n.mediaSettings_.videoWidth=i.width,n.mediaSettings_.videoHeight=i.height,n.mediaSettings_.videoFps=i.frameRate,n.mediaSettings_.videoBps=1e3*e.getVideoBitrate()}}):this.updateMediaSettingsFromProfile(e),this.log_.info("updateMediaSettings: "+(0,I.default)(this.mediaSettings_))}},{key:"updateMediaSettingsFromProfile",value:function(e){if(e){if(e.hasAudio()){var t=e.getAudioProfile();this.mediaSettings_.audioChannel=t.channelCount,this.mediaSettings_.audioBps=1e3*t.bitrate,this.mediaSettings_.audioFs=t.sampleRate}if(e.hasVideo()){var n=e.getVideoProfile();this.mediaSettings_.videoWidth=n.width,this.mediaSettings_.videoHeight=n.height,this.mediaSettings_.videoFps=n.frameRate,this.mediaSettings_.videoBps=1e3*n.bitrate}}}},{key:"sendMediaSettings",value:function(e){var t=this;this.updateMediaSettings(e),this.signalChannel_.sendWaitForResponse({command:"update_constraint_config",data:this.mediaSettings_,responseCommand:mR.UPDATE_CONSTRAINT_CONFIG_RES}).then(function(e){0!==e.data.code&&t.log_.warn(e.data.message)}).catch(this.log_.warn)}},{key:"addTrack",value:(k=a(n().mark(function e(t,r){var i,o;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.peerConnection_){e.next=2;break}return e.abrupt("return");case 2:if(o=r===this.localAuxStream_,this.log_.info("is adding ".concat(t.kind," track to current published local ").concat(o?bS:OS," stream")),null===(i=this.sei_)||void 0===i||i.handleEncodedStreams(),!Tt()){e.next=10;break}return e.next=8,this.addTrackByTransceiver(t,r);case 8:e.next=12;break;case 10:return e.next=12,this.addTrackBySender(t);case 12:wR(this.userId_,{eventId:t.kind===pS?32769:32768,eventDesc:"add ".concat(t.kind," track to current published stream"),timestamp:Db(),userId:this.userId_,tinyId:this.tinyId_});case 13:case"end":return e.stop()}},e,this)})),function(e,t){return k.apply(this,arguments)})},{key:"addTrackByTransceiver",value:(x=a(n().mark(function e(t,r){var i,o,a,s;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r===this.localAuxStream_,o=this.peerConnection_.getTransceivers(),t.kind!==pS){e.next=13;break}if(!o[0].sender.track){e.next=9;break}return this.mixAudioTrack(o[0].sender.track,t),e.next=7,o[0].sender.replaceTrack(this.mixedAudioTrack_);case 7:e.next=11;break;case 9:return e.next=11,o[0].sender.replaceTrack(t);case 11:e.next=26;break;case 13:return a=i?3:1,e.next=16,o[a].sender.replaceTrack(t);case 16:if(1!==a||!this.client_.getIsEnableSmallStream()){e.next=23;break}return this.smallGenerator_=new Dj(this.localStream_),e.next=20,this.smallGenerator_.initialize();case 20:return s=this.smallGenerator_.generateSmallVideoTrack(this.client_.smallStreamConfig_),e.next=23,o[2].sender.replaceTrack(s);case 23:if(o[a].direction!==DS){e.next=26;break}return e.next=26,this.setTransceiverDirection(FS,[a]);case 26:return this.updateMediaSettings(r,i),e.next=29,this.doPublishChange();case 29:case"end":return e.stop()}},e,this)})),function(e,t){return x.apply(this,arguments)})},{key:"addTrackBySender",value:(w=a(n().mark(function e(t){var r,i,o,a,s;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Tt()&&this.peerConnection_.getTransceivers().findIndex(function(e){return"stopped"===e.direction})>=0)){e.next=4;break}return this.log_.warn("transceiver is stopping, negotiate sdp first"),e.next=4,this.updateOffer(DC.REMOVE,t);case 4:if(!(r=this.peerConnection_.getSenders().find(function(e){return e.track&&e.track.kind===t.kind}))){e.next=11;break}return this.log_.warn("sender already exists, remove sender first"),i=r.track,this.removeSender(r),e.next=11,this.updateOffer(DC.REMOVE,i);case 11:if(o=this.localStream_.getMediaStream(),this.peerConnection_.addTrack(t,o),t.kind!==hS||!this.client_.getIsEnableSmallStream()){e.next=21;break}return this.smallGenerator_=new Dj(this.localStream_),e.next=17,this.smallGenerator_.initialize();case 17:a=this.smallGenerator_.generateSmallVideoTrack(this.client_.smallStreamConfig_),(s=new MediaStream).addTrack(a),this.peerConnection_.addTrack(a,s);case 21:return e.next=23,this.updateOffer(DC.ADD,t);case 23:case"end":return e.stop()}},e,this)})),function(e){return w.apply(this,arguments)})},{key:"isNeedToResetOfferOrder",value:function(){if(this.sdpSemantics_===AC||!this.peerConnection_||!this.peerConnection_.localDescription)return!1;for(var e=this.peerConnection_.localDescription.sdp,t=GR(e),n=0;n<t.media.length;n++)if(0===t.media[n].mid&&t.media[n].type===hS)return!0;return!1}},{key:"removeSender",value:function(e){var t=null;Tt()&&(t=this.peerConnection_.getTransceivers().find(function(t){return t.sender&&t.sender.track===e.track})),this.peerConnection_.removeTrack(e),t&&kI(t.stop)&&(this.log_.info("stop transceiver"),t.stop())}},{key:"removeTrack",value:(y=a(n().mark(function e(t,r){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.peerConnection_){e.next=2;break}return e.abrupt("return");case 2:if(this.log_.info("is removing ".concat(t.kind," track from current published local ").concat(r===this.localAuxStream_?bS:OS," stream")),!Tt()){e.next=8;break}return e.next=6,this.removeTrackByTransceiver(t,r);case 6:e.next=10;break;case 8:return e.next=10,this.removeTrackBySender(t);case 10:wR(this.userId_,{eventId:t.kind===pS?32771:32770,eventDesc:"remove ".concat(t.kind," track from current published stream"),timestamp:Db(),userId:this.userId_,tinyId:this.tinyId_});case 11:case"end":return e.stop()}},e,this)})),function(e,t){return y.apply(this,arguments)})},{key:"removeTrackByTransceiver",value:(_=a(n().mark(function e(t,r){var i,o,a;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r===this.localAuxStream_,o=this.peerConnection_.getTransceivers(),t.kind!==pS){e.next=13;break}if(!this.mixedAudioTrack_){e.next=9;break}return e.next=6,o[0].sender.replaceTrack(i?this.localStream_.getAudioTrack():this.localAuxStream_.getAudioTrack());case 6:this.destroyMixedAudioTrack(),e.next=11;break;case 9:return e.next=11,o[0].sender.replaceTrack(null);case 11:e.next=23;break;case 13:return a=i?3:1,e.next=16,o[a].sender.replaceTrack(null);case 16:if(1!==a||!this.smallGenerator_){e.next=21;break}return this.smallGenerator_.destroy(),this.smallGenerator_=null,e.next=21,o[2].sender.replaceTrack(null);case 21:return e.next=23,this.setTransceiverDirection(DS,[a]);case 23:return this.updateMediaSettings(r,i),e.next=26,this.doPublishChange();case 26:case"end":return e.stop()}},e,this)})),function(e,t){return _.apply(this,arguments)})},{key:"setTransceiverDirection",value:(b=a(n().mark(function e(t,r){var i,o,a,s,l,c;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(fE){e.next=2;break}return e.abrupt("return");case 2:if(i=!1,o=!1,this.log_.info("setting transceiver ".concat(r.join(",")," direction to ").concat(t)),a=this.peerConnection_.getTransceivers(),r.forEach(function(e){a[e].direction!==t&&(a[e].direction=t,i=!0)}),!i){e.next=14;break}return this.log_.info("updating offer"),e.next=11,this.peerConnection_.createOffer();case 11:return s=e.sent,e.next=14,this.peerConnection_.setLocalDescription(s);case 14:if(l=-1,c=this.peerConnection_.remoteDescription.sdp.split("\r\n").map(function(e){if(e.match(new RegExp("a=(".concat(DS,"|").concat(qS,"|").concat(FS,")")))&&l++,r.includes(l)){if(t===DS&&e.includes("a=".concat(qS)))return o=!0,"a=".concat(t);if(t===FS&&e.includes("a=".concat(DS)))return o=!0,"a=".concat(qS)}return e}).join("\r\n"),!o){e.next=20;break}return this.log_.info("updating answer"),e.next=20,this.peerConnection_.setRemoteDescription({type:"answer",sdp:c});case 20:case"end":return e.stop()}},e,this)})),function(e,t){return b.apply(this,arguments)})},{key:"removeTrackBySender",value:(m=a(n().mark(function e(t){var r,i,o=this;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.kind!==hS||!this.isNeedToResetOfferOrder()){e.next=7;break}return this.reset(),this.initialize(),null===(r=this.localStream_.getMediaStream())||void 0===r||r.removeTrack(t),e.next=6,this.publish(this.localStream_);case 6:return e.abrupt("return");case 7:return(i=this.peerConnection_.getSenders().find(function(e){return e.track===t}))&&(this.removeSender(i),t.kind===hS&&this.smallGenerator_&&(this.smallGenerator_.destroy(),this.smallGenerator_=null,this.peerConnection_.getSenders().forEach(function(e){e.track&&e.track.kind===hS&&o.removeSender(e)}))),e.next=11,this.updateOffer(DC.REMOVE,t);case 11:case"end":return e.stop()}},e,this)})),function(e){return m.apply(this,arguments)})},{key:"replaceTrack",value:(h=a(n().mark(function e(t,r){var i,o,a,s,l,c,u;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((o=null===(i=this.peerConnection_)||void 0===i?void 0:i.getSenders())&&0!==o.length){e.next=3;break}throw new _R({code:bR.INVALID_OPERATION,message:st({key:$T})});case 3:if(a=r===this.localAuxStream_,this.log_.info("is replacing ".concat(t.kind," track to current published local ").concat(a?bS:OS," stream")),t.kind!==pS||!o[0]){e.next=16;break}if(!(this.mixedAudioTrack_&&null!==(s=this.localStream_)&&void 0!==s&&s.hasAudio()&&null!==(l=this.localAuxStream_)&&void 0!==l&&l.hasAudio())){e.next=14;break}return this.destroyMixedAudioTrack(),c=a?this.localStream_.getAudioTrack():this.localAuxStream_.getAudioTrack(),this.mixAudioTrack(t,c),e.next=12,o[0].replaceTrack(this.mixedAudioTrack_);case 12:e.next=16;break;case 14:return e.next=16,o[0].replaceTrack(t);case 16:if(t.kind!==hS){e.next=32;break}if(r!==this.localStream_||!o[1]){e.next=29;break}return e.next=20,o[1].replaceTrack(t);case 20:if(!this.smallGenerator_||!o[2]){e.next=29;break}return this.log_.info("replacing smallVideo"),this.smallGenerator_.destroy(),this.smallGenerator_=new Dj(this.localStream_),e.next=26,this.smallGenerator_.initialize();case 26:return u=this.smallGenerator_.generateSmallVideoTrack(this.client_.smallStreamConfig_),e.next=29,o[2].replaceTrack(u);case 29:if(r!==this.localAuxStream_||!o[3]){e.next=32;break}return e.next=32,o[3].replaceTrack(t);case 32:wR(this.userId_,{eventId:t.kind===pS?32783:32782,eventDesc:"replace ".concat(t.kind," track from current published stream"),timestamp:Db(),userId:this.userId_,tinyId:this.tinyId_});case 33:case"end":return e.stop()}},e,this)})),function(e,t){return h.apply(this,arguments)})},{key:"updateOffer",value:(p=a(n().mark(function e(t,r){var i,o,a,s,l,c,u;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.peerConnection_.createOffer(Gj);case 3:return i=e.sent,fE&&(i.sdp=this.setSDPDirection(i.sdp,"sendrecv")),e.next=7,this.peerConnection_.setLocalDescription(i);case 7:return o=this.updateMediaSettings(this.localStream_||this.localAuxStream_),a={action:t,trackId:r.id,kind:r.kind===hS?"bigVideo":r.kind,type:"offer",sdp:this.peerConnection_.localDescription.sdp,constraintConfig:o,state:this.publishState},this.log_.info("createOffer success, sending updated offer to remote server"),this.log_.debug("updatedOffer: "+a.sdp),e.next=13,this.signalChannel_.sendWaitForResponse({command:"publish_change",data:a,responseCommand:mR.UPDATE_OFFER_RESULT,timeout:1e4,commandDesc:"update offer"});case 13:return s=e.sent,l=s.data,c=l.code,u=l.message,0!==c&&this.checkPublishResultCode(c,u),e.next=18,this.acceptAnswer(s.data.data);case 18:this.updateSSRC(i.sdp),CR.logSuccessEvent({userId:this.client_.getUserId(),eventType:hC,kind:"offer"}),e.next=27;break;case 22:throw e.prev=22,e.t0=e.catch(0),this.log_.error(e.t0),CR.logFailedEvent({userId:this.client_.getUserId(),eventType:hC,kind:"offer",error:e.t0}),e.t0;case 27:case"end":return e.stop()}},e,this,[[0,22]])})),function(e,t){return p.apply(this,arguments)})},{key:"setBandwidth",value:(f=a(n().mark(function e(t){var r,i,o,a,s,l,c,u;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.bandwidth,i=t.type,o=t.videoType,a=void 0===o?"":o,s=t.sdp,At()||!s){e.next=3;break}return e.abrupt("return",i===hS?this.updateVideoBandwidthRestriction(s,r,a):this.updateAudioBandwidthRestriction(s,r));case 3:if(l=0,i===hS&&(l=a===mS?2:a===bS?3:1),!(c=this.peerConnection_.getSenders()[l])){e.next=22;break}return(u=c.getParameters()).encodings&&0!==u.encodings.length||(u.encodings=[{}]),"unlimited"===r?delete u.encodings[0].maxBitrate:u.encodings[0].maxBitrate=1e3*r,e.prev=10,e.next=13,c.setParameters(u);case 13:return this.log_.info(a+i+" bandwidth was set to "+r+" kbps"),e.abrupt("return",s);case 17:if(e.prev=17,e.t0=e.catch(10),this.log_.info("failed to set bandwidth by setting maxBitrate: "+e.t0),!s){e.next=22;break}return e.abrupt("return",i===hS?this.updateVideoBandwidthRestriction(s,r,a):this.updateAudioBandwidthRestriction(s,r));case 22:return e.abrupt("return",s);case 23:case"end":return e.stop()}},e,this,[[10,17]])})),function(e){return f.apply(this,arguments)})},{key:"updateVideoBandwidthRestriction",value:function(e,t,n){var r="AS";fE&&(r="TIAS",t*=1e3);var i=0,o=-1;return n===mS?i=1:n===bS&&(i=2),e=e.replace(/m=video (.*)\r\nc=IN (.*)\r\n/g,function(e){return++o===i?"".concat(e,"b=").concat(r,":").concat(t,"\r\n"):e})}},{key:"updateAudioBandwidthRestriction",value:function(e,t){var n="AS";return fE&&(n="TIAS",t*=1e3),e=e.replace(/m=audio (.*)\r\nc=IN (.*)\r\n/,"m=audio $1\r\nc=IN $2\r\nb="+n+":"+t+"\r\n")}},{key:"removeBandwidthRestriction",value:function(e){return e.replace(/b=AS:.*\r\n/,"").replace(/b=TIAS:.*\r\n/,"")}},{key:"removeVideoOrientation",value:function(e){return e.replace(/urn:3gpp:video-orientation/,"")}},{key:"connect",value:(u=a(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.exchangeSDP();case 3:return e.next=5,this.waitForPeerConnectionConnected();case 5:e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(0),this.closePeerConnection(!0),e.t0;case 11:case"end":return e.stop()}},e,this,[[0,7]])})),function(){return u.apply(this,arguments)})},{key:"exchangeSDP",value:(c=a(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.isSDPExchanging_=!0,e.next=4,this.createOffer();case 4:return this.log_.info("createOffer success, sending offer to remote server"),e.next=7,this.doExchangeSDP();case 7:this.isSDPExchanging_=!1,e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(0),this.isSDPExchanging_=!1,e.t0;case 14:case"end":return e.stop()}},e,this,[[0,10]])})),function(){return c.apply(this,arguments)})},{key:"createOffer",value:(l=a(n().mark(function e(){var t;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.peerConnection_.createOffer(Gj);case 3:return t=e.sent,e.next=6,this.peerConnection_.setLocalDescription(t);case 6:this.updateSSRC(t.sdp),CR.logSuccessEvent({userId:this.client_.getUserId(),eventType:hC,kind:"offer"}),e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(0),CR.logFailedEvent({userId:this.client_.getUserId(),eventType:hC,kind:"offer",error:e.t0}),e.t0;case 14:case"end":return e.stop()}},e,this,[[0,10]])})),function(){return l.apply(this,arguments)})},{key:"doExchangeSDP",value:function(){var e=this;return new W.default(function(t,r){e.exchangeSDPTimeout_=setTimeout(function(){e.signalChannel_.off(mR.PUBLISH_RESULT,i),e.clearExchangeSDPTimeout();var t=new _R({code:bR.API_CALL_TIMEOUT,message:st({key:"EXCHANGE_SDP_TIMEOUT"})});r(t)},1e4);var i=function(){var i=a(n().mark(function i(o){var a,s,l;return n().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,e.clearExchangeSDPTimeout(),a=o.data,s=a.code,l=a.message,0!==s){n.next=9;break}return n.next=6,e.acceptAnswer(o.data.data);case 6:t(),n.next=10;break;case 9:e.checkPublishResultCode(s,l);case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),r(n.t0);case 15:case"end":return n.stop()}},i,null,[[0,12]])}));return function(e){return i.apply(this,arguments)}}(),o={type:e.peerConnection_.localDescription.type,sdp:e.removeVideoOrientation(e.peerConnection_.localDescription.sdp),screen:(e.publishingStream_||e.localStream_).hasScreenTrack(),state:e.publishState,constraintConfig:e.mediaSettings_};e.signalChannel_.once(mR.PUBLISH_RESULT,i),e.log_.debug("sending sdp offer: "+o.sdp),e.signalChannel_.send("publish",o)})}},{key:"setSDPDirection",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"all",r=GR(e);return r.media.forEach(function(e){"all"!==n&&e.type!==n||(e.direction=t)}),WR(r)}},{key:"acceptAnswer",value:(o=a(n().mark(function e(t){var r,i,o,a,s,l,c;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=this.removeVideoOrientation(t.sdp),!(i=this.publishingStream_||this.localStream_)){e.next=15;break}if(o=i.getVideoBitrate(),a=i.getAudioBitrate(),!o){e.next=11;break}return s=this.isPublishingAuxStream_?bS:vS,e.next=10,this.setBandwidth({bandwidth:o,type:hS,sdp:r,videoType:s});case 10:r=e.sent;case 11:if(!a){e.next=15;break}return e.next=14,this.setBandwidth({bandwidth:a,type:pS,sdp:r});case 14:r=e.sent;case 15:if(!this.client_.getIsEnableSmallStream()){e.next=20;break}return l=this.client_.smallStreamConfig,e.next=19,this.setBandwidth({bandwidth:l.bitrate,type:hS,videoType:mS,sdp:r});case 19:r=e.sent;case 20:return c={type:t.type,sdp:r},e.next=23,this.peerConnection_.setRemoteDescription(c);case 23:this.log_.debug("accepted answer: "+r),CR.logSuccessEvent({userId:this.client_.getUserId(),eventType:gC,kind:"answer"}),e.next=32;break;case 27:throw e.prev=27,e.t0=e.catch(0),CR.logFailedEvent({userId:this.client_.getUserId(),eventType:gC,kind:"answer",error:e.t0}),this.log_.error("failed to accept remote answer "+e.t0),e.t0;case 32:case"end":return e.stop()}},e,this,[[0,27]])})),function(e){return o.apply(this,arguments)})},{key:"sendMutedFlag",value:function(e,t){if(t!==this.localAuxStream_){var n={audio:e.audio,bigVideo:e.video,auxVideo:e.auxVideo};this.log_.info("send muted state: ".concat((0,I.default)(n))),this.signalChannel_.send("mute_uplink",n)}}},{key:"getIsReconnecting",value:function(){return this.isReconnecting_}},{key:"reconnect",value:(i=a(n().mark(function e(){var t,r,i=this;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(-1===this.reconnectionTimer_){e.next=3;break}return this.log_.warn("reconnect() uplink is reconnecting, ignore current reconnection"),e.abrupt("return");case 3:if(!(this.reconnectionCount_>=30)){e.next=12;break}return this.log_.warn("SDK has tried reconnect uplink for ".concat(30," times, but all failed, please check your network")),this.stopReconnection(),t=new _R({code:bR.UPLINK_RECONNECTION_FAILED,message:st({key:"UPLINK_RECONNECTION_FAILED"})}),CR.logFailedEvent({userId:this.client_.getUserId(),eventType:dC,error:t}),this.addEventInternal(32799,"uplink-connection reconnect fail"),this.emitConnectionStateChangedEvent(QS),this.emitter_.emit(LO.ERROR,t),e.abrupt("return");case 12:if(this.signalChannel_.getCurrentState()===pR){e.next=16;break}return this.log_.warn("reconnect() signal channel is not connected, suspend reconnection until signal is connected"),this.signalChannel_.once(3,this.reconnect,this),e.abrupt("return");case 16:if(this.reconnectionCount_++,e.prev=17,this.log_.warn("reconnect() try to reconnect uplink [".concat(this.reconnectionCount_,"/").concat(30,"]")),r=ut(this.reconnectionCount_),this.reconnectionTimer_=setTimeout(function(){i.log_.warn("reconnect() uplink reconnect timeout(".concat(r/1e3,"s), try again")),i.clearReconnectionTimer(),i.reconnect()},r),!(this.isSDPExchanging_||this.peerConnection_&&this.peerConnection_.connectionState===rC)){e.next=23;break}return e.abrupt("return");case 23:return e.next=25,this.signalChannel_.sendWaitForResponse({command:vR,responseCommand:mR.UNPUBLISH_RESULT,enableLog:!1});case 25:if(this.reset(),this.initialize(),!this.localStream_){e.next=30;break}return e.next=30,this.publish(this.localStream_);case 30:if(!this.localAuxStream_){e.next=33;break}return e.next=33,this.publish(this.localAuxStream_,!0);case 33:CR.logSuccessEvent({userId:this.client_.getUserId(),eventType:dC}),this.log_.warn("reconnect() uplink reconnect successfully"),this.addEventInternal(32798,"uplink-connection reconnect success"),this.stopReconnection(),this.localStream_.syncMuteState(),e.next=42;break;case 40:e.prev=40,e.t0=e.catch(17);case 42:case"end":return e.stop()}},e,this,[[17,40]])})),function(){return i.apply(this,arguments)})},{key:"clearExchangeSDPTimeout",value:function(){-1!==this.exchangeSDPTimeout_&&(clearTimeout(this.exchangeSDPTimeout_),this.exchangeSDPTimeout_=-1)}},{key:"clearReconnectionTimer",value:function(){-1!==this.reconnectionTimer_&&(clearTimeout(this.reconnectionTimer_),this.reconnectionTimer_=-1)}},{key:"handleError",value:function(e){e.getCode()===bR.ICE_TRANSPORT_ERROR&&(this.isFirstConnection_&&(this.isFirstConnection_=!1,CR.logFailedEvent({userId:this.client_.getUserId(),eventType:uC,error:e})),this.isReconnecting_||this.startReconnection())}},{key:"handleConnectionStateChange",value:function(e){e.state===nC&&this.isFirstConnection_&&(this.isFirstConnection_=!1,CR.logSuccessEvent({userId:this.client_.getUserId(),eventType:uC}),this.addEventInternal(32792,"uplink-connection is connected"))}},{key:"updateSSRC",value:function(e){var t=this;try{GR(e).media.forEach(function(e,n){if(e.type===pS){var r=e.ssrcs[0];r&&(t.ssrc_.audio=r.id)}else{if(t.sdpSemantics_===AC)return void e.ssrcGroups.forEach(function(e,n){var r=Number(e.ssrcs.split(" ")[0]);0===n?t.ssrc_.video=r:1===n&&(t.ssrc_.small=r)});var i=e.ssrcs[0];if(!i)return;switch(n){case 1:t.ssrc_.video=i.id;break;case 2:t.ssrc_.small=i.id;break;case 3:t.ssrc_.auxiliary=i.id}}})}catch(e){}}},{key:"getVideoTrackId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hS;if(this.peerConnection_){var t=this.peerConnection_.getSenders();if(e===hS&&t[1]&&t[1].track)return t[1].track.id;if(e===mS&&t[2]&&t[2].track)return t[2].track.id;if(e===bS&&t[3]&&t[3].track)return t[3].track.id}if(this.localStream_&&e===hS){var n=this.localStream_.getVideoTrack();if(n)return n.id}if(this.localAuxStream_&&e===bS){var r=this.localAuxStream_.getVideoTrack();if(r)return r.id}return""}},{key:"getSSRC",value:function(){return this.ssrc_}},{key:"checkPublishResultCode",value:function(e,t){if(0!==e)throw 1028===e?(this.log_.error(WT.NOT_SUPPORTED_H264ENCODE),new _R({code:bR.NOT_SUPPORTED_H264,message:st({key:jT})})):new _R({code:bR.UNKNOWN,message:st({key:YT,data:{signalResponse:mR.PUBLISH_RESULT,code:e,message:t}})})}},{key:"getLocalStream",value:function(){return this.localStream_}},{key:"sendSEI",value:function(e,t){this.sei_.push(e,t)}},{key:"mixAudioTrack",value:function(e,t){this.log_.info("mix audio track"),this.mixedAudioTrack_=function(e){var t=PI(),n=t.createMediaStreamDestination(),r=[];e.forEach(function(e){var i=new MediaStream;i.addTrack(e);var o=t.createMediaStreamSource(i);o.connect(n),r.push(o)});var i=n.stream.getAudioTracks()[0];return Fj.set(i,{destination:n,track:i,mediaStreamSourceList:r}),i}([e,t])}},{key:"destroyMixedAudioTrack",value:function(){this.mixedAudioTrack_&&(this.log_.info("destroy audio track"),function(e){if(Fj.has(e)){var t=Fj.get(e),n=t.destination,r=t.track,i=t.mediaStreamSourceList;r.stop(),n.disconnect(),i.forEach(function(e){e.disconnect()}),Fj.delete(e)}}(this.mixedAudioTrack_),this.mixedAudioTrack_=null)}}]),r}(XB),Y(Rj.prototype,"publish",[Aj],(0,ue.default)(Rj.prototype,"publish"),Rj.prototype),Rj),Kj=Hn,Xj=Nd,Zj=Nc.exports.getWeakData,Jj=cd,Qj=Ji,eV=Xn,tV=cr,nV=ad,rV=ii,iV=zo.set,oV=zo.getterFor,aV=Mp.find,sV=Mp.findIndex,lV=Kj([].splice),cV=0,uV=function(e){return e.frozen||(e.frozen=new dV)},dV=function(){this.entries=[]},fV=function(e,t){return aV(e.entries,function(e){return e[0]===t})};dV.prototype={get:function(e){var t=fV(this,e);if(t)return t[1]},has:function(e){return!!fV(this,e)},set:function(e,t){var n=fV(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=sV(this.entries,function(t){return t[0]===e});return~t&&lV(this.entries,t,1),!!~t}};var pV,hV={getConstructor:function(e,t,n,r){var i=e(function(e,i){Jj(e,o),iV(e,{type:t,id:cV++,frozen:void 0}),eV(i)||nV(i,e[r],{that:e,AS_ENTRIES:n})}),o=i.prototype,a=oV(t),s=function(e,t,n){var r=a(e),i=Zj(Qj(t),!0);return!0===i?uV(r).set(t,n):i[r.id]=n,e};return Xj(o,{delete:function(e){var t=a(this);if(!tV(e))return!1;var n=Zj(e);return!0===n?uV(t).delete(e):n&&rV(n,t.id)&&delete n[t.id]},has:function(e){var t=a(this);if(!tV(e))return!1;var n=Zj(e);return!0===n?uV(t).has(e):n&&rV(n,t.id)}}),Xj(o,n?{get:function(e){var t=a(this);if(tV(e)){var n=Zj(e);return!0===n?uV(t).get(e):n?n[t.id]:void 0}},set:function(e,t){return s(this,e,t)}}:{add:function(e){return s(this,e,!0)}}),i}},gV=bn,mV=Hn,vV=Nd,bV=Nc.exports,_V=Md,yV=hV,wV=cr,xV=ou,kV=zo.enforce,SV=Eo,CV=!gV.ActiveXObject&&"ActiveXObject"in gV,TV=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},EV=_V("WeakMap",TV,yV);if(SV&&CV){pV=yV.getConstructor(TV,"WeakMap",!0),bV.enable();var IV=EV.prototype,AV=mV(IV.delete),RV=mV(IV.has),OV=mV(IV.get),LV=mV(IV.set);vV(IV,{delete:function(e){if(wV(e)&&!xV(e)){var t=kV(this);return t.frozen||(t.frozen=new pV),AV(this,e)||t.frozen.delete(e)}return AV(this,e)},has:function(e){if(wV(e)&&!xV(e)){var t=kV(this);return t.frozen||(t.frozen=new pV),RV(this,e)||t.frozen.has(e)}return RV(this,e)},get:function(e){if(wV(e)&&!xV(e)){var t=kV(this);return t.frozen||(t.frozen=new pV),RV(this,e)?OV(this,e):t.frozen.get(e)}return OV(this,e)},set:function(e,t){if(wV(e)&&!xV(e)){var n=kV(this);n.frozen||(n.frozen=new pV),RV(this,e)?LV(this,e,t):n.frozen.set(e,t)}else LV(this,e,t);return this}})}var PV=ds,MV=bx,$V=yn,NV=pr,DV=ar,FV=hw,qV=aS,UV=ca,BV=MV&&MV.prototype;if(PV({target:"Promise",proto:!0,real:!0,forced:!!MV&&$V(function(){BV.finally.call({then:function(){}},function(){})})},{finally:function(e){var t=FV(this,NV("Promise")),n=DV(e);return this.then(n?function(n){return qV(t,e()).then(function(){return n})}:e,n?function(n){return qV(t,e()).then(function(){throw n})}:e)}}),DV(MV)){var jV=NV("Promise").prototype.finally;BV.finally!==jV&&UV(BV,"finally",jV,{unsafe:!0})}var VV,HV,YV,zV,GV,WV=new l.default,KV=(VV=ln(),HV=tn({retries:1,timeout:0,onRetrying:function(e){this.log_.warn("connection timeout, retrying [".concat(e,"]"))},onError:function(e,t,n){e.message.includes("timeout")?t():n(e)}}),YV=ln(),zV=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4;return function(t,n,r){var i=r.value;return r.value=function(){for(var t=this,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return new W.default(function(r,a){var s=setTimeout(function(){return a(new Error("".concat(n," timeout")))},e);i.apply(t,o).then(r,a).finally(function(){clearTimeout(s)})})},r}}(),GV=function(e){function r(e){var t;return s(this,r),(t=m.call(this,e)).remoteStreams_=new j.default,t.autoSubscribe=e.autoSubscribe,t.trackState_={audio:e.trackState.audio,video:e.trackState.video,auxiliary:e.trackState.auxiliary,smallVideo:e.trackState.smallVideo},t.ssrc_={audio:0,video:0,auxiliary:0},t.subscribeState_={audio:e.autoSubscribe,video:e.autoSubscribe,auxiliary:e.autoSubscribe,smallVideo:!1},t.isSDPExchanging_=!1,t.installEvents(),t}g(r,e);var o,l,c,u,f,p,h,m=A(r);return d(r,[{key:"getMixUserList",value:function(){return this.mixUserList_?this.mixUserList_.map(function(e){var t=e.userId,n=e.flag;return{userId:t,hasAudio:!!(8&n),hasVideo:!!(1&n),hasAuxiliary:!!(4&n)}}):void 0}},{key:"setMixUserList",value:function(e){(!this.mixUserList_||AI(this.mixUserList_)&&!function(e,t){if(t.length===e.length){var n,r=V(t);try{for(r.s();!(n=r.n()).done;){var o=function(){var t=n.value,r=e.find(function(e){return e.userId===t.userId});if(!r||r.flag!==t.flag)return{v:!1}}();if("object"===i(o))return o.v}}catch(e){r.e(e)}finally{r.f()}return!0}return!1}(this.mixUserList_,e))&&(this.mixUserList_=e,this.emitter_.emit(LO.STREAM_UPDATED,{stream:this.getMainStream()}))}},{key:"isMainStreamSubscribed",get:function(){return(this.subscribeState_.audio||this.subscribeState_.video||this.subscribeState_.smallVideo)&&(this.trackState_.audio||this.trackState_.video||this.trackState_.smallVideo)}},{key:"isAuxStreamSubscribed",get:function(){return this.subscribeState_.auxiliary&&this.trackState_.auxiliary}},{key:"isSmallStreamSubscribed",get:function(){return this.subscribeState_.smallVideo&&this.trackState_.smallVideo}},{key:"isBigStreamSubscribed",get:function(){return this.subscribeState_.video&&this.trackState_.video}},{key:"isStreamUnpublished",value:function(e){return e.getType()===OS?!this.trackState_.audio&&!this.trackState_.video:!this.trackState_.auxiliary}},{key:"initialize",value:function(){P(v(r.prototype),"initialize",this).call(this),this.peerConnection_.ontrack=this.onTrack.bind(this)}},{key:"close",value:function(){var e,t,n,i=this;P(v(r.prototype),"close",this).call(this),this.trackState_.audio=!1,this.trackState_.video=!1,this.trackState_.smallVideo=!1,this.trackState_.auxiliary=!1,this.emitConnectionStateChangedEvent(QS),e=this,t=function(e){e.fn;var t=e.args,n=e.resolve,r=e.reject,o=e.name;if("subscribe"===o){if(!i.client_.getIsJoined())return r(new _R({code:bR.API_CALL_ABORTED,message:st({key:GT,data:{message:"leave room",stream:t[0]}})}));if(i.isStreamUnpublished(t[0]))return r(new _R({code:bR.API_CALL_ABORTED,message:st({key:GT,data:{message:"remote user ".concat(i.userId_," unpublished stream"),stream:t[0]}})}))}else if("unsubscribe"===o)return n();n()},null===(n=WV.get(e))||void 0===n||n.forEach(t),WV.delete(e),this.remoteStreams_.forEach(function(e){var t=e;t.setConnection(null),t.uninstallEvents(),t.getIsStreamAddedEventEmitted()&&i.emitter_.emit(LO.STREAM_REMOVED,{stream:t})}),this.remoteStreams_.clear(),this.uninstallEvents()}},{key:"installEvents",value:function(){var e=this;BI.on(XI,this.onRemoteStreamUpdate,this),this.emitter_.on(LO.ERROR,function(t){t.getCode()===bR.ICE_TRANSPORT_ERROR&&(e.isFirstConnection_&&(e.isFirstConnection_=!1,CR.logFailedEvent({userId:e.client_.getUserId(),eventType:fC,error:t})),e.isReconnecting_||e.startReconnection())}),this.emitter_.on(LO.CONNECTION_STATE_CHANGED,function(t){t.state===nC&&e.isFirstConnection_&&(e.isFirstConnection_=!1,CR.logSuccessEvent({userId:e.client_.getUserId(),eventType:fC}),e.addEventInternal(32793,"downlink-connection is connected"))})}},{key:"uninstallEvents",value:function(){BI.removeListener(XI,this.onRemoteStreamUpdate,this)}},{key:"onRemoteStreamUpdate",value:function(e){if(this.hitTest(e.tinyId)&&e.client===this.client_){this.updateTrackState(e.action,e.kind);var t=e.kind===bS?KS:WS,n=this.remoteStreams_.get(t);if(!n)return;e.action===DC.ADD?this.handleRemoteAddTrack(e.kind,n):this.handleRemoteRemoveTrack(e.kind,n)}}},{key:"handleRemoteAddTrack",value:function(e,t){this.log_.info("remote add ".concat(e," track")),e===pS?t.updateAudioPlayingState(this.subscribeState_.audio):t.updateVideoPlayingState(e===bS?this.subscribeState_.auxiliary:this.subscribeState_.video||this.subscribeState_.smallVideo),t.getIsStreamAddedEventEmitted()?this.emitter_.emit(LO.STREAM_UPDATED,{stream:t}):(this.emitter_.emit(LO.STREAM_ADDED,{stream:t}),this.currentState_===nC&&t.emitConnectionStateChanged({prevState:QS,state:nC}))}},{key:"handleRemoteRemoveTrack",value:function(e,t){t.getIsStreamAddedEventEmitted()&&(this.log_.info("remote remove ".concat(e," track")),e===bS||!this.trackState_.audio&&!this.trackState_.video?(this.log_.info("remote stream ".concat(t.getType()," removed")),this.currentState_===nC&&t.emitConnectionStateChanged({prevState:nC,state:QS}),this.emitter_.emit(LO.STREAM_REMOVED,{stream:t})):(e===pS?t.updateAudioPlayingState(!1):(e!==yS||this.isSmallStreamSubscribed)&&t.updateVideoPlayingState(!1),this.emitter_.emit(LO.STREAM_UPDATED,{stream:t})))}},{key:"updateTrackState",value:function(e,t){var n=e===DC.ADD;switch(t){case pS:this.trackState_.audio=n;break;case hS:this.trackState_.video=n;break;case bS:this.trackState_.auxiliary=n;break;case yS:this.trackState_.smallVideo=n}this.log_.info("trackState updated: ".concat((0,I.default)(this.trackState_)))}},{key:"onTrack",value:function(e){var t=e.streams[0],n=e.track;if(this.log_.info("ontrack() kind: ".concat(n.kind," id: ").concat(n.id," streamId: ").concat(t.id)),this.sdpSemantics_===IC){var r=function(e){var t=OR.parse(e),n={audio:[],video:[]};return t.media.forEach(function(e){if(e.ssrcs){var t=e.ssrcs[0].id>>16&255;if(e.type===pS)n.audio.push(WS);else if(e.type==hS){var r=2===t?WS:KS;n.video.push(r)}}}),n}(this.peerConnection_.remoteDescription.sdp);if(n.kind===pS){if(0===r.audio.length||t.id!==WS)return void this.log_.debug("skip this invalid audio track")}else if(-1===r.video.indexOf(t.id))return void this.log_.debug("skip this invalid video track: ".concat(n.id,"  msid: ").concat(t.id))}CR.logEvent({eventType:"ontrack",kind:n.kind});var i=!1,o=this.remoteStreams_.get(t.id),a=t.id===WS?XS:ZS;if(SI(o)&&((o=new Lj({type:a,userId:this.userId_,client:this.client_})).setConnection(this),this.remoteStreams_.set(t.id,o),i=!0),o.setMediaStream(t),n.kind===pS?o.updateAudioPlayingState(this.subscribeState_.audio):a===XS?o.updateVideoPlayingState(this.subscribeState_.video||this.subscribeState_.smallVideo):o.updateVideoPlayingState(this.subscribeState_.auxiliary),(a!==ZS||this.trackState_.auxiliary)&&(a!==XS||this.trackState_.audio||this.trackState_.video)){var s=this.client_.getSubscriptionManager();s&&s.hasAutoRecoveryFlag(this.userId_,a)||(i?this.emitter_.emit(LO.STREAM_ADDED,{stream:o}):this.emitter_.emit(LO.STREAM_UPDATED,{stream:o}))}}},{key:"addRRTRLine",value:function(e){var t=e.split("\r\n"),n=new j.default;t.forEach(function(e,r){/^a=rtcp-fb:/.test(e)&&t[r+1]&&!/^a=rtcp-fb:/.test(t[r+1])&&e.match(/^a=rtcp-fb:\d+/)&&n.set(r+1,e.match(/^a=rtcp-fb:\d+/)[0]+" rrtr")});for(var r=D(n),i=0;i<r.length;i++){var o=$(r[i],2),a=o[0],s=o[1];t.splice(a+i,0,s)}return t.join("\r\n")}},{key:"addSPSDescription",value:function(e){var t=GR(e);return t.media.forEach(function(e){e.type===hS&&e.fmtp.forEach(function(e){e.config+=";sps-pps-idr-in-keyframe=1"})}),WR(t)}},{key:"removeSDESDescription",value:function(e){var t=["urn:ietf:params:rtp-hdrext:sdes:mid","urn:ietf:params:rtp-hdrext:sdes:rtp-stream-id","urn:ietf:params:rtp-hdrext:sdes:repaired-rtp-stream-id"],n=GR(e);return n.media.forEach(function(e){e.ext=e.ext.filter(function(e){return!t.includes(e.uri)})}),WR(n)}},{key:"isSubscriptionStateNotChanged",value:function(e,t){return e.getType()===XS?(null==t?void 0:t.audio)===this.subscribeState_.audio&&(null==t?void 0:t.video)===this.subscribeState_.video&&this.isSubscribeSmall(t):e.getType()===ZS?!SI(t.video)&&this.subscribeState_.auxiliary===t.video:void 0}},{key:"isSubscribeSmall",value:function(e){return SI(e.smallVideo)&&!this.subscribeState_.smallVideo}},{key:"subscribe",value:(h=a(n().mark(function e(t,r){var i,o,a,s,l,c;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=r.emitEvent,s=void 0===a||a,l=t.getType(),"new"!==(null===(i=this.peerConnection_)||void 0===i?void 0:i.connectionState)&&(null===(o=this.peerConnection_)||void 0===o?void 0:o.connectionState)!==rC){e.next=6;break}return e.next=6,this.waitForPeerConnectionConnected();case 6:if(!this.isSubscriptionStateNotChanged(t,r)){e.next=13;break}if(this.peerConnection_){e.next=11;break}return this.initialize(),e.next=11,this.connect();case 11:return s&&SI(r.smallVideo)&&this.emitter_.emit(LO.STREAM_SUBSCRIBED,{stream:t,result:!0}),e.abrupt("return",t);case 13:if(l===OS?(SI(r.audio)||(this.subscribeState_.audio=r.audio),SI(r.video)||(this.subscribeState_.video=r.video),this.subscribeState_.smallVideo=(null==r?void 0:r.smallVideo)||!1,this.addEventInternal(this.subscribeState_.audio?32777:32779,this.subscribeState_.audio?"subscribe audio":"unsubscribe audio"),this.addEventInternal(this.subscribeState_.video?32777:32779,this.subscribeState_.video?"subscribe video":"unsubscribe video"),this.addEventInternal(this.subscribeState_.smallVideo?32803:32804,this.subscribeState_.smallVideo?"subscribe smallVideo":"unsubscribe smallVideo")):SI(r.video)||(this.subscribeState_.auxiliary=r.video),this.log_.info("subscribe ".concat(l," stream with options ").concat((0,I.default)(r)," current state: ").concat((0,I.default)(this.subscribeState_))),!this.peerConnection_&&!this.isSDPExchanging_){e.next=23;break}return c=EC,this.isMainStreamSubscribed||this.isAuxStreamSubscribed||(c=TC),e.next=20,this.sendSubscription(c);case 20:l===OS?(t.updateAudioPlayingState(this.subscribeState_.audio),t.updateVideoPlayingState(this.subscribeState_.video||this.subscribeState_.smallVideo)):t.updateVideoPlayingState(this.subscribeState_.auxiliary),e.next=26;break;case 23:return this.initialize(),e.next=26,this.connect();case 26:return s&&this.emitter_.emit(LO.STREAM_SUBSCRIBED,{stream:t,result:!0}),e.abrupt("return",t);case 30:if(e.prev=30,e.t0=e.catch(0),!this.client_.getIsJoined()||!this.isStreamUnpublished(t)){e.next=35;break}throw this.log_.warn("".concat(e.t0.message," ").concat((0,I.default)(this.trackState_))),new _R({code:bR.REMOTE_STREAM_NOT_EXIST,message:"remote user ".concat(this.userId_," unpublished stream")});case 35:throw e.t0;case 36:case"end":return e.stop()}},e,this,[[0,30]])})),function(e,t){return h.apply(this,arguments)})},{key:"unsubscribe",value:(p=a(n().mark(function e(t){var r,i,o;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=t.getType())!==OS){e.next=10;break}if(this.isMainStreamSubscribed){e.next=5;break}return this.log_.info("main stream already unsubscribed"),e.abrupt("return",t);case 5:this.subscribeState_.audio=!1,this.subscribeState_.video=!1,this.subscribeState_.smallVideo=!1,e.next=14;break;case 10:if(this.isAuxStreamSubscribed){e.next=13;break}return this.log_.info("auxiliary stream already unsubscribed"),e.abrupt("return",t);case 13:this.subscribeState_.auxiliary=!1;case 14:return i=TC,(r===XS&&this.isAuxStreamSubscribed||r===ZS&&this.isMainStreamSubscribed)&&(i=EC),this.log_.info("unsubscribe ".concat(r," stream with ").concat((0,I.default)(this.subscribeState_))),e.next=19,this.sendSubscription(i);case 19:return t.updateVideoPlayingState(!1),t.updateAudioPlayingState(!1),i===TC&&((o=t.getMediaStream())&&o.getTracks().forEach(function(e){return o.removeTrack(e)}),this.closePeerConnection(),this.emitConnectionStateChangedEvent(QS)),this.addEventInternal(32779,"unsubscribe audio"),this.addEventInternal(32778,"unsubscribe video"),e.abrupt("return",t);case 25:case"end":return e.stop()}},e,this)})),function(e){return p.apply(this,arguments)})},{key:"sendSubscription",value:function(e){var t=this,n={srcTinyId:this.tinyId_,srcUserId:this.userId_},r="unsubscribe",i=mR.UNSUBSCRIBE_RESULT;return e===EC&&(n={audio:this.subscribeState_.audio,bigVideo:this.subscribeState_.video,auxVideo:this.subscribeState_.auxiliary,smallVideo:this.subscribeState_.smallVideo,srcTinyId:this.tinyId_},r="subscribe_change",i=mR.SUBSCRIBE_CHANGE_RESULT),this.signalChannel_.sendWaitForResponse({command:r,data:n,responseCommand:i,timeout:1e4}).then(function(n){var r=n.data;if(0!==r.code){var i=new _R({code:r.code,message:st({key:"ERROR_MESSAGE",data:{type:e,message:r.message}})});throw t.log_.error(i),i}})}},{key:"connect",value:(f=a(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.exchangeSDP();case 3:return e.next=5,this.waitForPeerConnectionConnected();case 5:e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(0),this.closePeerConnection(!0),e.t0;case 11:case"end":return e.stop()}},e,this,[[0,7]])})),function(){return f.apply(this,arguments)})},{key:"exchangeSDP",value:(u=a(n().mark(function e(){var t,r,i,o,a,s;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.isSDPExchanging_=!0,e.next=4,this.createOffer();case 4:return this.log_.info("createOffer success, sending offer to remote server"),t=this.peerConnection_.localDescription,r=t.type,i=t.sdp,o={type:r,sdp:i,srcUserId:this.userId_,srcTinyId:this.tinyId_,audio:this.subscribeState_.audio,bigVideo:this.subscribeState_.video,auxVideo:this.subscribeState_.auxiliary,smallVideo:this.subscribeState_.smallVideo},BI.emit(201,{client:this.client_,connection:this,userId:this.userId_,tinyId:this.tinyId_,role:20,subscribeState:this.subscribeState_,trackState:this.trackState_}),e.next=10,this.signalChannel_.sendWaitForResponse({command:"subscribe",commandDesc:"exchange sdp",data:o,responseCommand:mR.SUBSCRIBE_RESULT,timeout:1e4});case 10:if(a=e.sent,this.peerConnection_){e.next=15;break}throw s=new _R({code:bR.INVALID_OPERATION,message:st({key:"CONNECTION_CLOSED"})}),this.log_.warn(s),s;case 15:return e.next=17,this.onSubscribeResult(a);case 17:this.isSDPExchanging_=!1,e.next=24;break;case 20:throw e.prev=20,e.t0=e.catch(0),this.isSDPExchanging_=!1,e.t0;case 24:case"end":return e.stop()}},e,this,[[0,20]])})),function(){return u.apply(this,arguments)})},{key:"createOffer",value:(c=a(n().mark(function e(){var t,r;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={voiceActivityDetection:!1},Et()&&this.sdpSemantics_===IC?(this.peerConnection_.addTransceiver(pS,{direction:"recvonly"}),this.peerConnection_.addTransceiver(hS,{direction:"recvonly"}),this.peerConnection_.addTransceiver(hS,{direction:"recvonly"})):(t.offerToReceiveAudio=!0,t.offerToReceiveVideo=!0),e.next=4,this.peerConnection_.createOffer(t);case 4:return r=e.sent,e.next=7,SO();case 7:return e.sent.isH264DecodeSupported||(this.log_.warn("remove h264 desc from sdp"),r.sdp=bt(r.sdp)),r.sdp=this.addRRTRLine(r.sdp),r.sdp=this.addSPSDescription(r.sdp),r.sdp=KR(r.sdp),this.sdpSemantics_===IC&&(r.sdp=this.removeSDESDescription(r.sdp)),e.next=16,this.peerConnection_.setLocalDescription(r);case 16:case"end":return e.stop()}},e,this)})),function(){return c.apply(this,arguments)})},{key:"onSubscribeResult",value:(l=a(n().mark(function e(r){var i,o,a,s,l,c,u,d=this;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r&&r.data||{},o=i.code,a=i.message,s=void 0===a?"":a,l=r&&r.data&&r.data.data||{},c=l.type,u=l.sdp,77393!==o){e.next=5;break}throw this.log_.error(WT.NOT_SUPPORTED_H264DECODE),new _R({code:bR.NOT_SUPPORTED_H264,message:st({key:VT})});case 5:if(e.prev=5,0===o){e.next=8;break}throw new _R({code:o,message:st({key:"EXCHANGE_SDP_FAILED",data:{errMsg:s}})});case 8:return this.log_.debug("accept remote answer: "+u),e.next=11,this.peerConnection_.setRemoteDescription({type:c,sdp:u});case 11:this.sei_&&(this.sei_.handleEncodedStreams(),this.sei_.onSEIMessage=function(e){d.emitter_.emit(LO.SEI_MESSAGE,t(t({},e),{},{userId:d.userId_}))}),this.updateSSRC(u),e.next=19;break;case 15:throw e.prev=15,e.t0=e.catch(5),this.log_.error(e.t0),e.t0;case 19:case"end":return e.stop()}},e,this,[[5,15]])})),function(e){return l.apply(this,arguments)})},{key:"updateSSRC",value:function(e){var t=this;try{GR(e).media.forEach(function(e){if(e.type===pS){var n=e.ssrcs.find(function(e){return e.value.includes(WS)});n&&(t.ssrc_.audio=n.id)}else{var r=e.ssrcs.find(function(e){return e.value.includes(WS)}),i=e.ssrcs.find(function(e){return e.value.includes(KS)});r&&(t.ssrc_.video=r.id),i&&(t.ssrc_.auxiliary=i.id)}})}catch(e){}}},{key:"setRemoteStream",value:function(e,t){this.remoteStreams_.set(e,t)}},{key:"getSubscribeState",value:function(){return this.subscribeState_}},{key:"getTrackState",value:function(){return this.trackState_}},{key:"getSSRC",value:function(){return this.ssrc_}},{key:"getMainStream",value:function(){return this.remoteStreams_.get(WS)}},{key:"getAuxStream",value:function(){return this.remoteStreams_.get(KS)}},{key:"getMainStreamVideoTrackId",value:function(){var e=this.getMainStream();if(e){var t=e.getVideoTrack();if(t)return t.id}return""}},{key:"getAuxStreamVideoTrackId",value:function(){var e=this.getAuxStream();if(e){var t=e.getVideoTrack();if(t)return t.id}return""}},{key:"reconnect",value:(o=a(n().mark(function e(){var t,r,i=this;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(-1===this.reconnectionTimer_){e.next=3;break}return this.log_.warn("reconnect() downlink is reconnecting, ignore current reconnection"),e.abrupt("return");case 3:if(!(this.reconnectionCount_>=30)){e.next=12;break}return this.log_.warn("SDK has tried reconnect downlink [".concat(this.userId_,"] for ").concat(30," times, but all failed, please check your network")),this.stopReconnection(),t=new _R({code:bR.DOWNLINK_RECONNECTION_FAILED,message:st({key:"DOWNLINK_RECONNECTION_FAILED"})}),CR.logFailedEvent({userId:this.client_.getUserId(),eventType:pC,error:t}),this.addEventInternal(32802,"downlink-connection reconnect fail"),this.emitConnectionStateChangedEvent(QS),this.emitter_.emit(LO.ERROR,t),e.abrupt("return");case 12:if(this.signalChannel_.getCurrentState()===pR){e.next=16;break}return this.log_.warn("reconnect() signal channel is not connected, suspend reconnection until signal is connected"),this.signalChannel_.once(3,this.reconnect,this),e.abrupt("return");case 16:if(this.reconnectionCount_++,this.log_.warn("reconnect() try to reconnect downlink [".concat(this.reconnectionCount_,"/").concat(30,"]")),r=ut(this.reconnectionCount_),this.reconnectionTimer_=setTimeout(function(){i.log_.warn("reconnect() downlink [".concat(i.userId_,"] reconnect timeout(").concat(r/1e3,"s), try again")),i.clearReconnectionTimer(),i.reconnect()},r),!(this.isSDPExchanging_||this.peerConnection_&&this.peerConnection_.connectionState===rC)){e.next=22;break}return e.abrupt("return");case 22:return e.prev=22,this.closePeerConnection(),this.initialize(),e.next=27,this.connect();case 27:this.stopReconnection(),this.log_.warn("reconnect() downlink reconnect successfully"),CR.logSuccessEvent({userId:this.client_.getUserId(),eventType:pC}),this.addEventInternal(32801,"downlink-connection reconnect success"),this.recoverSubscription(),e.next=36;break;case 34:e.prev=34,e.t0=e.catch(22);case 36:case"end":return e.stop()}},e,this,[[22,34]])})),function(){return o.apply(this,arguments)})},{key:"recoverSubscription",value:function(){var e=this,t=this.client_.getSubscriptionManager();t&&D(this.remoteStreams_.values()).forEach(function(n){t.hasAutoRecoveryFlag(e.userId_,n.getType())&&t.recover(n)})}},{key:"getIsReconnecting",value:function(){return this.isReconnecting_}},{key:"getSubscribedMainStream",value:function(){var e=null;return this.isMainStreamSubscribed&&(e=this.remoteStreams_.get(WS)),e}},{key:"clearReconnectionTimer",value:function(){-1!==this.reconnectionTimer_&&(clearTimeout(this.reconnectionTimer_),this.reconnectionTimer_=-1)}},{key:"startReconnection",value:function(){var e=this.client_.getSubscriptionManager();if(e){var t,n=V(this.remoteStreams_.values());try{for(n.s();!(t=n.n()).done;){var i=t.value,o=i.getType();(o===XS&&(this.trackState_.audio||this.trackState_.video)||o===ZS&&this.trackState_.auxiliary)&&e.setAutoRecoveryFlag(this.userId_,i.getType())}}catch(e){n.e(e)}finally{n.f()}}P(v(r.prototype),"startReconnection",this).call(this)}},{key:"getCurrentState",value:function(){return this.currentState_}},{key:"hasMainStream",value:function(){return this.trackState_.video||this.trackState_.audio||this.trackState_.smallVideo}},{key:"hasAuxStream",value:function(){return this.trackState_.auxiliary}}]),r}(XB),Y(GV.prototype,"subscribe",[VV,HV],(0,ue.default)(GV.prototype,"subscribe"),GV.prototype),Y(GV.prototype,"unsubscribe",[YV],(0,ue.default)(GV.prototype,"unsubscribe"),GV.prototype),Y(GV.prototype,"exchangeSDP",[zV],(0,ue.default)(GV.prototype,"exchangeSDP"),GV.prototype),GV),XV=function(){function e(){s(this,e),this.startTime=0,this.endTime=0,this.start()}return d(e,[{key:"start",value:function(){0===this.startTime&&(this.startTime=pt())}},{key:"stop",value:function(){0===this.endTime&&(this.endTime=pt())}},{key:"getDuration",value:function(){return 0===this.endTime?pt()-this.startTime:this.endTime-this.startTime}}]),e}(),ZV=function(){function e(t){s(this,e),this.client_=t.client,this.intervalId_=-1,this.statsCalculator_=t.stats,this.prevStats_=null,this.renderFreezeMap_=new j.default,this.remoteStreamMap_=new j.default,this.dataFreezeMap_=new j.default,this.monitorFreezeData_=new j.default}var t,r,i;return d(e,[{key:"installEvents",value:function(){BI.on(134,this.handlePlayVideoStart,this),BI.on(130,this.onVideoTrackMuted,this),BI.on(131,this.onVideoTrackUnmuted,this),BI.on(116,this.handleStreamStopped,this),BI.on(JI,this.handleStreamStopped,this),BI.on(102,this.handleVideoPlaying,this)}},{key:"uninstallEvents",value:function(){BI.off(134,this.handlePlayVideoStart,this),BI.off(130,this.onVideoTrackMuted,this),BI.off(131,this.onVideoTrackUnmuted,this),BI.off(116,this.handleStreamStopped,this),BI.off(JI,this.handleStreamStopped,this),BI.off(102,this.handleVideoPlaying,this)}},{key:"start",value:function(){var e=this;-1===this.intervalId_&&(this.installEvents(),this.intervalId_=gO.run(a(n().mark(function t(){return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.detectFPS();case 3:t.next=7;break;case 5:t.prev=5,t.t0=t.catch(0);case 7:case"end":return t.stop()}},t,null,[[0,5]])})),{delay:1e3}))}},{key:"stop",value:function(){-1!==this.intervalId_&&(this.uninstallEvents(),gO.clearTask(this.intervalId_),this.intervalId_=-1,this.renderFreezeMap_.clear(),this.dataFreezeMap_.clear(),this.remoteStreamMap_.clear())}},{key:"onVideoTrackMuted",value:function(e){var t=e.stream;if(t.getClient()===this.client_&&t.isRemote()){var n=t.userId_,r=t.type_,i="".concat(n,"_").concat(r),o=this.dataFreezeMap_.get(i),a=new XV;o?o.durationItemList.push(a):this.dataFreezeMap_.set(i,{userId:n,type:r,durationItemList:[a],isFreezing:function(){var e=this.durationItemList[this.durationItemList.length-1];return e&&0===e.endTime}})}}},{key:"onVideoTrackUnmuted",value:function(e){var t=e.stream;if(t.getClient()===this.client_&&t.isRemote()){var n=t.userId_,r=t.type_,i="".concat(n,"_").concat(r);this.stopDataFreeze({key:i,userId:n,type:r})}}},{key:"handleStreamStopped",value:function(e){var t=e.client,n=e.stream;if(t===this.client_){var r=n.getUserId(),i=n.getType(),o="".concat(r,"_").concat(i);this.stopDataFreeze({key:o,userId:r,type:i})}}},{key:"stopDataFreeze",value:function(e){var t=e.key,n=e.userId,r=e.type,i=this.dataFreezeMap_.get(t);if(i&&i.isFreezing()){var o=i.durationItemList[i.durationItemList.length-1];o.stop();var a=o.getDuration();a>500?(CR.logEvent({eventType:"videoFrozenCount",delta:a}),this.monitorFreezeData_.set(t,{userId:n,type:r,duration:a})):i.durationItemList.pop()}}},{key:"getTotalDuration",value:function(e){return e.reduce(function(e,t){var n=t.getDuration();return e+Math.min(n,5e3)},0)}},{key:"getStats",value:(i=a(n().mark(function e(){var t,r,i,o,a,s,l,c,u,d,f;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.client_.getConnections(),r={},i=V(t),e.prev=3,i.s();case 5:if((o=i.n()).done){e.next=20;break}if(a=$(o.value,2),s=a[0],(l=a[1]).getPeerConnection()){e.next=9;break}return e.abrupt("continue",18);case 9:return c=l.getSubscribeState(),u=l.getTrackState(),e.next=13,this.statsCalculator_.getReceiverStats(l);case 13:d=e.sent,(f={userId:d.userId,tinyId:s,hasVideo:u.video&&c.video,hasAuxiliary:u.auxiliary&&c.auxiliary,video:{framesDecoded:0},auxiliary:{framesDecoded:0}}).hasVideo&&(f.video.framesDecoded=d.video.framesDecoded),f.hasAuxiliary&&(f.auxiliary.framesDecoded=d.auxiliary.framesDecoded),r[d.userId]=f;case 18:e.next=5;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(3),i.e(e.t0);case 25:return e.prev=25,i.f(),e.finish(25);case 28:return e.abrupt("return",r);case 29:case"end":return e.stop()}},e,this,[[3,22,25,28]])})),function(){return i.apply(this,arguments)})},{key:"detectFPS",value:(r=a(n().mark(function e(){var t,r,i,o,a,s;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getStats();case 2:if(t=e.sent,this.prevStats_){e.next=6;break}return this.prevStats_=t,e.abrupt("return");case 6:e.t0=n().keys(t);case 7:if((e.t1=e.t0()).done){e.next=17;break}if(r=e.t1.value,this.prevStats_[r]){e.next=11;break}return e.abrupt("continue",7);case 11:i=t[r].tinyId,o=this.client_.getMutedStates(),t[r].hasVideo&&this.prevStats_[r].hasVideo&&o.has(i)&&!o.get(i).videoMuted&&(a=t[r].video.framesDecoded-this.prevStats_[r].video.framesDecoded,this.handleRenderFreeze({userId:r,type:XS,fps:a})),t[r].hasAuxiliary&&this.prevStats_[r].hasAuxiliary&&(s=t[r].auxiliary.framesDecoded-this.prevStats_[r].auxiliary.framesDecoded,this.handleRenderFreeze({userId:r,type:ZS,fps:s})),e.next=7;break;case 17:this.prevStats_=t;case 18:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"handleRenderFreeze",value:(t=a(n().mark(function e(t){var r,i,o,a,s,l,c,u;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.userId,i=t.fps,o=t.type,a="".concat(r,"_").concat(o),s=this.renderFreezeMap_.get(a),i<=2?(l=pt(),s&&!s.isFreeze&&(s.freezeTimeline.push({startTime:l,endTime:void 0}),s.isFreeze=!0),s||this.renderFreezeMap_.set(a,{userId:r,type:o,isFreeze:!0,freezeTimeline:[{startTime:l,endTime:void 0}],renderFreezeTotal:0})):s&&s.isFreeze&&(s.isFreeze=!1,(c=s.freezeTimeline.pop()).endTime=pt(),u=c.endTime-c.startTime,s.freezeTimeline.push(c),s.renderFreezeTotal+=Math.min(5e3,u));case 4:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"handlePlayVideoStart",value:function(e){var t=e.stream;if(t.getClient()===this.client_&&t.isRemote()&&t.hasVideo()){var n="".concat(t.getUserId(),"_").concat(t.getType());this.remoteStreamMap_.has(n)||this.remoteStreamMap_.set(n,{isPlayingFired:!1})}}},{key:"handleVideoPlaying",value:function(e){var t=e.stream;if(t.isRemote()&&t.getClient()===this.client_){var n="".concat(t.getUserId(),"_").concat(t.getType());this.remoteStreamMap_.has(n)&&(this.remoteStreamMap_.get(n).isPlayingFired=!0)}}},{key:"getDataFreezeDuration",value:function(e){var t={dataFreeze:0,count:0},n=this.dataFreezeMap_.get(e);if(n){if(n.isFreezing()){var r=n.durationItemList[n.durationItemList.length-1];r.stop(),r.getDuration()<500&&n.durationItemList.pop()}t.dataFreeze=this.getTotalDuration(n.durationItemList),t.count=n.durationItemList.length}return t}},{key:"getRenderFreezeDuration",value:function(e){var t=this.renderFreezeMap_.get(e),n=0,r=0;if(t)if(t.isFreeze){var i=pt()-t.freezeTimeline[t.freezeTimeline.length-1].startTime;n=t.renderFreezeTotal+Math.min(i,5e3),r=t.freezeTimeline.length}else n=t.renderFreezeTotal;return{renderFreeze:n,count:r}}},{key:"getMonitorFreeze",value:function(){return this.monitorFreezeData_}},{key:"isBlackStream",value:function(e){return!!this.remoteStreamMap_.has(e)&&!this.remoteStreamMap_.get(e).isPlayingFired}},{key:"resetMonitor",value:function(){this.monitorFreezeData_.clear()}}]),e}(),JV=d(function e(t){s(this,e),this.userId=t.userId,this.tinyId=t.tinyId,this.role=20===t.role?zS:GS}),QV={exports:{}};!function(e){!function(t){function n(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function r(e,t,r,i,o,a){return n((s=n(n(t,e),n(i,a)))<<(l=o)|s>>>32-l,r);var s,l}function i(e,t,n,i,o,a,s){return r(t&n|~t&i,e,t,o,a,s)}function o(e,t,n,i,o,a,s){return r(t&i|n&~i,e,t,o,a,s)}function a(e,t,n,i,o,a,s){return r(t^n^i,e,t,o,a,s)}function s(e,t,n,i,o,a,s){return r(n^(t|~i),e,t,o,a,s)}function l(e,t){var r,l,c,u,d;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var f=1732584193,p=-271733879,h=-1732584194,g=271733878;for(r=0;r<e.length;r+=16)l=f,c=p,u=h,d=g,f=i(f,p,h,g,e[r],7,-680876936),g=i(g,f,p,h,e[r+1],12,-389564586),h=i(h,g,f,p,e[r+2],17,606105819),p=i(p,h,g,f,e[r+3],22,-1044525330),f=i(f,p,h,g,e[r+4],7,-176418897),g=i(g,f,p,h,e[r+5],12,1200080426),h=i(h,g,f,p,e[r+6],17,-1473231341),p=i(p,h,g,f,e[r+7],22,-45705983),f=i(f,p,h,g,e[r+8],7,1770035416),g=i(g,f,p,h,e[r+9],12,-1958414417),h=i(h,g,f,p,e[r+10],17,-42063),p=i(p,h,g,f,e[r+11],22,-1990404162),f=i(f,p,h,g,e[r+12],7,1804603682),g=i(g,f,p,h,e[r+13],12,-40341101),h=i(h,g,f,p,e[r+14],17,-1502002290),f=o(f,p=i(p,h,g,f,e[r+15],22,1236535329),h,g,e[r+1],5,-165796510),g=o(g,f,p,h,e[r+6],9,-1069501632),h=o(h,g,f,p,e[r+11],14,643717713),p=o(p,h,g,f,e[r],20,-373897302),f=o(f,p,h,g,e[r+5],5,-701558691),g=o(g,f,p,h,e[r+10],9,38016083),h=o(h,g,f,p,e[r+15],14,-660478335),p=o(p,h,g,f,e[r+4],20,-405537848),f=o(f,p,h,g,e[r+9],5,568446438),g=o(g,f,p,h,e[r+14],9,-1019803690),h=o(h,g,f,p,e[r+3],14,-187363961),p=o(p,h,g,f,e[r+8],20,1163531501),f=o(f,p,h,g,e[r+13],5,-1444681467),g=o(g,f,p,h,e[r+2],9,-51403784),h=o(h,g,f,p,e[r+7],14,1735328473),f=a(f,p=o(p,h,g,f,e[r+12],20,-1926607734),h,g,e[r+5],4,-378558),g=a(g,f,p,h,e[r+8],11,-2022574463),h=a(h,g,f,p,e[r+11],16,1839030562),p=a(p,h,g,f,e[r+14],23,-35309556),f=a(f,p,h,g,e[r+1],4,-1530992060),g=a(g,f,p,h,e[r+4],11,1272893353),h=a(h,g,f,p,e[r+7],16,-155497632),p=a(p,h,g,f,e[r+10],23,-1094730640),f=a(f,p,h,g,e[r+13],4,681279174),g=a(g,f,p,h,e[r],11,-358537222),h=a(h,g,f,p,e[r+3],16,-722521979),p=a(p,h,g,f,e[r+6],23,76029189),f=a(f,p,h,g,e[r+9],4,-640364487),g=a(g,f,p,h,e[r+12],11,-421815835),h=a(h,g,f,p,e[r+15],16,530742520),f=s(f,p=a(p,h,g,f,e[r+2],23,-995338651),h,g,e[r],6,-198630844),g=s(g,f,p,h,e[r+7],10,1126891415),h=s(h,g,f,p,e[r+14],15,-1416354905),p=s(p,h,g,f,e[r+5],21,-57434055),f=s(f,p,h,g,e[r+12],6,1700485571),g=s(g,f,p,h,e[r+3],10,-1894986606),h=s(h,g,f,p,e[r+10],15,-1051523),p=s(p,h,g,f,e[r+1],21,-2054922799),f=s(f,p,h,g,e[r+8],6,1873313359),g=s(g,f,p,h,e[r+15],10,-30611744),h=s(h,g,f,p,e[r+6],15,-1560198380),p=s(p,h,g,f,e[r+13],21,1309151649),f=s(f,p,h,g,e[r+4],6,-145523070),g=s(g,f,p,h,e[r+11],10,-1120210379),h=s(h,g,f,p,e[r+2],15,718787259),p=s(p,h,g,f,e[r+9],21,-343485551),f=n(f,l),p=n(p,c),h=n(h,u),g=n(g,d);return[f,p,h,g]}function c(e){var t,n="",r=32*e.length;for(t=0;t<r;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function u(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var r=8*e.length;for(t=0;t<r;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function d(e){var t,n,r="0123456789abcdef",i="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),i+=r.charAt(t>>>4&15)+r.charAt(15&t);return i}function f(e){return unescape(encodeURIComponent(e))}function p(e){return function(e){return c(l(u(e),8*e.length))}(f(e))}function h(e,t){return function(e,t){var n,r,i=u(e),o=[],a=[];for(o[15]=a[15]=void 0,i.length>16&&(i=l(i,8*e.length)),n=0;n<16;n+=1)o[n]=909522486^i[n],a[n]=1549556828^i[n];return r=l(o.concat(u(t)),512+8*t.length),c(l(a.concat(r),640))}(f(e),f(t))}function g(e,t,n){return t?n?h(t,e):d(h(t,e)):n?p(e):d(p(e))}e.exports?e.exports=g:t.md5=g}(mn)}(QV);var eH,tH,nH,rH,iH,oH,aH,sH,lH,cH,uH,dH,fH,pH,hH,gH,mH,vH,bH,_H,yH,wH,xH,kH,SH,CH,TH,EH,IH,AH,RH,OH,LH,PH,MH,$H,NH,DH,FH,qH,UH,BH,jH=QV.exports,VH=function(){function e(t){s(this,e),this.client_=t.client,this.signalChannel_=t.signalChannel,this.log_=aA.createLogger({id:"mix|"+this.client_.getUserId(),userId:t.client.getUserId(),sdkAppId:t.client.getSDKAppId()}),this.isMixing_=!1,this.config_=null,this.data_=null,this.remoteStreamMap_=new j.default,this.installEvents()}var t,r,i,o;return d(e,[{key:"isPresetLayoutMode",get:function(){return this.config_&&this.config_.mode===RC.PRESET_LAYOUT}},{key:"installEvents",value:function(){BI.on(ZI,this.onStreamSubscribed,this),BI.on(JI,this.onStreamUnsubscribed,this),this.client_.on("stream-removed",this.onStreamRemoved,this)}},{key:"uninstallEvents",value:function(){BI.off(ZI,this.onStreamSubscribed,this),BI.off(JI,this.onStreamUnsubscribed,this),this.client_.off("stream-removed",this.onStreamRemoved,this)}},{key:"reset",value:function(){this.uninstallEvents(),this.isMixing_=!1,this.config_=null}},{key:"onStreamSubscribed",value:function(e){var t=e.client,n=e.stream;t===this.client_&&(this.remoteStreamMap_.set(n.getId(),{remoteStream:n,isUsed:!1}),this.isMixing_&&this.hasAvailablePlaceHolder()&&this.startMixTranscode(this.config_))}},{key:"onStreamUnsubscribed",value:function(e){var t=e.client,n=e.stream;t===this.client_&&this.onStreamRemoved({stream:n})}},{key:"onStreamRemoved",value:function(e){var t=e.stream;if(this.remoteStreamMap_.has(t.getId())){var n=this.remoteStreamMap_.get(t.getId()).isUsed;this.remoteStreamMap_.delete(t.getId()),this.isMixing_&&this.isPresetLayoutMode&&n&&this.startMixTranscode(this.config_)}}},{key:"startMixTranscode",value:(o=a(n().mark(function e(t){var r,i,o;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.resetIsUsedFlag(),this.config_=t,r=this.getInputParam(t,this.remoteStreamMap_),i=this.getOutputParam(t),o=this.getOutputSessionId({config:t,roomId:this.client_.getRoomId(),userId:this.client_.getUserId()}),!this.isMixing_||!this.data_||o===this.data_.outputSessionId){e.next=10;break}return this.log_.info("startMixTranscode() streamId changed, stop mixing before start"),e.next=10,this.doStopMixTranscode();case 10:return e.next=12,this.doStartMixTranscode({outputSessionId:o,inputParam:r,outputParam:i});case 12:e.next=18;break;case 14:throw e.prev=14,e.t0=e.catch(0),this.resetIsUsedFlag(),e.t0;case 18:case"end":return e.stop()}},e,this,[[0,14]])})),function(e){return o.apply(this,arguments)})},{key:"doStartMixTranscode",value:(i=a(n().mark(function e(t){var r,i,o,a,s,l,c,u;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.outputSessionId,i=t.inputParam,o=t.outputParam,a={roomId:String(this.client_.getRoomId()),mcuRequestTime:Date.now(),outputSessionId:r,inputParam:i,outputParam:o},this.data_=a,this.log_.info("startMixTranscode: ".concat((0,I.default)(a))),this.isMixing_=!0,e.prev=5,e.next=8,this.signalChannel_.sendWaitForResponse({command:"start_mcu_mix",data:a,timeout:5e3,responseCommand:mR.START_MIX_TRANSCODE_RES,commandDesc:"startMixTranscode"});case 8:if(s=e.sent,l=s.data,c=l.code,u=l.message,0===c){e.next=15;break}throw-102083===c&&(u="Please enable relayed-push in ".concat(QC," and try later, refer to ").concat(tT,"tutorial-26-advanced-publish-cdn-stream.html")),this.log_.error("startMixTranscode failed, errCode: ".concat(c," errMsg: ").concat(u)),this.isMixing_=!1,new _R({code:bR.START_MIX_TRANSCODE_FAILED,message:st({key:"START_MIX_TRANSCODE_FAILED",data:{message:u},link:{className:"Client",fnName:"startMixTranscode"}})});case 15:e.next=21;break;case 17:throw e.prev=17,e.t0=e.catch(5),this.isMixing_=!1,e.t0;case 21:case"end":return e.stop()}},e,this,[[5,17]])})),function(e){return i.apply(this,arguments)})},{key:"reStartMixTranscode",value:function(){this.isMixing_&&this.startMixTranscode(this.config_)}},{key:"stopMixTranscode",value:(r=a(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isMixing_){e.next=2;break}throw new _R({code:bR.INVALID_OPERATION,message:st({key:"MIX_TRANSCODE_NOT_STARTED"})});case 2:return e.next=4,this.doStopMixTranscode();case 4:this.resetIsUsedFlag();case 5:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"doStopMixTranscode",value:(t=a(n().mark(function e(){var t,r,i,o,a;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={mcuRequestTime:Date.now(),outputSessionId:this.data_.outputSessionId,streamType:this.data_.outputParam.streamType},this.log_.info("stopMixTranscode: ".concat((0,I.default)(t))),e.next=4,this.signalChannel_.sendWaitForResponse({command:"stop_mcu_mix",data:t,timeout:5e3,responseCommand:mR.STOP_MIX_TRANSCODE_RES,commandDesc:"stopMixTranscode"});case 4:if(r=e.sent,i=r.data,o=i.code,a=i.message,0!==o){e.next=10;break}this.isMixing_=!1,e.next=12;break;case 10:throw this.log_.error("stopMixTranscode failed, errCode: ".concat(o," errMsg: ").concat(a)),new _R({code:bR.STOP_MIX_TRANSCODE_FAILED,message:st({key:"STOP_MIX_TRANSCODE_FAILED",data:{message:a},link:{className:"Client",fnName:"stopMixTranscode"}})});case 12:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"getOutputSessionId",value:function(e){var t=e.config,n=e.userId,r=e.roomId;return CI(t.streamId)&&t.streamId.length>0?t.streamId:jH("".concat(r,"_").concat(n,"_main"))}},{key:"getInputParam",value:function(e,t){var n=this,r=e.mixUsers.map(function(e){return{userId:e.userId,roomId:String(e.roomId||n.client_.getRoomId()),width:e.width||0,height:e.height||0,locationX:e.locationX||0,locationY:e.locationY||0,zOrder:e.zOrder,streamType:SI(e.streamType)||e.streamType!==ZS?0:1,inputType:e.pureAudio?LC.IT_PURE_AUDIO:LC.IT_AUDIO_VIDEO,renderMode:e.renderMode||0}});return e.mode===RC.PRESET_LAYOUT&&(r.forEach(function(e){if(e.userId===OC.REMOTE){var n=D(t.values()).find(function(e){return!e.isUsed});n&&(e.userId=n.remoteStream.getUserId(),e.streamType=n.remoteStream.getType()===ZS?1:0,n.isUsed=!0)}}),r=r.filter(function(e){return e.userId!==OC.REMOTE})),r}},{key:"getOutputParam",value:function(e){var t=e.streamId||"";return{streamId:t,streamType:t.length>0?1:0,width:SI(e.videoWidth)?640:e.videoWidth,height:SI(e.videoHeight)?480:e.videoHeight,videoBps:e.videoBitrate||0,fps:e.videoFramerate||15,gop:e.videoGOP||2,audioSampleRate:e.audioSampleRate||48e3,audioBps:e.audioBitrate||64,audioChannels:e.audioChannels||1,backgroundColor:e.backgroundColor||0,backgroundImg:e.backgroundImage||"",extraInfo:"",videoCodec:2,audioCodec:0}}},{key:"hasAvailablePlaceHolder",value:function(){return!!this.isPresetLayoutMode&&this.data_.inputParam.length!==this.config_.mixUsers.length}},{key:"resetIsUsedFlag",value:function(){this.remoteStreamMap_.forEach(function(e){return e.isUsed=!1})}}]),e}(),HH=function(){function e(t){s(this,e),this.client_=t.client,this.signalChannel_=t.signalChannel,this.publishTencentMainStreamObj_={params_:null,streamId_:void 0,isPublishing_:!1},this.publishTencentAuxStreamObj_={params_:null,streamId_:void 0,isPublishing_:!1},this.publishGivenCDNData_=null,this.isPublishingGivenCDN_=!1}var t,r,i,o,l,c;return d(e,[{key:"setSignalChannel",value:function(e){this.signalChannel_=e.signalChannel}},{key:"getIsPublishingTencentCDN",value:function(){return this.publishTencentMainStreamObj_.isPublishing_||this.publishTencentAuxStreamObj_.isPublishing_}},{key:"getIsPublishingGivenCDN",value:function(){return this.isPublishingGivenCDN_}},{key:"generatePublishCDNStreamId",value:function(e,t){if(!e){var n="".concat(this.client_.getRoomId(),"_").concat(this.client_.getUserId(),"_").concat(t);return/^[A-Za-z\d_-]*$/.test(n)||(n=jH(n)),"".concat(this.client_.getSDKAppId(),"_").concat(n)}return e}},{key:"generatePublishCDNSessionId",value:function(e){return jH("".concat(this.client_.getRoomId(),"_").concat(this.client_.getUserId(),"_").concat(e))}},{key:"startPublishTencentCDN",value:(c=a(n().mark(function e(t){var r,i,o,a;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.streamType===_S?(this.publishTencentAuxStreamObj_.params_=t,this.publishTencentAuxStreamObj_.isPublishing_=!0):(this.publishTencentMainStreamObj_.params_=t,this.publishTencentMainStreamObj_.isPublishing_=!0),this.client_.isJoined_){e.next=3;break}return e.abrupt("return");case 3:return r=this.generatePublishCDNStreamId(t.streamId,t.streamType),i=this.generatePublishCDNSessionId(t.streamType),o=t.streamType===_S?1:0,a={requestTime:Date.now(),sessionId:i,streamId:r,streamType:o},e.next=9,this.doStartPublishTencentCDN(a,t.streamType);case 9:case"end":return e.stop()}},e,this)})),function(e){return c.apply(this,arguments)})},{key:"doStartPublishTencentCDN",value:(l=a(n().mark(function e(t,r){var i,o,a,s;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,aA.info("startPublishTencentCDN: "+(0,I.default)(t)),e.next=4,this.signalChannel_.sendWaitForResponseWithRetry({command:"start_publishing",data:t,timeout:2e3,responseCommand:mR.START_PUBLISH_TENCENT_CDN_RES,commandDesc:"startPublishCDNStream",retries:2});case 4:if(i=e.sent,o=i.data,a=o.code,s=o.message,0!==a){e.next=10;break}r===_S?this.publishTencentAuxStreamObj_.streamId_=t.streamId:this.publishTencentMainStreamObj_.streamId_=t.streamId,e.next=14;break;case 10:throw r===_S?this.publishTencentAuxStreamObj_.isPublishing_=!1:this.publishTencentMainStreamObj_.isPublishing_=!1,-102083===a&&(s="Please enable relayed-push in ".concat(QC," and try later, refer to ").concat(tT,"tutorial-26-advanced-publish-cdn-stream.html")),aA.error("startPublishTencentCDN failed, errCode: ".concat(a,", errMsg: ").concat(s)),new _R({code:bR.START_PUBLISH_CDN_FAILED,message:st({key:PT,data:{message:s},link:{className:"Client",fnName:"startPublishCDNStream"}})});case 14:e.next=20;break;case 16:throw e.prev=16,e.t0=e.catch(0),r===_S?this.publishTencentAuxStreamObj_.isPublishing_=!1:this.publishTencentMainStreamObj_.isPublishing_=!1,e.t0;case 20:case"end":return e.stop()}},e,this,[[0,16]])})),function(e,t){return l.apply(this,arguments)})},{key:"resetPublishTencentParam",value:function(e){e===OS&&(this.publishTencentMainStreamObj_={params_:null,streamId_:void 0,isPublishing_:!1}),e===_S&&(this.publishTencentAuxStreamObj_={params_:null,streamId_:void 0,isPublishing_:!1})}},{key:"stopPublishTencentCDN",value:(o=a(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.client_.isJoined_){e.next=4;break}return this.resetPublishTencentParam(OS),this.resetPublishTencentParam(_S),e.abrupt("return");case 4:if(!this.publishTencentMainStreamObj_.isPublishing_){e.next=7;break}return e.next=7,this.doStopPublishTencentCDN(OS);case 7:if(!this.publishTencentAuxStreamObj_.isPublishing_){e.next=10;break}return e.next=10,this.doStopPublishTencentCDN(_S);case 10:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)})},{key:"doStopPublishTencentCDN",value:(i=a(n().mark(function e(t){var r,i,o,a,s;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={requestTime:Date.now(),sessionId:jH("".concat(this.client_.getRoomId(),"_").concat(this.client_.getUserId(),"_").concat(t))},aA.info("stopPublishTencentCDN: "+(0,I.default)(r)),e.next=4,this.signalChannel_.sendWaitForResponse({command:"stop_publishing",data:r,timeout:5e3,responseCommand:mR.STOP_PUBLISH_TENCENT_CDN_RES,commandDesc:"stopPublishCDNStream"});case 4:if(i=e.sent,o=i.data,a=o.code,s=o.message,0!==a){e.next=10;break}this.resetPublishTencentParam(t),e.next=17;break;case 10:if(-102069!==a){e.next=15;break}aA.warn("stopPublishTencentCDN failed, can not stopPublishTencentCDN in auto relayed-push mode"),this.resetPublishTencentParam(t),e.next=17;break;case 15:throw aA.error("stopPublishTencentCDN failed, errCode: ".concat(a," errMsg: ").concat(s)),new _R({code:bR.STOP_PUBLISH_CDN_FAILED,message:st({key:MT,data:{message:s},link:{className:"Client",fnName:"stopPublishCDNStream"}})});case 17:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"startPublishGivenCDN",value:(r=a(n().mark(function e(t){var r,i,o,a,s,l;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.streamType===OS?this.publishTencentMainStreamObj_.streamId_:this.publishTencentAuxStreamObj_.streamId_,i={pushRequestTime:Date.now(),pushAppId:t.appId,pushBizId:t.bizId,pushCdnUrl:t.url,pushStreamType:t.streamType,pushStreamId:r},aA.info("startPublishGivenCDN: "+(0,I.default)(i)),this.publishGivenCDNData_=i,this.isPublishingGivenCDN_=!0,this.client_.isJoined_){e.next=7;break}return e.abrupt("return");case 7:return e.prev=7,e.next=10,this.signalChannel_.sendWaitForResponse({command:"start_push_user_cdn",data:i,timeout:5e3,responseCommand:mR.START_PUBLISH_GIVEN_CDN_RES,commandDesc:"startPublishCDNStream"});case 10:if(o=e.sent,a=o.data,s=a.code,l=a.message,0===s){e.next=17;break}throw aA.error("startPublishGivenCDN failed, errCode: ".concat(s,", errMsg: ").concat(l)),this.publishGivenCDNData_=null,this.isPublishingGivenCDN_=!1,new _R({code:bR.START_PUBLISH_CDN_FAILED,message:st({key:PT,data:{message:l},link:{className:"Client",fnName:"startPublishCDNStream"}})});case 17:e.next=24;break;case 19:throw e.prev=19,e.t0=e.catch(7),this.publishGivenCDNData_=null,this.isPublishingGivenCDN_=!1,e.t0;case 24:case"end":return e.stop()}},e,this,[[7,19]])})),function(e){return r.apply(this,arguments)})},{key:"stopPublishGivenCDN",value:(t=a(n().mark(function e(){var t,r,i,o,a,s,l,c,u,d;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.client_.isJoined_){e.next=4;break}return this.publishGivenCDNData_=null,this.isPublishingGivenCDN_=!1,e.abrupt("return");case 4:return t=this.publishGivenCDNData_,r=t.pushAppId,i=t.pushBizId,o=t.pushCdnUrl,a=t.pushStreamType,s={pushRequestTime:Date.now(),pushAppId:r,pushBizId:i,pushCdnUrl:o,pushStreamType:a},aA.info("stopPublishGivenCDN: "+(0,I.default)(s)),e.next=9,this.signalChannel_.sendWaitForResponse({command:"stop_push_user_cdn",data:s,timeout:5e3,responseCommand:mR.STOP_PUBLISH_GIVEN_CDN_RES,commandDesc:"stopPublishCDNStream"});case 9:if(l=e.sent,c=l.data,u=c.code,d=c.message,0!==u){e.next=16;break}this.publishGivenCDNData_=null,this.isPublishingGivenCDN_=!1,e.next=18;break;case 16:throw aA.error("stopPublishGivenCDN failed, errCode: ".concat(u," errMsg: ").concat(d)),new _R({code:bR.STOP_PUBLISH_CDN_FAILED,message:st({key:MT,data:{message:d},link:{className:"Client",fnName:"stopPublishCDNStream"}})});case 18:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"handleCDNConfigForJoinData",value:function(e){var t,n=e;if(this.publishTencentMainStreamObj_.isPublishing_||this.publishTencentAuxStreamObj_.isPublishing_){var r={};CI(n)&&(r=JSON.parse(n)),r.Str_uc_params||(r.Str_uc_params={}),this.publishTencentMainStreamObj_.isPublishing_&&(this.publishTencentMainStreamObj_.streamId_?r.Str_uc_params.userdefine_streamid_main=this.publishTencentMainStreamObj_.streamId_:this.publishTencentMainStreamObj_.params_&&(r.Str_uc_params.userdefine_streamid_main=this.generatePublishCDNStreamId(this.publishTencentMainStreamObj_.params_.streamId,OS))),this.publishTencentAuxStreamObj_.isPublishing_&&(this.publishTencentAuxStreamObj_.streamId_?r.Str_uc_params.userdefine_streamid_aux=this.publishTencentAuxStreamObj_.streamId_:this.publishTencentAuxStreamObj_.params_&&(r.Str_uc_params.userdefine_streamid_aux=this.generatePublishCDNStreamId(this.publishTencentAuxStreamObj_.params_.streamId,_S))),n=(0,I.default)(r)}if(this.isPublishingGivenCDN_){var i=this.publishGivenCDNData_,o=i.pushAppId,a=i.pushBizId,s=i.pushCdnUrl,l=i.pushStreamType,c=i.pushStreamId;t={pushRequestTime:Date.now(),pushAppId:o,pushBizId:a,pushCdnUrl:s,pushStreamType:l,pushStreamId:c}}return{bussinessInfo:n,pushUserCdnInfo:t}}},{key:"reset",value:function(){this.resetPublishTencentParam(OS),this.resetPublishTencentParam(_S),this.publishGivenCDNData_=null,this.isPublishingGivenCDN_=!1}}]),e}(),YH=function(){function e(t){s(this,e),this.client_=t.client,this.durationMap_=new j.default,this.installEvents()}return d(e,[{key:"installEvents",value:function(){BI.on(ZI,this.handleSubscribed,this),BI.on(XI,this.handleStreamTrackUpdated,this),BI.on(JI,this.handleStreamStopped,this),BI.on(116,this.handleStreamStopped,this)}},{key:"uninstallEvents",value:function(){BI.off(ZI,this.handleSubscribed,this),BI.off(XI,this.handleStreamTrackUpdated,this),BI.off(JI,this.handleStreamStopped,this),BI.off(116,this.handleStreamStopped,this)}},{key:"handleSubscribed",value:function(e){var t=e.client,n=e.stream;if(t===this.client_){var r=n.getUserId(),i=n.getType(),o="".concat(r,"_").concat(i);if(n.hasAudio())if(n.isMainAudioSubscribed){var a=new XV,s=this.durationMap_.get(o);s?this.isRecording(s.audio)||s.audio.push(a):this.durationMap_.set(o,{userId:r,type:i,audio:[a],video:[]})}else this.stopDurationItem(o,pS);if(n.hasVideo())if(i===XS&&n.isMainVideoSubscribed||i===ZS&&n.isAuxVideoSubscribed){var l=new XV,c=this.durationMap_.get(o);c?this.isRecording(c.video)||c.video.push(l):this.durationMap_.set(o,{userId:r,type:i,audio:[],video:[l]})}else this.stopDurationItem(o,hS)}}},{key:"handleStreamStopped",value:function(e){var t=e.client,n=e.stream;if(this.clientHitTest(t)){var r=n.getUserId(),i=n.getType(),o="".concat(r,"_").concat(i);this.stopDurationItem(o,pS),this.stopDurationItem(o,hS)}}},{key:"handleStreamTrackUpdated",value:function(e){var t=e.client,n=e.userId,r=e.tinyId,i=e.kind,o=e.action;if(this.clientHitTest(t)&&this.client_.getConnections().has(r)){var a=i===bS?i:XS,s="".concat(n,"_").concat(a);if(o===DC.ADD){var l=this.client_.getConnections().get(r).getSubscribeState();if(i===pS&&!l.audio||i===hS&&!l.video||i===bS&&!l.auxiliary)return;var c=new XV,u=this.durationMap_.get(s);u?(i!==pS||this.isRecording(u.audio)||u.audio.push(c),i===pS||this.isRecording(u.video)||u.video.push(c)):this.durationMap_.set(s,{userId:n,type:a,audio:i===pS?[c]:[],video:i===pS?[]:[c]})}else this.stopDurationItem(s,i===pS?pS:hS)}}},{key:"isRecording",value:function(e){return e.findIndex(function(e){return 0===e.endTime})>=0}},{key:"stopDurationItem",value:function(e,t){if(this.durationMap_.has(e)){var n=this.durationMap_.get(e)[t].find(function(e){return 0===e.endTime});n&&n.stop()}}},{key:"clientHitTest",value:function(e){return this.client_===e}},{key:"getDuration",value:function(e,t){return this.durationMap_.has(e)?this.durationMap_.get(e)[t].reduce(function(e,t){return e+t.getDuration()},0):0}},{key:"getDurationMap",value:function(){return this.durationMap_}},{key:"reset",value:function(){this.durationMap_.clear()}},{key:"destroy",value:function(){this.client_=null,this.uninstallEvents()}}]),e}(),zH=function(e,t){return mt({retryFunction:hn,settings:{retries:3,timeout:0},onError:t,onRetrying:e})},GH=function(){function e(){s(this,e)}return d(e,[{key:"call",value:function(e,t){return kI(this[e])?this[e](t):W.default.reject(new _R({code:bR.INVALID_PARAMETER,message:st({key:"API_NOT_EXIST",data:{name:e}})}))}},{key:"updatePrivateMapKey",value:function(e){var t=e.privateMapKey;return e.client.setProperty("privateMapKey",t),W.default.resolve()}}]),e}(),WH=new GH,KH=(eH=cn(),tH=Jt(nj.CLIENT.join),nH=cn(),rH=tn({retries:3}),iH=cn(),oH=Jt.apply(void 0,D(nj.CLIENT.publish)),aH=nn(zC),sH=cn(),lH=Jt(nj.CLIENT.unpublish),cH=Jt.apply(void 0,D(nj.CLIENT.subscribe)),uH=Jt(nj.CLIENT.unsubscribe),dH=cn(),fH=Jt(nj.CLIENT.switchRole),pH=nn(zC),hH=Jt(nj.CLIENT.startPublishCDNStream),gH=nn(zC),mH=nn(zC),vH=Jt(nj.CLIENT.startMixTranscode),bH=nn(zC),_H=nn(zC),yH=nn(zC),wH=nn(zC),xH=nn(zC),kH=nn(zC),SH=nn(zC),CH=Zt.apply(void 0,D(nj.CLIENT.sendSEIMessage)),TH=nn(zC),OH={timesInSecond:30,maxSizeInSecond:8e3,getSize:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t[0].byteLength}},LH=OH.timesInSecond,PH=OH.maxSizeInSecond,MH=OH.getSize,EH=function(e,t,n){var r=n.value,i=new j.default;return BI.on(GI,function(e){var t=e.client;return i.delete(t)}),n.value=function(){var e=i.get(this);e||(e={callCountInSecond:0,timestamp:0,totalSizeInSecond:0},i.set(this,e)),0===e.timestamp?e.timestamp=Date.now():Date.now()-e.timestamp>1e3&&(e.timestamp=Date.now(),e.callCountInSecond=0,e.totalSizeInSecond=0);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];if(MH&&(e.totalSizeInSecond+=MH.apply(void 0,o)),0!==e.timestamp&&Date.now()-e.timestamp<1e3&&(e.callCountInSecond>=LH||e.totalSizeInSecond>PH))throw new _R({code:bR.INVALID_OPERATION,message:st({key:"CALL_FREQUENCY_LIMIT",data:{isTimes:e.callCountInSecond>=LH,isSize:e.totalSizeInSecond>PH,name:t,timesInSecond:LH,maxSizeInSecond:PH}})});return e.callCountInSecond++,r.apply(this,o)},n},IH=nn(zC),AH=nn(zC),RH=function(){function e(t){var n,r;s(this,e),this.name_=zC,this.mode_=t.mode,this.sdpSemantics_=AC,SI(t.sdpSemantics)?function(){var e;if(SI(window.RTCRtpTransceiver))return!1;if(!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var t=null,n=!1;try{(t=new RTCPeerConnection({sdpSemantics:IC})).addTransceiver(pS),n=!0}catch(e){}return null===(e=t)||void 0===e||e.close(),n}()&&(this.sdpSemantics_=IC):this.sdpSemantics_=t.sdpSemantics,this.sdkAppId_=t.sdkAppId,this.userId_=t.userId,this.log_=aA.createLogger({id:"c".concat(t.seq,"|").concat(this.userId_),userId:this.userId_,sdkAppId:this.sdkAppId_}),this.userSig_=t.userSig,this.roomId_=0,this.useStringRoomId_=t.useStringRoomId||!1,this.pureAudioPushMode_=null,this.version_=t.version,this.log_.info("using sdpSemantics: "+this.sdpSemantics_),this.signalChannel_=null,this.role_=zS,this.privateMapKey_="",this.tinyId_=0,this.env_="",this.proxy_=null,this.unifiedProxy_=null,this.connections_=new j.default,this.mutedStates_=new j.default,this.userMap_=new j.default,this.syncUserListInterval_=-1,this.localStream_=null,this.localAuxStream_=null,this.uplinkConnection_=null,this.emitter_=NI(new UI,this.name_),this.isJoined_=!1,this.heartbeat_=-1,this.lastHeartBeatTime_=-1,this.stats_=new qO(this),this.joinTimeout_=-1,this.changeBigSmallRecords_=new j.default,this.networkQuality_=null,this.badCaseDetector_=null,this.networkType_=lt(),this.autoSubscribe_=!!SI(t.autoSubscribe)||t.autoSubscribe,this.joinedTimestamp_=0,this.joinOptions_={},this.basis_=(r={browser:at().name+"/"+at().version,os:Pt(),displayResolution:Mt(),isScreenShareSupported:kt(),isWebRTCSupported:wO(),isGetUserMediaSupported:$t(),isWebAudioSupported:Nt(),isWebSocketsSupported:"WebSocket"in window&&2===window.WebSocket.CLOSING,isWebCodecSupported:(n={AudioDecoder:!1,AudioEncoder:!1,VideoDecoder:!1,VideoEncoder:!1,ImageDecoder:!1},SI(window.AudioDecoder)||(n.AudioDecoder=!0),SI(window.AudioEncoder)||(n.AudioEncoder=!0),SI(window.VideoDecoder)||(n.VideoDecoder=!0),SI(window.VideoEncoder)||(n.VideoEncoder=!0),SI(window.ImageDecoder)||(n.ImageDecoder=!0),n),isMediaSessionSupported:"mediaSession"in navigator&&!SI(navigator.mediaSession.setActionHandler),isWebTransportSupported:!SI(window.WebTransport)},navigator.userAgent.includes("miniProgram")&&(r.browser="mini/".concat(r.browser)),r),this.initBussinessInfo_(t),this.publishedCDN_=!1,this.publishCDNData_=null,this.mixedMCU_=!1,this.mixTranscodeData_=null,this.checkSystemResult_=null,this.enableAudioVolumeEvaluation_=!1,this.audioVolumeIntervalId_=null,this.mixTranscodeManager_=null,this.publishCDNManager_=new HH({client:this}),this.keyPointManager_=new gj({client:this,frameWorkType:t.frameWorkType,component:t.component}),this.isPublishing_=!1,this.isEnableSmallStream_=!1,this.smallStreamConfig_={bitrate:100,frameRate:15,height:120,width:160},this.turnServers_=[],this.iceTransportPolicy_=t.iceTransportPolicy,this.schedule_={domains:null,iceServers:null,iceTransportPolicy:null,trtcCapability:null},this.enableAutoPlayDialog_=!!SI(t.enableAutoPlayDialog)||t.enableAutoPlayDialog,this.enableMultiAuxStream_=!SI(t.enableMultiAuxStream)&&t.enableMultiAuxStream,this.signalInfo_={},this.enableSEI_=!SI(t.enableSEI)&&t.enableSEI,this.isDestroyed_=!1}var r,i,o,l,c,u,f,p,g,m,v,b,_,y,w,x,k,S,C,T,E,A,R,O,P,M,N;return d(e,[{key:"initBussinessInfo_",value:function(e){this.bussinessInfo_=e.bussinessInfo;var t={};if(CI(e.bussinessInfo)&&(t=JSON.parse(e.bussinessInfo)),!SI(e.pureAudioPushMode)){if(!(0,h.default)(Number(e.pureAudioPushMode)))throw new _R({code:bR.INVALID_PARAMETER,message:st({key:"INVALID_PURE_AUDIO"})});this.pureAudioPushMode_=e.pureAudioPushMode,t.Str_uc_params||(t.Str_uc_params={}),t.Str_uc_params.pure_audio_push_mod=this.pureAudioPushMode_}if(!SI(e.streamId)){if(!(CI(e.streamId)&&String(e.streamId)&&String(e.streamId).length<=64))throw new _R({code:bR.INVALID_PARAMETER,message:st({key:"INVALID_STREAMID"})});t.Str_uc_params||(t.Str_uc_params={}),t.Str_uc_params.userdefine_streamid_main=e.streamId}if(!SI(e.userDefineRecordId)){if(null===e.userDefineRecordId.match(/^[A-Za-z0-9_-]{1,64}$/gi))throw new _R({code:bR.INVALID_PARAMETER,message:st({key:"INVALID_USER_DEFINE_RECORDID"})});t.Str_uc_params||(t.Str_uc_params={}),t.Str_uc_params.userdefine_record_id=e.userDefineRecordId}if(!SI(e.userDefinePushArgs)){if(!(CI(e.userDefinePushArgs)&&String(e.userDefinePushArgs)&&String(e.userDefinePushArgs).length<=256))throw new _R({code:bR.INVALID_PARAMETER,message:st({key:"INVALID_USER_DEFINE_PUSH_ARGS"})});t.Str_uc_params||(t.Str_uc_params={}),t.Str_uc_params.userdefine_push_args=e.userDefinePushArgs}vt(t)||(this.bussinessInfo_=(0,I.default)(t))}},{key:"schedule",value:(N=a(n().mark(function e(r){var i;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,un({userId:this.userId_,sdkAppId:this.sdkAppId_,roomId:r,useStringRoomId:this.useStringRoomId_,version:this.version_,userSig:this.userSig_});case 2:(i=e.sent)&&(this.log_.info("schedule: ".concat((0,I.default)(i))),i.trtcCapability=null==i?void 0:i.trtcAutoConf,this.schedule_=t(t({},this.schedule_),i),BI.emit(WI,this.schedule_));case 4:case"end":return e.stop()}},e,this)})),function(e){return N.apply(this,arguments)})},{key:"getSignalChannelUrl",value:function(){var e={mainUrl:"",backupUrl:""},t=_I();return t?e.mainUrl=e.backupUrl="wss://".concat(t,".rtc.qq.com"):this.proxy_?e.mainUrl=e.backupUrl=this.proxy_:this.unifiedProxy_?e.mainUrl=e.backupUrl="wss://".concat(this.unifiedProxy_):Array.isArray(this.schedule_.domains)&&this.schedule_.domains.length>0&&(e.mainUrl=e.backupUrl="wss://".concat(this.schedule_.domains[0]),this.schedule_.domains[1]&&(e.backupUrl="wss://".concat(this.schedule_.domains[1]))),e}},{key:"getUserId",value:function(){return this.userId_}},{key:"getUserSig",value:function(){return this.userSig_}},{key:"getRole",value:function(){return this.role_}},{key:"getSignalInfo",value:function(){return this.signalInfo_}},{key:"getRoomId",value:function(){return this.roomId_}},{key:"getSDKAppId",value:function(){return this.sdkAppId_}},{key:"getTinyId",value:function(){return this.tinyId_}},{key:"getIceTransportPolicy",value:function(){return this.iceTransportPolicy_||this.schedule_.iceTransportPolicy||"all"}},{key:"initialize",value:function(e){var t=this;this.log_.info("setup signal channel");var n=this.getSignalChannelUrl(),r=n.mainUrl,i=n.backupUrl;return this.signalChannel_=new TR({sdkAppId:this.sdkAppId_,userId:this.userId_,userSig:this.userSig_,roomId:e.roomId,url:r,backupUrl:i,signalDomainWhenUnifiedProxy:this.unifiedProxy_?this.schedule_.domains[0]:void 0,client:this}),this.networkQuality_||(this.networkQuality_=new UO({connections:this.connections_,signalChannel:this.signalChannel_,userId:this.userId_,client:this}),this.networkQuality_.on(PO.NETWORK_QUALITY,function(e){t.emitter_.emit(PO.NETWORK_QUALITY,e)})),this.deviceDetector_||(this.deviceDetector_=new BO({client:this})),this.subscriptionManager_||(this.subscriptionManager_=new Pj({client:this})),this.badCaseDetector_||(this.badCaseDetector_=new ZV({client:this,stats:this.stats_})),this.callDurationCalculator_||(this.callDurationCalculator_=new YH({client:this})),this.mixTranscodeManager_||(this.mixTranscodeManager_=new VH({client:this,signalChannel:this.signalChannel_})),this.publishCDNManager_&&this.publishCDNManager_.setSignalChannel({signalChannel:this.signalChannel_}),this.signalChannel_.on(2,function(e){t.log_.info("SignalChannel state changed from ".concat(e.prevState," to ").concat(e.state)),t.emitter_.emit(PO.CONNECTION_STATE_CHANGED,e)}),this.signalChannel_.on(4,function(e){t.reset(),t.emitter_.emit(PO.ERROR,e)}),this.signalChannel_.once(1,function(e){t.tinyId_=e.signalInfo.tinyId,BI.emit(29,{client:t})}),this.signalChannel_.on(mR.PEER_JOIN,this.onPeerJoin,this),this.signalChannel_.on(mR.PEER_LEAVE,this.onPeerLeave,this),this.signalChannel_.on(mR.UPDATE_REMOTE_MUTE_STAT,function(e){Date.now()-t.lastHeartBeatTime_>=1e4&&t.doHeartbeat(),BI.emit(24,{client:t,data:e.data}),t.onPublishedUserList(e.data),t.onUpdateRemoteMuteStat(e.data)}),this.signalChannel_.on(mR.CLIENT_BANNED,function(e){var n,r=e.data.data.reason;if(CR.uploadEvent({log:"stat-banned:".concat(r),userId:t.userId_}),"banned"===r)n="you got banned by the admin";else if("kick"===r)n="duplicated userId joining the room";else if("room_disband"===r)n="the room has been disbanded by the admin",r=r.replace("_","-");else if("user_time_out"===r)return t.log_.warn("".concat(r," last heart beat time: ").concat(t.lastHeartBeatTime_," interval: ").concat(Date.now()-t.lastHeartBeatTime_,", visibility: ").concat(document.visibilityState)),void t.reJoin();t.log_["kick"===r?"error":"info"]("user was banned because of [".concat(r,"]")),t.reset(),t.emitter_.emit(PO.CLIENT_BANNED,{reason:r,message:st({key:"CLIENT_BANNED",data:{message:n,reason:r}})||r})}),BI.emit(28,{client:this}),this.signalChannel_.connect()}},{key:"preJoin",value:(M=a(n().mark(function e(t){var r,i,o,a;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.joinOptions_=t,e.next=3,TO();case 3:if(this.checkSystemResult_=e.sent,this.checkDestroy(),(r=_I())||(r=BS,this.proxy_&&(this.proxy_.startsWith("wss://trtc.rtc.qq.com")?r="trtc":this.proxy_.startsWith("wss://webrtc.qq.com")&&(r="webrtc"))),this.env_=r,CR.setConfig({env:r,sdkAppId:this.sdkAppId_,userId:this.userId_,roomId:t.roomId}),this.uploadTrtcStats(),i=this.checkSystemResult_.detail,o=i.isH264EncodeSupported,a=i.isVp8EncodeSupported,wO()&&(o||a)){e.next=13;break}throw new _R({code:bR.NOT_SUPPORTED,message:st({key:BT})});case 13:case"end":return e.stop()}},e,this)})),function(e){return M.apply(this,arguments)})},{key:"join",value:(P=a(n().mark(function e(t){var r,i=this;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.roomId_=t.roomId,SI(t.role)||(this.role_=t.role),SI(t.privateMapKey)||(this.privateMapKey_=t.privateMapKey),r=pt(),BI.emit(jI,{client:this}),wR(this.userId_,{eventId:32788,eventDesc:"joining room",timestamp:Db(),userId:this.userId_,tinyId:this.tinyId_}),e.next=8,this.preJoin(t);case 8:return e.abrupt("return",new W.default(function(){var e=a(n().mark(function e(o,a){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i.joinReject_=a,e.prev=1,i.proxy_||i.schedule_.domains){e.next=5;break}return e.next=5,i.schedule(t.roomId);case 5:return i.checkDestroy(),e.next=8,i.initialize(t);case 8:return e.next=10,i.doJoin(t);case 10:i.signalInfo_=i.signalChannel_.getSignalInfo(),BI.emit(VI,{client:i}),i.joinedTimestamp_=pt(),CR.logSuccessEvent({userId:i.userId_,eventType:"delta-join",delta:i.joinedTimestamp_-r}),CR.logSuccessEvent({userId:i.userId_,eventType:"join"}),CR.uploadEvent({log:"stat-autoplay-dialog:".concat(i.enableAutoPlayDialog_),userId:i.userId_}),CR.uploadEvent({log:"stat-conv-".concat(hI,"-").concat(location.hostname),userId:i.userId_}),o(),e.next=26;break;case 20:e.prev=20,e.t0=e.catch(1),BI.emit(HI,{client:i,error:e.t0}),CR.logFailedEvent({userId:i.userId_,eventType:"join",error:e.t0}),i.reset(),a(e.t0);case 26:i.joinReject_=null;case 27:case"end":return e.stop()}},e,null,[[1,20]])}));return function(t,n){return e.apply(this,arguments)}}()));case 9:case"end":return e.stop()}},e,this)})),function(e){return P.apply(this,arguments)})},{key:"checkDestroy",value:function(){if(this.isDestroyed_)throw new _R({code:bR.INVALID_OPERATION,message:st({key:DT,data:{funName:"join"}})})}},{key:"uploadTrtcStats",value:(O=a(n().mark(function e(){var t,r,i,o,a,s,l,c,u,d,f,p,h;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,QH.getMicrophones();case 3:i=e.sent,t=i&&i.length,e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:return e.prev=9,e.next=12,QH.getCameras();case 12:o=e.sent,r=o&&o.length,e.next=18;break;case 16:e.prev=16,e.t1=e.catch(9);case 18:a={microphone:t,camera:r},s=this.checkSystemResult_.detail,l=s.isH264EncodeSupported,c=s.isVp8EncodeSupported,u=s.isH264DecodeSupported,d=s.isVp8DecodeSupported,f={webRTC:this.basis_.isWebRTCSupported,getUserMedia:this.basis_.isGetUserMediaSupported,webSocket:this.basis_.isWebSocketsSupported,screenShare:this.basis_.isScreenShareSupported,webAudio:this.basis_.isWebAudioSupported,h264Encode:l,h264Decode:u,vp8Encode:c,vp8Decode:d},p={browser:this.basis_.browser,os:this.basis_.os,trtc:f,devices:a},h={isWebCodecSupported:this.basis_.isWebCodecSupported,isMediaSessionSupported:this.basis_.isMediaSessionSupported,isWebTransportSupported:this.basis_.isWebTransportSupported},CR.uploadEvent({log:"trtcstats-"+(0,I.default)(p),userId:this.userId_}),this.log_.info("TrtcStats-"+(0,I.default)(p)),CR.uploadEvent({log:"trtcadvancedstats-"+(0,I.default)(h),userId:this.userId_});case 26:case"end":return e.stop()}},e,this,[[0,7],[9,16]])})),function(){return O.apply(this,arguments)})},{key:"doJoin",value:function(e){var t=this;return new W.default(function(e,n){t.log_.info("Join() => joining room: ".concat(t.roomId_," useStringRoomId: ").concat(t.useStringRoomId_," mode: ").concat(t.mode_," role: ").concat(t.role_));var r={roomId:String(t.roomId_),useStringRoomId:t.useStringRoomId_,privateMapKey:t.privateMapKey_,trtcRole:t.role_===zS?20:21,trtcScene:t.mode_===YS?2:1,sdpSemantics:t.sdpSemantics_,version:FI(t.version_),ua:navigator&&navigator.userAgent||"",autoSubscribe:t.autoSubscribe_,terminalType:dE?4:lE?2:aE?3:FE?12:DE?5:qE?13:1,netType:FC[lt()],bussinessInfo:t.bussinessInfo_,receiveMix:!0};if(t.publishCDNManager_){var i=t.publishCDNManager_.handleCDNConfigForJoinData(t.bussinessInfo_),o=i.bussinessInfo,a=i.pushUserCdnInfo;(0,L.default)(r,{bussinessInfo:o,pushUserCdnInfo:a})}t.log_.debug("join room signal data: ".concat((0,I.default)(r))),t.joinTimeout_=setTimeout(function(){t.log_.error("join room timeout observed"),n(new _R({code:bR.JOIN_ROOM_FAILED,message:st({key:"JOIN_ROOM_TIMEOUT"})}))},5e3),BI.emit(2,{client:t}),t.signalChannel_.once(5,function(e){t.clearJoinTimeout(),BI.emit(29,{client:t,error:e}),n(e)}),t.signalChannel_.send("join",r),t.signalChannel_.once(mR.JOIN_ROOM_RESULT,function(r){t.clearJoinTimeout();var i=r.data,o=i.code,a=i.message,s=i.data;t.onPublishedUserList({data:{userList:s.publishers}}),BI.emit(3,{client:t,code:o}),0===o?(t.isJoined_=!0,t.log_.info("Join room success, start heartbeat"),t.startHeartbeat(),t.badCaseDetector_&&t.badCaseDetector_.start(),t.syncUserList(),t.startSyncUserListInterval(),e()):(t.log_.error("Join room failed result: "+o+" error: "+a),n(new _R({code:bR.JOIN_ROOM_FAILED,extraCode:o,message:st({key:AT,data:{error:a,code:o}})})))})})}},{key:"reJoin",value:(R=a(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isJoined_){e.next=3;break}return this.log_.warn("reJoin abort"),e.abrupt("return");case 3:return this.isJoined_=!1,e.prev=4,this.log_.warn("reJoin pending: ".concat(this.joinOptions_.roomId)),this.subscriptionManager_&&this.subscriptionManager_.markAllStream(),this.signalChannel_.close(),e.next=10,this.signalChannel_.connect();case 10:return e.next=12,this.doJoin(t(t({},this.joinOptions_),{},{role:this.role_,privateMapKey:this.privateMapKey_}));case 12:this.log_.warn("reJoin success"),CR.logSuccessEvent({userId:this.userId_,eventType:"rejoin"}),this.checkConnectionsToReconnect(),this.uplinkConnection_&&!this.uplinkConnection_.getIsReconnecting()&&this.uplinkConnection_.startReconnection(),this.mixTranscodeManager_&&this.mixTranscodeManager_.reStartMixTranscode(),e.next=25;break;case 19:e.prev=19,e.t0=e.catch(4),this.log_.warn("reJoin fail "+e.t0),this.reset(),CR.logFailedEvent({userId:this.userId_,eventType:"rejoin",error:e.t0}),this.emitter_.emit(PO.ERROR,new _R({code:bR.JOIN_ROOM_FAILED,message:st({key:"REJOIN_ROOM_FAILED",data:{roomId:this.joinOptions_.roomId}})}));case 25:case"end":return e.stop()}},e,this,[[4,19]])})),function(){return R.apply(this,arguments)})},{key:"leave",value:(A=a(n().mark(function e(){var t;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return BI.emit(20,{client:this}),wR(this.userId_,{eventId:32789,eventDesc:"leaving room",timestamp:Db(),userId:this.userId_,tinyId:this.tinyId_}),e.prev=2,e.next=5,this.doHeartbeat();case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:this.doLeave(),BI.emit(YI,{client:this}),CR.logSuccessEvent({userId:this.userId_,eventType:"leave"}),t=Math.floor((pt()-this.joinedTimestamp_)/1e3),CR.logSuccessEvent({userId:this.userId_,eventType:"delta-leave",delta:t});case 14:case"end":return e.stop()}},e,this,[[2,7]])})),function(){return A.apply(this,arguments)})},{key:"doLeave",value:function(){this.isJoined_&&(BI.emit(21,{client:this}),this.log_.info("leave() => leaving room"),this.signalChannel_.send("leave"),this.reset())}},{key:"clearNetworkQuality",value:function(){this.networkQuality_&&(this.networkQuality_.stop(),this.networkQuality_=null)}},{key:"closeConnections",value:function(){var e=this;this.connections_.forEach(function(t){e.closeDownLink(t.getTinyId())})}},{key:"clearJoinTimeout",value:function(){clearTimeout(this.joinTimeout_),this.joinTimeout_=-1}},{key:"destroy",value:function(){var e,t,n;if(this.isJoined_)throw this.log_.warn(WT.INVALID_DESTROY),new _R({code:bR.INVALID_OPERATION,message:st({key:"INVALID_DESTROY"})});this.isDestroyed_||(this.log_.info("destroy client"),this.joinReject_&&(this.joinReject_(new _R({code:bR.INVALID_OPERATION,message:st({key:DT,data:{funName:"join"}})})),this.clearJoinTimeout(),this.reset()),this.off("*"),null===(e=this.callDurationCalculator_)||void 0===e||e.destroy(),null===(t=this.keyPointManager_)||void 0===t||t.destroy(),null===(n=this.deviceDetector_)||void 0===n||n.destroy(),this.callDurationCalculator_=null,this.keyPointManager_=null,this.deviceDetector_=null,this.badCaseDetector_=null,this.publishCDNManager_=null,this.isDestroyed_=!0,BI.emit(GI,{client:this}))}},{key:"reset",value:function(){this.isJoined_=!1,this.keyPointManager_&&this.keyPointManager_.prepareReport(),this.mixTranscodeManager_&&(this.mixTranscodeManager_.reset(),this.mixTranscodeManager_=null),this.publishCDNManager_&&this.publishCDNManager_.reset(),this.userMap_.clear(),this.stopSyncUserListInterval(),this.stopHeartbeat(),this.closeConnections(),this.mutedStates_.clear(),this.clearNetworkQuality(),this.badCaseDetector_&&this.callDurationCalculator_&&this.uploadAllCallStats(),this.closeUplink(),this.signalChannel_&&(this.log_.info("destroying SignalChannel"),this.signalChannel_.close(),this.signalChannel_=null),this.stats_.reset()}},{key:"startSyncUserListInterval",value:function(){-1===this.syncUserListInterval_&&(this.syncUserListInterval_=gO.run(lT,this.syncUserList.bind(this)))}},{key:"stopSyncUserListInterval",value:function(){gO.clearTask(this.syncUserListInterval_),this.syncUserListInterval_=-1}},{key:"syncUserList",value:(E=a(n().mark(function e(){var t,r=this;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getUserList();case 3:t=e.sent,0!==this.userMap_.size&&this.userMap_.forEach(function(e){t.findIndex(function(t){return t.userId===e.userId})<0&&(r.log_.info("peer leave detected: ".concat(e.userId)),r.cleanUser({userId:e.userId,tinyId:e.tinyId}))}),t.forEach(function(e){var t=e.userId;r.userMap_.has(t)||t===r.userId_||(r.userMap_.set(t,e),r.emitter_.emit(PO.PEER_JOIN,{userId:t}))}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.log_.warn("sync user list failed: "+e.t0);case 11:case"end":return e.stop()}},e,this,[[0,8]])})),function(){return E.apply(this,arguments)})},{key:"getUserList",value:function(){return this.signalChannel_?this.signalChannel_.sendWaitForResponse({command:"get_user_list",responseCommand:mR.USER_LIST_RES,enableLog:!1,timeout:2e3}).then(function(e){var t=e.data,n=t.code,r=t.message;if(0===n)return(t.data&&t.data.userList||[]).map(function(e){var t=e.userId,n=e.srcTinyId,r=e.role;return new JV({userId:t,tinyId:n,role:r})});throw st({key:YT,data:{signalResponse:mR.USER_LIST_RES,code:n,message:r}})}):[]}},{key:"publish",value:(T=a(n().mark(function e(t){var r,i,o,a,s,l,c,u,d=this,f=arguments;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:{isAuxiliary:!1},t.setPublishState(0),this.isPublishing_=!0,i=pt(),BI.emit(27,{client:this,stream:t}),o=r.isAuxiliary,a=o?bS:OS,s=t.getScreen(),this.log_.info("publish() => publishing ".concat(s?gS+" ":"").concat(a," stream ").concat(t.getId())),l=this.uplinkConnection_,e.prev=10,l||((l=new Wj({userId:this.userId_,tinyId:this.tinyId_,client:this,isUplink:!0,signalChannel:this.signalChannel_,enableSEI:this.enableSEI_})).initialize(),l.on(LO.ERROR,function(e){var t=e.getCode();t!==bR.ICE_TRANSPORT_ERROR&&(t===bR.UPLINK_RECONNECTION_FAILED&&d.closeUplink(),d.emitter_.emit(PO.ERROR,e))})),t.setConnection(l),e.next=15,l.publish(t,o);case 15:this.log_.info("local ".concat(s?gS+" ":"").concat(a," stream is published")),this.isPublishing_=!1,o?this.localAuxStream_=t:(this.localStream_=t,this.deviceDetector_&&this.deviceDetector_.setLocalStream(this.localStream_),this.localStream_.getBeautyStatus()&&this.log_.info("beauty stream is published successfully")),t.setPublishState(1),t.setClient(this,o),this.uplinkConnection_=l,c=pt(),u=c-i,CR.logSuccessEvent({userId:this.userId_,eventType:aC}),CR.logSuccessEvent({userId:this.userId_,eventType:"delta-publish",delta:u}),t.hasAudio()&&wR(this.userId_,{eventId:32769,eventDesc:"publish audio track",timestamp:Db(),userId:this.userId_,tinyId:this.tinyId_}),t.hasVideo()&&wR(this.userId_,{eventId:32768,eventDesc:"publish video track",timestamp:Db(),userId:this.userId_,tinyId:this.tinyId_}),this.networkQuality_&&this.networkQuality_.setUplinkConnection(this.uplinkConnection_),BI.emit(120,{localStream:t,isAuxiliary:o,client:this}),this.notPublishWithoutH264Supported_=!1,t.isAIDenoiser&&mj.handleFunctionState({fnName:"AI_DENOISER"}),e.next=42;break;case 33:throw e.prev=33,e.t0=e.catch(10),e.t0 instanceof _R&&e.t0.getCode()===bR.NOT_SUPPORTED_H264&&(this.notPublishWithoutH264Supported_=!0),t.setPublishState(-1),l.close(),this.log_.error("failed to publish stream "+e.t0),this.isPublishing_=!1,CR.logFailedEvent({userId:this.userId_,eventType:aC,error:e.t0}),e.t0;case 42:case"end":return e.stop()}},e,this,[[10,33]])})),function(e){return T.apply(this,arguments)})},{key:"unpublish",value:(C=a(n().mark(function e(t){var r,i;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.uplinkConnection_){e.next=2;break}return e.abrupt("return");case 2:return r=t===this.localAuxStream_,i=t.getScreen(),this.log_.info("unpublish() => unpublishing local ".concat(i?gS+" ":"").concat(r?bS:OS," stream")),e.prev=5,e.next=8,this.uplinkConnection_.unpublish(t);case 8:t.setClient(null),t.setConnection(null),r?this.localAuxStream_=null:(this.localStream_=null,t.hasAudio()&&wR(this.userId_,{eventId:32771,eventDesc:"unpublish audio track",timestamp:Db(),userId:this.userId_,tinyId:this.tinyId_}),t.hasVideo()&&wR(this.userId_,{eventId:32770,eventDesc:"unpublish video track",timestamp:Db(),userId:this.userId_,tinyId:this.tinyId_})),this.localStream_||this.localAuxStream_||this.closeUplink(),CR.logSuccessEvent({userId:this.userId_,eventType:sC}),e.next=19;break;case 15:throw e.prev=15,e.t0=e.catch(5),CR.logFailedEvent({userId:this.userId_,eventType:sC,error:e.t0}),e.t0;case 19:case"end":return e.stop()}},e,this,[[5,15]])})),function(e){return C.apply(this,arguments)})},{key:"closeUplink",value:function(){this.uplinkConnection_&&(this.uplinkConnection_.close(),this.uplinkConnection_=null,this.networkQuality_&&this.networkQuality_.setUplinkConnection(null),this.localStream_&&(this.localStream_.setClient(null),this.localStream_.setConnection(null),this.localStream_=null),this.localAuxStream_&&(this.localAuxStream_.setClient(null),this.localAuxStream_.setConnection(null),this.localAuxStream_=null),this.deviceDetector_&&this.deviceDetector_.setLocalStream(null))}},{key:"closeDownLink",value:function(e){var t=this.connections_.get(e);t&&(t.getIsReconnecting()&&t.stopReconnection(),this.subscriptionManager_&&this.subscriptionManager_.delete(t.getUserId()),t.close(),this.connections_.delete(e),this.mutedStates_.delete(e))}},{key:"subscribe",value:(S=a(n().mark(function e(t,r){var i,o,a;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.log_.info("subscribe() => subscribe to [".concat(t.getUserId(),"] ").concat(t.getType()," stream with options: ").concat((0,I.default)(r))),SI(r)&&(r={audio:!0,video:!0}),SI(r.audio)&&(r.audio=!0),SI(r.smallVideo)?SI(r.video)&&(r.video=!0):r.smallVideo?SI(r.video)?(r.video=!1,r.smallVideo=!0):r.video&&(r.video=!0,delete r.smallVideo,this.log_.warn("options.video and options.smallVideo can't be both true")):SI(r.video)&&(r.video=!0,delete r.smallVideo),r.video&&this.changeBigSmallRecords_.delete(t.getUserId()),i=t.getConnection(),r.smallVideo&&(i.getTrackState().smallVideo||(this.setRemoteVideoStreamType(t,"small"),r.video=!0,delete r.smallVideo)),e.prev=7,BI.emit(112,{client:this,stream:t}),e.next=11,i.subscribe(t,r);case 11:this.subscriptionManager_&&this.subscriptionManager_.addSubscriptionRecord(t.getUserId(),t,r),this.notSubscribeWithoutH264Supported_=!1,CR.logSuccessEvent({userId:this.userId_,eventType:lC}),e.next=24;break;case 16:throw e.prev=16,e.t0=e.catch(7),(o=e.t0 instanceof _R?e.t0.getCode():bR.UNKNOWN)===bR.NOT_SUPPORTED_H264&&(this.notSubscribeWithoutH264Supported_=!0),(a=new _R(o===bR.REMOTE_STREAM_NOT_EXIST?{code:bR.API_CALL_ABORTED,message:st({key:GT,data:{message:e.t0.message,stream:t}})}:{code:o,message:st({key:"SUBSCRIBE_FAILED",data:{message:e.t0.message,stream:t}})})).getCode()===bR.API_CALL_ABORTED?this.log_.warn(a):this.log_.error(a),CR.logFailedEvent({userId:this.userId_,eventType:lC,error:a}),a;case 24:case"end":return e.stop()}},e,this,[[7,16]])})),function(e,t){return S.apply(this,arguments)})},{key:"unsubscribe",value:(k=a(n().mark(function e(t){var r;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.log_.info("unsubscribe() => unsubscribe to [".concat(t.getUserId(),"] ").concat(t.getType()," stream")),e.prev=1,r=t.getConnection(),e.next=5,r.unsubscribe(t);case 5:this.subscriptionManager_&&this.subscriptionManager_.addUnsubscriptionRecord(t.getUserId(),t),BI.emit(JI,{client:this,stream:t}),CR.logSuccessEvent({userId:this.userId_,eventType:cC}),e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(1),CR.logFailedEvent({userId:this.userId_,eventType:cC,error:e.t0}),e.t0;case 14:case"end":return e.stop()}},e,this,[[1,10]])})),function(e){return k.apply(this,arguments)})},{key:"switchRole",value:(x=a(n().mark(function e(t){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.role_!==t){e.next=2;break}return e.abrupt("return");case 2:return t===GS&&this.uplinkConnection_&&this.closeUplink(),this.log_.info("switchRole() => switch role to: "+t),e.next=6,this.doSwitchRole(t);case 6:case"end":return e.stop()}},e,this)})),function(e){return x.apply(this,arguments)})},{key:"doSwitchRole",value:function(e){var t,n,r=this,i={command:"change_role",data:{role:e===zS?20:21,privateMapKey:this.privateMapKey_},responseCommand:mR.SWITCH_ROLE_RES,retries:(null===(t=this.schedule_.config)||void 0===t||null===(n=t.retries)||void 0===n?void 0:n.switchRole)||1};return this.log_.info("switchRole signal data: "+(0,I.default)(i.data)),this.signalChannel_.sendWaitForResponseWithRetry(i).then(function(t){var n=t.data,i=n.code,o=n.message;if(0!==i)throw new _R({code:bR.SWITCH_ROLE_FAILED,message:st({key:"SWITCH_ROLE_FAILED",data:{errMsg:o,errCode:i}})});r.role_=e}).catch(function(e){throw e instanceof _R&&e.getCode()===bR.API_CALL_TIMEOUT&&(e=new _R({code:bR.SWITCH_ROLE_FAILED,message:st({key:"SWITCH_ROLE_TIMEOUT"})})),r.log_.error(e),e})}},{key:"on",value:function(e,t,n){this.emitter_.on(e,t,n)}},{key:"off",value:function(e,t,n){"*"===e?this.emitter_.removeAllListeners():this.emitter_.off(e,t,n)}},{key:"getRemoteMutedState",value:function(){var e=this,n=[];return this.mutedStates_.forEach(function(r,i,o){var a=e.connections_.get(i);a&&n.push(t({userId:a.getUserId()},r))}),n}},{key:"getTransportStats",value:(w=a(n().mark(function e(){var t,r,i,o,a,s,l;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={rtt:0,downlinksRTT:{}},!this.uplinkConnection_){e.next=6;break}return e.next=4,this.stats_.getSenderStats(this.uplinkConnection_);case 4:r=e.sent,t.rtt=r.rtt;case 6:i=V(this.connections_),e.prev=7,i.s();case 9:if((o=i.n()).done){e.next=17;break}return(a=$(o.value,2))[0],s=a[1],e.next=13,this.stats_.getReceiverStats(s);case 13:l=e.sent,t.downlinksRTT[l.userId]=l.rtt;case 15:e.next=9;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(7),i.e(e.t0);case 22:return e.prev=22,i.f(),e.finish(22);case 25:return e.abrupt("return",t);case 26:case"end":return e.stop()}},e,this,[[7,19,22,25]])})),function(){return w.apply(this,arguments)})},{key:"getLocalAudioStats",value:(y=a(n().mark(function e(){var t,r;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((t={})[this.userId_]={bytesSent:0,packetsSent:0},!this.uplinkConnection_){e.next=7;break}return e.next=5,this.stats_.getSenderStats(this.uplinkConnection_);case 5:r=e.sent,t[this.userId_]={bytesSent:r.audio.bytesSent,packetsSent:r.audio.packetsSent};case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}},e,this)})),function(){return y.apply(this,arguments)})},{key:"getLocalVideoStats",value:(_=a(n().mark(function e(){var t,r;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((t={})[this.userId_]={bytesSent:0,packetsSent:0,framesEncoded:0,framesSent:0,frameWidth:0,frameHeight:0},!this.uplinkConnection_){e.next=7;break}return e.next=5,this.stats_.getSenderStats(this.uplinkConnection_);case 5:r=e.sent,t[this.userId_]={bytesSent:r.video.bytesSent,packetsSent:r.video.packetsSent,framesEncoded:r.video.framesEncoded,framesSent:r.video.framesSent,frameWidth:r.video.frameWidth,frameHeight:r.video.frameHeight};case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}},e,this)})),function(){return _.apply(this,arguments)})},{key:"getRemoteAudioStats",value:(b=a(n().mark(function e(){var t,r,i,o,a,s,l,c;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t={},r=V(this.connections_),e.prev=2,r.s();case 4:if((i=r.n()).done){e.next=13;break}return(o=$(i.value,2))[0],a=o[1],s=a.getDelay(),l=s.audioDelay,e.next=9,this.stats_.getReceiverStats(a);case 9:(c=e.sent).hasAudio&&(t[c.userId]={bytesReceived:c.audio.bytesReceived,packetsReceived:c.audio.packetsReceived,packetsLost:c.audio.packetsLost,end2EndDelay:l});case 11:e.next=4;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",t);case 22:case"end":return e.stop()}},e,this,[[2,15,18,21]])})),function(){return b.apply(this,arguments)})},{key:"getRemoteVideoStats",value:(v=a(n().mark(function e(){var t,r,i,o,a,s,l,c,u,d=arguments;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=d.length>0&&void 0!==d[0]?d[0]:XS,r={},i=V(this.connections_),e.prev=3,i.s();case 5:if((o=i.n()).done){e.next=15;break}return(a=$(o.value,2))[0],s=a[1],e.next=9,this.stats_.getReceiverStats(s);case 9:l=e.sent,c=s.getDelay(),u=c.videoDelay,t===XS&&l.hasVideo&&(r[l.userId]={bytesReceived:l.video.bytesReceived,packetsReceived:l.video.packetsReceived,packetsLost:l.video.packetsLost,framesDecoded:l.video.framesDecoded,frameWidth:l.video.frameWidth,frameHeight:l.video.frameHeight,end2EndDelay:u}),t===ZS&&l.hasAuxiliary&&(r[l.userId]={bytesReceived:l.auxiliary.bytesReceived,packetsReceived:l.auxiliary.packetsReceived,packetsLost:l.auxiliary.packetsLost,framesDecoded:l.auxiliary.framesDecoded,frameWidth:l.auxiliary.frameWidth,frameHeight:l.auxiliary.frameHeight,end2EndDelay:u});case 13:e.next=5;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),i.e(e.t0);case 20:return e.prev=20,i.f(),e.finish(20);case 23:return e.abrupt("return",r);case 24:case"end":return e.stop()}},e,this,[[3,17,20,23]])})),function(){return v.apply(this,arguments)})},{key:"getSdpSemantics",value:function(){return this.sdpSemantics_}},{key:"getIceServers",value:function(){return 0===this.turnServers_.length&&this.schedule_.iceServers?this.schedule_.iceServers:this.turnServers_}},{key:"getConnections",value:function(){return this.connections_}},{key:"getMutedStates",value:function(){return this.mutedStates_}},{key:"startHeartbeat",value:function(){-1===this.heartbeat_&&(this.log_.info("startHeartbeat..."),this.heartbeat_=gO.run(lT,this.doHeartbeat.bind(this),{delay:2e3}))}},{key:"stopHeartbeat",value:function(){-1!==this.heartbeat_&&(this.log_.info("stopHeartbeat"),gO.clearTask(this.heartbeat_),this.heartbeat_=-1,this.lastHeartBeatTime_=-1)}},{key:"doHeartbeat",value:(m=a(n().mark(function e(){var r,i,o,a,s,l;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.badCaseDetector_.getMonitorFreeze(),e.next=3,this.stats_.getStatsReport({uplinkConnection:this.uplinkConnection_,downlinkConnections:this.connections_,freezeMap:i});case 3:if(o=e.sent,BI.emit(23,{client:this,stats:o}),null===(r=this.badCaseDetector_)||void 0===r||r.resetMonitor(),this.signalChannel_){e.next=8;break}return e.abrupt("return");case 8:a=this.signalChannel_.isConnected()?xR(this.userId_):[],s=t(t({str_sdk_version:this.version_,uint64_datetime:(new Date).getTime(),msg_user_info:{str_identifier:this.userId_,uint64_tinyid:this.tinyId_},msg_device_info:{uint32_terminal_type:15,str_device_name:navigator.platform,str_os_version:"",uint32_net_type:FC[this.networkType_]}},o),{},{msg_event_msg:a}),this.signalChannel_.send("quality_report",s),l=Date.now(),this.lastHeartBeatTime_>0&&l-this.lastHeartBeatTime_>1e4&&this.log_.warn("heartbeat took ".concat(l-this.lastHeartBeatTime_)),this.lastHeartBeatTime_=l,!this.isRelayChanged_&&this.isRelayMaybeFailed()&&(this.reJoin(),this.isRelayChanged_=!0);case 15:case"end":return e.stop()}},e,this)})),function(){return m.apply(this,arguments)})},{key:"onRemoteStreamAdded",value:function(e){var t=e.content,n=t.userId,r=t.tinyId,i=t.audio,o=t.bigVideo,a=t.auxVideo,s=t.smallVideo;if(null!==n){this.userMap_.has(n)||(this.userMap_.set(n,new JV({userId:n,tinyId:r,role:zS})),this.emitter_.emit(PO.PEER_JOIN,{userId:n}));var l=this.connections_.get(r);if(l){if(l.getIsReconnecting())return;this.log_.warn("duplicated stream-added observed, rebuild the connection"),l.close(),this.connections_.delete(r)}var c={audio:i,video:o,auxiliary:a,smallVideo:s};this.log_.info("remote peer [".concat(n,"] published stream. trackState: ").concat((0,I.default)(c))),this.createDownlinkConnection({userId:n,tinyId:r,trackState:c})}else this.log_.warn("received null userId on stream added")}},{key:"createDownlinkConnection",value:function(e){var t=this,n=e.userId,r=e.tinyId,i=e.trackState,o=new KV({userId:n,tinyId:r,client:this,isUplink:!1,signalChannel:this.signalChannel_,autoSubscribe:this.autoSubscribe_,trackState:i,enableSEI:this.enableSEI_});this.connections_.set(r,o),this.installDownlinkEvents(o,n,r),this.autoSubscribe_?(o.initialize(),o.connect().catch(function(){!o.getMainStream()&&o.hasMainStream()&&t.initRemoteStream({type:XS,userId:n,downlinkConnection:o}),!o.getAuxStream()&&o.hasAuxStream()&&t.initRemoteStream({type:ZS,userId:n,downlinkConnection:o})})):(o.hasMainStream()&&this.initRemoteStream({type:XS,userId:n,downlinkConnection:o}),o.hasAuxStream()&&this.initRemoteStream({type:ZS,userId:n,downlinkConnection:o}))}},{key:"initRemoteStream",value:function(e){var t=e.type,n=e.userId,r=e.downlinkConnection,i=new Lj({type:t,userId:n,client:this});i.setConnection(r),r.setRemoteStream(t===XS?WS:KS,i),i.setIsStreamAddedEventEmitted(!0),BI.emit(111,{client:this,stream:i}),this.emitter_.emit(PO.STREAM_ADDED,{stream:i})}},{key:"installDownlinkEvents",value:function(e,t,n){var r=this;e.on(LO.SEI_MESSAGE,function(e){r.emitter_.emit(PO.SEI_MESSAGE,e)}),e.on(LO.STREAM_ADDED,function(e){e.stream.setIsStreamAddedEventEmitted(!0),BI.emit(111,{client:r,stream:e.stream}),r.emitter_.emit(PO.STREAM_ADDED,{stream:e.stream})}),e.on(LO.STREAM_REMOVED,function(e){r.changeBigSmallRecords_.delete(e.stream.getUserId()),e.stream.stop(),e.stream.setIsStreamAddedEventEmitted(!1),r.subscriptionManager_&&r.subscriptionManager_.deleteAutoRecoveryFlag(e.stream.getUserId(),e.stream.getType()),BI.emit(116,{client:r,stream:e.stream}),r.emitter_.emit(PO.STREAM_REMOVED,{stream:e.stream})}),e.on(LO.STREAM_UPDATED,function(t){BI.emit(115,{client:r,stream:t.stream});var n=e.getMixUserList();n&&(t.mixUserList=n),r.emitter_.emit(PO.STREAM_UPDATED,t)}),e.on(LO.STREAM_SUBSCRIBED,function(e){BI.emit(ZI,{client:r,stream:e.stream}),r.emitter_.emit(PO.STREAM_SUBSCRIBED,{stream:e.stream})}),e.on(LO.ERROR,function(e){var t=e.getCode();t!==bR.ICE_TRANSPORT_ERROR&&(t===bR.DOWNLINK_RECONNECTION_FAILED&&r.closeDownLink(n),r.emitter_.emit(PO.ERROR,e))})}},{key:"onPeerJoin",value:function(e){var t=e.data.data,n=t.srcTinyId,r=t.userId,i=t.role;this.userMap_.has(r)||(this.userMap_.set(r,new JV({userId:r,tinyId:n,role:i})),this.emitter_.emit(PO.PEER_JOIN,{userId:r}))}},{key:"onPeerLeave",value:function(e){var t=e.data.data,n=t.srcTinyId,r=t.userId,i=t.reason,o=void 0===i?0:i;this.log_.info("peer leave [".concat(r,"]: ").concat(sT[o])),this.cleanUser({userId:r,tinyId:n})}},{key:"cleanUser",value:function(e){var t=e.userId,n=e.tinyId;this.userMap_.delete(t),this.closeDownLink(n),this.emitter_.emit(PO.PEER_LEAVE,{userId:t})}},{key:"onPublishedUserList",value:function(e){var t=this;try{var n=D(e.data.userList);e.data.mixRobotList&&n.push.apply(n,D(e.data.mixRobotList));var r=n.map(function(e){return e.userId});this.connections_.forEach(function(e){var n=e.getUserId(),i=e.getTinyId();r.findIndex(function(e){return e===n})<0&&(t.log_.info("peer unpublished detected [".concat(n,"]")),t.closeDownLink(i))}),n.forEach(function(e){var n=e.userId,r=e.srcTinyId,i=e.flag,o=e.mixUserList;if(n!==t.userId_){var a=!!(1&i),s=!!(8&i),l=!!(4&i),c=!!(2&i),u=t.connections_.get(r);if((c||a)&&t.checkSubscribeBigSmallVideo(u,c),u){var d=u.getTrackState(),f=d.audio,p=d.video,h=d.auxiliary,g=d.smallVideo;AI(o)&&u.setMixUserList(o),!p&&a&&BI.emit(XI,{client:t,tinyId:r,userId:n,action:DC.ADD,kind:hS}),!f&&s&&BI.emit(XI,{client:t,tinyId:r,userId:n,action:DC.ADD,kind:pS}),!h&&l&&BI.emit(XI,{client:t,tinyId:r,userId:n,action:DC.ADD,kind:bS}),!g&&c&&BI.emit(XI,{client:t,tinyId:r,userId:n,action:DC.ADD,kind:yS}),p&&!a&&BI.emit(XI,{client:t,tinyId:r,userId:n,action:DC.REMOVE,kind:hS}),f&&!s&&BI.emit(XI,{client:t,tinyId:r,userId:n,action:DC.REMOVE,kind:pS}),h&&!l&&BI.emit(XI,{client:t,tinyId:r,userId:n,action:DC.REMOVE,kind:bS}),g&&!c&&BI.emit(XI,{client:t,tinyId:r,userId:n,action:DC.REMOVE,kind:yS})}else t.log_.info("peer published detected [".concat(n,"]")),t.onRemoteStreamAdded({content:{audio:s,bigVideo:a,auxVideo:l,smallVideo:c,userId:n,tinyId:r}})}})}catch(e){}}},{key:"onUpdateRemoteMuteStat",value:function(e){var t=this,n=e.data;(n&&n.userList||[]).forEach(function(e){var n=e.srcTinyId,r=e.userId;if(0!==n&&n!==t.tinyId_){var i=t.connections_.get(n);if(i){var o=i.getMainStream();if(o&&o.getIsStreamAddedEventEmitted()){var a=!!(1&e.flag),s=!!(8&e.flag),l=!!(2&e.flag),c=!!(64&e.flag),u=!!(16&e.flag),d=t.mutedStates_.get(n);if(void 0===d)return t.mutedStates_.set(n,{hasAudio:s,hasVideo:a,hasSmall:l,audioMuted:c,videoMuted:u}),a?u?t.emitter_.emit(PO.MUTE_VIDEO,{userId:r}):t.emitter_.emit(PO.UNMUTE_VIDEO,{userId:r}):t.emitter_.emit(PO.MUTE_VIDEO,{userId:r}),void(s?c?t.emitter_.emit(PO.MUTE_AUDIO,{userId:r}):t.emitter_.emit(PO.UNMUTE_AUDIO,{userId:r}):t.emitter_.emit(PO.MUTE_AUDIO,{userId:r}));var f=!d.audioMuted&&d.hasAudio,p=!c&&s,h=!d.videoMuted&&d.hasVideo,g=!u&&a;t.mutedStates_.set(n,{hasAudio:s,hasVideo:a,hasSmall:l,audioMuted:c,videoMuted:u}),f!==p&&(p?t.emitter_.emit(PO.UNMUTE_AUDIO,{userId:r}):t.emitter_.emit(PO.MUTE_AUDIO,{userId:r})),h!==g&&(g?t.emitter_.emit(PO.UNMUTE_VIDEO,{userId:r}):t.emitter_.emit(PO.MUTE_VIDEO,{userId:r}))}}else t.mutedStates_.delete(n)}})}},{key:"getEnv",value:function(){return this.env_}},{key:"getSubscriptionManager",value:function(){return this.subscriptionManager_}},{key:"startPublishCDNStream",value:(g=a(n().mark(function e(){var t,r=arguments;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:{},this.log_.info("startPublishCDNStream with params: ".concat((0,I.default)(t),"; isJoined: ").concat(this.isJoined_,"; hasMainStream: ").concat(!!this.localStream_,"; hasAuxStream: ").concat(!!this.localAuxStream_,";")),t.streamType=t.streamType||OS,t.streamType===bS&&(t.streamType=_S),t.streamId=t.streamId||"",!this.isJoined_){e.next=10;break}if(t.streamType!==OS||this.localStream_){e.next=8;break}throw new _R({code:bR.INVALID_OPERATION,message:st({key:OT})});case 8:if(t.streamType!==_S||this.localAuxStream_){e.next=10;break}throw new _R({code:bR.INVALID_OPERATION,message:st({key:OT})});case 10:return e.next=12,this.publishCDNManager_.startPublishTencentCDN(t);case 12:if(!(t.appId&&t.bizId&&t.url)){e.next=15;break}return e.next=15,this.publishCDNManager_.startPublishGivenCDN(t);case 15:case"end":return e.stop()}},e,this)})),function(){return g.apply(this,arguments)})},{key:"stopPublishCDNStream",value:(p=a(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.publishCDNManager_.getIsPublishingTencentCDN()){e.next=2;break}throw new _R({code:bR.INVALID_OPERATION,message:st({key:"INVALID_OPERATION_STOP_PUBLISH_CDN"})});case 2:return this.log_.info("stopPublishCDNStream"),e.next=5,this.publishCDNManager_.stopPublishTencentCDN();case 5:if(!this.publishCDNManager_.getIsPublishingGivenCDN()){e.next=8;break}return e.next=8,this.publishCDNManager_.stopPublishGivenCDN();case 8:case"end":return e.stop()}},e,this)})),function(){return p.apply(this,arguments)})},{key:"startMixTranscode",value:(f=a(n().mark(function e(t){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isJoined_&&this.mixTranscodeManager_){e.next=2;break}throw new _R({code:bR.INVALID_OPERATION,message:st({key:"START_MIX_TRANSCODE"})});case 2:return SI(t.mode)&&(t.mode=RC.MANUAL),e.prev=3,this.log_.info("startMixTranscode with config ".concat((0,I.default)(t))),CR.uploadEvent({log:"mix-transcode-mode:".concat(t.mode),userId:this.userId_}),e.next=8,this.mixTranscodeManager_.startMixTranscode(t);case 8:CR.logSuccessEvent({userId:this.userId_,eventType:xC}),e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(3),CR.logFailedEvent({userId:this.userId_,eventType:xC,error:e.t0}),e.t0;case 15:case"end":return e.stop()}},e,this,[[3,11]])})),function(e){return f.apply(this,arguments)})},{key:"stopMixTranscode",value:(u=a(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isJoined_&&this.mixTranscodeManager_){e.next=2;break}throw new _R({code:bR.INVALID_OPERATION,message:st({key:"STOP_MIX_TRANSCODE"})});case 2:return e.prev=2,e.next=5,this.mixTranscodeManager_.stopMixTranscode();case 5:CR.logSuccessEvent({userId:this.userId_,eventType:kC}),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(2),CR.logFailedEvent({userId:this.userId_,eventType:kC,error:e.t0}),e.t0;case 12:case"end":return e.stop()}},e,this,[[2,8]])})),function(){return u.apply(this,arguments)})},{key:"getSystemResult",value:function(){return this.checkSystemResult_}},{key:"enableAudioVolumeEvaluation",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!TI(t))throw new _R({code:bR.INVALID_PARAMETER,message:st({key:"INVALID_AUDIO_VOLUME"})});if(this.log_.info("enableAudioVolumeEvaluation with interval: "+t),t<=0)return this.enableAudioVolumeEvaluation_=!1,gO.clearTask(this.audioVolumeIntervalId_),void(this.audioVolumeIntervalId_=null);t=Math.floor(Math.max(t,16)),BI.emit(KI,{interval:t}),this.audioVolumeIntervalId_&&(gO.clearTask(this.audioVolumeIntervalId_),this.audioVolumeIntervalId_=null),this.enableAudioVolumeEvaluation_=!0,this.audioVolumeIntervalId_=gO.run(cT,function(){var t=[];if(e.localStream_){var n=Math.floor(100*e.localStream_.getAudioLevel());t.push({userId:e.userId_,audioVolume:n,stream:e.localStream_})}e.connections_.forEach(function(e){var n=e.getSubscribedMainStream();if(n){var r=Math.floor(100*n.getAudioLevel());t.push({userId:e.getUserId(),audioVolume:r,stream:n})}}),e.emitter_.emit(PO.AUDIO_VOLUME,{result:t})},{fps:1e3/t,backgroundTask:n})}},{key:"callExperimentalAPI",value:function(e,n){return WH.call(e,t({client:this},n))}},{key:"setProperty",value:function(e,t){var n="".concat(e,"_");SI(this[n])||(this[n]=t)}},{key:"uploadAllCallStats",value:function(){var e=this;this.callDurationCalculator_.getDurationMap().forEach(function(t,n){var r={userId:t.userId,type:t.type,duration:e.callDurationCalculator_.getDuration(n,hS),dataFreeze:e.badCaseDetector_.getDataFreezeDuration(n).dataFreeze,renderFreeze:e.badCaseDetector_.getRenderFreezeDuration(n).renderFreeze};CR.uploadEvent({log:"callStats-"+(0,I.default)(r),userId:e.userId_})}),this.badCaseDetector_.stop(),this.callDurationCalculator_.reset()}},{key:"enableSmallStream",value:(c=a(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPublished()&&!this.isPublishing_){e.next=2;break}throw new _R({code:bR.INVALID_OPERATION,message:st({key:"ENABLE_SMALL_STREAM_PUBLISHED"})});case 2:if(!Dt()){e.next=7;break}this.setIsEnableSmallStream(!0),this.log_.info("SmallStream successfully enabled"),e.next=8;break;case 7:throw new _R({code:bR.INVALID_OPERATION,message:st({key:"NOT_SUPPORTED_SMALL_STREAM"})});case 8:case"end":return e.stop()}},e,this)})),function(){return c.apply(this,arguments)})},{key:"disableSmallStream",value:(l=a(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPublished()&&!this.isPublishing_){e.next=2;break}throw new _R({code:bR.INVALID_OPERATION,message:st({key:"DISABLE_SMALL_STREAM_PUBLISHED"})});case 2:this.setIsEnableSmallStream(!1),this.log_.info("SmallStream successfully disabled");case 4:case"end":return e.stop()}},e,this)})),function(){return l.apply(this,arguments)})},{key:"setSmallStreamProfile",value:function(e){var t=this;e&&e.framerate&&(e.frameRate=e.framerate),e.width*e.height>307200&&(e.width=320,e.height=240,this.log_.info("Small stream resolution is beyond limitation, which is invalid. Reset to 320 * 240")),(0,he.default)(this.smallStreamConfig_).forEach(function(n){e[n]&&(t.smallStreamConfig_[n]=e[n])});var n=this.smallStreamConfig_,r=n.width,i=n.height,o=n.bitrate,a=n.frameRate;if(this.log_.info("setSmallStreamProfile: bitrate=".concat(o,", frameRate=").concat(a,", height=").concat(i,", width=").concat(r)),r<0||i<0||o<0||a<0)throw new _R({code:bR.INVALID_PARAMETER,message:st({key:"INVALID_SMALL_STREAM_PROFILE"})})}},{key:"setRemoteVideoStreamType",value:(o=a(n().mark(function e(t,r){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof Lj){e.next=2;break}throw new _R({code:bR.INVALID_PARAMETER,message:st({key:"INVALID_PARAMETER_REMOTE_STREAM"})});case 2:if(t.getConnection()){e.next=4;break}throw new _R({code:bR.INVALID_OPERATION,message:st({key:RT})});case 4:if(t.getType()!==ZS){e.next=6;break}return e.abrupt("return");case 6:e.t0=r,e.next="big"===e.t0||"small"===e.t0?9:12;break;case 9:return e.next=11,this.changeVideoType(t,r);case 11:case 12:return e.abrupt("break",13);case 13:case"end":return e.stop()}},e,this)})),function(e,t){return o.apply(this,arguments)})},{key:"changeVideoType",value:(i=a(n().mark(function e(t,r){var i,o;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=t.getUserId(),o={stream:t,options:{video:"big"===r,smallVideo:"small"===r},isSubscribing:!1,reSubscribeCount:10},this.changeBigSmallRecords_.set(i,o),this.log_.info("set [".concat(i,"] ").concat(t.getType()," stream video prefer type: ").concat(r));case 5:case"end":return e.stop()}},e,this)})),function(e,t){return i.apply(this,arguments)})},{key:"checkSubscribeBigSmallVideo",value:(r=a(n().mark(function e(t,r){var i,o,a,s,l,c,u,d,f,p,h;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t&&t.isBigStreamSubscribed||null!=t&&t.isSmallStreamSubscribed){e.next=2;break}return e.abrupt("return");case 2:if(i=t.getUserId(),this.changeBigSmallRecords_.has(i)){e.next=5;break}return e.abrupt("return");case 5:if(o=this.changeBigSmallRecords_.get(i),a=t.getSubscribeState(),s=a.video,l=a.smallVideo,c=o.stream,u=o.options,d=o.isSubscribing,f=o.reSubscribeCount,!(u.video&&s||u.smallVideo&&l&&r)){e.next=10;break}return e.abrupt("return");case 10:if(p={video:u.video,smallVideo:u.smallVideo},!(r&&t.isBigStreamSubscribed||t.isSmallStreamSubscribed)){e.next=31;break}if(e.prev=12,!(u&&c&&!d&&f>=1)){e.next=24;break}return o.isSubscribing=!0,o.reSubscribeCount=f-1,h=c.getConnection(),!r&&h.isSmallStreamSubscribed&&(p={video:!0,smallVideo:!1}),p.emitEvent=!1,e.next=21,null==h?void 0:h.subscribe(c,p);case 21:this.log_.info("change [".concat(i,"] to ").concat(p.smallVideo?"small":"big"," video successfully. count ").concat(10-o.reSubscribeCount,".")),o.isSubscribing=!1,o.reSubscribeCount=10;case 24:e.next=31;break;case 26:e.prev=26,e.t0=e.catch(12),this.log_.info("change [".concat(i,"] to ").concat(p.smallVideo?"small":"big"," video failed. count ").concat(10-o.reSubscribeCount,".")),o.isSubscribing=!1,0===f&&this.changeBigSmallRecords_.delete(i);case 31:case"end":return e.stop()}},e,this,[[12,26]])})),function(e,t){return r.apply(this,arguments)})},{key:"setIsEnableSmallStream",value:function(e){this.isEnableSmallStream_=e}},{key:"getIsEnableSmallStream",value:function(){return this.isEnableSmallStream_}},{key:"smallStreamConfig",get:function(){return this.smallStreamConfig_}},{key:"isPublished",value:function(){return!!this.localStream_}},{key:"getUplinkConnection",value:function(){return this.uplinkConnection_}},{key:"getLocalStream",value:function(){return this.localStream_}},{key:"getMode",value:function(){return this.mode_}},{key:"getBadCaseDetector",value:function(){return this.badCaseDetector_}},{key:"getCallDurationCalculator",value:function(){return this.callDurationCalculator_}},{key:"getIsJoined",value:function(){return this.isJoined_}},{key:"getAllConnections",value:function(){var e=D(this.connections_.values());return this.uplinkConnection_&&e.push(this.uplinkConnection_),e}},{key:"isRelayMaybeFailed",value:function(){if(!this.signalChannel_.isOnline)return!1;var e=this.getAllConnections();if(0===e.length)return!1;for(var t=0;t<e.length;t++)if(e[t].getReconnectionCount()<6)return!1;return!0}},{key:"getUseStringRoomId",value:function(){return this.useStringRoomId_}},{key:"checkConnectionsToReconnect",value:function(){var e=this;this.getAllConnections().forEach(function(t){if(!t.getIsReconnecting()){var n=t.getPeerConnection();n&&n.connectionState===iC&&(e.log_.warn("[".concat(t.getUserId(),"] pc is closed but not reconnect")),t.startReconnection())}})}},{key:"getEnableAutoPlayDialog",value:function(){return this.enableAutoPlayDialog_}},{key:"sendSEIMessage",value:function(e,t){this.uplinkConnection_.sendSEI(e,t)}},{key:"setProxyServer",value:function(e){if(this.log_.info("set proxy server: ".concat((0,I.default)(e))),CI(e)){if(!e.startsWith("wss://"))throw new _R({code:bR.INVALID_PARAMETER,message:st({key:"INVALID_PROXY"})});this.proxy_=e}else if(xI(e)){var t=e.websocketProxy,n=e.loggerProxy,r=e.scheduleProxy,i=e.unifiedProxy;t&&(this.proxy_=t),n&&HS(n),r&&HC(r),i&&(this.unifiedProxy_=i,HS("https://".concat(i)),HC(i))}}},{key:"setTurnServer",value:function(e){this.log_.info("set turn server: "+(0,I.default)(e));var t=[];Array.isArray(e)?e.forEach(function(e){return t.push(ft(e))}):xI(e)&&t.push(ft(e)),this.turnServers_=t}},{key:"get2k4kFlag",value:function(){var e,t;return null===(e=this.schedule_)||void 0===e||null===(t=e.trtcCapability)||void 0===t?void 0:t["2k4k"]}}]),e}(),Y(RH.prototype,"join",[eH,tH],(0,ue.default)(RH.prototype,"join"),RH.prototype),Y(RH.prototype,"leave",[nH],(0,ue.default)(RH.prototype,"leave"),RH.prototype),Y(RH.prototype,"getUserList",[rH],(0,ue.default)(RH.prototype,"getUserList"),RH.prototype),Y(RH.prototype,"publish",[iH,oH,aH],(0,ue.default)(RH.prototype,"publish"),RH.prototype),Y(RH.prototype,"unpublish",[sH,lH],(0,ue.default)(RH.prototype,"unpublish"),RH.prototype),Y(RH.prototype,"subscribe",[cH],(0,ue.default)(RH.prototype,"subscribe"),RH.prototype),Y(RH.prototype,"unsubscribe",[uH],(0,ue.default)(RH.prototype,"unsubscribe"),RH.prototype),Y(RH.prototype,"switchRole",[dH,fH,pH],(0,ue.default)(RH.prototype,"switchRole"),RH.prototype),Y(RH.prototype,"startPublishCDNStream",[hH,gH],(0,ue.default)(RH.prototype,"startPublishCDNStream"),RH.prototype),Y(RH.prototype,"stopPublishCDNStream",[mH],(0,ue.default)(RH.prototype,"stopPublishCDNStream"),RH.prototype),Y(RH.prototype,"startMixTranscode",[vH,bH],(0,ue.default)(RH.prototype,"startMixTranscode"),RH.prototype),Y(RH.prototype,"stopMixTranscode",[_H],(0,ue.default)(RH.prototype,"stopMixTranscode"),RH.prototype),Y(RH.prototype,"enableAudioVolumeEvaluation",[yH],(0,ue.default)(RH.prototype,"enableAudioVolumeEvaluation"),RH.prototype),Y(RH.prototype,"enableSmallStream",[wH],(0,ue.default)(RH.prototype,"enableSmallStream"),RH.prototype),Y(RH.prototype,"disableSmallStream",[xH],(0,ue.default)(RH.prototype,"disableSmallStream"),RH.prototype),Y(RH.prototype,"setSmallStreamProfile",[kH],(0,ue.default)(RH.prototype,"setSmallStreamProfile"),RH.prototype),Y(RH.prototype,"setRemoteVideoStreamType",[SH],(0,ue.default)(RH.prototype,"setRemoteVideoStreamType"),RH.prototype),Y(RH.prototype,"sendSEIMessage",[CH,TH,EH],(0,ue.default)(RH.prototype,"sendSEIMessage"),RH.prototype),Y(RH.prototype,"setProxyServer",[IH],(0,ue.default)(RH.prototype,"setProxyServer"),RH.prototype),Y(RH.prototype,"setTurnServer",[AH],(0,ue.default)(RH.prototype,"setTurnServer"),RH.prototype),RH),XH=0,ZH=0,JH=($H=nn(YC),NH=nn(YC),DH=nn(YC),FH=Zt(nj.TRTC.createClient),qH=nn(YC),UH=Zt(nj.TRTC.createStream),BH=function(){function e(){s(this,e),this.name_=YC,this.VERSION=Rs,this.Logger={loggerManager:aA,LogLevel:oT,setLogLevel:function(e){aA.setLogLevel(e),e<=1&&bI()},enableUploadLog:function(){mj.handleFunctionState({fnName:"TRTC.enableUploadLog"}),aA.enableUploadLog()},disableUploadLog:function(){aA.warn("disableUploadLog"),mj.handleFunctionState({fnName:"TRTC.disableUploadLog"}),aA.disableUploadLog()}}}var r;return d(e,[{key:"checkSystemRequirements",value:(r=a(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,TO();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)})},{key:"isScreenShareSupported",value:function(){return kt()}},{key:"isSmallStreamSupported",value:function(){return Dt()}},{key:"getDevices",value:function(){return Bt()}},{key:"getCameras",value:function(){return function(){return Ft.apply(this,arguments)}()}},{key:"getMicrophones",value:function(){return Vt()}},{key:"getSpeakers",value:function(){return function(){return Yt.apply(this,arguments)}()}},{key:"createClient",value:function(e){sA&&(sA=!1,aA.getLogLevel()!=QH.Logger.LogLevel.NONE&&(console.info("******************************************************************************"),console.info("*   TRTC Web SDK"),console.info("*   API Document: "+"".concat(tT,"index.html")),console.info("*   Changelog: https://cloud.tencent.com/document/product/647/38958"),console.info("*   Report issues: https://github.com/LiteAVSDK/TRTC_Web/issues"),console.info("******************************************************************************")),aA.info("TRTC Web SDK Version: 4.15.10"),aA.info("UserAgent: "+navigator.userAgent),aA.info("URL of current page: "+location.href));var n={version:this.VERSION},r=new KH(t(t(t({},n),e),{},{seq:++XH}));return BI.emit(zI,{client:r}),r}},{key:"createStream",value:function(e){return new zj(t(t({},e),{},{seq:++ZH}))}}]),e}(),Y(BH.prototype,"checkSystemRequirements",[$H],(0,ue.default)(BH.prototype,"checkSystemRequirements"),BH.prototype),Y(BH.prototype,"isScreenShareSupported",[NH],(0,ue.default)(BH.prototype,"isScreenShareSupported"),BH.prototype),Y(BH.prototype,"isSmallStreamSupported",[DH],(0,ue.default)(BH.prototype,"isSmallStreamSupported"),BH.prototype),Y(BH.prototype,"createClient",[FH,qH],(0,ue.default)(BH.prototype,"createClient"),BH.prototype),Y(BH.prototype,"createStream",[UH],(0,ue.default)(BH.prototype,"createStream"),BH.prototype),BH),QH=new JH;return QH})}).call(t,n(15))},function(e,t){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,i=e.indexOf("["),o=e.indexOf("]");-1!=i&&-1!=o&&(e=e.substring(0,i)+e.substring(i,o).replace(/:/g,";")+e.substring(o,e.length));for(var a=n.exec(e||""),s={},l=14;l--;)s[r[l]]=a[l]||"";return-1!=i&&-1!=o&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){(function(t){function n(e){return t.Buffer&&t.Buffer.isBuffer(e)||t.ArrayBuffer&&e instanceof ArrayBuffer}e.exports=n}).call(t,n(15))},function(e,t,n){function r(e,t){if(!(this instanceof r))return new r(e,t);e&&"object"==typeof e&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new f({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new s.Encoder,this.decoder=new s.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}var i=n(332),o=n(210),a=n(87),s=n(146),l=n(211),c=n(212),u=n(55)("socket.io-client:manager"),d=n(209),f=n(348),p=Object.prototype.hasOwnProperty;e.exports=r,r.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)p.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},r.prototype.updateSocketIds=function(){for(var e in this.nsps)p.call(this.nsps,e)&&(this.nsps[e].id=this.engine.id)},a(r.prototype),r.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},r.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},r.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},r.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},r.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},r.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},r.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},r.prototype.open=r.prototype.connect=function(e,t){if(u("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;u("opening %s",this.uri),this.engine=i(this.uri,this.opts);var n=this.engine,r=this;this.readyState="opening",this.skipReconnect=!1;var o=l(n,"open",function(){r.onopen(),e&&e()}),a=l(n,"error",function(t){if(u("connect_error"),r.cleanup(),r.readyState="closed",r.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}else r.maybeReconnectOnOpen()});if(!1!==this._timeout){var s=this._timeout;u("connect attempt will timeout after %d",s);var c=setTimeout(function(){u("connect attempt timed out after %d",s),o.destroy(),n.close(),n.emit("error","timeout"),r.emitAll("connect_timeout",s)},s);this.subs.push({destroy:function(){clearTimeout(c)}})}return this.subs.push(o),this.subs.push(a),this},r.prototype.onopen=function(){u("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(l(e,"data",c(this,"ondata"))),this.subs.push(l(e,"ping",c(this,"onping"))),this.subs.push(l(e,"pong",c(this,"onpong"))),this.subs.push(l(e,"error",c(this,"onerror"))),this.subs.push(l(e,"close",c(this,"onclose"))),this.subs.push(l(this.decoder,"decoded",c(this,"ondecoded")))},r.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},r.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},r.prototype.ondata=function(e){this.decoder.add(e)},r.prototype.ondecoded=function(e){this.emit("packet",e)},r.prototype.onerror=function(e){u("error",e),this.emitAll("error",e)},r.prototype.socket=function(e,t){function n(){~d(i.connecting,r)||i.connecting.push(r)}var r=this.nsps[e];if(!r){r=new o(this,e,t),this.nsps[e]=r;var i=this;r.on("connecting",n),r.on("connect",function(){r.id=i.engine.id}),this.autoConnect&&n()}return r},r.prototype.destroy=function(e){var t=d(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},r.prototype.packet=function(e){u("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(n){for(var r=0;r<n.length;r++)t.engine.write(n[r],e.options);t.encoding=!1,t.processPacketQueue()}))},r.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},r.prototype.cleanup=function(){u("cleanup");for(var e=this.subs.length,t=0;t<e;t++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},r.prototype.close=r.prototype.disconnect=function(){u("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},r.prototype.onclose=function(e){u("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},r.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)u("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();u("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout(function(){e.skipReconnect||(u("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(u("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(u("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(n)}})}},r.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},function(e,t,n){(function(e){function r(t){var n=!1,r=!1,s=!1!==t.jsonp;if(e.location){var l="https:"===location.protocol,c=location.port;c||(c=l?443:80),n=t.hostname!==location.hostname||c!==t.port,r=t.secure!==l}if(t.xdomain=n,t.xscheme=r,"open"in new i(t)&&!t.forceJSONP)return new o(t);if(!s)throw new Error("JSONP disabled");return new a(t)}var i=n(147),o=n(336),a=n(343),s=n(344);t.polling=r,t.websocket=s}).call(t,n(15))},function(e,t,n){function r(e){var t=e&&e.forceBase64;u&&!t||(this.supportsBinary=!1),i.call(this,e)}var i=n(148),o=n(149),a=n(70),s=n(99),l=n(208),c=n(55)("engine.io-client:polling");e.exports=r;var u=function(){return null!=new(n(147))({xdomain:!1}).responseType}();s(r,i),r.prototype.name="polling",r.prototype.doOpen=function(){this.poll()},r.prototype.pause=function(e){function t(){c("paused"),n.readyState="paused",e()}var n=this;if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(c("we are currently polling - waiting to pause"),r++,this.once("pollComplete",function(){c("pre-pause polling complete"),--r||t()})),this.writable||(c("we are currently writing - waiting to pause"),r++,this.once("drain",function(){c("pre-pause writing complete"),--r||t()}))}else t()},r.prototype.poll=function(){c("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},r.prototype.onData=function(e){var t=this;c("polling got data %s",e);var n=function(e,n,r){if("opening"===t.readyState&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)};a.decodePayload(e,this.socket.binaryType,n),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():c('ignoring poll - transport state "%s"',this.readyState))},r.prototype.doClose=function(){function e(){c("writing close packet"),t.write([{type:"close"}])}var t=this;"open"===this.readyState?(c("transport open - closing"),e()):(c("transport not open - deferring close"),this.once("open",e))},r.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")};a.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,n)})},r.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=l()),this.supportsBinary||e.sid||(e.b64=1),e=o.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e}},function(e,t,n){(function(t){function r(e){function n(e){if(!e)return!1;if(t.Buffer&&t.Buffer.isBuffer&&t.Buffer.isBuffer(e)||t.ArrayBuffer&&e instanceof ArrayBuffer||t.Blob&&e instanceof Blob||t.File&&e instanceof File)return!0;if(i(e)){for(var r=0;r<e.length;r++)if(n(e[r]))return!0}else if(e&&"object"==typeof e){e.toJSON&&"function"==typeof e.toJSON&&(e=e.toJSON());for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)&&n(e[o]))return!0}return!1}return n(e)}var i=n(202);e.exports=r}).call(t,n(15))},function(e,t,n){"use strict";function r(e){var t="";do{t=s[e%l]+t,e=Math.floor(e/l)}while(e>0);return t}function i(e){var t=0;for(d=0;d<e.length;d++)t=t*l+c[e.charAt(d)];return t}function o(){var e=r(+new Date);return e!==a?(u=0,a=e):e+"."+r(u++)}for(var a,s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),l=64,c={},u=0,d=0;d<l;d++)c[s[d]]=d;o.encode=r,o.decode=i,e.exports=o},function(e,t){var n=[].indexOf;e.exports=function(e,t){if(n)return e.indexOf(t);for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}},function(e,t,n){function r(e,t,n){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}var i=n(146),o=n(87),a=n(347),s=n(211),l=n(212),c=n(55)("socket.io-client:socket"),u=n(207);e.exports=r;var d={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},f=o.prototype.emit;o(r.prototype),r.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[s(e,"open",l(this,"onopen")),s(e,"packet",l(this,"onpacket")),s(e,"close",l(this,"onclose"))]}},r.prototype.open=r.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},r.prototype.send=function(){var e=a(arguments);return e.unshift("message"),this.emit.apply(this,e),this},r.prototype.emit=function(e){if(d.hasOwnProperty(e))return f.apply(this,arguments),this;var t=a(arguments),n=i.EVENT;u(t)&&(n=i.BINARY_EVENT);var r={type:n,data:t};return r.options={},r.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),r.id=this.ids++),this.connected?this.packet(r):this.sendBuffer.push(r),delete this.flags,this},r.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},r.prototype.onopen=function(){c("transport is open - connecting"),"/"!==this.nsp&&(this.query?this.packet({type:i.CONNECT,query:this.query}):this.packet({type:i.CONNECT}))},r.prototype.onclose=function(e){c("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},r.prototype.onpacket=function(e){if(e.nsp===this.nsp)switch(e.type){case i.CONNECT:this.onconnect();break;case i.EVENT:case i.BINARY_EVENT:this.onevent(e);break;case i.ACK:case i.BINARY_ACK:this.onack(e);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",e.data)}},r.prototype.onevent=function(e){var t=e.data||[];c("emitting event %j",t),null!=e.id&&(c("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?f.apply(this,t):this.receiveBuffer.push(t)},r.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var r=a(arguments);c("sending ack %j",r);var o=u(r)?i.BINARY_ACK:i.ACK;t.packet({type:o,id:e,data:r})}}},r.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(c("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):c("bad ack %s",e.id)},r.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},r.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)f.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},r.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},r.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},r.prototype.close=r.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:i.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},r.prototype.compress=function(e){return this.flags=this.flags||{},this.flags.compress=e,this}},function(e,t){function n(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}e.exports=n},function(e,t){var n=[].slice;e.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var r=n.call(arguments,2);return function(){return t.apply(e,r.concat(n.call(arguments)))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.useNewSocket=function(e){return(window._CCSDK_WEBSOCKET_V2_WHITELIST||[]).indexOf(""+e)>-1},t.useKeepAlive=function(e){return(window._CCSDK_RING_ALIVE_WHITELIST||[]).indexOf(""+e)>-1},t.useScreenShareProxy=function(e){return(window._CCSDK_SCREEN_SHARE_WHITELIST||[]).indexOf(""+e)>-1}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.gseq=void 0;var i=n(11),o=r(i);t.default=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2];if(n.gseq=g(),"config"===e)return void(r&&r.call(this,n));var i=this._getOptions(),o=this.sipUrl;if((n.kfext||n.to_kfext)&&2!==i.version&&("getStaffInfo"!==e?(n.kfext&&(n.kfext=parseInt(n.kfext,10)||n.kfext),n.to_kfext&&(n.to_kfext=parseInt(n.to_kfext,10)||n.to_kfext)):n.kfext&&(n.kfext+="")),"sip"===i.mode){if(o&&p.indexOf(e)>-1)return h(e,n,o);if("hangup"===e)n.voipType=1;else{if("logout"===e)return n.type=1,this.agentOffWork(n);if("isAgentLogin"===e)return m(n,"success",function(e){0!==e.status&&t.trigger("login")}),n.type=1,this.agentOnWork(n);if("agentReset"===e){var a=n.success;return n.type=1,n.success=function(e){a&&a.call(t,e),n.success=function(e){a&&a.call(t,e),t.trigger("agentReset",{errCode:0})},t.agentOnWork(n)},this.agentOffWork(n)}}}else if("webrtc"===i.mode)if("agentMakeCall"===e)n.client_account_type=4===n.client_account_type?4:5;else if("hangup"===e)n.voipType=5;else if("setAutoAnswer"===e){var s=n.status;m(n,"success",function(e){t.trigger("autoAnswerChange",{status:s})})}else"setDisposableStatus"===e&&(n.type=4);else"isAgentLogin"===e&&m(n,"success",function(e){0!==e.status&&t.trigger("login")});if("agentMakeCall"===e){var l=n.success;if(n.success=function(e){var n=String(e.callid).split("-")[2];n&&t.setState({roomId:n}),l&&l.call(t,e),t.trigger("_makecall",e.callid)},n.user_display_num=n.user_display_num||this.getState().currentSwitchboardNumber,"webrtc"===i.mode&&!this._webrtcReady)return f.$warn("agentMakeCall is holded as webrtc is not ready"),this.off(".makecall.actionIntercepted"),void this.once("webrtcReady.makecall.actionIntercepted",r,n,this)}else if("isValidNumber"===e)n.phone_number+="";else if("agentSetWorkStatus"===e||"setRestStatus"===e){if("webrtc"===i.mode&&!this._webrtcReady)return f.$warn(e+" is holded as webrtc is not ready"),this.off("."+e+".actionIntercepted"),void this.once("webrtcReady."+e+".actionIntercepted",r,n,this);if(this.isCallingState(void 0,!0)&&!n.isPostEditFinish)return v.call(this,e,"当前正在通话，不能修改坐席状态",n)}r&&r.call(this,n)};var a=n(349),s=r(a),l=n(38),c=r(l),u=n(7),d=r(u),f=new d.default("actionStep"),p=["hangup","setMuteState","answer"],h=function(e,t,n){var r=void 0,i=t.success&&t.success.bind(this),o=t.fail&&t.fail.bind(this),a=t.complete&&t.complete.bind(this);return(r="setMuteState"===e?n[t.isMute?"mute":"unmute"]:n[e])&&(0,s.default)(r,i,o,a)},g=t.gseq=function(){return Math.floor(9007099254740993*Math.random()+1e11)},m=function(e,t,n){var r=this,i=e[t];e[t]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n&&n.call(r,e),i&&i.call(r,e)}},v=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n[c.default.ns],i=""+c.default.prefix+e+(r?"."+r:"");f.$warn(e+" is prevented, "+t+", opts: "+(0,o.default)(n)),this.trigger(i,{code:c.default.code.statusLimited,msg:t})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){e=e||this,w.$log(["Navigator userAgent:",navigator.userAgent]),"https:"!==location.protocol&&"localhost"!==location.hostname&&"file:"!==location.protocol&&"chrome-extension:"!==location.protocol&&k(e,{name:"notSurpport",message:"WebRTC需要HTTPS环境！"}),a.call(e).then(function(e){o(e),y.$log("WebRTC environment detect ok!")})}function o(e){return new h.default(function(t,n){e&&e.getTracks().forEach(function(e){e.stop()}),setTimeout(function(){t()},50)})}function a(e,t){var n=this,r={video:!1,audio:!0};return t=t||this,e&&(r.audio={deviceId:e}),navigator.mediaDevices.getUserMedia(r).catch(function(e){k(t||n,e)})}function s(){return v("audioinput")}function l(){return v("audiooutput")}Object.defineProperty(t,"__esModule",{value:!0}),t.onNotSurpport=void 0;var c=n(68),u=r(c),d=n(69),f=r(d),p=n(14),h=r(p),g=n(11),m=r(g),v=function(){var e=(0,f.default)(u.default.mark(function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"audiooutput";return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.enumerateDevices();case 2:return t=e.sent,e.abrupt("return",t.filter(function(e){return e.kind===n}));case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();t.default=i,t.stopMedia=o,t.getMicroMedia=a,t.getMicrophones=s,t.getSpeakers=l,n(359);var b=n(7),_=r(b),y=new _.default("WebRTC"),w=new _.default("Navigator"),x=new _.default("ErrLog"),k=t.onNotSurpport=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.name||"notSurpport",r=void 0;switch(t.name){case"NotAllowedError":r="拒绝错误：用户禁用了麦克风访问权限";break;case"NotFoundError":r="找不到错误：没有找到麦克风";break;case"NotReadableError":r="无法读取错误：请确保当前没有其他应用使用麦克风";break;case"AbortError":r="终止错误：获取麦克风媒体输入被取消";break;case"SecurityError":r="安全错误：被禁止获取麦克风设备";break;default:r=t.message||"检测到目前环境不支持WebRTC"}t={name:n,message:r},e.trigger("detectError",t),x.$error("detectError: "+(0,m.default)(t))}},function(e,t,n){n(217);var r=n(2).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(3);r(r.S+r.F*!n(16),"Object",{defineProperty:n(23).f})},function(e,t,n){n(219),e.exports=n(2).Object.assign},function(e,t,n){var r=n(3);r(r.S+r.F,"Object",{assign:n(153)})},function(e,t,n){n(221),e.exports=n(2).Object.getPrototypeOf},function(e,t,n){var r=n(36),i=n(94);n(43)("getPrototypeOf",function(){return function(e){return i(r(e))}})},function(e,t,n){n(223),e.exports=n(2).Object.setPrototypeOf},function(e,t,n){var r=n(3);r(r.S,"Object",{setPrototypeOf:n(224).set})},function(e,t,n){var r=n(9),i=n(12),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(30)(Function.call,n(61).f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},function(e,t,n){n(226);var r=n(2).Object;e.exports=function(e,t){return r.create(e,t)}},function(e,t,n){var r=n(3);r(r.S,"Object",{create:n(60)})},function(e,t,n){n(40),n(228),e.exports=n(2).Array.from},function(e,t,n){"use strict";var r=n(30),i=n(3),o=n(36),a=n(115),s=n(116),l=n(65),c=n(123),u=n(91);i(i.S+i.F*!n(117)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,i,d,f=o(e),p="function"==typeof this?this:Array,h=arguments.length,g=h>1?arguments[1]:void 0,m=void 0!==g,v=0,b=u(f);if(m&&(g=r(g,h>2?arguments[2]:void 0,2)),void 0==b||p==Array&&s(b))for(t=l(f.length),n=new p(t);t>v;v++)c(n,v,m?g(f[v],v):f[v]);else for(d=b.call(f),n=new p;!(i=d.next()).done;v++)c(n,v,m?a(d,g,[i.value,v],!0):i.value);return n.length=v,n}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(57),o=r(i),a=n(11),s=r(a);t.default=function(e,t){var n=!0,r=h[e]||[],i=!0,a=!1,l=void 0;try{e:for(var d,f=(0,o.default)(r);!(i=(d=f.next()).done);i=!0){var g=d.value;if((0,u.isArray)(g)){var m=!1,v=!0,b=!1,_=void 0;try{for(var y,w=(0,o.default)(g);!(v=(y=w.next()).done);v=!0){var x=y.value;if(void 0!==t[x]){m=!0;break}}}catch(e){b=!0,_=e}finally{try{!v&&w.return&&w.return()}finally{if(b)throw _}}if(!m){n=!1;break e}}else if((0,u.isObject)(g)){for(var k in g)if(g.hasOwnProperty(k)){if(void 0===t[k]){n=!1;break e}var S=g[k][t[k]]||[],C=!0,T=!1,E=void 0;try{for(var I,A=(0,o.default)(S);!(C=(I=A.next()).done);C=!0){var R=I.value;if(void 0===t[R]){n=!1;break}}}catch(e){T=!0,E=e}finally{try{!C&&A.return&&A.return()}finally{if(T)throw E}}}}else if(void 0===t[g]){n=!1;break}}}catch(e){a=!0,l=e}finally{try{!i&&f.return&&f.return()}finally{if(a)throw l}}if(!n){var O={code:c.default.code.paramsError,msg:c.default.checkParamsFail},L=t[c.default.ns],P=c.default.prefix+e+(L?"."+L:"");p.$error(e+" params error, response:"+(0,s.default)(O)+", params:"+(0,s.default)(t)),this.trigger(P,O)}return n};var l=n(38),c=r(l),u=n(58),d=n(7),f=r(d),p=new f.default("ErrLog"),h={config:[["kfext","openid"],["ticket","mango"]],call:["phone_number","num_display_type"],changeAnswerType:["answer_type"],hold:["callid"],transfer:[{type:{1:["to_kfext"],2:["to_ivr_id","to_ivr_node_id"],3:["to_sys_service_id"],5:["to_skill_group_id"]}},"callid"],getIvrNodeList:[{type:{1:["callid"],2:["ivr_id"]}}],getCallingAgents:["cursor"],agentMonitor:["to_kfext","callid","account_type"],agentInsert:["to_kfext","callid"],agentBreak:["to_kfext","callid"],getAgentList:["type","callid"],agentOnWork:["type"],agentOffWork:["type"],getCustomerInfo:["tel"],addCustomerBase:[{type:{1:["tel"],2:["customerId"]}}],showInfoCard:["customerId"],statusReport:["callid","roomid","status"],isValidNumber:["phone_number"],setDisposableStatus:["callid","status"]}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(118),o=r(i),a=n(35),s=r(a),l=n(42),c=function(e,t){return(0,l.isObject)(t)&&(t=(0,s.default)(e,(0,o.default)(t))),e.$trace(t),t};t.default=c},function(e,t,n){n(232),e.exports=n(2).Object.getOwnPropertyDescriptors},function(e,t,n){var r=n(3),i=n(156),o=n(29),a=n(61),s=n(123);r(r.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n,r=o(e),l=a.f,c=i(r),u={},d=0;c.length>d;)void 0!==(n=l(r,t=c[d++]))&&s(u,t,n);return u}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(56),o=r(i),a=n(11),s=r(a),l=n(13),c=r(l),u=n(4),d=r(u),f=n(5),p=r(f),h=n(20),g=r(h),m=n(21),v=r(m),b=n(234),_=r(b),y=n(42),w=n(51),x=n(92),k=function(e){function t(){return(0,d.default)(this,t),(0,g.default)(this,(t.__proto__||(0,c.default)(t)).apply(this,arguments))}return(0,v.default)(t,e),(0,p.default)(t,[{key:"$trace",value:function(e,t){return e?(this.$_watch(e,t),e.prototype&&this.$_watch(e.prototype),!e.prototype&&e.__proto__&&!e.__proto__.hasOwnProperty("hasOwnProperty")&&this.$_watch(e.__proto__,t),this):this}},{key:"$traceAction",value:function(e,t,n){var r=t||this,i=void 0;if((0,y.isString)(e)?e=r[e]:(0,y.isFunction)(e)&&(e=r.$proxy(e,r)),!(0,y.isFunction)(e)){var o=new Error(e+" is not function");return this.$trigger("error",o)&&x.eventBus.$trigger("error",o),r}return r.$trace(t),i=r.$storeState(),this.constructor.$debug().$startNewTrace(n||e.name),e.apply(r,Array.prototype.slice.call(arguments,3)),i(),this}},{key:"$proxy",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.traceInfo,i=n.scriptingTimeAlert||this.$opts.scriptingTimeAlert||1e3,o=e.name;if(r=r||this.$opts.traceInfo||["input","output","scriptingTime"],!e||e[w.PROXIED_ATTR])return e;var a=function(){var n=window.performance.now(),a=void 0,l=void 0;try{l=e.apply(t||this,arguments)}catch(e){var c=!0;a=e,l="error: "+e.message,c=this.$trigger("error",a),c&&x.eventBus.$trigger("error",a)}var u=window.performance.now(),d=u-n,f={input:arguments.length?(0,s.default)(arguments):"undefined",output:l!==this?(0,s.default)(l)||"undefined":"this",scriptingTime:d+"ms"},p=[];return r.forEach(function(e){var t={label:e,info:f[e]};("scriptingTime"===e&&d>=i||a&&"output"===e)&&(t.warning=!0),p.push(t)}),this.$log(o+" completed",{type:w.LOG_TYPE.TRACE,list:p},a),l};return a[w.PROXIED_ATTR]=!0,a}},{key:"$_watch",value:function(e,t){var n=this;e.hasOwnProperty(w.PROXIED_ATTR)&&e[w.PROXIED_ATTR]||((0,o.default)(e).forEach(function(r){if((0,y.isFunction)(e[r])&&"constructor"!==r){var i=e[r];e[r]=n.$proxy(i,e,t)}}),e[w.PROXIED_ATTR]=!0)}}]),t}(_.default);t.default=k},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(13),o=r(i),a=n(34),s=r(a),l=n(4),c=r(l),u=n(20),d=r(u),f=n(5),p=r(f),h=n(21),g=r(h),m=n(8),v=r(m),b=n(35),_=r(b),y=n(92),w=r(y),x=n(42),k=n(51),S=0,C=0,T=(0,x.getColorStr)(k.THEME.totalLabelBgColor),E=(0,x.getColorStr)(k.THEME.timeLabelBgColor),I=(0,x.getColorStr)(k.THEME.msgErrorBgColor),A=(0,x.getColorStr)(k.THEME.msgWarnBgColor,k.THEME.msgWarnColor),R=(0,x.getColorStr)(k.THEME.tagBgColor,k.THEME.tagColor,k.THEME.tagStyle),O=(0,x.getColorStr)("none",k.THEME.listLabelColor),L=(0,x.getColorStr)("none",k.THEME.listInfoColor),P=(0,x.getColorStr)("none",k.THEME.listLabelWarningColor),M=(0,x.getColorStr)("none",k.THEME.listInfoWarningColor),$=(0,_.default)(null),N=k.THEME.totalLabelBgColor,D=function(e){return e?$[e]:(0,v.default)((0,_.default)(null),$)},F=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,c.default)(this,t);var n=(0,d.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return n.$opts=e,n.$isEnabled=void 0===e.isEnabled||e.isEnabled,n[k.DEBUG_ATTR]=e.debug,n.$_storeInstance(),n.$setTheme(),n.$countLog=0,n}return(0,g.default)(t,e),(0,p.default)(t,null,[{key:"$getInstance",value:function(e){return D(e)}},{key:"$enable",value:function(e){if(e){var t=this.getInstance(e);t&&t.$enable()}else{var n=this.$getInstance();(0,s.default)(n).forEach(function(e){n[e].$enable()})}}},{key:"$disable",value:function(e){if(e){var t=this.getInstance(e);t&&t.$disable()}else{var n=this.$getInstance();(0,s.default)(n).forEach(function(e){n[e].$disable()})}}},{key:"$countReset",value:function(e){if(S=0,e)this.$getInstance()[e].$countReset();else{var t=this.$getInstance();(0,s.default)(t).forEach(function(e){t[e].$countReset()})}return this}},{key:"$storeState",value:function(){var e=this,t=this.$label,n=T,r=S,i=this.$getInstance(),o=[];return(0,s.default)(i).forEach(function(e){o.push(i[e].$storeState())}),function(){e.$label=t,T=n,S=r,o.forEach(function(e){e()})}}},{key:"$debug",value:function(e){var t=this.$getInstance();return(0,s.default)(t).forEach(function(n){t[n].$debug(e)}),this}},{key:"$startNewTrace",value:function(e,t){return t=t||k.COLORS[C++]||(0,x.getRandomColor)(!0),this.$label=e,this.$countReset().$setTheme({totalLabelBgColor:t}),y.eventBus.$trigger("traceAction",e,t),this}},{key:"$setTheme",value:function(e){return e=(0,v.default)(k.THEME,e),N=e.totalLabelBgColor,T=(0,x.getColorStr)(e.totalLabelBgColor,e.totalLabelColor),E=(0,x.getColorStr)(e.timeLabelBgColor,e.timeLabelColor),I=(0,x.getColorStr)(e.msgErrorBgColor,e.msgErrorColor),A=(0,x.getColorStr)(e.msgWarnBgColor,e.msgWarnColor),R=(0,x.getColorStr)(e.tagBgColor,e.tagColor,e.tagStyle),O=(0,x.getColorStr)(e.listLabelBgColor,e.listLabelColor),L=(0,x.getColorStr)(e.listInfoBgColor,e.listInfoColor),P=(0,x.getColorStr)(e.listLabelBgWarningColor,e.listLabelWarningColor),M=(0,x.getColorStr)(e.listInfoBgWarningColor,e.listInfoWarningColor),this}},{key:"$clear",value:function(){return console.clear(),y.eventBus.$trigger("clear"),this}},{key:"$setExtraInfo",value:function(e){this.extraInfo=(0,v.default)({},this.extraInfo,e)}}]),(0,p.default)(t,[{key:"$getColorStr",value:function(e,t,n){return(0,x.getColorStr)(e,t,n)}},{key:"$storeState",value:function(){var e=this,t=this.$countLog,n=this[k.DEBUG_ATTR];return function(){e.$countLog=t,e[k.DEBUG_ATTR]=n}}},{key:"$log",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2],r=void 0;n&&(r=n instanceof Error,n=(0,x.isArray)(n)?n:[n]),(0,x.isArray)(e)?(n=n?e.concat(n):e,e=""):(0,x.isObject)(e)&&(t=e,e="");var i=this.constructor.$label,o=void 0===t.type?k.LOG_TYPE.INFO:t.type,a=this[k.INSTANCE_NAME],s=new Date,l=s.getHours(),c=s.getMinutes(),u=s.getSeconds(),d=s.getMilliseconds(),f=void 0;return a=a?a+":":"",S++,this.$countLog++,f=this.$_getLogMsg({type:o,logTimeStr:l+":"+c+":"+u+"."+d,logLabel:""+a+this.$countLog,totalLabel:i,logMsg:e,tags:t.tags,list:t.list}),this.$opts.filterReg&&this.$opts.filterReg.test(e)?this:(y.eventBus.$trigger("log",{name:this[k.INSTANCE_NAME],type:o,totalLabel:i,totalLabelBgColor:N,msg:f,originObject:r?"":n,extraInfo:(0,v.default)({},this.constructor.extraInfo,this.extraInfo),timestamp:+new Date,countLogTotal:S}),o===k.LOG_TYPE.TRACE&&!this[k.DEBUG_ATTR]||!this.$isEnabled?this:(console.log.apply(console,this.$_getConsoleMsg(f)),n&&console[r?"error":"log"].apply(console,n),this))}},{key:"$warn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.type=k.LOG_TYPE.WARN,this.$log(e,t),console.warn(e),this}},{key:"$error",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.type=k.LOG_TYPE.EEROR,this.$log(e,t),t.trace&&(console.error(e),console.trace()),this}},{key:"$enable",value:function(){return this.$isEnabled=!0,this}},{key:"$disable",value:function(){return this.$isEnabled=!1,this}},{key:"$debug",value:function(e){return this[k.DEBUG_ATTR]=!1!==e,this}},{key:"$countReset",value:function(){return this.$countLog=0,this}},{key:"$setTheme",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.labelBgColor||this.$opts.labelBgColor||k.COLORS[C++]||(0,x.getRandomColor)();return this.$logLabelColor=(0,x.getColorStr)(t,e.labelColor||this.$opts.labelColor),this.$logMsgColor=(0,x.getColorStr)(e.msgBgColor||this.$opts.msgBgColor,e.msgColor||this.$opts.msgColor||k.THEME.logMsgColor),this}},{key:"$setExtraInfo",value:function(e){this.extraInfo=(0,v.default)({},this.extraInfo,e)}},{key:"$_getLogMsg",value:function(e){var t=e.totalLabel?e.totalLabel+":"+S:S,n=["",this.$logMsgColor,A,I],r={type:k.MSG_TYPE.TIME,info:e.logTimeStr,color:E},i={type:k.MSG_TYPE.LABEL,info:e.logLabel,color:this.$logLabelColor},o={type:k.MSG_TYPE.MSG,info:e.logMsg,color:n[e.type]},a={type:k.MSG_TYPE.TOTAL_LABEL,info:t,color:T},s={type:k.MSG_TYPE.TAGS,info:e.tags,color:R},l={type:k.MSG_TYPE.LIST,info:e.list,color:[O,L,P,M]},c=[];return this.constructor.$countInstance<=1&&!e.totalLabel?c.push(i):e.totalLabel?c.push(a,i):c.push(i,a),c.push(r,o),e.tags&&c.push(s),e.list&&c.push(l),c}},{key:"$_getConsoleMsg",value:function(e){var t=[],n=[];return e.forEach(function(e){var r=e.type,i=e.color;if(r===k.MSG_TYPE.TAGS){var o=e.info,a="%c\n "+o.join(" %c ")+" ";t.push(a),o.forEach(function(){n.push(i)})}else if(r===k.MSG_TYPE.LIST){var s=e.info;s.forEach(function(e){t.push("%c\n"+e.label+" %c"+e.info+" "),e.warning?n.push(i[2],i[3]):n.push(i[0],i[1])})}else t.push("%c "+e.info+" "),n.push(i)}),[t.join("")].concat(n)}},{key:"$_storeInstance",value:function(){var e=this.constructor.$countInstance||0,t=this.$opts.name||(0,x.generateName)();this[k.INSTANCE_NAME]=t,$[t]=this,this.constructor.$countInstance=++e}}]),t}(w.default);t.default=F},function(e,t,n){"use strict";function r(e){var t=new a(e),n=o(a.prototype.request,t);return i.extend(n,a.prototype,t),i.extend(n,t),n}var i=n(17),o=n(129),a=n(236),s=n(135),l=n(132),c=r(l);c.Axios=a,c.create=function(e){return r(s(c.defaults,e))},c.Cancel=n(136),c.CancelToken=n(249),c.isCancel=n(131),c.all=function(e){return Promise.all(e)},c.spread=n(250),e.exports=c,e.exports.default=c},function(e,t,n){"use strict";function r(e){this.defaults=e,this.interceptors={request:new a,response:new a}}var i=n(17),o=n(130),a=n(237),s=n(238),l=n(135);r.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=l(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[s,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},r.prototype.getUri=function(e){return e=l(this.defaults,e),o(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},i.forEach(["delete","get","head","options"],function(e){r.prototype[e]=function(t,n){return this.request(i.merge(n||{},{method:e,url:t}))}}),i.forEach(["post","put","patch"],function(e){r.prototype[e]=function(t,n,r){return this.request(i.merge(r||{},{method:e,url:t,data:n}))}}),e.exports=r},function(e,t,n){"use strict";function r(){this.handlers=[]}var i=n(17);r.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){i.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=r},function(e,t,n){"use strict";function r(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var i=n(17),o=n(239),a=n(131),s=n(132);e.exports=function(e){return r(e),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),i.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||s.adapter)(e).then(function(t){return r(e),t.data=o(t.data,t.headers,e.transformResponse),t},function(t){return a(t)||(r(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,n){"use strict";var r=n(17);e.exports=function(e,t,n){return r.forEach(n,function(n){e=n(e,t)}),e}},function(e,t,n){"use strict";var r=n(17);e.exports=function(e,t){r.forEach(e,function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])})}},function(e,t,n){"use strict";var r=n(134);e.exports=function(e,t,n){var i=n.config.validateStatus;!i||i(n.status)?e(n):t(r("Request failed with status code "+n.status,n.config,null,n.request,n))}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,n){"use strict";var r=n(244),i=n(245);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(17),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,a={};return e?(r.forEach(e.split("\n"),function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(a[t]&&i.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}}),a):a}},function(e,t,n){"use strict";var r=n(17);e.exports=r.isStandardBrowserEnv()?function(){function e(e){var t=e;return n&&(i.setAttribute("href",t),t=i.href),i.setAttribute("href",t),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}var t,n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");return t=e(window.location.href),function(n){var i=r.isString(n)?e(n):n;return i.protocol===t.protocol&&i.host===t.host}}():function(){return function(){return!0}}()},function(e,t,n){"use strict";var r=n(17);e.exports=r.isStandardBrowserEnv()?function(){return{write:function(e,t,n,i,o,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(e,t,n){"use strict";function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new i(e),t(n.reason))})}var i=n(136);r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e;return{token:new r(function(t){e=t}),cancel:e}},e.exports=r},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){n(252),e.exports=n(2).Object.values},function(e,t,n){var r=n(3),i=n(157)(!1);r(r.S,"Object",{values:function(e){return i(e)}})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return i});var i=function e(t){r(this,e),this.name=this.constructor.name,this.message=t,this.stack=new Error(t).stack};i.prototype=Object.create(Error.prototype),i.prototype.constructor=i},function(e,t,n){"use strict";function r(e,t,n){if(t=t||{},n=new m.a(n),t.defaultCountry&&!n.hasCountry(t.defaultCountry)){if(t.v2)throw new g.a("INVALID_COUNTRY");throw new Error("Unknown country: ".concat(t.defaultCountry))}var r=l(e,t.v2),i=r.number,o=r.ext;if(!i){if(t.v2)throw new g.a("NOT_A_NUMBER");return{}}var a=u(i,t.defaultCountry,t.defaultCallingCode,n),s=a.country,d=a.nationalNumber,f=a.countryCallingCode,v=a.carrierCode;if(!n.hasSelectedNumberingPlan()){if(t.v2)throw new g.a("INVALID_COUNTRY");return{}}if(!d||d.length<p.c){if(t.v2)throw new g.a("TOO_SHORT");return{}}if(d.length>p.b){if(t.v2)throw new g.a("TOO_LONG");return{}}if(t.v2){var b=new C.a(f,d,n.metadata);return s&&(b.country=s),v&&(b.carrierCode=v),o&&(b.ext=o),b}var _=!(t.extended?!n.hasSelectedNumberingPlan():!s)&&Object(h.a)(d,n.nationalNumberPattern());return t.extended?{country:s,countryCallingCode:f,carrierCode:v,valid:_,possible:!!_||!(!0!==t.extended||!n.possibleLengths()||!Object(x.b)(d,void 0!==f,n)),phone:d,ext:o}:_?c(s,d,o):{}}function i(e,t){if(e)if(e.length>T){if(t)throw new g.a("TOO_LONG")}else{var n=e.search(E);if(!(n<0))return e.slice(n).replace(I,"")}}function o(e,t){if(e&&t.nationalPrefixForParsing()){var n=new RegExp("^(?:"+t.nationalPrefixForParsing()+")"),r=n.exec(e);if(r){var i,o,a=r.length-1;if(t.nationalPrefixTransformRule()&&a>0&&r[a])i=e.replace(n,t.nationalPrefixTransformRule()),a>1&&r[a]&&(o=r[1]);else{var s=r[0];i=e.slice(s.length),a>0&&(o=r[1])}if(!Object(h.a)(e,t.nationalNumberPattern())||Object(h.a)(i,t.nationalNumberPattern()))return{nationalNumber:i,carrierCode:o}}}return{nationalNumber:e}}function a(e,t,n){if(A&&n.isNonGeographicCallingCode(e))return"001";var r=n.getCountryCodesForCallingCode(e);if(r)return 1===r.length?r[0]:s(r,t,n.metadata)}function s(e,t,n){n=new m.a(n);for(var r=e,i=Array.isArray(r),o=0,r=i?r:r[Symbol.iterator]();;){var a;if(i){if(o>=r.length)break;a=r[o++]}else{if(o=r.next(),o.done)break;a=o.value}var s=a;if(n.country(s),n.leadingDigits()){if(t&&0===t.search(n.leadingDigits()))return s}else if(Object(w.b)({phone:t,country:s},void 0,n.metadata))return s}}function l(e,t){if(e&&0===e.indexOf("tel:"))return Object(S.b)(e);var n=i(e,t);if(!n||!Object(v.a)(n))return{};var r=Object(b.c)(n);return r.ext?r:{number:n}}function c(e,t,n){var r={country:e,phone:t};return n&&(r.ext=n),r}function u(e,t,n,r){var i,o=f(e,t,r.metadata),s=o.countryCallingCode,l=o.number;if(s)r.chooseCountryByCountryCallingCode(s);else{if(!l||!t&&!n)return{};r.selectNumberingPlan(t,n),t?i=t:A&&r.isNonGeographicCallingCode(n)&&(i="001"),s=n||Object(y.a)(t,r.metadata)}if(!l)return{countryCallingCode:s};var c=d(l,r),u=c.nationalNumber,p=c.carrierCode,h=a(s,u,r);return h&&(i=h,"001"===h||r.country(i)),{country:i,countryCallingCode:s,nationalNumber:u,carrierCode:p}}function d(e,t){var n=o(Object(_.a)(e),t),r=n.nationalNumber,i=n.carrierCode;if(t.possibleLengths())switch(Object(w.a)(r,void 0,t)){case"TOO_SHORT":case"INVALID_LENGTH":return{nationalNumber:e}}return{nationalNumber:r,carrierCode:i}}function f(e,t,n){if(!(e=Object(_.a)(e)))return{};if("+"!==e[0]){var r=Object(k.b)(e,t,n);if(!r||r===e){if(t){var i=Object(y.a)(t,n);if(0===e.indexOf(i)){n=new m.a(n),n.country(t);var o=e.slice(i.length);if(!Object(h.a)(e,n.nationalNumberPattern())&&Object(h.a)(e,n.nationalNumberPattern())||"TOO_LONG"===Object(w.a)(e,void 0,n))return{countryCallingCode:i,number:o}}}return{number:e}}e="+"+r}if("0"===e[1])return{};n=new m.a(n);for(var a=2;a-1<=p.a&&a<=e.length;){var s=e.slice(1,a);if(n.hasCallingCode(s))return{countryCallingCode:s,number:e.slice(a)};a++}return{}}t.a=r,t.c=i,t.e=o,t.d=a,t.b=f;var p=n(74),h=n(138),g=n(253),m=n(44),v=n(306),b=n(255),_=n(307),y=n(448),w=n(139),x=n(308),k=n(309),S=n(256),C=n(160),T=250,E=new RegExp("["+p.d+p.e+"]"),I=new RegExp("[^"+p.e+"]+$"),A=!1},function(e,t,n){"use strict";function r(e){var t="xｘ#＃~～";switch(e){case"parsing":t=",;"+t}return a+s+"|[  \\t,]*(?:e?xt(?:ensi(?:ó?|ó))?n?|ｅ?ｘｔｎ?|доб|["+t+"]|int|anexo|ｉｎｔ)[:\\.．]?[  \\t,-]*"+s+"#?|[- ]+(["+o.e+"]{1,5})#"}function i(e){var t=e.search(u);if(t<0)return{};for(var n=e.slice(0,t),r=e.match(u),i=1;i<r.length;){if(null!=r[i]&&r[i].length>0)return{number:n,ext:r[i]};i++}}n.d(t,"b",function(){return l}),n.d(t,"a",function(){return c}),t.c=i;var o=n(74),a=";ext=",s="(["+o.e+"]{1,7})",l=r("parsing"),c=r("matching"),u=new RegExp("(?:"+l+")$","i")},function(e,t,n){"use strict";function r(e,t){return a(e)||o(e,t)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function o(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}function a(e){if(Array.isArray(e))return e}function s(e){var t,n;e=e.replace(/^tel:/,"tel=");for(var i=e.split(";"),o=Array.isArray(i),a=0,i=o?i:i[Symbol.iterator]();;){var s;if(o){if(a>=i.length)break;s=i[a++]}else{if(a=i.next(),a.done)break;s=a.value}var l=s,u=l.split("="),d=r(u,2),f=d[0],p=d[1];switch(f){case"tel":t=p;break;case"ext":n=p;break;case"phone-context":"+"===p[0]&&(t=p+t)}}if(!Object(c.a)(t))return{};var h={number:t};return n&&(h.ext=n),h}function l(e){var t=e.number,n=e.ext;if(!t)return"";if("+"!==t[0])throw new Error('"formatRFC3966()" expects "number" to be in E.164 format.');return"tel:".concat(t).concat(n?";ext="+n:"")}t.b=s,t.a=l;var c=n(306)},function(e,t,n){"use strict";function r(e,t,n){if(t=t||{},n=new i.a(n),!e.country)return!1;if(n.selectNumberingPlan(e.country,e.countryCallingCode),n.hasTypes())return void 0!==Object(a.b)(e,t,n.metadata);var r=t.v2?e.nationalNumber:e.phone;return Object(o.a)(r,n.nationalNumberPattern())}t.a=r;var i=n(44),o=n(138),a=n(139)},function(e,t,n){"use strict";function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){s(e,t,n[t])})}return e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return R});var l=n(160),c=n(74),u=n(255),d=n(453),f=n(161),p=n(312),h=n(455),g=n(456),m=n(457),v=n(458),b=n(44),_=n(254),y=["\\/+(.*)/","(\\([^(]*)","(?:".concat(p.g,"-|-").concat(p.g,")").concat(p.g,"*(.+)"),"[‒-―－]".concat(p.g,"*(.+)"),"\\.+".concat(p.g,"*([^.]+)"),"".concat(p.g,"+(").concat(p.a,"+)")],w=Object(f.b)(0,2),x=Object(f.b)(0,4),k=c.b+c.a,S=Object(f.b)(0,k),C="[".concat(c.f,"]")+x,T=p.f+Object(f.b)(1,k),E="(?:"+v.a+C+")"+w+T+"(?:"+C+T+")"+S+"(?:"+u.a+")?",I=new RegExp("[^".concat(p.c).concat(p.b,"#]+$")),A=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1,R=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;if(i(this,e),s(this,"state","NOT_READY"),s(this,"searchIndex",0),s(this,"regExpCache",new d.a(32)),n=r({},n,{defaultCallingCode:n.defaultCallingCode,defaultCountry:n.defaultCountry&&Object(b.d)(n.defaultCountry,o)?n.defaultCountry:void 0,leniency:n.leniency||n.extended?"POSSIBLE":"VALID",maxTries:n.maxTries||A}),!n.leniency)throw new TypeError("`Leniency` not supplied");if(n.maxTries<0)throw new TypeError("`maxTries` not supplied");if(this.text=t,this.options=n,this.metadata=o,this.leniency=h.a[n.leniency],!this.leniency)throw new TypeError("Unknown leniency: ".concat(n.leniency,"."));this.maxTries=n.maxTries,this.PATTERN=new RegExp(E,"ig")}return a(e,[{key:"find",value:function(){for(var e;this.maxTries>0&&null!==(e=this.PATTERN.exec(this.text));){var t=e[0],n=e.index;if(t=Object(g.a)(t),Object(m.a)(t,n,this.text)){var r=this.parseAndVerify(t,n,this.text)||this.extractInnerMatch(t,n,this.text);if(r){if(this.options.v2){var i=new l.a(r.country||r.countryCallingCode,r.phone,this.metadata);return r.ext&&(i.ext=r.ext),{startsAt:r.startsAt,endsAt:r.endsAt,number:i}}return r}}this.maxTries--}}},{key:"extractInnerMatch",value:function(e,t,n){for(var r=0,i=y;r<i.length;r++)for(var o=i[r],a=!0,s=void 0,l=new RegExp(o,"g");null!==(s=l.exec(e))&&this.maxTries>0;){if(a){var c=Object(f.d)(I,e.slice(0,s.index)),u=this.parseAndVerify(c,t,n);if(u)return u;this.maxTries--,a=!1}var d=Object(f.d)(I,s[1]),p=this.parseAndVerify(d,t+s.index,n);if(p)return p;this.maxTries--}}},{key:"parseAndVerify",value:function(e,t,n){if(Object(v.b)(e,t,n,this.options.leniency)){var r=Object(_.a)(e,{extended:!0,defaultCountry:this.options.defaultCountry,defaultCallingCode:this.options.defaultCallingCode},this.metadata);if(r.possible&&this.leniency(r,e,this.metadata,this.regExpCache)){var i={startsAt:t,endsAt:t+e.length,phone:r.phone};return r.country&&"001"!==r.country?i.country=r.country:i.countryCallingCode=r.countryCallingCode,r.ext&&(i.ext=r.ext),i}}}},{key:"hasNext",value:function(){return"NOT_READY"===this.state&&(this.lastMatch=this.find(),this.lastMatch?this.state="READY":this.state="DONE"),"READY"===this.state}},{key:"next",value:function(){if(!this.hasNext())throw new Error("No next element");var e=this.lastMatch;return this.lastMatch=null,this.state="NOT_READY",e}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.attachOrderPop=t.openUrl=t.getUrl=void 0;var r=n(59),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.getState("callid"),n=this.getState("tel"),r=this.getState("callKfext"),i=void 0;return e?(e=e.replace(/^\s*|\s*$/g,"").replace(/^\/*/g,""),/^http/.test(e)||(e="https://"+e),i=(e.indexOf("?")>-1?"&":"?")+"qd_callid="+t+"&qd_tel="+n+"&qd_kfext="+r,e+=i):""},o=function(){var e=this.getState("workorder")||{status:0},t=e.url,n=e.openType,r=e.status,o=this.env.inClient;if(r&&t)if(t=i.call(this,t),o)this.trigger("_openUrl",t);else{var a=[t,"_blank"];2===n&&a.push("resizable=0"),window.open.apply(window,a)}},a=function(e){var t=this.env.inClient,n=this._getOptions();this.getState("callType")===r.callTypeCode.normal&&(t||"client"!==n.mode)&&("workorder"===e?o.call(this):this.showPage({name:"orderPopFrame"}))},s={workorder:!1,dialog:!1},l=function(e,t){var n=this,r=["calling","online","over","postEdit"],i=this.getState("isPostEditOn")||{},o=e.status,l=this.env.inClient;this.one("stateChange."+t+".orderPop",function(c,u){var d=n.getState("direction"),f=r[e[d]-1];if("over"===f&&i[d]&&(f="postEdit"),o&&f&&u===f){var p=n.getState("tel");(!l||!s[t]&&p)&&(a.call(n,t),s[t]=!0)}"over"===u&&(s[t]=!1)})},c=function(){var e=this;this.one("_staffInfoSynced.orderPop",function(t){var n=e.getState("workorder")||{},r=n.dialog||{};l.call(e,n,"workorder"),l.call(e,r,"dialog")})};t.getUrl=i,t.openUrl=o,t.attachOrderPop=c},function(e,t){e.exports='<div class="dia-container">\n    <div class="dia-res-display">\n        <input type="text" <%=inputAble ? \'\' : \'readonly\'%> class="dia-number-input dia-res-number" />\n        <%if (inputAble) {%>\n            <span class="del icon hidden">\n                <svg viewBox="0 0 12 12"><use xlink:href="#close"></use></svg>\n            </span>\n        <%}%>\n    </div>\n    <table class="dia-number-container">\n        <tr>\n            <td class="number-1" val="1"><div>1</div></td>\n            <td class="number-2" val="2"><div>2</div></td>\n            <td class="number-3" val="3"><div>3</div></td>\n        </tr>\n        <tr>\n            <td class="number-4" val="4"><div>4</div></td>\n            <td class="number-5" val="5"><div>5</div></td>\n            <td class="number-6" val="6"><div>6</div></td>\n        </tr>\n        <tr>\n            <td class="number-7" val="7"><div>7</div></td>\n            <td class="number-8" val="8"><div>8</div></td>\n            <td class="number-9" val="9"><div>9</div></td>\n        </tr>\n        <tr>\n            <td class="number-*" val="*"><div>*</div></td>\n            <td class="number-0" val="0"><div>0</div></td>\n            <td class="number-#" val="#"><div>#</div></td>\n        </tr>\n    </table>\n</div>\n'},function(e,t,n){"use strict";function r(e){e=e||window;var t=e.document;return e.pageYOffset||t.documentElement.scrollTop||t.body.scrollTop}function i(e){e=e||window;var t=e.document;return e.pageXOffset||t.documentElement.scrollLeft||t.body.scrollLeft}function o(e){e=e||window;var t=e.document,n=t.body,r=t.documentElement,i="BackCompat"===t.compatMode?n:t.documentElement;return Math.max(r.scrollHeight,n.scrollHeight,i.clientHeight)}function a(e){e=e||window;var t=e.document,n=t.body,r=t.documentElement,i="BackCompat"===t.compatMode?n:t.documentElement;return Math.max(r.scrollWidth,n.scrollWidth,i.clientWidth)}function s(e){e=e||window;var t=e.document;return("BackCompat"===t.compatMode?t.body:t.documentElement).clientHeight}function l(e){e=e||window;var t=e.document;return("BackCompat"===t.compatMode?t.body:t.documentElement).clientWidth}function c(e){return e.ownerDocument&&e.ownerDocument.defaultView||null}function u(e){var t=void 0;if("viewport"===e){var n=r(),u=i(),d=l(),f=s();return{top:n,left:u,right:u+d,bottom:n+f,width:d,height:f}}if("html"===e||"HTML"===e.nodeName){var p=a(),h=o();return t={top:0,left:0,right:p,bottom:h,width:p,height:h}}window.navigator.appVersion.indexOf("MSIE 10");try{t=e.getBoundingClientRect()}catch(e){t={}}var g=c(e),m=r(g),v=i(g),b=(t.left||0)+v,_=(t.top||0)+m,y=t.width||0,w=t.height||0;return{left:b,top:_,right:b+y,bottom:_+w,width:y,height:w}}function d(e){var t=e.offsetParent,n=t&&t.nodeName.toLowerCase();return n&&"body"!==n&&"html"!==n?t:e.ownerDocument.documentElement}function f(e){var t={width:e.offsetWidth||parseInt(e.style.width,10),height:e.offsetHeight||parseInt(e.style.height,10)},n=getComputedStyle(e);return t.width+=parseFloat(n.marginLeft||0)+parseFloat(n.marginRight||0),t.height+=parseFloat(n.marginTop||0)+parseFloat(n.marginBottom||0),t}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,n=e.height,r=e.el,i=u(r),o=u("viewport"),a=r.style.transition,s=void 0,l=void 0;i.left+t>o.right&&(s=Math.max(o.right-t-7,0)),i.top+n>o.bottom&&(l=Math.max(o.bottom-n-4,0)),r.style.transition="left 0.15s ease, top 0.15s ease",r.style.top=l+"px",r.style.left=s+"px",setTimeout(function(){r.style.transition=a},150)}function h(e){var t=this.el,n=e.trigger,r=e.relativeEl,i=e.offsetX,o=void 0===i?0:i,a=e.offsetY,s=void 0===a?0:a,l=e.align,c=e.zIndex,d=e.container,p=e.ignoreRelative,h=!d||"BODY"===d.nodeName,g=p||!r?{bottom:0,height:0,left:0,right:0,top:0,width:0}:u(r),m=f(t),v=u(e.container||"viewport"),b={left:0,top:0,right:0,bottom:0,width:0,height:0},_=void 0,y=v.right-m.width+o;if(h&&(v.top=0,v.left=0),m.top=g.top+s,n&&(b=u(n),m.top+=b.top+b.height),"left"===l){var w=g.left-v.left;t.style.left=Math.min(w,y)+"px"}else if("right"===l){var x=2*parseInt(t.style.borderWidth,10)||0,k=g.left-v.left+g.width-m.width-x;t.style.left=Math.min(k,y)+"px"}else{var S=parseInt(t.style.left,10);S=S||g.left-v.left+(n?b.left:0)+o,t.style.left=Math.min(S,y)+"px"}if(t.style.position="absolute",(_=m.top-v.top)+m.height>v.top+v.height){var C=g.top-5-m.height;C>=v.top&&(_=C,t.classList.add("qd-revert"))}t.style.top=_+"px",t.style.zIndex=void 0!==c?c:1}Object.defineProperty(t,"__esModule",{value:!0}),t.getScrollTop=r,t.getScrollLeft=i,t.getPageHeight=o,t.getPageWidth=a,t.getViewHeight=s,t.getViewWidth=l,t.getWindow=c,t.getRect=u,t.getOffsetParent=d,t.getWidthAndHeight=f,t.setInViewPort=p,t.position=h,t.default=h},function(e,t,n){n(45),n(40),e.exports=n(263)},function(e,t,n){var r=n(12),i=n(91);e.exports=n(2).getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.clearHold=void 0;var i=n(11),o=r(i);t.default=function(e,t){var n=function(n){v[e]&&delete v[e],p.default.call(this,e,n,t)};return function(t){var r=this,i=this._isTicketExpired(),u=Date.now();if(v[e]){var d="";return i?d="ticket expired":c.isConnected?this._isYetConfiged()?d="not yet configed":"webrtc"!==this._getOptions("mode")||this._webrtcReady||(d="webrtc is not logined as yet"):d="disconnected",h.$log(e+" is already holded, "+d),this}if(t=(0,l.isObject)(t)?t:{},b=u+s.default.ns,t[s.default.ns]=b,this.once(""+s.default.prefix+e+"."+b+".actionResponse",function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=void 0,l=!1;a=void 0!==i.code?i.code:i.errcode,i.code=a,l=1===a||i.errstatus===s.default.code.ticketExpired,r.env&&(!r.env||r.env.inClient)||l||g.test(e)||a===s.default.code.limited||a===s.default.code.paramsError||r.report({apiName:e,responseTime:Date.now()-u,gseq:t.gseq,code:a,statusCode:a}),a===s.default.code.success?t.success&&t.success.call(r,i):l?("config"===e&&r._resetAuthorized(),r.off(s.default.prefix+e+"."+b),r.once(s.default.ev_goon_ticketExpired,r[e],t,r),h.$warn(e+" result as ticket expired, "+(0,o.default)(i)),r._setTicketExpired(!0,e)):(i.msg=i.errmsg||i.message||i.msg,t.fail&&t.fail.call(r,i)),t.complete&&a!==s.default.code.ticketExpired&&t.complete.call(r,i)}),"config"!==e){if(this._isYetConfiged()||i!==m&&(m=i)){var f=this._isYetConfiged()?s.default.ev_goon_holdAction:s.default.ev_goon_ticketExpired;return v[e]=!0,this.once(f,n,t),i&&this._setTicketExpired(!0),this}if(this._isConfigedFail())return this.trigger(s.default.prefix+e,this._getErrResponse()),h.$log(e+" is prevented, "+(0,o.default)(this._getErrResponse())),this;if(!(0,c.isConnected)())return a.reconnectActions.indexOf(e)>-1?(v[e]=!0,h.$log(e+" is prevented as disconnect, to connect again"),this.once(s.default.ev_goon_holdAction,n,t),this.connect(function(){r.goon({isHoldAction:!0})})):(this.trigger(s.default.prefix+e,{code:s.default.code.connectError,msg:s.default.connectFail}),h.$log(e+" is prevented, "+s.default.connectFail)),this;v[e]&&delete v[e]}return n.call(this,t),this}};var a=n(38),s=r(a),l=n(58),c=n(265),u=n(7),d=r(u),f=n(214),p=r(f),h=new d.default("actionStep"),g=/getQueueCountList|getNetWorkState|busiHeartbeat/,m=!1,v={},b=void 0;t.clearHold=function(){v={}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){e.mango?l.default.apply(this,arguments).then(function(e){c=e}):a.default.apply(this,arguments).then(function(e){c=e})}Object.defineProperty(t,"__esModule",{value:!0}),t.isConnected=void 0,t.default=i;var o=n(361),a=r(o),s=n(380),l=r(s),c=void 0,u=function(){return c&&c.isConnected()};t.isConnected=u},function(e,t,n){var r=function(){return this}()||Function("return this")(),i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n(267),i)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(e){r.regeneratorRuntime=void 0}},function(e,t){!function(t){"use strict";function n(e,t,n,r){var o=t&&t.prototype instanceof i?t:i,a=Object.create(o.prototype),s=new p(r||[]);return a._invoke=c(e,n,s),a}function r(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function i(){}function o(){}function a(){}function s(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function l(e){function t(n,i,o,a){var s=r(e[n],e,i);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==typeof c&&b.call(c,"__await")?Promise.resolve(c.__await).then(function(e){t("next",e,o,a)},function(e){t("throw",e,o,a)}):Promise.resolve(c).then(function(e){l.value=e,o(l)},a)}a(s.arg)}function n(e,n){function r(){return new Promise(function(r,i){t(e,n,r,i)})}return i=i?i.then(r,r):r()}var i;this._invoke=n}function c(e,t,n){var i=C;return function(o,a){if(i===E)throw new Error("Generator is already running");if(i===I){if("throw"===o)throw a;return g()}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var l=u(s,n);if(l){if(l===A)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===C)throw i=I,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=E;var c=r(e,t,n);if("normal"===c.type){if(i=n.done?I:T,c.arg===A)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=I,n.method="throw",n.arg=c.arg)}}}function u(e,t){var n=e.iterator[t.method];if(n===m){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=m,u(e,t),"throw"===t.method))return A;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return A}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,A;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=m),t.delegate=null,A):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,A)}function d(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function f(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function p(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(d,this),this.reset(!0)}function h(e){if(e){var t=e[y];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(b.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=m,t.done=!0,t};return r.next=r}}return{next:g}}function g(){return{value:m,done:!0}}var m,v=Object.prototype,b=v.hasOwnProperty,_="function"==typeof Symbol?Symbol:{},y=_.iterator||"@@iterator",w=_.asyncIterator||"@@asyncIterator",x=_.toStringTag||"@@toStringTag",k="object"==typeof e,S=t.regeneratorRuntime;if(S)return void(k&&(e.exports=S));S=t.regeneratorRuntime=k?e.exports:{},S.wrap=n;var C="suspendedStart",T="suspendedYield",E="executing",I="completed",A={},R={};R[y]=function(){return this};var O=Object.getPrototypeOf,L=O&&O(O(h([])));L&&L!==v&&b.call(L,y)&&(R=L);var P=a.prototype=i.prototype=Object.create(R);o.prototype=P.constructor=a,a.constructor=o,a[x]=o.displayName="GeneratorFunction",S.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===o||"GeneratorFunction"===(t.displayName||t.name))},S.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,x in e||(e[x]="GeneratorFunction")),e.prototype=Object.create(P),e},S.awrap=function(e){return{__await:e}},s(l.prototype),l.prototype[w]=function(){return this},S.AsyncIterator=l,S.async=function(e,t,r,i){var o=new l(n(e,t,r,i));return S.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},s(P),P[x]="Generator",P[y]=function(){return this},P.toString=function(){return"[object Generator]"},S.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},S.values=h,p.prototype={constructor:p,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=m,this.done=!1,this.delegate=null,this.method="next",this.arg=m,this.tryEntries.forEach(f),!e)for(var t in this)"t"===t.charAt(0)&&b.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=m)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,r){return o.type="throw",o.arg=e,n.next=t,r&&(n.method="next",n.arg=m),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=b.call(i,"catchLoc"),s=b.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&b.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,A):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),A},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),f(n),A}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;f(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:h(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=m),A}}}(function(){return this}()||Function("return this")())},function(e,t,n){"use strict";function r(e){return s&&(e instanceof ArrayBuffer||l(e))||u&&e instanceof Blob||d&&e instanceof File}function i(e,t){if(!e||"object"!==(void 0===e?"undefined":(0,a.default)(e)))return!1;if(Array.isArray(e)){for(var n=0,o=e.length;n<o;n++)if(i(e[n]))return!0;return!1}if(r(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return i(e.toJSON(),!0);for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&i(e[s]))return!0;return!1}Object.defineProperty(t,"__esModule",{value:!0});var o=n(28),a=function(e){return e&&e.__esModule?e:{default:e}}(o);t.isBinary=r,t.hasBinary=i;var s="function"==typeof ArrayBuffer,l=function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer},c=Object.prototype.toString,u="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===c.call(Blob),d="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===c.call(File)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nextTick=t.parse=t.installTimerFunctions=t.transports=t.Transport=t.protocol=t.Socket=void 0;var r=n(124);Object.defineProperty(t,"Transport",{enumerable:!0,get:function(){return r.Transport}});var i=n(272);Object.defineProperty(t,"transports",{enumerable:!0,get:function(){return i.transports}});var o=n(98);Object.defineProperty(t,"installTimerFunctions",{enumerable:!0,get:function(){return o.installTimerFunctions}});var a=n(274);Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return a.parse}});var s=n(164);Object.defineProperty(t,"nextTick",{enumerable:!0,get:function(){return s.nextTick}});var l=n(377);t.Socket=l.Socket;t.protocol=l.Socket.protocol},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ERROR_PACKET=t.PACKET_TYPES_REVERSE=t.PACKET_TYPES=void 0;var i=n(34),o=r(i),a=n(35),s=r(a),l=(0,s.default)(null);l.open="0",l.close="1",l.ping="2",l.pong="3",l.message="4",l.upgrade="5",l.noop="6";var c=(0,s.default)(null);(0,o.default)(l).forEach(function(e){c[l[e]]=e});var u={type:"error",data:"parser error"};t.PACKET_TYPES=l,t.PACKET_TYPES_REVERSE=c,t.ERROR_PACKET=u},function(e,t,n){"use strict";function r(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function i(e){for(var t={},n=e.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.encode=r,t.decode=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transports=void 0;var r=n(368),i=n(371),o=n(376);t.transports={websocket:i.WS,webtransport:o.WT,polling:r.Polling}},function(e,t,n){"use strict";function r(e){var t="";do{t=a[e%s]+t,e=Math.floor(e/s)}while(e>0);return t}function i(e){var t=0;for(u=0;u<e.length;u++)t=t*s+l[e.charAt(u)];return t}function o(){var e=r(+new Date);return e!==d?(c=0,d=e):e+"."+r(c++)}Object.defineProperty(t,"__esModule",{value:!0}),t.encode=r,t.decode=i,t.yeast=o;for(var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),s=64,l={},c=0,u=0,d=void 0;u<s;u++)l[a[u]]=u},function(e,t,n){"use strict";function r(e){var t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));for(var l=a.exec(e||""),c={},u=14;u--;)c[s[u]]=l[u]||"";return-1!=n&&-1!=r&&(c.source=t,c.host=c.host.substring(1,c.host.length-1).replace(/;/g,":"),c.authority=c.authority.replace("[","").replace("]","").replace(/;/g,":"),c.ipv6uri=!0),c.pathNames=i(c,c.path),c.queryKey=o(c,c.query),c}function i(e,t){var n=/\/{2,9}/g,r=t.replace(n,"/").split("/");return"/"!=t.slice(0,1)&&0!==t.length||r.splice(0,1),"/"==t.slice(-1)&&r.splice(r.length-1,1),r}function o(e,t){var n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,r){t&&(n[t]=r)}),n}Object.defineProperty(t,"__esModule",{value:!0}),t.parse=r;var a=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,s=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Socket=void 0;var i=n(57),o=r(i),a=n(14),s=r(a),l=n(8),c=r(l),u=n(13),d=r(u),f=n(4),p=r(f),h=n(5),g=r(h),m=n(20),v=r(m),b=n(163),_=r(b),y=n(21),w=r(y),x=n(155),k=r(x),S=n(162),C=n(276),T=n(88),E=(0,k.default)({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),I=function(e){function t(e,n,r){(0,p.default)(this,t);var i=(0,v.default)(this,(t.__proto__||(0,d.default)(t)).call(this));return i.connected=!1,i.recovered=!1,i.receiveBuffer=[],i.sendBuffer=[],i._queue=[],i._queueSeq=0,i.ids=0,i.acks={},i.flags={},i.io=e,i.nsp=n,r&&r.auth&&(i.auth=r.auth),i._opts=(0,c.default)({},r),i.io._autoConnect&&i.open(),i}return(0,w.default)(t,e),(0,g.default)(t,[{key:"subEvents",value:function(){if(!this.subs){var e=this.io;this.subs=[(0,C.on)(e,"open",this.onopen.bind(this)),(0,C.on)(e,"packet",this.onpacket.bind(this)),(0,C.on)(e,"error",this.onerror.bind(this)),(0,C.on)(e,"close",this.onclose.bind(this))]}}},{key:"connect",value:function(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen(),this)}},{key:"open",value:function(){return this.connect()}},{key:"send",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this}},{key:"emit",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(E.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;var i={type:S.PacketType.EVENT,data:n};if(i.options={},i.options.compress=!1!==this.flags.compress,"function"==typeof n[n.length-1]){var o=this.ids++,a=n.pop();this._registerAckCallback(o,a),i.id=o}var s=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!s||!this.connected)||(this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}},{key:"_registerAckCallback",value:function(e,t){var n,r=this,i=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===i)return void(this.acks[e]=t);var o=this.io.setTimeoutFn(function(){delete r.acks[e];for(var n=0;n<r.sendBuffer.length;n++)r.sendBuffer[n].id===e&&r.sendBuffer.splice(n,1);t.call(r,new Error("operation has timed out"))},i);this.acks[e]=function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];r.io.clearTimeoutFn(o),t.apply(r,[null].concat(n))}}},{key:"emitWithAck",value:function(e){for(var t=this,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=void 0!==this.flags.timeout||void 0!==this._opts.ackTimeout;return new s.default(function(n,i){r.push(function(e,t){return o?e?i(e):n(t):n(e)}),t.emit.apply(t,[e].concat(r))})}},{key:"_addToQueue",value:function(e){var t=this,n=void 0;"function"==typeof e[e.length-1]&&(n=e.pop());var r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:(0,c.default)({fromQueue:!0},this.flags)};e.push(function(e){for(var i=arguments.length,o=Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];if(r===t._queue[0]){return null!==e?r.tryCount>t._opts.retries&&(t._queue.shift(),n&&n(e)):(t._queue.shift(),n&&n.apply(void 0,[null].concat(o))),r.pending=!1,t._drainQueue()}}),this._queue.push(r),this._drainQueue()}},{key:"_drainQueue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.connected&&0!==this._queue.length){var t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}}},{key:"packet",value:function(e){e.nsp=this.nsp,this.io._packet(e)}},{key:"onopen",value:function(){var e=this;"function"==typeof this.auth?this.auth(function(t){e._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}},{key:"_sendConnectPacket",value:function(e){this.packet({type:S.PacketType.CONNECT,data:this._pid?(0,c.default)({pid:this._pid,offset:this._lastOffset},e):e})}},{key:"onerror",value:function(e){this.connected||this.emitReserved("connect_error",e)}},{key:"onclose",value:function(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}},{key:"onpacket",value:function(e){if(e.nsp===this.nsp)switch(e.type){case S.PacketType.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case S.PacketType.EVENT:case S.PacketType.BINARY_EVENT:this.onevent(e);break;case S.PacketType.ACK:case S.PacketType.BINARY_ACK:this.onack(e);break;case S.PacketType.DISCONNECT:this.ondisconnect();break;case S.PacketType.CONNECT_ERROR:this.destroy();var t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}},{key:"onevent",value:function(e){var t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push((0,k.default)(t))}},{key:"emitEvent",value:function(e){if(this._anyListeners&&this._anyListeners.length){var n=this._anyListeners.slice(),r=!0,i=!1,a=void 0;try{for(var s,l=(0,o.default)(n);!(r=(s=l.next()).done);r=!0){s.value.apply(this,e)}}catch(e){i=!0,a=e}finally{try{!r&&l.return&&l.return()}finally{if(i)throw a}}}(0,_.default)(t.prototype.__proto__||(0,d.default)(t.prototype),"emit",this).apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}},{key:"ack",value:function(e){var t=this,n=!1;return function(){for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];n||(n=!0,t.packet({type:S.PacketType.ACK,id:e,data:i}))}}},{key:"onack",value:function(e){var t=this.acks[e.id];"function"==typeof t&&(t.apply(this,e.data),delete this.acks[e.id])}},{key:"onconnect",value:function(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}},{key:"emitBuffered",value:function(){var e=this;this.receiveBuffer.forEach(function(t){return e.emitEvent(t)}),this.receiveBuffer=[],this.sendBuffer.forEach(function(t){e.notifyOutgoingListeners(t),e.packet(t)}),this.sendBuffer=[]}},{key:"ondisconnect",value:function(){this.destroy(),this.onclose("io server disconnect")}},{key:"destroy",value:function(){this.subs&&(this.subs.forEach(function(e){return e()}),this.subs=void 0),this.io._destroy(this)}},{key:"disconnect",value:function(){return this.connected&&this.packet({type:S.PacketType.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{key:"close",value:function(){return this.disconnect()}},{key:"compress",value:function(e){return this.flags.compress=e,this}},{key:"timeout",value:function(e){return this.flags.timeout=e,this}},{key:"onAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}},{key:"prependAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}},{key:"offAny",value:function(e){if(!this._anyListeners)return this;if(e){for(var t=this._anyListeners,n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}},{key:"listenersAny",value:function(){return this._anyListeners||[]}},{key:"onAnyOutgoing",value:function(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}},{key:"prependAnyOutgoing",value:function(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}},{key:"offAnyOutgoing",value:function(e){if(!this._anyOutgoingListeners)return this;if(e){for(var t=this._anyOutgoingListeners,n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}},{key:"listenersAnyOutgoing",value:function(){return this._anyOutgoingListeners||[]}},{key:"notifyOutgoingListeners",value:function(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){var t=this._anyOutgoingListeners.slice(),n=!0,r=!1,i=void 0;try{for(var a,s=(0,o.default)(t);!(n=(a=s.next()).done);n=!0){a.value.apply(this,e.data)}}catch(e){r=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}}}},{key:"disconnected",get:function(){return!this.connected}},{key:"active",get:function(){return!!this.subs}},{key:"volatile",get:function(){return this.flags.volatile=!0,this}}]),t}(T.Emitter);t.Socket=I},function(e,t,n){"use strict";function r(e,t,n){return e.on(t,n),function(){e.off(t,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.on=r},function(e,t,n){n(63),n(40),n(45),n(278),n(281),n(283),n(284),e.exports=n(2).Set},function(e,t,n){"use strict";var r=n(166),i=n(66);e.exports=n(126)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(i(this,"Set"),e=0===e?0:e,e)}},r)},function(e,t,n){var r=n(280);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(9),i=n(120),o=n(10)("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){var r=n(3);r(r.P+r.R,"Set",{toJSON:n(167)("Set")})},function(e,t,n){var r=n(54);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},function(e,t,n){n(127)("Set")},function(e,t,n){n(128)("Set")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};clearTimeout(u),t.kfuin=this.getState("uin"),t.server_name="jssdk",t.env=this.getState("socketEnv"),t.protocal=v,t.seqid=e.gseq||(0,c.gseq)(),t.server_cmd=e.apiName,t.ret_code=e.statusCode,t.response_code=e.code,t.response_time=e.responseTime,t.vendor=e.vendor,f.push(t),f.length>=p?m():u=setTimeout(m,d)}Object.defineProperty(t,"__esModule",{value:!0}),t.setUIProtocal=void 0;var o=n(11),a=r(o);t.default=i;var s=n(352),l=r(s),c=n(214),u=-1,d=1e4,f=[],p=50,h=new l.default("CCSDK_LOG_STACK"),g=void 0;!function(){var e=h.getItem(!0);e&&e.length>0&&(f=e),g||(g=window.addEventListener("beforeunload",function(){f&&f.length>0&&h.setItem(f)}))}();var m=function(){fetch&&fetch("https://rd.qidian.qq.com/fe/cmsreport/nv.cgi",{method:"POST",cache:"no-cache",body:(0,a.default)({__data_source_id:220002467,items:f.splice(0)})})},v="v3";t.setUIProtocal=function(e){v="v3-ui"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(137),o=r(i),a=n(46),s=r(a),l=n(141),c=r(l),u=n(287),d=r(u),f=-1,p=[],h=[],g=!1,m=0,v=new d.default("TRACKER_LOG_STACK"),b=void 0,_=!1,y="https://service-jrfqpzs4-1251316161.gz.apigw.tencentcs.com/release/rhino-log";!function(){var e=v.getItem(!0);e&&e.length>0&&(p=e),b||(b=window.addEventListener("beforeunload",function(){_=!0,v.setItem(h.concat(p))}))}();var w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return c.default.post(y,{logs:e}).catch(function(t){return h.length<1e3&&h.push.apply(h,(0,s.default)(e)),!1})},x=void 0,k=function(e,t){clearTimeout(x),x=setTimeout(e,t)},S=function(){h.length&&!g&&(g=!0,k(function(){w(h.splice(0)).then(function(e){g=!1,m=!1===e?++m:0})},5e3*Math.pow(2,m)))},C=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];-1!==f&&(p.length&&w(p.splice(0)),clearInterval(f)),e&&(f=setInterval(function(e){p.length?w(p.splice(0)):h.length&&!g&&S()},5e3))};t.default={setLogUrl:function(e){e&&(y=e)},send:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"trackerlog";w([(0,o.default)({},e,{_type:t})])},save:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"trackerlog";p.push((0,o.default)({},e,{_type:t})),_&&v.setItem(h.concat(p)),-1===f&&C()},clear:function(){C(!1)}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),o=r(i),a=n(4),s=r(a),l=n(5),c=r(l),u=function(){function e(t){(0,s.default)(this,e),this.key=t}return(0,c.default)(e,[{key:"getItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=void 0;try{var n=window.localStorage.getItem(this.key);e&&window.localStorage.removeItem(this.key),t=JSON.parse(n)}catch(e){}return t}},{key:"setItem",value:function(e){try{window.localStorage.setItem(this.key,(0,o.default)(e))}catch(e){}}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(84),o=r(i),a=n(56),s=r(a),l=n(4),c=r(l),u=n(5),d=r(u),f=!1,p=void 0,h={},g=void 0,m=function(){function e(t,n,r){(0,c.default)(this,e),this.qd=n,this.apiCached=h,r&&(g=this),(0,s.default)(this.constructor.prototype).forEach(function(e){n[e]&&"constructor"!==e&&!h[e]&&(h[e]=n[e].bind(n),(0,o.default)(n,e,{enumerable:!0,configurable:!0,get:function(){var t=h[e];return f?g[e]&&g[e].bind(g)||p[e]&&p[e].bind(p)||t:t}}))})}return(0,d.default)(e,[{key:"useAgentMethods",value:function(e){f=e}},{key:"agentMethods",value:function(){p=this,f=!0}}]),e}();t.default=m},function(e,t,n){e.exports={default:n(393),__esModule:!0}},function(e,t,n){e.exports={default:n(395),__esModule:!0}},function(e,t,n){e.exports={default:n(402),__esModule:!0}},function(e,t,n){e.exports={default:n(406),__esModule:!0}},function(e,t,n){e.exports={default:n(411),__esModule:!0}},function(e,t,n){e.exports={default:n(414),__esModule:!0}},function(e,t,n){e.exports={default:n(416),__esModule:!0}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(84),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e,t,n){return t in e?(0,i.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="",i=-1;if(document.currentScript)r=document.currentScript.src;else{var o=document.querySelector('script[src*="/qd"]');o&&(r=o.src||"")}i=r.lastIndexOf("/"),t.default=r.substr(0,i+1);t.scriptRoot=r},function(e,t,n){n(299);var r=n(2).Object;e.exports=function(e,t){return r.getOwnPropertyDescriptor(e,t)}},function(e,t,n){var r=n(29),i=n(61).f;n(43)("getOwnPropertyDescriptor",function(){return function(e,t){return i(r(e),t)}})},function(e,t,n){n(301),e.exports=n(2).Object.freeze},function(e,t,n){var r=n(9),i=n(49).onFreeze;n(43)("freeze",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(14),o=r(i),a=n(13),s=r(a),l=n(4),c=r(l),u=n(5),d=r(u),f=n(20),p=r(f),h=n(21),g=r(h),m=n(142),v=r(m),b=n(144),_=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(b),y=n(7),w=r(y),x=(new w.default("sound"),new w.default("ErrLog")),k=window.AudioContext||window.webkitAudioContext,S={},C=v.default.extend(_),T=function(e){function t(e){(0,c.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,s.default)(t)).call(this));if(S[e]){var r;return r=S[e],(0,p.default)(n,r)}return n.context_=new k,n.instant_=0,n.slow_=0,n.clip_=0,n.script_=n.context_.createScriptProcessor(2048,1,1),n.script_.onaudioprocess=function(e){var t=e.inputBuffer.getChannelData(0),r=e.outputBuffer.getChannelData(0),i=void 0,o=0,a=0;for(i=0;i<t.length;++i)o+=t[i]*t[i],Math.abs(t[i])>.99&&(a+=1);n.instant_=Math.sqrt(o/t.length),n.slow_=.95*n.slow_+.05*n.instant_,n.clip_=a/t.length,n.trigger("decibelChange",n.instant_.toFixed(2));for(var s=0;s<t.length;s++)r[s]=t[s]},S[e]=n,n}return(0,g.default)(t,e),(0,d.default)(t,[{key:"connectToSource",value:function(e,t){try{this.context_.resume(),e.connect?this.mic_=e:this.mic_=this.context_.createMediaStreamSource(e),this.mic_.connect(this.script_),this.script_.connect(this.context_.destination),void 0!==t&&t(null)}catch(e){x.$error("soundMeter connectoToSource error: "+e.message),void 0!==t&&t(e)}}},{key:"getMediaElementSource",value:function(e){return this.context_.createMediaElementSource(e)}},{key:"stop",value:function(){var e=this;return new o.default(function(t,n){setTimeout(function(n){e.mic_&&e.mic_.disconnect(),e.script_.disconnect(),t()},50)})}},{key:"getVolume",value:function(){return this.instant_.toFixed(2)}}]),t}(C);t.default=T},function(e,t,n){"use strict";var r=n(253);n.d(t,"b",function(){return r.a});var i=n(158);n.d(t,"o",function(){return i.a});var o=n(450);n.d(t,"q",function(){return o.a});var a=n(311);n.d(t,"d",function(){return a.a});var s=n(313);n.d(t,"s",function(){return s.a});var l=n(314);n.d(t,"e",function(){return l.a});var c=n(459);n.d(t,"t",function(){return c.a});var u=n(258);n.d(t,"c",function(){return u.a});var d=n(315);n.d(t,"a",function(){return d.a});var f=n(460);n.d(t,"h",function(){return f.a});var p=n(44);n.d(t,"l",function(){return p.d}),n.d(t,"i",function(){return p.b}),n.d(t,"k",function(){return p.c});var h=n(461);n.d(t,"j",function(){return h.a});var g=n(462);n.d(t,"f",function(){return g.a});var m=n(307);n.d(t,"n",function(){return m.a}),n.d(t,"p",function(){return m.b});var v=n(159);n.d(t,"m",function(){return v.a});var b=n(256);n.d(t,"r",function(){return b.b}),n.d(t,"g",function(){return b.a})},function(e,t,n){"use strict";function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){i(e,t,n[t])})}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t,n){return Object(a.a)(e,r({},t,{v2:!0}),n)}t.a=o;var a=n(254)},function(e,t,n){"use strict";function r(e){return e.length>=i.c&&l.test(e)}t.a=r;var i=n(74),o=n(255),a="["+i.e+"]{"+i.c+"}",s="["+i.d+"]{0,1}(?:["+i.f+"]*["+i.e+"]){3,}["+i.f+i.e+"]*",l=new RegExp("^"+a+"$|^"+s+"(?:"+o.b+")?$","i")},function(e,t,n){"use strict";function r(e){for(var t="",n=e.split(""),r=Array.isArray(n),o=0,n=r?n:n[Symbol.iterator]();;){var a;if(r){if(o>=n.length)break;a=n[o++]}else{if(o=n.next(),o.done)break;a=o.value}t+=i(a,t)||""}return t}function i(e,t){if("+"===e){if(t)return;return"+"}return Object(o.b)(e)}t.a=r,t.b=i;var o=n(159)},function(e,t,n){"use strict";function r(e,t,n){if(void 0===t&&(t={}),n=new o.a(n),t.v2){if(!e.countryCallingCode)throw new Error("Invalid phone number object passed");n.chooseCountryByCountryCallingCode(e.countryCallingCode)}else{if(!e.phone)return!1;if(e.country){if(!n.hasCountry(e.country))throw new Error("Unknown country: ".concat(e.country));n.country(e.country)}else{if(!e.countryCallingCode)throw new Error("Invalid phone number object passed");n.chooseCountryByCountryCallingCode(e.countryCallingCode)}}if(n.possibleLengths())return i(e.phone||e.nationalNumber,void 0,n);if(e.countryCallingCode&&n.isNonGeographicCallingCode(e.countryCallingCode))return!0;throw new Error('Missing "possibleLengths" in metadata. Perhaps the metadata has been generated before v1.0.18.')}function i(e,t,n){switch(Object(a.a)(e,void 0,n)){case"IS_POSSIBLE":return!0;default:return!1}}t.a=r,t.b=i;var o=n(44),a=n(139)},function(e,t,n){"use strict";function r(e,t){var n=new o.a(t);return n.country(e),l.test(n.IDDPrefix())?n.IDDPrefix():n.defaultIDDPrefix()}function i(e,t,n){if(t){var r=new o.a(n);r.country(t);var i=new RegExp(r.IDDPrefix());if(0===e.search(i)){e=e.slice(e.match(i)[0].length);var a=e.match(s);if(!(a&&null!=a[1]&&a[1].length>0&&"0"===a[1]))return e}}}t.a=r,t.b=i;var o=n(44),a=n(74),s=new RegExp("(["+a.e+"])"),l=/^[\d]+(?:[~\u2053\u223C\uFF5E][\d]+)?$/},function(e,t,n){"use strict";function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){i(e,t,n[t])})}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t,n,i){if(n=n?r({},v,n):v,i=new h.a(i),e.country&&"001"!==e.country){if(!i.hasCountry(e.country))throw new Error("Unknown country: ".concat(e.country));i.country(e.country)}else{if(!e.countryCallingCode)return e.phone||"";i.chooseCountryByCountryCallingCode(e.countryCallingCode)}var o,a=i.countryCallingCode(),l=n.v2?e.nationalNumber:e.phone;switch(t){case"NATIONAL":return l?(o=s(l,"NATIONAL",i,n),u(o,e.ext,i,n.formatExtension)):"";case"INTERNATIONAL":return l?(o=s(l,"INTERNATIONAL",i,n),o="+".concat(a," ").concat(o),u(o,e.ext,i,n.formatExtension)):"+".concat(a);case"E.164":return"+".concat(a).concat(l);case"RFC3966":return Object(m.a)({number:"+".concat(a).concat(l),ext:e.ext});case"IDD":if(!n.fromCountry)return;var c=Object(g.a)(n.fromCountry,i.metadata);if(!c)return;if(n.humanReadable){var f=a&&d(l,i.countryCallingCode(),n.fromCountry,i,n);return o=f||"".concat(c," ").concat(a," ").concat(s(l,"INTERNATIONAL",i,n)),u(o,e.ext,i,n.formatExtension)}return"".concat(c).concat(a).concat(l);default:throw new Error('Unknown "format" argument passed to "formatNumber()": "'.concat(t,'"'))}}function a(e,t,n,r,i){var o=e.replace(new RegExp(t.pattern()),n?t.internationalFormat():r&&t.nationalPrefixFormattingRule()?t.format().replace(b,t.nationalPrefixFormattingRule()):t.format());return n?c(o):o}function s(e,t,n,r){var i=l(n.formats(),e);return i?a(e,i,"INTERNATIONAL"===t,!i.nationalPrefixIsOptionalWhenFormattingInNationalFormat()||!1!==r.nationalPrefix,n):e}function l(e,t){for(var n=e,r=Array.isArray(n),i=0,n=r?n:n[Symbol.iterator]();;){var o;if(r){if(i>=n.length)break;o=n[i++]}else{if(i=n.next(),i.done)break;o=i.value}var a=o;if(a.leadingDigitsPatterns().length>0){var s=a.leadingDigitsPatterns()[a.leadingDigitsPatterns().length-1];if(0!==t.search(s))continue}if(Object(p.a)(t,a.pattern()))return a}}function c(e){return e.replace(new RegExp("[".concat(f.f,"]+"),"g")," ").trim()}function u(e,t,n,r){return t?r(e,t,n):e}function d(e,t,n,r,i){var o=new h.a(r.metadata);if(o.country(n),t===o.countryCallingCode())return"1"===t?t+" "+s(e,"NATIONAL",r,i):s(e,"NATIONAL",r,i)}t.c=o,n.d(t,"a",function(){return b}),t.d=a,t.b=c;var f=n(74),p=n(138),h=n(44),g=n(309),m=n(256),v={formatExtension:function(e,t,n){return"".concat(e).concat(n.ext()).concat(t)}},b=/(\$\d)/},function(e,t,n){"use strict";function r(){var e=Object(o.b)(arguments),t=e.text,n=e.options,r=e.metadata;return Object(i.a)(t,n,r)}t.a=r;var i=n(452),o=n(158)},function(e,t,n){"use strict";function r(e){return!(!f.test(e)&&!m.test(e))&&v.test(e)}function i(e){return"%"===e||h.test(e)}n.d(t,"g",function(){return a}),n.d(t,"a",function(){return s}),n.d(t,"c",function(){return l}),n.d(t,"f",function(){return c}),n.d(t,"b",function(){return u}),t.e=r,t.d=i;var o="   ᠎ - \u2028\u2029  　",a="[".concat(o,"]"),s="[^".concat(o,"]"),l="0-9²³¹¼-¾٠-٩۰-۹߀-߉०-९০-৯৴-৹੦-੯૦-૯୦-୯୲-୷௦-௲౦-౯౸-౾೦-೯൦-൵๐-๙໐-໙༠-༳၀-၉႐-႙፩-፼ᛮ-ᛰ០-៩៰-៹᠐-᠙᥆-᥏᧐-᧚᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙⁰⁴-⁹₀-₉⅐-ↂↅ-↉①-⒛⓪-⓿❶-➓⳽〇〡-〩〸-〺㆒-㆕㈠-㈩㉈-㉏㉑-㉟㊀-㊉㊱-㊿꘠-꘩ꛦ-ꛯ꠰-꠵꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹０-９",c="[".concat("0-9٠-٩۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹０-９","]"),u="A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",d="[".concat(u,"]"),f=new RegExp(d),p="[".concat("$¢-¥֏؋৲৳৻૱௹฿៛₠-₹꠸﷼﹩＄￠￡￥￦","]"),h=new RegExp(p),g="[".concat("̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣤ-ࣾऀ-ंऺ़ु-ै्॑-ॗॢॣঁ়ু-ৄ্ৢৣਁਂ਼ੁੂੇੈੋ-੍ੑੰੱੵઁં઼ુ-ૅેૈ્ૢૣଁ଼ିୁ-ୄ୍ୖୢୣஂீ்ా-ీె-ైొ-్ౕౖౢౣ಼ಿೆೌ್ೢೣു-ൄ്ൢൣ්ි-ුූัิ-ฺ็-๎ັິ-ູົຼ່-ໍཱ༹༘༙༵༷-ཾྀ-྄྆྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္်ွှၘၙၞ-ၠၱ-ၴႂႅႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧᤨᤲ᤹-᤻ᨘᨗᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀᮁᮢ-ᮥᮨᮩ᯦᮫ᯨᯩᯭᯯ-ᯱᰬ-ᰳᰶ᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᷀-ᷦ᷼-᷿⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〭꙯ꙴ-꙽ꚟ꛰꛱ꠂ꠆ꠋꠥꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꨩ-ꨮꨱꨲꨵꨶꩃꩌꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫬꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︦","]"),m=new RegExp(g),v=new RegExp("[\0--ÿĀ-ſḀ-ỿƀ-ɏ̀-ͯ]")},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(){var e=Object(o.b)(arguments),t=e.text,n=e.options,i=e.metadata,s=new a.a(t,n,i);return r({},Symbol.iterator,function(){return{next:function(){return s.hasNext()?{done:!1,value:s.next()}:{done:!0}}}})}t.a=i;var o=n(158),a=n(258)},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t,n,r){var i=s(t,n,r);return Object(l.a)(e,i.options,i.metadata)}function s(e,t,n){return n?e&&(t=i({},t,{defaultCountry:e})):t?(n=t,t=e?c(e)?e:{defaultCountry:e}:void 0):(n=e,t=void 0),{options:i({},t,{v2:!0}),metadata:n}}t.a=a,t.b=s;var l=n(311),c=function(e){return"object"===r(e)}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){for(var t=[],n=0;n<e.length;)"("===e[n]?t.push(n):")"===e[n]&&t.pop(),n++;var r=0,i="";t.push(e.length);for(var o=0,a=t;o<a.length;o++){var s=a[o];i+=e.slice(r,s),r=s+1}return i}function c(e,t){return")"===e[t]&&t++,l(e.slice(0,t))}function u(e,t){if(t<1)return"";for(var n="";t>1;)1&t&&(n+=e),t>>=1,e+=e;return n+e}n.d(t,"a",function(){return T});var d=n(44),f=n(160),p=n(74),h=(n(138),n(254)),g=n(310),m=(n(139),n(159)),v=u("9",15),b=new RegExp("x"),_=/[- ]/,y=function(){return/\[([^\[\]])*\]/g},w=function(){return/\d(?=[^,}][^,}])/g},x=new RegExp("^["+p.f+"]*(\\$\\d["+p.f+"]*)+$"),k="["+p.d+"]{0,1}["+p.f+p.e+"]*",S=new RegExp("^"+k+"$","i"),C=!1,T=function(){function e(t,n){i(this,e),s(this,"options",{}),this.metadata=new d.a(n);var o,a;t&&("object"===r(t)?(o=t.defaultCountry,a=t.defaultCallingCode):o=t),o&&this.metadata.hasCountry(o)&&(this.defaultCountry=o),a&&(C&&this.metadata.isNonGeographicCallingCode(a)&&(this.defaultCountry="001"),this.defaultCallingCode=a),this.reset()}return a(e,[{key:"reset",value:function(){return this.formattedOutput="",this.international=void 0,this.countryCallingCode=void 0,this.digits="",this.nationalNumberDigits="",this.nationalPrefix="",this.carrierCode="",this.setCountry(this.defaultCountry,this.defaultCallingCode),this.resetFormat(),this}},{key:"setCountry",value:function(e,t){this.country=e,this.metadata.selectNumberingPlan(e,t),this.metadata.hasSelectedNumberingPlan()?this.initializePhoneNumberFormatsForCountry():this.matchingFormats=[]}},{key:"resetFormat",value:function(){this.chosenFormat=void 0,this.template=void 0,this.populatedNationalNumberTemplate=void 0,this.populatedNationalNumberTemplatePosition=-1}},{key:"input",value:function(e){var t=this.extractFormattedDigits(e);return S.test(t)&&(this.formattedOutput=this.getFullNumber(this.inputDigits(Object(m.a)(t))||this.getNonFormattedNationalNumber())),this.formattedOutput}},{key:"extractFormattedDigits",value:function(e){var t=Object(h.c)(e)||"";return t||e&&e.indexOf("+")>=0&&(t="+"),"+"===t[0]&&(t=t.slice("+".length),this.digits||this.startInternationalNumber()),t}},{key:"startInternationalNumber",value:function(){this.international=!0,this.setCountry()}},{key:"inputDigits",value:function(e){if(this.digits+=e,this.isInternational())if(this.countryCallingCode)this.nationalNumberDigits+=e,this.country&&!this.isCountryCallingCodeAmbiguous()||this.determineTheCountry();else{if(!this.digits)return;if(!this.extractCountryCallingCode())return;this.nationalNumberDigits=this.digits.slice(this.countryCallingCode.length),this.determineTheCountry()}else{this.nationalNumberDigits+=e,this.country||this.determineTheCountry();var t=this.nationalPrefix;this.nationalNumberDigits=this.nationalPrefix+this.nationalNumberDigits,this.extractNationalPrefix(),this.nationalPrefix!==t&&(this.initializePhoneNumberFormatsForCountry(),this.resetFormat())}return this.nationalNumberDigits&&this.matchFormats(this.nationalNumberDigits),this.formatNationalNumberWithNextDigits(e)}},{key:"formatNationalNumberWithNextDigits",value:function(e){var t=this.attemptToFormatCompletePhoneNumber();if(t)return t;var n=this.chosenFormat,r=this.chooseFormat();return r?r===n?this.formatNextNationalNumberDigits(e):this.reformatNationalNumber():void 0}},{key:"chooseFormat",value:function(){for(var e=this.matchingFormats,t=Array.isArray(e),n=0,e=t?e:e[Symbol.iterator]();;){var r;if(t){if(n>=e.length)break;r=e[n++]}else{if(n=e.next(),n.done)break;r=n.value}var i=r;if(this.chosenFormat===i)break;if(this.createFormattingTemplate(i)){this.chosenFormat=i,this.populatedNationalNumberTemplatePosition=-1;break}}return this.chosenFormat||this.resetFormat(),this.chosenFormat}},{key:"reformatNationalNumber",value:function(){return this.formatNextNationalNumberDigits(this.nationalPrefix+this.nationalNumberDigits)}},{key:"initializePhoneNumberFormatsForCountry",value:function(){this.matchingFormats=this.metadata.formats().filter(function(e){return x.test(e.internationalFormat())})}},{key:"matchFormats",value:function(e){var t=this,n=e.length-3;n<0&&(n=0),this.matchingFormats=this.matchingFormats.filter(function(r){if(!t.isInternational()&&!t.nationalPrefix&&r.nationalPrefixIsMandatoryWhenFormattingInNationalFormat())return!1;var i=r.leadingDigitsPatterns().length;if(0===i)return!0;if(e.length<3)return!0;n=Math.min(n,i-1);var o=r.leadingDigitsPatterns()[n];return new RegExp("^(".concat(o,")")).test(e)}),this.chosenFormat&&-1===this.matchingFormats.indexOf(this.chosenFormat)&&this.resetFormat()}},{key:"getSeparatorAfterNationalPrefix",value:function(e){return"1"===this.metadata.countryCallingCode()?" ":e&&e.nationalPrefixFormattingRule()&&_.test(e.nationalPrefixFormattingRule())?" ":""}},{key:"attemptToFormatCompletePhoneNumber",value:function(){for(var e=this.matchingFormats,t=Array.isArray(e),n=0,e=t?e:e[Symbol.iterator]();;){var r;if(t){if(n>=e.length)break;r=e[n++]}else{if(n=e.next(),n.done)break;r=n.value}var i=r;if(new RegExp("^(?:".concat(i.pattern(),")$")).test(this.nationalNumberDigits)){var o=Object(g.d)(this.nationalNumberDigits,i,this.isInternational(),!1,this.metadata);if(Object(m.a)(o)===this.nationalNumberDigits){if(this.nationalPrefix){var a=Object(g.d)(this.nationalNumberDigits,i,this.isInternational(),!0,this.metadata);o=Object(m.a)(a)===this.nationalPrefix+this.nationalNumberDigits?a:this.nationalPrefix+this.getSeparatorAfterNationalPrefix(i)+o}return this.resetFormat(),this.chosenFormat=i,this.createFormattingTemplate(i)?this.reformatNationalNumber():(this.template=this.getFullNumber(o).replace(/[\d\+]/g,"x"),this.populatedNationalNumberTemplate=o,this.populatedNationalNumberTemplatePosition=this.populatedNationalNumberTemplate.length-1),o}}}}},{key:"getFullNumber",value:function(e){return this.isInternational()?this.countryCallingCode?e?"+".concat(this.countryCallingCode," ").concat(e):"+".concat(this.countryCallingCode):"+".concat(this.digits):e}},{key:"getNonFormattedNationalNumber",value:function(){return this.nationalPrefix+(this.nationalPrefix&&this.nationalNumberDigits&&this.getSeparatorAfterNationalPrefix())+this.nationalNumberDigits}},{key:"extractCountryCallingCode",value:function(){var e=Object(h.b)("+"+this.digits,this.defaultCountry,this.metadata.metadata),t=e.countryCallingCode,n=e.number;if(t)return this.nationalNumberDigits=n,this.countryCallingCode=t,this.metadata.chooseCountryByCountryCallingCode(t),this.initializePhoneNumberFormatsForCountry(),this.resetFormat(),this.metadata.hasSelectedNumberingPlan()}},{key:"extractNationalPrefix",value:function(){if(this.nationalPrefix="",this.metadata.hasSelectedNumberingPlan()){var e=Object(h.e)(this.nationalNumberDigits,this.metadata),t=e.nationalNumber,n=e.carrierCode;if(t){var r=this.nationalNumberDigits.indexOf(t);if(r<0||r!==this.nationalNumberDigits.length-t.length)return}return n&&(this.carrierCode=n),this.nationalPrefix=this.nationalNumberDigits.slice(0,this.nationalNumberDigits.length-t.length),this.nationalNumberDigits=t,this.nationalPrefix}}},{key:"isCountryCallingCodeAmbiguous",value:function(){var e=this.metadata.getCountryCodesForCallingCode(this.countryCallingCode);return e&&e.length>1}},{key:"createFormattingTemplate",value:function(e){if(!(e.pattern().indexOf("|")>=0)){var t=this.getTemplateForNumberFormatPattern(e,this.nationalPrefix);if(t)return this.template=t,this.populatedNationalNumberTemplate=t,this.isInternational()&&(this.template="x"+u("x",this.countryCallingCode.length)+" "+t),this.template}}},{key:"getTemplateForNumberFormatPattern",value:function(e,t){var n=e.pattern();n=n.replace(y(),"\\d").replace(w(),"\\d");var r=v.match(n)[0];if(!(this.nationalNumberDigits.length>r.length)){var i=new RegExp("^"+n+"$"),o=this.nationalNumberDigits.replace(/\d/g,"9");i.test(o)&&(r=o);var a,s=this.getFormatFormat(e);if(t&&e.nationalPrefixFormattingRule()){var l=s.replace(g.a,e.nationalPrefixFormattingRule());if(Object(m.a)(l)===t+Object(m.a)(s)){s=l,a=!0;for(var c=t.length;c>0;)s=s.replace(/\d/,"x"),c--}}var d=r.replace(new RegExp(n),s).replace(new RegExp("9","g"),"x");return t&&(a||(d=u("x",t.length)+this.getSeparatorAfterNationalPrefix(e)+d)),d}}},{key:"formatNextNationalNumberDigits",value:function(e){for(var t=e.split(""),n=Array.isArray(t),r=0,t=n?t:t[Symbol.iterator]();;){var i;if(n){if(r>=t.length)break;i=t[r++]}else{if(r=t.next(),r.done)break;i=r.value}var o=i;if(this.populatedNationalNumberTemplate.slice(this.populatedNationalNumberTemplatePosition+1).search(b)<0)return void this.resetFormat();this.populatedNationalNumberTemplatePosition=this.populatedNationalNumberTemplate.search(b),this.populatedNationalNumberTemplate=this.populatedNationalNumberTemplate.replace(b,o)}return c(this.populatedNationalNumberTemplate,this.populatedNationalNumberTemplatePosition+1)}},{key:"isInternational",value:function(){return this.international}},{key:"getFormatFormat",value:function(e){return this.isInternational()?Object(g.b)(e.internationalFormat()):e.format()}},{key:"determineTheCountry",value:function(){this.country=Object(h.d)(this.isInternational()?this.countryCallingCode:this.defaultCallingCode,this.nationalNumberDigits,this.metadata)}},{key:"getNumber",value:function(){if(this.isInternational()){if(!this.countryCallingCode)return}else if(!this.country&&!this.defaultCallingCode)return;if(this.nationalNumberDigits){var e=this.country;C&&"001"===this.country&&(e=void 0);var t=this.countryCallingCode||this.defaultCallingCode,n=new f.a(e||t,this.nationalNumberDigits,this.metadata.metadata);return this.carrierCode&&(n.carrierCode=this.carrierCode),n}}},{key:"getNationalNumber",value:function(){return this.nationalNumberDigits}},{key:"getNonFormattedTemplate",value:function(){return this.getFullNumber(this.getNonFormattedNationalNumber()).replace(/[\+\d]/g,"x")}},{key:"getTemplate",value:function(){if(!this.template)return this.getNonFormattedTemplate();for(var e=-1,t=0;t<(this.international?1:0)+this.digits.length;)e=this.template.indexOf("x",e+1),t++;return c(this.template,e+1)}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isLogin=void 0,t.default=function(e){var t=e._getOptions(),n=t.mode;if(c)return void("webrtc"!==n&&e.initializeState());c=!0,"webrtc"!==n&&e.initializeState(),e.one("_qdrtcCreated.initialize",function(){"webrtc"===n&&e.initializeState()}),o.attachOrderPop.call(e),a.attachAsrPop.call(e),e.one("sipRing.initialize",function(){e.answer()}),e.one("tipMsg.initialize",function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.getState().callid;r&&n.callid!==r||!n.message||e.showTip(n.message,n.type)}),e.one("pushEvent.initialize",function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.data||{};"notice"===n.event&&r.message&&e.showTip(r.message,r.type||"info")});var r=void 0,d=function t(n){clearTimeout(r),["connect","calling","online"].indexOf(n)>-1&&(r=setTimeout(function(){e.syncState(function(){var r=e.getState("status");r===n&&t(r)})},1e4))};e.one("stateChange.initialize",function(t,n){var o=e._getOptions("isLocal")||e.getState("isLocal"),a=e.getState("callType")===s.callTypeCode.normal;l.$log("agentbar's view is changed to "+n),"over"===n&&i.default.$startNewTrace(),clearTimeout(r),!o&&a&&d(n)}),e.one("workStatusChange.initialize",function(t,n){var r=e.getState(),i=r.ccStatus,o=-1===i,a=n.status;if(e.trigger("_syncAgentStatus",a),n.isPassive){var s=o?"小休":i?"空闲":"忙碌",l=a?"空闲":"忙碌";s!==l&&e.showTip("管理员"+(n.name||"")+"修改了你的状态，从"+s+"变为"+l,"tip",!0)}}),e.one("answerTypeChange.initialize",function(t,n){var r=["-","PSTN","VOIP"],i=e.getState().answerType,o=n.AnswerType;if(e.setState("answerType",o),e.trigger("_syncAnswerType",o),n.isPassive){var a=r[i],s=r[o];a!==s&&e.showTip("管理员"+(n.name||"")+"修改了电话接听/外呼方式，从"+a+"变为"+s,"tip",!0)}}),e.one("disposableStatusChange.initialize",function(t,n){e.getState("callid")===n.callid&&e.setState("disposableId",n.status)}),e.one("login.initialize",function(){u=!0}),e.one("logout.initialize",function(){u=!1})};var r=n(7),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=n(259),a=n(463),s=n(59),l=new i.default("barState"),c=!1,u=!1;t.isLogin=function(){return u}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),o=r(i),a=n(5),s=r(a),l=n(168),c=r(l),u=[],d=0,f=function(){var e=0;return u.forEach(function(t){"pause"!==t.state&&++e}),e},p=function(){u.forEach(function(e){"pause"!==e.state&&e.cb.call(e.ctx,e.time)})},h=function(){f()?0===d&&(d=setInterval(p,1e3)):d&&g()},g=function(){clearInterval(d),d=0},m=function(e){u.push(e),h()},v=function(e){var t=u.findIndex(function(t){return t.id===e});t>=0&&(u.splice(t,1),0===u&&g())},b=function(e,t){var n=u.filter(function(t){return t.id===e})[0];n&&(n.state=t)&&h()},_=function(){return"t-"+Math.floor(9e3*Math.random()+1e3)},y=function(){function e(t){(0,o.default)(this,e),this.id=_(),this.time=0,this.prevTime=0,m({id:this.id,ctx:this,cb:function(){this.ticker&&this.ticker(this.time),this.$el&&(this.$el.text((0,c.default)(this.time)),this.time>=3600&&this.$el.addClass("t-long")),++this.time},state:"pause"}),t&&(this.setDynamicEl=t)}return(0,s.default)(e,[{key:"setEle",value:function(e){var t=this.$el=e||this.setDynamicEl&&this.setDynamicEl();t&&(t.removeClass("t-long"),t.text((0,c.default)(this.time)))}},{key:"start",value:function(){this.time=0,this.setEle(),b(this.id,"running"),this.lastAction="start"}},{key:"recount",value:function(e){"recount"!==this.lastAction&&(this.prevTime=this.time),this.time=0,this.setEle(e),b(this.id,"running"),this.lastAction="recount"}},{key:"resume",value:function(){this.setEle(),"resume"!==this.lastAction&&(this.time=this.prevTime||this.time),b(this.id,"running"),this.lastAction="resume"}},{key:"pause",value:function(){this.prevTime=this.time,b(this.id,"pause"),this.lastAction="pause"}},{key:"stop",value:function(){this.reset(),b(this.id,"pause"),this.lastAction="stop"}},{key:"reset",value:function(){this.prevTime=this.time=0}},{key:"formatTime",value:function(e){return(0,c.default)(e)}},{key:"getTime",value:function(){return this.time}},{key:"setTime",value:function(e){return this.time=e}},{key:"getTimeStr",value:function(){return(0,c.default)(this.time)}},{key:"onTick",value:function(e){"function"==typeof e&&(this.ticker=e)}},{key:"clearTick",value:function(){this.ticker=null}},{key:"destroy",value:function(){v(this.id)}}]),e}();t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(95),o=r(i),a=n(46),s=r(a),l=n(89),c=r(l),u=n(4),d=r(u),f=n(5),p=r(f),h=n(140),g=r(h),m=n(165),v=r(m),b=n(7),_=r(b),y=new _.default("ErrTip"),w=["qd__animated","qd__slideDown","qd__slideInDown","qd__slideUp","qd__slideOutUp"],x=function(){function e(t){(0,d.default)(this,e),this.evt=t.evt,this.doc=t.doc||document,this.isCover=t.isCover,this.maxCount=t.maxCount||3,this.className=t.className,this.queue=[],this.queueRemove=[],this.queueShowing=new c.default,this.count=0,this.rendering=!1}return(0,p.default)(e,[{key:"info",value:function(e,t,n){this.notify({type:"info",duration:t,message:e,__id:n})}},{key:"error",value:function(e,t,n){this.notify({type:"error",duration:t,message:e,__id:n})}},{key:"success",value:function(e,t,n){this.notify({type:"success",duration:t,message:e,__id:n})}},{key:"warning",value:function(e,t,n){this.notify({type:"warning",duration:t,message:e,__id:n})}},{key:"notify",value:function(e){var t=e.__id=e.__id||this.generateId();if(!this.queueShowing.has(t))return e.type=e.type||"info","error"!==e.type&&"warning"!==e.type||y.$error(e.message),e.closeAble||(e.duration=void 0===e.duration?3:e.duration,0===e.duration&&(e.closeAble=!0)),this.rendering||this.count>=this.maxCount?this.queue.push(e):this.show(e),t}},{key:"next",value:function(e){e&&-1===this.queueRemove.indexOf(e)&&this.queueRemove.push(e),this.rendering||(this.count<this.maxCount&&this.queue.length?this.show(this.queue.shift()):this.queueRemove.length&&this.hide(this.queueRemove.shift()))}},{key:"getSiblings",value:function(e){return Array.prototype.slice.call(this.container.querySelectorAll(e))}},{key:"show",value:function(e){var t=this.getContainer();"none"===t.style.display&&(t.style.display="block",(0,v.default)(t,["qd__animated","qd__bgfadeIn"],w)),this.render(e,t)}},{key:"clear",value:function(){var e;this.queue.length=0,(e=this.queueRemove).push.apply(e,(0,s.default)((0,o.default)(this.queueShowing))),this.next()}},{key:"hide",value:function(e){var t=this,n=void 0,r=e&&this.doc.querySelector("#"+e);return e&&r?(this.rendering=!0,r.classList.add("q-current"),n=this.getSiblings(".q-current ~ .item"),(0,v.default)(n,["qd__animated","qd__slideUp"],w),(0,v.default)(r,["qd__animated","qd__slideOutUp"],w).then(function(n){t.rendering=!1,r.parentElement&&(r.parentElement.removeChild(r),--t.count,t.queueShowing.delete(e),0!==t.count||0!==t.queue.length||t.rendering||(0,v.default)(t.container,["qd__animated","qd__bgfadeOut"],["qd__animated","qd__bgfadeIn"]).then(function(e){!t.count&&(t.container.style.display="none")}),setTimeout(function(e){t.next()},0))})):void this.next()}},{key:"getContainer",value:function(){var e=this,t=this.container;if(!t){var n,r=["q-notice",this.isCover?"is-cover":"is-auto"];this.className&&r.push(this.className),t=this.container=this.doc.createElement("div"),(n=t.classList).add.apply(n,r),this.doc.body.appendChild(t),t.addEventListener("click",function(t){var n=t.target,r=n.dataset,i=r.action;i&&("_close"===i?e.next(r.id):e.evt&&e.evt.trigger("notice."+i,[r,n]),null!==n.getAttribute("click.prevent")&&t.preventDefault())})}return t}},{key:"generateId",value:function(){return"n-"+Math.floor(9e5*Math.random()+1e5)}},{key:"render",value:function(e){var t,n=this,r=this.doc.createElement("div"),i={info:"is-info",error:"is-error",success:"is-success",warning:"is-warning"},o=e.type||"info",a=["item","q-current",i[o]],s=void 0,l=this.getSiblings(".item");this.rendering=!0,r.id=e.__id,s=(0,g.default)(this.getTemplate(e))(e),e.className&&a.push(e.className),e.closeAble&&a.push("is-close-able"),(t=r.classList).add.apply(t,a),r.innerHTML=s,this.container.insertBefore(r,this.container.firstChild),++this.count,this.queueShowing.add(e.__id),(0,v.default)(r,["qd__animated","qd__slideInDown"]).then(function(t){n.rendering=!1,r.classList.remove("q-current"),e.duration&&(r.timer=setTimeout(function(){n.next(e.__id)},1e3*e.duration)),setTimeout(function(e){n.next()},0)}),(0,v.default)(l,["qd__animated","qd__slideDown"],w)}},{key:"getTemplate",value:function(e){return'\n            <div class="info">\n                <%if (type === \'error\' || type === \'success\' || type === \'warning\') {%>\n                    <svg class="icon icon-tip" viewBox="0 0 12 12"><use xlink:href="#tip-<%=type%>"></use></svg>\n                <%}%>\n                '+(e.html||e.message)+'\n                <%if (closeAble) {%>\n                    <a data-action="_close"\n                        data-id="<%=__id%>"\n                        href="javascript:void(0);"\n                        title="关闭"\n                        class="icon btn-close">\n                        <svg viewBox="0 0 12 12"><use xlink:href="#close"></use></svg>\n                    </a>\n                <%}%>\n            </div>\n        '}}]),e}();t.default=x},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={incall:{title:"通话中",class:"",viewBox:"0 0 12 12",id:"#phone"},pause:{title:"保持中",class:"",viewBox:"0 0 12 12",id:"#action-pause"},micromute:{title:"麦克风静音",class:"",viewBox:"0 0 12 12",id:"#action-mute"},unHold:{title:"取消保持",class:"play",viewBox:"0 0 12 12",id:"#action-unhold"},hold:{title:"保持",class:"hold",viewBox:"0 0 12 12",id:"#action-hold"},mutedisabled:{title:"暂不支持静音",class:"is-disabled",viewBox:"0 0 20 20",id:"#mute"},mute:{title:"静音",class:"mute_btn",viewBox:"0 0 20 20",id:"#action-mute"},mutecancel:{title:"取消静音",class:"mute_btn",viewBox:"0 0 20 20",id:"#action-unmute"},shift:{title:"转移",class:"shift",viewBox:"0 0 20 20",id:"#action-transfer"},transfer:{title:"转接",class:"transfer",viewBox:"0 0 20 20",id:"#action-transfer"},consult:{title:"咨询",class:"consult",viewBox:"0 0 20 20",id:"#action-consult"},multi:{title:"三方通话",class:"multi",viewBox:"0 0 20 20",id:"#action-multi"},dial:{title:"拨号",class:"dial-panel",viewBox:"0 0 20 20",id:"#action-dial"},insert:{title:"强插",name:"强插",class:"agent_insert",viewBox:"0 0 40 40",id:"#action-insert"},break:{title:"强拆",name:"强拆",class:"agent_break",viewBox:"0 0 40 40",id:"#action-break"},answer:{title:"接听",class:"answer ringing green",viewBox:"0 0 12 12",id:"#call-answer"},hangup:{title:"挂断",class:"hangup_btn hangup red",viewBox:"0 0 34 34",id:"#action-hangup"},consultback:{title:"咨询返回",class:"hangup_btn consult-back red",viewBox:"0 0 34 34",id:"#action-consultback"}};t.default=r},function(e,t){e.exports='<%if(isType === \'skill\'){%>\n    <ul>\n    <%for (var i = 0; i < records.length; i++) {\n        var item = records[i];\n    %>\n    <li>\n        <%=item.name%>\n        <a name="<%=item.name%>" vid="<%=item.id%>" href="javascript:;" class="btn_transfer">转接</a>\n    </li>\n    <%}%>\n    </ul>\n<%} else if(isType === \'sub\'){%>\n\n    <%for (var i = 0; i < records.length; i++) {\n        var item = records[i];\n    %>\n    <li>\n        <%=item.queue_name%><span class="gray"><%=item.ivr_node_name%></span>\n        <a name="<%=item.queue_name%>" svid="<%=item.ivr_node_id%>" vid="<%=ivr_id%>" href="javascript:;" class="btn_transfer">转接</a>\n    </li>\n    <%}%>\n\n<%} else if(isType === \'employees\' && viewType === \'group\') {%>\n\n    <%for (var i = 0; i < records.length; i++) {\n        var itm = records[i];\n    %>\n    <li>\n        <div class="expand" data-id="<%=itm.id%>">\n            <svg class="icon" viewBox="0 0 12 12"><use xlink:href="#arrow"></use></svg>\n            <%= itm.name%>\n        </div>\n        <ul class="group-members">\n            <li class="loading"><span class="is-loading"></span></li>\n        </ul>\n    </li>\n    <%}%>\n\n<%} else if(isType === \'employees\' || isType === \'systemservice\') {%>\n\n    <%for (var i = 0; i < records.length; i++) {\n        var item = records[i];\n    %>\n    <li>\n        <span class="status <%=item.status == 1 || item.status == 2 || item.status == 4 || item.status == 1001 ? \'online\' : (item.status == 0 ? \'invalid\' : \'offline\')%>"></span>\n        <span class="employee-name"><%==item.name%></span>\n        <a vid="<%=item.id%>" name="<%=item.cname || item.ename || item.name%>" sname="<%=item.sname || item.name || item.cname || item.ename%>" href="javascript:;" class="<%=isConsult ? \'btn_consult\' : \'btn_transfer\'%>"><%=isConsult ? \'咨询\' : \'转接\'%></a>\n    </li>\n    <%}%>\n    <%if(isType === \'employees\' && keywords === \'\' && total > 10){%>\n    <li class="transfer-tip">未找到合适人选？直接搜索员工姓名更高效</li>\n    <%}%>\n\n<%} else if(records) {%>\n\n    <%if(isType === \'ivr\'){%>\n<div class="title">\n    <a class="aleft back" href="javascript:;"><svg class="back" viewBox="0 0 12 12"><use class="back" xlink:href="#arrow_right"></use></svg></a>\n    <span class="icon-ivr"><svg viewBox="0 0 12 12"><use xlink:href="#ivr"></use></svg></span>\n    <span class="name">IVR语音导航</span>\n</div>\n    <%}%>\n\n<div class="recept-container <%=type%>">\n    <%if(records.length){%>\n    <ul class="recept">\n        <%for (var i = 0; i < records.length; i++) {\n            var item = records[i];\n        %>\n            <%if(isType === \'ivr\'){%>\n            <li class="fivr fivr_<%=item.ivr_id%>" vid="<%=item.ivr_id%>">\n                <span class="icon-ivr fivr" vid="<%=item.ivr_id%>"><svg class="fivr" vid="<%=item.ivr_id%>" viewBox="0 0 12 12"><use xlink:href="#ivr"></use></svg></span>\n                <%=item.ivr_name%>\n                <span vid="<%=item.ivr_id%>" class="aright fivr"><svg class="fivr" vid="<%=item.ivr_id%>" viewBox="0 0 12 12"><use xlink:href="#arrow_right"></use></svg></span>\n            </li>\n            <%} else {%>\n            <li>\n                <%=item.queue_name%><span class="gray"><%=item.ivr_node_name%></span>\n                <a name="<%=item.queue_name%>" svid="<%=item.ivr_node_id%>" vid="<%=ivr_id%>" href="javascript:;" class="btn_transfer">转接</a>\n            </li>\n            <%}%>\n        <%}%>\n    </ul>\n    <ul class="ivr"></ul>\n    <%} else {%>\n    <span class="empty">暂无数据</span>\n    <%}%>\n</div>\n\n<%} else {%>\n<span class="is-loading"></span>\n<%}%>\n'},function(e,t,n){function r(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,r=o(e),a=r.source,u=r.id,d=r.path,f=c[u]&&d in c[u].nsps,p=t.forceNew||t["force new connection"]||!1===t.multiplex||f;return p?(l("ignoring socket cache for %s",a),n=s(a,t)):(c[u]||(l("new io instance for %s",a),c[u]=s(a,t)),n=c[u]),r.query&&!t.query?t.query=r.query:t&&"object"==typeof t.query&&(t.query=i(t.query)),n.socket(r.path,t)}function i(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}var o=n(322),a=n(146),s=n(204),l=n(55)("socket.io-client");e.exports=t=r;var c=t.managers={};t.protocol=a.protocol,t.connect=r,t.Manager=n(204),t.Socket=n(210)},function(e,t,n){(function(t){function r(e,n){var r=e;n=n||t.location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(o("protocol-less url %s",e),e=void 0!==n?n.protocol+"//"+e:"https://"+e),o("parse %s",e),r=i(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var a=-1!==r.host.indexOf(":"),s=a?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}var i=n(200),o=n(55)("socket.io-client:url");e.exports=r}).call(t,n(15))},function(e,t,n){function r(){return t.colors[u++%t.colors.length]}function i(e){function n(){}function i(){var e=i,n=+new Date,o=n-(c||n);e.diff=o,e.prev=c,e.curr=n,c=n,null==e.useColors&&(e.useColors=t.useColors()),null==e.color&&e.useColors&&(e.color=r());for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&(a=["%o"].concat(a));var l=0;a[0]=a[0].replace(/%([a-z%])/g,function(n,r){if("%%"===n)return n;l++;var i=t.formatters[r];if("function"==typeof i){var o=a[l];n=i.call(e,o),a.splice(l,1),l--}return n}),a=t.formatArgs.apply(e,a),(i.log||t.log||console.log.bind(console)).apply(e,a)}n.enabled=!1,i.enabled=!0;var o=t.enabled(e)?i:n;return o.namespace=e,o}function o(e){t.save(e);for(var n=(e||"").split(/[\s,]+/),r=n.length,i=0;i<r;i++)n[i]&&(e=n[i].replace(/[\\^$+?.()|[\]{}]/g,"\\$&").replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function a(){t.enable("")}function s(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1}function l(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=i.debug=i,t.coerce=l,t.disable=a,t.enable=o,t.enabled=s,t.humanize=n(324),t.names=[],t.skips=[],t.formatters={};var c,u=0},function(e,t){function n(e){if(e=String(e),!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*u;case"days":case"day":case"d":return n*c;case"hours":case"hour":case"hrs":case"hr":case"h":return n*l;case"minutes":case"minute":case"mins":case"min":case"m":return n*s;case"seconds":case"second":case"secs":case"sec":case"s":return n*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function r(e){return e>=c?Math.round(e/c)+"d":e>=l?Math.round(e/l)+"h":e>=s?Math.round(e/s)+"m":e>=a?Math.round(e/a)+"s":e+"ms"}function i(e){return o(e,c,"day")||o(e,l,"hour")||o(e,s,"minute")||o(e,a,"second")||e+" ms"}function o(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var a=1e3,s=60*a,l=60*s,c=24*l,u=365.25*c;e.exports=function(e,t){t=t||{};var o=typeof e;if("string"===o&&e.length>0)return n(e);if("number"===o&&!1===isNaN(e))return t.long?i(e):r(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){function r(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function i(){var e=arguments,n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var i=0,o=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,r),e}function o(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}}function s(){var e;try{e=t.storage.debug}catch(e){}return e}t=e.exports=n(326),t.log=o,t.formatArgs=i,t.save=a,t.load=s,t.useColors=r,t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){return JSON.stringify(e)},t.enable(s())},function(e,t,n){function r(){return t.colors[u++%t.colors.length]}function i(e){function n(){}function i(){var e=i,n=+new Date,o=n-(c||n);e.diff=o,e.prev=c,e.curr=n,c=n,null==e.useColors&&(e.useColors=t.useColors()),null==e.color&&e.useColors&&(e.color=r());var a=Array.prototype.slice.call(arguments);a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&(a=["%o"].concat(a));var s=0;a[0]=a[0].replace(/%([a-z%])/g,function(n,r){if("%%"===n)return n;s++;var i=t.formatters[r];if("function"==typeof i){var o=a[s];n=i.call(e,o),a.splice(s,1),s--}return n}),"function"==typeof t.formatArgs&&(a=t.formatArgs.apply(e,a)),(i.log||t.log||console.log.bind(console)).apply(e,a)}n.enabled=!1,i.enabled=!0;var o=t.enabled(e)?i:n;return o.namespace=e,o}function o(e){t.save(e);for(var n=(e||"").split(/[\s,]+/),r=n.length,i=0;i<r;i++)n[i]&&(e=n[i].replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function a(){t.enable("")}function s(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1}function l(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=i,t.coerce=l,t.disable=a,t.enable=o,t.enabled=s,t.humanize=n(327),t.names=[],t.skips=[],t.formatters={};var c,u=0},function(e,t){function n(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*u;case"days":case"day":case"d":return n*c;case"hours":case"hour":case"hrs":case"hr":case"h":return n*l;case"minutes":case"minute":case"mins":case"min":case"m":return n*s;case"seconds":case"second":case"secs":case"sec":case"s":return n*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function r(e){return e>=c?Math.round(e/c)+"d":e>=l?Math.round(e/l)+"h":e>=s?Math.round(e/s)+"m":e>=a?Math.round(e/a)+"s":e+"ms"}function i(e){return o(e,c,"day")||o(e,l,"hour")||o(e,s,"minute")||o(e,a,"second")||e+" ms"}function o(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var a=1e3,s=60*a,l=60*s,c=24*l,u=365.25*c;e.exports=function(e,t){return t=t||{},"string"==typeof e?n(e):t.long?i(e):r(e)}},function(e,t,n){(function(e,r){var i;(function(){function o(e,t){function n(e){if(n[e]!==m)return n[e];var o;if("bug-string-char-index"==e)o="a"!="a"[0];else if("json"==e)o=n("json-stringify")&&n("json-parse");else{var a,s='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var c=t.stringify,u="function"==typeof c&&_;if(u){(a=function(){return 1}).toJSON=a;try{u="0"===c(0)&&"0"===c(new r)&&'""'==c(new i)&&c(b)===m&&c(m)===m&&c()===m&&"1"===c(a)&&"[1]"==c([a])&&"[null]"==c([m])&&"null"==c(null)&&"[null,null,null]"==c([m,b,null])&&c({a:[a,!0,!1,null,"\0\b\n\f\r\t"]})==s&&"1"===c(null,a)&&"[\n 1,\n 2\n]"==c([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==c(new l(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==c(new l(864e13))&&'"-000001-01-01T00:00:00.000Z"'==c(new l(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==c(new l(-1))}catch(e){u=!1}}o=u}if("json-parse"==e){var d=t.parse;if("function"==typeof d)try{if(0===d("0")&&!d(!1)){a=d(s);var f=5==a.a.length&&1===a.a[0];if(f){try{f=!d('"\t"')}catch(e){}if(f)try{f=1!==d("01")}catch(e){}if(f)try{f=1!==d("1.")}catch(e){}}}}catch(e){f=!1}o=f}}return n[e]=!!o}e||(e=c.Object()),t||(t=c.Object());var r=e.Number||c.Number,i=e.String||c.String,a=e.Object||c.Object,l=e.Date||c.Date,u=e.SyntaxError||c.SyntaxError,d=e.TypeError||c.TypeError,f=e.Math||c.Math,p=e.JSON||c.JSON;"object"==typeof p&&p&&(t.stringify=p.stringify,t.parse=p.parse);var h,g,m,v=a.prototype,b=v.toString,_=new l(-0xc782b5b800cec);try{_=-109252==_.getUTCFullYear()&&0===_.getUTCMonth()&&1===_.getUTCDate()&&10==_.getUTCHours()&&37==_.getUTCMinutes()&&6==_.getUTCSeconds()&&708==_.getUTCMilliseconds()}catch(e){}if(!n("json")){var y=n("bug-string-char-index");if(!_)var w=f.floor,x=[0,31,59,90,120,151,181,212,243,273,304,334],k=function(e,t){return x[t]+365*(e-1970)+w((e-1969+(t=+(t>1)))/4)-w((e-1901+t)/100)+w((e-1601+t)/400)};if((h=v.hasOwnProperty)||(h=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=b?h=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,h=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,h.call(this,e)}),g=function(e,t){var n,r,i,o=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,r=new n;for(i in r)h.call(r,i)&&o++;return n=r=null,o?g=2==o?function(e,t){var n,r={},i="[object Function]"==b.call(e);for(n in e)i&&"prototype"==n||h.call(r,n)||!(r[n]=1)||!h.call(e,n)||t(n)}:function(e,t){var n,r,i="[object Function]"==b.call(e);for(n in e)i&&"prototype"==n||!h.call(e,n)||(r="constructor"===n)||t(n);(r||h.call(e,n="constructor"))&&t(n)}:(r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],g=function(e,t){var n,i,o="[object Function]"==b.call(e),a=!o&&"function"!=typeof e.constructor&&s[typeof e.hasOwnProperty]&&e.hasOwnProperty||h;for(n in e)o&&"prototype"==n||!a.call(e,n)||t(n);for(i=r.length;n=r[--i];a.call(e,n)&&t(n));}),g(e,t)},!n("json-stringify")){var S={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},C=function(e,t){return("000000"+(t||0)).slice(-e)},T=function(e){for(var t='"',n=0,r=e.length,i=!y||r>10,o=i&&(y?e.split(""):e);n<r;n++){var a=e.charCodeAt(n);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=S[a];break;default:if(a<32){t+="\\u00"+C(2,a.toString(16));break}t+=i?o[n]:e.charAt(n)}}return t+'"'},E=function(e,t,n,r,i,o,a){var s,l,c,u,f,p,v,_,y,x,S,I,A,R,O,L;try{s=t[e]}catch(e){}if("object"==typeof s&&s)if("[object Date]"!=(l=b.call(s))||h.call(s,"toJSON"))"function"==typeof s.toJSON&&("[object Number]"!=l&&"[object String]"!=l&&"[object Array]"!=l||h.call(s,"toJSON"))&&(s=s.toJSON(e));else if(s>-1/0&&s<1/0){if(k){for(f=w(s/864e5),c=w(f/365.2425)+1970-1;k(c+1,0)<=f;c++);for(u=w((f-k(c,0))/30.42);k(c,u+1)<=f;u++);f=1+f-k(c,u),p=(s%864e5+864e5)%864e5,v=w(p/36e5)%24,_=w(p/6e4)%60,y=w(p/1e3)%60,x=p%1e3}else c=s.getUTCFullYear(),u=s.getUTCMonth(),f=s.getUTCDate(),v=s.getUTCHours(),_=s.getUTCMinutes(),y=s.getUTCSeconds(),x=s.getUTCMilliseconds();s=(c<=0||c>=1e4?(c<0?"-":"+")+C(6,c<0?-c:c):C(4,c))+"-"+C(2,u+1)+"-"+C(2,f)+"T"+C(2,v)+":"+C(2,_)+":"+C(2,y)+"."+C(3,x)+"Z"}else s=null;if(n&&(s=n.call(t,e,s)),null===s)return"null";if("[object Boolean]"==(l=b.call(s)))return""+s;if("[object Number]"==l)return s>-1/0&&s<1/0?""+s:"null";if("[object String]"==l)return T(""+s);if("object"==typeof s){for(R=a.length;R--;)if(a[R]===s)throw d();if(a.push(s),S=[],O=o,o+=i,"[object Array]"==l){for(A=0,R=s.length;A<R;A++)I=E(A,s,n,r,i,o,a),S.push(I===m?"null":I);L=S.length?i?"[\n"+o+S.join(",\n"+o)+"\n"+O+"]":"["+S.join(",")+"]":"[]"}else g(r||s,function(e){var t=E(e,s,n,r,i,o,a);t!==m&&S.push(T(e)+":"+(i?" ":"")+t)}),L=S.length?i?"{\n"+o+S.join(",\n"+o)+"\n"+O+"}":"{"+S.join(",")+"}":"{}";return a.pop(),L}};t.stringify=function(e,t,n){var r,i,o,a;if(s[typeof t]&&t)if("[object Function]"==(a=b.call(t)))i=t;else if("[object Array]"==a){o={};for(var l,c=0,u=t.length;c<u;l=t[c++],("[object String]"==(a=b.call(l))||"[object Number]"==a)&&(o[l]=1));}if(n)if("[object Number]"==(a=b.call(n))){if((n-=n%1)>0)for(r="",n>10&&(n=10);r.length<n;r+=" ");}else"[object String]"==a&&(r=n.length<=10?n:n.slice(0,10));return E("",(l={},l[""]=e,l),i,o,r,"",[])}}if(!n("json-parse")){var I,A,R=i.fromCharCode,O={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},L=function(){throw I=A=null,u()},P=function(){for(var e,t,n,r,i,o=A,a=o.length;I<a;)switch(i=o.charCodeAt(I)){case 9:case 10:case 13:case 32:I++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=y?o.charAt(I):o[I],I++,e;case 34:for(e="@",I++;I<a;)if((i=o.charCodeAt(I))<32)L();else if(92==i)switch(i=o.charCodeAt(++I)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=O[i],I++;break;case 117:for(t=++I,n=I+4;I<n;I++)(i=o.charCodeAt(I))>=48&&i<=57||i>=97&&i<=102||i>=65&&i<=70||L();e+=R("0x"+o.slice(t,I));break;default:L()}else{if(34==i)break;for(i=o.charCodeAt(I),t=I;i>=32&&92!=i&&34!=i;)i=o.charCodeAt(++I);e+=o.slice(t,I)}if(34==o.charCodeAt(I))return I++,e;L();default:if(t=I,45==i&&(r=!0,i=o.charCodeAt(++I)),i>=48&&i<=57){for(48==i&&(i=o.charCodeAt(I+1))>=48&&i<=57&&L(),r=!1;I<a&&(i=o.charCodeAt(I))>=48&&i<=57;I++);if(46==o.charCodeAt(I)){for(n=++I;n<a&&(i=o.charCodeAt(n))>=48&&i<=57;n++);n==I&&L(),I=n}if(101==(i=o.charCodeAt(I))||69==i){for(i=o.charCodeAt(++I),43!=i&&45!=i||I++,n=I;n<a&&(i=o.charCodeAt(n))>=48&&i<=57;n++);n==I&&L(),I=n}return+o.slice(t,I)}if(r&&L(),"true"==o.slice(I,I+4))return I+=4,!0;if("false"==o.slice(I,I+5))return I+=5,!1;if("null"==o.slice(I,I+4))return I+=4,null;L()}return"$"},M=function(e){var t,n;if("$"==e&&L(),"string"==typeof e){if("@"==(y?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];"]"!=(e=P());n||(n=!0))n&&(","==e?"]"==(e=P())&&L():L()),","==e&&L(),t.push(M(e));return t}if("{"==e){for(t={};"}"!=(e=P());n||(n=!0))n&&(","==e?"}"==(e=P())&&L():L()),","!=e&&"string"==typeof e&&"@"==(y?e.charAt(0):e[0])&&":"==P()||L(),t[e.slice(1)]=M(P());return t}L()}return e},$=function(e,t,n){var r=N(e,t,n);r===m?delete e[t]:e[t]=r},N=function(e,t,n){var r,i=e[t];if("object"==typeof i&&i)if("[object Array]"==b.call(i))for(r=i.length;r--;)$(i,r,n);else g(i,function(e){$(i,e,n)});return n.call(e,t,i)};t.parse=function(e,t){var n,r;return I=0,A=""+e,n=M(P()),"$"!=P()&&L(),I=A=null,t&&"[object Function]"==b.call(t)?N((r={},r[""]=n,r),"",t):n}}}return t.runInContext=o,t}var a=n(329),s={function:!0,object:!0},l=s[typeof t]&&t&&!t.nodeType&&t,c=s[typeof window]&&window||this,u=l&&s[typeof e]&&e&&!e.nodeType&&"object"==typeof r&&r;if(!u||u.global!==u&&u.window!==u&&u.self!==u||(c=u),l&&!a)o(c,l);else{var d=c.JSON,f=c.JSON3,p=!1,h=o(c,c.JSON3={noConflict:function(){return p||(p=!0,c.JSON=d,c.JSON3=f,d=f=null),h}});c.JSON={parse:h.parse,stringify:h.stringify}}a&&void 0!==(i=function(){return h}.call(t,n,t,e))&&(e.exports=i)}).call(this)}).call(t,n(201)(e),n(15))},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t){function n(e){if(e)return r(e)}function r(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},n.prototype.once=function(e,t){function n(){r.off(e,n),t.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},n.fn=t,this.on(e,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var r,i=0;i<n.length;i++)if((r=n[i])===t||r.fn===t){n.splice(i,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,t)}return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){(function(e){var r=n(202),i=n(203);t.deconstructPacket=function(e){function t(e){if(!e)return e;if(i(e)){var o={_placeholder:!0,num:n.length};return n.push(e),o}if(r(e)){for(var a=new Array(e.length),s=0;s<e.length;s++)a[s]=t(e[s]);return a}if("object"==typeof e&&!(e instanceof Date)){var a={};for(var l in e)a[l]=t(e[l]);return a}return e}var n=[],o=e.data,a=e;return a.data=t(o),a.attachments=n.length,{packet:a,buffers:n}},t.reconstructPacket=function(e,t){function n(e){if(e&&e._placeholder){return t[e.num]}if(r(e)){for(var i=0;i<e.length;i++)e[i]=n(e[i]);return e}if(e&&"object"==typeof e){for(var o in e)e[o]=n(e[o]);return e}return e}return e.data=n(e.data),e.attachments=void 0,e},t.removeBlobs=function(t,n){function o(t,l,c){if(!t)return t;if(e.Blob&&t instanceof Blob||e.File&&t instanceof File){a++;var u=new FileReader;u.onload=function(){c?c[l]=this.result:s=this.result,--a||n(s)},u.readAsArrayBuffer(t)}else if(r(t))for(var d=0;d<t.length;d++)o(t[d],d,t);else if(t&&"object"==typeof t&&!i(t))for(var f in t)o(t[f],f,t)}var a=0,s=t;o(s),a||n(s)}}).call(t,n(15))},function(e,t,n){e.exports=n(333)},function(e,t,n){e.exports=n(334),e.exports.parser=n(70)},function(e,t,n){(function(t){function r(e,n){if(!(this instanceof r))return new r(e,n);n=n||{},e&&"object"==typeof e&&(n=e,e=null),e?(e=u(e),n.hostname=e.host,n.secure="https"===e.protocol||"wss"===e.protocol,n.port=e.port,e.query&&(n.query=e.query)):n.host&&(n.hostname=u(n.host).host),this.secure=null!=n.secure?n.secure:t.location&&"https:"===location.protocol,n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.agent=n.agent||!1,this.hostname=n.hostname||(t.location?location.hostname:"localhost"),this.port=n.port||(t.location&&location.port?location.port:this.secure?443:80),this.query=n.query||{},"string"==typeof this.query&&(this.query=f.decode(this.query)),this.upgrade=!1!==n.upgrade,this.path=(n.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!n.forceJSONP,this.jsonp=!1!==n.jsonp,this.forceBase64=!!n.forceBase64,this.enablesXDR=!!n.enablesXDR,this.timestampParam=n.timestampParam||"t",this.timestampRequests=n.timestampRequests,this.transports=n.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=n.policyPort||843,this.rememberUpgrade=n.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=n.onlyBinaryUpgrades,this.perMessageDeflate=!1!==n.perMessageDeflate&&(n.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=n.pfx||null,this.key=n.key||null,this.passphrase=n.passphrase||null,this.cert=n.cert||null,this.ca=n.ca||null,this.ciphers=n.ciphers||null,this.rejectUnauthorized=void 0===n.rejectUnauthorized?null:n.rejectUnauthorized,this.forceNode=!!n.forceNode;var i="object"==typeof t&&t;i.global===i&&(n.extraHeaders&&Object.keys(n.extraHeaders).length>0&&(this.extraHeaders=n.extraHeaders),n.localAddress&&(this.localAddress=n.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}function i(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var o=n(205),a=n(87),s=n(55)("engine.io-client:socket"),l=n(209),c=n(70),u=n(200),d=n(346),f=n(149);e.exports=r,r.priorWebsocketSuccess=!1,a(r.prototype),r.protocol=c.protocol,r.Socket=r,r.Transport=n(148),r.transports=n(205),r.parser=n(70),r.prototype.createTransport=function(e){s('creating transport "%s"',e);var t=i(this.query);return t.EIO=c.protocol,t.transport=e,this.id&&(t.sid=this.id),new o[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders,forceNode:this.forceNode,localAddress:this.localAddress})},r.prototype.open=function(){var e;if(this.rememberUpgrade&&r.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},r.prototype.setTransport=function(e){s("setting transport %s",e.name);var t=this;this.transport&&(s("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},r.prototype.probe=function(e){function t(){if(f.onlyBinaryUpgrades){var t=!this.supportsBinary&&f.transport.supportsBinary;d=d||t}d||(s('probe transport "%s" opened',e),u.send([{type:"ping",data:"probe"}]),u.once("packet",function(t){if(!d)if("pong"===t.type&&"probe"===t.data){if(s('probe transport "%s" pong',e),f.upgrading=!0,f.emit("upgrading",u),!u)return;r.priorWebsocketSuccess="websocket"===u.name,s('pausing current transport "%s"',f.transport.name),f.transport.pause(function(){d||"closed"!==f.readyState&&(s("changing transport and sending upgrade packet"),c(),f.setTransport(u),u.send([{type:"upgrade"}]),f.emit("upgrade",u),u=null,f.upgrading=!1,f.flush())})}else{s('probe transport "%s" failed',e);var n=new Error("probe error");n.transport=u.name,f.emit("upgradeError",n)}}))}function n(){d||(d=!0,c(),u.close(),u=null)}function i(t){var r=new Error("probe error: "+t);r.transport=u.name,n(),s('probe transport "%s" failed because of error: %s',e,t),f.emit("upgradeError",r)}function o(){i("transport closed")}function a(){i("socket closed")}function l(e){u&&e.name!==u.name&&(s('"%s" works - aborting "%s"',e.name,u.name),n())}function c(){u.removeListener("open",t),u.removeListener("error",i),u.removeListener("close",o),f.removeListener("close",a),f.removeListener("upgrading",l)}s('probing transport "%s"',e);var u=this.createTransport(e,{probe:1}),d=!1,f=this;r.priorWebsocketSuccess=!1,u.once("open",t),u.once("error",i),u.once("close",o),this.once("close",a),this.once("upgrading",l),u.open()},r.prototype.onOpen=function(){if(s("socket open"),this.readyState="open",r.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){s("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},r.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(s('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(d(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else s('packet received with socket readyState "%s"',this.readyState)},r.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},r.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!==t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},r.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){s("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},r.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},r.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},r.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(s("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},r.prototype.write=r.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},r.prototype.sendPacket=function(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){n=n||{},n.compress=!1!==n.compress;var i={type:e,data:t,options:n};this.emit("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}},r.prototype.close=function(){function e(){r.onClose("forced close"),s("socket closing - telling transport to close"),r.transport.close()}function t(){r.removeListener("upgrade",t),r.removeListener("upgradeError",t),e()}function n(){r.once("upgrade",t),r.once("upgradeError",t)}if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var r=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():e()}):this.upgrading?n():e()}return this},r.prototype.onError=function(e){s("socket error %j",e),r.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},r.prototype.onClose=function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){s('socket close with reason: "%s"',e);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),n.writeBuffer=[],n.prevBufferLen=0}},r.prototype.filterUpgrades=function(e){for(var t=[],n=0,r=e.length;n<r;n++)~l(this.transports,e[n])&&t.push(e[n]);return t}}).call(t,n(15))},function(e,t){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},function(e,t,n){(function(t){function r(){}function i(e){if(l.call(this,e),this.requestTimeout=e.requestTimeout,t.location){var n="https:"===location.protocol,r=location.port;r||(r=n?443:80),this.xd=e.hostname!==t.location.hostname||r!==e.port,this.xs=e.secure!==n}else this.extraHeaders=e.extraHeaders}function o(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function a(){for(var e in o.requests)o.requests.hasOwnProperty(e)&&o.requests[e].abort()}var s=n(147),l=n(206),c=n(87),u=n(99),d=n(55)("engine.io-client:polling-xhr");e.exports=i,e.exports.Request=o,u(i,l),i.prototype.supportsBinary=!0,i.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new o(e)},i.prototype.doWrite=function(e,t){var n="string"!=typeof e&&void 0!==e,r=this.request({method:"POST",data:e,isBinary:n}),i=this;r.on("success",t),r.on("error",function(e){i.onError("xhr post error",e)}),this.sendXhr=r},i.prototype.doPoll=function(){d("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},c(o.prototype),o.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var n=this.xhr=new s(e),r=this;try{d("xhr open %s: %s",this.method,this.uri),n.open(this.method,this.uri,this.async);try{if(this.extraHeaders){n.setDisableHeaderCheck(!0);for(var i in this.extraHeaders)this.extraHeaders.hasOwnProperty(i)&&n.setRequestHeader(i,this.extraHeaders[i])}}catch(e){}if(this.supportsBinary&&(n.responseType="arraybuffer"),"POST"===this.method)try{this.isBinary?n.setRequestHeader("Content-type","application/octet-stream"):n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{n.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in n&&(n.withCredentials=!0),this.requestTimeout&&(n.timeout=this.requestTimeout),this.hasXDR()?(n.onload=function(){r.onLoad()},n.onerror=function(){r.onError(n.responseText)}):n.onreadystatechange=function(){4===n.readyState&&(200===n.status||1223===n.status?r.onLoad():setTimeout(function(){r.onError(n.status)},0))},d("xhr data %s",this.data),n.send(this.data)}catch(e){return void setTimeout(function(){r.onError(e)},0)}t.document&&(this.index=o.requestsCount++,o.requests[this.index]=this)},o.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},o.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},o.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},o.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=r:this.xhr.onreadystatechange=r,e)try{this.xhr.abort()}catch(e){}t.document&&delete o.requests[this.index],this.xhr=null}},o.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(e){}if("application/octet-stream"===t)e=this.xhr.response||this.xhr.responseText;else if(this.supportsBinary)try{e=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(t){for(var n=new Uint8Array(this.xhr.response),r=[],i=0,o=n.length;i<o;i++)r.push(n[i]);e=String.fromCharCode.apply(null,r)}else e=this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},o.prototype.hasXDR=function(){return void 0!==t.XDomainRequest&&!this.xs&&this.enablesXDR},o.prototype.abort=function(){this.cleanup()},o.requestsCount=0,o.requests={},t.document&&(t.attachEvent?t.attachEvent("onunload",a):t.addEventListener&&t.addEventListener("beforeunload",a,!1))}).call(t,n(15))},function(e,t){e.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);return t}},function(e,t){e.exports=function(e,t,n){var r=e.byteLength;if(t=t||0,n=n||r,e.slice)return e.slice(t,n);if(t<0&&(t+=r),n<0&&(n+=r),n>r&&(n=r),t>=r||t>=n||0===r)return new ArrayBuffer(0);for(var i=new Uint8Array(e),o=new Uint8Array(n-t),a=t,s=0;a<n;a++,s++)o[s]=i[a];return o.buffer}},function(e,t){function n(e,t,n){function i(e,r){if(i.count<=0)throw new Error("after called too many times");--i.count,e?(o=!0,t(e),t=n):0!==i.count||o||t(null,r)}var o=!1;return n=n||r,i.count=e,0===e?t():i}function r(){}e.exports=n},function(e,t,n){(function(e,r){var i;!function(o){function a(e){for(var t,n,r=[],i=0,o=e.length;i<o;)t=e.charCodeAt(i++),t>=55296&&t<=56319&&i<o?(n=e.charCodeAt(i++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--)):r.push(t);return r}function s(e){for(var t,n=e.length,r=-1,i="";++r<n;)t=e[r],t>65535&&(t-=65536,i+=_(t>>>10&1023|55296),t=56320|1023&t),i+=_(t);return i}function l(e,t){return _(e>>t&63|128)}function c(e){if(0==(4294967168&e))return _(e);var t="";return 0==(4294965248&e)?t=_(e>>6&31|192):0==(4294901760&e)?(t=_(e>>12&15|224),t+=l(e,6)):0==(4292870144&e)&&(t=_(e>>18&7|240),t+=l(e,12),t+=l(e,6)),t+=_(63&e|128)}function u(e){for(var t,n=a(e),r=n.length,i=-1,o="";++i<r;)t=n[i],o+=c(t);return o}function d(){if(b>=v)throw Error("Invalid byte index");var e=255&m[b];if(b++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function f(){var e,t,n,r,i;if(b>v)throw Error("Invalid byte index");if(b==v)return!1;if(e=255&m[b],b++,0==(128&e))return e;if(192==(224&e)){var t=d();if((i=(31&e)<<6|t)>=128)return i;throw Error("Invalid continuation byte")}if(224==(240&e)){if(t=d(),n=d(),(i=(15&e)<<12|t<<6|n)>=2048)return i;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=d(),n=d(),r=d(),(i=(15&e)<<18|t<<12|n<<6|r)>=65536&&i<=1114111))return i;throw Error("Invalid WTF-8 detected")}function p(e){m=a(e),v=m.length,b=0;for(var t,n=[];!1!==(t=f());)n.push(t);return s(n)}var h="object"==typeof t&&t,g=("object"==typeof e&&e&&e.exports,"object"==typeof r&&r);var m,v,b,_=String.fromCharCode,y={version:"1.0.0",encode:u,decode:p};void 0!==(i=function(){return y}.call(t,n,t,e))&&(e.exports=i)}()}).call(t,n(201)(e),n(15))},function(e,t){!function(){"use strict";for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),r=0;r<e.length;r++)n[e.charCodeAt(r)]=r;t.encode=function(t){var n,r=new Uint8Array(t),i=r.length,o="";for(n=0;n<i;n+=3)o+=e[r[n]>>2],o+=e[(3&r[n])<<4|r[n+1]>>4],o+=e[(15&r[n+1])<<2|r[n+2]>>6],o+=e[63&r[n+2]];return i%3==2?o=o.substring(0,o.length-1)+"=":i%3==1&&(o=o.substring(0,o.length-2)+"=="),o},t.decode=function(e){var t,r,i,o,a,s=.75*e.length,l=e.length,c=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var u=new ArrayBuffer(s),d=new Uint8Array(u);for(t=0;t<l;t+=4)r=n[e.charCodeAt(t)],i=n[e.charCodeAt(t+1)],o=n[e.charCodeAt(t+2)],a=n[e.charCodeAt(t+3)],d[c++]=r<<2|i>>4,d[c++]=(15&i)<<4|o>>2,d[c++]=(3&o)<<6|63&a;return u}}()},function(e,t,n){(function(t){function n(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.buffer instanceof ArrayBuffer){var r=n.buffer;if(n.byteLength!==r.byteLength){var i=new Uint8Array(n.byteLength);i.set(new Uint8Array(r,n.byteOffset,n.byteLength)),r=i.buffer}e[t]=r}}}function r(e,t){t=t||{};var r=new o;n(e);for(var i=0;i<e.length;i++)r.append(e[i]);return t.type?r.getBlob(t.type):r.getBlob()}function i(e,t){return n(e),new Blob(e,t||{})}var o=t.BlobBuilder||t.WebKitBlobBuilder||t.MSBlobBuilder||t.MozBlobBuilder,a=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),s=a&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),l=o&&o.prototype.append&&o.prototype.getBlob;e.exports=function(){return a?s?t.Blob:i:l?r:void 0}()}).call(t,n(15))},function(e,t,n){(function(t){function r(){}function i(e){o.call(this,e),this.query=this.query||{},s||(t.___eio||(t.___eio=[]),s=t.___eio),this.index=s.length;var n=this;s.push(function(e){n.onData(e)}),this.query.j=this.index,t.document&&t.addEventListener&&t.addEventListener("beforeunload",function(){n.script&&(n.script.onerror=r)},!1)}var o=n(206),a=n(99);e.exports=i;var s,l=/\n/g,c=/\\n/g;a(i,o),i.prototype.supportsBinary=!1,i.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),o.prototype.doClose.call(this)},i.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},i.prototype.doWrite=function(e,t){function n(){r(),t()}function r(){if(i.iframe)try{i.form.removeChild(i.iframe)}catch(e){i.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+i.iframeId+'">';o=document.createElement(e)}catch(e){o=document.createElement("iframe"),o.name=i.iframeId,o.src="javascript:0"}o.id=i.iframeId,i.form.appendChild(o),i.iframe=o}var i=this;if(!this.form){var o,a=document.createElement("form"),s=document.createElement("textarea"),u=this.iframeId="eio_iframe_"+this.index;a.className="socketio",a.style.position="absolute",a.style.top="-1000px",a.style.left="-1000px",a.target=u,a.method="POST",a.setAttribute("accept-charset","utf-8"),s.name="d",a.appendChild(s),document.body.appendChild(a),this.form=a,this.area=s}this.form.action=this.uri(),r(),e=e.replace(c,"\\\n"),this.area.value=e.replace(l,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===i.iframe.readyState&&n()}:this.iframe.onload=n}}).call(t,n(15))},function(e,t,n){(function(t){function r(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=d&&!e.forceNode,this.usingBrowserWebSocket||(f=i),o.call(this,e)}var i,o=n(148),a=n(70),s=n(149),l=n(99),c=n(208),u=n(55)("engine.io-client:websocket"),d=t.WebSocket||t.MozWebSocket;if("undefined"==typeof window)try{i=n(345)}catch(e){}var f=d;f||"undefined"!=typeof window||(f=i),e.exports=r,l(r,o),r.prototype.name="websocket",r.prototype.supportsBinary=!0,r.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t={agent:this.agent,perMessageDeflate:this.perMessageDeflate};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(t.headers=this.extraHeaders),this.localAddress&&(t.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?new f(e):new f(e,void 0,t)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},r.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},r.prototype.write=function(e){function n(){r.emit("flush"),setTimeout(function(){r.writable=!0,r.emit("drain")},0)}var r=this;this.writable=!1;for(var i=e.length,o=0,s=i;o<s;o++)!function(e){a.encodePacket(e,r.supportsBinary,function(o){if(!r.usingBrowserWebSocket){var a={};if(e.options&&(a.compress=e.options.compress),r.perMessageDeflate){("string"==typeof o?t.Buffer.byteLength(o):o.length)<r.perMessageDeflate.threshold&&(a.compress=!1)}}try{r.usingBrowserWebSocket?r.ws.send(o):r.ws.send(o,a)}catch(e){u("websocket closed before onclose event")}--i||n()})}(e[o])},r.prototype.onClose=function(){o.prototype.onClose.call(this)},r.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},r.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=c()),this.supportsBinary||(e.b64=1),e=s.encode(e),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e},r.prototype.check=function(){return!(!f||"__initialize"in f&&this.name===r.prototype.name)}}).call(t,n(15))},function(e,t){},function(e,t,n){(function(t){var n=/^[\],:{}\s]*$/,r=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,i=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,o=/(?:^|:|,)(?:\s*\[)+/g,a=/^\s+/,s=/\s+$/;e.exports=function(e){return"string"==typeof e&&e?(e=e.replace(a,"").replace(s,""),t.JSON&&JSON.parse?JSON.parse(e):n.test(e.replace(r,"@").replace(i,"]").replace(o,""))?new Function("return "+e)():void 0):null}}).call(t,n(15))},function(e,t){function n(e,t){var n=[];t=t||0;for(var r=t||0;r<e.length;r++)n[r-t]=e[r];return n}e.exports=n},function(e,t){function n(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=n,n.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(e){this.ms=e},n.prototype.setMax=function(e){this.max=e},n.prototype.setJitter=function(e){this.jitter=e}},function(e,t,n){"use strict";function r(e,t,n,r){e&&new o.default({src:e,style:{display:"none"},onload:function(){t&&t()},onerror:function(){n&&n()},oncomplete:function(){r&&r(),this.remove()}})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(18),o=function(e){return e&&e.__esModule?e:{default:e}}(i)},function(e,t,n){"use strict";function r(){var e=this,t=0,n=0,r=this.el,i=void 0;if(!this.src)return void o.call(this);i=this.el.querySelector(".qd__title"),i.style.cursor="move",i.onmousedown=function(i){if(1===(void 0!==i.which?i.which:i.button))return t=i.clientX-r.offsetLeft,n=i.clientY-r.offsetTop,e.iframe.classList.add("qd__none-event"),a=function(e){var i=e.clientX-t,o=e.clientY-n,a=document.documentElement.clientWidth-r.offsetWidth,s=Math.max(0,document.documentElement.clientHeight-r.offsetHeight-3);return i<=0&&(i=0),o<=0&&(o=0),i>=a&&(i=a),o>=s&&(o=s),r.style.left=i+"px",r.style.top=o+"px",!1},document.addEventListener("mousemove",a),!1},document.addEventListener("mouseup",function(){document.removeEventListener("mousemove",a),e.iframe.classList.remove("qd__none-event")})}function i(){var e=this,t=this.el;w.call(this,t,t.querySelector(".qd__resize_corner_right"),!1,!1,!1,!1),w.call(this,t,t.querySelector(".qd__resize_corner_left"),!0,!1,!1,!1),w.call(this,t,t.querySelector(".qd__resize_left"),!0,!1,!1,!0),w.call(this,t,t.querySelector(".qd__resize_right"),!1,!1,!1,!0),w.call(this,t,t.querySelector(".qd__resize_bottom"),!1,!1,!0,!1),document.addEventListener("mouseup",function(){document.removeEventListener("mousemove",y),e.iframe.classList.remove("qd__none-event")})}Object.defineProperty(t,"__esModule",{value:!0}),t.drag=r,t.resize=i;var o=function(){var e=this,t=this.moveHandler?this.doc.querySelector(this.moveHandler):this.doc,n=t.style||t.body.style,r=!1,i=void 0,o=void 0,a=void 0,s=void 0;n.cursor="move",t.addEventListener("mousedown",function(e){1===(void 0!==e.which?e.which:e.button)&&(r=!0,i=e.pageX,o=e.pageY)}),t.addEventListener("mouseup",function(e){r=!1}),t.addEventListener("mousemove",function(t){var n=void 0,l=void 0,c=void 0,u=void 0,d=void 0,f=void 0,p=Math.max(e.el.offsetWidth,e.el.scrollWidth,e.el.clientWidth)+e.widthOffset,h=Math.max(e.el.offsetHeight,e.el.scrollHeight,e.el.clientHeight)+e.heightOffset;r&&(e.el.style.left?(d="left",n=parseInt(e.el.style.left,10),a=t.pageX-i):(d="right",n=parseInt(e.el.style.right,10),a=i-t.pageX),e.el.style.top?(f="top",l=parseInt(e.el.style.top,10),s=t.pageY-o):(f="bottom",l=parseInt(e.el.style.bottom,10),s=o-t.pageY),c=n+a,u=l+s,c<0?c=0:c>window.innerWidth-p&&(c=Math.max(0,window.innerWidth-p)),u<0?u=0:u>window.innerHeight-h&&(u=window.innerHeight-h,"top"===f&&(u=Math.max(0,u))),e.el.style[d]=c+"px",e.el.style[f]=u+"px")})},a=void 0,s=void 0,l=void 0,c=void 0,u=void 0,d=void 0,f=void 0,p=void 0,h=void 0,g=void 0,m=void 0,v=void 0,b=void 0,_=function(e){var t=this;return window.requestAnimationFrame(function(){var n=e.clientX-s,r=e.clientY-l,i=document.documentElement.clientWidth-p.offsetLeft-2,o=document.documentElement.clientHeight-p.offsetTop-2,a=h?d-n:b.offsetWidth+n,_=g?f-r:b.offsetHeight+r;h&&(p.style.left=u+n+"px"),g&&(p.style.top=c+r+"px"),a<400&&(a=400),a>i&&(a=i),m||(p.style.width=a+"px"),_<400&&(_=400),_>o&&(_=o),v||(p.style.height=_+"px"),t.resizable(a,_)}),!1},y=void 0,w=function(e,t,n,r,i,o){var a=this;t.onmousedown=function(w){return p=e,b=t,s=w.clientX-t.offsetLeft,l=w.clientY-t.offsetTop,c=e.offsetTop,u=e.offsetLeft,d=e.offsetWidth,f=e.offsetHeight,h=n,g=r,m=i,v=o,y=_.bind(a),a.iframe.classList.add("qd__none-event"),document.addEventListener("mousemove",y),!1}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(57),o=r(i),a=n(14),s=r(a),l=n(11),c=r(l),u=n(28),d=r(u),f=n(8),p=r(f),h=n(89),g=r(h),m=n(38),v=r(m),b=n(285),_=r(b),y=n(7),w=r(y),x=n(58),k=new w.default("actionStep"),S=new w.default("ErrLog"),C=["agentMakeCall","getAnswerType","getDayCallInfo","changeAnswerType","hold","transfer","consult","consultBack","hangup","answer","getIvrList","getIvrNodeList","getCallStatus","getStaffList","getMuteState","getStaffInfo","setMuteState","multicast","shift","agentSetWorkStatus","setRestStatus","getRestStatus","getRestList","getAutoAnswer","setAutoAnswer","logout","isAgentLogin","agentReset","dialClick","getCallingAgents","agentMonitor","agentInsert","agentBreak","getAgentList","agentOnWork","agentOffWork","getHardwareMode","setHardwareMode","reportIssue","getCustomerInfo","addCustomerBase","showInfoCard","showAddCustomerPanel","getWorkStatus","isValidNumber","getQueueCountList","getSwitchBoardNumList","getIvrEventList","getAgentAnalysisStatus","getCallRemarks","writeCallRemarks","getApiInfo","getNetWorkState","getCallInfo","handle","statusReport","getReceptionGroupList","getCallAsrResult","busiHeartbeat","getRtcAccounts","setDisposableStatus"],T={status:"normal",stack:[],withPortrait:0,withTrack:0,withProfile:0,withAddCL:0,withAddMyList:0},E={},I={},A=new g.default(m.frequenceLimits),R={},O={},L={},P={getState:function(e,t){if(!t)return e?T[e]:(0,p.default)({},T);var n=T.kfext||T.callKfext||"",r="stat-"+n,i=JSON.parse(localStorage.getItem(r)||"{}");return e?i[e]:(0,p.default)({},i)},setState:function(e,t,n,r){var i="",o="object"===(void 0===e?"undefined":(0,d.default)(e)),a=T.kfext||T.callKfext||"",s="stat-"+a;if(o)(0,p.default)(T,e),i=e.status,r=n,n=t;else{var l=T[e];T[e]=t,i="status"===e&&t,n&&l!==t&&this.trigger(e+".change",t)}if(i&&!1!==n&&this.stateManager.setState(i),r&&localStorage){var u=JSON.parse(localStorage.getItem(s)||"{}");o?(0,p.default)(u,e):u[e]=t,localStorage&&localStorage.setItem(s,(0,c.default)(u))}return sessionStorage&&sessionStorage.setItem("stat",(0,c.default)(T)),this},resetState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.status,n={status:t||T.status,mute:!1,stack:[],switchboardNumber:"",nextState:e,transtor:{},originDir:""};this.setState(n,!1)},initializeStaffInfo:function(){var e=this,t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.auth||{},r=t.node||[],i=t.isPostEditOn||{};if((0,x.isNumber)(i)||(0,x.isString)(i)){var o=parseInt(i,10);i={callin:o,callout:o}}T.withPortrait=n.withPortrait,T.withTrack=0,T.withProfile=n.withProfile,T.withAddCL=n.withAddCL,T.withAddMyList=n.withAddMyList,T.withApi=n.withApi,T.withScreenRec=n.withScreenRec,T.screenRec=t.screenRec||{},T.name=t.name,T.voiceNumber=t.voiceNumber,T.receptions=r.map(function(e){return e.queue_name}),i.callinAfterStatus=i.callinAfterStatus,i.calloutAfterStatus=i.calloutAfterStatus,T.isPostEditOn=i,T.workorder=t.workorder||{status:0},T.withAsr=n.withAsr,T.accountEnv=t.env,T.avatar=t.avatar,e.trigger("_staffInfoSynced")};this.syncStaffInfo().then(t).catch(function(e){t()})},syncStaffInfo:function(e){var t=this,n=void 0;return n=new s.default(function(n,r){E[e]?n(E[e]):t.getStaffInfo({kfext:e,success:function(t){e&&(E[e]=t),n(t)},fail:function(e){return r(e)}})}),n.catch(function(e){}),n},clearCache:function(e){e&&I[e]&&delete I[e]},stopRetry:function(e){e&&R[e]&&(R[e].stop=!0)},clearStop:function(e){e?delete O[e]:O={}},report:_.default,isCallingState:function(e,t){var n=e||this.getState("status");return(!t||"connect"!==n&&"postEdit"!==n)&&!("normal"===n||"over"===n)}};t.default={applyDecorator:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=(0,o.default)(C);!(t=(i=a.next()).done);t=!0){var l=i.value;P[l]=function(t){return e(t,function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n[v.default.ns],i=v.default.prefix+t+(r?"."+r:"");if(A.has(t)&&!n.retry){var o=Date.now(),a=L[t]?o-L[t]:o,l=this._getActionLastExpired?this._getActionLastExpired():"";if(a<1200&&l!==t){var c=t+" is ignored as frequently called, in "+a+"ms";return k.$warn(c),void this.trigger(i,{code:v.default.code.limited,message:c})}l===t&&this._clearActionLastExpired(),L[t]=o}if(n.cache){var u=Date.now();if(I[t]&&u-I[t].timestamp<1e3*n.cache)return k.$log(t+" triggered, response from cache directly"),void this.trigger(i,I[t].data);var d=n.success;n.success=function(n){var r=Date.now();d&&d.call(e,n),I[t]={timestamp:r,data:n}}}if(n.timeout){var f=setTimeout(function(){S.$error(t+" timeout"),e.trigger(i,{code:v.default.code.timeout,message:"timeout error"})},1e3*n.timeout),h=n.complete;n.complete=function(t){clearTimeout(f),h&&h.call(e,t)}}if(n.retry){var g=n.label||t,m=n.success,b=n.fail,_=n.complete;R[g]||(R[g]={count:0,originOpts:(0,p.default)({},n)}),++R[g].count,n.success=function(t){delete R[g],m&&m.call(e,t)},n.fail=function(r){R[g]&&k.$warn(g+"["+t+"] fail, try to execute "+R[g].count+" times"),R[g]&&!R[g].stop&&R[g].count<n.retry?s.default.resolve().then(function(){e[t]((0,p.default)({},R[g].originOpts))}):b&&b.call(e,r)},n.complete=function(t){(!R[g]||R[g].stop||R[g].count>=n.retry)&&(delete R[g],_&&_.call(e,t))}}if(n.stopOnFail){var y=n.label||t,w=n.success,x=n.fail;if(O[y]=O[y]||0,O[y]>=n.stopOnFail){var C=y+" is prevented as failed "+O[y]+" times yet";return S.$error(C),this.trigger(t+".stop",[n.stopOnFail,y]),void this.trigger(i,{code:v.default.code.limited,message:C})}n.success=function(t){delete O[y],w&&w.call(e,t)},n.fail=function(t){++O[y],x&&x.call(e,t)}}this.trigger(v.default.ev_action,[t,n])})}(l)}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}return P}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),o=r(i),a=n(4),s=r(a),l=n(5),c=r(l),u=function(){function e(t){(0,s.default)(this,e),this.key=t}return(0,c.default)(e,[{key:"getItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=void 0;try{var n=window.localStorage.getItem(this.key);e&&window.localStorage.removeItem(this.key),t=JSON.parse(n)}catch(e){}return t}},{key:"setItem",value:function(e){try{window.localStorage.setItem(this.key,(0,o.default)(e))}catch(e){}}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(8),o=r(i),a=n(4),s=r(a),l=n(5),c=r(l),u=n(59),d=n(354),f=r(d),p=n(151),h=n(7),g=r(h),m=n(168),v=r(m),b=20,_=new g.default({name:"label",msgColor:"#500"}),y=new g.default("statusChangeEvent"),w=new g.default("stateChange"),x=new g.default("stacks"),k=new g.default({name:"ignored",msgColor:"#f00"}),S=new g.default({name:"new calling",msgColor:"#fff",msgBgColor:"#0aa"}),C=function(){function e(t){var n=this;(0,s.default)(this,e);var r=this.stator=t,i=this.transtor=new f.default(t),a=this.lastStatus=r.getState("status"),l=void 0,c=void 0,d=void 0,p=[],h=function(e){e&&-1===p.indexOf(e)&&"0"!==e&&(p.unshift(e),S.$log("lastCallIds add "+e),p.length>b&&(p.length=b))},m=function(e){if(e&&p.indexOf(e)>-1){var t=p.findIndex(function(t){return e===t});p.splice(t,1)}},v=function(e){e!==d&&e!==c&&(c=e,h(d)),d=""};i.goto(a),r.one("invite.statemanager",function(e,t){var n=t.callid;v(n)}),r.one("stateChange.statemanager",function(e,t){"over"===t&&(h(d),d="")}),r.one("_makecall.statemanager",function(e,t){v(t)}),r.one("_resetCurCallid.debug",function(e,t){v(),p=[]}),r.one("statusChange.statemanager",function(e,a){var s=r.getState(),f=r._getOptions("mode"),v=u.status[a.CallStatus],b=s.isHardwareLogin,w=a,x=a.CallId&&"0"!==a.CallId&&d!==a.CallId,C=void 0!==w.CallClientType?u.callClientType.agent===w.CallClientType:i.isBEvent,T=void 0!==w.CallDirection?u.callDirection.callIn===w.CallDirection:i.isCallIn,E=n.getOperator(C,w),I=T?"callin":"callout",A=1===w.DisplayNumType||2===w.DisplayNumType,R=w.ConsultType||s.consultType,O=w.ConsultSet||s.consultSet,L=w.CallType===u.callTypeCode.consult&&"consultBack"!==v&&R===u.consultTypeCode.systemservice&&"b1"===i.role;L&&"webrtc"===f&&2===O&&r.setMuteState({isMute:1}),void 0!==w.AnswerType&&r.setState("currentAnswerType",w.AnswerType);var P=r.isPSTN&&r.isPSTN(),M=p.indexOf(a.CallId)>-1;c&&a.CallId!==c&&!d&&h(a.CallId);var $=a.CallId&&c===a.CallId||x&&(!M||["normal","connect","over"].indexOf(s.status)>-1)&&["normal","connect","calling","online"].indexOf(v)>-1||x&&w.CallType===u.callTypeCode.monitor&&w.CallStatus===u.statusCode.monitor&&!w.CallRes;x&&g.default.$setExtraInfo({callid:a.CallId}),!l&&a.CallKfext&&(l=a.CallKfext,g.default.$setExtraInfo({kfext:l})),$&&(s.callid=w.CallId,c="",r.resetState(w),i.reset(),x=!1,h(d,a.CallId),d=a.CallId,M&&m(d),M=!1,g.default.$startNewTrace("newCalling"),S.$log("new calling start... Version:["+r.version+"]"));var N=[x?"callIdChanged":"sameCallId",C?"bEvent":"cEvent",P?"PSTN":void 0===P?"VOIP:Default":b?"isHardwareLogin":"VOIP","mode:"+f,"dir:"+I,"callType:"+w.CallType,"opor:"+E,"role:"+i.role];if(A&&N.unshift("phoneHidden"),y.$log(["res",(0,o.default)({},w)],{tags:N}),!v||w.CallRes||x&&a.CallStatus!==u.statusCode.postEdit||"over"===v&&s.status===v||M&&w.CallType!==u.callTypeCode.monitor&&w.CallType!==u.callTypeCode.consult&&w.CallType!==u.callTypeCode.transfer)return k.$log(v+" statusChange is ignored as prevented!",{tags:["currentCallId:"+d,"isInLastCallId:"+M,"isNewCalling:"+$,"callIdOnCallMaked:"+c].concat(N)}),void(w.CallRes&&"consult"===v&&t.setState({status:"online",direction:t.getState("nextState")&&t.getState("nextState").direction,callType:u.callTypeCode.normal}));i.set({lastState:s,nextState:w,operator:E,isBEvent:C,isCallIn:T});try{i[v]()}catch(e){return void k.$log(v+" statusChange is ignored as transit error!, state."+s.status+", transtor."+i.state,{tags:N})}i.isMulti&&N.push("isMulti"),_.$log({tags:N}),r.setState({status:i.state,role:i.role,direction:I,multi:i.isMulti,callid:d||a.CallId||s.callid,callKfext:w.CallKfext||s.callKfext,callOperator:w.CallOperator||s.callOperator,callOperatored:w.CallOperatored||s.callOperatored,lastCallType:s.callType,callType:w.CallType||s.callType,switchboardNumber:w.switchboardNumber||s.switchboardNumber,isNumberHidden:A,consultType:L?R:"",consultSet:L?O:"",nextState:(0,o.default)(r.getState("nextState")||{},w),transtor:{isBEvent:i.isBEvent,bMultiOut:i.bMultiOut,cMultiOut:i.cMultiOut,isMulti:i.isMulti&&!i.bMultiOut&&!i.cMultiOut,operator:E,history:i.history||{},isConsultTransfer:i.isConsultTransfer}},!1),w.CustomerNum&&r.setState("tel",w.CustomerNum,!0),n.setState()})}return(0,c.default)(e,[{key:"getOperator",value:function(e,t){return t.CallOperator===t.CallKfext?"self":e?"colleague":"customer"}},{key:"setState",value:function(e){var t=this.stator,n=this.transtor,r=e||t.getState("status"),i="",a=this.lastStatus,s=t.getState("isPostEditOn")||{},l=t.getState("direction"),c=t.getState("originDir")||l,d=t.getState("stack")||[],f=void 0;if(!(void 0===u.statusCode[r]||"postEdit"===a&&"postEdit"===r||"over"===a&&"over"===r||"over"===a&&"postEdit"===r||"normal"===a&&"normal"===r)){if(s[c]&&"over"===r&&a&&"postEdit"!==a&&(i=r,r="postEdit",t.setState("status",r,!1)),w.$log((i?i+"->"+r:r)+", lastState:"+a,{},(0,p.desenState)((0,o.default)({},t.getState()))),f=-1===d.indexOf(r),d.push(r),f&&("online"!==r&&"calling"!==r&&"connect"!==r||t.setState("originDir",c),"online"===r&&t.setState("callStartStamp",Date.now()),t.trigger("_"+r+".stateChange",l)),"over"!==r&&"postEdit"!==r||t.getState("callEndStamp")||t.setState("callEndStamp",Date.now()),"over"===r){var h=(t.getState("callStartStamp")&&t.getState("callEndStamp")||0)-(t.getState("callStartStamp")||0);h=(0,v.default)(Math.floor(h/1e3)),x.$log("通话结束："+d.join("--\x3e"),{tags:["duration:"+h,"callid:"+(t.getState("callid")||"-")]}),t.setState("callStartStamp",0),t.setState("callEndStamp",0)}n.state!==r&&n.goto(r),t.trigger("stateChange",[r,a]),this.lastStatus=r,"over"===r&&(d.length=0)}}}]),e}();t.default=C},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(34),o=r(i),a=n(28),s=r(a),l=n(355),c=r(l),u=n(356),d=r(u),f=n(357),p=r(f),h=c.default.factory({plugins:[new d.default({max:2})],data:function(e){var t=e.getState(),n={CustomerNum:t.tel};return{isBEvent:!1,isCallIn:"callin"===t.direction,isMulti:t.multi,role:t.role,operator:"",nextState:n,consultHangupCount:0,cMultiOut:!1,bMultiOut:!1,qd:e}},transitions:p.default,methods:{set:function(e,t){var n=this;return"object"===(void 0===e?"undefined":(0,s.default)(e))?(0,o.default)(e).forEach(function(t){n[t]=e[t]}):this[e]=t,this},onEnterOver:function(){}}});t.default=h},function(e,t,n){!function(t,n){e.exports=n()}(0,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t,n){"use strict";e.exports=function(e,t){var n,r,i;for(n=1;n<arguments.length;n++){r=arguments[n];for(i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}},function(e,t,n){"use strict";var r=n(0);e.exports={build:function(e,t){var n,i,o,a=t.plugins;for(n=0,i=a.length;n<i;n++)o=a[n],o.methods&&r(e,o.methods),o.properties&&Object.defineProperties(e,o.properties)},hook:function(e,t,n){var r,i,o,a,s=e.config.plugins,l=[e.context];for(n&&(l=l.concat(n)),r=0,i=s.length;r<i;r++)a=s[r],(o=s[r][t])&&o.apply(a,l)}}},function(e,t,n){"use strict";function r(e){if(0===e.length)return e;var t,n,r=e.split(/[_-]/);if(1===r.length&&r[0][0].toLowerCase()===r[0][0])return e;for(n=r[0].toLowerCase(),t=1;t<r.length;t++)n=n+r[t].charAt(0).toUpperCase()+r[t].substring(1).toLowerCase();return n}r.prepended=function(e,t){return t=r(t),e+t[0].toUpperCase()+t.substring(1)},e.exports=r},function(e,t,n){"use strict";function r(e,t){e=e||{},this.options=e,this.defaults=t.defaults,this.states=[],this.transitions=[],this.map={},this.lifecycle=this.configureLifecycle(),this.init=this.configureInitTransition(e.init),this.data=this.configureData(e.data),this.methods=this.configureMethods(e.methods),this.map[this.defaults.wildcard]={},this.configureTransitions(e.transitions||[]),this.plugins=this.configurePlugins(e.plugins,t.plugin)}var i=n(0),o=n(2);i(r.prototype,{addState:function(e){this.map[e]||(this.states.push(e),this.addStateLifecycleNames(e),this.map[e]={})},addStateLifecycleNames:function(e){this.lifecycle.onEnter[e]=o.prepended("onEnter",e),this.lifecycle.onLeave[e]=o.prepended("onLeave",e),this.lifecycle.on[e]=o.prepended("on",e)},addTransition:function(e){this.transitions.indexOf(e)<0&&(this.transitions.push(e),this.addTransitionLifecycleNames(e))},addTransitionLifecycleNames:function(e){this.lifecycle.onBefore[e]=o.prepended("onBefore",e),this.lifecycle.onAfter[e]=o.prepended("onAfter",e),this.lifecycle.on[e]=o.prepended("on",e)},mapTransition:function(e){var t=e.name,n=e.from,r=e.to;return this.addState(n),"function"!=typeof r&&this.addState(r),this.addTransition(t),this.map[n][t]=e,e},configureLifecycle:function(){return{onBefore:{transition:"onBeforeTransition"},onAfter:{transition:"onAfterTransition"},onEnter:{state:"onEnterState"},onLeave:{state:"onLeaveState"},on:{transition:"onTransition"}}},configureInitTransition:function(e){return"string"==typeof e?this.mapTransition(i({},this.defaults.init,{to:e,active:!0})):"object"==typeof e?this.mapTransition(i({},this.defaults.init,e,{active:!0})):(this.addState(this.defaults.init.from),this.defaults.init)},configureData:function(e){return"function"==typeof e?e:"object"==typeof e?function(){return e}:function(){return{}}},configureMethods:function(e){return e||{}},configurePlugins:function(e,t){e=e||[];var n,r,i;for(n=0,r=e.length;n<r;n++)i=e[n],"function"==typeof i&&(e[n]=i=i()),i.configure&&i.configure(this);return e},configureTransitions:function(e){var t,n,r,i,o,a=this.defaults.wildcard;for(n=0;n<e.length;n++)for(r=e[n],i=Array.isArray(r.from)?r.from:[r.from||a],o=r.to||a,t=0;t<i.length;t++)this.mapTransition({name:r.name,from:i[t],to:o})},transitionFor:function(e,t){var n=this.defaults.wildcard;return this.map[e][t]||this.map[n][t]},transitionsFor:function(e){var t=this.defaults.wildcard;return Object.keys(this.map[e]).concat(Object.keys(this.map[t]))},allStates:function(){return this.states},allTransitions:function(){return this.transitions}}),e.exports=r},function(e,t,n){function r(e,t){this.context=e,this.config=t,this.state=t.init.from,this.observers=[e]}var i=n(0),o=n(6),a=n(1),s=[null,[]];i(r.prototype,{init:function(e){if(i(this.context,this.config.data.apply(this.context,e)),a.hook(this,"init"),this.config.init.active)return this.fire(this.config.init.name,[])},is:function(e){return Array.isArray(e)?e.indexOf(this.state)>=0:this.state===e},isPending:function(){return this.pending},can:function(e){return!this.isPending()&&!!this.seek(e)},cannot:function(e){return!this.can(e)},allStates:function(){return this.config.allStates()},allTransitions:function(){return this.config.allTransitions()},transitions:function(){return this.config.transitionsFor(this.state)},seek:function(e,t){var n=this.config.defaults.wildcard,r=this.config.transitionFor(this.state,e),i=r&&r.to;return"function"==typeof i?i.apply(this.context,t):i===n?this.state:i},fire:function(e,t){return this.transit(e,this.state,this.seek(e,t),t)},transit:function(e,t,n,r){var i=this.config.lifecycle,o=this.config.options.observeUnchangedState||t!==n;return n?this.isPending()?this.context.onPendingTransition(e,t,n):(this.config.addState(n),this.beginTransit(),r.unshift({transition:e,from:t,to:n,fsm:this.context}),this.observeEvents([this.observersForEvent(i.onBefore.transition),this.observersForEvent(i.onBefore[e]),o?this.observersForEvent(i.onLeave.state):s,o?this.observersForEvent(i.onLeave[t]):s,this.observersForEvent(i.on.transition),o?["doTransit",[this]]:s,o?this.observersForEvent(i.onEnter.state):s,o?this.observersForEvent(i.onEnter[n]):s,o?this.observersForEvent(i.on[n]):s,this.observersForEvent(i.onAfter.transition),this.observersForEvent(i.onAfter[e]),this.observersForEvent(i.on[e])],r)):this.context.onInvalidTransition(e,t,n)},beginTransit:function(){this.pending=!0},endTransit:function(e){return this.pending=!1,e},failTransit:function(e){throw this.pending=!1,e},doTransit:function(e){this.state=e.to},observe:function(e){if(2===e.length){var t={};t[e[0]]=e[1],this.observers.push(t)}else this.observers.push(e[0])},observersForEvent:function(e){for(var t,n=0,r=this.observers.length,i=[];n<r;n++)t=this.observers[n],t[e]&&i.push(t);return[e,i,!0]},observeEvents:function(e,t,n,r){if(0===e.length)return this.endTransit(void 0===r||r);var i=e[0][0],o=e[0][1],s=e[0][2];if(t[0].event=i,i&&s&&i!==n&&a.hook(this,"lifecycle",t),0===o.length)return e.shift(),this.observeEvents(e,t,i,r);var l=o.shift(),c=l[i].apply(l,t);return c&&"function"==typeof c.then?c.then(this.observeEvents.bind(this,e,t,i)).catch(this.failTransit.bind(this)):!1===c?this.endTransit(!1):this.observeEvents(e,t,i,c)},onInvalidTransition:function(e,t,n){throw new o("transition is invalid in current state",e,t,n,this.state)},onPendingTransition:function(e,t,n){throw new o("transition is invalid while previous transition is still in progress",e,t,n,this.state)}}),e.exports=r},function(e,t,n){"use strict";function r(e){return o(this||{},e)}function i(){var e,t;"function"==typeof arguments[0]?(e=arguments[0],t=arguments[1]||{}):(e=function(){this._fsm.apply(this,arguments)},t=arguments[0]||{});var n=new u(t,r);return a(e.prototype,n),e.prototype._fsm.config=n,e}function o(e,t){return a(e,new u(t,r)),e._fsm(),e}function a(e,t){if("object"!=typeof e||Array.isArray(e))throw Error("StateMachine can only be applied to objects");c.build(e,t),Object.defineProperties(e,p),s(e,f),s(e,t.methods),t.allTransitions().forEach(function(t){e[l(t)]=function(){return this._fsm.fire(t,[].slice.call(arguments))}}),e._fsm=function(){this._fsm=new d(this,t),this._fsm.init(arguments)}}var s=n(0),l=n(2),c=n(1),u=n(3),d=n(4),f={is:function(e){return this._fsm.is(e)},can:function(e){return this._fsm.can(e)},cannot:function(e){return this._fsm.cannot(e)},observe:function(){return this._fsm.observe(arguments)},transitions:function(){return this._fsm.transitions()},allTransitions:function(){return this._fsm.allTransitions()},allStates:function(){return this._fsm.allStates()},onInvalidTransition:function(e,t,n){return this._fsm.onInvalidTransition(e,t,n)},onPendingTransition:function(e,t,n){return this._fsm.onPendingTransition(e,t,n)}},p={state:{configurable:!1,enumerable:!0,get:function(){return this._fsm.state},set:function(e){throw Error("use transitions to change state")}}};r.version="3.0.1",r.factory=i,r.apply=o,r.defaults={wildcard:"*",init:{name:"init",from:"none"}},e.exports=r},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i){this.message=e,this.transition=t,this.from=n,this.to=r,this.current=i}}])})},function(e,t,n){!function(t,n){e.exports=n()}(0,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){"use strict";function r(e){if(0===e.length)return e;var t,n,r=e.split(/[_-]/);if(1===r.length&&r[0][0].toLowerCase()===r[0][0])return e;for(n=r[0].toLowerCase(),t=1;t<r.length;t++)n=n+r[t].charAt(0).toUpperCase()+r[t].substring(1).toLowerCase();return n}r.prepended=function(e,t){return t=r(t),e+t[0].toUpperCase()+t.substring(1)},e.exports=r},function(e,t,n){"use strict";var r=n(0);e.exports=function(e){e=e||{};var t=r(e.name||e.past||"history"),n=r(e.future||"future"),i=r.prepended("clear",t),o=r.prepended(t,"back"),a=r.prepended(t,"forward"),s=r.prepended("can",o),l=r.prepended("can",a),c=e.max,u={configure:function(e){e.addTransitionLifecycleNames(o),e.addTransitionLifecycleNames(a)},init:function(e){e[t]=[],e[n]=[]},lifecycle:function(e,r){"onEnterState"===r.event&&(e[t].push(r.to),c&&e[t].length>c&&e[t].shift(),r.transition!==o&&r.transition!==a&&(e[n].length=0))},methods:{},properties:{}};return u.methods[i]=function(){this[t].length=0,this[n].length=0},u.properties[s]={get:function(){return this[t].length>1}},u.properties[l]={get:function(){return this[n].length>0}},u.methods[o]=function(){if(!this[s])throw Error("no history");var e=this[t].pop(),r=this[t].pop();this[n].push(e),this._fsm.transit(o,e,r,[])},u.methods[a]=function(){if(!this[l])throw Error("no history");var e=this.state,t=this[n].pop();this._fsm.transit(a,e,t,[])},u}}])})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(59),i=n(7),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=new o.default("transition"),s=[{name:"calling",from:["normal","connect","calling","stopService","over","postEdit","error"],to:function(){var e=this.nextState,t="calling",n=e.CallType===r.callTypeCode.monitor&&"self"===this.operator;return(e.CallType===r.callTypeCode.consult&&this.isCallIn||n)&&(this.role="b2"),(!this.isCallIn&&this.isBEvent&&!n||this.isCallIn&&!this.isBEvent)&&(t="normal"===this.state?"connect":this.state),a.$log("name.calling from "+this.state+" to "+t),t}},{name:"online",from:["normal","connect","calling","online","consult","hold","multi","over"],to:function(){var e=this.nextState,t="normal"===this.state?"connect":this.state;switch(e.CallType){case r.callTypeCode.normal:0==(e.CallDirection^e.CallClientType+1)&&(t="online");break;case r.callTypeCode.consult:this.isCallIn&&(this.role="b2",t="online");break;case r.callTypeCode.transfer:this.isCallIn&&(t="online");break;case r.callTypeCode.monitor:t="online"}return a.$log("name.online from "+this.state+" to "+t),t}},{name:"over",from:"*",to:function(){var e=this.qd,t=e.getState(),n=this.nextState,i=void 0;if("self"===this.operator||"postEdit"===this.state){var o="postEdit"!==this.state&&"over";return a.$log("name.over from "+this.state+" to "+o+", operator.self"),o}if(this.isMulti){this.isBEvent||"customer"!==this.operator?(i=t.callName,this.bMultiOut=!0):(i=e.formatTel(t.customerName||t.tel),this.cMultiOut=!0),e.trigger("_multiOut",[i,this.cMultiOut?"c":"b"]);var s=this.cMultiOut&&this.bMultiOut?"over":this.state;return n.CallType=r.callTypeCode.normal,a.$log("name.over from "+this.state+" to "+s+", isulti"),s}if("b1"===this.role&&("consult"===this.state&&t.callType!==r.callTypeCode.normal||("online"===this.state||"consult"===this.history[0])&&(t.callType===r.callTypeCode.consult||n.CallType===r.callTypeCode.other||"consult"===this.history[0]&&t.callType===r.callTypeCode.normal)||"monitor"===this.state)||"b2"===this.role&&"online"===this.state){if("b2"===this.role&&"colleague"===this.operator)return"over";if(this.isBEvent&&"colleague"===this.operator||!this.isBEvent)return this.nextState.CallType=r.callTypeCode.normal,this[this.isBEvent?"bMultiOut":"cMultiOut"]=!0,a.$log("name.over from "+this.state+" to online, 咨询状态下的挂断"),this.isBEvent&&this.cMultiOut||!this.isBEvent&&this.bMultiOut?"over":"online"}else if("b1"===this.role&&"colleague"===this.operator&&"calling"===this.state&&t.callType===r.callTypeCode.consult)return a.$log("name.over from "+this.state+" to online"),"online";var l="postEdit"!==this.state&&"over";return a.$log("name.over from "+this.state+" to "+l),l}},{name:"stopService",from:"*",to:function(){return"postEdit"===this.state||(this.isMulti||"consult"===this.history[0]||"consult"===this.state||"b2"===this.role&&"customer"===this.operator)&&!this.isBEvent?(a.$log("name.stopService from "+this.state+" to "+this.state+", ignore"),!1):(a.$log("name.stopService from "+this.state+" to over"),"over")}},{name:"prepare",from:"*",to:function(){return"postEdit"===this.state?(a.$log("name.prepare from "+this.state+" to "+this.state+", ignore"),!1):(a.$log("name.prepare from "+this.state+" to over"),"over")}},{name:"hold",from:"online",to:function(){return a.$log("name.hold from "+this.state+" to hold"),"hold"}},{name:"unHold",from:"hold",to:function(){return a.$log("name.unHold from "+this.state+" to online"),"online"}},{name:"transfer",from:["online"],to:function(){var e=0===this.nextState.CallRes?"over":this.state;return a.$log("name.transfer from "+this.state+" to "+e),e}},{name:"consult",from:["normal","connect","calling","online","multi","hold"],to:function(){return"b1"===this.role&&(this.cMultiOut=this.bMultiOut=this.isMulti=!1),0===this.nextState.CallRes?(a.$log("name.consult from "+this.state+" to consult"),"consult"):(this.qd.showTip("咨询失败"),this.nextState.CallType=r.callTypeCode.normal,a.$log("name.consult from "+this.state+" to "+this.state+", this.state"),!1)}},{name:"consultBack",from:["consult","calling","online","hold"],to:function(){var e=this.nextState,t="b1"===this.role?"online":"over";return e.CallType=r.callTypeCode.normal,a.$log("name.consultBack from "+this.state+" to "+t),t}},{name:"consultTransfer",from:["consult","online","hold"],to:function(){var e=this.nextState,t=0===e.CallRes&&"b1"===this.role?"over":this.state;return this.role="b1",this.isConsultTransfer=!0,e.CallType=r.callTypeCode.normal,a.$log("name.consultTransfer from "+this.state+" to "+t),t}},{name:"monitor",from:["normal","postEdit","over","calling","online"],to:function(){"self"===this.operator&&(this.role="b2");var e="b1"!==this.role&&"monitor";return a.$log("name.monitor from "+this.state+" to "+e),e}},{name:"breakIn",from:["calling","online","monitor"],to:function(){return this.isMulti=!0,this.legCount=0,a.$log("name.breakIn from "+this.state+" to breakIn"),"breakIn"}},{name:"multi",from:["consult","online"],to:function(){return this.isMulti=!0,a.$log("name.multi from "+this.state+" to multi"),"multi"}},{name:"breakDown",from:["online","monitor","breakIn"],to:function(){return"b2"===this.role?(this.role="b1",this.isMulti=!1,a.$log("name.breakDown from "+this.state+" to online"),"online"):(a.$log("name.breakDown from "+this.state+" to over"),"over")}},{name:"postEdit",from:"*",to:function(){var e=this.nextState.postEditType?"over"!==this.state&&"postEdit":"postEdit"===this.state&&"over",t=this.nextState.restId||this.nextState.workStatus;this.nextState.restId;return"postEdit"!==e&&void 0!==t&&t<100&&(this.qd.trigger("workStatusChange",{status:t}),a.$log("workStatusChange triggered, status: "+t)),a.$log("name.postEdit from "+this.state+" to "+e),e}},{name:"error",from:"*",to:function(){var e=this.nextState;return~["over","postEdit"].indexOf(this.state)?(a.$log("name.error from "+this.state+" to "+this.state+", over|postEdit"),!1):"b1"===this.role&&r.callTypeCode.consult===e.CallType?(e.CallType=r.callTypeCode.normal,a.$log("name.error from "+this.state+" to online, b1&consult"),"online"):(a.$log("name.error from "+this.state+" to over"),"over")}},{name:"goto",from:"*",to:function(e){return a.$log("name.goto from "+this.state+" to "+e),e}},{name:"reset",from:"*",to:function(){return this.role="b1",this.isConsultTransfer=!1,this.cMultiOut=this.bMultiOut=this.isMulti=!1,a.$log("name.reset from "+this.state+" to normal"),"normal"}}];t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),o=r(i);t.default=function(e){function t(t){clearTimeout(i),t?e.getNetWorkState({callid:e.getState("callid")}):i=setTimeout(function(){e.getNetWorkState({callid:e.getState("callid")})},r)}var n=e._getOptions(),r="webrtc"===n.mode?1e3:5e3,i=void 0,a=!1,s=void 0;e.one("netWorkStatus.monitor",function(n,r){var i,a=e.getState("callid");r=r||{},r.callid&&a!==r.callid||(s||l.$log("netWorkState: "+(0,o.default)(r)+", callid: "+a),s=r,i=r.rtt>450?1:r.rtt>300?2:r.rtt>150?3:r.rtt>50?4:5,r.level=i,t(),e.setState("netWorkStatus",r),e.trigger("syncNetWorkState",r),i<2&&l.$warn("当前网络状况不佳，state:"+(0,o.default)(r)))}),e.one("_over.stateChange.network",function(){s&&l.$log("netWorkState: "+(0,o.default)(s)),s=""}),e.one("stateChange.network",function(n,r){if(e.isCallingState(r,!0)){if(!a){a=!0;var o=e._getOptions();"client"!==o.mode&&"webrtc"!==o.mode||t(!0)}}else a=!1,clearTimeout(i)})};var a=n(7),s=r(a),l=new s.default("netWorkState")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(14),o=r(i),a=n(7),s=r(a),l=new s.default("WebRTC");void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return t?new o.default(function(n,r){t.call(navigator,e,n,r)}):o.default.reject({name:"notSurpport",message:"当前浏览器不支持getUserMedia接口"})}),void 0===navigator.mediaDevices.enumerateDevices&&(navigator.mediaDevices.enumerateDevices=function(){return l.$log("navigator.mediaDevices is undefined"),[]})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(142),o=r(i),a=n(144),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),l=n(264),c=r(l),u=n(382),d=r(u),f=n(351),p=r(f),h=n(353),g=r(h),m=n(358),v=r(m),b=n(383),_=r(b),y=n(7),w=r(y),x=n(152),k=r(x),S=n(297),C=new w.default("version"),T=new w.default("windowError"),E=o.default.extend(p.default.applyDecorator(c.default),d.default.applyDecorator(c.default),s),I=window.qd=new E;I.version="v3-202306301410",new _.default(I),I.on("configsSetted.main",function(e,t){var n=t.kfext,r=t.bizID,i=t.socketUrl||"api",o=/\bapi|sandbox/.test(i)?i.indexOf("sandbox")>-1?"gray":"ol":"oa";I.setState({kfext:n,socketEnv:o,callKfext:n,simple:t.simple}),I.initializeStaffInfo(),r&&w.default.$setExtraInfo({from:r}),w.default.$use(k.default,{uin:n,url:t.reportUrl}),C.$log(I.version),C.$log("sdk script root:'"+S.scriptRoot+"'"),C.$log("Page url: "+window.location.href),I.report({apiName:"version",vendor:I.version,code:0,statusCode:0})}),I.stateManager=new g.default(I),(0,v.default)(I),window===top&&window.addEventListener("error",function(e){/qd.*\.js/.test(e.filename)&&T.$error(e.message)}),t.default=I},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(68),o=r(i),a=n(8),s=r(a),l=n(11),c=r(l),u=n(69),d=r(u),f=n(321),p=r(f),h=n(362),g=r(h),m=n(229),v=r(m),b=n(38),_=r(b),y=n(151),w=n(7),x=r(w),k=n(171),S=r(k),C=n(213),T=/getQueueCountList|getNetWorkState|busiHeartbeat/,E=new x.default({name:"actionStep",filterReg:T}),I=new x.default("socket"),A=new x.default({name:"eventTriggered",filterReg:/netWorkStatus/}),R=new x.default("eventDelay"),O=new x.default("retry"),L=new x.default("ErrLog"),P=!1,M=!1,$=void 0,N=10,D=[],F=!1,q=!1,U={oa:"https://oaimg.b.qq.com/CDN/source/call/sdk-white.js",gray:"https://bqq.gtimg.com/CDN/source/call/sdk-white.js",ol:"https://bqq.gtimg.com/CDN/source/call/sdk-white.js"};t.default=function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(o.default.mark(function t(){var n,r,i,a,l,u,d,f,h,m,b,w,k,T=this,B=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},j=arguments[1];return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=!1,r=_.default.socketUrl=B.socketUrl||_.default.socketUrl,i=this.getState("socketEnv"),P=!1,t.prev=4,t.next=7,(0,S.default)(U[i],!0);case 7:t.next=11;break;case 9:t.prev=9,t.t0=t.catch(4);case 11:return this.socket&&("config"===B.from&&this.trigger("destroyed",{}),this.socket.off&&this.socket.off(),this.socket.close(),I.$log("last socket destroyed")),I.$log("socket connectting"),a=this._getOptions(),l=(0,C.useNewSocket)(a.appId),u=l?g.default:p.default,d=l?_.default.socketV2Path:_.default.socketPath,f=this.socket=u(r,{transports:["websocket","polling"],reconnection:!1,path:d,query:{js_api_ticket:this._getTicket()}}),h=function(){I.$log("ticket refreshed, to recreate a socket"),e.call(T,{socketUrl:r},function(){if(!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).code){var e=T._getTicket();P=!0,I.$log("to re-send config options"),T.once(_.default.prefix+"reconnect",function(){T.trigger("connect",T),T.report({apiName:"socketReconnectSuccess",code:0,statusCode:200})}),T.trigger(_.default.ev_action,["reconnect",T._getOptions()]),T._isConfigedSuccess()&&T.goon({ticket:e}),M=!1,N=10}})},m=f.retry=function(e,t){return P?(I.$log("already connected when reconnect"),void T.trigger("connect",T)):M?void I.$log("reconnecting, do not repeat to connect"):(t&&(N=10,E.$log("qd.connect triggered "+(e?"with callback":""))),I.$log("socket retrying to connect, to refresh ticket"),e&&D.push(e),T.off(_.default.ev_goon_ticketExpired,h),T.once(_.default.ev_goon_ticketExpired,h),T._setTicketExpired(),M=!0,clearTimeout($),$=setTimeout(function(){L.$error("socket: timeout when reconnecting"),w({code:_.default.code.timeout,message:"timeout when reconnecting"},t)},3e3),void T.report({apiName:"socketReconnect",code:0,statusCode:200}))},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!q&&n||T.report({apiName:q?"errResponse":"createSocket",code:e.errstatus||3,statusCode:e.statusCode||3}),n||(n=!0,j&&j.call(T,{code:3,message:"connect error"}))},w=function(e,t){if(M=!1,10!==N&&-2!==N||t||(L.$error("socket: disconnect triggered as "+(0,c.default)(e)),T.trigger("disconnect",e)),T.isLogin&&!T.isLogin())return void b(e);if(N--,clearTimeout($),N<0||q)b(e);else{var n=10-N;$=setTimeout(function(){O.$log("retry, "+n+"st"),m()},1===n?0:1e3*Math.pow(2,n-2))}},f.on("connect",function(){var e=void 0;try{e=f.io.engine.transport.query}catch(e){}I.$log("socket "+(M?"re-connected":"connected")+", query: "+(0,c.default)(e)),clearTimeout($)}),f.on("disconnect",function(e){P=!1,w(F?"socketbreak":e);var t=F?0:1;F=!1,T.report({apiName:"socketDisconnect",code:t,statusCode:t})}),f.on("connect_error",function(e){P=!1,L.$error("socket connect_error: "+(0,c.default)(e)),w(e)}),k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=void 0;try{t=f.io.engine.transport.query}catch(e){}P=!1,400===e.description&&T.report({apiName:"TransportError",code:400,statusCode:400}),L.$error("socket error: "+(0,c.default)(e)+", query: "+(0,c.default)(t)),w(e)},l?f.io.on("error",k):f.on("error",k),this.one(_.default.ev_action+".socket",function(e,t,n){var r=void 0;return t&&v.default.call(T,t,n)?(r=T._getTicket())?T._isConfigedFail()||!P?(T.trigger(_.default.prefix+t,T._getErrResponse()),void E.$warn(t+" is prevented, "+(P?"config failed":"connect is lost"))):(n=(0,s.default)({},n),n.timestamp=Math.floor(Date.now()/1e3),n.ticket=r,n.success&&delete n.success,n.fail&&delete n.fail,n.complete&&delete n.complete,void 0!==n.debug&&delete n.debug,f.emit("action",{action:t,data:n}),void E.$log(t+" triggered, "+(0,c.default)(n))):(T.trigger(_.default.prefix+t,{code:_.default.code.ticketExpired,message:_.default.checkParamsFail}),void E.$warn("ticket无效，ticket:"+r)):void(t&&E.$warn(t+" is canceled"))}),f.on("response",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=void 0,r=void 0,i=void 0,o=void 0,a=e.svr_time,s=e.php_time;return Math.abs(s-a)>=60?void R.$log("server至php状态推送超时"):(t=e.data||{},r=t[_.default.ns],o=void 0!==t.code?t.code:t.errcode,e.buildSocket?(P=!0,e.uin&&e.kfext&&(T.setState("uin",e.uin),x.default.$setExtraInfo({uin:e.uin,kfext:e.kfext}),I.$log("socket authorized, kfext:"+e.kfext+", uin:"+e.uin)),n=!0,j&&(j.call(T,B),j=null),D.forEach(function(e){e.call(T)}),void(D=[])):(e.action&&(o||void 0===o?L.$error("socket: "+e.action+" response error, res is "+(0,c.default)(e)):E.$log(e.action+" response, data is "+(0,c.default)((0,y.desenResponse)(e.action,t))),i=_.default.prefix+e.action+(r?"."+r:""),T.trigger(i,t)),e.event&&A.$log(e.event+", data is "+(0,c.default)((0,y.desenEvent)(e.event,t)))&&T.trigger(e.event,t),e.event&&"socketbreak"===e.event&&(F=!0,N=-2,L.$error("socket: socket break")),T.trigger("_response",e),void(q="errResponse"===e.event||0===e.buildSocket)))}),f.isConnected=function(){return P},t.abrupt("return",f);case 31:case"end":return t.stop()}},t,this,[[4,9]])}));return e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){"object"===(void 0===e?"undefined":(0,l.default)(e))&&(t=e,e=void 0),t=t||{};var n=(0,u.url)(e,t.path||"/socket.io"),r=n.source,i=n.id,o=n.path,a=p[i]&&o in p[i].nsps,s=t.forceNew||t["force new connection"]||!1===t.multiplex||a,c=void 0;return s?c=new d.Manager(r,t):(p[i]||(p[i]=new d.Manager(r,t)),c=p[i]),n.query&&!t.query&&(t.query=n.queryKey),c.socket(n.path,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.connect=t.io=t.Socket=t.Manager=t.protocol=void 0;var o=n(8),a=r(o),s=n(28),l=r(s),c=n(162);Object.defineProperty(t,"protocol",{enumerable:!0,get:function(){return c.protocol}});var u=n(364),d=n(378),f=n(275),p={};(0,a.default)(i,{Manager:d.Manager,Socket:f.Socket,io:i,connect:i}),t.Manager=d.Manager,t.Socket=f.Socket,t.io=i,t.connect=i,t.default=i},function(e,t,n){"use strict";function r(e){var t=[],n=e.data,r=e;return r.data=i(n,t),r.attachments=t.length,{packet:r,buffers:t}}function i(e,t){if(!e)return e;if((0,c.isBinary)(e)){var n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){for(var r=new Array(e.length),o=0;o<e.length;o++)r[o]=i(e[o],t);return r}if("object"===(void 0===e?"undefined":(0,l.default)(e))&&!(e instanceof Date)){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(a[s]=i(e[s],t));return a}return e}function o(e,t){return e.data=a(e.data,t),delete e.attachments,e}function a(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"==typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(var n=0;n<e.length;n++)e[n]=a(e[n],t);else if("object"===(void 0===e?"undefined":(0,l.default)(e)))for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=a(e[r],t));return e}Object.defineProperty(t,"__esModule",{value:!0});var s=n(28),l=function(e){return e&&e.__esModule?e:{default:e}}(s);t.deconstructPacket=r,t.reconstructPacket=o;var c=n(268)},function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments[2],r=e;n=n||"undefined"!=typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==n?n.protocol+"//"+e:"https://"+e),r=(0,i.parse)(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var o=-1!==r.host.indexOf(":"),a=o?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+a+":"+r.port+t,r.href=r.protocol+"://"+a+(n&&n.port===r.port?"":":"+r.port),r}Object.defineProperty(t,"__esModule",{value:!0}),t.url=r;var i=n(269)},function(e,t,n){"use strict";function r(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function i(e,t){return a&&e.data instanceof Blob?e.data.arrayBuffer().then(r).then(t):s&&(e.data instanceof ArrayBuffer||l(e.data))?t(r(e.data)):void c(e,!1,function(e){d||(d=new TextEncoder),t(d.encode(e))})}Object.defineProperty(t,"__esModule",{value:!0}),t.encodePacket=void 0,t.encodePacketToBinary=i;var o=n(270),a="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),s="function"==typeof ArrayBuffer,l=function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},c=function(e,t,n){var r=e.type,i=e.data;return a&&i instanceof Blob?t?n(i):u(i,n):s&&(i instanceof ArrayBuffer||l(i))?t?n(i):u(new Blob([i]),n):n(o.PACKET_TYPES[r]+(i||""))},u=function(e,t){var n=new FileReader;return n.onload=function(){var e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)},d=void 0;t.encodePacket=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodePacket=void 0;var r=n(270),i=n(367),o="function"==typeof ArrayBuffer,a=(t.decodePacket=function(e,t){if("string"!=typeof e)return{type:"message",data:s(e,t)};var n=e.charAt(0);return"b"===n?{type:"message",data:a(e.substring(1),t)}:r.PACKET_TYPES_REVERSE[n]?e.length>1?{type:r.PACKET_TYPES_REVERSE[n],data:e.substring(1)}:{type:r.PACKET_TYPES_REVERSE[n]}:r.ERROR_PACKET},function(e,t){if(o){var n=(0,i.decode)(e);return s(n,t)}return{base64:!0,data:e}}),s=function(e,t){switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i="undefined"==typeof Uint8Array?[]:new Uint8Array(256),o=0;o<r.length;o++)i[r.charCodeAt(o)]=o;t.encode=function(e){var t=new Uint8Array(e),n=void 0,i=t.length,o="";for(n=0;n<i;n+=3)o+=r[t[n]>>2],o+=r[(3&t[n])<<4|t[n+1]>>4],o+=r[(15&t[n+1])<<2|t[n+2]>>6],o+=r[63&t[n+2]];return i%3==2?o=o.substring(0,o.length-1)+"=":i%3==1&&(o=o.substring(0,o.length-2)+"=="),o},t.decode=function(e){var t=.75*e.length,n=e.length,r=void 0,o=0,a=void 0,s=void 0,l=void 0,c=void 0;"="===e[e.length-1]&&(t--,"="===e[e.length-2]&&t--);var u=new ArrayBuffer(t),d=new Uint8Array(u);for(r=0;r<n;r+=4)a=i[e.charCodeAt(r)],s=i[e.charCodeAt(r+1)],l=i[e.charCodeAt(r+2)],c=i[e.charCodeAt(r+3)],d[o++]=a<<2|s>>4,d[o++]=(15&s)<<4|l>>2,d[o++]=(3&l)<<6|63&c;return u}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){}function o(){for(var e in T.requests)T.requests.hasOwnProperty(e)&&T.requests[e].abort()}Object.defineProperty(t,"__esModule",{value:!0}),t.Request=t.Polling=void 0;var a=n(8),s=r(a),l=n(13),c=r(l),u=n(4),d=r(u),f=n(5),p=r(f),h=n(20),g=r(h),m=n(21),v=r(m),b=n(124),_=n(273),y=n(97),w=n(369),x=n(88),k=n(98),S=n(125),C=function(){return null!=new w.XHR({xdomain:!1}).responseType}(),T=(t.Polling=function(e){function t(e){(0,d.default)(this,t);var n=(0,g.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));if(n.polling=!1,"undefined"!=typeof location){var r="https:"===location.protocol,i=location.port;i||(i=r?"443":"80"),n.xd="undefined"!=typeof location&&e.hostname!==location.hostname||i!==e.port}var o=e&&e.forceBase64;return n.supportsBinary=C&&!o,n.opts.withCredentials&&(n.cookieJar=(0,w.createCookieJar)()),n}return(0,v.default)(t,e),(0,p.default)(t,[{key:"doOpen",value:function(){this.poll()}},{key:"pause",value:function(e){var t=this;this.readyState="pausing";var n=function(){t.readyState="paused",e()};if(this.polling||!this.writable){var r=0;this.polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}},{key:"poll",value:function(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}},{key:"onData",value:function(e){var t=this,n=function(e){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose({description:"transport closed by the server"}),!1;t.onPacket(e)};(0,y.decodePayload)(e,this.socket.binaryType).forEach(n),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}},{key:"doClose",value:function(){var e=this,t=function(){e.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}},{key:"write",value:function(e){var t=this;this.writable=!1,(0,y.encodePayload)(e,function(e){t.doWrite(e,function(){t.writable=!0,t.emitReserved("drain")})})}},{key:"uri",value:function(){var e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=(0,_.yeast)()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}},{key:"request",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.default)(e,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new T(this.uri(),e)}},{key:"doWrite",value:function(e,t){var n=this,r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",function(e,t){n.onError("xhr post error",e,t)})}},{key:"doPoll",value:function(){var e=this,t=this.request();t.on("data",this.onData.bind(this)),t.on("error",function(t,n){e.onError("xhr poll error",t,n)}),this.pollXhr=t}},{key:"name",get:function(){return"polling"}}]),t}(b.Transport),t.Request=function(e){function t(e,n){(0,d.default)(this,t);var r=(0,g.default)(this,(t.__proto__||(0,c.default)(t)).call(this));return(0,k.installTimerFunctions)(r,n),r.opts=n,r.method=n.method||"GET",r.uri=e,r.data=void 0!==n.data?n.data:null,r.create(),r}return(0,v.default)(t,e),(0,p.default)(t,[{key:"create",value:function(){var e,n=this,r=(0,k.pick)(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this.opts.xd;var i=this.xhr=new w.XHR(r);try{i.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(var o in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(o)&&i.setRequestHeader(o,this.opts.extraHeaders[o])}}catch(e){}if("POST"===this.method)try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{i.setRequestHeader("Accept","*/*")}catch(e){}null===(e=this.opts.cookieJar)||void 0===e||e.addCookies(i),"withCredentials"in i&&(i.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(i.timeout=this.opts.requestTimeout),i.onreadystatechange=function(){var e;3===i.readyState&&(null===(e=n.opts.cookieJar)||void 0===e||e.parseCookies(i)),4===i.readyState&&(200===i.status||1223===i.status?n.onLoad():n.setTimeoutFn(function(){n.onError("number"==typeof i.status?i.status:0)},0))},i.send(this.data)}catch(e){return void this.setTimeoutFn(function(){n.onError(e)},0)}"undefined"!=typeof document&&(this.index=t.requestsCount++,t.requests[this.index]=this)}},{key:"onError",value:function(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}},{key:"cleanup",value:function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=i,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete t.requests[this.index],this.xhr=null}}},{key:"onLoad",value:function(){var e=this.xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}},{key:"abort",value:function(){this.cleanup()}}]),t}(x.Emitter));if(T.requestsCount=0,T.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",o);else if("function"==typeof addEventListener){var E="onpagehide"in S.globalThisShim?"pagehide":"unload";addEventListener(E,o,!1)}},function(e,t,n){"use strict";function r(e){var t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||o.hasCORS))return new XMLHttpRequest}catch(e){}if(!t)try{return new(a.globalThisShim[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}function i(){}Object.defineProperty(t,"__esModule",{value:!0}),t.XHR=r,t.createCookieJar=i;var o=n(370),a=n(125)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=!1;try{r="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){}t.hasCORS=r},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.WS=void 0;var i=n(13),o=r(i),a=n(4),s=r(a),l=n(5),c=r(l),u=n(20),d=r(u),f=n(21),p=r(f),h=n(124),g=n(273),m=n(98),v=n(164),b=n(97),_="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();t.WS=function(t){function n(e){(0,s.default)(this,n);var t=(0,d.default)(this,(n.__proto__||(0,o.default)(n)).call(this,e));return t.supportsBinary=!e.forceBase64,t}return(0,p.default)(n,t),(0,c.default)(n,[{key:"doOpen",value:function(){if(this.check()){var e=this.uri(),t=this.opts.protocols,n=_?{}:(0,m.pick)(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=v.usingBrowserWebSocket&&!_?t?new v.WebSocket(e,t):new v.WebSocket(e):new v.WebSocket(e,t,n)}catch(e){return this.emitReserved("error",e)}this.ws.binaryType=this.socket.binaryType||v.defaultBinaryType,this.addEventListeners()}}},{key:"addEventListeners",value:function(){var e=this;this.ws.onopen=function(){e.opts.autoUnref&&e.ws._socket.unref(),e.onOpen()},this.ws.onclose=function(t){return e.onClose({description:"websocket connection closed",context:t})},this.ws.onmessage=function(t){return e.onData(t.data)},this.ws.onerror=function(t){return e.onError("websocket error",t)}}},{key:"write",value:function(t){var n=this;this.writable=!1;for(var r=0;r<t.length;r++)!function(r){var i=t[r],o=r===t.length-1;(0,b.encodePacket)(i,n.supportsBinary,function(t){var r={};if(!v.usingBrowserWebSocket&&(i.options&&(r.compress=i.options.compress),n.opts.perMessageDeflate)){("string"==typeof t?e.byteLength(t):t.length)<n.opts.perMessageDeflate.threshold&&(r.compress=!1)}try{v.usingBrowserWebSocket?n.ws.send(t):n.ws.send(t,r)}catch(e){}o&&(0,v.nextTick)(function(){n.writable=!0,n.emitReserved("drain")},n.setTimeoutFn)})}(r)}},{key:"doClose",value:function(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}},{key:"uri",value:function(){var e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=(0,g.yeast)()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}},{key:"check",value:function(){return!!v.WebSocket}},{key:"name",get:function(){return"websocket"}}]),n}(h.Transport)}).call(t,n(372).Buffer)},function(e,t,n){"use strict";(function(e){function r(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e,t){if(r()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,n){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return a(this,e,t,n)}function a(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?f(e,t,n,r):"string"==typeof t?u(e,t,n):p(e,t)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function l(e,t,n,r){return s(t),t<=0?i(e,t):void 0!==n?"string"==typeof r?i(e,t).fill(n,r):i(e,t).fill(n):i(e,t)}function c(e,t){if(s(t),e=i(e,t<0?0:0|h(t)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function u(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!o.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|m(t,n);e=i(e,r);var a=e.write(t,n);return a!==r&&(e=e.slice(0,a)),e}function d(e,t){var n=t.length<0?0:0|h(t.length);e=i(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function f(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),o.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=o.prototype):e=d(e,t),e}function p(e,t){if(o.isBuffer(t)){var n=0|h(t.length);return e=i(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||K(t.length)?i(e,0):d(e,t);if("Buffer"===t.type&&J(t.data))return d(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function h(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function g(e){return+e!=e&&(e=0),o.alloc(+e)}function m(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(e).length;default:if(r)return H(e).length;t=(""+t).toLowerCase(),r=!0}}function v(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return L(this,t,n);case"utf8":case"utf-8":return I(this,t,n);case"ascii":return R(this,t,n);case"latin1":case"binary":return O(this,t,n);case"base64":return E(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function b(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function _(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:y(e,t,n,r,i);if("number"==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):y(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,r,i){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,n/=2}var c;if(i){var u=-1;for(c=n;c<s;c++)if(o(e,c)===o(t,-1===u?0:c-u)){if(-1===u&&(u=c),c-u+1===l)return u*a}else-1!==u&&(c-=c-u),u=-1}else for(n+l>s&&(n=s-l),c=n;c>=0;c--){for(var d=!0,f=0;f<l;f++)if(o(e,c+f)!==o(t,f)){d=!1;break}if(d)return c}return-1}function w(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function x(e,t,n,r){return W(H(t,e.length-n),e,n,r)}function k(e,t,n,r){return W(Y(t),e,n,r)}function S(e,t,n,r){return k(e,t,n,r)}function C(e,t,n,r){return W(G(t),e,n,r)}function T(e,t,n,r){return W(z(t,e.length-n),e,n,r)}function E(e,t,n){return 0===t&&n===e.length?X.fromByteArray(e):X.fromByteArray(e.slice(t,n))}function I(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=n){var l,c,u,d;switch(s){case 1:o<128&&(a=o);break;case 2:l=e[i+1],128==(192&l)&&(d=(31&o)<<6|63&l)>127&&(a=d);break;case 3:l=e[i+1],c=e[i+2],128==(192&l)&&128==(192&c)&&(d=(15&o)<<12|(63&l)<<6|63&c)>2047&&(d<55296||d>57343)&&(a=d);break;case 4:l=e[i+1],c=e[i+2],u=e[i+3],128==(192&l)&&128==(192&c)&&128==(192&u)&&(d=(15&o)<<18|(63&l)<<12|(63&c)<<6|63&u)>65535&&d<1114112&&(a=d)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return A(r)}function A(e){var t=e.length;if(t<=Q)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=Q));return n}function R(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function O(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function L(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=V(e[o]);return i}function P(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function M(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function $(e,t,n,r,i,a){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function N(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function D(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function F(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function q(e,t,n,r,i){return i||F(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),Z.write(e,t,n,r,23,4),n+4}function U(e,t,n,r,i){return i||F(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),Z.write(e,t,n,r,52,8),n+8}function B(e){if(e=j(e).replace(ee,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function j(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function V(e){return e<16?"0"+e.toString(16):e.toString(16)}function H(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Y(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function z(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function G(e){return X.toByteArray(B(e))}function W(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function K(e){return e!==e}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var X=n(373),Z=n(374),J=n(375);t.Buffer=o,t.SlowBuffer=g,t.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=r(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,n){return a(null,e,t,n)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,n){return l(null,e,t,n)},o.allocUnsafe=function(e){return c(null,e)},o.allocUnsafeSlow=function(e){return c(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!J(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=o.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},o.byteLength=m,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)b(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?I(this,0,e):v.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,n,r,i){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var a=i-r,s=n-t,l=Math.min(a,s),c=this.slice(r,i),u=e.slice(t,n),d=0;d<l;++d)if(c[d]!==u[d]){a=c[d],s=u[d];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},o.prototype.indexOf=function(e,t,n){return _(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return _(this,e,t,n,!1)},o.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return x(this,e,t,n);case"ascii":return k(this,e,t,n);case"latin1":case"binary":return S(this,e,t,n);case"base64":return C(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Q=4096;o.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r;if(o.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=o.prototype;else{var i=t-e;r=new o(i,void 0);for(var a=0;a<i;++a)r[a]=this[a+e]}return r},o.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},o.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},o.prototype.readUInt8=function(e,t){return t||M(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||M(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||M(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||M(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||M(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){t||M(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||M(e,4,this.length),Z.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||M(e,4,this.length),Z.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||M(e,8,this.length),Z.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||M(e,8,this.length),Z.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){$(this,e,t,n,Math.pow(2,8*n)-1,0)}var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},o.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){$(this,e,t,n,Math.pow(2,8*n)-1,0)}var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||$(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||$(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||$(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||$(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):D(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||$(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);$(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);$(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||$(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||$(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||$(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||$(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):D(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||$(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,n){return q(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return q(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return U(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return U(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},o.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var a;if("number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var s=o.isBuffer(e)?e:H(new o(e,r).toString()),l=s.length;for(a=0;a<n-t;++a)this[a+t]=s[a%l]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(t,n(15))},function(e,t,n){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function i(e){var t=r(e),n=t[0],i=t[1];return 3*(n+i)/4-i}function o(e,t,n){return 3*(t+n)/4-n}function a(e){var t,n,i=r(e),a=i[0],s=i[1],l=new f(o(e,a,s)),c=0,u=s>0?a-4:a;for(n=0;n<u;n+=4)t=d[e.charCodeAt(n)]<<18|d[e.charCodeAt(n+1)]<<12|d[e.charCodeAt(n+2)]<<6|d[e.charCodeAt(n+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;return 2===s&&(t=d[e.charCodeAt(n)]<<2|d[e.charCodeAt(n+1)]>>4,l[c++]=255&t),1===s&&(t=d[e.charCodeAt(n)]<<10|d[e.charCodeAt(n+1)]<<4|d[e.charCodeAt(n+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t),l}function s(e){return u[e>>18&63]+u[e>>12&63]+u[e>>6&63]+u[63&e]}function l(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(s(r));return i.join("")}function c(e){for(var t,n=e.length,r=n%3,i=[],o=0,a=n-r;o<a;o+=16383)i.push(l(e,o,o+16383>a?a:o+16383));return 1===r?(t=e[n-1],i.push(u[t>>2]+u[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(u[t>>10]+u[t>>4&63]+u[t<<2&63]+"=")),i.join("")}t.byteLength=i,t.toByteArray=a,t.fromByteArray=c;for(var u=[],d=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,g=p.length;h<g;++h)u[h]=p[h],d[p.charCodeAt(h)]=h;d["-".charCodeAt(0)]=62,d["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,c=l>>1,u=-7,d=n?i-1:0,f=n?-1:1,p=e[t+d];for(d+=f,o=p&(1<<-u)-1,p>>=-u,u+=s;u>0;o=256*o+e[t+d],d+=f,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;u>0;a=256*a+e[t+d],d+=f,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=c}return(p?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,l,c=8*o-i-1,u=(1<<c)-1,d=u>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,h=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),t+=a+d>=1?f/l:f*Math.pow(2,1-d),t*l>=2&&(a++,l/=2),a+d>=u?(s=0,a=u):a+d>=1?(s=(t*l-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&s,p+=h,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+p]=255&a,p+=h,a/=256,c-=8);e[n+p-h]|=128*g}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return"message"===e.type&&"string"!=typeof e.data&&t[0]>=48&&t[0]<=54}Object.defineProperty(t,"__esModule",{value:!0}),t.WT=void 0;var o=n(13),a=r(o),s=n(4),l=r(s),c=n(5),u=r(c),d=n(20),f=r(d),p=n(21),h=r(p),g=n(124),m=n(164),v=n(97);t.WT=function(e){function t(){return(0,l.default)(this,t),(0,f.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,h.default)(t,e),(0,u.default)(t,[{key:"doOpen",value:function(){var e=this;"function"==typeof WebTransport&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(function(){e.onClose()}).catch(function(t){e.onError("webtransport error",t)}),this.transport.ready.then(function(){e.transport.createBidirectionalStream().then(function(t){var n=t.readable.getReader();e.writer=t.writable.getWriter();var r=void 0;!function t(){n.read().then(function(n){var i=n.done,o=n.value;i||(r||1!==o.byteLength||54!==o[0]?(e.onPacket((0,v.decodePacketFromBinary)(o,r,"arraybuffer")),r=!1):r=!0,t())}).catch(function(e){})}();var i=e.query.sid?'0{"sid":"'+e.query.sid+'"}':"0";e.writer.write((new TextEncoder).encode(i)).then(function(){return e.onOpen()})})}))}},{key:"write",value:function(e){var t=this;this.writable=!1;for(var n=0;n<e.length;n++)!function(n){var r=e[n],o=n===e.length-1;(0,v.encodePacketToBinary)(r,function(e){i(r,e)&&t.writer.write(Uint8Array.of(54)),t.writer.write(e).then(function(){o&&(0,m.nextTick)(function(){t.writable=!0,t.emitReserved("drain")},t.setTimeoutFn)})})}(n)}},{key:"doClose",value:function(){var e;null===(e=this.transport)||void 0===e||e.close()}},{key:"name",get:function(){return"webtransport"}}]),t}(g.Transport)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Socket=void 0;var i=n(8),o=r(i),a=n(28),s=r(a),l=n(13),c=r(l),u=n(4),d=r(u),f=n(5),p=r(f),h=n(20),g=r(h),m=n(21),v=r(m),b=n(272),_=n(98),y=n(271),w=n(274),x=n(88),k=n(97);(t.Socket=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,d.default)(this,t);var r=(0,g.default)(this,(t.__proto__||(0,c.default)(t)).call(this));return r.writeBuffer=[],e&&"object"===(void 0===e?"undefined":(0,s.default)(e))&&(n=e,e=null),e?(e=(0,w.parse)(e),n.hostname=e.host,n.secure="https"===e.protocol||"wss"===e.protocol,n.port=e.port,e.query&&(n.query=e.query)):n.host&&(n.hostname=(0,w.parse)(n.host).host),(0,_.installTimerFunctions)(r,n),r.secure=null!=n.secure?n.secure:"undefined"!=typeof location&&"https:"===location.protocol,n.hostname&&!n.port&&(n.port=r.secure?"443":"80"),r.hostname=n.hostname||("undefined"!=typeof location?location.hostname:"localhost"),r.port=n.port||("undefined"!=typeof location&&location.port?location.port:r.secure?"443":"80"),r.transports=n.transports||["polling","websocket","webtransport"],r.writeBuffer=[],r.prevBufferLen=0,r.opts=(0,o.default)({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),r.opts.path=r.opts.path.replace(/\/$/,"")+(r.opts.addTrailingSlash?"/":""),"string"==typeof r.opts.query&&(r.opts.query=(0,y.decode)(r.opts.query)),r.id=null,r.upgrades=null,r.pingInterval=null,r.pingTimeout=null,r.pingTimeoutTimer=null,"function"==typeof addEventListener&&(r.opts.closeOnBeforeunload&&(r.beforeunloadEventListener=function(){r.transport&&(r.transport.removeAllListeners(),r.transport.close())},addEventListener("beforeunload",r.beforeunloadEventListener,!1)),"localhost"!==r.hostname&&(r.offlineEventListener=function(){r.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",r.offlineEventListener,!1))),r.open(),r}return(0,v.default)(t,e),(0,p.default)(t,[{key:"createTransport",value:function(e){var t=(0,o.default)({},this.opts.query);t.EIO=k.protocol,t.transport=e,this.id&&(t.sid=this.id);var n=(0,o.default)({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new b.transports[e](n)}},{key:"open",value:function(){var e=this,n=void 0;if(this.opts.rememberUpgrade&&t.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))n="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn(function(){e.emitReserved("error","No transports available")},0);n=this.transports[0]}this.readyState="opening";try{n=this.createTransport(n)}catch(e){return this.transports.shift(),void this.open()}n.open(),this.setTransport(n)}},{key:"setTransport",value:function(e){var t=this;this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",function(e){return t.onClose("transport close",e)})}},{key:"probe",value:function(e){function n(){l||(l=!0,d(),s.close(),s=null)}function r(){u("transport closed")}function i(){u("socket closed")}function o(e){s&&e.name!==s.name&&n()}var a=this,s=this.createTransport(e),l=!1;t.priorWebsocketSuccess=!1;var c=function(){l||(s.send([{type:"ping",data:"probe"}]),s.once("packet",function(e){if(!l)if("pong"===e.type&&"probe"===e.data){if(a.upgrading=!0,a.emitReserved("upgrading",s),!s)return;t.priorWebsocketSuccess="websocket"===s.name,a.transport.pause(function(){l||"closed"!==a.readyState&&(d(),a.setTransport(s),s.send([{type:"upgrade"}]),a.emitReserved("upgrade",s),s=null,a.upgrading=!1,a.flush())})}else{var n=new Error("probe error");n.transport=s.name,a.emitReserved("upgradeError",n)}}))},u=function(e){var t=new Error("probe error: "+e);t.transport=s.name,n(),a.emitReserved("upgradeError",t)},d=function(){s.removeListener("open",c),s.removeListener("error",u),s.removeListener("close",r),a.off("close",i),a.off("upgrading",o)};s.once("open",c),s.once("error",u),s.once("close",r),this.once("close",i),this.once("upgrading",o),-1!==this.upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn(function(){l||s.open()},200):s.open()}},{key:"onOpen",value:function(){if(this.readyState="open",t.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade)for(var e=0,n=this.upgrades.length;e<n;e++)this.probe(this.upgrades[e])}},{key:"onPacket",value:function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}},{key:"onHandshake",value:function(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}},{key:"resetPingTimeout",value:function(){var e=this;this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(function(){e.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}},{key:"onDrain",value:function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}},{key:"flush",value:function(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){var e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}},{key:"getWritablePackets",value:function(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;for(var e=1,t=0;t<this.writeBuffer.length;t++){var n=this.writeBuffer[t].data;if(n&&(e+=(0,_.byteLength)(n)),t>0&&e>this.maxPayload)return this.writeBuffer.slice(0,t);e+=2}return this.writeBuffer}},{key:"write",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"send",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"sendPacket",value:function(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){n=n||{},n.compress=!1!==n.compress;var i={type:e,data:t,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}}},{key:"close",value:function(){var e=this,t=function(){e.onClose("forced close"),e.transport.close()},n=function n(){e.off("upgrade",n),e.off("upgradeError",n),t()},r=function(){e.once("upgrade",n),e.once("upgradeError",n)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",function(){e.upgrading?r():t()}):this.upgrading?r():t()),this}},{key:"onError",value:function(e){t.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}},{key:"onClose",value:function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}},{key:"filterUpgrades",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}]),t}(x.Emitter)).protocol=k.protocol},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Manager=void 0;var i=n(57),o=r(i),a=n(34),s=r(a),l=n(28),c=r(l),u=n(13),d=r(u),f=n(4),p=r(f),h=n(5),g=r(h),m=n(20),v=r(m),b=n(21),_=r(b),y=n(269),w=n(275),x=n(162),k=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(x),S=n(276),C=n(379),T=n(88);t.Manager=function(e){function t(e,n){(0,p.default)(this,t);var r,i=(0,v.default)(this,(t.__proto__||(0,d.default)(t)).call(this));i.nsps={},i.subs=[],e&&"object"===(void 0===e?"undefined":(0,c.default)(e))&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",i.opts=n,(0,y.installTimerFunctions)(i,n),i.reconnection(!1!==n.reconnection),i.reconnectionAttempts(n.reconnectionAttempts||1/0),i.reconnectionDelay(n.reconnectionDelay||1e3),i.reconnectionDelayMax(n.reconnectionDelayMax||5e3),i.randomizationFactor(null!==(r=n.randomizationFactor)&&void 0!==r?r:.5),i.backoff=new C.Backoff({min:i.reconnectionDelay(),max:i.reconnectionDelayMax(),jitter:i.randomizationFactor()}),i.timeout(null==n.timeout?2e4:n.timeout),i._readyState="closed",i.uri=e;var o=n.parser||k;return i.encoder=new o.Encoder,i.decoder=new o.Decoder,i._autoConnect=!1!==n.autoConnect,i._autoConnect&&i.open(),i}return(0,_.default)(t,e),(0,g.default)(t,[{key:"reconnection",value:function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}},{key:"reconnectionAttempts",value:function(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}},{key:"reconnectionDelay",value:function(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}},{key:"randomizationFactor",value:function(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}},{key:"reconnectionDelayMax",value:function(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}},{key:"timeout",value:function(e){return arguments.length?(this._timeout=e,this):this._timeout}},{key:"maybeReconnectOnOpen",value:function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}},{key:"open",value:function(e){var t=this;if(~this._readyState.indexOf("open"))return this;this.engine=new y.Socket(this.uri,this.opts);var n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;var i=(0,S.on)(n,"open",function(){r.onopen(),e&&e()}),o=function(n){t.cleanup(),t._readyState="closed",t.emitReserved("error",n),e?e(n):t.maybeReconnectOnOpen()},a=(0,S.on)(n,"error",o);if(!1!==this._timeout){var s=this._timeout,l=this.setTimeoutFn(function(){i(),o(new Error("timeout")),n.close()},s);this.opts.autoUnref&&l.unref(),this.subs.push(function(){t.clearTimeoutFn(l)})}return this.subs.push(i),this.subs.push(a),this}},{key:"connect",value:function(e){return this.open(e)}},{key:"onopen",value:function(){this.cleanup(),this._readyState="open",this.emitReserved("open");var e=this.engine;this.subs.push((0,S.on)(e,"ping",this.onping.bind(this)),(0,S.on)(e,"data",this.ondata.bind(this)),(0,S.on)(e,"error",this.onerror.bind(this)),(0,S.on)(e,"close",this.onclose.bind(this)),(0,S.on)(this.decoder,"decoded",this.ondecoded.bind(this)))}},{key:"onping",value:function(){this.emitReserved("ping")}},{key:"ondata",value:function(e){try{this.decoder.add(e)}catch(e){this.onclose("parse error",e)}}},{key:"ondecoded",value:function(e){var t=this;(0,y.nextTick)(function(){t.emitReserved("packet",e)},this.setTimeoutFn)}},{key:"onerror",value:function(e){this.emitReserved("error",e)}},{key:"socket",value:function(e,t){var n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new w.Socket(this,e,t),this.nsps[e]=n),n}},{key:"_destroy",value:function(e){var t=(0,s.default)(this.nsps),n=!0,r=!1,i=void 0;try{for(var a,l=(0,o.default)(t);!(n=(a=l.next()).done);n=!0){var c=a.value;if(this.nsps[c].active)return}}catch(e){r=!0,i=e}finally{try{!n&&l.return&&l.return()}finally{if(r)throw i}}this._close()}},{key:"_packet",value:function(e){for(var t=this.encoder.encode(e),n=0;n<t.length;n++)this.engine.write(t[n],e.options)}},{key:"cleanup",value:function(){this.subs.forEach(function(e){return e()}),this.subs.length=0,this.decoder.destroy()}},{key:"_close",value:function(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}},{key:"disconnect",value:function(){return this._close()}},{key:"onclose",value:function(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}},{key:"reconnect",value:function(){var e=this;if(this._reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var n=this.backoff.duration();this._reconnecting=!0;var r=this.setTimeoutFn(function(){t.skipReconnect||(e.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open(function(n){n?(t._reconnecting=!1,t.reconnect(),e.emitReserved("reconnect_error",n)):t.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(function(){e.clearTimeoutFn(r)})}}},{key:"onreconnect",value:function(){var e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}]),t}(T.Emitter)},function(e,t,n){"use strict";function r(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Object.defineProperty(t,"__esModule",{value:!0}),t.Backoff=r,r.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},r.prototype.reset=function(){this.attempts=0},r.prototype.setMin=function(e){this.ms=e},r.prototype.setMax=function(e){this.max=e},r.prototype.setJitter=function(e){this.jitter=e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1],r=t.mango||{},i=t.socketUrl||"https://wss.qidian.qq.com",o=/testwss/.test(i)?"oa":"online";this.socket&&("config"===t.from&&this.trigger("destroyed",{}),this.socket.off&&this.socket.off(),this.socket.close(),S.$log("last socket destroyed"));var s=function(){var o=window.Instant,s=h.default.get("corp_uin"),c=t.kfext||h.default.get("aid"),d=h.default.get("d2"),f=h.default.get("aid_skey"),p=(0,u.default)({appid:1,client_type:5,kfuin:s,aid:c,skey:f,d2:d,token_type:4},r);p.url=i;var g=p.url.replace("https://",""),v=o.create(p);k.$log("Instant.create, params: "+(0,l.default)(p));var y=function(){var e=!1;try{e=v.connectManage.socketIO.socket.connected}catch(e){}return e};return v.ready().then(function(r){!e._isConfigedSuccess()&&n&&n.call(e,t)}),e.one(b.default.ev_action+".socket",function(t,n,r){return n&&m.default.call(e,n,r)?e._isConfigedFail()||!y()?(e.trigger(b.default.prefix+n,e._getErrResponse()),void k.$warn(n+" is prevented, "+(y()?"config failed":"connect is lost"))):(r=(0,u.default)({actionName:n},r),r.success&&delete r.success,r.fail&&delete r.fail,r.complete&&delete r.complete,void 0!==r.debug&&delete r.debug,v.send({uint32_sub_msgtype:1536,uint32_sub_command:1,bytes_plugin_extra:(0,l.default)({mango_to_http_translator:{path:"/cgi-bin/call/dial/"+n,host:g}})},r).then(function(t){var r=void 0,i=void 0,o=void 0,a=void 0;try{r=JSON.parse(t)}catch(e){r=t}i=r[b.default.ns],o=void 0!==r.code?r.code:r.errcode,o||void 0===o?T.$error(n+" response error, res is "+(0,l.default)(r)):k.$log(n+" response, data is "+(0,l.default)((0,_.desenResponse)(n,r))),a=b.default.prefix+n+(i?"."+i:""),e.trigger(a,r)}),void k.$log(n+" triggered, "+(0,l.default)(r))):void(n&&k.$warn(n+" is canceled"))}),v.on(o.NOTIFY_MESSAGE_TYPE.NOTIFY_NEW_SC_MESSAGE,function(t){var n=t,r=!0,i=!1,o=void 0;try{for(var s,c=(0,a.default)(n);!(r=(s=c.next()).done);r=!0){var u=s.value,d=u.uint32_sub_msgtype,f=u.uint32_sub_command;if(1075===d&&274===f){var p=void 0,h=void 0;try{p=JSON.parse(u.bytes_sc_data).body}catch(e){p=u.bytes_sc_data||{}}h=p.data,p.event&&C.$log(p.event+", data is "+(0,l.default)((0,_.desenEvent)(p.event,h)))&&e.trigger(p.event,h),e.trigger("_response",p)}}}catch(e){i=!0,o=e}finally{try{!r&&c.return&&c.return()}finally{if(i)throw o}}}),v.on(o.NOTIFY_MESSAGE_TYPE.NOTIFY_KICK_USER,function(){e.trigger("socketbreak"),e.trigger("disconnect","socketbreak"),T.$error("mango socket break")}),v.on(o.NOTIFY_MESSAGE_TYPE.ERROR,function(t){e.trigger("disconnect",t),T.$error("mango disconnect: "+(0,l.default)(t))}),v.retry=function(){v.createConnect()},v.isConnected=y,e.socket=v};return(0,f.default)(E[o]).then(s)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(57),a=r(o),s=n(11),l=r(s),c=n(8),u=r(c);t.default=i;var d=n(171),f=r(d),p=n(381),h=r(p),g=n(229),m=r(g),v=n(38),b=r(v),_=n(151),y=n(7),w=r(y),x=/getQueueCountList|getNetWorkState|busiHeartbeat/,k=new w.default({name:"actionStep",filterReg:x}),S=new w.default("socket"),C=new w.default({name:"eventTriggered",filterReg:/netWorkStatus/}),T=new w.default("ErrLog"),E={oa:"https://oa.gtimg.com/instant/instant.js",online:"https://bqq.gtimg.com/instant/instant.js"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=document;t.default={set:function(e,t,n,i,o){o&&(o=new Date((new Date).valueOf()+o.valueOf()));var a=e+"="+escape(t)+(o?"; expires="+o.toUTCString():"")+(i?"; path="+i:"")+(n?"; domain="+n:"");return a.length<4096&&(r.cookie=a),this},get:function(e){var t=r.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=t?unescape(t[2]):null},del:function(e,t,n){return this.get(e)&&(r.cookie=e+"="+(n?"; path="+n:"")+(t?"; domain="+t:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT"),this},find:function(e){return r.cookie.match(e)}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),o=r(i),a=n(8),s=r(a),l=n(58),c=n(265),u=r(c),d=n(38),f=r(d),p=n(264),h=n(7),g=r(h),m=new g.default("actionStep"),v=window.qd,b=0,_=!1,y=[],w=!1,x=void 0,k=void 0,S={},C="",T=0,E=void 0,I=function(e){b=1,this.sipUrl=e.sipUrl},A=function(e){var t=this;b=-1,x=e,y.forEach(function(e){(0,l.isFunction)(e)&&e.call(t,x)}),y=[]},R={_isConfiging:function(){return 2===b},_isYetConfiged:function(){return 0===b||2===b},_isConfigedFail:function(){return-1===b},_isConfigedSuccess:function(){return 1===b},_isTicketExpired:function(){return _},_setTicketExpired:function(e,t){var n=this;if(t&&!_){if(C===t){if(++T>=2)return this.off(f.default.ev_goon_ticketExpired),void m.$warn(t+" retryed at max times")}else T=0;C=t}e&&(_=!0),clearTimeout(E),E=setTimeout(function(){n.trigger(f.default.ev_ticketExpired)},500)},_getTicket:function(){return k},_setTicket:function(e){k=e},_getActionLastExpired:function(){return C},_clearActionLastExpired:function(){T=0,C=""},_getErrResponse:function(){return x},_debug:function(){return w},_resetAuthorized:function(){b=0},_getOptions:function(e){return e?S[e]:S},_isConfiged:function(){return 0!==b},debug:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];m.$log("debug triggered, "+(e?"true":"false")),w=e,g.default[e?"$enable":"$disable"](),e&&this.trigger("debug"),sessionStorage&&sessionStorage.setItem("_debug",e)},noConflict:function(){return window.qd===this&&(window.qd=v),m.$log("qd.noConflict triggered"),this},config:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=void 0,r=void 0,i=void 0,o=void 0,a=void 0,l=function(e){if(e.code)return clearTimeout(o),void this.trigger(f.default.prefix+"config",e);this.trigger(f.default.ev_action,["config",t])};if(2===b||this._isConfigedSuccess())return void m.$log("repeat to config is ignored");b=2,t.muddled=void 0===t.muddled||t.muddled,t.mode=t.mode||"client",t.version=t.version||1,t.heartbeat=!0,S=(0,s.default)({},t),n=t.success,r=t.fail,t.success=function(t){I.call(e,t),n&&n.call(e,t),e.trigger("configSuccess",t)},t.fail=function(t){e._webrtcReady=void 0,A.call(e,t),r&&r.call(e,t),e.report({apiName:"config",code:t.errcode||t.code||f.default.code.configError,statusCode:t.statusCode||f.default.code.configError})},t.complete=function(t){clearTimeout(o),e.goon({isHoldAction:!0,ticket:k}),i&&i.call(e,t)},k=t.ticket,t.url=document.location.host,a=sessionStorage&&sessionStorage.getItem("_debug"),a="false"!==a&&("true"===a||void 0),w=void 0!==a?a:void 0!==t.debug&&t.debug,this.debug(w),o=setTimeout(function(){e._resetAuthorized()},15e3),this.trigger("configsSetted",(0,s.default)({},S,{debug:w})),u.default.call(this,(0,s.default)({},S,{debug:w,from:"config"}),l)},error:function(e){return m.$log("qd.error callbacks is triggered"),0===b?y.push(e):-1===b&&(0,l.isFunction)(e)&&e.call(this,x),this},goon:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isHoldAction?f.default.ev_goon_holdAction:f.default.ev_goon_ticketExpired;return m.$log("qd.goon triggered, "+(0,o.default)(e)),e.ticket&&(_=!1),k=e.ticket||k,!_&&this.trigger(t),this},reset:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]||!(this._isConfiging()||"webrtc"===this._getOptions("mode")&&0===this._webrtcReady)?(m.$log("qd.reset triggered"),this.socket&&(this.socket.off(),this.socket.close()),b=0,T=0,_=!1,y=[],this._webrtcReady=void 0,this.trigger("_reset"),this.off(f.default.ev_goon_holdAction),this.off(f.default.ev_goon_ticketExpired),this.off(".actionResponse"),(0,p.clearHold)(),g.default.$countReset(),this):(m.$log("qd.reset prevented"),this)},connect:function(e){this.socket&&this.socket.retry(e,!0)},isConnected:function(){return(0,c.isConnected)()}};t.default={applyDecorator:function(e){return R.config=e("config",R.config),R}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.toString(),n=new Blob(["("+t+")()"]);return new Worker(URL.createObjectURL(n))}function o(){var e=null,t=null;self.onmessage=function(n){var r=n.data,i=r.type,o=r.interval,a=r.delay;"startTimer"===i?e=setInterval(function(){return self.postMessage({type:"tick"})},o):"startTimeout"===i?t=setTimeout(function(){e=setInterval(function(){return self.postMessage({type:"tick"})},o)},a):"end"===i&&(clearInterval(e),clearTimeout(t))}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),s=r(a),l=n(5),c=r(l),u=n(7),d=r(u),f=new d.default("heartbeat"),p=function(){function e(t){var n=this;if((0,s.default)(this,e),this.qd=t,this.isWorkerSupported="undefined"!=typeof Worker,f.$log("is browser support worker: "+this.isWorkerSupported),this.isWorkerSupported){f.$log("heartbeat start, new worker");try{this.worker=i(o),this.worker.onmessage=function(e){"tick"===e.data.type&&n.tick()}}catch(e){this.isWorkerSupported=!1,f.$error("start new worker error")}}t.one("connect.heartbeat",function(){t.clearStop("busiHeartbeat"),n.start()}),t.one("login.heartbeat",function(){t.clearStop("busiHeartbeat"),n.delay(n.start.bind(n))}),t.one("_reset.heartbeat",function(){t.clearStop("busiHeartbeat"),n.stop()}),t.one("logout.heartbeat",function(){n.stop()}),t.one("disconnect.heartbeat",function(){n.stop()}),t.one("busiHeartbeat.stop",function(){n.stop()})}return(0,c.default)(e,[{key:"delay",value:function(e){var t=Math.floor(25*Math.random());this.isWorkerSupported?this.worker.postMessage({type:"startTimeout",delay:1e3*t,interval:25e3}):this.timeout=setTimeout(e,1e3*t)}},{key:"start",value:function(){f.$log("heartbeat start"),this.isWorkerSupported?this.worker.postMessage({type:"startTimer",interval:25e3}):this.interval=setInterval(this.tick.bind(this),25e3)}},{key:"stop",value:function(){f.$log("heartbeat stop"),this.clear()}},{key:"clear",value:function(){this.isWorkerSupported?this.worker.postMessage({type:"end"}):(clearTimeout(this.timeout),clearInterval(this.interval))}},{key:"tick",value:function(){var e=this;this.qd.busiHeartbeat({stopOnFail:3,success:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.online_platform,r=t.enable_platform;t.disable_all_platform&&(r=null,e.qd.trigger("rtcAccountsChange")),0===t.OnlineStatus&&(n=[]);var i=function(){return"webrtc"===e.qd._getOptions().mode};if(r&&i()){var o=e.qd._getPlatforms(),a=o.size!==r.length;!a&&r.forEach(function(e){!a&&(a=!o.has(e))}),a&&e.syncRtcAccounts()}n&&i()&&e.qd.trigger("rtcOnlineStateSync",[n||[],r])}})}},{key:"syncRtcAccounts",value:function(){var e=this;this.qd.getRtcAccounts({success:function(t){var n=t.data||[];e.qd.trigger("rtcAccountsChange",[n])}})}}]),e}();t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(14),o=r(i),a=n(11),s=r(a),l=n(13),c=r(l),u=n(4),d=r(u),f=n(5),p=r(f),h=n(20),g=r(h),m=n(21),v=r(m),b=n(142),_=r(b),y=n(144),w=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(y),x=n(385),k=r(x),S=n(96),C=r(S),T=n(439),E=r(T),I=n(38),A=(r(I),n(7)),R=r(A),O=n(152),L=r(O);window.JsSIP=window.JsSIP||k.default;var P=new R.default("ErrLog"),M=new R.default("SipMessage"),$=_.default.extend(w),N=function(){return Math.floor(16777215*Math.random()).toString(16)},D=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.default)(this,t);var n=(0,g.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e)),r=n.name=e.name||"sip-"+N();return n.log=new R.default("SIP-"+r),n.platform=e.platform,n.originator="",n.session="",n.userAgent="",n.kfext="",n.uin=e.uin,n.dtmf="",n.dtmfTimeout="",n.env="oa",n.inClient=e.inClient,n.sample=0,n.ready=!1,n.retryTimes=0,n.registerTimeout=0,n.isLogoutSelf=!1,n.deviceId=e.deviceId,n.deviceIdOutput=e.deviceIdOutput,n.setDeviceOutPut(n.deviceIdOutput),n.unMonitor=function(){},n}return(0,v.default)(t,e),(0,p.default)(t,[{key:"login",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1],r=this.options=this.options||t;if(this.kfext=r.kfext||this.kfext,this.uin=r.uin||this.uin,"web"!==r.from&&t.kfext&&(R.default.$setExtraInfo({from:"client"}),R.default.$use(L.default,{uin:this.kfext,url:r.reportUrl})),this.log.$log("login, opts:"+(0,s.default)(t)+", force:"+n),this.userAgent){if(this.userAgent.isRegistered())return void this.log.$log("already is registered");if(!n)return this.log.$log("agent start execute"),void this.userAgent.start();this.userAgent.removeAllListeners(),this.userAgent.stop()}if(this.cleartimeout(),this.retryTimes>=3)return this.ready=!0,this.retryTimes=0,this.userAgent&&this.userAgent.stop(),this.trigger("registrationFailed"),void P.$error("SIP-"+this.name+": loginError, retried finished");this.registerTimeout=setTimeout(function(){e.userAgent&&!e.userAgent.isRegistered()&&(e.userAgent.removeAllListeners(),++e.retryTimes,e.log.$warn("retry to login "+e.retryTimes+"st"),e.login(e.options,!0))},5e3);var i=this.uri=r.url,o=this.voipNumber=r.voipNumber,a=this.voipPassword=r.voipPassword,l="wss://"+i,c=o.indexOf("@")>-1?"sip:"+o:"sip:"+o+"@"+i,u=new k.default.WebSocketInterface(l),d=this.isTccc(),f={sockets:[u],outbound_proxy_set:l,uri:c,password:a,register:!0,session_timers:d,log_level:2,use_trtc:d};this.env=r.env;try{var p=this.userAgent=new k.default.UA(f);d&&p.registrator().setExtraHeaders(["X-TCCC-QIDIAN: 1"]),this.handleRegisterEvents(),p.start()}catch(e){this.trigger("registrationFailed"),P.$error(e.message||"error ocurred on new JsSIP")}}},{key:"isTccc",value:function(){return this.uri.indexOf("tccc")>-1||[110,10].indexOf(this.platform||this.options&&this.options.platform)>-1}},{key:"recordSipMsg",value:function(){var e=this,t=this.userAgent,n=t.transport,r=n.ondata,i=n.send,o=/([^\r\n]+)\r/,a=this.name,s=/^\s*(m=audio|a=candidate)/,l=/REGISTER|OPTIONS sip|404 Not Found|401 Unauthorized/,c=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(/[\r\n]+\s*/).filter(function(e){return s.test(e)}).map(function(e){return{label:"",info:e}})};n.send=function(r){var s=void 0,u=void 0;if("string"==typeof r){s=(r.match(o)||[])[1],u=c(r)}else s=r.method;return(e.session&&!l.test(s)||!t.isRegistered())&&M.$log(a+" send: "+s,u&&{list:u}),i.apply(n,arguments)},n.ondata=function(i){var s=i.message,u=c(s),d=s.match(o)||[],f=d[1];(e.session&&!l.test(f)||!t.isRegistered())&&M.$log(a+" receive: "+f,u&&{list:u}),r.apply(n,arguments)}}},{key:"handleRegisterEvents",value:function(){var e=this,t=this.userAgent;this.recordSipMsg(),t.on("registered",function(t){e.ready=!0,e.retryTimes=0,e.cleartimeout(),e.log.$log("registered"),e.trigger("registered",t)}),t.on("registrationFailed",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.ready?(P.$error("SIP-"+e.name+": registrationFailed triggered, "+t.cause),e.trigger("registrationFailed",t)):e.reconnect()}),t.on("disconnected",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};P.$error("SIP-"+e.name+": agent disconnected "+(t.cause||t.reason||"")),e.cleartimeout(),e.isLogoutSelf||(e.ready?e.onDisconnect():e.reconnect()),e.isLogoutSelf=!1}),t.on("connecting",function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];t.isRegistered()&&e.log.$warn("agent reconnecting")}),t.on("connected",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.log.$log("agent connected"),e.cleartimeout(),e.trigger("agentConnected",t)}),t.on("unregistered",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};P.$error("SIP-"+e.name+": agent unregistered "+(t.cause||"")),e.trigger("unregistered",t)}),t.on("newRTCSession",function(t){var n=void 0,r=void 0;e.log.$log("newSession received"),e.session=t.session,n=e.callid=e.getCallId(),e.originator=e.getOriginator(t.request),e.from=e.getFrom(t.request),e.handleNewSessionEvents(t),r={isTccc:e.isTccc(),isSip:!0,callid:n,extKfext:e.getExtKfext(),calldirection:"remote"===e.originator?1:2},e.trigger("newCalling",r),e.log.$log("newSession, "+(0,s.default)(r)+", "+(e.session?"has session":"session is null"))})}},{key:"cleartimeout",value:function(){clearTimeout(this.registerTimeout),clearTimeout(this.restartTime),clearTimeout(this.disconnectTimeout)}},{key:"onDisconnect",value:function(){var e=this;this.disconnectTimeout=setTimeout(function(){e.trigger("registrationFailed")},1e3*Math.pow(2,4))}},{key:"reconnect",value:function(){var e=this,t=this.retryTimes+1;this.cleartimeout(),this.restartTime=setTimeout(function(){e.log.$log("agent relogin"),e.userAgent.removeAllListeners(),++e.retryTimes,e.log.$warn("retry to login "+e.retryTimes+"st"),e.login(e.options,!0)},1e3*Math.pow(2,t))}},{key:"getExtKfext",value:function(){var e=void 0;try{e=this.session.extKfext=this.session._request.headers["X-Call-Info"][0].raw}catch(e){}return e}},{key:"getCallId",value:function(){var e=void 0;try{e=this.session.callid=this.session._request.headers["X-Callid"][0].raw}catch(e){}return e}},{key:"getOriginator",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.headers["Call-Info"];return t=t?t[0]:{},this.log.$log("callInfo, "+(0,s.default)(t)+", "+(t.raw?"callout":"callin")),t.raw?"local":"remote"}},{key:"getFrom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=void 0;try{t=e.headers.From[0].raw.match(/<sip:(\d+)@.+/)[1]}catch(e){}return t}},{key:"handleNewSessionEvents",value:function(e){var t=this,n=e.session;"local"===this.originator?(setTimeout(function(){t.answer().catch(function(e){})},1e3),C.default.ringback()):C.default.ring(),n.on("accepted",function(e){t.log.$log("ringing"),t.trigger("ringing",e)}),n.on("confirmed",function(e){if(t.log.$log("confirmed"),t.trigger("answer",e),C.default.ringPause(),n.connection){var r=new MediaStream;(n.connection.getReceivers()||[]).forEach(function(e){return r.addTrack(e.track)}),t.playStream(r),t.monitor(n.connection)}}),n.on("addstream",function(e){var r=e.stream&&e.stream.getConnection&&e.stream.getConnection().peerConnection_;r&&t.monitor(r),t.trigger("streamReady",n)}),n.on("ended",function(e){t.log.$log("ended"),t.trigger("hangup",e),t.onSessionFinished()}),n.on("failed",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};P.$error("SIP-"+t.name+": sessionFailed, "+e.cause),C.default.ringPause(),t.trigger("sessionFailed",e),t.onSessionFinished()}),n.on("sdp",function(e){if("local"===e.originator){var n=e.sdp.match(/a=rtpmap:\d+\s\w+\/(\d+)/);t.sample=parseInt(n?n[1]:0,10)}}),n.on("peerconnection",function(e){e.peerconnection.oniceconnectionstatechange=function(){M.$log("iceStateChange: "+e.peerconnection.iceConnectionState)}})}},{key:"playStream",value:function(e){var t=(e.streams?e.streams[0]:e.stream)||e;this.trigger("sipAnswer"),C.default.play(t),this.log.$log("receive remote media, playStream")}},{key:"ringPause",value:function(){C.default.ringPause()}},{key:"monitor",value:function(e){var t=this;this.unMonitor=(0,E.default)(e,function(e){e.callid=t.callid,t.stats=e,t.trigger("report",t.parseStats(e))})}},{key:"onSessionFinished",value:function(){this.callid="",this.session="",this.originator="",this.unMonitor()}},{key:"parseStats",value:function(e){var t={};return t.uint32_lost_num=e.packetsDiscardedOnSend,t.uint32_bytes_send=e.bytesSent,t.uint32_packets_send=e.packetsSent,t.uint32_bytes_recv=e.bytesReceived,t.uint32_packets_recv=e.packetsReceived,t.uint32_lost_rate=100*(e.packageLostUp||0).toFixed(2),t.uint32_sample=this.sample,t.uint64_kfext=this.kfext,t.str_sdk_callid=this.session._request.call_id,t.str_callid=this.session.callid,t.platform=this.platform||this.options.platform,t.uint32_interval=e.interval,t.uint32_end=!this.session,t.uint64_statistic_time=Math.floor(Date.now()/1e3),t.uint32_network_type=0,t}},{key:"logout",value:function(e){this.isLogoutSelf=!0,this.cleartimeout(),e&&this.userAgent&&this.userAgent.stop(),this.log.$log("logout, stopUserAagent:"+e)}},{key:"answer",value:function(){var e=this;return this.log.$log("answer"),new o.default(function(t,n){if(!e.session){var r="answer canceled as session is null";return n({code:-1,msg:r}),void e.log.$log(r)}if(e.session.isEstablished())return t({code:0}),void e.log.$log("do not repeat to answer the session");if(e.session.isEnded()){var i="answer canceled as session is ended";return n({code:-1,msg:i}),void e.log.$log(i)}try{e.session.answer({mediaConstraints:{audio:e.inClient||{deviceId:e.deviceId},video:!1},mediaStream:null,pcConfig:{rtcpMuxPolicy:"negotiate"}}),e.trigger("sipAnswered"),t({code:0})}catch(t){P.$error("SIP-"+e.name+": answer failed, "+t.message),n({code:-1,msg:t.message})}})}},{key:"hangup",value:function(){this.session&&!this.session.isEnded()&&(this.session.terminate(),this.log.$log("hangup"))}},{key:"isConnected",value:function(){return this.userAgent&&this.userAgent.isConnected()}},{key:"setVolume",value:function(e){C.default.setVolume(e),this.log.$log("setVolume")}},{key:"setMute",value:function(){this.session&&this.session.mute(),this.log.$log("setMute")}},{key:"unmute",value:function(){this.session&&this.session.unmute(),this.log.$log("unmute")}},{key:"dialClick",value:function(e){this.dtmf+=String(e),clearTimeout(this.dtmfTimeout),this.dtmfTimeout=setTimeout(this.sendDTMF.bind(this),1200)}},{key:"sendDTMF",value:function(e){e=e||this.dtmf,this.session&&this.session.sendDTMF(e,{}),this.log.$log("sendDTMF: "+e),this.dtmf=""}},{key:"setDeviceOutPut",value:function(e){this.deviceIdOutput=e,C.default.setSinkId(e)}},{key:"setDeviceInPut",value:function(e){this.deviceId=e}}]),t}($);t.default=D},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}var o,a,s,l=n(100),c=i(l),u=n(386),d=i(u),f=n(169),p=i(f),h=n(68),g=i(h),m=n(69),v=i(m),b=n(20),_=i(b),y=n(21),w=i(y),x=n(289),k=i(x),S=n(137),C=i(S),T=n(4),E=i(T),I=n(5),A=i(I),R=n(14),O=i(R),L=n(290),P=i(L),M=n(397),$=i(M),N=n(400),D=i(N),F=n(89),q=i(F),U=n(56),B=i(U),j=n(46),V=i(j),H=n(155),Y=i(H),z=n(291),G=i(z),W=n(8),K=i(W),X=n(11),Z=i(X),J=n(404),Q=i(J),ee=n(95),te=i(ee),ne=n(292),re=i(ne),ie=n(293),oe=i(ie),ae=n(13),se=i(ae),le=n(114),ce=i(le),ue=n(35),de=i(ue),fe=n(102),pe=i(fe),he=n(103),ge=i(he),me=n(294),ve=i(me),be=n(118),_e=i(be),ye=n(295),we=i(ye),xe=n(84),ke=i(xe),Se=n(154),Ce=i(Se),Te=n(34),Ee=i(Te),Ie=n(28),Ae=i(Ie);!function(r,i){"object"==(0,Ae.default)(t)&&void 0!==e?e.exports=i(n(199)):(a=[n(199)],o=i,void 0!==(s="function"==typeof o?o.apply(t,a):o)&&(e.exports=s))}(0,function(e){function t(e){var t,n=e.default;return"function"==typeof n?(t=function(){return n.apply(this,arguments)}).prototype=n.prototype:t={},Object.defineProperty(t,"__esModule",{value:!0}),(0,Ee.default)(e).forEach(function(n){var r=(0,Ce.default)(e,n);(0,ke.default)(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}),t}function n(e,t){var n,r=(0,Ee.default)(e);return we.default&&(n=(0,we.default)(e),t&&(n=n.filter(function(t){return(0,Ce.default)(e,t).enumerable})),r.push.apply(r,n)),r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){u(e,t,r[t])}):_e.default?(0,ve.default)(e,(0,_e.default)(r)):n(Object(r)).forEach(function(t){(0,ke.default)(e,t,(0,Ce.default)(r,t))})}return e}function o(e){return(o="function"==typeof ge.default&&"symbol"==(0,Ae.default)(pe.default)?function(e){return void 0===e?"undefined":(0,Ae.default)(e)}:function(e){return e&&"function"==typeof ge.default&&e.constructor===ge.default&&e!==ge.default.prototype?"symbol":void 0===e?"undefined":(0,Ae.default)(e)})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,ke.default)(e,L(r.key),r)}}function l(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t,n){(t=L(t))in e?(0,ke.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=(0,de.default)(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}function h(e){return(h=ce.default?se.default.bind():function(e){return e.__proto__||(0,se.default)(e)})(e)}function m(e,t){return(m=ce.default?ce.default.bind():function(e,t){return e.__proto__=t,e})(e,t)}function b(){if("undefined"==typeof Reflect||!oe.default)return!1;if(oe.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call((0,oe.default)(Boolean,[],function(){})),!0}catch(e){return!1}}function y(e,t,n){return(y=b()?oe.default.bind():function(e,t,n){var r=[null],t=(r.push.apply(r,t),new(Function.bind.apply(e,r)));return n&&m(t,n.prototype),t}).apply(null,arguments)}function x(e){var t="function"==typeof re.default?new re.default:void 0;return(x=function(e){function n(){return y(e,arguments,h(this).constructor)}if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}return n.prototype=(0,de.default)(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),m(n,e)})(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){var t=b();return function(){var n,r=h(e),r=(n=t?(n=h(this).constructor,(0,oe.default)(r,arguments,n)):r.apply(this,arguments),this);if(n&&("object"==(void 0===n?"undefined":(0,Ae.default)(n))||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return S(r)}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function R(e,t){var n,r,i,o,a=void 0!==ge.default&&e[pe.default]||e["@@iterator"];if(a)return i=!(r=!0),{s:function(){a=a.call(e)},n:function(){var e=a.next();return r=e.done,e},e:function(e){i=!0,n=e},f:function(){try{r||null==a.return||a.return()}finally{if(i)throw n}}};if(Array.isArray(e)||(a=function(e){var t;if(e)return"string"==typeof e?I(e,void 0):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?(0,te.default)(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?I(e,void 0):void 0}(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),o=0,{s:t=function(){},n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function L(e){return e=function(e){if("object"!=(void 0===e?"undefined":(0,Ae.default)(e))||null===e)return e;var t=e[Q.default];if(void 0===t)return String(e);if(t=t.call(e,"string"),"object"!=(void 0===t?"undefined":(0,Ae.default)(t)))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==(void 0===e?"undefined":(0,Ae.default)(e))?e:String(e)}function M(e){var t;return a(this,M),(t=Mr.call(this)).code=4,t.name="NOT_READY_ERROR",t.message=e,t}function N(e){var t;return a(this,N),(t=$r.call(this)).code=3,t.name="NOT_SUPPORTED_ERROR",t.message=e,t}function F(e){var t;return a(this,F),(t=Nr.call(this)).code=2,t.name="INVALID_STATE_ERROR",t.status=e,t.message="Invalid status: ".concat(e),t}function U(e,t){var n;return a(this,U),(n=Dr.call(this)).code=1,n.name="CONFIGURATION_ERROR",n.parameter=e,n.value=t,n.message=n.value?"Invalid value ".concat((0,Z.default)(n.value),' for parameter "').concat(n.parameter,'"'):"Missing parameter: ".concat(n.parameter),n}function j(){function e(n,r,i){if(a(this,e),!(n&&n instanceof t))throw new TypeError('missing or invalid "uri" parameter');for(var o in this._uri=n,this._parameters={},this.display_name=r,i)Object.prototype.hasOwnProperty.call(i,o)&&this.setParam(o,i[o])}var t,n;return Tr||(Tr=1,t=z(),n=H(),l(e,[{key:"uri",get:function(){return this._uri}},{key:"display_name",get:function(){return this._display_name},set:function(e){this._display_name=0===e?"0":e}},{key:"setParam",value:function(e,t){e&&(this._parameters[e.toLowerCase()]=null==t?null:t.toString())}},{key:"getParam",value:function(e){if(e)return this._parameters[e.toLowerCase()]}},{key:"hasParam",value:function(e){if(e)return!!this._parameters.hasOwnProperty(e.toLowerCase())}},{key:"deleteParam",value:function(e){var t;if(e=e.toLowerCase(),this._parameters.hasOwnProperty(e))return t=this._parameters[e],delete this._parameters[e],t}},{key:"clearParams",value:function(){this._parameters={}}},{key:"clone",value:function(){return new e(this._uri.clone(),this._display_name,JSON.parse((0,Z.default)(this._parameters)))}},{key:"_quote",value:function(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}},{key:"toString",value:function(){var e,t=this._display_name?'"'.concat(this._quote(this._display_name),'" '):"";for(e in t+="<".concat(this._uri.toString(),">"),this._parameters)Object.prototype.hasOwnProperty.call(this._parameters,e)&&(t+=";".concat(e),null!==this._parameters[e]&&(t+="=".concat(this._parameters[e])));return t}}],[{key:"parse",value:function(e){return-1!==(e=n.parse(e,"Name_Addr_Header"))?e:void 0}}]),Cr=e),Cr}function H(){function e(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}return Ir||(Ir=1,(t={parse:function(t,n){function r(e){Fn<qn||(qn<Fn&&(qn=Fn,Un=[]),Un.push(e))}function i(){var e;return"\r\n"===t.substr(Fn,2)?(e="\r\n",Fn+=2):(e=null,r('"\\r\\n"')),e}function o(){var e;return/^[0-9]/.test(t.charAt(Fn))?(e=t.charAt(Fn),Fn++):(e=null,r("[0-9]")),e}function a(){var e;return/^[a-zA-Z]/.test(t.charAt(Fn))?(e=t.charAt(Fn),Fn++):(e=null,r("[a-zA-Z]")),e}function s(){var e;return/^[0-9a-fA-F]/.test(t.charAt(Fn))?(e=t.charAt(Fn),Fn++):(e=null,r("[0-9a-fA-F]")),e}function l(){var e;return e=null===(e=d())?f():e}function c(){var e;return/^[\0-\xFF]/.test(t.charAt(Fn))?(e=t.charAt(Fn),Fn++):(e=null,r("[\\0-\\xFF]")),e}function u(){var e;return/^["]/.test(t.charAt(Fn))?(e=t.charAt(Fn),Fn++):(e=null,r('["]')),e}function d(){var e;return 32===t.charCodeAt(Fn)?(e=" ",Fn++):(e=null,r('" "')),e}function f(){var e;return 9===t.charCodeAt(Fn)?(e="\t",Fn++):(e=null,r('"\\t"')),e}function p(){var e;return/^[a-zA-Z0-9]/.test(t.charAt(Fn))?(e=t.charAt(Fn),Fn++):(e=null,r("[a-zA-Z0-9]")),e}function h(){var e;return 59===t.charCodeAt(Fn)?(e=";",Fn++):(e=null,r('";"')),null===e&&(47===t.charCodeAt(Fn)?(e="/",Fn++):(e=null,r('"/"')),null===e&&(63===t.charCodeAt(Fn)?(e="?",Fn++):(e=null,r('"?"')),null===e&&(58===t.charCodeAt(Fn)?(e=":",Fn++):(e=null,r('":"')),null===e&&(64===t.charCodeAt(Fn)?(e="@",Fn++):(e=null,r('"@"')),null===e&&(38===t.charCodeAt(Fn)?(e="&",Fn++):(e=null,r('"&"')),null===e&&(61===t.charCodeAt(Fn)?(e="=",Fn++):(e=null,r('"="')),null===e&&(43===t.charCodeAt(Fn)?(e="+",Fn++):(e=null,r('"+"')),null===e&&(36===t.charCodeAt(Fn)?(e="$",Fn++):(e=null,r('"$"')),null===e&&(44===t.charCodeAt(Fn)?(e=",",Fn++):(e=null,r('","'))))))))))),e}function g(){var e;return e=null===(e=p())?m():e}function m(){var e;return 45===t.charCodeAt(Fn)?(e="-",Fn++):(e=null,r('"-"')),null===e&&(95===t.charCodeAt(Fn)?(e="_",Fn++):(e=null,r('"_"')),null===e&&(46===t.charCodeAt(Fn)?(e=".",Fn++):(e=null,r('"."')),null===e&&(33===t.charCodeAt(Fn)?(e="!",Fn++):(e=null,r('"!"')),null===e&&(126===t.charCodeAt(Fn)?(e="~",Fn++):(e=null,r('"~"')),null===e&&(42===t.charCodeAt(Fn)?(e="*",Fn++):(e=null,r('"*"')),null===e&&(39===t.charCodeAt(Fn)?(e="'",Fn++):(e=null,r('"\'"')),null===e&&(40===t.charCodeAt(Fn)?(e="(",Fn++):(e=null,r('"("')),null===e&&(41===t.charCodeAt(Fn)?(e=")",Fn++):(e=null,r('")"')))))))))),e}function v(){var e,n,i,o=Fn,a=Fn;return 37===t.charCodeAt(Fn)?(e="%",Fn++):(e=null,r('"%"')),null!==e&&null!==(n=s())&&null!==(i=s())?e=[e,n,i]:(e=null,Fn=a),null===(e=null!==e?e.join(""):e)&&(Fn=o),e}function b(){for(var e,t=Fn,n=Fn,r=Fn,o=[],a=l();null!==a;)o.push(a),a=l();if(null!==o&&null!==(a=i())?o=[o,a]:(o=null,Fn=r),null!==(o=null!==o?o:"")){if(null!==(e=l()))for(a=[];null!==e;)a.push(e),e=l();else a=null;null!==a?o=[o,a]:(o=null,Fn=n)}else o=null,Fn=n;return null===(o=null!==o?" ":o)&&(Fn=t),o}function _(){var e;return null!==(e=b())?e:""}function y(){var e,n,i=Fn,o=Fn,a=[];for(null===(e=d())&&(e=f());null!==e;)a.push(e),null===(e=d())&&(e=f());return null!==a&&(58===t.charCodeAt(Fn)?(e=":",Fn++):(e=null,r('":"')),null!==e&&null!==(n=_()))?a=[a,e,n]:(a=null,Fn=o),null===(a=null!==a?":":a)&&(Fn=i),a}function w(){var e,n,r,i,o,a=Fn,s=Fn;if(null!==(n=x()))for(e=[];null!==n;)e.push(n),n=x();else e=null;if(null!==e){for(n=[],o=Fn,r=[],i=b();null!==i;)r.push(i),i=b();for(null!==r&&null!==(i=x())?r=[r,i]:(r=null,Fn=o);null!==r;){for(n.push(r),o=Fn,r=[],i=b();null!==i;)r.push(i),i=b();null!==r&&null!==(i=x())?r=[r,i]:(r=null,Fn=o)}null!==n?e=[e,n]:(e=null,Fn=s)}else e=null,Fn=s;return null===(e=null!==e?t.substring(Fn,a):e)&&(Fn=a),e}function x(){var e;return/^[!-~]/.test(t.charAt(Fn))?(e=t.charAt(Fn),Fn++):(e=null,r("[!-~]")),e=null===e?k():e}function k(){var e;return/^[\x80-\uFFFF]/.test(t.charAt(Fn))?(e=t.charAt(Fn),Fn++):(e=null,r("[\\x80-\\uFFFF]")),e}function S(){var e;return/^[\x80-\xBF]/.test(t.charAt(Fn))?(e=t.charAt(Fn),Fn++):(e=null,r("[\\x80-\\xBF]")),e}function C(){var e,n,i=Fn;if(null===(n=p())&&(45===t.charCodeAt(Fn)?(n="-",Fn++):(n=null,r('"-"')),null===n&&(46===t.charCodeAt(Fn)?(n=".",Fn++):(n=null,r('"."')),null===n&&(33===t.charCodeAt(Fn)?(n="!",Fn++):(n=null,r('"!"')),null===n&&(37===t.charCodeAt(Fn)?(n="%",Fn++):(n=null,r('"%"')),null===n&&(42===t.charCodeAt(Fn)?(n="*",Fn++):(n=null,r('"*"')),null===n&&(95===t.charCodeAt(Fn)?(n="_",Fn++):(n=null,r('"_"')),null===n&&(43===t.charCodeAt(Fn)?(n="+",Fn++):(n=null,r('"+"')),null===n&&(96===t.charCodeAt(Fn)?(n="`",Fn++):(n=null,r('"`"')),null===n&&(39===t.charCodeAt(Fn)?(n="'",Fn++):(n=null,r('"\'"')),null===n&&(126===t.charCodeAt(Fn)?(n="~",Fn++):(n=null,r('"~"')))))))))))),null!==n)for(e=[];null!==n;)e.push(n),null===(n=p())&&(45===t.charCodeAt(Fn)?(n="-",Fn++):(n=null,r('"-"')),null===n&&(46===t.charCodeAt(Fn)?(n=".",Fn++):(n=null,r('"."')),null===n&&(33===t.charCodeAt(Fn)?(n="!",Fn++):(n=null,r('"!"')),null===n&&(37===t.charCodeAt(Fn)?(n="%",Fn++):(n=null,r('"%"')),null===n&&(42===t.charCodeAt(Fn)?(n="*",Fn++):(n=null,r('"*"')),null===n&&(95===t.charCodeAt(Fn)?(n="_",Fn++):(n=null,r('"_"')),null===n&&(43===t.charCodeAt(Fn)?(n="+",Fn++):(n=null,r('"+"')),null===n&&(96===t.charCodeAt(Fn)?(n="`",Fn++):(n=null,r('"`"')),null===n&&(39===t.charCodeAt(Fn)?(n="'",Fn++):(n=null,r('"\'"')),null===n&&(126===t.charCodeAt(Fn)?(n="~",Fn++):(n=null,r('"~"'))))))))))));else e=null;return null===(e=null!==e?t.substring(Fn,i):e)&&(Fn=i),e}function T(){var e,n,i=Fn;if(null===(n=p())&&(45===t.charCodeAt(Fn)?(n="-",Fn++):(n=null,r('"-"')),null===n&&(33===t.charCodeAt(Fn)?(n="!",Fn++):(n=null,r('"!"')),null===n&&(37===t.charCodeAt(Fn)?(n="%",Fn++):(n=null,r('"%"')),null===n&&(42===t.charCodeAt(Fn)?(n="*",Fn++):(n=null,r('"*"')),null===n&&(95===t.charCodeAt(Fn)?(n="_",Fn++):(n=null,r('"_"')),null===n&&(43===t.charCodeAt(Fn)?(n="+",Fn++):(n=null,r('"+"')),null===n&&(96===t.charCodeAt(Fn)?(n="`",Fn++):(n=null,r('"`"')),null===n&&(39===t.charCodeAt(Fn)?(n="'",Fn++):(n=null,r('"\'"')),null===n&&(126===t.charCodeAt(Fn)?(n="~",Fn++):(n=null,r('"~"'))))))))))),null!==n)for(e=[];null!==n;)e.push(n),null===(n=p())&&(45===t.charCodeAt(Fn)?(n="-",Fn++):(n=null,r('"-"')),null===n&&(33===t.charCodeAt(Fn)?(n="!",Fn++):(n=null,r('"!"')),null===n&&(37===t.charCodeAt(Fn)?(n="%",Fn++):(n=null,r('"%"')),null===n&&(42===t.charCodeAt(Fn)?(n="*",Fn++):(n=null,r('"*"')),null===n&&(95===t.charCodeAt(Fn)?(n="_",Fn++):(n=null,r('"_"')),null===n&&(43===t.charCodeAt(Fn)?(n="+",Fn++):(n=null,r('"+"')),null===n&&(96===t.charCodeAt(Fn)?(n="`",Fn++):(n=null,r('"`"')),null===n&&(39===t.charCodeAt(Fn)?(n="'",Fn++):(n=null,r('"\'"')),null===n&&(126===t.charCodeAt(Fn)?(n="~",Fn++):(n=null,r('"~"')))))))))));else e=null;return null===(e=null!==e?t.substring(Fn,i):e)&&(Fn=i),e}function E(){var e,n,i=Fn;if(null===(n=p())&&(45===t.charCodeAt(Fn)?(n="-",Fn++):(n=null,r('"-"')),null===n&&(46===t.charCodeAt(Fn)?(n=".",Fn++):(n=null,r('"."')),null===n&&(33===t.charCodeAt(Fn)?(n="!",Fn++):(n=null,r('"!"')),null===n&&(37===t.charCodeAt(Fn)?(n="%",Fn++):(n=null,r('"%"')),null===n&&(42===t.charCodeAt(Fn)?(n="*",Fn++):(n=null,r('"*"')),null===n&&(95===t.charCodeAt(Fn)?(n="_",Fn++):(n=null,r('"_"')),null===n&&(43===t.charCodeAt(Fn)?(n="+",Fn++):(n=null,r('"+"')),null===n&&(96===t.charCodeAt(Fn)?(n="`",Fn++):(n=null,r('"`"')),null===n&&(39===t.charCodeAt(Fn)?(n="'",Fn++):(n=null,r('"\'"')),null===n&&(126===t.charCodeAt(Fn)?(n="~",Fn++):(n=null,r('"~"')),null===n&&(40===t.charCodeAt(Fn)?(n="(",Fn++):(n=null,r('"("')),null===n&&(41===t.charCodeAt(Fn)?(n=")",Fn++):(n=null,r('")"')),null===n&&(60===t.charCodeAt(Fn)?(n="<",Fn++):(n=null,r('"<"')),null===n&&(62===t.charCodeAt(Fn)?(n=">",Fn++):(n=null,r('">"')),null===n&&(58===t.charCodeAt(Fn)?(n=":",Fn++):(n=null,r('":"')),null===n&&(92===t.charCodeAt(Fn)?(n="\\",Fn++):(n=null,r('"\\\\"')),null===n&&null===(n=u())&&(47===t.charCodeAt(Fn)?(n="/",Fn++):(n=null,r('"/"')),null===n&&(91===t.charCodeAt(Fn)?(n="[",Fn++):(n=null,r('"["')),null===n&&(93===t.charCodeAt(Fn)?(n="]",Fn++):(n=null,r('"]"')),null===n&&(63===t.charCodeAt(Fn)?(n="?",Fn++):(n=null,r('"?"')),null===n&&(123===t.charCodeAt(Fn)?(n="{",Fn++):(n=null,r('"{"')),null===n&&(125===t.charCodeAt(Fn)?(n="}",Fn++):(n=null,r('"}"')))))))))))))))))))))))),null!==n)for(e=[];null!==n;)e.push(n),null===(n=p())&&(45===t.charCodeAt(Fn)?(n="-",Fn++):(n=null,r('"-"')),null===n&&(46===t.charCodeAt(Fn)?(n=".",Fn++):(n=null,r('"."')),null===n&&(33===t.charCodeAt(Fn)?(n="!",Fn++):(n=null,r('"!"')),null===n&&(37===t.charCodeAt(Fn)?(n="%",Fn++):(n=null,r('"%"')),null===n&&(42===t.charCodeAt(Fn)?(n="*",Fn++):(n=null,r('"*"')),null===n&&(95===t.charCodeAt(Fn)?(n="_",Fn++):(n=null,r('"_"')),null===n&&(43===t.charCodeAt(Fn)?(n="+",Fn++):(n=null,r('"+"')),null===n&&(96===t.charCodeAt(Fn)?(n="`",Fn++):(n=null,r('"`"')),null===n&&(39===t.charCodeAt(Fn)?(n="'",Fn++):(n=null,r('"\'"')),null===n&&(126===t.charCodeAt(Fn)?(n="~",Fn++):(n=null,r('"~"')),null===n&&(40===t.charCodeAt(Fn)?(n="(",Fn++):(n=null,r('"("')),null===n&&(41===t.charCodeAt(Fn)?(n=")",Fn++):(n=null,r('")"')),null===n&&(60===t.charCodeAt(Fn)?(n="<",Fn++):(n=null,r('"<"')),null===n&&(62===t.charCodeAt(Fn)?(n=">",Fn++):(n=null,r('">"')),null===n&&(58===t.charCodeAt(Fn)?(n=":",Fn++):(n=null,r('":"')),null===n&&(92===t.charCodeAt(Fn)?(n="\\",Fn++):(n=null,r('"\\\\"')),null===n&&null===(n=u())&&(47===t.charCodeAt(Fn)?(n="/",Fn++):(n=null,r('"/"')),null===n&&(91===t.charCodeAt(Fn)?(n="[",Fn++):(n=null,r('"["')),null===n&&(93===t.charCodeAt(Fn)?(n="]",Fn++):(n=null,r('"]"')),null===n&&(63===t.charCodeAt(Fn)?(n="?",Fn++):(n=null,r('"?"')),null===n&&(123===t.charCodeAt(Fn)?(n="{",Fn++):(n=null,r('"{"')),null===n&&(125===t.charCodeAt(Fn)?(n="}",Fn++):(n=null,r('"}"'))))))))))))))))))))))));else e=null;return null===(e=null!==e?t.substring(Fn,i):e)&&(Fn=i),e}function I(){var e,n,i,o=Fn,a=Fn;return null!==(e=_())&&(42===t.charCodeAt(Fn)?(n="*",Fn++):(n=null,r('"*"')),null!==n&&null!==(i=_()))?e=[e,n,i]:(e=null,Fn=a),null===(e=null!==e?"*":e)&&(Fn=o),e}function A(){var e,n,i,o=Fn,a=Fn;return null!==(e=_())&&(47===t.charCodeAt(Fn)?(n="/",Fn++):(n=null,r('"/"')),null!==n&&null!==(i=_()))?e=[e,n,i]:(e=null,Fn=a),null===(e=null!==e?"/":e)&&(Fn=o),e}function R(){var e,n,i,o=Fn,a=Fn;return null!==(e=_())&&(61===t.charCodeAt(Fn)?(n="=",Fn++):(n=null,r('"="')),null!==n&&null!==(i=_()))?e=[e,n,i]:(e=null,Fn=a),null===(e=null!==e?"=":e)&&(Fn=o),e}function O(){var e,n,i,o=Fn,a=Fn;return null!==(e=_())&&(40===t.charCodeAt(Fn)?(n="(",Fn++):(n=null,r('"("')),null!==n&&null!==(i=_()))?e=[e,n,i]:(e=null,Fn=a),null===(e=null!==e?"(":e)&&(Fn=o),e}function L(){var e,n,i,o=Fn,a=Fn;return null!==(e=_())&&(41===t.charCodeAt(Fn)?(n=")",Fn++):(n=null,r('")"')),null!==n&&null!==(i=_()))?e=[e,n,i]:(e=null,Fn=a),null===(e=null!==e?")":e)&&(Fn=o),e}function P(){var e,n,i=Fn,o=Fn;return 62===t.charCodeAt(Fn)?(e=">",Fn++):(e=null,r('">"')),null!==e&&null!==(n=_())?e=[e,n]:(e=null,Fn=o),null===(e=null!==e?">":e)&&(Fn=i),e}function M(){var e,n,i=Fn,o=Fn;return null!==(e=_())&&(60===t.charCodeAt(Fn)?(n="<",Fn++):(n=null,r('"<"')),null!==n)?e=[e,n]:(e=null,Fn=o),null===(e=null!==e?"<":e)&&(Fn=i),e}function $(){var e,n,i,o=Fn,a=Fn;return null!==(e=_())&&(44===t.charCodeAt(Fn)?(n=",",Fn++):(n=null,r('","')),null!==n&&null!==(i=_()))?e=[e,n,i]:(e=null,Fn=a),null===(e=null!==e?",":e)&&(Fn=o),e}function N(){var e,n,i,o=Fn,a=Fn;return null!==(e=_())&&(59===t.charCodeAt(Fn)?(n=";",Fn++):(n=null,r('";"')),null!==n&&null!==(i=_()))?e=[e,n,i]:(e=null,Fn=a),null===(e=null!==e?";":e)&&(Fn=o),e}function D(){var e,n,i,o=Fn,a=Fn;return null!==(e=_())&&(58===t.charCodeAt(Fn)?(n=":",Fn++):(n=null,r('":"')),null!==n&&null!==(i=_()))?e=[e,n,i]:(e=null,Fn=a),null===(e=null!==e?":":e)&&(Fn=o),e}function F(){var e,t,n=Fn,r=Fn;return null!==(e=_())&&null!==(t=u())?e=[e,t]:(e=null,Fn=r),null===(e=null!==e?'"':e)&&(Fn=n),e}function q(){var e,t,n=Fn,r=Fn;return null!==(e=u())&&null!==(t=_())?e=[e,t]:(e=null,Fn=r),null===(e=null!==e?'"':e)&&(Fn=n),e}function U(){var e;return/^[!-']/.test(t.charAt(Fn))?(e=t.charAt(Fn),Fn++):(e=null,r("[!-']")),null===e&&(/^[*-[]/.test(t.charAt(Fn))?(e=t.charAt(Fn),Fn++):(e=null,r("[*-[]")),null===e&&(/^[\]-~]/.test(t.charAt(Fn))?(e=t.charAt(Fn),Fn++):(e=null,r("[\\]-~]")),null===e&&null===(e=k())&&(e=b()))),e}function B(){var e,n,r,i,o=Fn,a=Fn;if(null!==(e=_()))if(null!==(n=u())){for(r=[],null===(i=H())&&(i=Y());null!==i;)r.push(i),null===(i=H())&&(i=Y());null!==r&&null!==(i=u())?e=[e,n,r,i]:(e=null,Fn=a)}else e=null,Fn=a;else e=null,Fn=a;return null===(e=null!==e?t.substring(Fn,o):e)&&(Fn=o),e}function V(){var e,n,r,i,o=Fn,a=Fn;if(null!==(e=_()))if(null!==(i=u())){for(n=[],null===(r=H())&&(r=Y());null!==r;)n.push(r),null===(r=H())&&(r=Y());null!==n&&null!==(r=u())?e=[e,i,n,r]:(e=null,Fn=a)}else e=null,Fn=a;else e=null,Fn=a;return null===(e=null!==e?(i=t.substring(Fn,o).trim()).substring(1,i.length-1).replace(/\\([\x00-\x09\x0b-\x0c\x0e-\x7f])/g,"$1"):e)&&(Fn=o),e}function H(){var e;return null===(e=b())&&(33===t.charCodeAt(Fn)?(e="!",Fn++):(e=null,r('"!"')),null===e&&(/^[#-[]/.test(t.charAt(Fn))?(e=t.charAt(Fn),Fn++):(e=null,r("[#-[]")),null===e&&(/^[\]-~]/.test(t.charAt(Fn))?(e=t.charAt(Fn),Fn++):(e=null,r("[\\]-~]")),null===e&&(e=k())))),e}function Y(){var e,n,i=Fn;return 92===t.charCodeAt(Fn)?(e="\\",Fn++):(e=null,r('"\\\\"')),null!==e&&(/^[\0-\t]/.test(t.charAt(Fn))?(n=t.charAt(Fn),Fn++):(n=null,r("[\\0-\\t]")),null===n&&(/^[\x0B-\f]/.test(t.charAt(Fn))?(n=t.charAt(Fn),Fn++):(n=null,r("[\\x0B-\\f]")),null===n&&(/^[\x0E-]/.test(t.charAt(Fn))?(n=t.charAt(Fn),Fn++):(n=null,r("[\\x0E-]")))),null!==n)?e=[e,n]:(e=null,Fn=i),e}function G(){var e,n,i,o,a=Fn,s=Fn;return null!==(e=K())&&(58===t.charCodeAt(Fn)?(n=":",Fn++):(n=null,r('":"')),null!==n&&null!==(i=null!==(i=J())?i:"")&&null!==(o=ne()))?e=[e,n,i,o]:(e=null,Fn=s),null===(e=null!==e?function(){try{Vn.uri=new Bn(Vn.scheme,Vn.user,Vn.host,Vn.port),delete Vn.scheme,delete Vn.user,delete Vn.host,delete Vn.host_type,delete Vn.port}catch(e){Vn=-1}}():e)&&(Fn=a),e}function W(){var e,i,o,a,s,l,c=Fn,u=Fn;return null!==(e=K())&&(58===t.charCodeAt(Fn)?(i=":",Fn++):(i=null,r('":"')),null!==i&&null!==(o=null!==(o=J())?o:"")&&null!==(a=ne())&&null!==(s=he())&&null!==(l=null!==(l=Ee())?l:""))?e=[e,i,o,a,s,l]:(e=null,Fn=u),null===(e=null!==e?function(){try{Vn.uri=new Bn(Vn.scheme,Vn.user,Vn.host,Vn.port,Vn.uri_params,Vn.uri_headers),delete Vn.scheme,delete Vn.user,delete Vn.host,delete Vn.host_type,delete Vn.port,delete Vn.uri_params,"SIP_URI"===n&&(Vn=Vn.uri)}catch(e){Vn=-1}}():e)&&(Fn=c),e}function K(){var e;return e=null===(e=X())?Z():e}function X(){var e,n,i=Fn;return"sips"===t.substr(Fn,4).toLowerCase()?(e=t.substr(Fn,4),Fn+=4):(e=null,r('"sips"')),null!==e&&(n=e,e=void(Vn.scheme=n.toLowerCase())),null===e&&(Fn=i),e}function Z(){var e,n,i=Fn;return"sip"===t.substr(Fn,3).toLowerCase()?(e=t.substr(Fn,3),Fn+=3):(e=null,r('"sip"')),null!==e&&(n=e,e=void(Vn.scheme=n.toLowerCase())),null===e&&(Fn=i),e}function J(){var e,n,i,o,a=Fn,s=Fn;return null!==(e=Q())&&(o=Fn,58===t.charCodeAt(Fn)?(n=":",Fn++):(n=null,r('":"')),null!==n&&null!==(i=te())?n=[n,i]:(n=null,Fn=o),null!==(n=null!==n?n:"")&&(64===t.charCodeAt(Fn)?(i="@",Fn++):(i=null,r('"@"')),null!==i))?e=[e,n,i]:(e=null,Fn=s),null===(e=null!==e?void(Vn.user=decodeURIComponent(t.substring(Fn-1,a))):e)&&(Fn=a),e}function Q(){var e,t;if(null!==(t=null===(t=g())&&null===(t=v())?ee():t))for(e=[];null!==t;)e.push(t),null===(t=g())&&null===(t=v())&&(t=ee());else e=null;return e}function ee(){var e;return 38===t.charCodeAt(Fn)?(e="&",Fn++):(e=null,r('"&"')),null===e&&(61===t.charCodeAt(Fn)?(e="=",Fn++):(e=null,r('"="')),null===e&&(43===t.charCodeAt(Fn)?(e="+",Fn++):(e=null,r('"+"')),null===e&&(36===t.charCodeAt(Fn)?(e="$",Fn++):(e=null,r('"$"')),null===e&&(44===t.charCodeAt(Fn)?(e=",",Fn++):(e=null,r('","')),null===e&&(59===t.charCodeAt(Fn)?(e=";",Fn++):(e=null,r('";"')),null===e&&(63===t.charCodeAt(Fn)?(e="?",Fn++):(e=null,r('"?"')),null===e&&(47===t.charCodeAt(Fn)?(e="/",Fn++):(e=null,r('"/"'))))))))),e}function te(){var e,n=Fn,i=[];for(null===(e=g())&&null===(e=v())&&(38===t.charCodeAt(Fn)?(e="&",Fn++):(e=null,r('"&"')),null===e&&(61===t.charCodeAt(Fn)?(e="=",Fn++):(e=null,r('"="')),null===e&&(43===t.charCodeAt(Fn)?(e="+",Fn++):(e=null,r('"+"')),null===e&&(36===t.charCodeAt(Fn)?(e="$",Fn++):(e=null,r('"$"')),null===e&&(44===t.charCodeAt(Fn)?(e=",",Fn++):(e=null,r('","')))))));null!==e;)i.push(e),null===(e=g())&&null===(e=v())&&(38===t.charCodeAt(Fn)?(e="&",Fn++):(e=null,r('"&"')),null===e&&(61===t.charCodeAt(Fn)?(e="=",Fn++):(e=null,r('"="')),null===e&&(43===t.charCodeAt(Fn)?(e="+",Fn++):(e=null,r('"+"')),null===e&&(36===t.charCodeAt(Fn)?(e="$",Fn++):(e=null,r('"$"')),null===e&&(44===t.charCodeAt(Fn)?(e=",",Fn++):(e=null,r('","')))))));return null===(i=null!==i?void(Vn.password=t.substring(Fn,n)):i)&&(Fn=n),i}function ne(){var e,n,i,o,a=Fn;return null!==(e=re())&&(o=Fn,58===t.charCodeAt(Fn)?(n=":",Fn++):(n=null,r('":"')),null!==n&&null!==(i=pe())?n=[n,i]:(n=null,Fn=o),null!==(n=null!==n?n:""))?e=[e,n]:(e=null,Fn=a),e}function re(){var e,n=Fn;return null!==(e=null===(e=ie())&&null===(e=de())?se():e)&&(Vn.host=t.substring(Fn,n).toLowerCase(),e=Vn.host),null===e&&(Fn=n),e}function ie(){var e,n,i=Fn,o=Fn,a=[],s=Fn;for(null!==(e=oe())&&(46===t.charCodeAt(Fn)?(n=".",Fn++):(n=null,r('"."')),null!==n)?e=[e,n]:(e=null,Fn=s);null!==e;)a.push(e),s=Fn,null!==(e=oe())&&(46===t.charCodeAt(Fn)?(n=".",Fn++):(n=null,r('"."')),null!==n)?e=[e,n]:(e=null,Fn=s);return null!==a&&null!==(e=ae())&&(46===t.charCodeAt(Fn)?(n=".",Fn++):(n=null,r('"."')),null!==(n=null!==n?n:""))?a=[a,e,n]:(a=null,Fn=o),null!==a&&(o=i,Vn.host_type="domain",a=t.substring(Fn,o)),null===a&&(Fn=i),a}function oe(){var e,n,i,o=Fn;if(null!==(e=p())){for(n=[],null===(i=p())&&(45===t.charCodeAt(Fn)?(i="-",Fn++):(i=null,r('"-"')),null===i&&(95===t.charCodeAt(Fn)?(i="_",Fn++):(i=null,r('"_"'))));null!==i;)n.push(i),null===(i=p())&&(45===t.charCodeAt(Fn)?(i="-",Fn++):(i=null,r('"-"')),null===i&&(95===t.charCodeAt(Fn)?(i="_",Fn++):(i=null,r('"_"'))));null!==n?e=[e,n]:(e=null,Fn=o)}else e=null,Fn=o;return e}function ae(){var e,n,i,o=Fn;if(null!==(e=a())){for(n=[],null===(i=p())&&(45===t.charCodeAt(Fn)?(i="-",Fn++):(i=null,r('"-"')),null===i&&(95===t.charCodeAt(Fn)?(i="_",Fn++):(i=null,r('"_"'))));null!==i;)n.push(i),null===(i=p())&&(45===t.charCodeAt(Fn)?(i="-",Fn++):(i=null,r('"-"')),null===i&&(95===t.charCodeAt(Fn)?(i="_",Fn++):(i=null,r('"_"'))));null!==n?e=[e,n]:(e=null,Fn=o)}else e=null,Fn=o;return e}function se(){var e,n,i,o=Fn,a=Fn;return 91===t.charCodeAt(Fn)?(e="[",Fn++):(e=null,r('"["')),null!==e&&null!==(i=le())&&(93===t.charCodeAt(Fn)?(n="]",Fn++):(n=null,r('"]"')),null!==n)?e=[e,i,n]:(e=null,Fn=a),null!==e&&(i=o,Vn.host_type="IPv6",e=t.substring(Fn,i)),null===e&&(Fn=o),e}function le(){var e,n,i,o,a,s,l,c,u,d,f,p,h,g,m=Fn,v=Fn;return null!==(e=ce())&&(58===t.charCodeAt(Fn)?(n=":",Fn++):(n=null,r('":"')),null!==n&&null!==(i=ce())&&(58===t.charCodeAt(Fn)?(o=":",Fn++):(o=null,r('":"')),null!==o&&null!==(a=ce())&&(58===t.charCodeAt(Fn)?(s=":",Fn++):(s=null,r('":"')),null!==s&&null!==(l=ce())&&(58===t.charCodeAt(Fn)?(c=":",Fn++):(c=null,r('":"')),null!==c&&null!==(u=ce())&&(58===t.charCodeAt(Fn)?(d=":",Fn++):(d=null,r('":"')),null!==d&&null!==(f=ce())&&(58===t.charCodeAt(Fn)?(p=":",Fn++):(p=null,r('":"')),null!==p&&null!==(g=ue())))))))?e=[e,n,i,o,a,s,l,c,u,d,f,p,g]:(e=null,Fn=v),null===e&&(v=Fn,"::"===t.substr(Fn,2)?(e="::",Fn+=2):(e=null,r('"::"')),null!==e&&null!==(n=ce())&&(58===t.charCodeAt(Fn)?(i=":",Fn++):(i=null,r('":"')),null!==i&&null!==(o=ce())&&(58===t.charCodeAt(Fn)?(a=":",Fn++):(a=null,r('":"')),null!==a&&null!==(s=ce())&&(58===t.charCodeAt(Fn)?(l=":",Fn++):(l=null,r('":"')),null!==l&&null!==(c=ce())&&(58===t.charCodeAt(Fn)?(u=":",Fn++):(u=null,r('":"')),null!==u&&null!==(d=ce())&&(58===t.charCodeAt(Fn)?(f=":",Fn++):(f=null,r('":"')),null!==f&&null!==(p=ue()))))))?e=[e,n,i,o,a,s,l,c,u,d,f,p]:(e=null,Fn=v),null===e&&(v=Fn,"::"===t.substr(Fn,2)?(e="::",Fn+=2):(e=null,r('"::"')),null!==e&&null!==(n=ce())&&(58===t.charCodeAt(Fn)?(i=":",Fn++):(i=null,r('":"')),null!==i&&null!==(o=ce())&&(58===t.charCodeAt(Fn)?(a=":",Fn++):(a=null,r('":"')),null!==a&&null!==(s=ce())&&(58===t.charCodeAt(Fn)?(l=":",Fn++):(l=null,r('":"')),null!==l&&null!==(c=ce())&&(58===t.charCodeAt(Fn)?(u=":",Fn++):(u=null,r('":"')),null!==u&&null!==(d=ue())))))?e=[e,n,i,o,a,s,l,c,u,d]:(e=null,Fn=v),null===e&&(v=Fn,"::"===t.substr(Fn,2)?(e="::",Fn+=2):(e=null,r('"::"')),null!==e&&null!==(n=ce())&&(58===t.charCodeAt(Fn)?(i=":",Fn++):(i=null,r('":"')),null!==i&&null!==(o=ce())&&(58===t.charCodeAt(Fn)?(a=":",Fn++):(a=null,r('":"')),null!==a&&null!==(s=ce())&&(58===t.charCodeAt(Fn)?(l=":",Fn++):(l=null,r('":"')),null!==l&&null!==(c=ue()))))?e=[e,n,i,o,a,s,l,c]:(e=null,Fn=v),null===e&&(v=Fn,"::"===t.substr(Fn,2)?(e="::",Fn+=2):(e=null,r('"::"')),null!==e&&null!==(n=ce())&&(58===t.charCodeAt(Fn)?(i=":",Fn++):(i=null,r('":"')),null!==i&&null!==(o=ce())&&(58===t.charCodeAt(Fn)?(a=":",Fn++):(a=null,r('":"')),null!==a&&null!==(s=ue())))?e=[e,n,i,o,a,s]:(e=null,Fn=v),null===e&&(v=Fn,"::"===t.substr(Fn,2)?(e="::",Fn+=2):(e=null,r('"::"')),null!==e&&null!==(n=ce())&&(58===t.charCodeAt(Fn)?(i=":",Fn++):(i=null,r('":"')),null!==i&&null!==(o=ue()))?e=[e,n,i,o]:(e=null,Fn=v),null===e&&(v=Fn,"::"===t.substr(Fn,2)?(e="::",Fn+=2):(e=null,r('"::"')),null!==e&&null!==(n=ue())?e=[e,n]:(e=null,Fn=v),null===e&&(v=Fn,"::"===t.substr(Fn,2)?(e="::",Fn+=2):(e=null,r('"::"')),null!==e&&null!==(n=ce())?e=[e,n]:(e=null,Fn=v),null===e&&(v=Fn,null!==(e=ce())&&("::"===t.substr(Fn,2)?(n="::",Fn+=2):(n=null,r('"::"')),null!==n&&null!==(i=ce())&&(58===t.charCodeAt(Fn)?(o=":",Fn++):(o=null,r('":"')),null!==o&&null!==(a=ce())&&(58===t.charCodeAt(Fn)?(s=":",Fn++):(s=null,r('":"')),null!==s&&null!==(l=ce())&&(58===t.charCodeAt(Fn)?(c=":",Fn++):(c=null,r('":"')),null!==c&&null!==(u=ce())&&(58===t.charCodeAt(Fn)?(d=":",Fn++):(d=null,r('":"')),null!==d&&null!==(f=ue()))))))?e=[e,n,i,o,a,s,l,c,u,d,f]:(e=null,Fn=v),null===e&&(v=Fn,null!==(e=ce())&&(h=Fn,58===t.charCodeAt(Fn)?(n=":",Fn++):(n=null,r('":"')),null!==n&&null!==(i=ce())?n=[n,i]:(n=null,Fn=h),null!==(n=null!==n?n:"")&&("::"===t.substr(Fn,2)?(i="::",Fn+=2):(i=null,r('"::"')),null!==i&&null!==(o=ce())&&(58===t.charCodeAt(Fn)?(a=":",Fn++):(a=null,r('":"')),null!==a&&null!==(s=ce())&&(58===t.charCodeAt(Fn)?(l=":",Fn++):(l=null,r('":"')),null!==l&&null!==(c=ce())&&(58===t.charCodeAt(Fn)?(u=":",Fn++):(u=null,r('":"')),null!==u&&null!==(d=ue()))))))?e=[e,n,i,o,a,s,l,c,u,d]:(e=null,Fn=v),null===e&&(v=Fn,null!==(e=ce())&&(h=Fn,58===t.charCodeAt(Fn)?(n=":",Fn++):(n=null,r('":"')),null!==n&&null!==(i=ce())?n=[n,i]:(n=null,Fn=h),null!==(n=null!==n?n:"")&&(h=Fn,58===t.charCodeAt(Fn)?(i=":",Fn++):(i=null,r('":"')),null!==i&&null!==(o=ce())?i=[i,o]:(i=null,Fn=h),null!==(i=null!==i?i:"")&&("::"===t.substr(Fn,2)?(o="::",Fn+=2):(o=null,r('"::"')),null!==o&&null!==(a=ce())&&(58===t.charCodeAt(Fn)?(s=":",Fn++):(s=null,r('":"')),null!==s&&null!==(l=ce())&&(58===t.charCodeAt(Fn)?(c=":",Fn++):(c=null,r('":"')),null!==c&&null!==(u=ue()))))))?e=[e,n,i,o,a,s,l,c,u]:(e=null,Fn=v),null===e&&(v=Fn,null!==(e=ce())&&(h=Fn,58===t.charCodeAt(Fn)?(n=":",Fn++):(n=null,r('":"')),null!==n&&null!==(i=ce())?n=[n,i]:(n=null,Fn=h),null!==(n=null!==n?n:"")&&(h=Fn,58===t.charCodeAt(Fn)?(i=":",Fn++):(i=null,r('":"')),null!==i&&null!==(o=ce())?i=[i,o]:(i=null,Fn=h),null!==(i=null!==i?i:"")&&(h=Fn,58===t.charCodeAt(Fn)?(o=":",Fn++):(o=null,r('":"')),null!==o&&null!==(a=ce())?o=[o,a]:(o=null,Fn=h),null!==(o=null!==o?o:"")&&("::"===t.substr(Fn,2)?(a="::",Fn+=2):(a=null,r('"::"')),null!==a&&null!==(s=ce())&&(58===t.charCodeAt(Fn)?(l=":",Fn++):(l=null,r('":"')),null!==l&&null!==(c=ue()))))))?e=[e,n,i,o,a,s,l,c]:(e=null,Fn=v),null===e&&(v=Fn,null!==(e=ce())&&(h=Fn,58===t.charCodeAt(Fn)?(n=":",Fn++):(n=null,r('":"')),null!==n&&null!==(i=ce())?n=[n,i]:(n=null,Fn=h),null!==(n=null!==n?n:"")&&(h=Fn,58===t.charCodeAt(Fn)?(i=":",Fn++):(i=null,r('":"')),null!==i&&null!==(o=ce())?i=[i,o]:(i=null,Fn=h),null!==(i=null!==i?i:"")&&(h=Fn,58===t.charCodeAt(Fn)?(o=":",Fn++):(o=null,r('":"')),null!==o&&null!==(a=ce())?o=[o,a]:(o=null,Fn=h),null!==(o=null!==o?o:"")&&(h=Fn,58===t.charCodeAt(Fn)?(a=":",Fn++):(a=null,r('":"')),null!==a&&null!==(s=ce())?a=[a,s]:(a=null,Fn=h),null!==(a=null!==a?a:"")&&("::"===t.substr(Fn,2)?(s="::",Fn+=2):(s=null,r('"::"')),null!==s&&null!==(l=ue()))))))?e=[e,n,i,o,a,s,l]:(e=null,Fn=v),null===e&&(v=Fn,null!==(e=ce())&&(h=Fn,58===t.charCodeAt(Fn)?(n=":",Fn++):(n=null,r('":"')),null!==n&&null!==(i=ce())?n=[n,i]:(n=null,Fn=h),null!==(n=null!==n?n:"")&&(h=Fn,58===t.charCodeAt(Fn)?(i=":",Fn++):(i=null,r('":"')),null!==i&&null!==(o=ce())?i=[i,o]:(i=null,Fn=h),null!==(i=null!==i?i:"")&&(h=Fn,58===t.charCodeAt(Fn)?(o=":",Fn++):(o=null,r('":"')),null!==o&&null!==(a=ce())?o=[o,a]:(o=null,Fn=h),null!==(o=null!==o?o:"")&&(h=Fn,58===t.charCodeAt(Fn)?(a=":",Fn++):(a=null,r('":"')),null!==a&&null!==(s=ce())?a=[a,s]:(a=null,Fn=h),null!==(a=null!==a?a:"")&&(h=Fn,58===t.charCodeAt(Fn)?(s=":",Fn++):(s=null,r('":"')),null!==s&&null!==(l=ce())?s=[s,l]:(s=null,Fn=h),null!==(s=null!==s?s:"")&&("::"===t.substr(Fn,2)?(l="::",Fn+=2):(l=null,r('"::"')),null!==l&&null!==(c=ce())))))))?e=[e,n,i,o,a,s,l,c]:(e=null,Fn=v),null===e&&(v=Fn,null!==(e=ce())&&(h=Fn,58===t.charCodeAt(Fn)?(n=":",Fn++):(n=null,r('":"')),null!==n&&null!==(i=ce())?n=[n,i]:(n=null,Fn=h),null!==(n=null!==n?n:"")&&(h=Fn,58===t.charCodeAt(Fn)?(i=":",Fn++):(i=null,r('":"')),null!==i&&null!==(o=ce())?i=[i,o]:(i=null,Fn=h),null!==(i=null!==i?i:"")&&(h=Fn,58===t.charCodeAt(Fn)?(o=":",Fn++):(o=null,r('":"')),null!==o&&null!==(a=ce())?o=[o,a]:(o=null,Fn=h),null!==(o=null!==o?o:"")&&(h=Fn,58===t.charCodeAt(Fn)?(a=":",Fn++):(a=null,r('":"')),null!==a&&null!==(s=ce())?a=[a,s]:(a=null,Fn=h),null!==(a=null!==a?a:"")&&(h=Fn,58===t.charCodeAt(Fn)?(s=":",Fn++):(s=null,r('":"')),null!==s&&null!==(l=ce())?s=[s,l]:(s=null,Fn=h),null!==(s=null!==s?s:"")&&(h=Fn,58===t.charCodeAt(Fn)?(l=":",Fn++):(l=null,r('":"')),null!==l&&null!==(c=ce())?l=[l,c]:(l=null,Fn=h),null!==(l=null!==l?l:"")&&("::"===t.substr(Fn,2)?(c="::",Fn+=2):(c=null,r('"::"')),null!==c)))))))?e=[e,n,i,o,a,s,l,c]:(e=null,Fn=v))))))))))))))),null!==e&&(g=m,Vn.host_type="IPv6",e=t.substring(Fn,g)),null===e&&(Fn=m),e}function ce(){var e,t,n,r,i=Fn;return null!==(e=s())&&null!==(t=null!==(t=s())?t:"")&&null!==(n=null!==(n=s())?n:"")&&null!==(r=null!==(r=s())?r:"")?e=[e,t,n,r]:(e=null,Fn=i),e}function ue(){var e,n,i,o=Fn;return null!==(e=ce())&&(58===t.charCodeAt(Fn)?(n=":",Fn++):(n=null,r('":"')),null!==n&&null!==(i=ce()))?e=[e,n,i]:(e=null,Fn=o),e=null===e?de():e}function de(){var e,n,i,o,a,s,l,c=Fn,u=Fn;return null!==(e=fe())&&(46===t.charCodeAt(Fn)?(l=".",Fn++):(l=null,r('"."')),null!==l&&null!==(n=fe())&&(46===t.charCodeAt(Fn)?(i=".",Fn++):(i=null,r('"."')),null!==i&&null!==(o=fe())&&(46===t.charCodeAt(Fn)?(a=".",Fn++):(a=null,r('"."')),null!==a&&null!==(s=fe()))))?e=[e,l,n,i,o,a,s]:(e=null,Fn=u),null!==e&&(l=c,Vn.host_type="IPv4",e=t.substring(Fn,l)),null===e&&(Fn=c),e}function fe(){var e,n,i,a=Fn;return"25"===t.substr(Fn,2)?(e="25",Fn+=2):(e=null,r('"25"')),null!==e&&(/^[0-5]/.test(t.charAt(Fn))?(n=t.charAt(Fn),Fn++):(n=null,r("[0-5]")),null!==n)?e=[e,n]:(e=null,Fn=a),null===e&&(a=Fn,50===t.charCodeAt(Fn)?(e="2",Fn++):(e=null,r('"2"')),null!==e&&(/^[0-4]/.test(t.charAt(Fn))?(n=t.charAt(Fn),Fn++):(n=null,r("[0-4]")),null!==n&&null!==(i=o()))?e=[e,n,i]:(e=null,Fn=a),null===e&&(a=Fn,49===t.charCodeAt(Fn)?(e="1",Fn++):(e=null,r('"1"')),null!==e&&null!==(n=o())&&null!==(i=o())?e=[e,n,i]:(e=null,Fn=a),null===e&&(a=Fn,/^[1-9]/.test(t.charAt(Fn))?(e=t.charAt(Fn),Fn++):(e=null,r("[1-9]")),null!==e&&null!==(n=o())?e=[e,n]:(e=null,Fn=a),null===e&&(e=o())))),e}function pe(){var e,t,n,r,i,a=Fn,s=Fn;return null!==(e=null!==(e=o())?e:"")&&null!==(i=null!==(i=o())?i:"")&&null!==(t=null!==(t=o())?t:"")&&null!==(n=null!==(n=o())?n:"")&&null!==(r=null!==(r=o())?r:"")?e=[e,i,t,n,r]:(e=null,Fn=s),null!==e&&(i=e,i=parseInt(i.join("")),e=Vn.port=i),null===e&&(Fn=a),e}function he(){var e,n,i=[],o=Fn;for(59===t.charCodeAt(Fn)?(e=";",Fn++):(e=null,r('";"')),null!==e&&null!==(n=ge())?e=[e,n]:(e=null,Fn=o);null!==e;)i.push(e),o=Fn,59===t.charCodeAt(Fn)?(e=";",Fn++):(e=null,r('";"')),null!==e&&null!==(n=ge())?e=[e,n]:(e=null,Fn=o);return i}function ge(){var e;return e=null===(e=me())&&null===(e=ve())&&null===(e=be())&&null===(e=_e())&&null===(e=ye())&&null===(e=we())?xe():e}function me(){var e,n,i=Fn,o=Fn;return"transport="===t.substr(Fn,10).toLowerCase()?(e=t.substr(Fn,10),Fn+=10):(e=null,r('"transport="')),null!==e&&("udp"===t.substr(Fn,3).toLowerCase()?(n=t.substr(Fn,3),Fn+=3):(n=null,r('"udp"')),null===n&&("tcp"===t.substr(Fn,3).toLowerCase()?(n=t.substr(Fn,3),Fn+=3):(n=null,r('"tcp"')),null===n&&("sctp"===t.substr(Fn,4).toLowerCase()?(n=t.substr(Fn,4),Fn+=4):(n=null,r('"sctp"')),null===n&&("tls"===t.substr(Fn,3).toLowerCase()?(n=t.substr(Fn,3),Fn+=3):(n=null,r('"tls"')),null===n&&(n=C())))),null!==n)?e=[e,n]:(e=null,Fn=o),null!==e&&(n=e[1],Vn.uri_params||(Vn.uri_params={}),e=void(Vn.uri_params.transport=n.toLowerCase())),null===e&&(Fn=i),e}function ve(){var e,n,i=Fn,o=Fn;return"user="===t.substr(Fn,5).toLowerCase()?(e=t.substr(Fn,5),Fn+=5):(e=null,r('"user="')),null!==e&&("phone"===t.substr(Fn,5).toLowerCase()?(n=t.substr(Fn,5),Fn+=5):(n=null,r('"phone"')),null===n&&("ip"===t.substr(Fn,2).toLowerCase()?(n=t.substr(Fn,2),Fn+=2):(n=null,r('"ip"')),null===n&&(n=C())),null!==n)?e=[e,n]:(e=null,Fn=o),null!==e&&(n=e[1],Vn.uri_params||(Vn.uri_params={}),e=void(Vn.uri_params.user=n.toLowerCase())),null===e&&(Fn=i),e}function be(){var e,n,i=Fn,o=Fn;return"method="===t.substr(Fn,7).toLowerCase()?(e=t.substr(Fn,7),Fn+=7):(e=null,r('"method="')),null!==e&&null!==(n=at())?e=[e,n]:(e=null,Fn=o),null!==e&&(n=e[1],Vn.uri_params||(Vn.uri_params={}),e=void(Vn.uri_params.method=n)),null===e&&(Fn=i),e}function _e(){var e,n,i=Fn,o=Fn;return"ttl="===t.substr(Fn,4).toLowerCase()?(e=t.substr(Fn,4),Fn+=4):(e=null,r('"ttl="')),null!==e&&null!==(n=wn())?e=[e,n]:(e=null,Fn=o),null!==e&&(n=e[1],Vn.params||(Vn.params={}),e=void(Vn.params.ttl=n)),null===e&&(Fn=i),e}function ye(){var e,n,i=Fn,o=Fn;return"maddr="===t.substr(Fn,6).toLowerCase()?(e=t.substr(Fn,6),Fn+=6):(e=null,r('"maddr="')),null!==e&&null!==(n=re())?e=[e,n]:(e=null,Fn=o),null!==e&&(n=e[1],Vn.uri_params||(Vn.uri_params={}),e=void(Vn.uri_params.maddr=n)),null===e&&(Fn=i),e}function we(){var e,n,i,o,a=Fn,s=Fn;return"lr"===t.substr(Fn,2).toLowerCase()?(e=t.substr(Fn,2),Fn+=2):(e=null,r('"lr"')),null!==e&&(o=Fn,61===t.charCodeAt(Fn)?(n="=",Fn++):(n=null,r('"="')),null!==n&&null!==(i=C())?n=[n,i]:(n=null,Fn=o),null!==(n=null!==n?n:""))?e=[e,n]:(e=null,Fn=s),null!==e&&(Vn.uri_params||(Vn.uri_params={}),e=void(Vn.uri_params.lr=void 0)),null===e&&(Fn=a),e}function xe(){var e,n,i,o,a=Fn,s=Fn;return null!==(e=ke())&&(o=Fn,61===t.charCodeAt(Fn)?(n="=",Fn++):(n=null,r('"="')),null!==n&&null!==(i=Se())?n=[n,i]:(n=null,Fn=o),null!==(n=null!==n?n:""))?e=[e,n]:(e=null,Fn=s),null!==e&&(i=e[0],o=e[1],Vn.uri_params||(Vn.uri_params={}),o=void 0===o?void 0:o[1],e=void(Vn.uri_params[i.toLowerCase()]=o)),null===e&&(Fn=a),e}function ke(){var e,t,n=Fn;if(null!==(t=Ce()))for(e=[];null!==t;)e.push(t),t=Ce();else e=null;return null===(e=null!==e?e.join(""):e)&&(Fn=n),e}function Se(){var e,t,n=Fn;if(null!==(t=Ce()))for(e=[];null!==t;)e.push(t),t=Ce();else e=null;return null===(e=null!==e?e.join(""):e)&&(Fn=n),e}function Ce(){var e;return e=null===(e=Te())&&null===(e=g())?v():e}function Te(){var e;return 91===t.charCodeAt(Fn)?(e="[",Fn++):(e=null,r('"["')),null===e&&(93===t.charCodeAt(Fn)?(e="]",Fn++):(e=null,r('"]"')),null===e&&(47===t.charCodeAt(Fn)?(e="/",Fn++):(e=null,r('"/"')),null===e&&(58===t.charCodeAt(Fn)?(e=":",Fn++):(e=null,r('":"')),null===e&&(38===t.charCodeAt(Fn)?(e="&",Fn++):(e=null,r('"&"')),null===e&&(43===t.charCodeAt(Fn)?(e="+",Fn++):(e=null,r('"+"')),null===e&&(36===t.charCodeAt(Fn)?(e="$",Fn++):(e=null,r('"$"')))))))),e}function Ee(){var e,n,i,o,a,s,l=Fn;if(63===t.charCodeAt(Fn)?(e="?",Fn++):(e=null,r('"?"')),null!==e)if(null!==(n=Ie())){for(i=[],s=Fn,38===t.charCodeAt(Fn)?(o="&",Fn++):(o=null,r('"&"')),null!==o&&null!==(a=Ie())?o=[o,a]:(o=null,Fn=s);null!==o;)i.push(o),s=Fn,38===t.charCodeAt(Fn)?(o="&",Fn++):(o=null,r('"&"')),null!==o&&null!==(a=Ie())?o=[o,a]:(o=null,Fn=s);null!==i?e=[e,n,i]:(e=null,Fn=l)}else e=null,Fn=l;else e=null,Fn=l;return e}function Ie(){var e,n,i,o=Fn,a=Fn;return null!==(e=Ae())&&(61===t.charCodeAt(Fn)?(n="=",Fn++):(n=null,r('"="')),null!==n&&null!==(i=Re()))?e=[e,n,i]:(e=null,Fn=a),null!==e&&(n=e[0],i=e[2],n=n.join("").toLowerCase(),i=i.join(""),Vn.uri_headers||(Vn.uri_headers={}),e=void(Vn.uri_headers[n]?Vn.uri_headers[n].push(i):Vn.uri_headers[n]=[i])),null===e&&(Fn=o),e}function Ae(){var e,t;if(null!==(t=null===(t=Oe())&&null===(t=g())?v():t))for(e=[];null!==t;)e.push(t),null===(t=Oe())&&null===(t=g())&&(t=v());else e=null;return e}function Re(){var e,t=[];for(null===(e=Oe())&&null===(e=g())&&(e=v());null!==e;)t.push(e),null===(e=Oe())&&null===(e=g())&&(e=v());return t}function Oe(){var e;return 91===t.charCodeAt(Fn)?(e="[",Fn++):(e=null,r('"["')),null===e&&(93===t.charCodeAt(Fn)?(e="]",Fn++):(e=null,r('"]"')),null===e&&(47===t.charCodeAt(Fn)?(e="/",Fn++):(e=null,r('"/"')),null===e&&(63===t.charCodeAt(Fn)?(e="?",Fn++):(e=null,r('"?"')),null===e&&(58===t.charCodeAt(Fn)?(e=":",Fn++):(e=null,r('":"')),null===e&&(43===t.charCodeAt(Fn)?(e="+",Fn++):(e=null,r('"+"')),null===e&&(36===t.charCodeAt(Fn)?(e="$",Fn++):(e=null,r('"$"')))))))),e}function Le(){var e,t,n,r,i,o=Fn;return null!==(e=at())&&null!==(t=d())&&null!==(n=Pe())&&null!==(r=d())&&null!==(i=Xe())?e=[e,t,n,r,i]:(e=null,Fn=o),e}function Pe(){var e;return e=null===(e=W())?Me():e}function Me(){var e,n,i,o=Fn;return null!==(e=Ye())&&(58===t.charCodeAt(Fn)?(n=":",Fn++):(n=null,r('":"')),null!==n&&null!==(i=null===(i=$e())?Fe():i))?e=[e,n,i]:(e=null,Fn=o),e}function $e(){var e,n,i,o,a=Fn;return null!==(e=null===(e=Ne())?De():e)&&(o=Fn,63===t.charCodeAt(Fn)?(n="?",Fn++):(n=null,r('"?"')),null!==n&&null!==(i=Ke())?n=[n,i]:(n=null,Fn=o),null!==(n=null!==n?n:""))?e=[e,n]:(e=null,Fn=a),e}function Ne(){var e,n,i,o=Fn;return"//"===t.substr(Fn,2)?(e="//",Fn+=2):(e=null,r('"//"')),null!==e&&null!==(n=ze())&&null!==(i=null!==(i=De())?i:"")?e=[e,n,i]:(e=null,Fn=o),e}function De(){var e,n,i=Fn;return 47===t.charCodeAt(Fn)?(e="/",Fn++):(e=null,r('"/"')),null!==e&&null!==(n=Be())?e=[e,n]:(e=null,Fn=i),e}function Fe(){var e,t,n,r=Fn;if(null!==(e=Ue())){for(t=[],n=qe();null!==n;)t.push(n),n=qe();null!==t?e=[e,t]:(e=null,Fn=r)}else e=null,Fn=r;return e}function qe(){var e;return e=null===(e=h())&&null===(e=g())?v():e}function Ue(){var e;return null===(e=g())&&null===(e=v())&&(59===t.charCodeAt(Fn)?(e=";",Fn++):(e=null,r('";"')),null===e&&(63===t.charCodeAt(Fn)?(e="?",Fn++):(e=null,r('"?"')),null===e&&(58===t.charCodeAt(Fn)?(e=":",Fn++):(e=null,r('":"')),null===e&&(64===t.charCodeAt(Fn)?(e="@",Fn++):(e=null,r('"@"')),null===e&&(38===t.charCodeAt(Fn)?(e="&",Fn++):(e=null,r('"&"')),null===e&&(61===t.charCodeAt(Fn)?(e="=",Fn++):(e=null,r('"="')),null===e&&(43===t.charCodeAt(Fn)?(e="+",Fn++):(e=null,r('"+"')),null===e&&(36===t.charCodeAt(Fn)?(e="$",Fn++):(e=null,r('"$"')),null===e&&(44===t.charCodeAt(Fn)?(e=",",Fn++):(e=null,r('","'))))))))))),e}function Be(){var e,n,i,o,a,s=Fn;if(null!==(e=je())){for(n=[],a=Fn,47===t.charCodeAt(Fn)?(i="/",Fn++):(i=null,r('"/"')),null!==i&&null!==(o=je())?i=[i,o]:(i=null,Fn=a);null!==i;)n.push(i),a=Fn,47===t.charCodeAt(Fn)?(i="/",Fn++):(i=null,r('"/"')),null!==i&&null!==(o=je())?i=[i,o]:(i=null,Fn=a);null!==n?e=[e,n]:(e=null,Fn=s)}else e=null,Fn=s;return e}function je(){for(var e,n,i,o=Fn,a=[],s=He();null!==s;)a.push(s),s=He();if(null!==a){for(s=[],i=Fn,59===t.charCodeAt(Fn)?(e=";",Fn++):(e=null,r('";"')),null!==e&&null!==(n=Ve())?e=[e,n]:(e=null,Fn=i);null!==e;)s.push(e),i=Fn,59===t.charCodeAt(Fn)?(e=";",Fn++):(e=null,r('";"')),null!==e&&null!==(n=Ve())?e=[e,n]:(e=null,Fn=i);null!==s?a=[a,s]:(a=null,Fn=o)}else a=null,Fn=o;return a}function Ve(){for(var e=[],t=He();null!==t;)e.push(t),t=He();return e}function He(){var e;return null===(e=g())&&null===(e=v())&&(58===t.charCodeAt(Fn)?(e=":",Fn++):(e=null,r('":"')),null===e&&(64===t.charCodeAt(Fn)?(e="@",Fn++):(e=null,r('"@"')),null===e&&(38===t.charCodeAt(Fn)?(e="&",Fn++):(e=null,r('"&"')),null===e&&(61===t.charCodeAt(Fn)?(e="=",Fn++):(e=null,r('"="')),null===e&&(43===t.charCodeAt(Fn)?(e="+",Fn++):(e=null,r('"+"')),null===e&&(36===t.charCodeAt(Fn)?(e="$",Fn++):(e=null,r('"$"')),null===e&&(44===t.charCodeAt(Fn)?(e=",",Fn++):(e=null,r('","'))))))))),e}function Ye(){var e,n,i,s=Fn,l=Fn;if(null!==(e=a())){for(n=[],null===(i=a())&&null===(i=o())&&(43===t.charCodeAt(Fn)?(i="+",Fn++):(i=null,r('"+"')),null===i&&(45===t.charCodeAt(Fn)?(i="-",Fn++):(i=null,r('"-"')),null===i&&(46===t.charCodeAt(Fn)?(i=".",Fn++):(i=null,r('"."')))));null!==i;)n.push(i),null===(i=a())&&null===(i=o())&&(43===t.charCodeAt(Fn)?(i="+",Fn++):(i=null,r('"+"')),null===i&&(45===t.charCodeAt(Fn)?(i="-",Fn++):(i=null,r('"-"')),null===i&&(46===t.charCodeAt(Fn)?(i=".",Fn++):(i=null,r('"."')))));null!==n?e=[e,n]:(e=null,Fn=l)}else e=null,Fn=l;return null===(e=null!==e?void(Vn.scheme=t.substring(Fn,s)):e)&&(Fn=s),e}function ze(){var e;return e=null===(e=Ge())?We():e}function Ge(){var e,n,i=Fn,o=Fn;return null!==(e=J())&&(64===t.charCodeAt(Fn)?(n="@",Fn++):(n=null,r('"@"')),null!==n)?e=[e,n]:(e=null,Fn=o),null!==(e=null!==e?e:"")&&null!==(n=ne())?e=[e,n]:(e=null,Fn=i),null!==e?e:""}function We(){var e,n;if(null===(n=g())&&null===(n=v())&&(36===t.charCodeAt(Fn)?(n="$",Fn++):(n=null,r('"$"')),null===n&&(44===t.charCodeAt(Fn)?(n=",",Fn++):(n=null,r('","')),null===n&&(59===t.charCodeAt(Fn)?(n=";",Fn++):(n=null,r('";"')),null===n&&(58===t.charCodeAt(Fn)?(n=":",Fn++):(n=null,r('":"')),null===n&&(64===t.charCodeAt(Fn)?(n="@",Fn++):(n=null,r('"@"')),null===n&&(38===t.charCodeAt(Fn)?(n="&",Fn++):(n=null,r('"&"')),null===n&&(61===t.charCodeAt(Fn)?(n="=",Fn++):(n=null,r('"="')),null===n&&(43===t.charCodeAt(Fn)?(n="+",Fn++):(n=null,r('"+"')))))))))),null!==n)for(e=[];null!==n;)e.push(n),null===(n=g())&&null===(n=v())&&(36===t.charCodeAt(Fn)?(n="$",Fn++):(n=null,r('"$"')),null===n&&(44===t.charCodeAt(Fn)?(n=",",Fn++):(n=null,r('","')),null===n&&(59===t.charCodeAt(Fn)?(n=";",Fn++):(n=null,r('";"')),null===n&&(58===t.charCodeAt(Fn)?(n=":",Fn++):(n=null,r('":"')),null===n&&(64===t.charCodeAt(Fn)?(n="@",Fn++):(n=null,r('"@"')),null===n&&(38===t.charCodeAt(Fn)?(n="&",Fn++):(n=null,r('"&"')),null===n&&(61===t.charCodeAt(Fn)?(n="=",Fn++):(n=null,r('"="')),null===n&&(43===t.charCodeAt(Fn)?(n="+",Fn++):(n=null,r('"+"'))))))))));else e=null;return e}function Ke(){for(var e=[],t=qe();null!==t;)e.push(t),t=qe();return e}function Xe(){var e,n,i,a,s,l,c=Fn,u=Fn;if("sip"===t.substr(Fn,3).toLowerCase()?(e=t.substr(Fn,3),Fn+=3):(e=null,r('"SIP"')),null!==e)if(47===t.charCodeAt(Fn)?(n="/",Fn++):(n=null,r('"/"')),null!==n){if(null!==(a=o()))for(i=[];null!==a;)i.push(a),a=o();else i=null;if(null!==i)if(46===t.charCodeAt(Fn)?(a=".",Fn++):(a=null,r('"."')),null!==a){if(null!==(l=o()))for(s=[];null!==l;)s.push(l),l=o();else s=null;null!==s?e=[e,n,i,a,s]:(e=null,Fn=u)}else e=null,Fn=u;else e=null,Fn=u}else e=null,Fn=u;else e=null,Fn=u;return null===(e=null!==e?void(Vn.sip_version=t.substring(Fn,c)):e)&&(Fn=c),e}function Ze(){var e;return"INVITE"===t.substr(Fn,6)?(e="INVITE",Fn+=6):(e=null,r('"INVITE"')),e}function Je(){var e;return"ACK"===t.substr(Fn,3)?(e="ACK",Fn+=3):(e=null,r('"ACK"')),e}function Qe(){var e;return"OPTIONS"===t.substr(Fn,7)?(e="OPTIONS",Fn+=7):(e=null,r('"OPTIONS"')),e}function et(){var e;return"BYE"===t.substr(Fn,3)?(e="BYE",Fn+=3):(e=null,r('"BYE"')),e}function tt(){var e;return"CANCEL"===t.substr(Fn,6)?(e="CANCEL",Fn+=6):(e=null,r('"CANCEL"')),e}function nt(){var e;return"REGISTER"===t.substr(Fn,8)?(e="REGISTER",Fn+=8):(e=null,r('"REGISTER"')),e}function rt(){var e;return"SUBSCRIBE"===t.substr(Fn,9)?(e="SUBSCRIBE",Fn+=9):(e=null,r('"SUBSCRIBE"')),e}function it(){var e;return"NOTIFY"===t.substr(Fn,6)?(e="NOTIFY",Fn+=6):(e=null,r('"NOTIFY"')),e}function ot(){var e;return"REFER"===t.substr(Fn,5)?(e="REFER",Fn+=5):(e=null,r('"REFER"')),e}function at(){var e,n=Fn;return null!==(e=null===(e=Ze())&&null===(e=Je())&&null===(e=Qe())&&null===(e=et())&&null===(e=tt())&&null===(e=nt())&&null===(e=rt())&&null===(e=it())&&null===(e=ot())?C():e)&&(Vn.method=t.substring(Fn,n),e=Vn.method),null===e&&(Fn=n),e}function st(){var e,t,n,r,i,o=Fn;return null!==(e=Xe())&&null!==(t=d())&&null!==(n=lt())&&null!==(r=d())&&null!==(i=ut())?e=[e,t,n,r,i]:(e=null,Fn=o),e}function lt(){var e,t,n=Fn;return null!==(e=ct())&&(t=e,e=void(Vn.status_code=parseInt(t.join("")))),null===e&&(Fn=n),e}function ct(){var e,t,n,r=Fn;return null!==(e=o())&&null!==(t=o())&&null!==(n=o())?e=[e,t,n]:(e=null,Fn=r),e}function ut(){var e,n=Fn,r=[];for(null===(e=h())&&null===(e=g())&&null===(e=v())&&null===(e=k())&&null===(e=S())&&null===(e=d())&&(e=f());null!==e;)r.push(e),null===(e=h())&&null===(e=g())&&null===(e=v())&&null===(e=k())&&null===(e=S())&&null===(e=d())&&(e=f());return null===(r=null!==r?void(Vn.reason_phrase=t.substring(Fn,n)):r)&&(Fn=n),r}function dt(){var e,t,n,r,i,o=Fn,a=Fn;if(null!==(e=null===(e=G())?ft():e)){for(t=[],i=Fn,null!==(n=N())&&null!==(r=ht())?n=[n,r]:(n=null,Fn=i);null!==n;)t.push(n),i=Fn,null!==(n=N())&&null!==(r=ht())?n=[n,r]:(n=null,Fn=i);null!==t?e=[e,t]:(e=null,Fn=a)}else e=null,Fn=a;return null===(e=null!==e?function(e){var t;Vn.multi_header||(Vn.multi_header=[]);try{t=new jn(Vn.uri,Vn.display_name,Vn.params),delete Vn.uri,delete Vn.display_name,delete Vn.params}catch(e){t=null}Vn.multi_header.push({possition:Fn,offset:e,parsed:t})}(o):e)&&(Fn=o),e}function ft(){var e,t,n,r,i=Fn;return null!==(e=null!==(e=pt())?e:"")&&null!==(t=M())&&null!==(n=W())&&null!==(r=P())?e=[e,t,n,r]:(e=null,Fn=i),e}function pt(){var e,t,n,r,i,o=Fn,a=Fn;if(null!==(e=C())){for(t=[],i=Fn,null!==(n=b())&&null!==(r=C())?n=[n,r]:(n=null,Fn=i);null!==n;)t.push(n),i=Fn,null!==(n=b())&&null!==(r=C())?n=[n,r]:(n=null,Fn=i);null!==t?e=[e,t]:(e=null,Fn=a)}else e=null,Fn=a;return null!==(e=null===e?V():e)&&(a=e,e=void(Vn.display_name="string"==typeof a?a:a[1].reduce(function(e,t){return e+t[0]+t[1]},a[0]))),null===e&&(Fn=o),e}function ht(){var e;return e=null===(e=gt())&&null===(e=mt())?_t():e}function gt(){var e,n,i,o=Fn,a=Fn;return"q"===t.substr(Fn,1).toLowerCase()?(e=t.substr(Fn,1),Fn++):(e=null,r('"q"')),null!==e&&null!==(i=R())&&null!==(n=bt())?e=[e,i,n]:(e=null,Fn=a),null!==e&&(i=e[2],Vn.params||(Vn.params={}),e=void(Vn.params.q=i)),null===e&&(Fn=o),e}function mt(){var e,n,i,o=Fn,a=Fn;return"expires"===t.substr(Fn,7).toLowerCase()?(e=t.substr(Fn,7),Fn+=7):(e=null,r('"expires"')),null!==e&&null!==(i=R())&&null!==(n=vt())?e=[e,i,n]:(e=null,Fn=a),null!==e&&(i=e[2],Vn.params||(Vn.params={}),e=void(Vn.params.expires=i)),null===e&&(Fn=o),e}function vt(){var e,t,n=Fn;if(null!==(t=o()))for(e=[];null!==t;)e.push(t),t=o();else e=null;return null===(e=null!==e?parseInt(e.join("")):e)&&(Fn=n),e}function bt(){var e,n,i,a,s,l,c=Fn,u=Fn;return 48===t.charCodeAt(Fn)?(e="0",Fn++):(e=null,r('"0"')),null!==e&&(l=Fn,46===t.charCodeAt(Fn)?(n=".",Fn++):(n=null,r('"."')),null!==n&&null!==(i=null!==(i=o())?i:"")&&null!==(a=null!==(a=o())?a:"")&&null!==(s=null!==(s=o())?s:"")?n=[n,i,a,s]:(n=null,Fn=l),null!==(n=null!==n?n:""))?e=[e,n]:(e=null,Fn=u),null===(e=null!==e?parseFloat(t.substring(Fn,c)):e)&&(Fn=c),e}function _t(){var e,t,n,r,i=Fn,o=Fn;return null!==(e=C())&&(r=Fn,null!==(t=R())&&null!==(n=yt())?t=[t,n]:(t=null,Fn=r),null!==(t=null!==t?t:""))?e=[e,t]:(e=null,Fn=o),null!==e&&(n=e[0],r=e[1],Vn.params||(Vn.params={}),r=void 0===r?void 0:r[1],e=void(Vn.params[n.toLowerCase()]=r)),null===e&&(Fn=i),e}function yt(){var e;return e=null===(e=C())&&null===(e=re())?B():e}function wt(){var e;return"render"===t.substr(Fn,6).toLowerCase()?(e=t.substr(Fn,6),Fn+=6):(e=null,r('"render"')),null===e&&("session"===t.substr(Fn,7).toLowerCase()?(e=t.substr(Fn,7),Fn+=7):(e=null,r('"session"')),null===e&&("icon"===t.substr(Fn,4).toLowerCase()?(e=t.substr(Fn,4),Fn+=4):(e=null,r('"icon"')),null===e&&("alert"===t.substr(Fn,5).toLowerCase()?(e=t.substr(Fn,5),Fn+=5):(e=null,r('"alert"')),null===e&&(e=C())))),e}function xt(){var e;return e=null===(e=kt())?_t():e}function kt(){var e,n,i,o=Fn;return"handling"===t.substr(Fn,8).toLowerCase()?(e=t.substr(Fn,8),Fn+=8):(e=null,r('"handling"')),null!==e&&null!==(n=R())&&("optional"===t.substr(Fn,8).toLowerCase()?(i=t.substr(Fn,8),Fn+=8):(i=null,r('"optional"')),null===i&&("required"===t.substr(Fn,8).toLowerCase()?(i=t.substr(Fn,8),Fn+=8):(i=null,r('"required"')),null===i&&(i=C())),null!==i)?e=[e,n,i]:(e=null,Fn=o),e}function St(){var e,t,n,r,i,o,a,s=Fn;if(null!==(e=Ct()))if(null!==(t=A()))if(null!==(n=Rt())){for(r=[],a=Fn,null!==(i=N())&&null!==(o=Ot())?i=[i,o]:(i=null,Fn=a);null!==i;)r.push(i),a=Fn,null!==(i=N())&&null!==(o=Ot())?i=[i,o]:(i=null,Fn=a);null!==r?e=[e,t,n,r]:(e=null,Fn=s)}else e=null,Fn=s;else e=null,Fn=s;else e=null,Fn=s;return e}function Ct(){var e;return e=null===(e=Tt())?Et():e}function Tt(){var e;return"text"===t.substr(Fn,4).toLowerCase()?(e=t.substr(Fn,4),Fn+=4):(e=null,r('"text"')),null===e&&("image"===t.substr(Fn,5).toLowerCase()?(e=t.substr(Fn,5),Fn+=5):(e=null,r('"image"')),null===e&&("audio"===t.substr(Fn,5).toLowerCase()?(e=t.substr(Fn,5),Fn+=5):(e=null,r('"audio"')),null===e&&("video"===t.substr(Fn,5).toLowerCase()?(e=t.substr(Fn,5),Fn+=5):(e=null,r('"video"')),null===e&&("application"===t.substr(Fn,11).toLowerCase()?(e=t.substr(Fn,11),Fn+=11):(e=null,r('"application"')),null===e&&(e=It()))))),e}function Et(){var e;return"message"===t.substr(Fn,7).toLowerCase()?(e=t.substr(Fn,7),Fn+=7):(e=null,r('"message"')),null===e&&("multipart"===t.substr(Fn,9).toLowerCase()?(e=t.substr(Fn,9),Fn+=9):(e=null,r('"multipart"')),null===e&&(e=It())),e}function It(){var e;return e=null===(e=C())?At():e}function At(){var e,n,i=Fn;return"x-"===t.substr(Fn,2).toLowerCase()?(e=t.substr(Fn,2),Fn+=2):(e=null,r('"x-"')),null!==e&&null!==(n=C())?e=[e,n]:(e=null,Fn=i),e}function Rt(){var e;return e=null===(e=It())?C():e}function Ot(){var e,t,n,r=Fn;return null!==(e=C())&&null!==(t=R())&&null!==(n=Lt())?e=[e,t,n]:(e=null,Fn=r),e}function Lt(){var e;return e=null===(e=C())?B():e}function Pt(){var e,t,n,r=Fn;if(null!==(t=o()))for(e=[];null!==t;)e.push(t),t=o();else e=null;return null!==e&&(n=e,e=void(Vn.value=parseInt(n.join("")))),null===e&&(Fn=r),e}function Mt(){var e,n,i,o,a,s=Fn;if(null!==(e=T())){for(n=[],a=Fn,46===t.charCodeAt(Fn)?(i=".",Fn++):(i=null,r('"."')),null!==i&&null!==(o=T())?i=[i,o]:(i=null,Fn=a);null!==i;)n.push(i),a=Fn,46===t.charCodeAt(Fn)?(i=".",Fn++):(i=null,r('"."')),null!==i&&null!==(o=T())?i=[i,o]:(i=null,Fn=a);null!==n?e=[e,n]:(e=null,Fn=s)}else e=null,Fn=s;return e}function $t(){var e;return e=null===(e=Nt())?_t():e}function Nt(){var e,n,i,o=Fn,a=Fn;return"tag"===t.substr(Fn,3).toLowerCase()?(e=t.substr(Fn,3),Fn+=3):(e=null,r('"tag"')),null!==e&&null!==(i=R())&&null!==(n=C())?e=[e,i,n]:(e=null,Fn=a),null!==e&&(i=e[2],e=void(Vn.tag=i)),null===e&&(Fn=o),e}function Dt(){var e,n,i,o,a,s,l,c=Fn;if("digest"===t.substr(Fn,6).toLowerCase()?(e=t.substr(Fn,6),Fn+=6):(e=null,r('"Digest"')),null!==e)if(null!==(n=b()))if(null!==(i=Ut())){for(o=[],l=Fn,null!==(a=$())&&null!==(s=Ut())?a=[a,s]:(a=null,Fn=l);null!==a;)o.push(a),l=Fn,null!==(a=$())&&null!==(s=Ut())?a=[a,s]:(a=null,Fn=l);null!==o?e=[e,n,i,o]:(e=null,Fn=c)}else e=null,Fn=c;else e=null,Fn=c;else e=null,Fn=c;return e=null===e?Ft():e}function Ft(){var e,t,n,r,i,o,a,s=Fn;if(null!==(e=C()))if(null!==(t=b()))if(null!==(n=qt())){for(r=[],a=Fn,null!==(i=$())&&null!==(o=qt())?i=[i,o]:(i=null,Fn=a);null!==i;)r.push(i),a=Fn,null!==(i=$())&&null!==(o=qt())?i=[i,o]:(i=null,Fn=a);null!==r?e=[e,t,n,r]:(e=null,Fn=s)}else e=null,Fn=s;else e=null,Fn=s;else e=null,Fn=s;return e}function qt(){var e,t,n,r=Fn;return null!==(e=C())&&null!==(t=R())&&null!==(n=null===(n=C())?B():n)?e=[e,t,n]:(e=null,Fn=r),e}function Ut(){var e;return e=null===(e=Bt())&&null===(e=Vt())&&null===(e=Yt())&&null===(e=Gt())&&null===(e=Wt())&&null===(e=Kt())&&null===(e=Xt())?qt():e}function Bt(){var e,n,i,o=Fn;return"realm"===t.substr(Fn,5).toLowerCase()?(e=t.substr(Fn,5),Fn+=5):(e=null,r('"realm"')),null!==e&&null!==(n=R())&&null!==(i=jt())?e=[e,n,i]:(e=null,Fn=o),e}function jt(){var e,t,n=Fn;return null!==(e=V())&&(t=e,e=void(Vn.realm=t)),null===e&&(Fn=n),e}function Vt(){var e,n,i,o,a,s,l,c,u=Fn;if("domain"===t.substr(Fn,6).toLowerCase()?(e=t.substr(Fn,6),Fn+=6):(e=null,r('"domain"')),null!==e)if(null!==(n=R()))if(null!==(i=F()))if(null!==(o=Ht())){if(a=[],c=Fn,null!==(l=d()))for(s=[];null!==l;)s.push(l),l=d();else s=null;for(null!==s&&null!==(l=Ht())?s=[s,l]:(s=null,Fn=c);null!==s;){if(a.push(s),c=Fn,null!==(l=d()))for(s=[];null!==l;)s.push(l),l=d();else s=null;null!==s&&null!==(l=Ht())?s=[s,l]:(s=null,Fn=c)}null!==a&&null!==(s=q())?e=[e,n,i,o,a,s]:(e=null,Fn=u)}else e=null,Fn=u;else e=null,Fn=u;else e=null,Fn=u;else e=null,Fn=u;return e}function Ht(){var e;return e=null===(e=Me())?De():e}function Yt(){var e,n,i,o=Fn;return"nonce"===t.substr(Fn,5).toLowerCase()?(e=t.substr(Fn,5),Fn+=5):(e=null,r('"nonce"')),null!==e&&null!==(n=R())&&null!==(i=zt())?e=[e,n,i]:(e=null,Fn=o),e}function zt(){var e,t,n=Fn;return null!==(e=V())&&(t=e,e=void(Vn.nonce=t)),null===e&&(Fn=n),e}function Gt(){var e,n,i,o=Fn,a=Fn;return"opaque"===t.substr(Fn,6).toLowerCase()?(e=t.substr(Fn,6),Fn+=6):(e=null,r('"opaque"')),null!==e&&null!==(i=R())&&null!==(n=V())?e=[e,i,n]:(e=null,Fn=a),null!==e&&(i=e[2],e=void(Vn.opaque=i)),null===e&&(Fn=o),e}function Wt(){var e,n,i,o,a=Fn;return"stale"===t.substr(Fn,5).toLowerCase()?(e=t.substr(Fn,5),Fn+=5):(e=null,r('"stale"')),null!==e&&null!==(n=R())&&(o=Fn,"true"===t.substr(Fn,4).toLowerCase()?(i=t.substr(Fn,4),Fn+=4):(i=null,r('"true"')),null===(i=null!==i?void(Vn.stale=!0):i)&&(Fn=o),null===i&&(o=Fn,"false"===t.substr(Fn,5).toLowerCase()?(i=t.substr(Fn,5),Fn+=5):(i=null,r('"false"')),null===(i=null!==i?void(Vn.stale=!1):i)&&(Fn=o)),null!==i)?e=[e,n,i]:(e=null,Fn=a),e}function Kt(){var e,n,i,o=Fn,a=Fn;return"algorithm"===t.substr(Fn,9).toLowerCase()?(e=t.substr(Fn,9),Fn+=9):(e=null,r('"algorithm"')),null!==e&&null!==(i=R())&&("md5"===t.substr(Fn,3).toLowerCase()?(n=t.substr(Fn,3),Fn+=3):(n=null,r('"MD5"')),null===n&&("md5-sess"===t.substr(Fn,8).toLowerCase()?(n=t.substr(Fn,8),Fn+=8):(n=null,r('"MD5-sess"')),null===n&&(n=C())),null!==n)?e=[e,i,n]:(e=null,Fn=a),null!==e&&(i=e[2],e=void(Vn.algorithm=i.toUpperCase())),null===e&&(Fn=o),e}function Xt(){var e,n,i,o,a,s,l,c,u,d=Fn;if("qop"===t.substr(Fn,3).toLowerCase()?(e=t.substr(Fn,3),Fn+=3):(e=null,r('"qop"')),null!==e)if(null!==(n=R()))if(null!==(i=F())){if(c=Fn,null!==(o=Zt())){for(a=[],u=Fn,44===t.charCodeAt(Fn)?(s=",",Fn++):(s=null,r('","')),null!==s&&null!==(l=Zt())?s=[s,l]:(s=null,Fn=u);null!==s;)a.push(s),u=Fn,44===t.charCodeAt(Fn)?(s=",",Fn++):(s=null,r('","')),null!==s&&null!==(l=Zt())?s=[s,l]:(s=null,Fn=u);null!==a?o=[o,a]:(o=null,Fn=c)}else o=null,Fn=c;null!==o&&null!==(a=q())?e=[e,n,i,o,a]:(e=null,Fn=d)}else e=null,Fn=d;else e=null,Fn=d;else e=null,Fn=d;return e}function Zt(){var e,n,i=Fn;return"auth-int"===t.substr(Fn,8).toLowerCase()?(e=t.substr(Fn,8),Fn+=8):(e=null,r('"auth-int"')),null===e&&("auth"===t.substr(Fn,4).toLowerCase()?(e=t.substr(Fn,4),Fn+=4):(e=null,r('"auth"')),null===e&&(e=C())),null!==e&&(n=e,Vn.qop||(Vn.qop=[]),e=void Vn.qop.push(n.toLowerCase())),null===e&&(Fn=i),e}function Jt(){var e,t,n,r,i,o=Fn,a=Fn;if(null!==(e=ft())){for(t=[],i=Fn,null!==(n=N())&&null!==(r=_t())?n=[n,r]:(n=null,Fn=i);null!==n;)t.push(n),i=Fn,null!==(n=N())&&null!==(r=_t())?n=[n,r]:(n=null,Fn=i);null!==t?e=[e,t]:(e=null,Fn=a)}else e=null,Fn=a;return null===(e=null!==e?function(e){var t;Vn.multi_header||(Vn.multi_header=[]);try{t=new jn(Vn.uri,Vn.display_name,Vn.params),delete Vn.uri,delete Vn.display_name,delete Vn.params}catch(e){t=null}Vn.multi_header.push({possition:Fn,offset:e,parsed:t})}(o):e)&&(Fn=o),e}function Qt(){var e;return e=null===(e=en())?_t():e}function en(){var e,n,i,a,s=Fn,l=Fn;if("cause"===t.substr(Fn,5).toLowerCase()?(e=t.substr(Fn,5),Fn+=5):(e=null,r('"cause"')),null!==e)if(null!==(a=R())){if(null!==(i=o()))for(n=[];null!==i;)n.push(i),i=o();else n=null;null!==n?e=[e,a,n]:(e=null,Fn=l)}else e=null,Fn=l;else e=null,Fn=l;return null!==e&&(a=e[2],e=void(Vn.cause=parseInt(a.join("")))),null===e&&(Fn=s),e}function tn(){var e,t,n,r,i,o=Fn;if(null!==(e=ft())){for(t=[],i=Fn,null!==(n=N())&&null!==(r=_t())?n=[n,r]:(n=null,Fn=i);null!==n;)t.push(n),i=Fn,null!==(n=N())&&null!==(r=_t())?n=[n,r]:(n=null,Fn=i);null!==t?e=[e,t]:(e=null,Fn=o)}else e=null,Fn=o;return e}function nn(){var e,n=Fn;return"active"===t.substr(Fn,6).toLowerCase()?(e=t.substr(Fn,6),Fn+=6):(e=null,r('"active"')),null===e&&("pending"===t.substr(Fn,7).toLowerCase()?(e=t.substr(Fn,7),Fn+=7):(e=null,r('"pending"')),null===e&&("terminated"===t.substr(Fn,10).toLowerCase()?(e=t.substr(Fn,10),Fn+=10):(e=null,r('"terminated"')),null===e&&(e=C()))),null===(e=null!==e?void(Vn.state=t.substring(Fn,n)):e)&&(Fn=n),e}function rn(){var e,n,i,o,a=Fn,s=Fn;return"reason"===t.substr(Fn,6).toLowerCase()?(e=t.substr(Fn,6),Fn+=6):(e=null,r('"reason"')),null!==e&&null!==(n=R())&&null!==(i=on())?e=[e,n,i]:(e=null,Fn=s),null===(e=null!==e?void(void 0!==(o=e[2])&&(Vn.reason=o)):e)&&(Fn=a),null===e&&(s=a=Fn,"expires"===t.substr(Fn,7).toLowerCase()?(e=t.substr(Fn,7),Fn+=7):(e=null,r('"expires"')),null!==e&&null!==(n=R())&&null!==(i=vt())?e=[e,n,i]:(e=null,Fn=s),null===(e=null!==e?void(void 0!==(o=e[2])&&(Vn.expires=o)):e)&&(Fn=a),null===e&&(s=a=Fn,"retry_after"===t.substr(Fn,11).toLowerCase()?(e=t.substr(Fn,11),Fn+=11):(e=null,r('"retry_after"')),null!==e&&null!==(n=R())&&null!==(i=vt())?e=[e,n,i]:(e=null,Fn=s),null===(e=null!==e?void(void 0!==(o=e[2])&&(Vn.retry_after=o)):e)&&(Fn=a),null===e&&(e=_t()))),e}function on(){var e;return"deactivated"===t.substr(Fn,11).toLowerCase()?(e=t.substr(Fn,11),Fn+=11):(e=null,r('"deactivated"')),null===e&&("probation"===t.substr(Fn,9).toLowerCase()?(e=t.substr(Fn,9),Fn+=9):(e=null,r('"probation"')),null===e&&("rejected"===t.substr(Fn,8).toLowerCase()?(e=t.substr(Fn,8),Fn+=8):(e=null,r('"rejected"')),null===e&&("timeout"===t.substr(Fn,7).toLowerCase()?(e=t.substr(Fn,7),Fn+=7):(e=null,r('"timeout"')),null===e&&("giveup"===t.substr(Fn,6).toLowerCase()?(e=t.substr(Fn,6),Fn+=6):(e=null,r('"giveup"')),null===e&&("noresource"===t.substr(Fn,10).toLowerCase()?(e=t.substr(Fn,10),Fn+=10):(e=null,r('"noresource"')),null===e&&("invariant"===t.substr(Fn,9).toLowerCase()?(e=t.substr(Fn,9),Fn+=9):(e=null,r('"invariant"')),null===e&&(e=C()))))))),e}function an(){var e;return e=null===(e=Nt())?_t():e}function sn(){var e,t,n,r,i,o,a,s=Fn;if(null!==(e=gn()))if(null!==(t=b()))if(null!==(n=bn())){for(r=[],a=Fn,null!==(i=N())&&null!==(o=ln())?i=[i,o]:(i=null,Fn=a);null!==i;)r.push(i),a=Fn,null!==(i=N())&&null!==(o=ln())?i=[i,o]:(i=null,Fn=a);null!==r?e=[e,t,n,r]:(e=null,Fn=s)}else e=null,Fn=s;else e=null,Fn=s;else e=null,Fn=s;return e}function ln(){var e;return e=null===(e=cn())&&null===(e=un())&&null===(e=dn())&&null===(e=fn())&&null===(e=pn())?_t():e}function cn(){var e,n,i,o=Fn,a=Fn;return"ttl"===t.substr(Fn,3).toLowerCase()?(e=t.substr(Fn,3),Fn+=3):(e=null,r('"ttl"')),null!==e&&null!==(i=R())&&null!==(n=wn())?e=[e,i,n]:(e=null,Fn=a),null!==e&&(i=e[2],e=void(Vn.ttl=i)),null===e&&(Fn=o),e}function un(){var e,n,i,o=Fn,a=Fn;return"maddr"===t.substr(Fn,5).toLowerCase()?(e=t.substr(Fn,5),Fn+=5):(e=null,r('"maddr"')),null!==e&&null!==(i=R())&&null!==(n=re())?e=[e,i,n]:(e=null,Fn=a),null!==e&&(i=e[2],e=void(Vn.maddr=i)),null===e&&(Fn=o),e}function dn(){var e,n,i,o=Fn,a=Fn;return"received"===t.substr(Fn,8).toLowerCase()?(e=t.substr(Fn,8),Fn+=8):(e=null,r('"received"')),null!==e&&null!==(i=R())&&null!==(n=null===(n=de())?le():n)?e=[e,i,n]:(e=null,Fn=a),null!==e&&(i=e[2],e=void(Vn.received=i)),null===e&&(Fn=o),e}function fn(){var e,n,i,o=Fn,a=Fn;return"branch"===t.substr(Fn,6).toLowerCase()?(e=t.substr(Fn,6),Fn+=6):(e=null,r('"branch"')),null!==e&&null!==(i=R())&&null!==(n=C())?e=[e,i,n]:(e=null,Fn=a),null!==e&&(i=e[2],e=void(Vn.branch=i)),null===e&&(Fn=o),e}function pn(){var e,n,i,o,a=Fn;return"rport"===t.substr(Fn,5).toLowerCase()?(e=t.substr(Fn,5),Fn+=5):(e=null,r('"rport"')),null!==e&&(o=Fn,null!==(n=R())&&null!==(i=hn())?n=[n,i]:(n=null,Fn=o),null!==(n=null!==n?n:""))?e=[e,n]:(e=null,Fn=a),e}function hn(){var e,t,n,r,i,a=Fn,s=Fn;return null!==(e=null!==(e=o())?e:"")&&null!==(i=null!==(i=o())?i:"")&&null!==(t=null!==(t=o())?t:"")&&null!==(n=null!==(n=o())?n:"")&&null!==(r=null!==(r=o())?r:"")?e=[e,i,t,n,r]:(e=null,Fn=s),null!==e&&(i=e,e=void(Vn.rport=parseInt(i.join("")))),null===e&&(Fn=a),e}function gn(){var e,t,n,r,i,o=Fn;return null!==(e=mn())&&null!==(t=A())&&null!==(n=C())&&null!==(r=A())&&null!==(i=vn())?e=[e,t,n,r,i]:(e=null,Fn=o),e}function mn(){var e,n,i=Fn;return"sip"===t.substr(Fn,3).toLowerCase()?(e=t.substr(Fn,3),Fn+=3):(e=null,r('"SIP"')),null!==(e=null===e?C():e)&&(n=e,e=void(Vn.protocol=n)),null===e&&(Fn=i),e}function vn(){var e,n,i=Fn;return"udp"===t.substr(Fn,3).toLowerCase()?(e=t.substr(Fn,3),Fn+=3):(e=null,r('"UDP"')),null===e&&("tcp"===t.substr(Fn,3).toLowerCase()?(e=t.substr(Fn,3),Fn+=3):(e=null,r('"TCP"')),null===e&&("tls"===t.substr(Fn,3).toLowerCase()?(e=t.substr(Fn,3),Fn+=3):(e=null,r('"TLS"')),null===e&&("sctp"===t.substr(Fn,4).toLowerCase()?(e=t.substr(Fn,4),Fn+=4):(e=null,r('"SCTP"')),null===e&&(e=C())))),null!==e&&(n=e,e=void(Vn.transport=n)),null===e&&(Fn=i),e}function bn(){var e,t,n,r,i=Fn;return null!==(e=_n())&&(r=Fn,null!==(t=D())&&null!==(n=yn())?t=[t,n]:(t=null,Fn=r),null!==(t=null!==t?t:""))?e=[e,t]:(e=null,Fn=i),e}function _n(){var e,n=Fn;return null===(e=null!==(e=null===(e=de())&&null===(e=se())?ie():e)?void(Vn.host=t.substring(Fn,n)):e)&&(Fn=n),e}function yn(){var e,t,n,r,i,a=Fn,s=Fn;return null!==(e=null!==(e=o())?e:"")&&null!==(i=null!==(i=o())?i:"")&&null!==(t=null!==(t=o())?t:"")&&null!==(n=null!==(n=o())?n:"")&&null!==(r=null!==(r=o())?r:"")?e=[e,i,t,n,r]:(e=null,Fn=s),null!==e&&(i=e,e=void(Vn.port=parseInt(i.join("")))),null===e&&(Fn=a),e}function wn(){var e,t,n,r=Fn,i=Fn;return null!==(e=o())&&null!==(t=null!==(t=o())?t:"")&&null!==(n=null!==(n=o())?n:"")?e=[e,t,n]:(e=null,Fn=i),null===(e=null!==e?parseInt(e.join("")):e)&&(Fn=r),e}function xn(){var e,t,n=Fn;return null!==(e=vt())&&(t=e,e=void(Vn.expires=t)),null===e&&(Fn=n),e}function kn(){var e;return e=null===(e=Sn())?_t():e}function Sn(){var e,n,i,o=Fn,a=Fn;return"refresher"===t.substr(Fn,9).toLowerCase()?(e=t.substr(Fn,9),Fn+=9):(e=null,r('"refresher"')),null!==e&&null!==(i=R())&&("uac"===t.substr(Fn,3).toLowerCase()?(n=t.substr(Fn,3),Fn+=3):(n=null,r('"uac"')),null===n&&("uas"===t.substr(Fn,3).toLowerCase()?(n=t.substr(Fn,3),Fn+=3):(n=null,r('"uas"'))),null!==n)?e=[e,i,n]:(e=null,Fn=a),null!==e&&(i=e[2],e=void(Vn.refresher=i.toLowerCase())),null===e&&(Fn=o),e}function Cn(){var e,t=[];for(null===(e=x())&&null===(e=S())&&(e=b());null!==e;)t.push(e),null===(e=x())&&null===(e=S())&&(e=b());return t}function Tn(){var e,n,i,o,a,s,l,c,u,d=Fn,f=Fn;return null!==(e=In())&&(45===t.charCodeAt(Fn)?(n="-",Fn++):(n=null,r('"-"')),null!==n&&null!==(i=En())&&(45===t.charCodeAt(Fn)?(o="-",Fn++):(o=null,r('"-"')),null!==o&&null!==(a=En())&&(45===t.charCodeAt(Fn)?(s="-",Fn++):(s=null,r('"-"')),null!==s&&null!==(l=En())&&(45===t.charCodeAt(Fn)?(c="-",Fn++):(c=null,r('"-"')),null!==c&&null!==(u=An())))))?e=[e,n,i,o,a,s,l,c,u]:(e=null,Fn=f),null!==e&&(e[0],e=void(Vn=t.substring(Fn+5,d))),null===e&&(Fn=d),e}function En(){var e,t,n,r,i=Fn;return null!==(e=s())&&null!==(t=s())&&null!==(n=s())&&null!==(r=s())?e=[e,t,n,r]:(e=null,Fn=i),e}function In(){var e,t,n=Fn;return null!==(e=En())&&null!==(t=En())?e=[e,t]:(e=null,Fn=n),e}function An(){var e,t,n,r=Fn;return null!==(e=En())&&null!==(t=En())&&null!==(n=En())?e=[e,t,n]:(e=null,Fn=r),e}function Rn(){var e,n,i,o,a=Fn,s=Fn;return null!==(e=E())&&(o=Fn,64===t.charCodeAt(Fn)?(n="@",Fn++):(n=null,r('"@"')),null!==n&&null!==(i=E())?n=[n,i]:(n=null,Fn=o),null!==(n=null!==n?n:""))?e=[e,n]:(e=null,Fn=s),null===(e=null!==e?void(Vn.call_id=t.substring(Fn,a)):e)&&(Fn=a),e}function On(){var e;return e=null===(e=Ln())&&null===(e=Pn())&&null===(e=Mn())?_t():e}function Ln(){var e,n,i,o=Fn,a=Fn;return"to-tag"===t.substr(Fn,6)?(e="to-tag",Fn+=6):(e=null,r('"to-tag"')),null!==e&&null!==(i=R())&&null!==(n=C())?e=[e,i,n]:(e=null,Fn=a),null!==e&&(i=e[2],e=void(Vn.to_tag=i)),null===e&&(Fn=o),e}function Pn(){var e,n,i,o=Fn,a=Fn;return"from-tag"===t.substr(Fn,8)?(e="from-tag",Fn+=8):(e=null,r('"from-tag"')),null!==e&&null!==(i=R())&&null!==(n=C())?e=[e,i,n]:(e=null,Fn=a),null!==e&&(i=e[2],e=void(Vn.from_tag=i)),null===e&&(Fn=o),e}function Mn(){var e,n=Fn;return"early-only"===t.substr(Fn,10)?(e="early-only",Fn+=10):(e=null,r('"early-only"')),null===(e=null!==e?void(Vn.early_only=!0):e)&&(Fn=n),e}var $n={CRLF:i,DIGIT:o,ALPHA:a,HEXDIG:s,WSP:l,OCTET:c,DQUOTE:u,SP:d,HTAB:f,alphanum:p,reserved:h,unreserved:g,mark:m,escaped:v,LWS:b,SWS:_,HCOLON:y,TEXT_UTF8_TRIM:w,TEXT_UTF8char:x,UTF8_NONASCII:k,UTF8_CONT:S,LHEX:function(){var e;return null===(e=o())&&(/^[a-f]/.test(t.charAt(Fn))?(e=t.charAt(Fn),Fn++):(e=null,r("[a-f]"))),e},token:C,token_nodot:T,separators:function(){var e;return 40===t.charCodeAt(Fn)?(e="(",Fn++):(e=null,r('"("')),null===e&&(41===t.charCodeAt(Fn)?(e=")",Fn++):(e=null,r('")"')),null===e&&(60===t.charCodeAt(Fn)?(e="<",Fn++):(e=null,r('"<"')),null===e&&(62===t.charCodeAt(Fn)?(e=">",Fn++):(e=null,r('">"')),null===e&&(64===t.charCodeAt(Fn)?(e="@",Fn++):(e=null,r('"@"')),null===e&&(44===t.charCodeAt(Fn)?(e=",",Fn++):(e=null,r('","')),null===e&&(59===t.charCodeAt(Fn)?(e=";",Fn++):(e=null,r('";"')),null===e&&(58===t.charCodeAt(Fn)?(e=":",Fn++):(e=null,r('":"')),null===e&&(92===t.charCodeAt(Fn)?(e="\\",Fn++):(e=null,r('"\\\\"')),null===e&&null===(e=u())&&(47===t.charCodeAt(Fn)?(e="/",Fn++):(e=null,r('"/"')),null===e&&(91===t.charCodeAt(Fn)?(e="[",Fn++):(e=null,r('"["')),null===e&&(93===t.charCodeAt(Fn)?(e="]",Fn++):(e=null,r('"]"')),null===e&&(63===t.charCodeAt(Fn)?(e="?",Fn++):(e=null,r('"?"')),null===e&&(61===t.charCodeAt(Fn)?(e="=",Fn++):(e=null,r('"="')),null===e&&(123===t.charCodeAt(Fn)?(e="{",Fn++):(e=null,r('"{"')),null===e&&(125===t.charCodeAt(Fn)?(e="}",Fn++):(e=null,r('"}"')),null===e&&null===(e=d())&&(e=f())))))))))))))))),e},word:E,STAR:I,SLASH:A,EQUAL:R,LPAREN:O,RPAREN:L,RAQUOT:P,LAQUOT:M,COMMA:$,SEMI:N,COLON:D,LDQUOT:F,RDQUOT:q,comment:function e(){var t,n,r,i=Fn;if(null!==(t=O())){for(n=[],null===(r=U())&&null===(r=Y())&&(r=e());null!==r;)n.push(r),null===(r=U())&&null===(r=Y())&&(r=e());null!==n&&null!==(r=L())?t=[t,n,r]:(t=null,Fn=i)}else t=null,Fn=i;return t},ctext:U,quoted_string:B,quoted_string_clean:V,qdtext:H,quoted_pair:Y,SIP_URI_noparams:G,SIP_URI:W,uri_scheme:K,uri_scheme_sips:X,uri_scheme_sip:Z,userinfo:J,user:Q,user_unreserved:ee,password:te,hostport:ne,host:re,hostname:ie,domainlabel:oe,toplabel:ae,IPv6reference:se,IPv6address:le,h16:ce,ls32:ue,IPv4address:de,dec_octet:fe,port:pe,uri_parameters:he,uri_parameter:ge,transport_param:me,user_param:ve,method_param:be,ttl_param:_e,maddr_param:ye,lr_param:we,other_param:xe,pname:ke,pvalue:Se,paramchar:Ce,param_unreserved:Te,headers:Ee,header:Ie,hname:Ae,hvalue:Re,hnv_unreserved:Oe,Request_Response:function(){var e;return e=null===(e=st())?Le():e},Request_Line:Le,Request_URI:Pe,absoluteURI:Me,hier_part:$e,net_path:Ne,abs_path:De,opaque_part:Fe,uric:qe,uric_no_slash:Ue,path_segments:Be,segment:je,param:Ve,pchar:He,scheme:Ye,authority:ze,srvr:Ge,reg_name:We,query:Ke,SIP_Version:Xe,INVITEm:Ze,ACKm:Je,OPTIONSm:Qe,BYEm:et,CANCELm:tt,REGISTERm:nt,SUBSCRIBEm:rt,NOTIFYm:it,REFERm:ot,Method:at,Status_Line:st,Status_Code:lt,extension_code:ct,Reason_Phrase:ut,Allow_Events:function(){var e,t,n,r,i,o=Fn;if(null!==(e=Mt())){for(t=[],i=Fn,null!==(n=$())&&null!==(r=Mt())?n=[n,r]:(n=null,Fn=i);null!==n;)t.push(n),i=Fn,null!==(n=$())&&null!==(r=Mt())?n=[n,r]:(n=null,Fn=i);null!==t?e=[e,t]:(e=null,Fn=o)}else e=null,Fn=o;return e},Call_ID:function(){var e,n,i,o,a=Fn,s=Fn;return null!==(e=E())&&(o=Fn,64===t.charCodeAt(Fn)?(n="@",Fn++):(n=null,r('"@"')),null!==n&&null!==(i=E())?n=[n,i]:(n=null,Fn=o),null!==(n=null!==n?n:""))?e=[e,n]:(e=null,Fn=s),null===(e=null!==e?void(Vn=t.substring(Fn,a)):e)&&(Fn=a),e},Contact:function(){var e,t,n,r,i,o,a=Fn;if(null===(e=I()))if(i=Fn,null!==(e=dt())){for(t=[],o=Fn,null!==(n=$())&&null!==(r=dt())?n=[n,r]:(n=null,Fn=o);null!==n;)t.push(n),o=Fn,null!==(n=$())&&null!==(r=dt())?n=[n,r]:(n=null,Fn=o);null!==t?e=[e,t]:(e=null,Fn=i)}else e=null,Fn=i;return null===(e=null!==e?function(){for(var e=Vn.multi_header.length,t=0;t<e;t++)if(null===Vn.multi_header[t].parsed){Vn=null;break}Vn=null!==Vn?Vn.multi_header:-1}():e)&&(Fn=a),e},contact_param:dt,name_addr:ft,display_name:pt,contact_params:ht,c_p_q:gt,c_p_expires:mt,delta_seconds:vt,qvalue:bt,generic_param:_t,gen_value:yt,Content_Disposition:function(){var e,t,n,r,i,o=Fn;if(null!==(e=wt())){for(t=[],i=Fn,null!==(n=N())&&null!==(r=xt())?n=[n,r]:(n=null,Fn=i);null!==n;)t.push(n),i=Fn,null!==(n=N())&&null!==(r=xt())?n=[n,r]:(n=null,Fn=i);null!==t?e=[e,t]:(e=null,Fn=o)}else e=null,Fn=o;return e},disp_type:wt,disp_param:xt,handling_param:kt,Content_Encoding:function(){var e,t,n,r,i,o=Fn;if(null!==(e=C())){for(t=[],i=Fn,null!==(n=$())&&null!==(r=C())?n=[n,r]:(n=null,Fn=i);null!==n;)t.push(n),i=Fn,null!==(n=$())&&null!==(r=C())?n=[n,r]:(n=null,Fn=i);null!==t?e=[e,t]:(e=null,Fn=o)}else e=null,Fn=o;return e},Content_Length:function(){var e,t,n=Fn;if(null!==(t=o()))for(e=[];null!==t;)e.push(t),t=o();else e=null;return null===(e=null!==e?void(Vn=parseInt(e.join(""))):e)&&(Fn=n),e},Content_Type:function(){var e,n=Fn;return null===(e=null!==(e=St())?void(Vn=t.substring(Fn,n)):e)&&(Fn=n),e},media_type:St,m_type:Ct,discrete_type:Tt,composite_type:Et,extension_token:It,x_token:At,m_subtype:Rt,m_parameter:Ot,m_value:Lt,CSeq:function(){var e,t,n,r=Fn;return null!==(e=Pt())&&null!==(t=b())&&null!==(n=at())?e=[e,t,n]:(e=null,Fn=r),e},CSeq_value:Pt,Expires:function(){var e,t=Fn;return null===(e=null!==(e=vt())?void(Vn=e):e)&&(Fn=t),e},Event:function(){var e,t,n,r,i,o=Fn,a=Fn;if(null!==(e=Mt())){for(t=[],i=Fn,null!==(n=N())&&null!==(r=_t())?n=[n,r]:(n=null,Fn=i);null!==n;)t.push(n),i=Fn,null!==(n=N())&&null!==(r=_t())?n=[n,r]:(n=null,Fn=i);null!==t?e=[e,t]:(e=null,Fn=a)}else e=null,Fn=a;return null!==e&&(a=e[0],e=void(Vn.event=a.join("").toLowerCase())),null===e&&(Fn=o),e},event_type:Mt,From:function(){var e,t,n,r,i,o=Fn,a=Fn;if(null!==(e=null===(e=G())?ft():e)){for(t=[],i=Fn,null!==(n=N())&&null!==(r=$t())?n=[n,r]:(n=null,Fn=i);null!==n;)t.push(n),i=Fn,null!==(n=N())&&null!==(r=$t())?n=[n,r]:(n=null,Fn=i);null!==t?e=[e,t]:(e=null,Fn=a)}else e=null,Fn=a;return null===(e=null!==e?function(){var e=Vn.tag;try{Vn=new jn(Vn.uri,Vn.display_name,Vn.params),e&&Vn.setParam("tag",e)}catch(e){Vn=-1}}():e)&&(Fn=o),e},from_param:$t,tag_param:Nt,Max_Forwards:function(){var e,t,n=Fn;if(null!==(t=o()))for(e=[];null!==t;)e.push(t),t=o();else e=null;return null===(e=null!==e?void(Vn=parseInt(e.join(""))):e)&&(Fn=n),e},Min_Expires:function(){var e,t=Fn;return null===(e=null!==(e=vt())?void(Vn=e):e)&&(Fn=t),e},Name_Addr_Header:function(){for(var e,t,n,r,i,o,a=Fn,s=Fn,l=[],c=pt();null!==c;)l.push(c),c=pt();if(null!==l)if(null!==(c=M()))if(null!==(e=W()))if(null!==(t=P())){for(n=[],o=Fn,null!==(r=N())&&null!==(i=_t())?r=[r,i]:(r=null,Fn=o);null!==r;)n.push(r),o=Fn,null!==(r=N())&&null!==(i=_t())?r=[r,i]:(r=null,Fn=o);null!==n?l=[l,c,e,t,n]:(l=null,Fn=s)}else l=null,Fn=s;else l=null,Fn=s;else l=null,Fn=s;else l=null,Fn=s;return null===(l=null!==l?function(){try{Vn=new jn(Vn.uri,Vn.display_name,Vn.params)}catch(e){Vn=-1}}():l)&&(Fn=a),l},Proxy_Authenticate:Dt,challenge:Dt,other_challenge:Ft,auth_param:qt,digest_cln:Ut,realm:Bt,realm_value:jt,domain:Vt,URI:Ht,nonce:Yt,nonce_value:zt,opaque:Gt,stale:Wt,algorithm:Kt,qop_options:Xt,qop_value:Zt,Proxy_Require:function(){var e,t,n,r,i,o=Fn;if(null!==(e=C())){for(t=[],i=Fn,null!==(n=$())&&null!==(r=C())?n=[n,r]:(n=null,Fn=i);null!==n;)t.push(n),i=Fn,null!==(n=$())&&null!==(r=C())?n=[n,r]:(n=null,Fn=i);null!==t?e=[e,t]:(e=null,Fn=o)}else e=null,Fn=o;return e},Record_Route:function(){var e,t,n,r,i,o=Fn,a=Fn;if(null!==(e=Jt())){for(t=[],i=Fn,null!==(n=$())&&null!==(r=Jt())?n=[n,r]:(n=null,Fn=i);null!==n;)t.push(n),i=Fn,null!==(n=$())&&null!==(r=Jt())?n=[n,r]:(n=null,Fn=i);null!==t?e=[e,t]:(e=null,Fn=a)}else e=null,Fn=a;return null===(e=null!==e?function(){for(var e=Vn.multi_header.length,t=0;t<e;t++)if(null===Vn.multi_header[t].parsed){Vn=null;break}Vn=null!==Vn?Vn.multi_header:-1}():e)&&(Fn=o),e},rec_route:Jt,Reason:function(){var e,n,i,o,a,s=Fn,l=Fn;if("sip"===t.substr(Fn,3).toLowerCase()?(e=t.substr(Fn,3),Fn+=3):(e=null,r('"SIP"')),null!==(e=null===e?C():e)){for(n=[],a=Fn,null!==(i=N())&&null!==(o=Qt())?i=[i,o]:(i=null,Fn=a);null!==i;)n.push(i),a=Fn,null!==(i=N())&&null!==(o=Qt())?i=[i,o]:(i=null,Fn=a);null!==n?e=[e,n]:(e=null,Fn=l)}else e=null,Fn=l;return null!==e&&(l=e[0],Vn.protocol=l.toLowerCase(),Vn.params||(Vn.params={}),e=void(Vn.params.text&&'"'===Vn.params.text[0]&&(l=Vn.params.text,Vn.text=l.substring(1,l.length-1),delete Vn.params.text))),null===e&&(Fn=s),e},reason_param:Qt,reason_cause:en,Require:function(){var e,t,n,r,i,o=Fn;if(null!==(e=C())){for(t=[],i=Fn,null!==(n=$())&&null!==(r=C())?n=[n,r]:(n=null,Fn=i);null!==n;)t.push(n),i=Fn,null!==(n=$())&&null!==(r=C())?n=[n,r]:(n=null,Fn=i);null!==t?e=[e,t]:(e=null,Fn=o)}else e=null,Fn=o;return e},Route:function(){var e,t,n,r,i,o=Fn;if(null!==(e=tn())){for(t=[],i=Fn,null!==(n=$())&&null!==(r=tn())?n=[n,r]:(n=null,Fn=i);null!==n;)t.push(n),i=Fn,null!==(n=$())&&null!==(r=tn())?n=[n,r]:(n=null,Fn=i);null!==t?e=[e,t]:(e=null,Fn=o)}else e=null,Fn=o;return e},route_param:tn,Subscription_State:function(){var e,t,n,r,i,o=Fn;if(null!==(e=nn())){for(t=[],i=Fn,null!==(n=N())&&null!==(r=rn())?n=[n,r]:(n=null,Fn=i);null!==n;)t.push(n),i=Fn,null!==(n=N())&&null!==(r=rn())?n=[n,r]:(n=null,Fn=i);null!==t?e=[e,t]:(e=null,Fn=o)}else e=null,Fn=o;return e},substate_value:nn,subexp_params:rn,event_reason_value:on,Subject:function(){var e;return null!==(e=w())?e:""},Supported:function(){var e,t,n,r,i,o=Fn;if(null!==(e=C())){for(t=[],i=Fn,null!==(n=$())&&null!==(r=C())?n=[n,r]:(n=null,Fn=i);null!==n;)t.push(n),i=Fn,null!==(n=$())&&null!==(r=C())?n=[n,r]:(n=null,Fn=i);null!==t?e=[e,t]:(e=null,Fn=o)}else e=null,Fn=o;return null!==e?e:""},To:function(){var e,t,n,r,i,o=Fn,a=Fn;if(null!==(e=null===(e=G())?ft():e)){for(t=[],i=Fn,null!==(n=N())&&null!==(r=an())?n=[n,r]:(n=null,Fn=i);null!==n;)t.push(n),i=Fn,null!==(n=N())&&null!==(r=an())?n=[n,r]:(n=null,Fn=i);null!==t?e=[e,t]:(e=null,Fn=a)}else e=null,Fn=a;return null===(e=null!==e?function(){var e=Vn.tag;try{Vn=new jn(Vn.uri,Vn.display_name,Vn.params),e&&Vn.setParam("tag",e)}catch(e){Vn=-1}}():e)&&(Fn=o),e},to_param:an,Via:function(){var e,t,n,r,i,o=Fn;if(null!==(e=sn())){for(t=[],i=Fn,null!==(n=$())&&null!==(r=sn())?n=[n,r]:(n=null,Fn=i);null!==n;)t.push(n),i=Fn,null!==(n=$())&&null!==(r=sn())?n=[n,r]:(n=null,Fn=i);null!==t?e=[e,t]:(e=null,Fn=o)}else e=null,Fn=o;return e},via_param:sn,via_params:ln,via_ttl:cn,via_maddr:un,via_received:dn,via_branch:fn,response_port:pn,rport:hn,sent_protocol:gn,protocol_name:mn,transport:vn,sent_by:bn,via_host:_n,via_port:yn,ttl:wn,WWW_Authenticate:Dt,Session_Expires:function(){var e,t,n,r,i,o=Fn;if(null!==(e=xn())){for(t=[],i=Fn,null!==(n=N())&&null!==(r=kn())?n=[n,r]:(n=null,Fn=i);null!==n;)t.push(n),i=Fn,null!==(n=N())&&null!==(r=kn())?n=[n,r]:(n=null,Fn=i);null!==t?e=[e,t]:(e=null,Fn=o)}else e=null,Fn=o;return e},s_e_expires:xn,s_e_params:kn,s_e_refresher:Sn,extension_header:function(){var e,t,n,r=Fn;return null!==(e=C())&&null!==(t=y())&&null!==(n=Cn())?e=[e,t,n]:(e=null,Fn=r),e},header_value:Cn,message_body:function(){for(var e=[],t=c();null!==t;)e.push(t),t=c();return e},uuid_URI:function(){var e,n,i=Fn;return"uuid:"===t.substr(Fn,5)?(e="uuid:",Fn+=5):(e=null,r('"uuid:"')),null!==e&&null!==(n=Tn())?e=[e,n]:(e=null,Fn=i),e},uuid:Tn,hex4:En,hex8:In,hex12:An,Refer_To:function(){var e,t,n,r,i,o=Fn,a=Fn;if(null!==(e=null===(e=G())?ft():e)){for(t=[],i=Fn,null!==(n=N())&&null!==(r=_t())?n=[n,r]:(n=null,Fn=i);null!==n;)t.push(n),i=Fn,null!==(n=N())&&null!==(r=_t())?n=[n,r]:(n=null,Fn=i);null!==t?e=[e,t]:(e=null,Fn=a)}else e=null,Fn=a;return null===(e=null!==e?function(){try{Vn=new jn(Vn.uri,Vn.display_name,Vn.params)}catch(e){Vn=-1}}():e)&&(Fn=o),e},Replaces:function(){var e,t,n,r,i,o=Fn;if(null!==(e=Rn())){for(t=[],i=Fn,null!==(n=N())&&null!==(r=On())?n=[n,r]:(n=null,Fn=i);null!==n;)t.push(n),i=Fn,null!==(n=N())&&null!==(r=On())?n=[n,r]:(n=null,Fn=i);null!==t?e=[e,t]:(e=null,Fn=o)}else e=null,Fn=o;return e},call_id:Rn,replaces_param:On,to_tag:Ln,from_tag:Pn,early_flag:Mn};if(void 0!==n){if(void 0===$n[n])throw new Error("Invalid rule name: "+e(n)+".")}else n="CRLF";var Nn,Dn,Fn=0,qn=0,Un=[],Bn=z(),jn=j(),Vn={};return null===$n[n]()||Fn!==t.length?(Nn=($n=Math.max(Fn,qn))<t.length?t.charAt($n):null,Dn=function(){for(var e=1,n=1,r=!1,i=0;i<Math.max(Fn,qn);i++)var o=t.charAt(i),r="\n"===o?(r||e++,!(n=1)):"\r"===o||"\u2028"===o||"\u2029"===o?(e++,n=1,!0):(n++,!1);return{line:e,column:n}}(),new this.SyntaxError(function(e){e.sort();for(var t=null,n=[],r=0;r<e.length;r++)e[r]!==t&&(n.push(e[r]),t=e[r]);return n}(Un),Nn,$n,Dn.line,Dn.column),-1):Vn},toSource:function(){return this._source},SyntaxError:function(t,n,r,i,o){this.name="SyntaxError",this.expected=t,this.found=n,this.message=function(t,n){var r;switch(t.length){case 0:r="end of input";break;case 1:r=t[0];break;default:r=t.slice(0,t.length-1).join(", ")+" or "+t[t.length-1]}return"Expected "+r+" but "+(n?e(n):"end of input")+" found."}(t,n),this.offset=r,this.line=i,this.column=o}}).SyntaxError.prototype=Error.prototype,Er=t),Er;var t}function z(){function e(n,r,i,o){var s,l,c=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},u=5<arguments.length&&void 0!==arguments[5]?arguments[5]:{};if(a(this,e),!i)throw new TypeError('missing or invalid "host" parameter');for(s in this._parameters={},this._headers={},this._scheme=n||t.SIP,this._user=r,this._host=i,this._port=o,c)Object.prototype.hasOwnProperty.call(c,s)&&this.setParam(s,c[s]);for(l in u)Object.prototype.hasOwnProperty.call(u,l)&&this.setHeader(l,u[l])}var t,n,r;return Rr||(Rr=1,t=Sr,n=W(),r=H(),l(e,[{key:"scheme",get:function(){return this._scheme},set:function(e){this._scheme=e.toLowerCase()}},{key:"user",get:function(){return this._user},set:function(e){this._user=e}},{key:"host",get:function(){return this._host},set:function(e){this._host=e.toLowerCase()}},{key:"port",get:function(){return this._port},set:function(e){this._port=0===e?e:parseInt(e,10)||null}},{key:"setParam",value:function(e,t){e&&(this._parameters[e.toLowerCase()]=null==t?null:t.toString())}},{key:"getParam",value:function(e){if(e)return this._parameters[e.toLowerCase()]}},{key:"hasParam",value:function(e){if(e)return!!this._parameters.hasOwnProperty(e.toLowerCase())}},{key:"deleteParam",value:function(e){var t;if(e=e.toLowerCase(),this._parameters.hasOwnProperty(e))return t=this._parameters[e],delete this._parameters[e],t}},{key:"clearParams",value:function(){this._parameters={}}},{key:"setHeader",value:function(e,t){this._headers[n.headerize(e)]=Array.isArray(t)?t:[t]}},{key:"getHeader",value:function(e){if(e)return this._headers[n.headerize(e)]}},{key:"hasHeader",value:function(e){if(e)return!!this._headers.hasOwnProperty(n.headerize(e))}},{key:"deleteHeader",value:function(e){var t;if(e=n.headerize(e),this._headers.hasOwnProperty(e))return t=this._headers[e],delete this._headers[e],t}},{key:"clearHeaders",value:function(){this._headers={}}},{key:"clone",value:function(){return new e(this._scheme,this._user,this._host,this._port,JSON.parse((0,Z.default)(this._parameters)),JSON.parse((0,Z.default)(this._headers)))}},{key:"toString",value:function(){var e,t,r=[],i="".concat(this._scheme,":");for(e in this._user&&(i+="".concat(n.escapeUser(this._user),"@")),i+=this._host,!this._port&&0!==this._port||(i+=":".concat(this._port)),this._parameters)Object.prototype.hasOwnProperty.call(this._parameters,e)&&(i+=";".concat(e),null!==this._parameters[e]&&(i+="=".concat(this._parameters[e])));for(t in this._headers)if(Object.prototype.hasOwnProperty.call(this._headers,t)){var o,a=R(this._headers[t]);try{for(a.s();!(o=a.n()).done;){var s=o.value;r.push("".concat(t,"=").concat(s))}}catch(r){a.e(r)}finally{a.f()}}return 0<r.length&&(i+="?".concat(r.join("&"))),i}},{key:"toAor",value:function(e){var t="".concat(this._scheme,":");return this._user&&(t+="".concat(n.escapeUser(this._user),"@")),t+=this._host,e&&(this._port||0===this._port)&&(t+=":".concat(this._port)),t}}],[{key:"parse",value:function(e){return-1!==(e=r.parse(e,"SIP_URI"))?e:void 0}}]),Ar=e),Ar}function W(){var e,t,n,r,i,a;return Or||(Or=1,e=Sr,t=z(),n=H(),Fr.str_utf8_length=function(e){return unescape(encodeURIComponent(e)).length},r=Fr.isFunction=function(e){return void 0!==e&&"[object Function]"===Object.prototype.toString.call(e)},Fr.isString=function(e){return void 0!==e&&"[object String]"===Object.prototype.toString.call(e)},Fr.isDecimal=function(e){return!isNaN(e)&&parseFloat(e)===parseInt(e,10)},Fr.isEmpty=function(e){return null===e||""===e||void 0===e||Array.isArray(e)&&0===e.length||"number"==typeof e&&isNaN(e)},Fr.hasMethods=function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var o=0,a=n;o<a.length;o++){var s=a[o];if(r(e[s]))return!1}return!0},i=Fr.createRandomToken=function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:32,n="",r=0;r<e;r++)n+=(Math.random()*t|0).toString(t);return n},Fr.newTag=function(){return i(10)},Fr.newUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},Fr.hostType=function(e){return e&&-1!==(e=n.parse(e,"host"))?e.host_type:void 0},a=Fr.escapeUser=function(e){return encodeURIComponent(decodeURIComponent(e)).replace(/%3A/gi,":").replace(/%2B/gi,"+").replace(/%3F/gi,"?").replace(/%2F/gi,"/")},Fr.normalizeTarget=function(n,r){if(n){if(n instanceof t)return n;if("string"==typeof n){var i,o,s,l=n.split("@");switch(l.length){case 1:if(!r)return;i=n,o=r;break;case 2:i=l[0],o=l[1];break;default:i=l.slice(0,l.length-1).join("@"),o=l[l.length-1]}return i=i.replace(/^(sips?|tel):/i,""),/^[-.()]*\+?[0-9\-.()]+$/.test(i)&&(i=i.replace(/[-.()]/g,"")),n="".concat(e.SIP,":").concat(a(i),"@").concat(o),(s=t.parse(n))?s:void 0}}},Fr.headerize=function(e){for(var t={"Call-Id":"Call-ID",Cseq:"CSeq","Www-Authenticate":"WWW-Authenticate"},n=e.toLowerCase().replace(/_/g,"-").split("-"),r="",i=n.length,o=0;o<i;o++)0!==o&&(r+="-"),r+=n[o].charAt(0).toUpperCase()+n[o].substring(1);return r=t[r]?t[r]:r},Fr.sipErrorCause=function(t){for(var n in e.SIP_ERROR_CAUSES)if(-1!==e.SIP_ERROR_CAUSES[n].indexOf(t))return e.causes[n];return e.causes.SIP_FAILURE_CODE},Fr.getRandomTestNetIP=function(){return"192.0.2.".concat(Math.floor(254*Math.random()+1))},Fr.calculateMD5=function(e){function t(e,t){return e<<t|e>>>32-t}function n(e,t){var n=2147483648&e,r=2147483648&t,i=1073741824&e,o=1073741824&t,e=(1073741823&e)+(1073741823&t);return i&o?2147483648^e^n^r:i|o?1073741824&e?3221225472^e^n^r:1073741824^e^n^r:e^n^r}function r(e,r,i,o,a,s,l){return e=n(e,n(n(r&i|~r&o,a),l)),n(t(e,s),r)}function i(e,r,i,o,a,s,l){return e=n(e,n(n(r&o|i&~o,a),l)),n(t(e,s),r)}function o(e,r,i,o,a,s,l){return e=n(e,n(n(r^i^o,a),l)),n(t(e,s),r)}function a(e,r,i,o,a,s,l){return e=n(e,n(n(i^(r|~o),a),l)),n(t(e,s),r)}function s(e){for(var t="",n="",r=0;r<=3;r++)t+=(n="0".concat((e>>>8*r&255).toString(16))).substr(n.length-2,2);return t}for(var l,c,u,d,f=function(e){for(var t,n=e.length,r=n+8,r=16*((r-r%64)/64+1),i=new Array(r-1),o=0,a=0;a<n;)o=a%4*8,i[t=(a-a%4)/4]=i[t]|e.charCodeAt(a)<<o,a++;return i[t=(a-a%4)/4]=i[t]|128<<(o=a%4*8),i[r-2]=n<<3,i[r-1]=n>>>29,i}(e=function(e){for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):(127<r&&r<2048?t+=String.fromCharCode(r>>6|192):t=(t+=String.fromCharCode(r>>12|224))+String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t}(e)),p=1732584193,h=4023233417,g=2562383102,m=271733878,v=0;v<f.length;v+=16)p=r(l=p,c=h,u=g,d=m,f[v+0],7,3614090360),m=r(m,p,h,g,f[v+1],12,3905402710),g=r(g,m,p,h,f[v+2],17,606105819),h=r(h,g,m,p,f[v+3],22,3250441966),p=r(p,h,g,m,f[v+4],7,4118548399),m=r(m,p,h,g,f[v+5],12,1200080426),g=r(g,m,p,h,f[v+6],17,2821735955),h=r(h,g,m,p,f[v+7],22,4249261313),p=r(p,h,g,m,f[v+8],7,1770035416),m=r(m,p,h,g,f[v+9],12,2336552879),g=r(g,m,p,h,f[v+10],17,4294925233),h=r(h,g,m,p,f[v+11],22,2304563134),p=r(p,h,g,m,f[v+12],7,1804603682),m=r(m,p,h,g,f[v+13],12,4254626195),g=r(g,m,p,h,f[v+14],17,2792965006),p=i(p,h=r(h,g,m,p,f[v+15],22,1236535329),g,m,f[v+1],5,4129170786),m=i(m,p,h,g,f[v+6],9,3225465664),g=i(g,m,p,h,f[v+11],14,643717713),h=i(h,g,m,p,f[v+0],20,3921069994),p=i(p,h,g,m,f[v+5],5,3593408605),m=i(m,p,h,g,f[v+10],9,38016083),g=i(g,m,p,h,f[v+15],14,3634488961),h=i(h,g,m,p,f[v+4],20,3889429448),p=i(p,h,g,m,f[v+9],5,568446438),m=i(m,p,h,g,f[v+14],9,3275163606),g=i(g,m,p,h,f[v+3],14,4107603335),h=i(h,g,m,p,f[v+8],20,1163531501),p=i(p,h,g,m,f[v+13],5,2850285829),m=i(m,p,h,g,f[v+2],9,4243563512),g=i(g,m,p,h,f[v+7],14,1735328473),p=o(p,h=i(h,g,m,p,f[v+12],20,2368359562),g,m,f[v+5],4,4294588738),m=o(m,p,h,g,f[v+8],11,2272392833),g=o(g,m,p,h,f[v+11],16,1839030562),h=o(h,g,m,p,f[v+14],23,4259657740),p=o(p,h,g,m,f[v+1],4,2763975236),m=o(m,p,h,g,f[v+4],11,1272893353),g=o(g,m,p,h,f[v+7],16,4139469664),h=o(h,g,m,p,f[v+10],23,3200236656),p=o(p,h,g,m,f[v+13],4,681279174),m=o(m,p,h,g,f[v+0],11,3936430074),g=o(g,m,p,h,f[v+3],16,3572445317),h=o(h,g,m,p,f[v+6],23,76029189),p=o(p,h,g,m,f[v+9],4,3654602809),m=o(m,p,h,g,f[v+12],11,3873151461),g=o(g,m,p,h,f[v+15],16,530742520),p=a(p,h=o(h,g,m,p,f[v+2],23,3299628645),g,m,f[v+0],6,4096336452),m=a(m,p,h,g,f[v+7],10,1126891415),g=a(g,m,p,h,f[v+14],15,2878612391),h=a(h,g,m,p,f[v+5],21,4237533241),p=a(p,h,g,m,f[v+12],6,1700485571),m=a(m,p,h,g,f[v+3],10,2399980690),g=a(g,m,p,h,f[v+10],15,4293915773),h=a(h,g,m,p,f[v+1],21,2240044497),p=a(p,h,g,m,f[v+8],6,1873313359),m=a(m,p,h,g,f[v+15],10,4264355552),g=a(g,m,p,h,f[v+6],15,2734768916),h=a(h,g,m,p,f[v+13],21,1309151649),p=a(p,h,g,m,f[v+4],6,4149444226),m=a(m,p,h,g,f[v+11],10,3174756917),g=a(g,m,p,h,f[v+2],15,718787259),h=a(h,g,m,p,f[v+9],21,3951481745),p=n(p,l),h=n(h,c),g=n(g,u),m=n(m,d);return(s(p)+s(h)+s(g)+s(m)).toLowerCase()},Fr.closeMediaStream=function(e){if(e)try{if(e.getTracks){var t,n=R(e.getTracks());try{for(n.s();!(t=n.n()).done;)t.value.stop()}catch(e){n.e(e)}finally{n.f()}}else{var r,i=R(e.getAudioTracks());try{for(i.s();!(r=i.n()).done;)r.value.stop()}catch(e){i.e(e)}finally{i.f()}var a,s=R(e.getVideoTracks());try{for(s.s();!(a=s.n()).done;)a.value.stop()}catch(e){s.e(e)}finally{s.f()}}}catch(t){"function"!=typeof e.stop&&"object"!==o(e.stop)||e.stop()}},Fr.cloneArray=function(e){return e&&e.slice()||[]},Fr.cloneObject=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return e&&(0,K.default)({},e)||t}),Fr}function X(){}function J(){J.init.call(this)}function ee(e){return void 0===e._maxListeners?J.defaultMaxListeners:e._maxListeners}function ne(e,t,n,r){var i,o;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');return(i=e._events)?(i.newListener&&(e.emit("newListener",t,n.listener||n),i=e._events),o=i[t]):(i=e._events=new X,e._eventsCount=0),o?("function"==typeof o?o=i[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),!o.warned&&(r=ee(e))&&0<r&&o.length>r&&(o.warned=!0,(r=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",r.emitter=e,r.type=t,r.count=o.length,r=r,"function"==typeof console.warn?console.warn(r):console.log(r))):(o=i[t]=n,++e._eventsCount),e}function ie(e,t,n){function r(){e.removeListener(t,r),i||(i=!0,n.apply(e,arguments))}var i=!1;return r.listener=n,r}function ae(e){var t=this._events;if(t){if("function"==typeof(t=t[e]))return 1;if(t)return t.length}return 0}function le(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}function ue(){throw new Error("setTimeout has not been defined")}function fe(){throw new Error("clearTimeout has not been defined")}function he(e){if(Ur===setTimeout)return setTimeout(e,0);if((Ur===ue||!Ur)&&setTimeout)return(Ur=setTimeout)(e,0);try{return Ur(e,0)}catch(t){try{return Ur.call(null,e,0)}catch(t){return Ur.call(this,e,0)}}}function me(){Hr&&jr&&(Hr=!1,jr.length?Vr=jr.concat(Vr):Yr=-1,Vr.length&&be())}function be(){if(!Hr){var e=he(me);Hr=!0;for(var t=Vr.length;t;){for(jr=Vr,Vr=[];++Yr<t;)jr&&jr[Yr].run();Yr=-1,t=Vr.length}jr=null,Hr=!1,function(e){if(Br===clearTimeout)return clearTimeout(e);if((Br===fe||!Br)&&clearTimeout)return(Br=clearTimeout)(e);try{Br(e)}catch(t){try{return Br.call(null,e)}catch(t){return Br.call(this,e)}}}(e)}}function ye(e,t){this.fun=e,this.array=t}function xe(){}function Se(){pi=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,n=e.length;t<n;++t)ui[t]=e[t],di[e.charCodeAt(t)]=t;di["-".charCodeAt(0)]=62,di["_".charCodeAt(0)]=63}function Te(e){var t;pi||Se();for(var n=e.length,r=n%3,i="",o=[],a=0,s=n-r;a<s;a+=16383)o.push(function(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(ui[(r=r)>>18&63]+ui[r>>12&63]+ui[r>>6&63]+ui[63&r]);return i.join("")}(e,a,s<a+16383?s:a+16383));return 1==r?(t=e[n-1],i=(i+=ui[t>>2])+ui[t<<4&63]+"=="):2==r&&(t=(e[n-2]<<8)+e[n-1],i=(i=(i+=ui[t>>10])+ui[t>>4&63])+ui[t<<2&63]+"="),o.push(i),o.join("")}function Ie(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,c=l>>1,u=-7,d=n?i-1:0,f=n?-1:1,i=e[t+d];for(d+=f,o=i&(1<<-u)-1,i>>=-u,u+=s;0<u;o=256*o+e[t+d],d+=f,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;0<u;a=256*a+e[t+d],d+=f,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(i?-1:1);a+=Math.pow(2,r),o-=c}return(i?-1:1)*a*Math.pow(2,o-r)}function Re(e,t,n,r,i,o){var a,s,l=8*o-i-1,c=(1<<l)-1,u=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,o=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(r=Math.pow(2,-a))<1&&(a--,r*=2),2<=(t+=1<=a+u?d/r:d*Math.pow(2,1-u))*r&&(a++,r/=2),c<=a+u?(s=0,a=c):1<=a+u?(s=(t*r-1)*Math.pow(2,i),a+=u):(s=t*Math.pow(2,u-1)*Math.pow(2,i),a=0));8<=i;e[n+f]=255&s,f+=p,s/=256,i-=8);for(a=a<<i|s,l+=i;0<l;e[n+f]=255&a,f+=p,a/=256,l-=8);e[n+f-p]|=128*o}function Oe(){return Pe.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Le(e,t){if(Oe()<t)throw new RangeError("Invalid typed array length");return Pe.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=Pe.prototype:(e=null===e?new Pe(t):e).length=t,e}function Pe(e,t,n){if(!(Pe.TYPED_ARRAY_SUPPORT||this instanceof Pe))return new Pe(e,t,n);if("number"!=typeof e)return Me(this,e,t,n);if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return Ne(this,e)}function Me(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer){var i=e,o=t,a=n;if(o.byteLength,a<0||o.byteLength<a)throw new RangeError("'offset' is out of bounds");if(o.byteLength<a+(r||0))throw new RangeError("'length' is out of bounds");return o=void 0===a&&void 0===r?new Uint8Array(o):void 0===r?new Uint8Array(o,a):new Uint8Array(o,a,r),Pe.TYPED_ARRAY_SUPPORT?(i=o).__proto__=Pe.prototype:i=De(i,o),i}if("string"==typeof t){if(a=e,r=t,o=n,Pe.isEncoding(o="string"==typeof o&&""!==o?o:"utf8"))return(r=(a=Le(a,i=0|Ue(r,o))).write(r,o))!==i?a.slice(0,r):a;throw new TypeError('"encoding" must be a valid string encoding')}var s,n=e,r=t;if(qe(r))return 0!==(n=Le(n,s=0|Fe(r.length))).length&&r.copy(n,0,0,s),n;if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||(s=r.length)!=s?Le(n,0):De(n,r);if("Buffer"===r.type&&gi(r.data))return De(n,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function $e(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function Ne(e,t){if($e(t),e=Le(e,t<0?0:0|Fe(t)),!Pe.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function De(e,t){var n=t.length<0?0:0|Fe(t.length);e=Le(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function Fe(e){if(e>=Oe())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Oe().toString(16)+" bytes");return 0|e}function qe(e){return null!=e&&e._isBuffer}function Ue(e,t){if(qe(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;var n=(e="string"!=typeof e?""+e:e).length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return et(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return tt(e).length;default:if(r)return et(e).length;t=(""+t).toLowerCase(),r=!0}}function Be(e,t,n){var r,i=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((n=void 0===n||n>this.length?this.length:n)<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":var o=this,a=t,s=n,l=o.length;(!s||s<0||l<s)&&(s=l);for(var c="",u=a=!a||a<0?0:a;u<s;++u)c+=function(e){return e<16?"0"+e.toString(16):e.toString(16)}(o[u]);return c;case"utf8":case"utf-8":return ze(this,t,n);case"ascii":var d=this,l=t,f=n,p="";f=Math.min(d.length,f);for(var h=l;h<f;++h)p+=String.fromCharCode(127&d[h]);return p;case"latin1":case"binary":var g=this,a=t,m=n,v="";m=Math.min(g.length,m);for(var b=a;b<m;++b)v+=String.fromCharCode(g[b]);return v;case"base64":return _=this,r=n,Te(0===(y=t)&&r===_.length?_:_.slice(y,r));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var _=t,y=n,w=this.slice(_,y),x="",k=0;k<w.length;k+=2)x+=String.fromCharCode(w[k]+256*w[k+1]);return x;default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function je(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Ve(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,(n=(n=isNaN(n)?i?0:e.length-1:n)<0?e.length+n:n)>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if(qe(t="string"==typeof t?Pe.from(t,r):t))return 0===t.length?-1:He(e,t,n,r,i);if("number"==typeof t)return t&=255,Pe.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(i?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,n):He(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function He(e,t,n,r,i){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s/=a=2,l/=2,n/=2}if(i)for(var c=-1,u=n;u<s;u++)if(o(e,u)===o(t,-1===c?0:u-c)){if(u-(c=-1===c?u:c)+1===l)return c*a}else-1!==c&&(u-=u-c),c=-1;else for(u=n=s<n+l?s-l:n;0<=u;u--){for(var d=!0,f=0;f<l;f++)if(o(e,u+f)!==o(t,f)){d=!1;break}if(d)return u}return-1}function Ye(e,t,n,r){return nt(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function ze(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,l,c=e[i],u=null,d=239<c?4:223<c?3:191<c?2:1;if(i+d<=n)switch(d){case 1:c<128&&(u=c);break;case 2:128==(192&(o=e[i+1]))&&127<(l=(31&c)<<6|63&o)&&(u=l);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&2047<(l=(15&c)<<12|(63&o)<<6|63&a)&&(l<55296||57343<l)&&(u=l);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&65535<(l=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)&&l<1114112&&(u=l)}null===u?(u=65533,d=1):65535<u&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=d}var f=r,p=f.length;if(p<=mi)return String.fromCharCode.apply(String,f);for(var h="",g=0;g<p;)h+=String.fromCharCode.apply(String,f.slice(g,g+=mi));return h}function Ge(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function We(e,t,n,r,i,o){if(!qe(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function Ke(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function Xe(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function Ze(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function Je(e,t,n,r,i){return i||Ze(e,0,n,4),Re(e,t,n,r,23,4),n+4}function Qe(e,t,n,r,i){return i||Ze(e,0,n,8),Re(e,t,n,r,52,8),n+8}function et(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if(55295<(n=e.charCodeAt(a))&&n<57344){if(!i){if(56319<n){-1<(t-=3)&&o.push(239,191,189);continue}if(a+1===r){-1<(t-=3)&&o.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(t-=3)&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(t-=3)&&o.push(239,191,189);if(i=null,n<128){if(--t<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function tt(e){var t=function(e){if((e=((t=e).trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(bi,"")).length<2)return"";for(var t;e.length%4!=0;)e+="=";return e}(e);pi||Se();var n,e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");for(var r="="===t[e-2]?2:"="===t[e-1]?1:0,i=new fi(3*e/4-r),o=0<r?e-4:e,a=0,s=0;s<o;s+=4)n=di[t.charCodeAt(s)]<<18|di[t.charCodeAt(s+1)]<<12|di[t.charCodeAt(s+2)]<<6|di[t.charCodeAt(s+3)],i[a++]=n>>16&255,i[a++]=n>>8&255,i[a++]=255&n;return 2==r?(n=di[t.charCodeAt(s)]<<2|di[t.charCodeAt(s+1)]>>4,i[a++]=255&n):1==r&&(n=di[t.charCodeAt(s)]<<10|di[t.charCodeAt(s+1)]<<4|di[t.charCodeAt(s+2)]>>2,i[a++]=n>>8&255,i[a++]=255&n),i}function nt(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function rt(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function it(e){if(!bt(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(st(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,i=r.length,o=String(e).replace(_i,function(e){if("%%"===e)return"%";if(i<=n)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return(0,Z.default)(r[n++])}catch(e){return"[Circular]"}default:return e}}),a=r[n];n<i;a=r[++n])gt(a)||!xt(a)?o+=" "+a:o+=" "+st(a);return o}function ot(e,t){var n;return yt(qr.process)?function(){return ot(e,t).apply(this,arguments)}:!0===ii.noDeprecation?e:(n=!1,function(){if(!n){if(ii.throwDeprecation)throw new Error(t);ii.traceDeprecation?console.trace(t):console.error(t),n=!0}return e.apply(this,arguments)})}function at(e){return yt(vi)&&(vi=ii.env.NODE_DEBUG||""),e=e.toUpperCase(),yi[e]||(new RegExp("\\b"+e+"\\b","i").test(vi)?yi[e]=function(){var t=it.apply(null,arguments);console.error("%s %d: %s",e,0,t)}:yi[e]=function(){}),yi[e]}function st(e,t){var n={seen:[],stylize:ct};return 3<=arguments.length&&(n.depth=arguments[2]),4<=arguments.length&&(n.colors=arguments[3]),ht(t)?n.showHidden=t:t&&Ot(n,t),yt(n.showHidden)&&(n.showHidden=!1),yt(n.depth)&&(n.depth=2),yt(n.colors)&&(n.colors=!1),yt(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=lt),ut(n,e,n.depth)}function lt(e,t){return t=st.styles[t],t?"["+st.colors[t][0]+"m"+e+"["+st.colors[t][1]+"m":e}function ct(e,t){return e}function ut(e,t,n){if(e.customInspect&&t&&Ct(t.inspect)&&t.inspect!==st&&(!t.constructor||t.constructor.prototype!==t))return bt(r=t.inspect(n,e))?r:ut(e,r,n);r=e;var r,i=yt(a=t)?r.stylize("undefined","undefined"):bt(a)?(i="'"+(0,Z.default)(a).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",r.stylize(i,"string")):vt(a)?r.stylize(""+a,"number"):ht(a)?r.stylize(""+a,"boolean"):gt(a)?r.stylize("null","null"):void 0;if(i)return i;var o,a=(0,Ee.default)(t),s=(o={},a.forEach(function(e,t){o[e]=!0}),o);if(e.showHidden&&(a=(0,B.default)(t)),St(t)&&(0<=a.indexOf("message")||0<=a.indexOf("description")))return dt(t);if(0===a.length){if(Ct(t))return u=t.name?": "+t.name:"",e.stylize("[Function"+u+"]","special");if(wt(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(kt(t))return e.stylize(Date.prototype.toString.call(t),"date");if(St(t))return dt(t)}var l,c,u="",d=!1,f=["{","}"];return pt(t)&&(d=!0,f=["[","]"]),Ct(t)&&(u=" [Function"+(t.name?": "+t.name:"")+"]"),wt(t)&&(u=" "+RegExp.prototype.toString.call(t)),kt(t)&&(u=" "+Date.prototype.toUTCString.call(t)),St(t)&&(u=" "+dt(t)),0!==a.length||d&&0!=t.length?n<0?wt(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),a=d?function(e,t,n,r,i){for(var o=[],a=0,s=t.length;a<s;++a)Lt(t,String(a))?o.push(ft(e,t,n,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(ft(e,t,n,r,i,!0))}),o}(e,t,n,s,a):a.map(function(r){return ft(e,t,n,s,r,d)}),e.seen.pop(),l=u,c=f,60<(a=a).reduce(function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)?c[0]+(""===l?"":l+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+l+" "+a.join(", ")+" "+c[1]):f[0]+u+f[1]}function dt(e){return"["+Error.prototype.toString.call(e)+"]"}function ft(e,t,n,r,i,o){var a,s;if((t=(0,Ce.default)(t,i)||{value:t[i]}).get?s=t.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):t.set&&(s=e.stylize("[Setter]","special")),Lt(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(t.value)<0?-1<(s=gt(n)?ut(e,t.value,null):ut(e,t.value,n-1)).indexOf("\n")&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),yt(a)){if(o&&i.match(/^\d+$/))return s;a=(a=(0,Z.default)(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),e.stylize(a,"string"))}return a+": "+s}function pt(e){return Array.isArray(e)}function ht(e){return"boolean"==typeof e}function gt(e){return null===e}function mt(e){return null==e}function vt(e){return"number"==typeof e}function bt(e){return"string"==typeof e}function _t(e){return"symbol"==(void 0===e?"undefined":(0,Ae.default)(e))}function yt(e){return void 0===e}function wt(e){return xt(e)&&"[object RegExp]"===It(e)}function xt(e){return"object"==(void 0===e?"undefined":(0,Ae.default)(e))&&null!==e}function kt(e){return xt(e)&&"[object Date]"===It(e)}function St(e){return xt(e)&&("[object Error]"===It(e)||e instanceof Error)}function Ct(e){return"function"==typeof e}function Tt(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==(void 0===e?"undefined":(0,Ae.default)(e))||void 0===e}function Et(e){return Pe.isBuffer(e)}function It(e){return Object.prototype.toString.call(e)}function At(e){return e<10?"0"+e.toString(10):e.toString(10)}function Rt(){var e,t;console.log("%s - %s",(e=new Date,t=[At(e.getHours()),At(e.getMinutes()),At(e.getSeconds())].join(":"),[e.getDate(),Ei[e.getMonth()],t].join(" ")),it.apply(null,arguments))}function Ot(e,t){if(t&&xt(t))for(var n=(0,Ee.default)(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}function Lt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Pt(e){return Ti.add(e),!1}function Mt(e){return Ci.add(e),!0}function $t(e,t,n,r){void 0===r&&(r=!1);var i,o=Li[Oi]=null!=(o=Li[Oi])?o:{version:Ii};return!r&&o[e]?(i=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e),n.error(i.stack||i.message),!1):o.version!==Ii?(i=new Error("@opentelemetry/api: All API registration versions must match"),n.error(i.stack||i.message),!1):(o[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v1.2.0."),!0)}function Nt(e){var t=null==(t=Li[Oi])?void 0:t.version;return t&&Ri(t)&&null!=(t=Li[Oi])?t[e]:void 0}function Dt(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v1.2.0."),(t=Li[Oi])&&delete t[e]}function Ft(e){this._namespace=e.namespace||"DiagComponentLogger"}function qt(e,t,n){var r=Nt("diag");if(r)return n.unshift(t),r[e].apply(r,n)}function Ut(e){this._entries=e?new re.default(e):new re.default}function Bt(){function e(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=Nt("diag");if(r)return r[e].apply(r,t)}}var t=this;t.setLogger=function(e,n){function r(e,t){return e=s[e],"function"==typeof e&&t<=a?e.bind(s):function(){}}var i,o,a,s;return void 0===n&&(n=Pi.INFO),e===t?(o=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation"),t.error(null!=(i=o.stack)?i:o.message),!1):(i=Nt("diag"),s=e,(a=n)<Pi.NONE?a=Pi.NONE:a>Pi.ALL&&(a=Pi.ALL),s=s||{},o={error:r("error",Pi.ERROR),warn:r("warn",Pi.WARN),info:r("info",Pi.INFO),debug:r("debug",Pi.DEBUG),verbose:r("verbose",Pi.VERBOSE)},i&&(n=null!=(e=(new Error).stack)?e:"<failed to generate stacktrace>",i.warn("Current logger will be overwritten from "+n),o.warn("Current logger will overwrite one already registered from "+n)),$t("diag",o,t,!0))},t.disable=function(){Dt("diag",t)},t.createComponentLogger=function(e){return new Mi(e)},t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}function jt(e){return void 0===e&&(e={}),new Ni(new re.default((0,$.default)(e)))}function Vt(e){return(0,D.default)(e)}function Ht(){}function Yt(){}function zt(e){this._spanContext=e=void 0===e?Wi:e}function Gt(e){return e.getValue(Xi)||void 0}function Wt(){return Gt(Hi.getInstance().active())}function Kt(e,t){return e.setValue(Xi,t)}function Xt(e){return e.deleteValue(Xi)}function Zt(e,t){return Kt(e,new Ki(t))}function Jt(e){return null==(e=Gt(e))?void 0:e.spanContext()}function Qt(e){return t=e.traceId,Zi.test(t)&&t!==Gi&&(t=e.spanId,Ji.test(t)&&t!==zi);var t}function en(e){return new Ki(e)}function tn(){}function nn(){}function rn(){}function on(e,t,n,r){this._provider=e,this.name=t,this.version=n,this.options=r}function an(){}function sn(){this._proxyTracerProvider=new io,this.wrapSpanContext=en,this.isSpanContextValid=Qt,this.deleteSpan=Xt,this.getSpan=Gt,this.getActiveSpan=Wt,this.getSpanContext=Jt,this.setSpan=Kt,this.setSpanContext=Zt}function ln(e){return e.getValue(ao)||void 0}function cn(e,t){return e.setValue(ao,t)}function un(e){return e.deleteValue(ao)}function dn(){this.createBaggage=jt,this.getBaggage=ln,this.setBaggage=cn,this.deleteBaggage=un}function fn(e){try{t=e,uo.error("string"==typeof(n=t)?n:(0,Z.default)(function(){for(var e={},t=n;null!==t;)(0,B.default)(t).forEach(function(n){var r;e[n]||(r=t[n])&&(e[n]=String(r))}),t=(0,se.default)(t);return e}()))}catch(e){}var t,n}function pn(){var e=function(e){var t,n,r,i,o,a,s,l={};for(t in go){var c,u=t;"OTEL_LOG_LEVEL"===u?(a=l,"string"==typeof(s=(s=e)[o=u])&&null!=(s=mo[s.toUpperCase()])&&(a[o]=s)):-1<po.indexOf(u)?(a=l,(s=o=void 0)===o&&(o=-1/0),void 0===s&&(s=1/0),void 0!==(i=e)[r=u]&&(i=Number(i[r]),isNaN(i)||(a[r]=i<o?o:s<i?s:i))):-1<ho.indexOf(u)?(r=l,(i=void 0)===i&&(i=","),"string"==typeof(n=(n=e)[c=u])&&(r[c]=n.split(i).map(function(e){return e.trim()}))):null!=(c=e[u])&&(l[u]=String(c))}return l}(fo);return(0,K.default)({},go,e)}function hn(){}function gn(){var e=this;this._promise=new O.default(function(t,n){e._resolve=t,e._reject=n})}function mn(e,t){this._callback=e,this._that=t,this._isCalled=!1,this._deferred=new wo}function vn(e,t,n,r){return new(n=n||O.default)(function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})}function bn(e,t){function n(n){return function(s){var l=[n,s];if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,(l=o?[2&l[0],o.value]:l)[0]){case 0:case 1:o=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,i=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!((o=0<(o=a.trys).length&&o[o.length-1])||6!==l[0]&&2!==l[0])){a=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3]))a.label=l[1];else if(6===l[0]&&a.label<o[1])a.label=o[1],o=l;else{if(!(o&&a.label<o[2])){o[2]&&a.ops.pop(),a.trys.pop();continue}a.label=o[2],a.ops.push(l)}}l=t.call(e,a)}catch(s){l=[6,s],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var r,i,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s={next:n(0),throw:n(1),return:n(2)};return"function"==typeof ge.default&&(s[pe.default]=function(){return this}),s}function _n(e,t){function n(n){return function(s){var l=[n,s];if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,(l=o?[2&l[0],o.value]:l)[0]){case 0:case 1:o=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,i=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!((o=0<(o=a.trys).length&&o[o.length-1])||6!==l[0]&&2!==l[0])){a=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3]))a.label=l[1];else if(6===l[0]&&a.label<o[1])a.label=o[1],o=l;else{if(!(o&&a.label<o[2])){o[2]&&a.ops.pop(),a.trys.pop();continue}a.label=o[2],a.ops.push(l)}}l=t.call(e,a)}catch(s){l=[6,s],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var r,i,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s={next:n(0),throw:n(1),return:n(2)};return"function"==typeof ge.default&&(s[pe.default]=function(){return this}),s}function yn(e,t){function n(n){return function(s){var l=[n,s];if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,(l=o?[2&l[0],o.value]:l)[0]){case 0:case 1:o=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,i=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!((o=0<(o=a.trys).length&&o[o.length-1])||6!==l[0]&&2!==l[0])){a=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3]))a.label=l[1];else if(6===l[0]&&a.label<o[1])a.label=o[1],o=l;else{if(!(o&&a.label<o[2])){o[2]&&a.ops.pop(),a.trys.pop();continue}a.label=o[2],a.ops.push(l)}}l=t.call(e,a)}catch(s){l=[6,s],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var r,i,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s={next:n(0),throw:n(1),return:n(2)};return"function"==typeof ge.default&&(s[pe.default]=function(){return this}),s}function wn(e,t){function n(n){return function(s){var l=[n,s];if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,(l=o?[2&l[0],o.value]:l)[0]){case 0:case 1:o=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,i=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!((o=0<(o=a.trys).length&&o[o.length-1])||6!==l[0]&&2!==l[0])){a=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3]))a.label=l[1];else if(6===l[0]&&a.label<o[1])a.label=o[1],o=l;else{if(!(o&&a.label<o[2])){o[2]&&a.ops.pop(),a.trys.pop();continue}a.label=o[2],a.ops.push(l)}}l=t.call(e,a)}catch(s){l=[6,s],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var r,i,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s={next:n(0),throw:n(1),return:n(2)};return"function"==typeof ge.default&&(s[pe.default]=function(){return this}),s}function xn(e,t){function n(n){return function(s){var l=[n,s];if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,(l=o?[2&l[0],o.value]:l)[0]){case 0:case 1:o=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,i=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!((o=0<(o=a.trys).length&&o[o.length-1])||6!==l[0]&&2!==l[0])){a=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3]))a.label=l[1];else if(6===l[0]&&a.label<o[1])a.label=o[1],o=l;else{if(!(o&&a.label<o[2])){o[2]&&a.ops.pop(),a.trys.pop();continue}a.label=o[2],a.ops.push(l)}}l=t.call(e,a)}catch(s){l=[6,s],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var r,i,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s={next:n(0),throw:n(1),return:n(2)};return"function"==typeof ge.default&&(s[pe.default]=function(){return this}),s}function kn(){}function Sn(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}function Cn(){}function Tn(e){this.attributes=e}function En(){}function In(e){return"string"!=typeof e||0===e.length?{}:e.split(",").map(function(e){if(!((e=e.split(";")).length<=0)){var t=e.shift();if(t){var n,r,i,t=t.split("=");if(2===t.length)return i=decodeURIComponent(t[0].trim()),t=decodeURIComponent(t[1].trim()),0<e.length&&("string"!=typeof(r=e.join(";"))&&(Fi.error("Cannot create baggage metadata from unknown type: "+(void 0===r?"undefined":(0,Ae.default)(r))),r=""),n={__TYPE__:Di,toString:function(){return r}}),{key:i,value:t,metadata:n}}}}).filter(function(e){return void 0!==e&&0<e.value.length}).reduce(function(e,t){return e[t.key]=t.value,e},{})}function An(){var e=function(e){var t,n,r,i,o,a,s,l={};for(t in Fo){var c,u=t;"OTEL_LOG_LEVEL"===u?(a=l,"string"==typeof(s=(s=e)[o=u])&&null!=(s=qo[s.toUpperCase()])&&(a[o]=s)):-1<No.indexOf(u)?(a=l,(s=o=void 0)===o&&(o=-1/0),void 0===s&&(s=1/0),void 0!==(i=e)[r=u]&&(i=Number(i[r]),isNaN(i)||(a[r]=i<o?o:s<i?s:i))):-1<Do.indexOf(u)?(r=l,(i=void 0)===i&&(i=","),"string"==typeof(n=(n=e)[c=u])&&(r[c]=n.split(i).map(function(e){return e.trim()}))):null!=(c=e[u])&&(l[u]=String(c))}return l}(Uo);return(0,K.default)({},Fo,e)}function Rn(e){for(var t=e.length,n="",r=0;r<t;r+=2){var i=e.substring(r,r+2),i=parseInt(i,16);n+=String.fromCharCode(i)}return btoa(n)}function On(e){return e[0]*jo+e[1]}function Ln(e){void 0===e&&(e={}),this._isShutdown=!1,this._shuttingDownPromise=O.default.resolve(),this._sendingPromises=[],this.url=this.getDefaultUrl(e),"string"==typeof e.hostname&&(this.hostname=e.hostname),this.attributes=e.attributes,this.shutdown=this.shutdown.bind(this),this._concurrencyLimit="number"==typeof e.concurrencyLimit?e.concurrencyLimit:1/0,this.onInit(e)}function Pn(e){void 0===e&&(e={});var t,n=Wo.call(this,e)||this;return n._useXHR=!1,n._useXHR=!!e.headers||"function"!=typeof navigator.sendBeacon,n._useXHR?n._headers=(0,K.default)({},(void 0===(e=e.headers)&&(e={}),t={},(0,$.default)(e).forEach(function(e){var n=e[0],e=e[1];void 0!==e?t[n]=String(e):uo.warn('Header "'+n+'" has wrong value and will be ignored')}),t),In(An().OTEL_EXPORTER_OTLP_HEADERS)):n._headers={},n}function Mn(e){return(0,Ee.default)(e).map(function(t){return{key:t,value:function e(t){var n={};return"string"==typeof t?n.stringValue=t:"boolean"==typeof t?n.boolValue=t:"number"==typeof t&&t<=2147483647&&-2147483648<=t&&(0,p.default)(t)?n.intValue=t:"number"==typeof t?n.doubleValue=t:Array.isArray(t)?n.arrayValue={values:t.map(function(t){return e(t)})}:t&&(n.kvlistValue={values:Mn(t)}),n}(e[t])}})}function $n(e,t,n){var r,i,e=e.reduce(function(e,t){var n=e.get(t.resource),r=(n||(n=new re.default,e.set(t.resource,n)),n.get(t.instrumentationLibrary));return r||(r=new Array,n.set(t.instrumentationLibrary,r)),r.push(t),e},new re.default);return{resourceSpans:(e=e,r=(0,K.default)({},t.attributes),i=n,(0,te.default)(e,function(e){var t,n=e[0],e=e[1];return{resource:(n=n,void 0===(t=r)&&(t={}),{attributes:Mn((0,K.default)({},t,n?n.attributes:{})),droppedAttributesCount:0}),instrumentationLibrarySpans:(0,te.default)(e,function(e){return t=e[0],e=e[1],n=i,{spans:e.map(function(e){return e=e,{traceId:(t=n)?e.spanContext().traceId:Rn(e.spanContext().traceId),spanId:t?e.spanContext().spanId:Rn(e.spanContext().spanId),parentSpanId:e.parentSpanId?t?e.parentSpanId:Rn(e.parentSpanId):void 0,traceState:function(e){if(e)return e.serialize()}(e.spanContext().traceState),name:e.name,kind:(o=e.kind,"number"==typeof(o=zo[o])?o:Ho.trace.v1.Span.SpanKind.SPAN_KIND_UNSPECIFIED),startTimeUnixNano:On(e.startTime),endTimeUnixNano:On(e.endTime),attributes:Mn(e.attributes),droppedAttributesCount:0,events:e.events.map(function(e){return{timeUnixNano:On(e.time),name:e.name,attributes:Mn(e.attributes||{}),droppedAttributesCount:0}}),droppedEventsCount:0,status:(o=e.status,i={code:o.code},void 0!==o.message&&(i.message=o.message),i),links:(r=t,e.links.map(function(e){return{traceId:r?e.context.traceId:Rn(e.context.traceId),spanId:r?e.context.spanId:Rn(e.context.spanId),attributes:Mn(e.attributes||{}),droppedAttributesCount:0}})),droppedLinksCount:0};var t,r,i,o}),instrumentationLibrary:t};var t,n})}}))}}function Nn(e){return e=Jo.call(this,e=void 0===e?{}:e)||this,e._headers=(0,K.default)(e._headers,In(An().OTEL_EXPORTER_OTLP_TRACES_HEADERS)),e}function Dn(e,t){var n,e=e.reduce(function(e,t){var n=e.get(t.resource),r=(n||(n=new re.default,e.set(t.resource,n)),n.get(t.instrumentationLibrary));return r||(r=new Array,n.set(t.instrumentationLibrary,r)),r.push(t),e},new re.default);return{resourceLogs:(e=e,n=(0,K.default)({},t.attributes),(0,te.default)(e,function(e){var t=(0,d.default)(e,2),r=t[0],i=t[1];return{resource:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{attributes:Fn((0,K.default)({},t,e?e.attributes:{})),droppedAttributesCount:0}}(r,n),instrumentationLibraryLogs:(0,te.default)(i,function(e){var t=(0,d.default)(e,2),n=t[0];return{logs:t[1].map(function(e){var t;return{timeUnixNano:(t=e.time)[0]*yo+t[1],severityNumber:function(e){var t=Xo.proto.logs.v1.SeverityNumber;switch(e){case xo.TRACE:return t.SEVERITY_NUMBER_TRACE;case xo.DEBUG:return t.SEVERITY_NUMBER_DEBUG;case xo.INFO:return t.SEVERITY_NUMBER_INFO;case xo.WARN:return t.SEVERITY_NUMBER_WARN;case xo.ERROR:return t.SEVERITY_NUMBER_ERROR;case xo.FATAL:return t.SEVERITY_NUMBER_FATAL;default:return null}}(e.level),severityText:e.level,name:e.name,body:qn(e.body),attributes:Fn(e.attributes),droppedAttributesCount:0,flags:e.sampled?1:null,traceId:e.traceID,spanId:e.spanID}}),instrumentationLibrary:n}})}}))}}function Fn(e){return(0,Ee.default)(e).map(function(t){return{key:t,value:qn(e[t])}})}function qn(e){var t={};return"string"==typeof e?t.stringValue=e:"boolean"==typeof e?t.boolValue=e:"number"==typeof e&&e<=2147483647&&-2147483648<=e&&(0,p.default)(e)?t.intValue=e:"number"==typeof e?t.doubleValue=e:Array.isArray(e)?t.arrayValue={values:e.map(function(e){return qn(e)})}:e&&(t.kvlistValue={values:Fn(e)}),t}function Un(){this.constructor=Qo}function Bn(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=new ra({resource:new aa(i((u(n={},sa.SERVICE_NAME,"JsSIP"),u(n,sa.SERVICE_VERSION,la.version),u(n,"tps.tenant.id","tccc"),n),t))}),t=i({url:"https://tpstelemetry.tencent.com/v1/logs",headers:{"X-Tps-TenantID":"tccc"},attributes:{}},e);return n.addLogProcessor(new ia(new oa(t))),n}function jn(e){a(this,jn),e?(this._debug=ua.default("".concat(pa,":").concat(e)),this._warn=ua.default("".concat(pa,":WARN:").concat(e)),this._error=ua.default("".concat(pa,":ERROR:").concat(e)),this.prefix=e):(this._debug=ua.default(pa),this._warn=ua.default("".concat(pa,":WARN")),this._error=ua.default("".concat(pa,":ERROR"))),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}function Vn(e){return String(Number(e))===e?Number(e):e}function Hn(e,t){var n=t.split(/=(.+)/,2);return 2===n.length?e[n[0]]=Vn(n[1]):1===n.length&&1<t.length&&(e[n[0]]=void 0),e}function Yn(e,t,n){var r=[e+"="+(t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format)];if(t.names)for(var i=0;i<t.names.length;i+=1){var o=t.names[i];t.name?r.push(n[t.name][o]):r.push(n[t.names[i]])}else r.push(n[t.name]);return _a.apply(null,r)}function zn(e,t,n){var r;return a(this,zn),(r=Ia.call(this)).type=za.INVITE_SERVER,r.id=n.via_branch,r.ua=e,r.transport=t,r.request=n,r.last_response="",n.server_transaction=S(r),r.state=za.STATUS_PROCEEDING,e.newTransaction(S(r)),r.resendProvisionalTimer=null,n.reply(100),r}function Gn(e,t,n){var r;return a(this,Gn),(r=Aa.call(this)).type=za.NON_INVITE_SERVER,r.id=n.via_branch,r.ua=e,r.transport=t,r.request=n,r.last_response="",n.server_transaction=S(r),r.state=za.STATUS_TRYING,e.newTransaction(S(r)),r}function Wn(e,t,n,r){a(this,Wn),(i=Ra.call(this)).id="z9hG4bK".concat(Math.floor(1e7*Math.random())),i.transport=t,i.request=n,i.eventHandlers=r;var i,n="SIP/2.0/".concat(t.via_transport);return n+=" ".concat(e.configuration.via_host,";branch=").concat(i.id),i.request.setHeader("via",n),i}function Kn(e,t,n,r){a(this,Kn),(i=Oa.call(this)).type=za.INVITE_CLIENT,i.id="z9hG4bK".concat(Math.floor(1e7*Math.random())),i.ua=e,i.transport=t,i.request=n,i.eventHandlers=r,n.transaction=S(i);var i,r="SIP/2.0/".concat(t.via_transport);return r+=" ".concat(e.configuration.via_host,";branch=").concat(i.id),i.request.setHeader("via",r),i.ua.newTransaction(S(i)),i}function Xn(e,t,n,r){a(this,Xn),(i=La.call(this)).type=za.NON_INVITE_CLIENT,i.id="z9hG4bK".concat(Math.floor(1e7*Math.random())),i.ua=e,i.transport=t,i.request=n,i.eventHandlers=r;var i,n="SIP/2.0/".concat(t.via_transport);return n+=" ".concat(e.configuration.via_host,";branch=").concat(i.id),i.request.setHeader("via",n),i.ua.newTransaction(S(i)),i}function Zn(e){a(this,Zn),this._credentials=e,this._cnonce=null,this._nc=0,this._ncHex="00000000",this._algorithm=null,this._realm=null,this._nonce=null,this._opaque=null,this._stale=null,this._qop=null,this._method=null,this._uri=null,this._ha1=null,this._response=null}function Jn(){var e;return a(this,Jn),(e=Pa.call(this)).headers={},e.status_code=null,e.reason_phrase=null,e}function Qn(e){var t;return a(this,Qn),(t=Ma.call(this)).ua=e,t.headers={},t.ruri=null,t.transport=null,t.server_transaction=null,t}function er(){a(this,er),this.data=null,this.headers=null,this.method=null,this.via=null,this.via_branch=null,this.call_id=null,this.cseq=null,this.from=null,this.from_tag=null,this.to=null,this.to_tag=null,this.body=null,this.sdp=null}function tr(e,t,n,r,i){return a(this,tr),(e=$a.call(this,ka.INVITE,e,t,n,r,i)).transaction=null,e}function nr(e,t,n,r,i,o){if(a(this,nr),!e||!t||!n)return null;r=r||{},this.ua=n,this.headers={},this.method=e,this.ruri=t,this.body=o,this.extraHeaders=Sa.cloneArray(i),this.ua.configuration.extra_headers&&(this.extraHeaders=this.extraHeaders.concat(this.ua.configuration.extra_headers)),r.route_set?this.setHeader("route",r.route_set):n.configuration.use_preloaded_route&&this.setHeader("route","<".concat(n.transport.sip_uri,";lr>")),this.setHeader("via",""),this.setHeader("max-forwards",ka.MAX_FORWARDS),o=r.to_uri||t,i=r.to_tag?{tag:r.to_tag}:null,t=void 0!==r.to_display_name?r.to_display_name:null,this.to=new Ca(o,t,i),this.setHeader("to",this.to.toString()),o=r.from_uri||n.configuration.uri,t={tag:r.from_tag||Sa.newTag()},i=void 0!==r.from_display_name?r.from_display_name:n.configuration.display_name||null,this.from=new Ca(o,i,t),this.setHeader("from",this.from.toString()),o=r.call_id||n.configuration.jssip_id+Sa.createRandomToken(15),this.call_id=o,this.setHeader("call-id",o),i=r.cseq||Math.floor(1e4*Math.random()),this.cseq=i,this.setHeader("cseq","".concat(i," ").concat(e))}function rr(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:hs.STATUS_CONFIRMED;if(a(this,rr),this._owner=e,this._ua=e._ua,this._uac_pending_reply=!1,this._uas_pending_reply=!1,!t.hasHeader("contact"))return{error:"unable to create a Dialog without Contact header field"};t instanceof ls.IncomingResponse&&(r=t.status_code<200?hs.STATUS_EARLY:hs.STATUS_CONFIRMED),e=t.parseHeader("contact"),"UAS"===n?(this._id={call_id:t.call_id,local_tag:t.to_tag,remote_tag:t.from_tag,toString:function(){return this.call_id+this.local_tag+this.remote_tag}},this._state=r,this._remote_seqnum=t.cseq,this._local_uri=t.parseHeader("to").uri,this._remote_uri=t.parseHeader("from").uri,this._remote_target=e.uri,this._route_set=t.getHeaders("record-route"),this._ack_seqnum=this._remote_seqnum):"UAC"===n&&(this._id={call_id:t.call_id,local_tag:t.from_tag,remote_tag:t.to_tag,toString:function(){return this.call_id+this.local_tag+this.remote_tag}},this._state=r,this._local_seqnum=t.cseq,this._local_uri=t.parseHeader("from").uri,this._remote_uri=t.parseHeader("to").uri,this._remote_target=e.uri,this._route_set=t.getHeaders("record-route").reverse(),this._ack_seqnum=null),this._ua.newDialog(this),ps.debug("new ".concat(n," dialog created with status ").concat(this._state===hs.STATUS_EARLY?"EARLY":"CONFIRMED"))}function ir(e,t,n){for(var r in a(this,ir),this._dialog=e,this._ua=e._ua,this._request=t,this._eventHandlers=n,this._reattempt=!1,this._reattemptTimer=null,ss)!Object.prototype.hasOwnProperty.call(ss,r)||this._eventHandlers[r]||(this._eventHandlers[r]=ss[r])}function or(e,t){a(this,or),this._reg_id=1,this._ua=e,this._transport=t,this._registrar=e.configuration.registrar_server,this._expires=e.configuration.register_expires,this._call_id=Qa.createRandomToken(22),this._cseq=0,this._to_uri=e.configuration.uri,this._registrationTimer=null,this._registering=!1,this._registered=!1,this._contact=this._ua.contact.toString(),this._contact+=";+sip.ice",this._extraHeaders=[],this._extraContactParams="",this._sipInstance='"<urn:uuid:'.concat(this._ua.configuration.instance_id,'>"'),this._contact+=";reg-id=".concat(this._reg_id),this._contact+=";+sip.instance=".concat(this._sipInstance),this._ua.configuration.use_trtc&&(this._contact+=";trtc")}function ar(e,t,n){for(var r in a(this,ar),this._ua=e,this._eventHandlers=n,this._method=t.method,this._request=t,this._auth=null,this._challenged=!1,this._staled=!1,Ja)!Object.prototype.hasOwnProperty.call(Ja,r)||this._eventHandlers[r]||(this._eventHandlers[r]=Ja[r]);e.status!==e.C.STATUS_USER_CLOSED||this._method===Wa.BYE&&this._method===Wa.ACK||this._eventHandlers.onTransportError()}function sr(e){var t;return a(this,sr),(t=Ga.call(this))._session=e,t._direction=null,t._tone=null,t._duration=null,t._request=null,t}function lr(e){var t;return a(this,lr),(t=ys.call(this))._ua=e,t._request=null,t._closed=!1,t._direction=null,t._local_identity=null,t._remote_identity=null,t._is_replied=!1,t._data={},t}function cr(e){var t;return a(this,cr),(t=ws.call(this))._ua=e,t._request=null,t._closed=!1,t._direction=null,t._local_identity=null,t._remote_identity=null,t._is_replied=!1,t._data={},t}function ur(e){a(this,ur),il.debug("new"),(t=xs.call(this))._id=null,t._ua=e,t._status=ol.STATUS_NULL,t._dialog=null,t._earlyDialogs={},t._contact=null,t._from_tag=null,t._to_tag=null,t._use_trtc=t._ua.configuration.use_trtc,t._connection=null,t._connectionPromiseQueue=O.default.resolve(),t._request=null,t._is_canceled=!1,t._cancel_reason="",t._is_confirmed=!1,t._late_sdp=!1,t._rtcOfferConstraints=null,t._rtcAnswerConstraints=null,t._localStream=null,t._remoteStream={},t._remoteMediaStream={},t._localTRTCClient=null,t._localUserId=null,t._trtcLocalStream=null,t._trtcLocalStreamLocallyGenerated=!1,t._trtcLocalStreamConfig={},t._trtcRemoteStream={},t._rtcReady=!0,t._iceReady=!1,t._timers={ackTimer:null,expiresTimer:null,invite2xxTimer:null,userNoAnswerTimer:null},t._direction=null,t._local_identity=null,t._remote_identity=null,t._start_time=null,t._end_time=null,t._tones=null,t._audioMuted=!1,t._videoMuted=!1,t._localHold=!1,t._remoteHold=!1,t._sessionTimers={enabled:t._ua.configuration.session_timers,refreshMethod:t._ua.configuration.session_timers_refresh_method,defaultExpires:Vs.SESSION_EXPIRES,currentExpires:null,running:!1,refresher:!1,timer:null},t._referSubscribers={},t._data={};var t,e=Number(t._ua.configuration.log_level);return js.Logger.setLogLevel(1<e?e+1:e),t._ua.configuration.log_report?js.Logger.enableUploadLog():js.Logger.disableUploadLog(),t}function dr(e){var t;return a(this,dr),(t=ks.call(this,e))._mediaStream=e.mediaStream,t.type="remote",t}function fr(e){return a(this,fr),(e=Ss.call(this,e)).type="local",e}function pr(e){var t;return a(this,pr),(t=Cs.call(this)).audio=e.audio,t.video=e.video,t._mediaStream=e.mediaStream,t._player=null,t}function hr(e){var t;return a(this,hr),(t=Ts.call(this))._id=null,t._session=e,t}function gr(e,t,n){a(this,gr),this._session=e,this._id=t,this._expires=n||300,this._active=!0,this.notify(100)}function mr(e){var t;return a(this,mr),(t=Es.call(this))._session=e,t._direction=null,t._contentType=null,t._body=null,t}function vr(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Cl.recovery_options;a(this,vr),Sl.debug("new()"),this.status=Cl.STATUS_DISCONNECTED,this.socket=null,this.sockets=[],this.recovery_options=t,this.recover_attempts=0,this.recovery_timer=null,this.close_requested=!1;try{this.textDecoder=new TextDecoder("utf8")}catch(e){Sl.warn("cannot use TextDecoder: ".concat(e))}if(void 0===e)throw new TypeError("Invalid argument. undefined 'sockets' argument");(e=e instanceof Array?e:[e]).forEach(function(e){if(!kl.isSocket(e.socket))throw new TypeError("Invalid argument. invalid 'JsSIP.Socket' instance");if(e.weight&&!Number(e.weight))throw new TypeError("Invalid argument. 'weight' attribute is not a number");this.sockets.push({socket:e.socket,weight:e.weight||0,status:Cl.SOCKET_STATUS_READY})},this),this._getSocket()}function br(e){var t,n=Al.getHeaders("via"),r="SIP/2.0 ".concat(e," ").concat(Pl.REASON_PHRASE[e],"\r\n"),i=R(n);try{for(i.s();!(t=i.n()).done;){r+="Via: ".concat(t.value,"\r\n")}}catch(e){i.e(e)}finally{i.f()}n=Al.getHeader("To"),Al.to_tag||(n+=";tag=".concat($l.newTag())),r=(r=(r=(r+="To: ".concat(n,"\r\n"))+"From: ".concat(Al.getHeader("From"),"\r\n"))+"Call-ID: ".concat(Al.call_id,"\r\n"))+"CSeq: ".concat(Al.cseq," ").concat(Al.method,"\r\n"),Ol.send(r+="\r\n")}function _r(e){var t;if(a(this,_r),lc.debug("new() [configuration:%o]",e),(t=Ll.call(this))._cache={credentials:{}},t._configuration=(0,K.default)({},sc.settings),t._dynConfiguration={},t._dialogs={},t._applicants={},t._sessions={},t._transport=null,t._contact=null,t._status=cc.STATUS_INIT,t._error=null,t._transactions={nist:{},nict:{},ist:{},ict:{}},t._data={},t._closeTimer=null,void 0===e)throw new TypeError("Not enough arguments");try{t._loadConfig(e)}catch(e){throw t._status=cc.STATUS_NOT_READY,t._error=cc.CONFIGURATION_ERROR,e}return t._registrator=new Xl(S(t)),t}function yr(e){a(this,yr),dc.debug('new() [url:"%s"]',e),this._url=e,this._sip_uri=null,this._via_transport=null,this._ws=null;var t=uc.parse(e,"absoluteURI");if(-1===t)throw dc.warn("invalid WebSocket URI: ".concat(e)),new TypeError("Invalid argument: ".concat(e));if("wss"!==t.scheme&&"ws"!==t.scheme)throw dc.warn("invalid WebSocket URI scheme: ".concat(t.scheme)),new TypeError("Invalid argument: ".concat(e));this._sip_uri="sip:".concat(t.host).concat(t.port?":".concat(t.port):"",";transport=ws"),this._via_transport=t.scheme.toUpperCase()}var e=(e=e)&&"object"==(void 0===e?"undefined":(0,Ae.default)(e))&&"default"in e?e:{default:e},wr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:{},xr={name:"@tencent/tccc-sip-js",title:"TCCCSIP",description:"TCCC JavaScript SIP SDK",version:"0.0.3",homepage:"https://tccc.qcloud.com",contributors:["José Luis Millán <jmillan@aliax.net> (https://github.com/jmillan)","Iñaki Baz Castillo <ibc@aliax.net> (https://inakibaz.me)","Gahouliao <gahouliao@tencent.com>"],types:"dist/jssip.d.ts",main:"dist/jssip.cjs.js",module:"dist/jssip.esm.js",browser:"dist/jssip.umd.js",keywords:["sip","websocket","webrtc","node","browser","library","tccc","腾讯云呼叫中心"],license:"MIT",repository:{type:"git",url:"https://git.woa.com/tccc/JsSIP"},peerDependencies:{"trtc-js-sdk":"^4.13.0"},dependencies:{debug:"^4.3.1",events:"^3.3.0","sdp-transform":"^2.14.1","trtc-js-sdk":"^4.13.0"},devDependencies:{"@babel/core":"^7.19.6","@babel/plugin-external-helpers":"^7.18.6","@babel/plugin-transform-runtime":"^7.18.10","@babel/preset-env":"^7.19.4","@opentelemetry/resources":"^1.6.0","@opentelemetry/semantic-conventions":"^1.6.0","@rollup/plugin-babel":"^5.3.1","@rollup/plugin-commonjs":"^22.0.2","@rollup/plugin-eslint":"^8.0.2","@rollup/plugin-json":"^4.1.0","@rollup/plugin-node-resolve":"^13.3.0","@rollup/plugin-typescript":"^8.4.0","@tencent/opentelemetry-exporter-log-otlp-http":"0.6.1-5","@tencent/opentelemetry-sdk-log-base":"0.6.1-6","@types/debug":"^4.1.5","@types/node":"^14.14.34","@typescript-eslint/eslint-plugin":"^5.36.2","@typescript-eslint/parser":"^5.36.2","ansi-colors":"^3.2.4",browserify:"^16.5.1","cross-env":"^7.0.3",eslint:"7.32.0","fancy-log":"^1.3.3",gulp:"^4.0.2","gulp-babel":"^8.0.0","gulp-eslint":"^5.0.0","gulp-expect-file":"^1.0.2","gulp-header":"^2.0.9","gulp-nodeunit-runner":"^0.2.2","gulp-plumber":"^1.2.1","gulp-rename":"^1.4.0","gulp-uglify-es":"^1.0.4","lodash.template":"^4.5.0",pegjs:"^0.7.0",rimraf:"^3.0.2",rollup:"^2.79.0","rollup-plugin-copy":"^3.4.0","rollup-plugin-dts":"^4.2.2","rollup-plugin-peer-deps-external":"^2.2.4","rollup-plugin-polyfill-node":"^0.10.2","rollup-plugin-progress":"^1.1.2","rollup-plugin-terser":"^7.0.2","rollup-plugin-uglify":"^6.0.4",typescript:"^4.8.2","vinyl-buffer":"^1.0.1","vinyl-source-stream":"^2.0.0"},scripts:{lint:"node npm-scripts.js lint",test:"node npm-scripts.js test",prepublish:"node npm-scripts.js prepublish",release:"node npm-scripts.js release",dev:"cross-env NODE_ENV=development rollup -c rollup.config.js -w",build:"cross-env rimraf dist && rollup -c rollup.config.js && node config/build-package.js",prepublishOnly:"npm run build",grammar:"gulp grammar"},packageManager:"yarn@3.2.3"},kr=xr,Sr={USER_AGENT:"".concat(kr.title," ").concat(kr.version),SIP:"sip",SIPS:"sips",causes:{CONNECTION_ERROR:"Connection Error",REQUEST_TIMEOUT:"Request Timeout",SIP_FAILURE_CODE:"SIP Failure Code",INTERNAL_ERROR:"Internal Error",BUSY:"Busy",REJECTED:"Rejected",REDIRECTED:"Redirected",UNAVAILABLE:"Unavailable",NOT_FOUND:"Not Found",ADDRESS_INCOMPLETE:"Address Incomplete",INCOMPATIBLE_SDP:"Incompatible SDP",MISSING_SDP:"Missing SDP",AUTHENTICATION_ERROR:"Authentication Error",BYE:"Terminated",WEBRTC_ERROR:"WebRTC Error",CANCELED:"Canceled",NO_ANSWER:"No Answer",EXPIRES:"Expires",NO_ACK:"No ACK",DIALOG_ERROR:"Dialog Error",USER_DENIED_MEDIA_ACCESS:"User Denied Media Access",BAD_MEDIA_DESCRIPTION:"Bad Media Description",RTP_TIMEOUT:"RTP Timeout"},SIP_ERROR_CAUSES:{REDIRECTED:[300,301,302,305,380],BUSY:[486,600],REJECTED:[403,603],NOT_FOUND:[404,604],UNAVAILABLE:[480,410,408,430],ADDRESS_INCOMPLETE:[484,424],INCOMPATIBLE_SDP:[488,606],AUTHENTICATION_ERROR:[401,407]},ACK:"ACK",BYE:"BYE",CANCEL:"CANCEL",INFO:"INFO",INVITE:"INVITE",MESSAGE:"MESSAGE",NOTIFY:"NOTIFY",OPTIONS:"OPTIONS",REGISTER:"REGISTER",REFER:"REFER",UPDATE:"UPDATE",SUBSCRIBE:"SUBSCRIBE",DTMF_TRANSPORT:{INFO:"INFO",RFC2833:"RFC2833"},REASON_PHRASE:{100:"Trying",180:"Ringing",181:"Call Is Being Forwarded",182:"Queued",183:"Session Progress",199:"Early Dialog Terminated",200:"OK",202:"Accepted",204:"No Notification",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",305:"Use Proxy",380:"Alternative Service",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",410:"Gone",412:"Conditional Request Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Unsupported URI Scheme",417:"Unknown Resource-Priority",420:"Bad Extension",421:"Extension Required",422:"Session Interval Too Small",423:"Interval Too Brief",424:"Bad Location Information",428:"Use Identity Header",429:"Provide Referrer Identity",430:"Flow Failed",433:"Anonymity Disallowed",436:"Bad Identity-Info",437:"Unsupported Certificate",438:"Invalid Identity Header",439:"First Hop Lacks Outbound Support",440:"Max-Breadth Exceeded",469:"Bad Info Package",470:"Consent Needed",478:"Unresolvable Destination",480:"Temporarily Unavailable",481:"Call/Transaction Does Not Exist",482:"Loop Detected",483:"Too Many Hops",484:"Address Incomplete",485:"Ambiguous",486:"Busy Here",487:"Request Terminated",488:"Not Acceptable Here",489:"Bad Event",491:"Request Pending",493:"Undecipherable",494:"Security Agreement Required",500:"JsSIP Internal Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Server Time-out",505:"Version Not Supported",513:"Message Too Large",580:"Precondition Failure",600:"Busy Everywhere",603:"Decline",604:"Does Not Exist Anywhere",606:"Not Acceptable"},ALLOWED_METHODS:"INVITE,ACK,CANCEL,BYE,UPDATE,MESSAGE,OPTIONS,REFER,INFO,NOTIFY",ACCEPTED_BODY_TYPES:"application/sdp, application/dtmf-relay",MAX_FORWARDS:69,SESSION_EXPIRES:90,MIN_SESSION_EXPIRES:60,CONNECTION_RECOVERY_MAX_INTERVAL:30,CONNECTION_RECOVERY_MIN_INTERVAL:2,LOG_LEVEL:{TRACE:0,DEBUG:1,WARN:2,ERROR:3,NONE:4}};f(U,x(Error)),Dr=T(U);var Cr,Tr,Er,Ir,Ar,Rr,Or,kr=l(U),Lr=(f(F,x(Error)),Nr=T(F),l(F)),Pr=(f(N,x(Error)),$r=T(N),l(N));f(M,x(Error)),Mr=T(M);var Mr,$r,Nr,Dr,kr={ConfigurationError:kr,InvalidStateError:Lr,NotSupportedError:Pr,NotReadyError:l(M)},Fr={};X.prototype=(0,de.default)(null),(J.EventEmitter=J).usingDomains=!1,J.prototype.domain=void 0,J.prototype._events=void 0,J.prototype._maxListeners=void 0,J.defaultMaxListeners=10,J.init=function(){this.domain=null,J.usingDomains&&(void 0).active,this._events&&this._events!==(0,se.default)(this)._events||(this._events=new X,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},J.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},J.prototype.getMaxListeners=function(){return ee(this)},J.prototype.emit=function(e){var t,n,r,i,o,a="error"===e;if(o=this._events)a=a&&null==o.error;else if(!a)return!1;if(s=this.domain,a){if(a=arguments[1],s)return(a=a||new Error('Uncaught, unspecified "error" event')).domainEmitter=this,a.domain=s,a.domainThrown=!1,s.emit("error",a),!1;if(a instanceof Error)throw a;var s=new Error('Uncaught, unspecified "error" event. ('+a+")");throw s.context=a,s}if(!(t=o[e]))return!1;var l="function"==typeof t;switch(n=arguments.length){case 1:var c=t,u=l,d=this;if(u)c.call(d);else for(var f=c.length,p=le(c,f),h=0;h<f;++h)p[h].call(d);break;case 2:var u=t,c=l,g=this,m=arguments[1];if(c)u.call(g,m);else for(var v=u.length,b=le(u,v),_=0;_<v;++_)b[_].call(g,m);break;case 3:var y=t,w=l,x=this,k=arguments[1],S=arguments[2];if(w)y.call(x,k,S);else for(var C=y.length,T=le(y,C),E=0;E<C;++E)T[E].call(x,k,S);break;case 4:var w=t,y=l,I=this,A=arguments[1],R=arguments[2],O=arguments[3];if(y)w.call(I,A,R,O);else for(var L=w.length,P=le(w,L),M=0;M<L;++M)P[M].call(I,A,R,O);break;default:for(r=new Array(n-1),i=1;i<n;i++)r[i-1]=arguments[i];var $=t,N=l,D=this,F=r;if(N)$.apply(D,F);else for(var q=$.length,U=le($,q),B=0;B<q;++B)U[B].apply(D,F)}return!0},J.prototype.on=J.prototype.addListener=function(e,t){return ne(this,e,t,!1)},J.prototype.prependListener=function(e,t){return ne(this,e,t,!0)},J.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,ie(this,e,t)),this},J.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,ie(this,e,t)),this},J.prototype.removeListener=function(e,t){var n,r,i,o,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if((r=this._events)&&(n=r[e]))if(n===t||n.listener&&n.listener===t)0==--this._eventsCount?this._events=new X:(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length;0<o--;)if(n[o]===t||n[o].listener&&n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new X,this;delete r[e]}else{for(var s=n,l=i,c=l+1,u=s.length;c<u;l+=1,c+=1)s[l]=s[c];s.pop()}r.removeListener&&this.emit("removeListener",e,a||t)}return this},J.prototype.off=function(e,t){return this.removeListener(e,t)},J.prototype.removeAllListeners=function(e){var t,n;if(n=this._events)if(n.removeListener){if(0===arguments.length){for(var r,i=(0,Ee.default)(n),o=0;o<i.length;++o)"removeListener"!==(r=i[o])&&this.removeAllListeners(r);this.removeAllListeners("removeListener"),this._events=new X,this._eventsCount=0}else if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(;this.removeListener(e,t[t.length-1]),t[0];);}else 0===arguments.length?(this._events=new X,this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=new X:delete n[e]);return this},J.prototype.listeners=function(e){var t=this._events;if(t&&(t=t[e])){if("function"==typeof t)return[t.listener||t];for(var n=t,r=new Array(n.length),i=0;i<r.length;++i)r[i]=n[i].listener||n[i];return r}return[]},J.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):ae.call(e,t)},J.prototype.listenerCount=ae,J.prototype.eventNames=function(){return 0<this._eventsCount?(0,G.default)(this._events):[]};var Lr=t((0,Y.default)({__proto__:null,default:J,EventEmitter:J})),qr=void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},Ur=ue,Br=fe;"function"==typeof qr.setTimeout&&(Ur=setTimeout),"function"==typeof qr.clearTimeout&&(Br=clearTimeout);var jr,Vr=[],Hr=!1,Yr=-1;ye.prototype.run=function(){this.fun.apply(null,this.array)};var zr,Gr,Wr,Pr=xe,Kr=xe,Xr=xe,Zr=xe,Jr=xe,Qr=xe,ei=xe,ti=qr.performance||{},ni=ti.now||ti.mozNow||ti.msNow||ti.oNow||ti.webkitNow||function(){return(new Date).getTime()},ri=new Date,ii={nextTick:function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];Vr.push(new ye(e,t)),1!==Vr.length||Hr||he(be)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:Pr,addListener:Kr,once:Xr,off:Zr,removeListener:Jr,removeAllListeners:Qr,emit:ei,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*ni.call(ti),n=Math.floor(t),t=Math.floor(t%1*1e9);return e&&(n-=e[0],(t-=e[1])<0&&(n--,t+=1e9)),[n,t]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-ri)/1e3}},Pr={exports:{}},oi=function e(t){function n(){for(var t=arguments.length,i=Array(t),o=0;o<t;o++)i[o]=arguments[o];if(n.enabled){var a=n,s=Number(new Date),l=s-(r||s);a.diff=l,a.prev=r,a.curr=s,r=s,i[0]=e.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var c=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(t,n){if("%%"===t)return"%";c++;var r=e.formatters[n];if("function"==typeof r){var o=i[c];t=r.call(a,o),i.splice(c,1),c--}return t}),e.formatArgs.call(a,i),(a.log||e.log).apply(a,i)}}var r=void 0,i=void 0,o=void 0,a=null;return n.namespace=t,n.useColors=e.useColors(),n.color=e.selectColor(t),n.extend=ai,n.destroy=e.destroy,Object.defineProperty(n,"enabled",{enumerable:!0,configurable:!1,get:function(){return null!==a?a:(i!==e.namespaces&&(i=e.namespaces,o=e.enabled(t)),o)},set:function(e){a=e}}),"function"==typeof e.init&&e.init(n),n},ai=function(e,t){var n=oi(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n},si=function(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")},li=Pr,ci=Pr.exports;ci.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+li.exports.humanize(this.diff),this.useColors){var t="color: "+this.color;e.splice(1,0,t,"color: inherit");var n=0,r=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(n++,"%c"===e&&(r=n))}),e.splice(r,0,t)}},ci.save=function(e){try{e?ci.storage.setItem("debug",e):ci.storage.removeItem("debug")}catch(e){}},ci.load=function(){var e=void 0;try{e=ci.storage.getItem("debug")}catch(e){}return e=!e&&void 0!==ii&&"env"in ii?ii.env.DEBUG:e},ci.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},ci.storage=function(){try{return localStorage}catch(e){}}(),ci.destroy=function(){var e=!1;return function(){e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}}(),ci.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],ci.log=console.debug||console.log||function(){},li.exports=(Wr=ci,((oi.debug=oi).default=oi).coerce=function(e){return e instanceof Error?e.stack||e.message:e},oi.disable=function(){var e=[].concat((0,V.default)(oi.names.map(si)),(0,V.default)(oi.skips.map(si).map(function(e){return"-"+e}))).join(",");return oi.enable(""),e},oi.enable=function(e){var t=void 0;oi.save(e),oi.namespaces=e,oi.names=[],oi.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length;for(t=0;t<r;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?oi.skips.push(new RegExp("^"+e.slice(1)+"$")):oi.names.push(new RegExp("^"+e+"$")))},oi.enabled=function(e){if("*"===e[e.length-1])return!0;var t=void 0,n=void 0;for(t=0,n=oi.skips.length;t<n;t++)if(oi.skips[t].test(e))return!1;for(t=0,n=oi.names.length;t<n;t++)if(oi.names[t].test(e))return!0;return!1},oi.humanize=function(){function e(e,t,n,r){return t=1.5*n<=t,Math.round(e/n)+" "+r+(t?"s":"")}if(Gr)return zr;Gr=1;var t=1e3,n=6e4,r=36e5,i=24*r;return zr=function(o,a){a=a||{};var s=void 0===o?"undefined":(0,Ae.default)(o);if(!("string"==s&&0<o.length)){if("number"==s&&isFinite(o))return a.long?(s=o,a=Math.abs(s),i<=a?e(s,a,i,"day"):r<=a?e(s,a,r,"hour"):n<=a?e(s,a,n,"minute"):t<=a?e(s,a,t,"second"):s+" ms"):(a=o,s=Math.abs(a),i<=s?Math.round(a/i)+"d":r<=s?Math.round(a/r)+"h":n<=s?Math.round(a/n)+"m":t<=s?Math.round(a/t)+"s":a+"ms");throw new Error("val is not a non-empty string or a valid number. val="+(0,Z.default)(o))}if(s=o,!(100<(s=String(s)).length)&&(s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(s))){var l=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*l;case"weeks":case"week":case"w":return 6048e5*l;case"days":case"day":case"d":return l*i;case"hours":case"hour":case"hrs":case"hr":case"h":return l*r;case"minutes":case"minute":case"mins":case"min":case"m":return l*n;case"seconds":case"second":case"secs":case"sec":case"s":return l*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}}}(),oi.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},(0,Ee.default)(Wr).forEach(function(e){oi[e]=Wr[e]}),oi.names=[],oi.skips=[],oi.formatters={},oi.selectColor=function(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return oi.colors[Math.abs(t)%oi.colors.length]},oi.enable(oi.load()),oi),li.exports.formatters.j=function(e){try{return(0,Z.default)(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}};var Kr={},ui=[],di=[],fi="undefined"!=typeof Uint8Array?Uint8Array:Array,pi=!1,hi={}.toString,gi=Array.isArray||function(e){return"[object Array]"==hi.call(e)};Pe.TYPED_ARRAY_SUPPORT=void 0===qr.TYPED_ARRAY_SUPPORT||qr.TYPED_ARRAY_SUPPORT,Pe.poolSize=8192,Pe._augment=function(e){return e.__proto__=Pe.prototype,e},Pe.from=function(e,t,n){return Me(null,e,t,n)},Pe.TYPED_ARRAY_SUPPORT&&(Pe.prototype.__proto__=Uint8Array.prototype,Pe.__proto__=Uint8Array),Pe.alloc=function(e,t,n){return t=t,n=n,$e(e=e),e<=0||void 0===t?Le(null,e):"string"==typeof n?Le(null,e).fill(t,n):Le(null,e).fill(t)},Pe.allocUnsafe=function(e){return Ne(null,e)},Pe.allocUnsafeSlow=function(e){return Ne(null,e)},Pe.isBuffer=function(e){return null!=e&&(!!e._isBuffer||rt(e)||"function"==typeof(e=e).readFloatLE&&"function"==typeof e.slice&&rt(e.slice(0,0)))},Pe.compare=function(e,t){if(!qe(e)||!qe(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},Pe.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Pe.concat=function(e,t){if(!gi(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Pe.alloc(0);if(void 0===t)for(i=t=0;i<e.length;++i)t+=e[i].length;for(var n=Pe.allocUnsafe(t),r=0,i=0;i<e.length;++i){var o=e[i];if(!qe(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,r),r+=o.length}return n},Pe.byteLength=Ue,Pe.prototype._isBuffer=!0,Pe.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)je(this,t,t+1);return this},Pe.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)je(this,t,t+3),je(this,t+1,t+2);return this},Pe.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)je(this,t,t+7),je(this,t+1,t+6),je(this,t+2,t+5),je(this,t+3,t+4);return this},Pe.prototype.toString=function(){var e=0|this.length;return 0==e?"":0===arguments.length?ze(this,0,e):Be.apply(this,arguments)},Pe.prototype.equals=function(e){if(qe(e))return this===e||0===Pe.compare(this,e);throw new TypeError("Argument must be a Buffer")},Pe.prototype.inspect=function(){var e="";return 0<this.length&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(e+=" ... ")),"<Buffer "+e+">"},Pe.prototype.compare=function(e,t,n,r,i){if(!qe(e))throw new TypeError("Argument must be a Buffer");if(void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),(t=void 0===t?0:t)<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(i<=r&&n<=t)return 0;if(i<=r)return-1;if(n<=t)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),l=this.slice(r,i),c=e.slice(t,n),u=0;u<s;++u)if(l[u]!==c[u]){o=l[u],a=c[u];break}return o<a?-1:a<o?1:0},Pe.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},Pe.prototype.indexOf=function(e,t,n){return Ve(this,e,t,n,!0)},Pe.prototype.lastIndexOf=function(e,t,n){return Ve(this,e,t,n,!1)},Pe.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||i<n)&&(n=i),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var o,a,s,l,c,u=!1;;)switch(r){case"hex":var d=this,f=e,p=t,h=n,g=(p=Number(p)||0,d.length-p);if((!h||(h=Number(h))>g)&&(h=g),(g=f.length)%2!=0)throw new TypeError("Invalid hex string");g/2<h&&(h=g/2);for(var m=0;m<h;++m){var v=parseInt(f.substr(2*m,2),16);if(isNaN(v))return m;d[p+m]=v}return m;case"utf8":case"utf-8":return g=t,c=n,nt(et(e,(l=this).length-g),l,g,c);case"ascii":return Ye(this,e,t,n);case"latin1":case"binary":return Ye(this,e,t,n);case"base64":return l=this,c=t,s=n,nt(tt(e),l,c,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return s=t,a=n,nt(function(e,t){for(var n,r,i=[],o=0;o<e.length&&!((t-=2)<0);++o)r=(n=e.charCodeAt(o))>>8,i.push(n%256),i.push(r);return i}(e,(o=this).length-s),o,s,a);default:if(u)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),u=!0}},Pe.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var mi=4096;Pe.prototype.slice=function(e,t){var n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e),Pe.TYPED_ARRAY_SUPPORT)(i=this.subarray(e,t)).__proto__=Pe.prototype;else for(var r=t-e,i=new Pe(r,void 0),o=0;o<r;++o)i[o]=this[o+e];return i},Pe.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||Ge(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},Pe.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||Ge(e,t,this.length);for(var r=this[e+--t],i=1;0<t&&(i*=256);)r+=this[e+--t]*i;return r},Pe.prototype.readUInt8=function(e,t){return t||Ge(e,1,this.length),this[e]},Pe.prototype.readUInt16LE=function(e,t){return t||Ge(e,2,this.length),this[e]|this[e+1]<<8},Pe.prototype.readUInt16BE=function(e,t){return t||Ge(e,2,this.length),this[e]<<8|this[e+1]},Pe.prototype.readUInt32LE=function(e,t){return t||Ge(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Pe.prototype.readUInt32BE=function(e,t){return t||Ge(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Pe.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||Ge(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},Pe.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||Ge(e,t,this.length);for(var r=t,i=1,o=this[e+--r];0<r&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},Pe.prototype.readInt8=function(e,t){return t||Ge(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Pe.prototype.readInt16LE=function(e,t){return t||Ge(e,2,this.length),t=this[e]|this[e+1]<<8,32768&t?4294901760|t:t},Pe.prototype.readInt16BE=function(e,t){return t||Ge(e,2,this.length),t=this[e+1]|this[e]<<8,32768&t?4294901760|t:t},Pe.prototype.readInt32LE=function(e,t){return t||Ge(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Pe.prototype.readInt32BE=function(e,t){return t||Ge(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Pe.prototype.readFloatLE=function(e,t){return t||Ge(e,4,this.length),Ie(this,e,!0,23,4)},Pe.prototype.readFloatBE=function(e,t){return t||Ge(e,4,this.length),Ie(this,e,!1,23,4)},Pe.prototype.readDoubleLE=function(e,t){return t||Ge(e,8,this.length),Ie(this,e,!0,52,8)},Pe.prototype.readDoubleBE=function(e,t){return t||Ge(e,8,this.length),Ie(this,e,!1,52,8)},Pe.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||We(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},Pe.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||We(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;0<=--i&&(o*=256);)this[t+i]=e/o&255;return t+n},Pe.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||We(this,e,t,1,255,0),Pe.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},Pe.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||We(this,e,t,2,65535,0),Pe.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Ke(this,e,t,!0),t+2},Pe.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||We(this,e,t,2,65535,0),Pe.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Ke(this,e,t,!1),t+2},Pe.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||We(this,e,t,4,4294967295,0),Pe.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):Xe(this,e,t,!0),t+4},Pe.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||We(this,e,t,4,4294967295,0),Pe.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Xe(this,e,t,!1),t+4},Pe.prototype.writeIntLE=function(e,t,n,r){e=+e,t|=0,r||We(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var i=0,o=1,a=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+n},Pe.prototype.writeIntBE=function(e,t,n,r){e=+e,t|=0,r||We(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var i=n-1,o=1,a=0;for(this[t+i]=255&e;0<=--i&&(o*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+n},Pe.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||We(this,e,t,1,127,-128),Pe.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&(e=e<0?255+e+1:e),t+1},Pe.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||We(this,e,t,2,32767,-32768),Pe.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Ke(this,e,t,!0),t+2},Pe.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||We(this,e,t,2,32767,-32768),Pe.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Ke(this,e,t,!1),t+2},Pe.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||We(this,e,t,4,2147483647,-2147483648),Pe.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):Xe(this,e,t,!0),t+4},Pe.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||We(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Pe.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Xe(this,e,t,!1),t+4},Pe.prototype.writeFloatLE=function(e,t,n){return Je(this,e,t,!0,n)},Pe.prototype.writeFloatBE=function(e,t,n){return Je(this,e,t,!1,n)},Pe.prototype.writeDoubleLE=function(e,t,n){return Qe(this,e,t,!0,n)},Pe.prototype.writeDoubleBE=function(e,t,n){return Qe(this,e,t,!1,n)},Pe.prototype.copy=function(e,t,n,r){if(n=n||0,r||0===r||(r=this.length),t>=e.length&&(t=e.length),(r=0<r&&r<n?n:r)===n)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length);var i,o=(r=e.length-t<r-n?e.length-t+n:r)-n;if(this===e&&n<t&&t<r)for(i=o-1;0<=i;--i)e[i+t]=this[i+n];else if(o<1e3||!Pe.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},Pe.prototype.fill=function(e,t,n,r){if("string"==typeof e){var i;if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length&&(i=e.charCodeAt(0))<256&&(e=i),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!Pe.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(!(n<=t))if(t>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(e=e||0))for(s=t;s<n;++s)this[s]=e;else for(var o=qe(e)?e:et(new Pe(e,r).toString()),a=o.length,s=0;s<n-t;++s)this[s+t]=o[s%a];return this};var vi,bi=/[^+\/0-9A-Za-z-_]/g,Xr="function"==typeof de.default?function(e,t){e.super_=t,e.prototype=(0,de.default)(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){function n(){}e.super_=t,n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e},_i=/%[sdj%]/g,yi={};st.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},st.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var wi,xi,ki,Si,Ci,Ti,Ei=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Zr=t((0,Y.default)({__proto__:null,format:it,deprecate:ot,debuglog:at,inspect:st,isArray:pt,isBoolean:ht,isNull:gt,isNullOrUndefined:mt,isNumber:vt,isString:bt,isSymbol:_t,isUndefined:yt,isRegExp:wt,isObject:xt,isDate:kt,isError:St,isFunction:Ct,isPrimitive:Tt,isBuffer:Et,log:Rt,inherits:Xr,_extend:Ot,default:{inherits:Xr,_extend:Ot,log:Rt,isBuffer:Et,isPrimitive:Tt,isFunction:Ct,isError:St,isDate:kt,isObject:xt,isRegExp:wt,isUndefined:yt,isSymbol:_t,isString:bt,isNumber:vt,isNullOrUndefined:mt,isNull:gt,isBoolean:ht,isArray:pt,inspect:st,deprecate:ot,format:it,debuglog:at}})),Jr="object"==("undefined"==typeof globalThis?"undefined":(0,Ae.default)(globalThis))?globalThis:"object"==("undefined"==typeof self?"undefined":(0,Ae.default)(self))?self:"object"==("undefined"==typeof window?"undefined":(0,Ae.default)(window))?window:"object"==(void 0===qr?"undefined":(0,Ae.default)(qr))?qr:{},Ii="1.2.0",Ai=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/,Ri=(wi=Ii,Ci=new q.default([wi]),Ti=new q.default,(Qr=wi.match(Ai))?(xi=+Qr[1],ki=+Qr[2],Si=+Qr[3],null!=Qr[4]?function(e){return e===wi}:function(e){var t,n,r,i;return!!Ci.has(e)||!Ti.has(e)&&((t=e.match(Ai))&&(n=+t[1],r=+t[2],i=+t[3],null==t[4]&&xi==n)?0==xi?ki==r&&Si<=i?Mt:Pt:ki<=r?Mt:Pt:Pt)(e)}):function(){return!1}),ei=Ii.split(".")[0],Oi=(0,D.default)("opentelemetry.js.api."+ei),Li=Jr;Ft.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return qt("debug",this._namespace,e)},Ft.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return qt("error",this._namespace,e)},Ft.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return qt("info",this._namespace,e)},Ft.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return qt("warn",this._namespace,e)},Ft.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return qt("verbose",this._namespace,e)};var Pi,Mi=Ft;(Xr=Pi=Pi||{})[Xr.NONE=0]="NONE",Xr[Xr.ERROR=30]="ERROR",Xr[Xr.WARN=50]="WARN",Xr[Xr.INFO=60]="INFO",Xr[Xr.DEBUG=70]="DEBUG",Xr[Xr.VERBOSE=80]="VERBOSE",Xr[Xr.ALL=9999]="ALL",Bt.instance=function(){return this._instance||(this._instance=new Bt),this._instance};var $i=Bt,Ni=(Ut.prototype.getEntry=function(e){if(e=this._entries.get(e))return(0,K.default)({},e)},Ut.prototype.getAllEntries=function(){return(0,te.default)(this._entries.entries()).map(function(e){return[e[0],e[1]]})},Ut.prototype.setEntry=function(e,t){var n=new Ut(this._entries);return n._entries.set(e,t),n},Ut.prototype.removeEntry=function(e){var t=new Ut(this._entries);return t._entries.delete(e),t},Ut.prototype.removeEntries=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=new Ut(this._entries),r=0,i=e;r<i.length;r++){var o=i[r];n._entries.delete(o)}return n},Ut.prototype.clear=function(){return new Ut},Ut),Di=(0,ge.default)("BaggageEntryMetadata"),Fi=$i.instance(),qi={get:function(e,t){if(null!=e)return e[t]},keys:function(e){return null==e?[]:(0,Ee.default)(e)}},Ui={set:function(e,t,n){null!=e&&(e[t]=n)}},Bi=new function e(t){var n=this;n._currentContext=t?new re.default(t):new re.default,n.getValue=function(e){return n._currentContext.get(e)},n.setValue=function(t,r){var i=new e(n._currentContext);return i._currentContext.set(t,r),i},n.deleteValue=function(t){var r=new e(n._currentContext);return r._currentContext.delete(t),r}};Yt.prototype.active=function(){return Bi},Yt.prototype.with=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];return t.call.apply(t,function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e}([n],r))},Yt.prototype.bind=function(e,t){return t},Yt.prototype.enable=function(){return this},Yt.prototype.disable=function(){return this};var ji="context",Vi=new Yt,Hi=(Ht.getInstance=function(){return this._instance||(this._instance=new Ht),this._instance},Ht.prototype.setGlobalContextManager=function(e){return $t(ji,e,$i.instance())},Ht.prototype.active=function(){return this._getContextManager().active()},Ht.prototype.with=function(e,t,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return(r=this._getContextManager()).with.apply(r,function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e}([e,t,n],i))},Ht.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},Ht.prototype._getContextManager=function(){return Nt(ji)||Vi},Ht.prototype.disable=function(){this._getContextManager().disable(),Dt(ji,$i.instance())},Ht);(Qr=co=co||{})[Qr.NONE=0]="NONE",Qr[Qr.SAMPLED=1]="SAMPLED";var Yi,zi="0000000000000000",Gi="00000000000000000000000000000000",Wi={traceId:Gi,spanId:zi,traceFlags:co.NONE},Ki=(zt.prototype.spanContext=function(){return this._spanContext},zt.prototype.setAttribute=function(e,t){return this},zt.prototype.setAttributes=function(e){return this},zt.prototype.addEvent=function(e,t){return this},zt.prototype.setStatus=function(e){return this},zt.prototype.updateName=function(e){return this},zt.prototype.end=function(e){},zt.prototype.isRecording=function(){return!1},zt.prototype.recordException=function(e,t){},zt),Xi=Vt("OpenTelemetry Context Key SPAN"),Zi=/^([0-9a-f]{32})$/i,Ji=/^[0-9a-f]{16}$/i,Qi=Hi.getInstance(),eo=(tn.prototype.startSpan=function(e,t,n){return!Boolean(null==t?void 0:t.root)&&"object"==(0,Ae.default)(t=n&&Jt(n))&&"string"==typeof t.spanId&&"string"==typeof t.traceId&&"number"==typeof t.traceFlags&&Qt(t)?new Ki(t):new Ki},tn.prototype.startActiveSpan=function(e,t,n,r){var i,o;if(!(arguments.length<2))return t=2===arguments.length?t:3===arguments.length?(i=t,n):(i=t,o=n,r),o=Kt(n=null!=o?o:Qi.active(),r=this.startSpan(e,i,n)),Qi.with(o,t,void 0,r)},tn),to=new eo,no=(on.prototype.startSpan=function(e,t,n){return this._getTracer().startSpan(e,t,n)},on.prototype.startActiveSpan=function(e,t,n,r){var i=this._getTracer();return(0,P.default)(i.startActiveSpan,i,arguments)},on.prototype._getTracer=function(){var e;return this._delegate||((e=this._provider.getDelegateTracer(this.name,this.version,this.options))?(this._delegate=e,this._delegate):to)},on),ro=(rn.prototype.getTracer=function(e,t,n){return new eo},new rn),io=(nn.prototype.getTracer=function(e,t,n){var r;return null!=(r=this.getDelegateTracer(e,t,n))?r:new no(this,e,t,n)},nn.prototype.getDelegate=function(){var e;return null!=(e=this._delegate)?e:ro},nn.prototype.setDelegate=function(e){this._delegate=e},nn.prototype.getDelegateTracer=function(e,t,n){var r;return null==(r=this._delegate)?void 0:r.getTracer(e,t,n)},nn);(ei=Yi=Yi||{})[ei.NOT_RECORD=0]="NOT_RECORD",ei[ei.RECORD=1]="RECORD",ei[ei.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED",(Jr=ea=ea||{})[Jr.INTERNAL=0]="INTERNAL",Jr[Jr.SERVER=1]="SERVER",Jr[Jr.CLIENT=2]="CLIENT",Jr[Jr.PRODUCER=3]="PRODUCER",Jr[Jr.CONSUMER=4]="CONSUMER";var oo="trace",Xr=(sn.getInstance=function(){return this._instance||(this._instance=new sn),this._instance},sn.prototype.setGlobalTracerProvider=function(e){var t=$t(oo,this._proxyTracerProvider,$i.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},sn.prototype.getTracerProvider=function(){return Nt(oo)||this._proxyTracerProvider},sn.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},sn.prototype.disable=function(){Dt(oo,$i.instance()),this._proxyTracerProvider=new io},sn),Qr=(an.prototype.inject=function(e,t){},an.prototype.extract=function(e,t){return e},an.prototype.fields=function(){return[]},an),ao=Vt("OpenTelemetry Baggage Key"),so="propagation",lo=new Qr,co=(dn.getInstance=function(){return this._instance||(this._instance=new dn),this._instance},dn.prototype.setGlobalPropagator=function(e){return $t(so,e,$i.instance())},dn.prototype.inject=function(e,t,n){return void 0===n&&(n=Ui),this._getGlobalPropagator().inject(e,t,n)},dn.prototype.extract=function(e,t,n){return void 0===n&&(n=qi),this._getGlobalPropagator().extract(e,t,n)},dn.prototype.fields=function(){return this._getGlobalPropagator().fields()},dn.prototype.disable=function(){Dt(so,$i.instance())},dn.prototype._getGlobalPropagator=function(){return Nt(so)||lo},dn);Hi.getInstance(),Xr.getInstance(),co.getInstance();var uo=$i.instance();(ei=ko=ko||{}).AlwaysOff="always_off",ei.AlwaysOn="always_on",ei.ParentBasedAlwaysOff="parentbased_always_off",ei.ParentBasedAlwaysOn="parentbased_always_on",ei.ParentBasedTraceIdRatio="parentbased_traceidratio",ei.TraceIdRatio="traceidratio";var fo="object"==("undefined"==typeof globalThis?"undefined":(0,Ae.default)(globalThis))?globalThis:"object"==("undefined"==typeof self?"undefined":(0,Ae.default)(self))?self:"object"==("undefined"==typeof window?"undefined":(0,Ae.default)(window))?window:"object"==(void 0===qr?"undefined":(0,Ae.default)(qr))?qr:{},po=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"],ho=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"],go={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:Pi.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:1/0,OTEL_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:1/0,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"none",OTEL_TRACES_SAMPLER:ko.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:""},mo={ALL:Pi.ALL,VERBOSE:Pi.VERBOSE,DEBUG:Pi.DEBUG,INFO:Pi.INFO,WARN:Pi.WARN,ERROR:Pi.ERROR,NONE:Pi.NONE};Array(32);var vo,bo={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"},Jr={CPP:"cpp",DOTNET:"dotnet",ERLANG:"erlang",GO:"go",JAVA:"java",NODEJS:"nodejs",PHP:"php",PYTHON:"python",RUBY:"ruby",WEBJS:"webjs"},Qr=(0,Y.default)({__proto__:null,SemanticAttributes:{AWS_LAMBDA_INVOKED_ARN:"aws.lambda.invoked_arn",DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",NET_HOST_CONNECTION_TYPE:"net.host.connection.type",NET_HOST_CONNECTION_SUBTYPE:"net.host.connection.subtype",NET_HOST_CARRIER_NAME:"net.host.carrier.name",NET_HOST_CARRIER_MCC:"net.host.carrier.mcc",NET_HOST_CARRIER_MNC:"net.host.carrier.mnc",NET_HOST_CARRIER_ICC:"net.host.carrier.icc",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_CONSUMER_ID:"messaging.consumer_id",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message",MESSAGE_TYPE:"message.type",MESSAGE_ID:"message.id",MESSAGE_COMPRESSED_SIZE:"message.compressed_size",MESSAGE_UNCOMPRESSED_SIZE:"message.uncompressed_size"},DbSystemValues:{OTHER_SQL:"other_sql",MSSQL:"mssql",MYSQL:"mysql",ORACLE:"oracle",DB2:"db2",POSTGRESQL:"postgresql",REDSHIFT:"redshift",HIVE:"hive",CLOUDSCAPE:"cloudscape",HSQLDB:"hsqldb",PROGRESS:"progress",MAXDB:"maxdb",HANADB:"hanadb",INGRES:"ingres",FIRSTSQL:"firstsql",EDB:"edb",CACHE:"cache",ADABAS:"adabas",FIREBIRD:"firebird",DERBY:"derby",FILEMAKER:"filemaker",INFORMIX:"informix",INSTANTDB:"instantdb",INTERBASE:"interbase",MARIADB:"mariadb",NETEZZA:"netezza",PERVASIVE:"pervasive",POINTBASE:"pointbase",SQLITE:"sqlite",SYBASE:"sybase",TERADATA:"teradata",VERTICA:"vertica",H2:"h2",COLDFUSION:"coldfusion",CASSANDRA:"cassandra",HBASE:"hbase",MONGODB:"mongodb",REDIS:"redis",COUCHBASE:"couchbase",COUCHDB:"couchdb",COSMOSDB:"cosmosdb",DYNAMODB:"dynamodb",NEO4J:"neo4j",GEODE:"geode",ELASTICSEARCH:"elasticsearch",MEMCACHED:"memcached",COCKROACHDB:"cockroachdb"},DbCassandraConsistencyLevelValues:{ALL:"all",EACH_QUORUM:"each_quorum",QUORUM:"quorum",LOCAL_QUORUM:"local_quorum",ONE:"one",TWO:"two",THREE:"three",LOCAL_ONE:"local_one",ANY:"any",SERIAL:"serial",LOCAL_SERIAL:"local_serial"},FaasTriggerValues:{DATASOURCE:"datasource",HTTP:"http",PUBSUB:"pubsub",TIMER:"timer",OTHER:"other"},FaasDocumentOperationValues:{INSERT:"insert",EDIT:"edit",DELETE:"delete"},FaasInvokedProviderValues:{ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"},NetTransportValues:{IP_TCP:"ip_tcp",IP_UDP:"ip_udp",IP:"ip",UNIX:"unix",PIPE:"pipe",INPROC:"inproc",OTHER:"other"},NetHostConnectionTypeValues:{WIFI:"wifi",WIRED:"wired",CELL:"cell",UNAVAILABLE:"unavailable",UNKNOWN:"unknown"},NetHostConnectionSubtypeValues:{GPRS:"gprs",EDGE:"edge",UMTS:"umts",CDMA:"cdma",EVDO_0:"evdo_0",EVDO_A:"evdo_a",CDMA2000_1XRTT:"cdma2000_1xrtt",HSDPA:"hsdpa",HSUPA:"hsupa",HSPA:"hspa",IDEN:"iden",EVDO_B:"evdo_b",LTE:"lte",EHRPD:"ehrpd",HSPAP:"hspap",GSM:"gsm",TD_SCDMA:"td_scdma",IWLAN:"iwlan",NR:"nr",NRNSA:"nrnsa",LTE_CA:"lte_ca"},HttpFlavorValues:{HTTP_1_0:"1.0",HTTP_1_1:"1.1",HTTP_2_0:"2.0",SPDY:"SPDY",QUIC:"QUIC"},MessagingDestinationKindValues:{QUEUE:"queue",TOPIC:"topic"},MessagingOperationValues:{RECEIVE:"receive",PROCESS:"process"},RpcGrpcStatusCodeValues:{OK:0,CANCELLED:1,UNKNOWN:2,INVALID_ARGUMENT:3,DEADLINE_EXCEEDED:4,NOT_FOUND:5,ALREADY_EXISTS:6,PERMISSION_DENIED:7,RESOURCE_EXHAUSTED:8,FAILED_PRECONDITION:9,ABORTED:10,OUT_OF_RANGE:11,UNIMPLEMENTED:12,INTERNAL:13,UNAVAILABLE:14,DATA_LOSS:15,UNAUTHENTICATED:16},MessageTypeValues:{SENT:"SENT",RECEIVED:"RECEIVED"},SemanticResourceAttributes:bo,CloudProviderValues:{ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"},CloudPlatformValues:{ALIBABA_CLOUD_ECS:"alibaba_cloud_ecs",ALIBABA_CLOUD_FC:"alibaba_cloud_fc",AWS_EC2:"aws_ec2",AWS_ECS:"aws_ecs",AWS_EKS:"aws_eks",AWS_LAMBDA:"aws_lambda",AWS_ELASTIC_BEANSTALK:"aws_elastic_beanstalk",AZURE_VM:"azure_vm",AZURE_CONTAINER_INSTANCES:"azure_container_instances",AZURE_AKS:"azure_aks",AZURE_FUNCTIONS:"azure_functions",AZURE_APP_SERVICE:"azure_app_service",GCP_COMPUTE_ENGINE:"gcp_compute_engine",GCP_CLOUD_RUN:"gcp_cloud_run",GCP_KUBERNETES_ENGINE:"gcp_kubernetes_engine",GCP_CLOUD_FUNCTIONS:"gcp_cloud_functions",GCP_APP_ENGINE:"gcp_app_engine"},AwsEcsLaunchtypeValues:{EC2:"ec2",FARGATE:"fargate"},HostArchValues:{AMD64:"amd64",ARM32:"arm32",ARM64:"arm64",IA64:"ia64",PPC32:"ppc32",PPC64:"ppc64",X86:"x86"},OsTypeValues:{WINDOWS:"windows",LINUX:"linux",DARWIN:"darwin",FREEBSD:"freebsd",NETBSD:"netbsd",OPENBSD:"openbsd",DRAGONFLYBSD:"dragonflybsd",HPUX:"hpux",AIX:"aix",SOLARIS:"solaris",Z_OS:"z_os"},TelemetrySdkLanguageValues:Jr}),_o=((Xr={})[bo.TELEMETRY_SDK_NAME]="opentelemetry",Xr[bo.PROCESS_RUNTIME_NAME]="browser",Xr[bo.TELEMETRY_SDK_LANGUAGE]=Jr.WEBJS,Xr[bo.TELEMETRY_SDK_VERSION]="1.6.0",Xr),yo=Math.pow(10,9);(co=vo=vo||{})[co.SUCCESS=0]="SUCCESS",co[co.FAILED=1]="FAILED",hn.prototype.shouldSample=function(){return{decision:Yi.RECORD_AND_SAMPLED}},hn.prototype.toString=function(){return"AlwaysOnSampler"},ei=hn,Function.prototype.toString.call(Object),Object.defineProperty(gn.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),gn.prototype.resolve=function(e){this._resolve(e)},gn.prototype.reject=function(e){this._reject(e)};var wo=gn;Object.defineProperty(mn.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(mn.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),mn.prototype.call=function(){for(var e,t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(!this._isCalled){this._isCalled=!0;try{O.default.resolve((e=this._callback).call.apply(e,function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||((r=r||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([this._that],function(e,t){var n="function"==typeof ge.default&&e[pe.default];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}(n),!1))).then(function(e){return t._deferred.resolve(e)},function(e){return t._deferred.reject(e)})}catch(e){this._deferred.reject(e)}}return this._deferred.promise},En.prototype.detect=function(){return e=this,r=function(){return _n(this,function(e){return[2,new So({})]})},new(n=(n=t=void 0)||O.default)(function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())});var e,t,n,r};var xo,ko=new En,Jr=ko,Xr=ko,So=(Tn.empty=function(){return Tn.EMPTY},Tn.default=function(){var e;return new Tn(((e={})[bo.SERVICE_NAME]="unknown_service",e[bo.TELEMETRY_SDK_LANGUAGE]=_o[bo.TELEMETRY_SDK_LANGUAGE],e[bo.TELEMETRY_SDK_NAME]=_o[bo.TELEMETRY_SDK_NAME],e[bo.TELEMETRY_SDK_VERSION]=_o[bo.TELEMETRY_SDK_VERSION],e))},Tn.prototype.merge=function(e){return e&&(0,Ee.default)(e.attributes).length?new Tn((0,K.default)({},this.attributes,e.attributes)):this},Tn.EMPTY=new Tn({}),Tn),Co=function(){return(Co=K.default||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Cn.prototype.detect=function(e){return t=this,i=function(){var t;return yn(this,function(n){return"undefined"!=typeof navigator?((t={})[bo.PROCESS_RUNTIME_NAME]="browser",t[bo.PROCESS_RUNTIME_DESCRIPTION]="Web Browser",t[bo.PROCESS_RUNTIME_VERSION]=navigator.userAgent,t=t,[2,this._getResourceAttributes(t,e)]):[2,So.empty()]})},new(r=(r=n=void 0)||O.default)(function(e,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(t){var n;t.done?e(t.value):((n=t.value)instanceof r?n:new r(function(e){e(n)})).then(a,s)}l((i=i.apply(t,n||[])).next())});var t,n,r,i},Cn.prototype._getResourceAttributes=function(e,t){return""===e[bo.PROCESS_RUNTIME_VERSION]?(uo.debug("BrowserDetector failed: Unable to find required browser resources. "),So.empty()):new So(Co({},e))},co=new Cn,Sn.prototype.detect=function(e){return t=this,i=function(){var e,t,n,r;return wn(this,function(i){if(e={},n=pn(),t=n.OTEL_RESOURCE_ATTRIBUTES,n=n.OTEL_SERVICE_NAME,t)try{r=this._parseResourceAttributes(t),(0,K.default)(e,r)}catch(i){uo.debug("EnvDetector failed: "+i.message)}return n&&(e[bo.SERVICE_NAME]=n),[2,new So(e)]})},new(r=(r=n=void 0)||O.default)(function(e,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(t){var n;t.done?e(t.value):((n=t.value)instanceof r?n:new r(function(e){e(n)})).then(a,s)}l((i=i.apply(t,n||[])).next())});var t,n,r,i},Sn.prototype._parseResourceAttributes=function(e){var t,n;if(!e)return{};var r={},i=e.split(this._COMMA_SEPARATOR,-1);try{for(var o=function(e){var t="function"==typeof ge.default&&pe.default,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),a=o.next();!a.done;a=o.next()){var s=a.value.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(2===s.length){var l=function(e,t){var n="function"==typeof ge.default&&e[pe.default];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}(s,2),c=l[0],u=l[1],c=c.trim(),u=u.trim().split('^"|"$').join("");if(!this._isValidAndNotEmpty(c))throw new Error("Attribute key "+this._ERROR_MESSAGE_INVALID_CHARS);if(!this._isValid(u))throw new Error("Attribute value "+this._ERROR_MESSAGE_INVALID_VALUE);r[c]=u}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r},Sn.prototype._isValid=function(e){return e.length<=this._MAX_LENGTH&&this._isPrintableString(e)},Sn.prototype._isPrintableString=function(e){for(var t=0;t<e.length;t++){var n=e.charAt(t);if(n<=" "||"~"<=n)return!1}return!0},Sn.prototype._isValidAndNotEmpty=function(e){return 0<e.length&&this._isValid(e)};var ko=new Sn,To=function(){return(To=K.default||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};kn.prototype.detect=function(e){return t=this,i=function(){var t;return xn(this,function(n){return"object"!=(void 0===ii?"undefined":(0,Ae.default)(ii))?[2,So.empty()]:((t={})[bo.PROCESS_PID]=ii.pid,t[bo.PROCESS_EXECUTABLE_NAME]=ii.title||"",t[bo.PROCESS_COMMAND]=ii.argv[1]||"",t[bo.PROCESS_COMMAND_LINE]=ii.argv.join(" ")||"",t[bo.PROCESS_RUNTIME_VERSION]=ii.versions.node,t[bo.PROCESS_RUNTIME_NAME]="nodejs",t[bo.PROCESS_RUNTIME_DESCRIPTION]="Node.js",t=t,[2,this._getResourceAttributes(t,e)])})},new(r=(r=n=void 0)||O.default)(function(e,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(t){var n;t.done?e(t.value):((n=t.value)instanceof r?n:new r(function(e){e(n)})).then(a,s)}l((i=i.apply(t,n||[])).next())});var t,n,r,i},kn.prototype._getResourceAttributes=function(e,t){return""===e[bo.PROCESS_EXECUTABLE_NAME]||""===e[bo.PROCESS_EXECUTABLE_PATH]||""===e[bo.PROCESS_COMMAND]||""===e[bo.PROCESS_COMMAND_LINE]||""===e[bo.PROCESS_RUNTIME_VERSION]?(uo.debug("ProcessDetector failed: Unable to find required process resources. "),So.empty()):new So(To({},e))};var Eo,Io=new kn,Jr=(0,Y.default)({__proto__:null,Resource:So,defaultServiceName:function(){return"unknown_service"},detectResources:function(e){return void 0===e&&(e={}),vn(void 0,void 0,void 0,function(){var t;return bn(this,function(n){switch(n.label){case 0:return t=(0,K.default)(e),[4,O.default.all((t.detectors||[]).map(function(e){return vn(void 0,void 0,void 0,function(){var n;return bn(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e.detect(t)];case 1:return n=r.sent(),uo.debug(e.constructor.name+" found resource.",n),[2,n];case 2:return n=r.sent(),uo.debug(e.constructor.name+" failed: "+n.message),[2,So.empty()];case 3:return[2]}})})}))];case 1:return[2,n.sent().reduce(function(e,t){return e.merge(t)},So.empty())]}})})},hostDetector:Jr,osDetector:Xr,browserDetector:co,envDetector:ko,processDetector:Io});(Xr=xo=xo||{}).TRACE="TRACE",Xr.DEBUG="DEBUG",Xr.INFO="INFO",Xr.WARN="WARN",Xr.ERROR="ERROR";var Ao={name:"",body:"",traceID:"",spanID:"",sampled:!(Xr.FATAL="FATAL"),level:xo.DEBUG,time:[0,0],resource:So.default(),attributes:{},instrumentationLibrary:{name:"unknown"}};(co=Eo=Eo||{})[co.resolved=0]="resolved",co[co.timeout=1]="timeout",co[co.error=2]="error",co[co.unresolved=3]="unresolved";var Ro={sampler:new ei,forceFlushTimeoutMillis:3e4},ko={exports:{}},Oo=(Io=wr,Xr=function(){function e(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function t(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function n(e,t){for(var n=0;n<l.length;n++){var r=l[n];this[r]=n<e?o:this.methodFactory(r,e,t)}this.log=this.debug}function r(r,i,l){return"debug"===(r=r)&&(r="log"),("undefined"==typeof console?"undefined":(0,Ae.default)(console))!==a&&("trace"===r&&s?t:void 0!==console[r]?e(console,r):void 0!==console.log?e(console,"log"):o)||function(e,t,r){return function(){("undefined"==typeof console?"undefined":(0,Ae.default)(console))!==a&&(n.call(this,t,r),this[e].apply(this,arguments))}}.apply(this,arguments)}function i(e,t,i){function o(){var e;if(("undefined"==typeof window?"undefined":(0,Ae.default)(window))!==a&&u){try{e=window.localStorage[u]}catch(e){}if((void 0===e?"undefined":(0,Ae.default)(e))===a)try{var t=window.document.cookie,n=t.indexOf(encodeURIComponent(u)+"=");-1!==n&&(e=/^([^;]+)/.exec(t.slice(n))[1])}catch(e){}return e=void 0===c.levels[e]?void 0:e}}var s,c=this,u=(t=null==t?"WARN":t,"loglevel");"string"==typeof e?u+=":"+e:"symbol"==(void 0===e?"undefined":(0,Ae.default)(e))&&(u=void 0),c.name=e,c.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},c.methodFactory=i||r,c.getLevel=function(){return s},c.setLevel=function(t,r){if(!("number"==typeof(t="string"==typeof t&&void 0!==c.levels[t.toUpperCase()]?c.levels[t.toUpperCase()]:t)&&0<=t&&t<=c.levels.SILENT))throw"log.setLevel() called with invalid level: "+t;if(s=t,!1!==r&&function(){var e=(l[t]||"silent").toUpperCase();if(("undefined"==typeof window?"undefined":(0,Ae.default)(window))!==a&&u){try{return window.localStorage[u]=e}catch(e){}try{window.document.cookie=encodeURIComponent(u)+"="+e+";"}catch(e){}}}(),n.call(c,t,e),("undefined"==typeof console?"undefined":(0,Ae.default)(console))===a&&t<c.levels.SILENT)return"No console available for logging"},c.setDefaultLevel=function(e){t=e,o()||c.setLevel(e,!1)},c.resetLevel=function(){if(c.setLevel(t,!1),("undefined"==typeof window?"undefined":(0,Ae.default)(window))!==a&&u){try{return void window.localStorage.removeItem(u)}catch(e){}try{window.document.cookie=encodeURIComponent(u)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}},c.enableAll=function(e){c.setLevel(c.levels.TRACE,e)},c.disableAll=function(e){c.setLevel(c.levels.SILENT,e)},i=o(),null==i&&(i=t),c.setLevel(i,!1)}var o=function(){},a="undefined",s=("undefined"==typeof window?"undefined":(0,Ae.default)(window))!==a&&(0,Ae.default)(window.navigator)!==a&&/Trident\/|MSIE /.test(window.navigator.userAgent),l=["trace","debug","info","warn","error"],c=new i,u={},d=(c.getLogger=function(e){if("symbol"!=(void 0===e?"undefined":(0,Ae.default)(e))&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");return u[e]||(u[e]=new i(e,c.getLevel(),c.methodFactory))},("undefined"==typeof window?"undefined":(0,Ae.default)(window))!==a?window.log:void 0);return c.noConflict=function(){return("undefined"==typeof window?"undefined":(0,Ae.default)(window))!==a&&window.log===c&&(window.log=d),c},c.getLoggers=function(){return u},c.default=c},(co=ko).exports?co.exports=Xr():Io.log=Xr(),ko.exports),Lo={trace:xo.TRACE,debug:xo.DEBUG,log:xo.DEBUG,info:xo.INFO,warn:xo.WARN,error:xo.ERROR},Po=["name","traceID","spanID","resource","attributes"],Mo=Oo,$o={maxExportBatchSize:512,scheduledDelayMillis:5e3,exportTimeoutMillis:3e4,maxQueueSize:2048};ei=t((0,Y.default)({__proto__:null,get ForceFlushState(){return Eo},DEFAULT_CONFIG:Ro,LogProvider:function(){function e(t){(0,E.default)(this,e),this.registeredLogProcessors=[];var n=null!=(n=null==t?void 0:t.resource)?n:So.empty();this.config=(0,C.default)({},Ro,t,{resource:So.default().merge(n)})}return(0,A.default)(e,[{key:"addLogProcessor",value:function(e){this.registeredLogProcessors.push(e)}},{key:"getConfig",value:function(){return this.config}},{key:"getRegisteredLogProcessors",value:function(){return this.registeredLogProcessors}},{key:"forceFlush",value:function(){var e=this.config.forceFlushTimeoutMillis,t=this.registeredLogProcessors.map(function(t){return new O.default(function(n){var r=void 0,i=setTimeout(function(){n(new Error("log processor did not completed within timeout period of "+e+" ms")),r=Eo.timeout},e);t.forceFlush().then(function(){clearTimeout(i),r!==Eo.timeout&&(r=Eo.resolved,n(r))}).catch(function(e){clearTimeout(i),r=Eo.error,n(e)})})});return new O.default(function(e,n){O.default.all(t).then(function(t){t=t.filter(function(e){return e!==Eo.resolved}),0<t.length?n(t):e()}).catch(function(e){return n([e])})})}},{key:"log",value:function(e){var t=e,e=Ao.attributes,n=t.attributes,r=function(){var e=Error().stack;return e?e.trim().split("\n").slice(1).map(function(e){return e.trim()}).join("\n"):""}();t=(0,C.default)({},t,{attributes:(0,C.default)({},e,n,{line:r})});var i=this.config.resource,o=void 0===i?So.empty():i,a=t,s=a.resource,l=void 0===s?So.empty():s,c=(t=(0,C.default)({},t,{resource:o.merge(l)}),this.config).sampler;if(c){var u=c.shouldSample().decision;t=(0,C.default)({},t,{sampled:u===Yi.RECORD_AND_SAMPLED})}this.registeredLogProcessors.forEach(function(e){return e.log((0,C.default)({},Ao,t,{time:function(e){var e=e/1e3,t=(0,k.default)(e);return[t,1e9*Number((e-t).toFixed(9))]}(Date.now())}))})}}]),e}(),get Level(){return xo},baseLogFields:Ao,useLoglevel:function(e){var t=Mo.methodFactory;return Mo.methodFactory=function(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default",o=t(n,r,i),a="string"==typeof i?i:i.toString(),s=null!=(r=Lo[n])?r:xo.DEBUG;return function(t,n){var r=n;return r&&(0,Ee.default)(r).forEach(function(e){-1===Po.indexOf(e)&&delete r[e]}),e.log((0,C.default)({name:a,level:s,body:t,instrumentationLibrary:{name:"loglevel"}},r)),o(t)}},Mo.setLevel(Oo.getLevel()),Mo},SimpleLogProcessor:function(){function e(t){(0,E.default)(this,e),this._exporter=t}return(0,A.default)(e,[{key:"forceFlush",value:function(){return O.default.resolve()}},{key:"log",value:function(e){e.sampled&&this._exporter.export([e],function(e){var t;e.code!==vo.SUCCESS&&fn(null!=(t=e.error)?t:new Error("SimpleLogProcessor: log export failed (status "+e+")"))})}},{key:"shutdown",value:function(){return O.default.resolve()}}]),e}(),BatchLogProcessor:function(e){function t(e,n){var r;return(0,E.default)(this,t),r=(0,_.default)(this,(t.__proto__||(0,se.default)(t)).call(this,e,n)),r.onInit(n),r}return(0,w.default)(t,e),(0,A.default)(t,[{key:"onShutdown",value:function(){document&&(this.visibilityChangeListener&&document.removeEventListener("visibilitychange",this.visibilityChangeListener),this.pageHideListener&&document.removeEventListener("pagehide",this.pageHideListener))}},{key:"onInit",value:function(e){var t=this;!0!==(null==e?void 0:e.disableAutoFlushOnDocumentHide)&&document&&(this.visibilityChangeListener=function(){"hidden"===document.visibilityState&&t.forceFlush()},this.pageHideListener=function(){t.forceFlush()},document.addEventListener("visibilitychange",this.visibilityChangeListener),document.addEventListener("pagehide",this.pageHideListener))}}]),t}(function(){function e(t,n){(0,E.default)(this,e),this._exporter=t,this.config=$o,this.finishedLogs=[],this.isShutdown=!1,n&&(this.config=(0,C.default)({},this.config,n))}return(0,A.default)(e,[{key:"forceFlush",value:function(){function e(){return t.apply(this,arguments)}var t=(0,v.default)(g.default.mark(function e(){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isShutdown){e.next=2;break}return e.abrupt("return",this.flushAll());case 2:case"end":return e.stop()}},e,this)}));return e}()},{key:"log",value:function(e){e.sampled&&!this.isShutdown&&this.appendToFinishedLogs(e)}},{key:"shutdown",value:function(){function e(){return t.apply(this,arguments)}var t=(0,v.default)(g.default.mark(function e(){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.isShutdown,e.t0){e.next=8;break}return e.next=4,this.onShutdown();case 4:return e.next=6,this.flushAll();case 6:return e.next=8,this._exporter.shutdown();case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"appendToFinishedLogs",value:function(e){var t=this.config.maxQueueSize;this.finishedLogs.length>=t||(this.finishedLogs.push(e),this.maybeStartTimer())}},{key:"flushAll",value:function(){function e(){return t.apply(this,arguments)}var t=(0,v.default)(g.default.mark(function e(){var t,n,r,i;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],n=this.config.maxExportBatchSize,r=Math.ceil(this.finishedLogs.length/n),i=0;i<r;i++)t.push(this.flushOneBatch);return e.next=4,O.default.all(t);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"flushOneBatch",value:function(){function e(){return t.apply(this,arguments)}var t=(0,v.default)(g.default.mark(function e(){var t=this;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.clearTimer(),!(0!==this.finishedLogs.length)){e.next=2;break}return e.abrupt("return",new O.default(function(e,n){var r=t.config,i=r.maxExportBatchSize,o=r.exportTimeoutMillis,a=setTimeout(function(){n(new Error("Timeout"))},o);t._exporter.export(t.finishedLogs.splice(0,i),function(t){clearTimeout(a),t.code===vo.SUCCESS?e():n(null!=(t=t.error)?t:new Error("BatchLogProcessor: log export failed"))})}));case 2:case"end":return e.stop()}},e,this)}));return e}()},{key:"maybeStartTimer",value:function(){var e,t=this;void 0===this.timer&&(e=this.config.scheduledDelayMillis,this.timer=setTimeout((0,v.default)(g.default.mark(function e(){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.flushOneBatch();case 3:0<t.finishedLogs.length&&(t.clearTimer(),t.maybeStartTimer()),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),fn(e.t0);case 9:case"end":return e.stop()}},e,t,[[0,6]])})),e),this.timer)}},{key:"clearTimer",value:function(){void 0!==this.timer&&(clearTimeout(this.timer),this.timer=void 0)}}]),e}())})),(wr=ta=ta||{}).AlwaysOff="always_off",wr.AlwaysOn="always_on",wr.ParentBasedAlwaysOff="parentbased_always_off",wr.ParentBasedAlwaysOn="parentbased_always_on",wr.ParentBasedTraceIdRatio="parentbased_traceidratio",wr.TraceIdRatio="traceidratio";var No=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT"],Do=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"],Fo={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:Pi.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:1/0,OTEL_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:1/0,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"none",OTEL_TRACES_SAMPLER:ta.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:""},qo={ALL:Pi.ALL,VERBOSE:Pi.VERBOSE,DEBUG:Pi.DEBUG,INFO:Pi.INFO,WARN:Pi.WARN,ERROR:Pi.ERROR,NONE:Pi.NONE},Uo="object"==("undefined"==typeof globalThis?"undefined":(0,Ae.default)(globalThis))?globalThis:"object"==("undefined"==typeof self?"undefined":(0,Ae.default)(self))?self:"object"==("undefined"==typeof window?"undefined":(0,Ae.default)(window))?window:"object"==(void 0===qr?"undefined":(0,Ae.default)(qr))?qr:{};Array(32);var Bo,jo=Math.pow(10,9);(co=Bo=Bo||{})[co.SUCCESS=0]="SUCCESS",co[co.FAILED=1]="FAILED",Function.prototype.toString.call(Object),Ln.prototype.export=function(e,t){this._isShutdown?t({code:Bo.FAILED,error:new Error("Exporter has been shutdown")}):this._sendingPromises.length>=this._concurrencyLimit?t({code:Bo.FAILED,error:new Error("Concurrent export limit reached")}):this._export(e).then(function(){t({code:Bo.SUCCESS})}).catch(function(e){t({code:Bo.FAILED,error:e})})},Ln.prototype._export=function(e){var t=this;return new O.default(function(n,r){try{uo.debug("items to be sent",e),t.send(e,n,r)}catch(n){r(n)}})},Ln.prototype.shutdown=function(){var e=this;return this._isShutdown?uo.debug("shutdown already started"):(this._isShutdown=!0,uo.debug("shutdown started"),this._shuttingDownPromise=new O.default(function(t,n){O.default.resolve().then(function(){return e.onShutdown()}).then(function(){return O.default.all(e._sendingPromises)}).then(function(){t()}).catch(function(e){n(e)})})),this._shuttingDownPromise},Io=Ln,Vo=function(e,t){return(Vo=ce.default||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},Xr=Ho=Ho||{},(ko=(ko=(ko=Xr.metrics||(Xr.metrics={})).v1||(ko.v1={})).AggregationTemporality||(ko.AggregationTemporality={}))[ko.AGGREGATION_TEMPORALITY_UNSPECIFIED=0]="AGGREGATION_TEMPORALITY_UNSPECIFIED",ko[ko.AGGREGATION_TEMPORALITY_DELTA=1]="AGGREGATION_TEMPORALITY_DELTA",ko[ko.AGGREGATION_TEMPORALITY_CUMULATIVE=2]="AGGREGATION_TEMPORALITY_CUMULATIVE",ko=(ko=Xr.trace||(Xr.trace={})).v1||(ko.v1={}),(wr=(wr=ko.ConstantSampler||(ko.ConstantSampler={})).ConstantDecision||(wr.ConstantDecision={}))[wr.ALWAYS_OFF=0]="ALWAYS_OFF",wr[wr.ALWAYS_ON=1]="ALWAYS_ON",wr[wr.ALWAYS_PARENT=2]="ALWAYS_PARENT",(ko=(wr=ko.Span||(ko.Span={})).SpanKind||(wr.SpanKind={}))[ko.SPAN_KIND_UNSPECIFIED=0]="SPAN_KIND_UNSPECIFIED",ko[ko.SPAN_KIND_INTERNAL=1]="SPAN_KIND_INTERNAL",ko[ko.SPAN_KIND_SERVER=2]="SPAN_KIND_SERVER",ko[ko.SPAN_KIND_CLIENT=3]="SPAN_KIND_CLIENT",ko[ko.SPAN_KIND_PRODUCER=4]="SPAN_KIND_PRODUCER",ko[ko.SPAN_KIND_CONSUMER=5]="SPAN_KIND_CONSUMER",(wr=(wr=(wr=Xr.common||(Xr.common={})).v1||(wr.v1={})).ValueType||(wr.ValueType={}))[wr.STRING=0]="STRING",wr[wr.INT=1]="INT",wr[wr.DOUBLE=2]="DOUBLE",wr[wr.BOOL=3]="BOOL";var Vo,Ho,Yo=function(e){function t(t,n,r){return t=e.call(this,t)||this,t.name="OTLPExporterError",t.data=r,t.code=n,t}function n(){this.constructor=r}var r=t,i=e;if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");return Vo(r,i),r.prototype=null===i?(0,de.default)(i):(n.prototype=i.prototype,new n),t}(Error),zo=((ta={})[ea.INTERNAL]=Ho.trace.v1.Span.SpanKind.SPAN_KIND_INTERNAL,ta[ea.SERVER]=Ho.trace.v1.Span.SpanKind.SPAN_KIND_SERVER,ta[ea.CLIENT]=Ho.trace.v1.Span.SpanKind.SPAN_KIND_CLIENT,ta[ea.PRODUCER]=Ho.trace.v1.Span.SpanKind.SPAN_KIND_PRODUCER,ta[ea.CONSUMER]=Ho.trace.v1.Span.SpanKind.SPAN_KIND_CONSUMER,ta),Go=function(){return(Go=K.default||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Ko=function(e,t){return(Ko=ce.default||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Ko(e,t),e.prototype=null===t?(0,de.default)(t):(n.prototype=t.prototype,new n)}(Pn,Wo=Io),Pn.prototype.onInit=function(){window.addEventListener("unload",this.shutdown)},Pn.prototype.onShutdown=function(){window.removeEventListener("unload",this.shutdown)},Pn.prototype.send=function(e,t,n){var r,i,o=this;this._isShutdown?uo.debug("Shutdown already started. Cannot send objects"):(e=this.convert(e),r=(0,Z.default)(e),i=new O.default(function(e,t){var n,i,a,s,l,c;o._useXHR?(n=r,i=o.url,a=o._headers,s=e,l=t,(c=new XMLHttpRequest).open("POST",i),(0,$.default)(Go(Go({},{Accept:"application/json","Content-Type":"application/json"}),a)).forEach(function(e){var t=e[0],e=e[1];c.setRequestHeader(t,e)}),c.send(n),c.onreadystatechange=function(){var e;c.readyState===XMLHttpRequest.DONE&&(200<=c.status&&c.status<=299?(uo.debug("xhr success",n),s()):(e=new Yo("Failed to export with XHR (status: "+c.status+")",c.status),l(e)))}):(i=r,a=o.url,e=e,t=t,navigator.sendBeacon(a,new Blob([i],{type:"application/json"}))?(uo.debug("sendBeacon - can send",i),e()):t(new Yo("sendBeacon - cannot send "+i)))}).then(t,n),this._sendingPromises.push(i),i.then(e=function(){var e=o._sendingPromises.indexOf(i);o._sendingPromises.splice(e,1)},e))};var Wo,Ko,Xo,co=Pn;Zo=function(e,t){return(Zo=ce.default||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};var Zo,Jo,Qo=Nn,ko=Jo=co;if("function"!=typeof ko&&null!==ko)throw new TypeError("Class extends value "+String(ko)+" is not a constructor or null");Zo(Qo,ko),Qo.prototype=null===ko?(0,de.default)(ko):(Un.prototype=ko.prototype,new Un),Nn.prototype.convert=function(e){return $n(e,this,!0)},Nn.prototype.getDefaultUrl=function(e){return"string"==typeof e.url?e.url:0<An().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT.length?An().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:0<An().OTEL_EXPORTER_OTLP_ENDPOINT.length?(e=An().OTEL_EXPORTER_OTLP_ENDPOINT).match(/v\d\/(traces|metrics)$/)?e:e+"/v1/traces":"http://localhost:55681/v1/traces"},(Xr=(Xr=(Xr=(Xr=(Xr=Xo=Xo||{}).proto||(Xr.proto={})).logs||(Xr.logs={})).v1||(Xr.v1={})).SeverityNumber||(Xr.SeverityNumber={}))[Xr.SEVERITY_NUMBER_UNSPECIFIED=0]="SEVERITY_NUMBER_UNSPECIFIED",Xr[Xr.SEVERITY_NUMBER_TRACE=1]="SEVERITY_NUMBER_TRACE",Xr[Xr.SEVERITY_NUMBER_TRACE2=2]="SEVERITY_NUMBER_TRACE2",Xr[Xr.SEVERITY_NUMBER_TRACE3=3]="SEVERITY_NUMBER_TRACE3",Xr[Xr.SEVERITY_NUMBER_TRACE4=4]="SEVERITY_NUMBER_TRACE4",Xr[Xr.SEVERITY_NUMBER_DEBUG=5]="SEVERITY_NUMBER_DEBUG",Xr[Xr.SEVERITY_NUMBER_DEBUG2=6]="SEVERITY_NUMBER_DEBUG2",Xr[Xr.SEVERITY_NUMBER_DEBUG3=7]="SEVERITY_NUMBER_DEBUG3",Xr[Xr.SEVERITY_NUMBER_DEBUG4=8]="SEVERITY_NUMBER_DEBUG4",Xr[Xr.SEVERITY_NUMBER_INFO=9]="SEVERITY_NUMBER_INFO",Xr[Xr.SEVERITY_NUMBER_INFO2=10]="SEVERITY_NUMBER_INFO2",Xr[Xr.SEVERITY_NUMBER_INFO3=11]="SEVERITY_NUMBER_INFO3",Xr[Xr.SEVERITY_NUMBER_INFO4=12]="SEVERITY_NUMBER_INFO4",Xr[Xr.SEVERITY_NUMBER_WARN=13]="SEVERITY_NUMBER_WARN",Xr[Xr.SEVERITY_NUMBER_WARN2=14]="SEVERITY_NUMBER_WARN2",Xr[Xr.SEVERITY_NUMBER_WARN3=15]="SEVERITY_NUMBER_WARN3",Xr[Xr.SEVERITY_NUMBER_WARN4=16]="SEVERITY_NUMBER_WARN4",Xr[Xr.SEVERITY_NUMBER_ERROR=17]="SEVERITY_NUMBER_ERROR",Xr[Xr.SEVERITY_NUMBER_ERROR2=18]="SEVERITY_NUMBER_ERROR2",Xr[Xr.SEVERITY_NUMBER_ERROR3=19]="SEVERITY_NUMBER_ERROR3",Xr[Xr.SEVERITY_NUMBER_ERROR4=20]="SEVERITY_NUMBER_ERROR4",Xr[Xr.SEVERITY_NUMBER_FATAL=21]="SEVERITY_NUMBER_FATAL",Xr[Xr.SEVERITY_NUMBER_FATAL2=22]="SEVERITY_NUMBER_FATAL2",Xr[Xr.SEVERITY_NUMBER_FATAL3=23]="SEVERITY_NUMBER_FATAL3",Xr[Xr.SEVERITY_NUMBER_FATAL4=24]="SEVERITY_NUMBER_FATAL4";var wr=t((0,Y.default)({__proto__:null,toOTLPExportLogServiceRequest:Dn,OTLPLogExporter:function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,E.default)(this,t),(0,_.default)(this,(t.__proto__||(0,se.default)(t)).call(this,e))}return(0,w.default)(t,e),(0,A.default)(t,[{key:"convert",value:function(e){return Dn(e,this)}},{key:"getDefaultUrl",value:function(e){return"string"==typeof e.url?e.url:"http://localhost:55681/v1/logs"}}]),t}(co)})),ea=t(Jr),ta=t(Qr),na=Zr.inspect,ra=ei.LogProvider,ia=ei.BatchLogProcessor,oa=wr.OTLPLogExporter,aa=ea.Resource,sa=ta.SemanticResourceAttributes,la=xr,ca={provider:Bn()},ua=(Kr.setConfig=function(e){ca.provider=Bn(e)},Kr.log=function(e,t){for(var n=arguments.length,r=new Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return ca.provider.log({level:(null==t?void 0:t.toUpperCase())||"DEBUG",attributes:{},name:e||"default",body:"".concat(e||""," ").concat(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return na.apply(void 0,t.concat([{compact:!0,breakLength:1/0}])).slice(1,-1).replace(/((\\r|\\n)\\n(\\n)?)/g,"\n")}.apply(void 0,r)),instrumentationLibrary:{name:"logger"}})},Pr.exports),da=Sr,fa=Kr,pa="TCCCSIP",Io=(l(jn,[{key:"debug",get:function(){var e=this;return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(e.report.apply(e,["debug"].concat(n)),!(jn._logLevel>da.LOG_LEVEL.DEBUG))return e._debug.apply(e,n)}}},{key:"warn",get:function(){var e=this;return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(e.report.apply(e,["warn"].concat(n)),!(jn._logLevel>da.LOG_LEVEL.WARN))return e._warn.apply(e,n)}}},{key:"error",get:function(){var e=this;return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(e.report.apply(e,["error"].concat(n)),!(jn._logLevel>da.LOG_LEVEL.ERROR))return e._error.apply(e,n)}}},{key:"report",value:function(e){if(jn._log_report){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];fa.log.apply(fa,[this.prefix,e].concat(n))}}}],[{key:"setLogLevel",value:function(e){jn._logLevel=e}},{key:"setLogReport",value:function(e){jn._log_report=e}},{key:"setConfig",value:function(e){fa.setConfig(e)}}]),jn);Io.setLogLevel(da.LOG_LEVEL.TRACE),Io.setLogReport(!0);var ko=Io,Xr={},co={},Jr={exports:{}},ha=Jr.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s",t=(t+=null!=e.raddr?" raddr %s rport %d":"%v%v")+(null!=e.tcptype?" tcptype %s":"%v");return null!=e.generation&&(t+=" generation %d"),(t+=null!=e["network-id"]?" network-id %d":"%v")+(null!=e["network-cost"]?" network-cost %d":"%v")}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(null!=e.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return(t=(t=(t+=null!=e.id?"id=%s %s":"%v%s")+(null!=e.mediaClockValue?"=%s":""))+(null!=e.rateNumerator?" rate=%s":""))+(null!=e.rateDenominator?"/%s":"")}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]},Qr=((0,Ee.default)(ha).forEach(function(e){ha[e].forEach(function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")})}),co),ga=Jr.exports,ma=RegExp.prototype.test.bind(/^([a-z])=(.*)/),va=(Qr.parse=function(e){var t={},n=[],r=t;return e.split(/(\r\n|\r|\n)/).filter(ma).forEach(function(e){var t=e[0],i=e.slice(2);"m"===t&&(n.push({rtp:[],fmtp:[]}),r=n[n.length-1]);for(var o=0;o<(ga[t]||[]).length;o+=1){var a=ga[t][o];if(a.reg.test(i)){var s=r,l=i,c=a.name&&a.names,c=(a.push&&!s[a.push]?s[a.push]=[]:c&&!s[a.name]&&(s[a.name]={}),a.push?{}:c?s[a.name]:s),u=l.match(a.reg),d=c,f=a.names,l=a.name;if(l&&!f)d[l]=Vn(u[1]);else for(var p=0;p<f.length;p+=1)null!=u[p+1]&&(d[f[p]]=Vn(u[p+1]));return void(a.push&&s[a.push].push(c))}}}),t.media=n,t},Qr.parseParams=function(e){return e.split(/;\s?/).reduce(Hn,{})},Qr.parseFmtpConfig=Qr.parseParams,Qr.parsePayloads=function(e){return e.toString().split(" ").map(Number)},Qr.parseRemoteCandidates=function(e){for(var t=[],n=e.split(" ").map(Vn),r=0;r<n.length;r+=3)t.push({component:n[r],ip:n[r+1],port:n[r+2]});return t},Qr.parseImageAttributes=function(e){return e.split(" ").map(function(e){return e.substring(1,e.length-1).split(",").reduce(Hn,{})})},Qr.parseSimulcastStreamList=function(e){return e.split(";").map(function(e){return e.split(",").map(function(e){var t,n=!1;return"~"!==e[0]?t=Vn(e):(t=Vn(e.substring(1,e.length)),n=!0),{scid:t,paused:n}})})},Jr.exports),ba=/%[sdv%]/g,_a=function(e){var t=1,n=arguments,r=n.length;return e.replace(ba,function(e){if(r<=t)return e;var i=n[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(i);case"%d":return Number(i);case"%v":return""}})},ya=["v","o","s","i","u","e","p","c","b","t","r","z","a"],wa=["i","c","b","a"],Zr=co,xa=(Xr.write=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach(function(e){null==e.payloads&&(e.payloads="")});var n=t.outerOrder||ya,r=t.innerOrder||wa,i=[];return n.forEach(function(t){va[t].forEach(function(n){n.name in e&&null!=e[n.name]?i.push(Yn(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach(function(e){i.push(Yn(t,n,e))})})}),e.media.forEach(function(e){i.push(Yn("m",va.m[0],e)),r.forEach(function(t){va[t].forEach(function(n){n.name in e&&null!=e[n.name]?i.push(Yn(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach(function(e){i.push(Yn(t,n,e))})})})}),i.join("\r\n")+"\r\n"},Xr.parse=Zr.parse,Xr.parseParams=Zr.parseParams,Xr.parseFmtpConfig=Zr.parseFmtpConfig,Xr.parsePayloads=Zr.parsePayloads,Xr.parseRemoteCandidates=Zr.parseRemoteCandidates,Xr.parseImageAttributes=Zr.parseImageAttributes,Xr.parseSimulcastStreamList=Zr.parseSimulcastStreamList,Xr),ei=ko,ka=Sr,Sa=W(),Ca=j(),Ta=H(),Ea=new ei("SIPMessage"),wr=(l(nr,[{key:"setHeader",value:function(e,t){for(var n=new RegExp("^\\s*".concat(e,"\\s*:"),"i"),r=0;r<this.extraHeaders.length;r++)n.test(this.extraHeaders[r])&&this.extraHeaders.splice(r,1);this.headers[Sa.headerize(e)]=Array.isArray(t)?t:[t]}},{key:"getHeader",value:function(e){var t=this.headers[Sa.headerize(e)];if(t){if(t[0])return t[0]}else{var n,r=new RegExp("^\\s*".concat(e,"\\s*:"),"i"),i=R(this.extraHeaders);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(r.test(o))return o.substring(o.indexOf(":")+1).trim()}}catch(e){i.e(e)}finally{i.f()}}}},{key:"getHeaders",value:function(e){var t=this.headers[Sa.headerize(e)],n=[];if(t){var r,i=R(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;n.push(o)}}catch(e){i.e(e)}finally{i.f()}}else{var a,s=new RegExp("^\\s*".concat(e,"\\s*:"),"i"),l=R(this.extraHeaders);try{for(l.s();!(a=l.n()).done;){var c=a.value;s.test(c)&&n.push(c.substring(c.indexOf(":")+1).trim())}}catch(e){l.e(e)}finally{l.f()}}return n}},{key:"hasHeader",value:function(e){if(this.headers[Sa.headerize(e)])return!0;var t,n=new RegExp("^\\s*".concat(e,"\\s*:"),"i"),r=R(this.extraHeaders);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(n.test(i))return!0}}catch(e){r.e(e)}finally{r.f()}return!1}},{key:"parseSDP",value:function(e){return!e&&this.sdp||(this.sdp=xa.parse(this.body||"")),this.sdp}},{key:"toString",value:function(){var e,t="".concat(this.method," ").concat(this.ruri," SIP/2.0\r\n");for(e in this.headers)if(Object.prototype.hasOwnProperty.call(this.headers,e)){var n,r=R(this.headers[e]);try{for(r.s();!(n=r.n()).done;){var i=n.value;t+="".concat(e,": ").concat(i,"\r\n")}}catch(t){r.e(t)}finally{r.f()}}var o,a=R(this.extraHeaders);try{for(a.s();!(o=a.n()).done;){t+="".concat(o.value.trim(),"\r\n")}}catch(t){a.e(t)}finally{a.f()}var s=[];switch(this.method){case ka.REGISTER:s.push("path","gruu");break;case ka.INVITE:this.ua.configuration.session_timers&&s.push("timer"),(this.ua.contact.pub_gruu||this.ua.contact.temp_gruu)&&s.push("gruu"),s.push("ice","replaces");break;case ka.UPDATE:this.ua.configuration.session_timers&&s.push("timer"),s.push("ice")}s.push("outbound");var l=this.ua.configuration.user_agent||ka.USER_AGENT;return t=(t=(t+="Allow: ".concat(ka.ALLOWED_METHODS,"\r\n"))+"Supported: ".concat(s,"\r\n"))+"User-Agent: ".concat(l,"\r\n"),this.body?(l=Sa.str_utf8_length(this.body),t=(t+="Content-Length: ".concat(l,"\r\n\r\n"))+this.body):t+="Content-Length: 0\r\n\r\n",t}},{key:"clone",value:function(){var e=new nr(this.method,this.ruri,this.ua);return(0,Ee.default)(this.headers).forEach(function(t){e.headers[t]=this.headers[t].slice()},this),e.body=this.body,e.extraHeaders=Sa.cloneArray(this.extraHeaders),e.to=this.to,e.from=this.from,e.call_id=this.call_id,e.cseq=this.cseq,e}}]),nr),ea=(f(tr,wr),$a=T(tr),l(tr,[{key:"cancel",value:function(e){this.transaction.cancel(e)}},{key:"clone",value:function(){var e=new tr(this.ruri,this.ua);return(0,Ee.default)(this.headers).forEach(function(t){e.headers[t]=this.headers[t].slice()},this),e.body=this.body,e.extraHeaders=Sa.cloneArray(this.extraHeaders),e.to=this.to,e.from=this.from,e.call_id=this.call_id,e.cseq=this.cseq,e.transaction=this.transaction,e}}]),tr),ta=(l(er,[{key:"addHeader",value:function(e,t){t={raw:t},e=Sa.headerize(e),this.headers[e]?this.headers[e].push(t):this.headers[e]=[t]}},{key:"getHeader",value:function(e){return e=this.headers[Sa.headerize(e)],e&&e[0]?e[0].raw:void 0}},{key:"getHeaders",value:function(e){var t=this.headers[Sa.headerize(e)],n=[];if(!t)return[];var r,i=R(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;n.push(o.raw)}}catch(e){i.e(e)}finally{i.f()}return n}},{key:"hasHeader",value:function(e){return!!this.headers[Sa.headerize(e)]}},{key:"parseHeader",value:function(e){var t,n,r,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;if(e=Sa.headerize(e),this.headers[e]){if(!(i>=this.headers[e].length))return n=(t=this.headers[e][i]).raw,t.parsed||(-1===(r=Ta.parse(n,e.replace(/-/g,"_")))?(this.headers[e].splice(i,1),void Ea.debug('error parsing "'.concat(e,'" header field with value "').concat(n,'"'))):t.parsed=r);Ea.debug('not so many "'.concat(e,'" headers present'))}else Ea.debug('header "'.concat(e,'" not present'))}},{key:"s",value:function(e,t){return this.parseHeader(e,t)}},{key:"setHeader",value:function(e,t){t={raw:t},this.headers[Sa.headerize(e)]=[t]}},{key:"parseSDP",value:function(e){return!e&&this.sdp||(this.sdp=xa.parse(this.body||"")),this.sdp}},{key:"toString",value:function(){return this.data}}]),er);f(Qn,ta),Ma=T(Qn),l(Qn,[{key:"reply",value:function(e,t,n,r,i,o){var a=[],s=this.getHeader("To");if(t=t||null,!(e=e||null)||e<100||699<e)throw new TypeError("Invalid status_code: ".concat(e));if(t&&"string"!=typeof t&&!(t instanceof String))throw new TypeError("Invalid reason_phrase: ".concat(t));t=t||ka.REASON_PHRASE[e]||"",n=Sa.cloneArray(n),this.ua.configuration.extra_headers&&(n=n.concat(this.ua.configuration.extra_headers));var l="SIP/2.0 ".concat(e," ").concat(t,"\r\n");if(this.method===ka.INVITE&&100<e&&e<=200){var c,u=R(this.getHeaders("record-route"));try{for(u.s();!(c=u.n()).done;){l+="Record-Route: ".concat(c.value,"\r\n")}}catch(e){u.e(e)}finally{u.f()}}var d,f=R(this.getHeaders("via"));try{for(f.s();!(d=f.n()).done;){l+="Via: ".concat(d.value,"\r\n")}}catch(e){f.e(e)}finally{f.f()}!this.to_tag&&100<e?s+=";tag=".concat(Sa.newTag()):this.to_tag&&!this.s("to").hasParam("tag")&&(s+=";tag=".concat(this.to_tag)),l=(l=(l=(l+="To: ".concat(s,"\r\n"))+"From: ".concat(this.getHeader("From"),"\r\n"))+"Call-ID: ".concat(this.call_id,"\r\n"))+"CSeq: ".concat(this.cseq," ").concat(this.method,"\r\n");var p,h=R(n);try{for(h.s();!(p=h.n()).done;){l+="".concat(p.value.trim(),"\r\n")}}catch(e){h.e(e)}finally{h.f()}switch(this.method){case ka.INVITE:this.ua.configuration.session_timers&&a.push("timer"),(this.ua.contact.pub_gruu||this.ua.contact.temp_gruu)&&a.push("gruu"),a.push("ice","replaces");break;case ka.UPDATE:this.ua.configuration.session_timers&&a.push("timer"),r&&a.push("ice"),a.push("replaces")}a.push("outbound"),this.method===ka.OPTIONS?l=(l+="Allow: ".concat(ka.ALLOWED_METHODS,"\r\n"))+"Accept: ".concat(ka.ACCEPTED_BODY_TYPES,"\r\n"):405===e?l+="Allow: ".concat(ka.ALLOWED_METHODS,"\r\n"):415===e&&(l+="Accept: ".concat(ka.ACCEPTED_BODY_TYPES,"\r\n")),l+="Supported: ".concat(a,"\r\n"),r?(t=Sa.str_utf8_length(r),l=(l+="Content-Type: application/sdp\r\n")+"Content-Length: ".concat(t,"\r\n\r\n")+r):l+="Content-Length: ".concat(0,"\r\n\r\n"),this.server_transaction.receiveResponse(e,l,i,o)}},{key:"reply_sl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=this.getHeaders("via");if(!e||e<100||699<e)throw new TypeError("Invalid status_code: ".concat(e));if(t&&"string"!=typeof t&&!(t instanceof String))throw new TypeError("Invalid reason_phrase: ".concat(t));var r,t=t||ka.REASON_PHRASE[e]||"",i="SIP/2.0 ".concat(e," ").concat(t,"\r\n"),o=R(n);try{for(o.s();!(r=o.n()).done;){i+="Via: ".concat(r.value,"\r\n")}}catch(e){o.e(e)}finally{o.f()}if(t=this.getHeader("To"),!this.to_tag&&100<e?t+=";tag=".concat(Sa.newTag()):this.to_tag&&!this.s("to").hasParam("tag")&&(t+=";tag=".concat(this.to_tag)),i=(i=(i=(i+="To: ".concat(t,"\r\n"))+"From: ".concat(this.getHeader("From"),"\r\n"))+"Call-ID: ".concat(this.call_id,"\r\n"))+"CSeq: ".concat(this.cseq," ").concat(this.method,"\r\n"),this.ua.configuration.extra_headers){var a,s=R(this.ua.configuration.extra_headers);try{for(s.s();!(a=s.n()).done;){i+="".concat(a.value.trim(),"\r\n")}}catch(e){s.e(e)}finally{s.f()}}i+="Content-Length: ".concat(0,"\r\n\r\n"),this.transport.send(i)}}]);var Ia,Aa,Ra,Oa,La,Pa,Ma,$a,Kr={OutgoingRequest:wr,InitialOutgoingInviteRequest:ea,IncomingRequest:Qn,IncomingResponse:(f(Jn,ta),Pa=T(Jn),l(Jn))},Io=ko,Na=W(),Da=new Io("DigestAuthentication"),Qr=(l(Zn,[{key:"get",value:function(e){switch(e){case"realm":return this._realm;case"ha1":return this._ha1;default:return void Da.warn('get() | cannot get "%s" parameter',e)}}},{key:"authenticate",value:function(e,t){var n=e.method,r=e.ruri,e=e.body,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(this._algorithm=t.algorithm,this._realm=t.realm,this._nonce=t.nonce,this._opaque=t.opaque,this._stale=t.stale,this._algorithm){if("MD5"!==this._algorithm)return Da.warn('authenticate() | challenge with Digest algorithm different than "MD5", authentication aborted'),!1}else this._algorithm="MD5";if(!this._nonce)return Da.warn("authenticate() | challenge without Digest nonce, authentication aborted"),!1;if(!this._realm)return Da.warn("authenticate() | challenge without Digest realm, authentication aborted"),!1;if(!this._credentials.password){if(!this._credentials.ha1)return Da.warn("authenticate() | no plain SIP password nor ha1 provided, authentication aborted"),!1;if(this._credentials.realm!==this._realm)return Da.warn('authenticate() | no plain SIP password, and stored `realm` does not match the given `realm`, cannot authenticate [stored:"%s", given:"%s"]',this._credentials.realm,this._realm),!1}if(t.qop)if(-1<t.qop.indexOf("auth-int"))this._qop="auth-int";else{if(!(-1<t.qop.indexOf("auth")))return Da.warn('authenticate() | challenge without Digest qop different than "auth" or "auth-int", authentication aborted'),!1;this._qop="auth"}else this._qop=null;this._method=n,this._uri=r,this._cnonce=i||Na.createRandomToken(12),this._nc+=1;var o,a,t=Number(this._nc).toString(16);return this._ncHex="00000000".substr(0,8-t.length)+t,4294967296===this._nc&&(this._nc=1,this._ncHex="00000001"),this._credentials.password?this._ha1=Na.calculateMD5("".concat(this._credentials.username,":").concat(this._realm,":").concat(this._credentials.password)):this._ha1=this._credentials.ha1,"auth"===this._qop?(o="".concat(this._method,":").concat(this._uri),a=Na.calculateMD5(o),Da.debug('authenticate() | using qop=auth [a2:"%s"]',o),this._response=Na.calculateMD5("".concat(this._ha1,":").concat(this._nonce,":").concat(this._ncHex,":").concat(this._cnonce,":auth:").concat(a))):"auth-int"===this._qop?(o="".concat(this._method,":").concat(this._uri,":").concat(Na.calculateMD5(e||"")),a=Na.calculateMD5(o),Da.debug('authenticate() | using qop=auth-int [a2:"%s"]',o),this._response=Na.calculateMD5("".concat(this._ha1,":").concat(this._nonce,":").concat(this._ncHex,":").concat(this._cnonce,":auth-int:").concat(a))):null===this._qop&&(o="".concat(this._method,":").concat(this._uri),a=Na.calculateMD5(o),Da.debug('authenticate() | using qop=null [a2:"%s"]',o),this._response=Na.calculateMD5("".concat(this._ha1,":").concat(this._nonce,":").concat(a))),Da.debug("authenticate() | response generated"),!0}},{key:"toString",value:function(){var e=[];if(this._response)return e.push("algorithm=".concat(this._algorithm)),e.push('username="'.concat(this._credentials.username,'"')),e.push('realm="'.concat(this._realm,'"')),e.push('nonce="'.concat(this._nonce,'"')),e.push('uri="'.concat(this._uri,'"')),e.push('response="'.concat(this._response,'"')),this._opaque&&e.push('opaque="'.concat(this._opaque,'"')),this._qop&&(e.push("qop=".concat(this._qop)),e.push('cnonce="'.concat(this._cnonce,'"')),e.push("nc=".concat(this._ncHex))),"Digest ".concat(e.join(", "));throw new Error("response field does not exist, cannot generate Authorization header")}}]),Zn),Jr={T1:500,T2:4e3,T4:5e3,TIMER_B:32e3,TIMER_D:0,TIMER_F:32e3,TIMER_H:32e3,TIMER_I:0,TIMER_J:0,TIMER_K:0,TIMER_L:32e3,TIMER_M:32e3,PROVISIONAL_RESPONSE_INTERVAL:6e4},co=Lr.EventEmitter,Zr=ko,Fa=Sr,qa=Kr,Ua=Jr,Ba=new Zr("NonInviteClientTransaction"),ja=new Zr("InviteClientTransaction"),Va=new Zr("AckClientTransaction"),Ha=new Zr("NonInviteServerTransaction"),Ya=new Zr("InviteServerTransaction"),za={STATUS_TRYING:1,STATUS_PROCEEDING:2,STATUS_CALLING:3,STATUS_ACCEPTED:4,STATUS_COMPLETED:5,STATUS_TERMINATED:6,STATUS_CONFIRMED:7,NON_INVITE_CLIENT:"nict",NON_INVITE_SERVER:"nist",INVITE_CLIENT:"ict",INVITE_SERVER:"ist"},ei=(f(Xn,co),La=T(Xn),l(Xn,[{key:"C",get:function(){return za}},{key:"stateChanged",value:function(e){this.state=e,this.emit("stateChanged")}},{key:"send",value:function(){var e=this;this.stateChanged(za.STATUS_TRYING),this.F=setTimeout(function(){e.timer_F()},Ua.TIMER_F),this.transport.send(this.request)||this.onTransportError()}},{key:"onTransportError",value:function(){Ba.debug("transport error occurred, deleting transaction ".concat(this.id)),clearTimeout(this.F),clearTimeout(this.K),this.stateChanged(za.STATUS_TERMINATED),this.ua.destroyTransaction(this),this.eventHandlers.onTransportError()}},{key:"timer_F",value:function(){Ba.debug("Timer F expired for transaction ".concat(this.id)),this.stateChanged(za.STATUS_TERMINATED),this.ua.destroyTransaction(this),this.eventHandlers.onRequestTimeout()}},{key:"timer_K",value:function(){this.stateChanged(za.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"receiveResponse",value:function(e){var t=this,n=e.status_code;if(n<200)switch(this.state){case za.STATUS_TRYING:case za.STATUS_PROCEEDING:this.stateChanged(za.STATUS_PROCEEDING),this.eventHandlers.onReceiveResponse(e)}else switch(this.state){case za.STATUS_TRYING:case za.STATUS_PROCEEDING:this.stateChanged(za.STATUS_COMPLETED),clearTimeout(this.F),408===n?this.eventHandlers.onRequestTimeout():this.eventHandlers.onReceiveResponse(e),this.K=setTimeout(function(){t.timer_K()},Ua.TIMER_K)}}}]),Xn),wr=(f(Kn,co),Oa=T(Kn),l(Kn,[{key:"C",get:function(){return za}},{key:"stateChanged",value:function(e){this.state=e,this.emit("stateChanged")}},{key:"send",value:function(){var e=this;this.stateChanged(za.STATUS_CALLING),this.B=setTimeout(function(){e.timer_B()},Ua.TIMER_B),this.transport.send(this.request)||this.onTransportError()}},{key:"onTransportError",value:function(){clearTimeout(this.B),clearTimeout(this.D),clearTimeout(this.M),this.state!==za.STATUS_ACCEPTED&&(ja.debug("transport error occurred, deleting transaction ".concat(this.id)),this.eventHandlers.onTransportError()),this.stateChanged(za.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"timer_M",value:function(){ja.debug("Timer M expired for transaction ".concat(this.id)),this.state===za.STATUS_ACCEPTED&&(clearTimeout(this.B),this.stateChanged(za.STATUS_TERMINATED),this.ua.destroyTransaction(this))}},{key:"timer_B",value:function(){ja.debug("Timer B expired for transaction ".concat(this.id)),this.state===za.STATUS_CALLING&&(this.stateChanged(za.STATUS_TERMINATED),this.ua.destroyTransaction(this),this.eventHandlers.onRequestTimeout())}},{key:"timer_D",value:function(){ja.debug("Timer D expired for transaction ".concat(this.id)),clearTimeout(this.B),this.stateChanged(za.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"sendACK",value:function(e){var t=this,n=new qa.OutgoingRequest(Fa.ACK,this.request.ruri,this.ua,{route_set:this.request.getHeaders("route"),call_id:this.request.getHeader("call-id"),cseq:this.request.cseq});n.setHeader("from",this.request.getHeader("from")),n.setHeader("via",this.request.getHeader("via")),n.setHeader("to",e.getHeader("to")),this.D=setTimeout(function(){t.timer_D()},Ua.TIMER_D),this.transport.send(n)}},{key:"cancel",value:function(e){var t;this.state===za.STATUS_PROCEEDING&&((t=new qa.OutgoingRequest(Fa.CANCEL,this.request.ruri,this.ua,{route_set:this.request.getHeaders("route"),call_id:this.request.getHeader("call-id"),cseq:this.request.cseq})).setHeader("from",this.request.getHeader("from")),t.setHeader("via",this.request.getHeader("via")),t.setHeader("to",this.request.getHeader("to")),e&&t.setHeader("reason",e),this.transport.send(t))}},{key:"receiveResponse",value:function(e){var t=this,n=e.status_code;if(100<=n&&n<=199)switch(this.state){case za.STATUS_CALLING:this.stateChanged(za.STATUS_PROCEEDING),this.eventHandlers.onReceiveResponse(e);break;case za.STATUS_PROCEEDING:this.eventHandlers.onReceiveResponse(e)}else if(200<=n&&n<=299)switch(this.state){case za.STATUS_CALLING:case za.STATUS_PROCEEDING:this.stateChanged(za.STATUS_ACCEPTED),this.M=setTimeout(function(){t.timer_M()},Ua.TIMER_M),this.eventHandlers.onReceiveResponse(e);break;case za.STATUS_ACCEPTED:this.eventHandlers.onReceiveResponse(e)}else if(300<=n&&n<=699)switch(this.state){case za.STATUS_CALLING:case za.STATUS_PROCEEDING:this.stateChanged(za.STATUS_COMPLETED),this.sendACK(e),this.eventHandlers.onReceiveResponse(e);break;case za.STATUS_COMPLETED:this.sendACK(e)}}}]),Kn),ea=(f(Wn,co),Ra=T(Wn),l(Wn,[{key:"C",get:function(){return za}},{key:"send",value:function(){this.transport.send(this.request)||this.onTransportError()}},{key:"onTransportError",value:function(){Va.debug("transport error occurred for transaction ".concat(this.id)),this.eventHandlers.onTransportError()}}]),Wn),ta=(f(Gn,co),Aa=T(Gn),l(Gn,[{key:"C",get:function(){return za}},{key:"stateChanged",value:function(e){this.state=e,this.emit("stateChanged")}},{key:"timer_J",value:function(){Ha.debug("Timer J expired for transaction ".concat(this.id)),this.stateChanged(za.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"onTransportError",value:function(){this.transportError||(this.transportError=!0,Ha.debug("transport error occurred, deleting transaction ".concat(this.id)),clearTimeout(this.J),this.stateChanged(za.STATUS_TERMINATED),this.ua.destroyTransaction(this))}},{key:"receiveResponse",value:function(e,t,n,r){var i=this;if(100===e)switch(this.state){case za.STATUS_TRYING:this.stateChanged(za.STATUS_PROCEEDING),this.transport.send(t)||this.onTransportError();break;case za.STATUS_PROCEEDING:this.last_response=t,this.transport.send(t)?n&&n():(this.onTransportError(),r&&r())}else if(200<=e&&e<=699)switch(this.state){case za.STATUS_TRYING:case za.STATUS_PROCEEDING:this.stateChanged(za.STATUS_COMPLETED),this.last_response=t,this.J=setTimeout(function(){i.timer_J()},Ua.TIMER_J),this.transport.send(t)?n&&n():(this.onTransportError(),r&&r())}}}]),Gn);f(zn,co),Ia=T(zn),l(zn,[{key:"C",get:function(){return za}},{key:"stateChanged",value:function(e){this.state=e,this.emit("stateChanged")}},{key:"timer_H",value:function(){Ya.debug("Timer H expired for transaction ".concat(this.id)),this.state===za.STATUS_COMPLETED&&Ya.debug("ACK not received, dialog will be terminated"),this.stateChanged(za.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"timer_I",value:function(){this.stateChanged(za.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"timer_L",value:function(){Ya.debug("Timer L expired for transaction ".concat(this.id)),this.state===za.STATUS_ACCEPTED&&(this.stateChanged(za.STATUS_TERMINATED),this.ua.destroyTransaction(this))}},{key:"onTransportError",value:function(){this.transportError||(this.transportError=!0,Ya.debug("transport error occurred, deleting transaction ".concat(this.id)),null!==this.resendProvisionalTimer&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null),clearTimeout(this.L),clearTimeout(this.H),clearTimeout(this.I),this.stateChanged(za.STATUS_TERMINATED),this.ua.destroyTransaction(this))}},{key:"resend_provisional",value:function(){this.transport.send(this.last_response)||this.onTransportError()}},{key:"receiveResponse",value:function(e,t,n,r){var i=this;if(100<=e&&e<=199&&this.state===za.STATUS_PROCEEDING&&(this.transport.send(t)||this.onTransportError(),this.last_response=t),100<e&&e<=199&&this.state===za.STATUS_PROCEEDING)null===this.resendProvisionalTimer&&(this.resendProvisionalTimer=setInterval(function(){i.resend_provisional()},Ua.PROVISIONAL_RESPONSE_INTERVAL));else if(200<=e&&e<=299)switch(this.state){case za.STATUS_PROCEEDING:this.stateChanged(za.STATUS_ACCEPTED),this.last_response=t,this.L=setTimeout(function(){i.timer_L()},Ua.TIMER_L),null!==this.resendProvisionalTimer&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null);case za.STATUS_ACCEPTED:this.transport.send(t)?n&&n():(this.onTransportError(),r&&r())}else 300<=e&&e<=699&&this.state===za.STATUS_PROCEEDING&&(null!==this.resendProvisionalTimer&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null),this.transport.send(t)?(this.stateChanged(za.STATUS_COMPLETED),this.H=setTimeout(function(){i.timer_H()},Ua.TIMER_H),n&&n()):(this.onTransportError(),r&&r()))}}]);var Ga,Io={C:za,NonInviteClientTransaction:ei,InviteClientTransaction:wr,AckClientTransaction:ea,NonInviteServerTransaction:ta,InviteServerTransaction:zn,checkTransaction:function(e,t){var n,r=e._transactions;switch(t.method){case Fa.INVITE:if(n=r.ist[t.via_branch])return n.state===za.STATUS_PROCEEDING&&n.transport.send(n.last_response),!0;break;case Fa.ACK:if(!(n=r.ist[t.via_branch]))return!1;if(n.state===za.STATUS_ACCEPTED)return!1;if(n.state===za.STATUS_COMPLETED)return n.state=za.STATUS_CONFIRMED,n.I=setTimeout(function(){n.timer_I()},Ua.TIMER_I),!0;break;case Fa.CANCEL:return(n=r.ist[t.via_branch])?(t.reply_sl(200),n.state!==za.STATUS_PROCEEDING):(t.reply_sl(481),!0);default:if(n=r.nist[t.via_branch]){switch(n.state){case za.STATUS_TRYING:break;case za.STATUS_PROCEEDING:case za.STATUS_COMPLETED:n.transport.send(n.last_response)}return!0}}}},Wa=Sr,Ka=Qr,Xa=Io,Za=new ko("RequestSender"),Ja={onRequestTimeout:function(){},onTransportError:function(){},onReceiveResponse:function(){},onAuthenticated:function(){}},Zr=(l(ar,[{key:"send",value:function(){var e=this,t={onRequestTimeout:function(){e._eventHandlers.onRequestTimeout()},onTransportError:function(){e._eventHandlers.onTransportError()},onReceiveResponse:function(t){e._receiveResponse(t)}};switch(this._method){case"INVITE":this.clientTransaction=new Xa.InviteClientTransaction(this._ua,this._ua.transport,this._request,t);break;case"ACK":this.clientTransaction=new Xa.AckClientTransaction(this._ua,this._ua.transport,this._request,t);break;default:this.clientTransaction=new Xa.NonInviteClientTransaction(this._ua,this._ua.transport,this._request,t)}this._ua._configuration.authorization_jwt&&this._request.setHeader("Authorization",this._ua._configuration.authorization_jwt),this.clientTransaction.send()}},{key:"_receiveResponse",value:function(e){var t,n=e.status_code;401!==n&&407!==n||null===this._ua.configuration.password&&null===this._ua.configuration.ha1?this._eventHandlers.onReceiveResponse(e):(n=401===e.status_code?(t=e.parseHeader("www-authenticate"),"authorization"):(t=e.parseHeader("proxy-authenticate"),"proxy-authorization"),t?this._challenged&&(this._staled||!0!==t.stale)||(this._auth||(this._auth=new Ka({username:this._ua.configuration.authorization_user,password:this._ua.configuration.password,realm:this._ua.configuration.realm,ha1:this._ua.configuration.ha1})),!this._auth.authenticate(this._request,t))?this._eventHandlers.onReceiveResponse(e):(this._challenged=!0,this._ua.set("realm",this._auth.get("realm")),this._ua.set("ha1",this._auth.get("ha1")),t.stale&&(this._staled=!0),this._request=this._request.clone(),this._request.cseq+=1,this._request.setHeader("cseq","".concat(this._request.cseq," ").concat(this._method)),this._request.setHeader(n,this._auth.toString()),this._eventHandlers.onAuthenticated(this._request),this.send()):(Za.debug("".concat(e.status_code," with wrong or missing challenge, cannot authenticate")),this._eventHandlers.onReceiveResponse(e)))}}]),ar),co=ko,Qa=W(),es=Sr,ts=Kr,ns=Zr,rs=new co("Registrator"),ei=(l(or,[{key:"registered",get:function(){return this._registered}},{key:"setExtraHeaders",value:function(e){Array.isArray(e)||(e=[]),this._extraHeaders=e.slice()}},{key:"setExtraContactParams",value:function(e){for(var t in e instanceof Object||(e={}),this._extraContactParams="",e){var n;Object.prototype.hasOwnProperty.call(e,t)&&(n=e[t],this._extraContactParams+=";".concat(t),n&&(this._extraContactParams+="=".concat(n)))}}},{key:"register",value:function(){var e,t=this;this._registering?rs.debug("Register request in progress..."):((e=this._extraHeaders.slice()).push("Contact: ".concat(this._contact,";expires=").concat(this._expires).concat(this._extraContactParams)),e.push("Expires: ".concat(this._expires)),this._ua.configuration.use_trtc&&e.push("X-TRTC: 1"),e=new ts.OutgoingRequest(es.REGISTER,this._registrar,this._ua,{to_uri:this._to_uri,call_id:this._call_id,cseq:this._cseq+=1},e),e=new ns(this._ua,e,{onRequestTimeout:function(){t._registrationFailure(null,es.causes.REQUEST_TIMEOUT)},onTransportError:function(){t._registrationFailure(null,es.causes.CONNECTION_ERROR)},onAuthenticated:function(){t._cseq+=1},onReceiveResponse:function(e){if(e.cseq===t._cseq)switch(null!==t._registrationTimer&&(clearTimeout(t._registrationTimer),t._registrationTimer=null),!0){case/^1[0-9]{2}$/.test(e.status_code):break;case/^2[0-9]{2}$/.test(e.status_code):var n;t._registering=!1,e.hasHeader("Contact")?(n=(n=(r=e.headers.Contact.reduce(function(e,t){return e.concat(t.parsed)},[])).find(function(e){return t._sipInstance===e.getParam("+sip.instance")&&t._reg_id===parseInt(e.getParam("reg-id"))}))||r.find(function(e){return e.uri.user===t._ua.contact.uri.user}))?(r=(r=!(r=n.getParam("expires"))&&e.hasHeader("expires")?e.getHeader("expires"):r)||t._expires,r=64<(r=(r=Number(r))<10?10:r)?1e3*r/2+Math.floor(1e3*(r/2-32)*Math.random()):1e3*r-5e3,t._registrationTimer=setTimeout(function(){t._registrationTimer=null,0===t._ua.listeners("registrationExpiring").length?t.register():t._ua.emit("registrationExpiring")},r),n.hasParam("temp-gruu")&&(t._ua.contact.temp_gruu=n.getParam("temp-gruu").replace(/"/g,"")),n.hasParam("pub-gruu")&&(t._ua.contact.pub_gruu=n.getParam("pub-gruu").replace(/"/g,"")),t._registered||(t._registered=!0,t._ua.registered({response:e}))):rs.debug("no Contact header pointing to us, response ignored"):rs.debug("no Contact header in response to REGISTER, response ignored");break;case/^423$/.test(e.status_code):e.hasHeader("min-expires")?(t._expires=Number(e.getHeader("min-expires")),t._expires<10&&(t._expires=10),t.register()):(rs.debug("423 response received for REGISTER without Min-Expires"),t._registrationFailure(e,es.causes.SIP_FAILURE_CODE));break;default:var r=Qa.sipErrorCause(e.status_code);t._registrationFailure(e,r)}}}),this._registering=!0,e.send())}},{key:"unregister",value:function(){var e,t=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this._registered?(this._registered=!1,null!==this._registrationTimer&&(clearTimeout(this._registrationTimer),this._registrationTimer=null),e=this._extraHeaders.slice(),n.all?e.push("Contact: *".concat(this._extraContactParams)):e.push("Contact: ".concat(this._contact,";expires=0").concat(this._extraContactParams)),e.push("Expires: 0"),n=new ts.OutgoingRequest(es.REGISTER,this._registrar,this._ua,{to_uri:this._to_uri,call_id:this._call_id,cseq:this._cseq+=1},e),new ns(this._ua,n,{onRequestTimeout:function(){t._unregistered(null,es.causes.REQUEST_TIMEOUT)},onTransportError:function(){t._unregistered(null,es.causes.CONNECTION_ERROR)},onAuthenticated:function(){t._cseq+=1},onReceiveResponse:function(e){switch(!0){case/^1[0-9]{2}$/.test(e.status_code):break;case/^2[0-9]{2}$/.test(e.status_code):t._unregistered(e);break;default:var n=Qa.sipErrorCause(e.status_code);t._unregistered(e,n)}}}).send()):rs.debug("already unregistered")}},{key:"close",value:function(){this._registered&&this.unregister()}},{key:"onTransportClosed",value:function(){this._registering=!1,null!==this._registrationTimer&&(clearTimeout(this._registrationTimer),this._registrationTimer=null),this._registered&&(this._registered=!1,this._ua.unregistered({}))}},{key:"_registrationFailure",value:function(e,t){this._registering=!1,this._ua.registrationFailed({response:e||null,cause:t}),this._registered&&(this._registered=!1,this._ua.unregistered({response:e||null,cause:t}))}},{key:"_unregistered",value:function(e,t){this._registering=!1,this._registered=!1,this._ua.unregistered({response:e||null,cause:t||null})}}]),or),is=Sr,os=Io,as=Zr,ss={onRequestTimeout:function(){},onTransportError:function(){},onSuccessResponse:function(){},onErrorResponse:function(){},onAuthenticated:function(){},onDialogError:function(){}},wr=ko,ls=Kr,cs=Sr,us=Io,ds=(l(ir,[{key:"request",get:function(){return this._request}},{key:"send",value:function(){var e=this,t=new as(this._ua,this._request,{onRequestTimeout:function(){e._eventHandlers.onRequestTimeout()},onTransportError:function(){e._eventHandlers.onTransportError()},onAuthenticated:function(t){e._eventHandlers.onAuthenticated(t)},onReceiveResponse:function(t){e._receiveResponse(t)}});t.send(),(this._request.method===is.INVITE||this._request.method===is.UPDATE&&this._request.body)&&t.clientTransaction.state!==os.C.STATUS_TERMINATED&&(this._dialog.uac_pending_reply=!0,t.clientTransaction.on("stateChanged",function n(){t.clientTransaction.state!==os.C.STATUS_ACCEPTED&&t.clientTransaction.state!==os.C.STATUS_COMPLETED&&t.clientTransaction.state!==os.C.STATUS_TERMINATED||(t.clientTransaction.removeListener("stateChanged",n),e._dialog.uac_pending_reply=!1)}))}},{key:"_receiveResponse",value:function(e){var t=this;408===e.status_code||481===e.status_code?this._eventHandlers.onDialogError(e):e.method!==is.INVITE||491!==e.status_code||this._reattempt?200<=e.status_code&&e.status_code<300?this._eventHandlers.onSuccessResponse(e):300<=e.status_code&&this._eventHandlers.onErrorResponse(e):(this._request.cseq=this._dialog.local_seqnum+=1,this._reattemptTimer=setTimeout(function(){t._dialog.isTerminated()||(t._reattempt=!0,t.send())},1e3))}}]),ir),fs=W(),ps=new wr("Dialog"),hs={STATUS_EARLY:1,STATUS_CONFIRMED:2,STATUS_TERMINATED:3},ea=(l(rr,[{key:"id",get:function(){return this._id}},{key:"local_seqnum",get:function(){return this._local_seqnum},set:function(e){this._local_seqnum=e}},{key:"owner",get:function(){return this._owner}},{key:"uac_pending_reply",get:function(){return this._uac_pending_reply},set:function(e){this._uac_pending_reply=e}},{key:"uas_pending_reply",get:function(){return this._uas_pending_reply}},{key:"isTerminated",value:function(){return this._status===hs.STATUS_TERMINATED}},{key:"update",value:function(e,t){this._state=hs.STATUS_CONFIRMED,ps.debug("dialog ".concat(this._id.toString(),"  changed to CONFIRMED state")),"UAC"===t&&(this._route_set=e.getHeaders("record-route").reverse())}},{key:"terminate",value:function(){ps.debug("dialog ".concat(this._id.toString()," deleted")),this._ua.destroyDialog(this),this._state=hs.STATUS_TERMINATED}},{key:"sendRequest",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=fs.cloneArray(n.extraHeaders),i=fs.cloneObject(n.eventHandlers),n=n.body||null,e=this._createRequest(e,r,n);return i.onAuthenticated=function(){t._local_seqnum+=1},new ds(this,e,i).send(),e}},{key:"receiveRequest",value:function(e){this._checkInDialogRequest(e)&&(e.method===cs.ACK&&null!==this._ack_seqnum?this._ack_seqnum=null:e.method===cs.INVITE&&(this._ack_seqnum=e.cseq),this._owner.receiveRequest(e))}},{key:"_createRequest",value:function(e,t,n){t=fs.cloneArray(t),this._local_seqnum||(this._local_seqnum=Math.floor(1e4*Math.random()));var r=e===cs.CANCEL||e===cs.ACK?this._local_seqnum:this._local_seqnum+=1;return new ls.OutgoingRequest(e,this._remote_target,this._ua,{cseq:r,call_id:this._id.call_id,from_uri:this._local_uri,from_tag:this._id.local_tag,to_uri:this._remote_uri,to_tag:this._id.remote_tag,route_set:this._route_set},t,n)}},{key:"_checkInDialogRequest",value:function(e){var t,n=this;if(this._remote_seqnum)if(e.cseq<this._remote_seqnum){if(e.method!==cs.ACK)return e.reply(500),!1;if(null===this._ack_seqnum||e.cseq!==this._ack_seqnum)return!1}else e.cseq>this._remote_seqnum&&(this._remote_seqnum=e.cseq);else this._remote_seqnum=e.cseq;if(e.method===cs.INVITE||e.method===cs.UPDATE&&e.body){if(!0===this._uac_pending_reply)e.reply(491);else{if(!0===this._uas_pending_reply)return t=1+(10*Math.random()|0),e.reply(500,null,["Retry-After:".concat(t)]),!1;this._uas_pending_reply=!0,e.server_transaction.on("stateChanged",function t(){e.server_transaction.state!==us.C.STATUS_ACCEPTED&&e.server_transaction.state!==us.C.STATUS_COMPLETED&&e.server_transaction.state!==us.C.STATUS_TERMINATED||(e.server_transaction.removeListener("stateChanged",t),n._uas_pending_reply=!1)})}e.hasHeader("contact")&&e.server_transaction.on("stateChanged",function(){e.server_transaction.state===us.C.STATUS_ACCEPTED&&(n._remote_target=e.parseHeader("contact").uri)})}else e.method===cs.NOTIFY&&e.hasHeader("contact")&&e.server_transaction.on("stateChanged",function(){e.server_transaction.state===us.C.STATUS_COMPLETED&&(n._remote_target=e.parseHeader("contact").uri)});return!0}}],[{key:"C",get:function(){return hs}}]),rr),ta={exports:{}},Qr=Lr.EventEmitter,co=ko,gs=Sr,ms=kr,vs=W(),bs=new co("RTCSession:DTMF"),_s={MIN_DURATION:70,MAX_DURATION:6e3,DEFAULT_DURATION:100,MIN_INTER_TONE_GAP:50,DEFAULT_INTER_TONE_GAP:500};ta.exports=(f(sr,Qr),Ga=T(sr),l(sr,[{key:"tone",get:function(){return this._tone}},{key:"duration",get:function(){return this._duration}},{key:"send",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(void 0===e)throw new TypeError("Not enough arguments");if(this._direction="outgoing",this._session.status!==this._session.C.STATUS_CONFIRMED&&this._session.status!==this._session.C.STATUS_WAITING_FOR_ACK)throw new ms.InvalidStateError(this._session.status);var r=vs.cloneArray(n.extraHeaders);if(this.eventHandlers=vs.cloneObject(n.eventHandlers),"string"==typeof e)e=e.toUpperCase();else{if("number"!=typeof e)throw new TypeError("Invalid tone: ".concat(e));e=e.toString()}if(!e.match(/^[0-9A-DR#*]$/))throw new TypeError("Invalid tone: ".concat(e));this._tone=e,this._duration=n.duration,r.push("Content-Type: application/dtmf-relay"),e="Signal=".concat(this._tone,"\r\n"),e+="Duration=".concat(this._duration),this._session.newDTMF({originator:"local",dtmf:this,request:this._request}),this._session.sendRequest(gs.INFO,{extraHeaders:r,eventHandlers:{onSuccessResponse:function(e){t.emit("succeeded",{originator:"remote",response:e})},onErrorResponse:function(e){t.eventHandlers.onFailed&&t.eventHandlers.onFailed(),t.emit("failed",{originator:"remote",response:e})},onRequestTimeout:function(){t._session.onRequestTimeout()},onTransportError:function(){t._session.onTransportError()},onDialogError:function(){t._session.onDialogError()}},body:e})}},{key:"init_incoming",value:function(e){var t,n=/^(Signal\s*?=\s*?)([0-9A-D#*]{1})(\s)?.*/,r=/^(Duration\s?=\s?)([0-9]{1,4})(\s)?.*/;this._direction="incoming",(this._request=e).reply(200),e.body&&(1<=(t=e.body.split("\n")).length&&n.test(t[0])&&(this._tone=t[0].replace(n,"$2")),2<=t.length&&r.test(t[1])&&(this._duration=parseInt(t[1].replace(r,"$2"),10))),this._duration||(this._duration=_s.DEFAULT_DURATION),this._tone?this._session.newDTMF({originator:"remote",dtmf:this,request:e}):bs.debug("invalid INFO DTMF received, discarded")}}]),sr),ta.exports.C=_s;var ys,ws,xs,ks,Ss,Cs,Ts,Es,wr=Lr.EventEmitter,Is=Sr,As=kr,Rs=W(),co=(f(mr,wr),Es=T(mr),l(mr,[{key:"contentType",get:function(){return this._contentType}},{key:"body",get:function(){return this._body}},{key:"send",value:function(e,t){var n=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(this._direction="outgoing",void 0===e)throw new TypeError("Not enough arguments");if(this._session.status!==this._session.C.STATUS_CONFIRMED&&this._session.status!==this._session.C.STATUS_WAITING_FOR_ACK)throw new As.InvalidStateError(this._session.status);this._contentType=e,this._body=t,r=Rs.cloneArray(r.extraHeaders),r.push("Content-Type: ".concat(e)),this._session.newInfo({originator:"local",info:this,request:this.request}),this._session.sendRequest(Is.INFO,{extraHeaders:r,eventHandlers:{onSuccessResponse:function(e){n.emit("succeeded",{originator:"remote",response:e})},onErrorResponse:function(e){n.emit("failed",{originator:"remote",response:e})},onTransportError:function(){n._session.onTransportError()},onRequestTimeout:function(){n._session.onRequestTimeout()},onDialogError:function(){n._session.onDialogError()}},body:t})}},{key:"init_incoming",value:function(e){this._direction="incoming",(this.request=e).reply(200),this._contentType=e.hasHeader("Content-Type")?e.getHeader("Content-Type").toLowerCase():void 0,this._body=e.body,this._session.newInfo({originator:"remote",info:this,request:e})}}]),mr),Os=Sr,Ls=new ko("RTCSession:ReferNotifier"),Qr=(l(gr,[{key:"notify",value:function(e,t){var n;Ls.debug("notify()"),!1!==this._active&&(t=t||Os.REASON_PHRASE[e]||"",n=200<=e?"terminated;reason=noresource":"active;expires=".concat(this._expires),this._session.sendRequest(Os.NOTIFY,{extraHeaders:["Event: ".concat("refer",";id=").concat(this._id),"Subscription-State: ".concat(n),"Content-Type: ".concat("message/sipfrag;version=2.0")],body:"SIP/2.0 ".concat(e," ").concat(t),eventHandlers:{onErrorResponse:function(){this._active=!1}}}))}}]),gr),wr=Lr.EventEmitter,Ps=ko,Ms=Sr,$s=H(),Ns=W(),Ds=new Ps("RTCSession:ReferSubscriber"),Ps=(f(hr,wr),Ts=T(hr),l(hr,[{key:"id",get:function(){return this._id}},{key:"sendRefer",value:function(e){var t,n=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=(Ds.debug("sendRefer()"),Ns.cloneArray(r.extraHeaders)),o=Ns.cloneObject(r.eventHandlers);for(t in o)Object.prototype.hasOwnProperty.call(o,t)&&this.on(t,o[t]);var a=null,r=(r.replaces&&(a=r.replaces._request.call_id,a=(a+=";to-tag=".concat(r.replaces._to_tag))+";from-tag=".concat(r.replaces._from_tag),a=encodeURIComponent(a)),"Refer-To: <".concat(e).concat(a?"?Replaces=".concat(a):"",">")),a=(i.push(r),i.some(function(e){return e.toLowerCase().startsWith("referred-by:")})||(e="Referred-By: <".concat(this._session._ua._configuration.uri._scheme,":").concat(this._session._ua._configuration.uri._user,"@").concat(this._session._ua._configuration.uri._host,">"),i.push(e)),i.push("Contact: ".concat(this._session.contact)),this._session.sendRequest(Ms.REFER,{extraHeaders:i,eventHandlers:{onSuccessResponse:function(e){n._requestSucceeded(e)},onErrorResponse:function(e){n._requestFailed(e,Ms.causes.REJECTED)},onTransportError:function(){n._requestFailed(null,Ms.causes.CONNECTION_ERROR)},onRequestTimeout:function(){n._requestFailed(null,Ms.causes.REQUEST_TIMEOUT)},onDialogError:function(){n._requestFailed(null,Ms.causes.DIALOG_ERROR)}}}));this._id=a.cseq}},{key:"receiveNotify",value:function(e){if(Ds.debug("receiveNotify()"),e.body){var t=$s.parse(e.body.trim().split("\r\n",1)[0],"Status_Line");if(-1!==t)switch(!0){case/^100$/.test(t.status_code):this.emit("trying",{request:e,status_line:t});break;case/^1[0-9]{2}$/.test(t.status_code):this.emit("progress",{request:e,status_line:t});break;case/^2[0-9]{2}$/.test(t.status_code):this.emit("accepted",{request:e,status_line:t});break;default:this.emit("failed",{request:e,status_line:t})}else Ds.debug('receiveNotify() | error parsing NOTIFY body: "'.concat(e.body,'"'))}}},{key:"_requestSucceeded",value:function(e){Ds.debug("REFER succeeded"),Ds.debug('emit "requestSucceeded"'),this.emit("requestSucceeded",{response:e})}},{key:"_requestFailed",value:function(e,t){Ds.debug("REFER failed"),Ds.debug('emit "requestFailed"'),this.emit("requestFailed",{response:e||null,cause:t})}}]),hr),wr=(f(pr,Lr.EventEmitter),Cs=T(pr),l(pr,[{key:"mediaStream",get:function(){return this._mediaStream}},{key:"getMediaStream",value:function(){return this._mediaStream}},{key:"getAudioTrack",value:function(){if(this._mediaStream){var e=this._mediaStream.getAudioTracks();if(0<e.length)return e[0]}return null}},{key:"play",value:function(){}}]),pr),Fs=wr,qs=W(),Fs=(f(fr,Fs),Ss=T(fr),l(fr,[{key:"initialize",value:function(){var e=this;return navigator.mediaDevices.getUserMedia({audio:this.audio,video:this.video}).then(function(t){return e._mediaStream=t,e}).catch(function(e){throw e})}},{key:"close",value:function(){this._mediaStream&&qs.closeMediaStream(this._mediaStream)}}]),fr),wr=(f(dr,wr),ks=T(dr),l(dr)),Us=Lr.EventEmitter,Bs=Xr,Xr=ko,js=e.default,Vs=Sr,Hs=kr,Ys=Io,zs=W(),Gs=Jr,Ws=Kr,Ks=ea,Xs=Zr,Zs=ta.exports,Js=co,Qs=Qr,el=Ps,tl=z(),nl=Fs,rl=wr,il=new Xr("RTCSession"),ol={STATUS_NULL:0,STATUS_INVITE_SENT:1,STATUS_1XX_RECEIVED:2,STATUS_INVITE_RECEIVED:3,STATUS_WAITING_FOR_ANSWER:4,STATUS_ANSWERED:5,STATUS_WAITING_FOR_ACK:6,STATUS_CANCELED:7,STATUS_TERMINATED:8,STATUS_CONFIRMED:9},al=["audio","video"],Jr=(f(ur,Us),xs=T(ur),l(ur,[{key:"C",get:function(){return ol}},{key:"causes",get:function(){return Vs.causes}},{key:"id",get:function(){return this._id}},{key:"connection",get:function(){return this._connection}},{key:"contact",get:function(){return this._contact}},{key:"direction",get:function(){return this._direction}},{key:"local_identity",get:function(){return this._local_identity}},{key:"remote_identity",get:function(){return this._remote_identity}},{key:"start_time",get:function(){return this._start_time}},{key:"end_time",get:function(){return this._end_time}},{key:"data",get:function(){return this._data},set:function(e){this._data=e}},{key:"status",get:function(){return this._status}},{key:"localStreams",get:function(){return this._use_trtc?[this._trtcLocalStream]:[this._localStream]}},{key:"remoteStreams",get:function(){return this._use_trtc?(0,c.default)(this._trtcRemoteStream):(0,c.default)(this._remoteStream)}},{key:"isInProgress",value:function(){switch(this._status){case ol.STATUS_NULL:case ol.STATUS_INVITE_SENT:case ol.STATUS_1XX_RECEIVED:case ol.STATUS_INVITE_RECEIVED:case ol.STATUS_WAITING_FOR_ANSWER:return!0;default:return!1}}},{key:"isEstablished",value:function(){switch(this._status){case ol.STATUS_ANSWERED:case ol.STATUS_WAITING_FOR_ACK:case ol.STATUS_CONFIRMED:return!0;default:return!1}}},{key:"isEnded",value:function(){switch(this._status){case ol.STATUS_CANCELED:case ol.STATUS_TERMINATED:return!0;default:return!1}}},{key:"isMuted",value:function(){return{audio:this._audioMuted,video:this._videoMuted}}},{key:"isOnHold",value:function(){return{local:this._localHold,remote:this._remoteHold}}},{key:"connect",value:function(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length?arguments[2]:void 0,i=(il.debug("connect()"),e),o=zs.cloneObject(n.eventHandlers),a=zs.cloneArray(n.extraHeaders),s=zs.cloneObject(n.mediaConstraints,{audio:!0,video:!0}),l=n.mediaStream||null,c=zs.cloneObject(n.pcConfig,{iceServers:[]}),u=n.rtcConstraints||null,d=n.rtcOfferConstraints||null;if(this._rtcOfferConstraints=d,this._rtcAnswerConstraints=n.rtcAnswerConstraints||null,this._trtcLocalStreamConfig=n.streamConfig||{},this._data=n.data||this._data,void 0===e)throw new TypeError("Not enough arguments");if(this._status!==ol.STATUS_NULL)throw new Hs.InvalidStateError(this._status);if(!window.RTCPeerConnection)throw new Hs.NotSupportedError("WebRTC not supported");if(!(e=this._ua.normalizeTarget(e)))throw new TypeError("Invalid target: ".concat(i));for(t in this._sessionTimers.enabled&&zs.isDecimal(n.sessionTimersExpires)&&(n.sessionTimersExpires>=Vs.MIN_SESSION_EXPIRES?this._sessionTimers.defaultExpires=n.sessionTimersExpires:this._sessionTimers.defaultExpires=Vs.SESSION_EXPIRES),o)Object.prototype.hasOwnProperty.call(o,t)&&this.on(t,o[t]);this._from_tag=zs.newTag();var i=n.anonymous||!1,f={from_tag:this._from_tag};this._contact=this._ua.contact.toString({anonymous:i,outbound:!0}),i?(f.from_display_name="Anonymous",f.from_uri=new tl("sip","anonymous","anonymous.invalid"),a.push("P-Preferred-Identity: ".concat(this._ua.configuration.uri.toString())),a.push("Privacy: id")):n.fromUserName&&(f.from_uri=new tl("sip",n.fromUserName,this._ua.configuration.uri.host),a.push("P-Preferred-Identity: ".concat(this._ua.configuration.uri.toString()))),n.fromDisplayName&&(f.from_display_name=n.fromDisplayName),a.push("Contact: ".concat(this._contact)),a.push("Content-Type: application/sdp"),this._sessionTimers.enabled&&a.push("Session-Expires: ".concat(this._sessionTimers.defaultExpires).concat(this._ua.configuration.session_timers_force_refresher?";refresher=uac":"")),this._use_trtc&&a.push("X-TRTC: 1"),this._request=new Ws.InitialOutgoingInviteRequest(e,this._ua,f,a),this._id=this._request.call_id+this._from_tag,this._use_trtc||this._createRTCConnection(c,u),this._direction="outgoing",this._local_identity=this._request.from,this._remote_identity=this._request.to,r&&r(this),this._newRTCSession("local",this._request),this._use_trtc?this._sendTRTCInitialRequest():this._sendInitialRequest(s,d,l)}},{key:"init_incoming",value:function(e,t){var n,r=this,i=(il.debug("init_incoming()"),e.hasHeader("Content-Type")?e.getHeader("Content-Type").toLowerCase():void 0);e.body&&"application/sdp"!==i?e.reply(415):(this._status=ol.STATUS_INVITE_RECEIVED,this._from_tag=e.from_tag,this._id=e.call_id+this._from_tag,this._request=e,this._contact=this._ua.contact.toString(),e.hasHeader("expires")&&(n=1e3*e.getHeader("expires")),e.to_tag=zs.newTag(),this._createDialog(e,"UAS",!0)?(e.body?this._late_sdp=!1:this._late_sdp=!0,this._status=ol.STATUS_WAITING_FOR_ANSWER,this._timers.userNoAnswerTimer=setTimeout(function(){e.reply(408),r._failed("local",null,Vs.causes.NO_ANSWER)},this._ua.configuration.no_answer_timeout),n&&(this._timers.expiresTimer=setTimeout(function(){r._status===ol.STATUS_WAITING_FOR_ANSWER&&(e.reply(487),r._failed("system",null,Vs.causes.EXPIRES))},n)),this._direction="incoming",this._local_identity=e.to,this._remote_identity=e.from,t&&t(this),this._newRTCSession("remote",e),this._status!==ol.STATUS_TERMINATED&&(e.reply(180,null,["Contact: ".concat(this._contact)]),this._progress("local",null))):e.reply(500,"Missing Contact header field"))}},{key:"answer",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=(il.debug("answer()"),this._request),r=zs.cloneArray(t.extraHeaders),i=zs.cloneObject(t.mediaConstraints),o=t.mediaStream||null,a=zs.cloneObject(t.pcConfig,{iceServers:[]}),s=t.rtcConstraints||null,l=t.rtcAnswerConstraints||null,c=zs.cloneObject(t.rtcOfferConstraints),u=!1,d=!1,f=!1,p=!1;if(this._rtcAnswerConstraints=l,this._rtcOfferConstraints=t.rtcOfferConstraints||null,this._trtcLocalStreamConfig=t.streamConfig||{},this._data=t.data||this._data,"incoming"!==this._direction)throw new Hs.NotSupportedError('"answer" not supported for outgoing RTCSession');if(this._status!==ol.STATUS_WAITING_FOR_ANSWER)throw new Hs.InvalidStateError(this._status);if(this._sessionTimers.enabled&&zs.isDecimal(t.sessionTimersExpires)&&(t.sessionTimersExpires>=Vs.MIN_SESSION_EXPIRES?this._sessionTimers.defaultExpires=t.sessionTimersExpires:this._sessionTimers.defaultExpires=Vs.SESSION_EXPIRES),this._status=ol.STATUS_ANSWERED,this._createDialog(n,"UAS")){if(clearTimeout(this._timers.userNoAnswerTimer),r.unshift("Contact: ".concat(this._contact)),this._use_trtc){var h=n.getHeader("X-TRTC-SDKAPPID"),g=n.getHeader("X-TRTC-USERID"),m=parseInt(n.getHeader("X-TRTC-ROOMID"),10),v=n.getHeader("X-TRTC-STRROOMID"),b=n.getHeader("X-TRTC-USERSIG"),_=n.getHeader("X-TRTC-PRIVATEMAPKEY");if(h&&g&&(m||v)&&b)return void O.default.resolve().then(function(t){if(e._status===ol.STATUS_TERMINATED)throw new Error("terminated");e._handleSessionTimersInIncomingRequest(n,r),n.reply(200,null,r,t,function(){e._status=ol.STATUS_WAITING_FOR_ACK,e._setInvite2xxTimer(n,t),e._setACKTimer(),e._accepted("local")},function(){e._failed("system",null,Vs.causes.CONNECTION_ERROR)}),e._late_sdp=!1}).then(function(){return e._joinTRTCRoom({sdkAppId:h,userId:g,roomId:m,strRoomId:v,privateMapKey:_,userSig:b},function(t){e.terminate({cause:Vs.causes.WEBRTC_ERROR,status_code:480,reason_phrase:t.name})})}).catch(function(t){var n,r;e._status!==ol.STATUS_TERMINATED&&(n=Vs.causes.WEBRTC_ERROR,["NotFoundError","NotAllowedError","NotReadableError","OverconstrainedError","AbortError"].includes(t.name)&&(n=Vs.causes.USER_DENIED_MEDIA_ACCESS,il.warn('emit "getusermediafailed" [error:%o]',t),e.emit("getusermediafailed",t)),"RtcError"===t.name&&il.error("TRTC error",t.toString()),il.error("TRTC error then terminate",t),r=zs.isFunction(t.getCode)?t.getCode():"0",r="X-TRTC-Error-Code: ".concat(r),e.terminate({cause:n,status_code:480,reason_phrase:t.name,extraHeaders:[r]}))}).then(function(){il.debug('emit "TRTC done"')});throw il.error("missing TRTC config"),n.reply(500),this._failed("system",null,Vs.causes.INTERNAL_ERROR),new Error("missing config")}t=n.parseSDP(),Array.isArray(t.media)||(t.media=[t.media]);var y,w=R(t.media);try{for(w.s();!(y=w.n()).done;){var x=y.value;"audio"===x.type&&(u=!0,x.direction&&"sendrecv"!==x.direction||(f=!0)),"video"===x.type&&(d=!0,x.direction&&"sendrecv"!==x.direction||(p=!0))}}catch(e){w.e(e)}finally{w.f()}if(o&&!1===i.audio){var k,S=R(o.getAudioTracks());try{for(S.s();!(k=S.n()).done;){var C=k.value;o.removeTrack(C)}}catch(e){S.e(e)}finally{S.f()}}if(o&&!1===i.video){var T,E=R(o.getVideoTracks());try{for(E.s();!(T=E.n()).done;){var I=T.value;o.removeTrack(I)}}catch(e){E.e(e)}finally{E.f()}}o||void 0!==i.audio||(i.audio=f),o||void 0!==i.video||(i.video=p),o||u||c.offerToReceiveAudio||(i.audio=!1),o||d||c.offerToReceiveVideo||(i.video=!1),this._createRTCConnection(a,s),O.default.resolve().then(function(){return o||(i.audio||i.video?new nl(i).initialize().catch(function(t){if(e._status===ol.STATUS_TERMINATED)throw new Error("terminated");throw n.reply(480),e._failed("local",null,Vs.causes.USER_DENIED_MEDIA_ACCESS),il.warn('emit "getusermediafailed" [error:%o]',t),e.emit("getusermediafailed",t),new Error("getUserMedia() failed")}):void 0)}).then(function(t){if(e._status===ol.STATUS_TERMINATED)throw new Error("terminated");(e._localStream=t).mediaStream&&t.mediaStream.getTracks().forEach(function(n){e._connection.addTrack(n,t.mediaStream)})}).then(function(){var t,r;if(!e._late_sdp)return t={originator:"remote",type:"offer",sdp:n.body},il.debug('emit "sdp"'),e.emit("sdp",t),r=new RTCSessionDescription({type:"offer",sdp:t.sdp}),e._connectionPromiseQueue=e._connectionPromiseQueue.then(function(){return e._connection.setRemoteDescription(r)}).catch(function(t){throw n.reply(488),e._failed("system",null,Vs.causes.WEBRTC_ERROR),il.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',t),e.emit("peerconnection:setremotedescriptionfailed",t),new Error("peerconnection.setRemoteDescription() failed")}),e._connectionPromiseQueue}).then(function(){if(e._status===ol.STATUS_TERMINATED)throw new Error("terminated");return e._connecting(n),(e._late_sdp?e._createLocalDescription("offer",e._rtcOfferConstraints):e._createLocalDescription("answer",l)).catch(function(){throw n.reply(500),new Error("_createLocalDescription() failed")})}).then(function(t){if(e._status===ol.STATUS_TERMINATED)throw new Error("terminated");e._handleSessionTimersInIncomingRequest(n,r),n.reply(200,null,r,t,function(){e._status=ol.STATUS_WAITING_FOR_ACK,e._setInvite2xxTimer(n,t),e._setACKTimer(),e._accepted("local")},function(){e._failed("system",null,Vs.causes.CONNECTION_ERROR)})}).catch(function(t){e._status!==ol.STATUS_TERMINATED&&il.warn(t)})}else n.reply(500,"Error creating dialog")}},{key:"terminate",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};il.debug("terminate()");var n,r,i=t.cause||Vs.causes.BYE,o=zs.cloneArray(t.extraHeaders),a=t.body,s=t.status_code,l=t.reason_phrase;if(this._status===ol.STATUS_TERMINATED)throw new Hs.InvalidStateError(this._status);switch(this._status){case ol.STATUS_NULL:case ol.STATUS_INVITE_SENT:case ol.STATUS_1XX_RECEIVED:if(il.debug("canceling session"),s&&(s<200||700<=s))throw new TypeError("Invalid status_code: ".concat(s));s&&(l=l||Vs.REASON_PHRASE[s]||"",n="SIP ;cause=".concat(s,' ;text="').concat(l,'"')),this._status===ol.STATUS_NULL||this._status===ol.STATUS_INVITE_SENT?(this._is_canceled=!0,this._cancel_reason=n):this._status===ol.STATUS_1XX_RECEIVED&&this._request.cancel(n),this._status=ol.STATUS_CANCELED,this._failed("local",null,Vs.causes.CANCELED);break;case ol.STATUS_WAITING_FOR_ANSWER:case ol.STATUS_ANSWERED:if(il.debug("rejecting session"),(s=s||480)<300||700<=s)throw new TypeError("Invalid status_code: ".concat(s));this._request.reply(s,l,o,a),this._failed("local",null,Vs.causes.REJECTED);break;case ol.STATUS_WAITING_FOR_ACK:case ol.STATUS_CONFIRMED:if(il.debug("terminating session"),l=t.reason_phrase||Vs.REASON_PHRASE[s]||"",s&&(s<200||700<=s))throw new TypeError("Invalid status_code: ".concat(s));s&&o.push("Reason: SIP ;cause=".concat(s,'; text="').concat(l,'"')),this._status===ol.STATUS_WAITING_FOR_ACK&&"incoming"===this._direction&&this._request.server_transaction.state!==Ys.C.STATUS_TERMINATED?(r=this._dialog,this.receiveRequest=function(t){t.method===Vs.ACK&&(e.sendRequest(Vs.BYE,{extraHeaders:o,body:a}),r.terminate())},this._request.server_transaction.on("stateChanged",function(){e._request.server_transaction.state===Ys.C.STATUS_TERMINATED&&(e.sendRequest(Vs.BYE,{extraHeaders:o,body:a}),r.terminate())}),this._ended("local",null,i),this._dialog=r,this._ua.newDialog(r)):(this.sendRequest(Vs.BYE,{extraHeaders:o,body:a}),this._ended("local",null,i))}}},{key:"sendDTMF",value:function(e){function t(){var e,a,s=this;this._status===ol.STATUS_TERMINATED||!this._tones||r>=this._tones.length?this._tones=null:(e=this._tones[r],r+=1,a=","===e?2e3:(a=new Zs(this),n.eventHandlers={onFailed:function(){s._tones=null}},a.send(e,n),i+o),setTimeout(t.bind(this),a))}var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=(il.debug("sendDTMF() | tones: %s",e),0),i=n.duration||null,o=n.interToneGap||null,a=n.transportType||Vs.DTMF_TRANSPORT.INFO;if(void 0===e)throw new TypeError("Not enough arguments");if(this._status!==ol.STATUS_CONFIRMED&&this._status!==ol.STATUS_WAITING_FOR_ACK&&this._status!==ol.STATUS_1XX_RECEIVED)throw new Hs.InvalidStateError(this._status);if(a!==Vs.DTMF_TRANSPORT.INFO&&a!==Vs.DTMF_TRANSPORT.RFC2833)throw new TypeError("invalid transportType: ".concat(a));if(!(e="number"==typeof e?e.toString():e)||"string"!=typeof e||!e.match(/^[0-9A-DR#*,]+$/i))throw new TypeError("Invalid tones: ".concat(e));if(i&&!zs.isDecimal(i))throw new TypeError("Invalid tone duration: ".concat(i));if(i=i?i<Zs.C.MIN_DURATION?(il.debug('"duration" value is lower than the minimum allowed, setting it to '.concat(Zs.C.MIN_DURATION," milliseconds")),Zs.C.MIN_DURATION):i>Zs.C.MAX_DURATION?(il.debug('"duration" value is greater than the maximum allowed, setting it to '.concat(Zs.C.MAX_DURATION," milliseconds")),Zs.C.MAX_DURATION):Math.abs(i):Zs.C.DEFAULT_DURATION,n.duration=i,o&&!zs.isDecimal(o))throw new TypeError("Invalid interToneGap: ".concat(o));o=o?o<Zs.C.MIN_INTER_TONE_GAP?(il.debug('"interToneGap" value is lower than the minimum allowed, setting it to '.concat(Zs.C.MIN_INTER_TONE_GAP," milliseconds")),Zs.C.MIN_INTER_TONE_GAP):Math.abs(o):Zs.C.DEFAULT_INTER_TONE_GAP,a!==Vs.DTMF_TRANSPORT.RFC2833?this._tones?this._tones+=e:(this._tones=e,t.call(this)):(a=this._getDTMFRTPSender())&&(e=a.toneBuffer+e,a.insertDTMF(e,i,o))}},{key:"sendInfo",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(il.debug("sendInfo()"),this._status!==ol.STATUS_CONFIRMED&&this._status!==ol.STATUS_WAITING_FOR_ACK&&this._status!==ol.STATUS_1XX_RECEIVED)throw new Hs.InvalidStateError(this._status);new Js(this).send(e,t,n)}},{key:"mute",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{audio:!0,video:!1},t=(il.debug("mute()"),!1),n=!1;!1===this._audioMuted&&e.audio&&(this._audioMuted=t=!0,this._toggleMuteAudio(!0)),!1===this._videoMuted&&e.video&&(this._videoMuted=n=!0,this._toggleMuteVideo(!0)),!0!==t&&!0!==n||this._onmute({audio:t,video:n})}},{key:"unmute",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{audio:!0,video:!0},t=(il.debug("unmute()"),!1),n=!1;!0===this._audioMuted&&e.audio&&(this._audioMuted=!(t=!0))===this._localHold&&this._toggleMuteAudio(!1),!0===this._videoMuted&&e.video&&(this._videoMuted=!(n=!0))===this._localHold&&this._toggleMuteVideo(!1),!0!==t&&!0!==n||this._onunmute({audio:t,video:n})}},{key:"switchMicrophones",value:function(e){if(il.debug("switchMicrophones(%s)",e),!this._is_confirmed||!this._trtcLocalStream)throw new Hs.InvalidStateError(this._status);if(this._trtcLocalStream)return this._trtcLocalStream.switchDevice("audio",e);throw new Hs.NotSupportedError("WebRTC mode not support switchMicrophones")}},{key:"switchSpeaker",value:function(e){var t=this;if(il.debug("switchSpeaker(%s)",e,this._trtcRemoteStream),!this._is_confirmed)throw new Hs.InvalidStateError(this._status);if(this._trtcLocalStream){var n,r=[];for(n in this._trtcRemoteStream)!function(n){Object.prototype.hasOwnProperty.call(t._trtcRemoteStream,n)&&(il.error("stream",n),r.push(function(){return t._trtcRemoteStream[n].setAudioOutput(e)}))}(n);return O.default.all(r)}throw new Hs.NotSupportedError("WebRTC mode not support switchSpeaker")}},{key:"setAudioVolume",value:function(e){if(il.debug("setAudioVolume(%d)",e),!this._is_confirmed)throw new Hs.InvalidStateError(this._status);if(this._trtcLocalStream)for(var t in this._trtcLocalStream.setAudioVolume(e),this._trtcRemoteStream)Object.prototype.hasOwnProperty.call(this._trtcRemoteStream,t)&&this._trtcRemoteStream[t].setAudioVolume(e);throw new Hs.NotSupportedError("WebRTC mode not support setAudioVolume")}},{key:"enableAudioVolumeEvaluation",value:function(e,t){if(il.debug("enableAudioVolumeEvaluation(%d)",e),this._localTRTCClient)return this._localTRTCClient.enableAudioVolumeEvaluation(e,t);throw new Hs.InvalidStateError(this._status)}},{key:"hold",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length?arguments[1]:void 0;if(il.debug("hold()"),this._status!==ol.STATUS_WAITING_FOR_ACK&&this._status!==ol.STATUS_CONFIRMED)return!1;if(!0===this._localHold)return!1;if(!this._isReadyToReOffer())return!1;this._localHold=!0,this._onhold("local");var r={succeeded:function(){n&&n()},failed:function(){e.terminate({cause:Vs.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Hold Failed"})}};return t.useUpdate?this._sendUpdate({sdpOffer:!0,eventHandlers:r,extraHeaders:t.extraHeaders}):this._sendReinvite({eventHandlers:r,extraHeaders:t.extraHeaders}),!0}},{key:"unhold",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length?arguments[1]:void 0;if(il.debug("unhold()"),this._status!==ol.STATUS_WAITING_FOR_ACK&&this._status!==ol.STATUS_CONFIRMED)return!1;if(!1===this._localHold)return!1;if(!this._isReadyToReOffer())return!1;this._localHold=!1,this._onunhold("local");var r={succeeded:function(){n&&n()},failed:function(){e.terminate({cause:Vs.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Unhold Failed"})}};return t.useUpdate?this._sendUpdate({sdpOffer:!0,eventHandlers:r,extraHeaders:t.extraHeaders}):this._sendReinvite({eventHandlers:r,extraHeaders:t.extraHeaders}),!0}},{key:"renegotiate",value:function(){var e,t=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=1<arguments.length?arguments[1]:void 0,i=(il.debug("renegotiate()"),n.rtcOfferConstraints||null);return!(this._status!==ol.STATUS_WAITING_FOR_ACK&&this._status!==ol.STATUS_CONFIRMED||!this._isReadyToReOffer()||(e={succeeded:function(){r&&r()},failed:function(){t.terminate({cause:Vs.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Media Renegotiation Failed"})}},this._setLocalMediaStatus(),n.useUpdate?this._sendUpdate({sdpOffer:!0,eventHandlers:e,rtcOfferConstraints:i,extraHeaders:n.extraHeaders}):this._sendReinvite({eventHandlers:e,rtcOfferConstraints:i,extraHeaders:n.extraHeaders}),0))}},{key:"refer",value:function(e,t){var n,r,i=this,o=(il.debug("refer()"),e);if(this._status!==ol.STATUS_WAITING_FOR_ACK&&this._status!==ol.STATUS_CONFIRMED)return!1;if(e=this._ua.normalizeTarget(e))return(n=new el(this)).sendRefer(e,t),r=n.id,(this._referSubscribers[r]=n).on("requestFailed",function(){delete i._referSubscribers[r]}),n.on("accepted",function(){delete i._referSubscribers[r]}),n.on("failed",function(){delete i._referSubscribers[r]}),n;throw new TypeError("Invalid target: ".concat(o))}},{key:"sendRequest",value:function(e,t){return il.debug("sendRequest()"),this._dialog.sendRequest(e,t)}},{key:"receiveRequest",value:function(e){var t=this;if(il.debug("receiveRequest()"),e.method===Vs.CANCEL)this._status!==ol.STATUS_WAITING_FOR_ANSWER&&this._status!==ol.STATUS_ANSWERED||(this._status=ol.STATUS_CANCELED,this._request.reply(487),this._failed("remote",e,Vs.causes.CANCELED));else switch(e.method){case Vs.ACK:if(this._status===ol.STATUS_WAITING_FOR_ACK)if(this._status=ol.STATUS_CONFIRMED,clearTimeout(this._timers.ackTimer),clearTimeout(this._timers.invite2xxTimer),this._late_sdp){if(!e.body){this.terminate({cause:Vs.causes.MISSING_SDP,status_code:400});break}var n={originator:"remote",type:"answer",sdp:e.body},r=(il.debug('emit "sdp"'),this.emit("sdp",n),new RTCSessionDescription({type:"answer",sdp:n.sdp}));this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){return t._connection.setRemoteDescription(r)}).then(function(){t._is_confirmed||t._confirmed("remote",e)}).catch(function(e){t.terminate({cause:Vs.causes.BAD_MEDIA_DESCRIPTION,status_code:488}),il.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',e),t.emit("peerconnection:setremotedescriptionfailed",e)})}else this._is_confirmed||this._confirmed("remote",e);break;case Vs.BYE:this._status===ol.STATUS_CONFIRMED||this._status===ol.STATUS_WAITING_FOR_ACK?(e.reply(200),this._ended("remote",e,Vs.causes.BYE)):this._status===ol.STATUS_INVITE_RECEIVED||this._status===ol.STATUS_WAITING_FOR_ANSWER?(e.reply(200),this._request.reply(487,"BYE Received"),this._ended("remote",e,Vs.causes.BYE)):e.reply(403,"Wrong Status");break;case Vs.INVITE:this._status===ol.STATUS_CONFIRMED?e.hasHeader("replaces")?this._receiveReplaces(e):this._receiveReinvite(e):e.reply(403,"Wrong Status");break;case Vs.INFO:this._status===ol.STATUS_1XX_RECEIVED||this._status===ol.STATUS_WAITING_FOR_ANSWER||this._status===ol.STATUS_ANSWERED||this._status===ol.STATUS_WAITING_FOR_ACK||this._status===ol.STATUS_CONFIRMED?(n=e.hasHeader("Content-Type")?e.getHeader("Content-Type").toLowerCase():void 0)&&n.match(/^application\/dtmf-relay/i)?new Zs(this).init_incoming(e):void 0!==n?new Js(this).init_incoming(e):e.reply(415):e.reply(403,"Wrong Status");break;case Vs.UPDATE:this._status===ol.STATUS_CONFIRMED?this._receiveUpdate(e):e.reply(403,"Wrong Status");break;case Vs.REFER:this._status===ol.STATUS_CONFIRMED?this._receiveRefer(e):e.reply(403,"Wrong Status");break;case Vs.NOTIFY:this._status===ol.STATUS_CONFIRMED?this._receiveNotify(e):e.reply(403,"Wrong Status");break;default:e.reply(501)}}},{key:"onTransportError",value:function(){il.warn("onTransportError()"),this._status!==ol.STATUS_TERMINATED&&this.terminate({status_code:500,reason_phrase:Vs.causes.CONNECTION_ERROR,cause:Vs.causes.CONNECTION_ERROR})}},{key:"onRequestTimeout",value:function(){il.warn("onRequestTimeout()"),this._status!==ol.STATUS_TERMINATED&&this.terminate({status_code:408,reason_phrase:Vs.causes.REQUEST_TIMEOUT,cause:Vs.causes.REQUEST_TIMEOUT})}},{key:"onDialogError",value:function(){il.warn("onDialogError()"),this._status!==ol.STATUS_TERMINATED&&this.terminate({status_code:500,reason_phrase:Vs.causes.DIALOG_ERROR,cause:Vs.causes.DIALOG_ERROR})}},{key:"newDTMF",value:function(e){il.debug("newDTMF()"),this.emit("newDTMF",e)}},{key:"newInfo",value:function(e){il.debug("newInfo()"),this.emit("newInfo",e)}},{key:"_isReadyToReOffer",value:function(){return this._rtcReady?this._dialog?!0!==this._dialog.uac_pending_reply&&!0!==this._dialog.uas_pending_reply||(il.debug("_isReadyToReOffer() | there is another INVITE/UPDATE transaction in progress"),!1):(il.debug("_isReadyToReOffer() | session not established yet"),!1):(il.debug("_isReadyToReOffer() | internal WebRTC status not ready"),!1)}},{key:"_close",value:function(){var e=this;if(il.debug("close()"),this._localStream&&this._localStream.close(),this._trtcLocalStream&&this._trtcLocalStreamLocallyGenerated&&(il.debug("close() | closing trtcLocalStream"),O.default.resolve().then(function(){if(e._localTRTCClient)return e._localTRTCClient.unpublish(e._trtcLocalStream)}).then(function(){return!e._localTRTCClient||e._localTRTCClient.leave()}).then(function(){e._trtcLocalStream.close()}).catch(function(e){il.warn("TRTC leave room failed [error:%o]",e)}).then(function(){il.debug("TRTC destroy"),e._localTRTCClient&&e._localTRTCClient.destroy()})),this._status!==ol.STATUS_TERMINATED){if(this._status=ol.STATUS_TERMINATED,this._connection){for(var t in this._remoteStream)this.emit("removestream",t);try{this._connection.close()}catch(e){il.warn("close() | error closing the RTCPeerConnection: %o",e)}}for(var n in this._timers)Object.prototype.hasOwnProperty.call(this._timers,n)&&clearTimeout(this._timers[n]);for(var r in clearTimeout(this._sessionTimers.timer),this._dialog&&(this._dialog.terminate(),delete this._dialog),this._earlyDialogs)Object.prototype.hasOwnProperty.call(this._earlyDialogs,r)&&(this._earlyDialogs[r].terminate(),delete this._earlyDialogs[r]);for(var i in this._referSubscribers)Object.prototype.hasOwnProperty.call(this._referSubscribers,i)&&delete this._referSubscribers[i];this._ua.destroyRTCSession(this)}}},{key:"_setInvite2xxTimer",value:function(e,t){var n=Gs.T1;this._timers.invite2xxTimer=setTimeout(function r(){this._status===ol.STATUS_WAITING_FOR_ACK&&(e.reply(200,null,["Contact: ".concat(this._contact)],t),n<Gs.T2&&(n*=2)>Gs.T2&&(n=Gs.T2),this._timers.invite2xxTimer=setTimeout(r.bind(this),n))}.bind(this),n)}},{key:"_setACKTimer",value:function(){var e=this;this._timers.ackTimer=setTimeout(function(){e._status===ol.STATUS_WAITING_FOR_ACK&&(il.debug("no ACK received, terminating the session"),clearTimeout(e._timers.invite2xxTimer),e.sendRequest(Vs.BYE),e._ended("remote",null,Vs.causes.NO_ACK))},Gs.TIMER_H)}},{key:"_createRTCConnection",value:function(e,t){var n=this;this._connection=new RTCPeerConnection(e,t),this._connection.addEventListener("iceconnectionstatechange",function(){"failed"===n._connection.iceConnectionState&&n.terminate({cause:Vs.causes.RTP_TIMEOUT,status_code:408,reason_phrase:Vs.causes.RTP_TIMEOUT})}),this._connection.addEventListener("track",function(e){var t,e=e.streams[0];n._remoteStream[e.id]||(t=new rl({mediaStream:e}),n._remoteStream[e.id]=t,n.emit("addstream",{stream:t}))}),il.debug('emit "peerconnection"'),this.emit("peerconnection",{peerconnection:this._connection})}},{key:"_createLocalDescription",value:function(e,t){var n=this;if(il.debug("createLocalDescription(%s, %o)",e,t),"offer"!==e&&"answer"!==e)throw new Error('createLocalDescription() | invalid type "'.concat(e,'"'));var r=this._connection;return this._rtcReady=!1,O.default.resolve().then(function(){return"offer"===e?r.createOffer(t).catch(function(e){return il.warn('emit "peerconnection:createofferfailed" [error:%o]',e),n.emit("peerconnection:createofferfailed",e),O.default.reject(e)}):r.createAnswer(t).catch(function(e){return il.warn('emit "peerconnection:createanswerfailed" [error:%o]',e),n.emit("peerconnection:createanswerfailed",e),O.default.reject(e)})}).then(function(e){return r.setLocalDescription(e).catch(function(e){return n._rtcReady=!0,il.warn('emit "peerconnection:setlocaldescriptionfailed" [error:%o]',e),n.emit("peerconnection:setlocaldescriptionfailed",e),O.default.reject(e)})}).then(function(){var i=t&&t.iceRestart;return"complete"===r.iceGatheringState&&!i||"gathering"===r.iceGatheringState&&n._iceReady?(n._rtcReady=!0,i={originator:"local",type:e,sdp:r.localDescription.sdp},il.debug('emit "sdp"'),n.emit("sdp",i),O.default.resolve(i.sdp)):new O.default(function(t){function i(){r.removeEventListener("icecandidate",o),r.removeEventListener("icegatheringstatechange",a),s=!0,n._rtcReady=!0,n._iceReady=!0;var i={originator:"local",type:e,sdp:r.localDescription.sdp};il.debug('emit "sdp"'),n.emit("sdp",i),t(i.sdp)}var o,a,s=!1;n._iceReady=!1,r.addEventListener("icecandidate",o=function(e){e=e.candidate,e?n.emit("icecandidate",{candidate:e,ready:i}):s||i()}),r.addEventListener("icegatheringstatechange",a=function(){"complete"!==r.iceGatheringState||s||i()})})})}},{key:"_createDialog",value:function(e,t,n){var r="UAS"===t?e.to_tag:e.from_tag,i="UAS"===t?e.from_tag:e.to_tag,r=e.call_id+r+i,i=this._earlyDialogs[r];return n?!!i||((i=new Ks(this,e,t,Ks.C.STATUS_EARLY)).error?(il.debug(i.error),this._failed("remote",e,Vs.causes.INTERNAL_ERROR),!1):(this._earlyDialogs[r]=i,!0)):(this._from_tag=e.from_tag,this._to_tag=e.to_tag,i?(i.update(e,t),this._dialog=i,delete this._earlyDialogs[r],!0):(n=new Ks(this,e,t)).error?(il.debug(n.error),this._failed("remote",e,Vs.causes.INTERNAL_ERROR),!1):(this._dialog=n,!0))}},{key:"_receiveReinvite",value:function(e){function t(t){var n=this,r=["Contact: ".concat(this._contact)];this._handleSessionTimersInIncomingRequest(e,r),this._late_sdp&&(t=this._mangleOffer(t)),e.reply(200,null,r,t,function(){n._status=ol.STATUS_WAITING_FOR_ACK,n._setInvite2xxTimer(e,t),n._setACKTimer()}),"function"==typeof i.callback&&i.callback()}var n=this,r=(il.debug("receiveReinvite()"),e.hasHeader("Content-Type")?e.getHeader("Content-Type").toLowerCase():void 0),i={request:e,callback:void 0,reject:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=(o=!0,t.status_code||403),r=t.reason_phrase||"",t=zs.cloneArray(t.extraHeaders);if(this._status!==ol.STATUS_CONFIRMED)return!1;if(n<300||700<=n)throw new TypeError("Invalid status_code: ".concat(n));e.reply(n,r,t)}.bind(this)},o=!1;this.emit("reinvite",i),o||(this._late_sdp=!1,e.body?"application/sdp"!==r?(il.debug("invalid Content-Type"),e.reply(415)):this._processInDialogSdpOffer(e).then(function(e){n._status!==ol.STATUS_TERMINATED&&t.call(n,e)}).catch(function(e){il.warn(e)}):(this._late_sdp=!0,this._remoteHold&&(this._remoteHold=!1,this._onunhold("remote")),this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){return n._createLocalDescription("offer",n._rtcOfferConstraints)}).then(function(e){t.call(n,e)}).catch(function(){e.reply(500)})))}},{key:"_receiveUpdate",value:function(e){function t(t){var n=["Contact: ".concat(this._contact)];this._handleSessionTimersInIncomingRequest(e,n),e.reply(200,null,n,t),"function"==typeof i.callback&&i.callback()}var n=this,r=(il.debug("receiveUpdate()"),e.hasHeader("Content-Type")?e.getHeader("Content-Type").toLowerCase():void 0),i={request:e,callback:void 0,reject:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=(o=!0,t.status_code||403),r=t.reason_phrase||"",t=zs.cloneArray(t.extraHeaders);if(this._status!==ol.STATUS_CONFIRMED)return!1;if(n<300||700<=n)throw new TypeError("Invalid status_code: ".concat(n));e.reply(n,r,t)}.bind(this)},o=!1;this.emit("update",i),o||(e.body?"application/sdp"!==r?(il.debug("invalid Content-Type"),e.reply(415)):this._processInDialogSdpOffer(e).then(function(e){n._status!==ol.STATUS_TERMINATED&&t.call(n,e)}).catch(function(e){il.warn(e)}):t.call(this,null))}},{key:"_processInDialogSdpOffer",value:function(e){var t=this;il.debug("_processInDialogSdpOffer()");var n,r=e.parseSDP(),i=!1,o=R(r.media);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(-1!==al.indexOf(a.type)){var s=a.direction||r.direction||"sendrecv";if("sendonly"!==s&&"inactive"!==s){i=!1;break}i=!0}}}catch(e){o.e(e)}finally{o.f()}var l={originator:"remote",type:"offer",sdp:e.body},c=(il.debug('emit "sdp"'),this.emit("sdp",l),new RTCSessionDescription({type:"offer",sdp:l.sdp}));return this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){if(t._status===ol.STATUS_TERMINATED)throw new Error("terminated");return t._connection.setRemoteDescription(c).catch(function(n){throw e.reply(488),il.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',n),t.emit("peerconnection:setremotedescriptionfailed",n),n})}).then(function(){if(t._status===ol.STATUS_TERMINATED)throw new Error("terminated");!0===t._remoteHold&&!1===i?(t._remoteHold=!1,t._onunhold("remote")):!1===t._remoteHold&&!0===i&&(t._remoteHold=!0,t._onhold("remote"))}).then(function(){if(t._status===ol.STATUS_TERMINATED)throw new Error("terminated");return t._createLocalDescription("answer",t._rtcAnswerConstraints).catch(function(t){throw e.reply(500),il.warn('emit "peerconnection:createtelocaldescriptionfailed" [error:%o]',t),t})}).catch(function(e){il.warn("_processInDialogSdpOffer() failed [error: %o]",e)}),this._connectionPromiseQueue}},{key:"_receiveRefer",value:function(e){var t,n=this;il.debug("receiveRefer()"),e.refer_to?e.refer_to.uri.scheme!==Vs.SIP?(il.debug("Refer-To header field points to a non-SIP URI scheme"),e.reply(416)):(e.reply(202),t=new Qs(this,e.cseq),il.debug('emit "refer"'),this.emit("refer",{request:e,accept:function(r,i){(function(n){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(n="function"==typeof n?n:null,this._status!==ol.STATUS_WAITING_FOR_ACK&&this._status!==ol.STATUS_CONFIRMED)return!1;var i,o=new ur(this._ua);o.on("progress",function(e){e=e.response,t.notify(e.status_code,e.reason_phrase)}),o.on("accepted",function(e){e=e.response,t.notify(e.status_code,e.reason_phrase)}),o.on("_failed",function(e){var n=e.message,e=e.cause;n?t.notify(n.status_code,n.reason_phrase):t.notify(487,e)}),e.refer_to.uri.hasHeader("replaces")&&(i=decodeURIComponent(e.refer_to.uri.getHeader("replaces")),r.extraHeaders=zs.cloneArray(r.extraHeaders),r.extraHeaders.push("Replaces: ".concat(i))),o.connect(e.refer_to.uri.toAor(),r,n)}).call(n,r,i)},reject:function(){(function(){t.notify(603)}).call(n)}})):(il.debug("no Refer-To header field present in REFER"),e.reply(400))}},{key:"_receiveNotify",value:function(e){if(il.debug("receiveNotify()"),e.event||e.reply(400),"refer"===e.event.event){var t;if(e.event.params&&e.event.params.id)t=e.event.params.id,t=this._referSubscribers[t];else{if(1!==(0,Ee.default)(this._referSubscribers).length)return void e.reply(400,"Missing event id parameter");t=this._referSubscribers[(0,Ee.default)(this._referSubscribers)[0]]}t?(t.receiveNotify(e),e.reply(200)):e.reply(481,"Subscription does not exist")}else e.reply(489)}},{key:"_receiveReplaces",value:function(e){var t=this;il.debug("receiveReplaces()"),this.emit("replaces",{request:e,accept:function(n){(function(t){var n=this;if(this._status!==ol.STATUS_WAITING_FOR_ACK&&this._status!==ol.STATUS_CONFIRMED)return!1;var r=new ur(this._ua);r.on("confirmed",function(){n.terminate()}),r.init_incoming(e,t)}).call(t,n)},reject:function(){(function(){il.debug("Replaced INVITE rejected by the user"),e.reply(486)}).call(t)}})}},{key:"_sendInitialRequest",value:function(e,t,n){var r=this,i=new Xs(this._ua,this._request,{onRequestTimeout:function(){r.onRequestTimeout()},onTransportError:function(){r.onTransportError()},onAuthenticated:function(e){r._request=e},onReceiveResponse:function(e){r._receiveInviteResponse(e)}});O.default.resolve().then(function(){return n||(e.audio||e.video?new nl(e).initialize().catch(function(e){if(r._status===ol.STATUS_TERMINATED)throw new Error("terminated");throw r._failed("local",null,Vs.causes.USER_DENIED_MEDIA_ACCESS),il.warn('emit "getusermediafailed" [error:%o]',e),r.emit("getusermediafailed",e),e}):void 0)}).then(function(e){if(r._status===ol.STATUS_TERMINATED)throw new Error("terminated");return(r._localStream=e).mediaStream&&e.mediaStream.getTracks().forEach(function(t){r._connection.addTrack(t,e.mediaStream)}),r._connecting(r._request),r._createLocalDescription("offer",t).catch(function(e){throw r._failed("local",null,Vs.causes.WEBRTC_ERROR),e})}).then(function(e){if(r._is_canceled||r._status===ol.STATUS_TERMINATED)throw new Error("terminated");r._request.body=e,r._status=ol.STATUS_INVITE_SENT,il.debug('emit "sending" [request:%o]',r._request),r.emit("sending",{request:r._request}),i.send()}).catch(function(e){r._status!==ol.STATUS_TERMINATED&&il.warn(e)})}},{key:"_sendTRTCInitialRequest",value:function(){var e=this,t=new Xs(this._ua,this._request,{onRequestTimeout:function(){e.onRequestTimeout()},onTransportError:function(){e.onTransportError()},onAuthenticated:function(t){e._request=t},onReceiveResponse:function(t){e._receiveInviteResponse(t)}});O.default.resolve().then(function(){if(e._status===ol.STATUS_TERMINATED)throw new Error("terminated");il.debug("connecting"),e._connecting(e._request),e._status=ol.STATUS_INVITE_SENT,il.debug('emit "sending" [request:%o]',e._request),e.emit("sending",{request:e._request}),t.send()}).catch(function(t){e._status!==ol.STATUS_TERMINATED&&il.warn(t)})}},{key:"_inviteToTRTCRoom",value:function(e,t){var n=this;this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){return n._joinTRTCRoom(t,function(t){n._acceptAndTerminate(e),n._failed("system",t.toString(),Vs.causes.WEBRTC_ERROR)})}).then(function(){n._rtcReady=!0,"incoming"===n._direction&&(n._handleSessionTimersInIncomingResponse(e),n._accepted("remote",e),n.sendRequest(Vs.ACK),n._confirmed("local",null))}).catch(function(t){var r;if(n._status!==ol.STATUS_TERMINATED)throw r=Vs.causes.WEBRTC_ERROR,["NotFoundError","NotAllowedError","NotReadableError","OverconstrainedError","AbortError"].includes(t.name)&&(r=Vs.causes.USER_DENIED_MEDIA_ACCESS,il.warn('emit "getusermediafailed" [error:%o]',t),n.emit("getusermediafailed",t)),"RtcError"===t.name&&il.error("TRTC error",t.toString()),n._acceptAndTerminate(e,500,r),n._failed("local",e,r),t}).then(function(){il.debug('emit "trtc done"')})}},{key:"_joinTRTCRoom",value:function(e,t){var n=this,r=e.sdkAppId,o=e.userId,a=e.roomId,s=e.userSig,l=e.privateMapKey,c=e.strRoomId,u=js.createClient({mode:"rtc",sdkAppId:Number(r),userId:o,userSig:s,useStringRoomId:!a});return this._trtcLocalStream=js.createStream(i({userId:o,audio:!this._trtcLocalStreamConfig.screenAudio,video:!1},this._trtcLocalStreamConfig)),this._localTRTCClient=u,this._localUserId=o,this._ua.configuration.trtc_proxy_server&&u.setProxyServer(this._ua.configuration.trtc_proxy_server),this._ua.configuration.trtc_turn_server&&u.setTurnServer(this._ua.configuration.trtc_turn_server),u.on("stream-added",function(e){il.debug("TRTC stream-added, id:%s",e.stream.getId()),n.emit("stream-added",e),u.subscribe(e.stream,{audio:!0,video:Boolean(n._trtcLocalStream.video)}).catch(function(e){n._status!==ol.STATUS_TERMINATED&&(il.error("TRTC subscribe stream errorCode: %d",e.getCode()),t&&t(e))})}),u.on("stream-subscribed",function(e){var r=e.stream;il.debug("TRTC stream-subscribed, id:%o",r.getId()),n._trtcRemoteStream[r.getId()]=r,n.emit("addstream",e),n.emit("stream-subscribed",e),0<n.listenerCount("stream-subscribed")?il.debug("stream-subscribe listener count greater than 0"):r.play(n._getStreamPlayElement(o)).then(function(){il.debug("TRTC play stream success, id:%o",r.getId())}).catch(function(e){n._status!==ol.STATUS_TERMINATED&&(il.error("TRTC subscribe stream errorCode: %d",e.getCode()),t&&t(e))})}),u.on("stream-removed",function(e){var t=e.stream;delete n._trtcRemoteStream[t.getId()],n.emit("stream-removed",e),n.emit("removestream",e)}),u.on("stream-updated",function(e){var t=e.stream;n._trtcRemoteStream[t.getId()]=t,n.emit("stream-updated",e)}),u.on("error",function(e){var t;n._status!==ol.STATUS_TERMINATED&&(t=e.getCode(),il.error("TRTC errorCode: %o",t),n._failed("local",e.toString(),Vs.causes.WEBRTC_ERROR))}),u.on("audio-volume",function(e){e&&Array.isArray(e.result)&&(e=e.result.map(function(e){return i(i({},e),{},{originator:e.userId===n._localUserId?"local":"remote"})}),n.emit("audiovolume",{result:e}))}),u.on("network-quality",function(e){n.emit("networkquality",e)}),O.default.resolve().then(function(){return il.debug("TRTC initialize"),n._trtcLocalStream.initialize()}).then(function(){if(n._status!==ol.STATUS_TERMINATED)return n._trtcLocalStreamLocallyGenerated=!0,n._trtcLocalStream.play(n._getStreamPlayElement(o)),il.debug("TRTC join"),n._localTRTCClient.join({roomId:a||c,privateMapKey:l});n._trtcLocalStream.close()}).then(function(){return il.debug("TRTC publish"),n._localTRTCClient.publish(n._trtcLocalStream)}).catch(function(e){if(il.warn("trtc join failed, status: ".concat(n._status,", error message: ").concat(e.toString())),n._status!==ol.STATUS_TERMINATED)throw e})}},{key:"_getStreamPlayElement",value:function(e){var e="".concat(e,"-rtc-session-audio"),t=document.getElementById(e);return il.debug("get audio container",t),t||(il.debug("create audio container"),(t=document.createElement("div")).setAttribute("id",e),t.setAttribute("style","width:0;height:0;overflow:hidden"),document.body.appendChild(t),il.debug("create audio container id:%o",e)),t}},{key:"_getDTMFRTPSender",value:function(){var e=this._connection.getSenders().find(function(e){return e.track&&"audio"===e.track.kind});if(e&&e.dtmf)return e.dtmf;il.warn("sendDTMF() | no local audio track to send DTMF with")}},{key:"_receiveInviteResponse",value:function(e){var t,n,r,i,o,a,s,l,c=this;if(il.debug("receiveInviteResponse()"),this._dialog&&200<=e.status_code&&e.status_code<=299)return this._dialog.id.call_id===e.call_id&&this._dialog.id.local_tag===e.from_tag&&this._dialog.id.remote_tag===e.to_tag?void this.sendRequest(Vs.ACK):void 0!==(t=new Ks(this,e,"UAC")).error?void il.debug(t.error):(this.sendRequest(Vs.ACK),void this.sendRequest(Vs.BYE));if(this._is_canceled)100<=e.status_code&&e.status_code<200?this._request.cancel(this._cancel_reason):200<=e.status_code&&e.status_code<299&&this._acceptAndTerminate(e);else if(this._status===ol.STATUS_INVITE_SENT||this._status===ol.STATUS_1XX_RECEIVED)switch(!0){case/^100$/.test(e.status_code):this._status=ol.STATUS_1XX_RECEIVED;break;case/^1[0-9]{2}$/.test(e.status_code):e.to_tag?e.hasHeader("contact")&&!this._createDialog(e,"UAC",!0)||(this._status=ol.STATUS_1XX_RECEIVED,this._use_trtc?(this._progress("remote",e),o=e.getHeader("X-TRTC-SDKAPPID"),s=e.getHeader("X-TRTC-USERID"),u=parseInt(e.getHeader("X-TRTC-ROOMID"),10),n=e.getHeader("X-TRTC-STRROOMID"),r=e.getHeader("X-TRTC-USERSIG"),i=e.getHeader("X-TRTC-PRIVATEMAPKEY"),o&&s&&(u||n)&&r?this._inviteToTRTCRoom(e,{sdkAppId:o,userId:s,roomId:u,strRoomId:n,userSig:r,privateMapKey:i}):(this._acceptAndTerminate(e,400,Vs.causes.MISSING_SDP),this._failed("remote",e,Vs.causes.BAD_MEDIA_DESCRIPTION))):e.body?(o={originator:"remote",type:"answer",sdp:e.body},il.debug('emit "sdp"'),this.emit("sdp",o),a=new RTCSessionDescription({type:"answer",sdp:o.sdp}),this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){return c._connection.setRemoteDescription(a)}).then(function(){return c._progress("remote",e)}).catch(function(e){il.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',e),c.emit("peerconnection:setremotedescriptionfailed",e)})):this._progress("remote",e)):il.debug("1xx response received without to tag");break;case/^2[0-9]{2}$/.test(e.status_code):this._status=ol.STATUS_CONFIRMED,e.body||this._use_trtc?this._createDialog(e,"UAC")&&(this._use_trtc?(this._handleSessionTimersInIncomingResponse(e),this._accepted("remote",e),this.sendRequest(Vs.ACK),this._confirmed("local",null)):(s={originator:"remote",type:"answer",sdp:e.body},il.debug('emit "sdp"'),this.emit("sdp",s),l=new RTCSessionDescription({type:"answer",sdp:s.sdp}),this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){if("stable"===c._connection.signalingState)return c._connection.createOffer(c._rtcOfferConstraints).then(function(e){return c._connection.setLocalDescription(e)}).catch(function(t){c._acceptAndTerminate(e,500,t.toString()),c._failed("local",e,Vs.causes.WEBRTC_ERROR)})}).then(function(){c._connection.setRemoteDescription(l).then(function(){c._handleSessionTimersInIncomingResponse(e),c._accepted("remote",e),c.sendRequest(Vs.ACK),c._confirmed("local",null)}).catch(function(t){c._acceptAndTerminate(e,488,"Not Acceptable Here"),c._failed("remote",e,Vs.causes.BAD_MEDIA_DESCRIPTION),il.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',t),c.emit("peerconnection:setremotedescriptionfailed",t)})}))):(this._acceptAndTerminate(e,400,Vs.causes.MISSING_SDP),this._failed("remote",e,Vs.causes.BAD_MEDIA_DESCRIPTION));break;default:var u=zs.sipErrorCause(e.status_code);this._failed("remote",e,u)}}},{key:"_sendReinvite",value:function(){function e(e){i.failed&&i.failed(e)}var t=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=(il.debug("sendReinvite()"),zs.cloneArray(n.extraHeaders)),i=zs.cloneObject(n.eventHandlers),o=n.rtcOfferConstraints||this._rtcOfferConstraints||null,a=!1;r.push("Contact: ".concat(this._contact)),r.push("Content-Type: application/sdp"),this._sessionTimers.running&&r.push("Session-Expires: ".concat(this._sessionTimers.currentExpires,";refresher=").concat(this._sessionTimers.refresher?"uac":"uas")),this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){return t._createLocalDescription("offer",o)}).then(function(n){var o={originator:"local",type:"offer",sdp:n=t._mangleOffer(n)};il.debug('emit "sdp"'),t.emit("sdp",o),t.sendRequest(Vs.INVITE,{extraHeaders:r,body:n,eventHandlers:{onSuccessResponse:function(n){(function(t){var n,r,o=this;this._status===ol.STATUS_TERMINATED||(this.sendRequest(Vs.ACK),a)||(this._handleSessionTimersInIncomingResponse(t),t.body&&t.hasHeader("Content-Type")&&"application/sdp"===t.getHeader("Content-Type").toLowerCase()?(n={originator:"remote",type:"answer",sdp:t.body},il.debug('emit "sdp"'),this.emit("sdp",n),r=new RTCSessionDescription({type:"answer",sdp:n.sdp}),this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){return o._connection.setRemoteDescription(r)}).then(function(){i.succeeded&&i.succeeded(t)}).catch(function(t){e.call(o),il.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',t),o.emit("peerconnection:setremotedescriptionfailed",t)})):e.call(this))}).call(t,n),a=!0},onErrorResponse:function(n){e.call(t,n)},onTransportError:function(){t.onTransportError()},onRequestTimeout:function(){t.onRequestTimeout()},onDialogError:function(){t.onDialogError()}}})}).catch(function(){e()})}},{key:"_sendUpdate",value:function(){function e(e){var n,r,i=this;this._status===ol.STATUS_TERMINATED||l||(this._handleSessionTimersInIncomingResponse(e),s?e.body&&e.hasHeader("Content-Type")&&"application/sdp"===e.getHeader("Content-Type").toLowerCase()?(n={originator:"remote",type:"answer",sdp:e.body},il.debug('emit "sdp"'),this.emit("sdp",n),r=new RTCSessionDescription({type:"answer",sdp:n.sdp}),this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){return i._connection.setRemoteDescription(r)}).then(function(){o.succeeded&&o.succeeded(e)}).catch(function(e){t.call(i),il.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',e),i.emit("peerconnection:setremotedescriptionfailed",e)})):t.call(this):o.succeeded&&o.succeeded(e))}function t(e){o.failed&&o.failed(e)}var n=this,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=(il.debug("sendUpdate()"),zs.cloneArray(r.extraHeaders)),o=zs.cloneObject(r.eventHandlers),a=r.rtcOfferConstraints||this._rtcOfferConstraints||null,s=r.sdpOffer||!1,l=!1;i.push("Contact: ".concat(this._contact)),this._sessionTimers.running&&i.push("Session-Expires: ".concat(this._sessionTimers.currentExpires,";refresher=").concat(this._sessionTimers.refresher?"uac":"uas")),s?(i.push("Content-Type: application/sdp"),this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){return n._createLocalDescription("offer",a)}).then(function(r){var o={originator:"local",type:"offer",sdp:r=n._mangleOffer(r)};il.debug('emit "sdp"'),n.emit("sdp",o),n.sendRequest(Vs.UPDATE,{extraHeaders:i,body:r,eventHandlers:{onSuccessResponse:function(t){e.call(n,t),l=!0},onErrorResponse:function(e){t.call(n,e)},onTransportError:function(){n.onTransportError()},onRequestTimeout:function(){n.onRequestTimeout()},onDialogError:function(){n.onDialogError()}}})}).catch(function(){t.call(n)})):this.sendRequest(Vs.UPDATE,{extraHeaders:i,eventHandlers:{onSuccessResponse:function(t){e.call(n,t)},onErrorResponse:function(e){t.call(n,e)},onTransportError:function(){n.onTransportError()},onRequestTimeout:function(){n.onRequestTimeout()},onDialogError:function(){n.onDialogError()}}})}},{key:"_acceptAndTerminate",value:function(e,t,n){il.debug("acceptAndTerminate()");var r=[];t&&(n=n||Vs.REASON_PHRASE[t]||"",r.push("Reason: SIP ;cause=".concat(t,'; text="').concat(n,'"'))),(this._dialog||this._createDialog(e,"UAC"))&&(this.sendRequest(Vs.ACK),this.sendRequest(Vs.BYE,{extraHeaders:r})),this._status=ol.STATUS_TERMINATED}},{key:"_mangleOffer",value:function(e){if(!this._localHold&&!this._remoteHold)return e;if(e=Bs.parse(e),this._localHold&&!this._remoteHold){il.debug("mangleOffer() | me on hold, mangling offer");var t,n=R(e.media);try{for(n.s();!(t=n.n()).done;){var r=t.value;-1!==al.indexOf(r.type)&&(r.direction&&"sendrecv"!==r.direction?"recvonly"===r.direction&&(r.direction="inactive"):r.direction="sendonly")}}catch(e){n.e(e)}finally{n.f()}}else if(this._localHold&&this._remoteHold){il.debug("mangleOffer() | both on hold, mangling offer");var i,o=R(e.media);try{for(o.s();!(i=o.n()).done;){var a=i.value;-1!==al.indexOf(a.type)&&(a.direction="inactive")}}catch(e){o.e(e)}finally{o.f()}}else if(this._remoteHold){il.debug("mangleOffer() | remote on hold, mangling offer");var s,l=R(e.media);try{for(l.s();!(s=l.n()).done;){var c=s.value;-1!==al.indexOf(c.type)&&(c.direction&&"sendrecv"!==c.direction?"recvonly"===c.direction&&(c.direction="inactive"):c.direction="recvonly")}}catch(e){l.e(e)}finally{l.f()}}return Bs.write(e)}},{key:"_setLocalMediaStatus",value:function(){var e=!0,t=!0;(this._localHold||this._remoteHold)&&(t=e=!1),this._audioMuted&&(e=!1),this._videoMuted&&(t=!1),this._toggleMuteAudio(!e),this._toggleMuteVideo(!t)}},{key:"_handleSessionTimersInIncomingRequest",value:function(e,t){this._sessionTimers.enabled&&(e=e.session_expires&&e.session_expires>=Vs.MIN_SESSION_EXPIRES?(this._sessionTimers.currentExpires=e.session_expires,e.session_expires_refresher||"uas"):(this._sessionTimers.currentExpires=this._sessionTimers.defaultExpires,"uas"),t.push("Session-Expires: ".concat(this._sessionTimers.currentExpires,";refresher=").concat(e)),this._sessionTimers.refresher="uas"===e,this._runSessionTimer())}},{key:"_handleSessionTimersInIncomingResponse",value:function(e){this._sessionTimers.enabled&&(e=e.session_expires&&e.session_expires>=Vs.MIN_SESSION_EXPIRES?(this._sessionTimers.currentExpires=e.session_expires,e.session_expires_refresher||"uac"):(this._sessionTimers.currentExpires=this._sessionTimers.defaultExpires,"uac"),this._sessionTimers.refresher="uac"===e,this._runSessionTimer())}},{key:"_runSessionTimer",value:function(){var e=this,t=this._sessionTimers.currentExpires;this._sessionTimers.running=!0,clearTimeout(this._sessionTimers.timer),this._sessionTimers.refresher?this._sessionTimers.timer=setTimeout(function(){e._status!==ol.STATUS_TERMINATED&&e._isReadyToReOffer()&&(il.debug("runSessionTimer() | sending session refresh request"),e._sessionTimers.refreshMethod===Vs.UPDATE?e._sendUpdate():e._sendReinvite())},500*t):this._sessionTimers.timer=setTimeout(function(){e._status!==ol.STATUS_TERMINATED&&(il.warn("runSessionTimer() | timer expired, terminating the session"),e.terminate({cause:Vs.causes.REQUEST_TIMEOUT,status_code:408,reason_phrase:"Session Timer Expired"}))},1100*t)}},{key:"_toggleMuteAudio",value:function(e){if(this._use_trtc){if(this._trtcLocalStream)return e?this._trtcLocalStream.muteAudio():this._trtcLocalStream.unmuteAudio();throw new Hs.InvalidStateError(this._status)}var t,n=R(this._connection.getSenders().filter(function(e){return e.track&&"audio"===e.track.kind}));try{for(n.s();!(t=n.n()).done;)t.value.track.enabled=!e}catch(e){n.e(e)}finally{n.f()}}},{key:"_toggleMuteVideo",value:function(e){if(this._use_trtc){if(this._trtcLocalStream)return e?this._trtcLocalStream.muteVideo():this._trtcLocalStream.unmuteVideo();throw new Hs.InvalidStateError(this._status)}var t,n=R(this._connection.getSenders().filter(function(e){return e.track&&"video"===e.track.kind}));try{for(n.s();!(t=n.n()).done;)t.value.track.enabled=!e}catch(e){n.e(e)}finally{n.f()}}},{key:"_newRTCSession",value:function(e,t){il.debug("newRTCSession()"),this._ua.newRTCSession(this,{originator:e,session:this,request:t})}},{key:"_connecting",value:function(e){il.debug("session connecting"),il.debug('emit "connecting"'),this.emit("connecting",{request:e})}},{key:"_progress",value:function(e,t){il.debug("session progress"),il.debug('emit "progress"'),this.emit("progress",{originator:e,response:t||null})}},{key:"_accepted",value:function(e,t){il.debug("session accepted"),this._start_time=new Date,il.debug('emit "accepted"'),this.emit("accepted",{originator:e,response:t||null})}},{key:"_confirmed",value:function(e,t){il.debug("session confirmed"),this._is_confirmed=!0,il.debug('emit "confirmed"'),this.emit("confirmed",{originator:e,ack:t||null})}},{key:"_ended",value:function(e,t,n){il.debug("session ended"),this._end_time=new Date,this._close(),il.debug('emit "ended"'),this.emit("ended",{originator:e,message:t||null,cause:n})}},{key:"_failed",value:function(e,t,n){il.debug("session failed"),il.debug('emit "_failed"'),this.emit("_failed",{originator:e,message:t||null,cause:n}),this._close(),il.debug('emit "failed"'),this.emit("failed",{originator:e,message:t||null,cause:n})}},{key:"_onhold",value:function(e){il.debug("session onhold"),this._setLocalMediaStatus(),il.debug('emit "hold"'),this.emit("hold",{originator:e})}},{key:"_onunhold",value:function(e){il.debug("session onunhold"),this._setLocalMediaStatus(),il.debug('emit "unhold"'),this.emit("unhold",{originator:e})}},{key:"_onmute",value:function(e){var t=e.audio,e=e.video;il.debug("session onmute"),this._setLocalMediaStatus(),il.debug('emit "muted"'),this.emit("muted",{audio:t,video:e})}},{key:"_onunmute",value:function(e){var t=e.audio,e=e.video;il.debug("session onunmute"),this._setLocalMediaStatus(),il.debug('emit "unmuted"'),this.emit("unmuted",{audio:t,video:e})}}],[{key:"C",get:function(){return ol}}]),ur),ea=Lr.EventEmitter,ta=ko,sl=Sr,ll=Kr,cl=W(),ul=Zr,dl=kr,fl=z(),pl=new ta("Message"),co=(f(cr,ea),ws=T(cr),l(cr,[{key:"direction",get:function(){return this._direction}},{key:"local_identity",get:function(){return this._local_identity}},{key:"remote_identity",get:function(){return this._remote_identity}},{key:"send",value:function(e,t){var n=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=e;if(void 0===e||void 0===t)throw new TypeError("Not enough arguments");if(!(e=this._ua.normalizeTarget(e)))throw new TypeError("Invalid target: ".concat(i));var o,i=cl.cloneArray(r.extraHeaders),a=cl.cloneObject(r.eventHandlers),s=r.contentType||"text/plain",l={};for(o in r.fromUserName&&(l.from_uri=new fl("sip",r.fromUserName,this._ua.configuration.uri.host),i.push("P-Preferred-Identity: ".concat(this._ua.configuration.uri.toString()))),r.fromDisplayName&&(l.from_display_name=r.fromDisplayName),a)Object.prototype.hasOwnProperty.call(a,o)&&this.on(o,a[o]);i.push("Content-Type: ".concat(s)),this._request=new ll.OutgoingRequest(sl.MESSAGE,e,this._ua,l,i),t&&(this._request.body=t),r=new ul(this._ua,this._request,{onRequestTimeout:function(){n._onRequestTimeout()},onTransportError:function(){n._onTransportError()},onReceiveResponse:function(e){n._receiveResponse(e)}}),this._newMessage("local",this._request),r.send()}},{key:"init_incoming",value:function(e){this._request=e,this._newMessage("remote",e),this._is_replied||(this._is_replied=!0,e.reply(200)),this._close()}},{key:"accept",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=cl.cloneArray(e.extraHeaders),e=e.body;if("incoming"!==this._direction)throw new dl.NotSupportedError('"accept" not supported for outgoing Message');if(this._is_replied)throw new Error("incoming Message already replied");this._is_replied=!0,this._request.reply(200,null,t,e)}},{key:"reject",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.status_code||480,n=e.reason_phrase,r=cl.cloneArray(e.extraHeaders),e=e.body;if("incoming"!==this._direction)throw new dl.NotSupportedError('"reject" not supported for outgoing Message');if(this._is_replied)throw new Error("incoming Message already replied");if(t<300||700<=t)throw new TypeError("Invalid status_code: ".concat(t));this._is_replied=!0,this._request.reply(t,n,r,e)}},{key:"_receiveResponse",value:function(e){if(!this._closed)switch(!0){case/^1[0-9]{2}$/.test(e.status_code):break;case/^2[0-9]{2}$/.test(e.status_code):this._succeeded("remote",e);break;default:var t=cl.sipErrorCause(e.status_code);this._failed("remote",e,t)}}},{key:"_onRequestTimeout",value:function(){this._closed||this._failed("system",null,sl.causes.REQUEST_TIMEOUT)}},{key:"_onTransportError",value:function(){this._closed||this._failed("system",null,sl.causes.CONNECTION_ERROR)}},{key:"_close",value:function(){this._closed=!0,this._ua.destroyMessage(this)}},{key:"_newMessage",value:function(e,t){"remote"===e?(this._direction="incoming",this._local_identity=t.to,this._remote_identity=t.from):"local"===e&&(this._direction="outgoing",this._local_identity=t.from,this._remote_identity=t.to),this._ua.newMessage(this,{originator:e,message:this,request:t})}},{key:"_failed",value:function(e,t,n){pl.debug("MESSAGE failed"),this._close(),pl.debug('emit "failed"'),this.emit("failed",{originator:e,response:t||null,cause:n})}},{key:"_succeeded",value:function(e,t){pl.debug("MESSAGE succeeded"),this._close(),pl.debug('emit "succeeded"'),this.emit("succeeded",{originator:e,response:t})}}]),cr),Qr=Lr.EventEmitter,Ps=ko,hl=Sr,gl=Kr,ml=W(),vl=Zr,bl=kr,_l=new Ps("Options"),Fs=(f(lr,Qr),ys=T(lr),l(lr,[{key:"direction",get:function(){return this._direction}},{key:"local_identity",get:function(){return this._local_identity}},{key:"remote_identity",get:function(){return this._remote_identity}},{key:"send",value:function(e,t){var n=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=e;if(void 0===e)throw new TypeError("A target is required for OPTIONS");if(!(e=this._ua.normalizeTarget(e)))throw new TypeError("Invalid target: ".concat(i));var o,i=ml.cloneArray(r.extraHeaders),a=ml.cloneObject(r.eventHandlers),r=r.contentType||"application/sdp";for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&this.on(o,a[o]);i.push("Content-Type: ".concat(r)),this._request=new gl.OutgoingRequest(hl.OPTIONS,e,this._ua,null,i),t&&(this._request.body=t),r=new vl(this._ua,this._request,{onRequestTimeout:function(){n._onRequestTimeout()},onTransportError:function(){n._onTransportError()},onReceiveResponse:function(e){n._receiveResponse(e)}}),this._newOptions("local",this._request),r.send()}},{key:"init_incoming",value:function(e){this._request=e,this._newOptions("remote",e),this._is_replied||(this._is_replied=!0,e.reply(200)),this._close()}},{key:"accept",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=ml.cloneArray(e.extraHeaders),e=e.body;if("incoming"!==this._direction)throw new bl.NotSupportedError('"accept" not supported for outgoing Options');if(this._is_replied)throw new Error("incoming Options already replied");this._is_replied=!0,this._request.reply(200,null,t,e)}},{key:"reject",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.status_code||480,n=e.reason_phrase,r=ml.cloneArray(e.extraHeaders),e=e.body;if("incoming"!==this._direction)throw new bl.NotSupportedError('"reject" not supported for outgoing Options');if(this._is_replied)throw new Error("incoming Options already replied");if(t<300||700<=t)throw new TypeError("Invalid status_code: ".concat(t));this._is_replied=!0,this._request.reply(t,n,r,e)}},{key:"_receiveResponse",value:function(e){if(!this._closed)switch(!0){case/^1[0-9]{2}$/.test(e.status_code):break;case/^2[0-9]{2}$/.test(e.status_code):this._succeeded("remote",e);break;default:var t=ml.sipErrorCause(e.status_code);this._failed("remote",e,t)}}},{key:"_onRequestTimeout",value:function(){this._closed||this._failed("system",null,hl.causes.REQUEST_TIMEOUT)}},{key:"_onTransportError",value:function(){this._closed||this._failed("system",null,hl.causes.CONNECTION_ERROR)}},{key:"_close",value:function(){this._closed=!0,this._ua.destroyMessage(this)}},{key:"_newOptions",value:function(e,t){"remote"===e?(this._direction="incoming",this._local_identity=t.to,this._remote_identity=t.from):"local"===e&&(this._direction="outgoing",this._local_identity=t.from,this._remote_identity=t.to),this._ua.newOptions(this,{originator:e,message:this,request:t})}},{key:"_failed",value:function(e,t,n){_l.debug("OPTIONS failed"),this._close(),_l.debug('emit "failed"'),this.emit("failed",{originator:e,response:t||null,cause:n})}},{key:"_succeeded",value:function(e,t){_l.debug("OPTIONS succeeded"),this._close(),_l.debug('emit "succeeded"'),this.emit("succeeded",{originator:e,response:t})}}]),lr),wr={},Xr=ko,yl=W(),wl=H(),xl=new Xr("Socket");wr.isSocket=function(e){if(Array.isArray(e))return!1;if(void 0===e)return xl.warn("undefined JsSIP.Socket instance"),!1;try{if(!yl.isString(e.url))throw xl.warn("missing or invalid JsSIP.Socket url property"),new Error("Missing or invalid JsSIP.Socket url property");if(!yl.isString(e.via_transport))throw xl.warn("missing or invalid JsSIP.Socket via_transport property"),new Error("Missing or invalid JsSIP.Socket via_transport property");if(-1===wl.parse(e.sip_uri,"SIP_URI"))throw xl.warn("missing or invalid JsSIP.Socket sip_uri property"),new Error("missing or invalid JsSIP.Socket sip_uri property")}catch(e){return!1}try{["connect","disconnect","send"].forEach(function(t){if(!yl.isFunction(e[t]))throw xl.warn("missing or invalid JsSIP.Socket method: ".concat(t)),new Error("Missing or invalid JsSIP.Socket method: ".concat(t))})}catch(e){return!1}return!0};var kl=wr,Us=Sr,Sl=new ko("Transport"),Cl={STATUS_CONNECTED:0,STATUS_CONNECTING:1,STATUS_DISCONNECTED:2,SOCKET_STATUS_READY:0,SOCKET_STATUS_ERROR:1,recovery_options:{min_interval:Us.CONNECTION_RECOVERY_MIN_INTERVAL,max_interval:Us.CONNECTION_RECOVERY_MAX_INTERVAL}},ta=(l(vr,[{key:"via_transport",get:function(){return this.socket.via_transport}},{key:"url",get:function(){return this.socket.url}},{key:"sip_uri",get:function(){return this.socket.sip_uri}},{key:"connect",value:function(){Sl.debug("connect()"),this.isConnected()?Sl.debug("Transport is already connected"):this.isConnecting()?Sl.debug("Transport is connecting"):(this.close_requested=!1,this.status=Cl.STATUS_CONNECTING,this.onconnecting({socket:this.socket,attempts:this.recover_attempts}),this.close_requested||(this.socket.onconnect=this._onConnect.bind(this),this.socket.ondisconnect=this._onDisconnect.bind(this),this.socket.ondata=this._onData.bind(this),this.socket.connect()))}},{key:"disconnect",value:function(){Sl.debug("close()"),this.close_requested=!0,this.recover_attempts=0,this.status=Cl.STATUS_DISCONNECTED,null!==this.recovery_timer&&(clearTimeout(this.recovery_timer),this.recovery_timer=null),this.socket.onconnect=function(){},this.socket.ondisconnect=function(){},this.socket.ondata=function(){},this.socket.disconnect(),this.ondisconnect({socket:this.socket,error:!1})}},{key:"send",value:function(e){return Sl.debug("send()"),this.isConnected()?(e=e.toString(),Sl.debug("sending message:\n\n".concat(e,"\n")),this.socket.send(e)):(Sl.warn("unable to send message, transport is not connected"),!1)}},{key:"isConnected",value:function(){return this.status===Cl.STATUS_CONNECTED}},{key:"isConnecting",value:function(){return this.status===Cl.STATUS_CONNECTING}},{key:"_reconnect",value:function(){var e=this,t=(this.recover_attempts+=1,Math.floor(Math.random()*Math.pow(2,this.recover_attempts)+1));t<this.recovery_options.min_interval?t=this.recovery_options.min_interval:t>this.recovery_options.max_interval&&(t=this.recovery_options.max_interval),Sl.debug("reconnection attempt: ".concat(this.recover_attempts,". next connection attempt in ").concat(t," seconds")),this.recovery_timer=setTimeout(function(){e.close_requested||e.isConnected()||e.isConnecting()||(e._getSocket(),e.connect())},1e3*t)}},{key:"_getSocket",value:function(){var e,t=[];this.sockets.forEach(function(e){e.status!==Cl.SOCKET_STATUS_ERROR&&(0===t.length?t.push(e):e.weight>t[0].weight?t=[e]:e.weight===t[0].weight&&t.push(e))}),0===t.length?(this.sockets.forEach(function(e){e.status=Cl.SOCKET_STATUS_READY}),this._getSocket()):(e=Math.floor(Math.random()*t.length),this.socket=t[e].socket)}},{key:"_onConnect",value:function(){this.recover_attempts=0,this.status=Cl.STATUS_CONNECTED,null!==this.recovery_timer&&(clearTimeout(this.recovery_timer),this.recovery_timer=null),this.onconnect({socket:this})}},{key:"_onDisconnect",value:function(e,t,n){this.status=Cl.STATUS_DISCONNECTED,this.ondisconnect({socket:this.socket,error:e,code:t,reason:n}),this.close_requested||(this.sockets.forEach(function(e){this.socket===e.socket&&(e.status=Cl.SOCKET_STATUS_ERROR)},this),this._reconnect(e))}},{key:"_onData",value:function(e){if("\r\n"!==e){if("string"!=typeof e){try{e=this.textDecoder?this.textDecoder.decode(e):String.fromCharCode.apply(null,new Uint8Array(e))}catch(e){return void Sl.debug("received binary message failed to be converted into string, message discarded")}Sl.debug("received binary message:\n\n".concat(e,"\n"))}else Sl.debug("received text message:\n\n".concat(e,"\n"));this.ondata({transport:this,message:e})}else Sl.debug("received message with CRLF Keep Alive response")}}]),vr),ea={},Zr=ko,Tl=H(),El=Kr,Il=new Zr("Parser");ea.parseMessage=function(e,t){var n,r,i=e.indexOf("\r\n");if(-1!==i){var o=e.substring(0,i),a=Tl.parse(o,"Request_Response");if(-1!==a){a.status_code?((n=new El.IncomingResponse).status_code=a.status_code,n.reason_phrase=a.reason_phrase):((n=new El.IncomingRequest(t)).method=a.method,n.ruri=a.uri),n.data=e;for(var s=i+2;;){if(-2===(i=function(e,t){var n,r=t,i=0;if(e.substring(r,r+2).match(/(^\r\n)/))return-2;for(;0===i;){if(-1===(n=e.indexOf("\r\n",r)))return n;!e.substring(n+2,n+4).match(/(^\r\n)/)&&e.charAt(n+2).match(/(^\s+)/)?r=n+2:i=n}return i}(e,s))){r=s+2;break}if(-1===i)return void Il.warn("parseMessage() | malformed message");if(!0!==(a=function(e,t,n,r){var i,o=t.indexOf(":",n),a=t.substring(n,o).trim(),s=t.substring(o+1,r).trim();switch(a.toLowerCase()){case"via":case"v":e.addHeader("via",s),1===e.getHeaders("via").length?(i=e.parseHeader("Via"))&&(e.via=i,e.via_branch=i.branch):i=0;break;case"from":case"f":e.setHeader("from",s),(i=e.parseHeader("from"))&&(e.from=i,e.from_tag=i.getParam("tag"));break;case"to":case"t":e.setHeader("to",s),(i=e.parseHeader("to"))&&(e.to=i,e.to_tag=i.getParam("tag"));break;case"record-route":if(-1===(i=Tl.parse(s,"Record_Route")))i=void 0;else{var l,c=R(i);try{for(c.s();!(l=c.n()).done;){var u=l.value;e.addHeader("record-route",s.substring(u.possition,u.offset)),e.headers["Record-Route"][e.getHeaders("record-route").length-1].parsed=u.parsed}}catch(e){c.e(e)}finally{c.f()}}break;case"call-id":case"i":e.setHeader("call-id",s),(i=e.parseHeader("call-id"))&&(e.call_id=s);break;case"contact":case"m":if(-1===(i=Tl.parse(s,"Contact")))i=void 0;else{var d,f=R(i);try{for(f.s();!(d=f.n()).done;){var p=d.value;e.addHeader("contact",s.substring(p.possition,p.offset)),e.headers.Contact[e.getHeaders("contact").length-1].parsed=p.parsed}}catch(e){f.e(e)}finally{f.f()}}break;case"content-length":case"l":e.setHeader("content-length",s),i=e.parseHeader("content-length");break;case"content-type":case"c":e.setHeader("content-type",s),i=e.parseHeader("content-type");break;case"cseq":e.setHeader("cseq",s),(i=e.parseHeader("cseq"))&&(e.cseq=i.value),e instanceof El.IncomingResponse&&(e.method=i.method);break;case"max-forwards":e.setHeader("max-forwards",s),i=e.parseHeader("max-forwards");break;case"www-authenticate":e.setHeader("www-authenticate",s),i=e.parseHeader("www-authenticate");break;case"proxy-authenticate":e.setHeader("proxy-authenticate",s),i=e.parseHeader("proxy-authenticate");break;case"session-expires":case"x":e.setHeader("session-expires",s),(i=e.parseHeader("session-expires"))&&(e.session_expires=i.expires,e.session_expires_refresher=i.refresher);break;case"refer-to":case"r":e.setHeader("refer-to",s),(i=e.parseHeader("refer-to"))&&(e.refer_to=i);break;case"replaces":e.setHeader("replaces",s),(i=e.parseHeader("replaces"))&&(e.replaces=i);break;case"event":case"o":e.setHeader("event",s),(i=e.parseHeader("event"))&&(e.event=i);break;default:e.addHeader(a,s),i=0}return void 0!==i||{error:'error parsing header "'.concat(a,'"')}}(n,e,s,i)))return void Il.warn("parseMessage() |",a.error);s=i+2}return n.hasHeader("content-length")?(t=n.getHeader("content-length"),n.body=e.substr(r,t)):n.body=e.substring(r),n}Il.warn('parseMessage() | error parsing first line of SIP message: "'.concat(o,'"'))}else Il.warn("parseMessage() | no CRLF found, not a SIP message")};var Al,Rl,Ol,Ll,Ps=ko,Pl=Sr,Ml=Kr,$l=W(),Nl=new Ps("sanityCheck"),Dl=[function(){for(var e=0,t=["from","to","call_id","cseq","via"];e<t.length;e++){var n=t[e];if(!Al.hasHeader(n))return Nl.debug("missing mandatory header field : ".concat(n,", dropping the response")),!1}}],Fl=[function(){if("sip"!==Al.s("to").uri.scheme)return br(416),!1},function(){if(!Al.to_tag&&Al.call_id.substr(0,5)===Rl.configuration.jssip_id)return br(482),!1},function(){if($l.str_utf8_length(Al.body)<Al.getHeader("content-length"))return br(400),!1},function(){var e,t=Al.from_tag,n=Al.call_id,r=Al.cseq;if(!Al.to_tag)if(Al.method===Pl.INVITE){if(Rl._transactions.ist[Al.via_branch])return!1;for(var i in Rl._transactions.ist)if(Object.prototype.hasOwnProperty.call(Rl._transactions.ist,i)&&(e=Rl._transactions.ist[i]).request.from_tag===t&&e.request.call_id===n&&e.request.cseq===r)return br(482),!1}else{if(Rl._transactions.nist[Al.via_branch])return!1;for(var o in Rl._transactions.nist)if(Object.prototype.hasOwnProperty.call(Rl._transactions.nist,o)&&(e=Rl._transactions.nist[o]).request.from_tag===t&&e.request.call_id===n&&e.request.cseq===r)return br(482),!1}}],ql=[function(){if(1<Al.getHeaders("via").length)return Nl.debug("more than one Via header field present in the response, dropping the response"),!1},function(){if($l.str_utf8_length(Al.body)<Al.getHeader("content-length"))return Nl.debug("message body length is lower than the value in Content-Length header field, dropping the response"),!1}],Qr={},Ul=W(),Bl=Sr,jl=H(),Vl=z(),Hl=wr,Yl=kr,zl=ko,Gl=(Qr.settings={authorization_user:null,password:null,realm:null,ha1:null,authorization_jwt:null,display_name:null,uri:null,contact_uri:null,instance_id:null,use_preloaded_route:!1,session_timers:!0,session_timers_refresh_method:Bl.UPDATE,session_timers_force_refresher:!1,no_answer_timeout:60,register:!0,register_expires:600,registrar_server:null,sockets:null,connection_recovery_max_interval:Bl.CONNECTION_RECOVERY_MAX_INTERVAL,connection_recovery_min_interval:Bl.CONNECTION_RECOVERY_MIN_INTERVAL,extra_headers:null,via_host:"".concat(Ul.createRandomToken(12),".invalid"),log_level:Bl.LOG_LEVEL.TRACE,log_report:!0,log_proxy:null,use_trtc:!0,trtc_proxy_server:null,trtc_turn_server:null},{mandatory:{sockets:function(e){var t=[];if(Hl.isSocket(e))t.push({socket:e});else{if(!Array.isArray(e)||!e.length)return;var n,r=R(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;Object.prototype.hasOwnProperty.call(i,"socket")&&Hl.isSocket(i.socket)?t.push(i):Hl.isSocket(i)&&t.push({socket:i})}}catch(e){r.e(e)}finally{r.f()}}return t},uri:function(e){return/^sip:/i.test(e)||(e="".concat(Bl.SIP,":").concat(e)),e=Vl.parse(e),e&&e.user?e:void 0}},optional:{authorization_user:function(e){return-1===jl.parse('"'.concat(e,'"'),"quoted_string")?void 0:e},authorization_jwt:function(e){if("string"==typeof e)return e},user_agent:function(e){if("string"==typeof e)return e},connection_recovery_max_interval:function(e){if(Ul.isDecimal(e)&&0<(e=Number(e)))return e},connection_recovery_min_interval:function(e){if(Ul.isDecimal(e)&&0<(e=Number(e)))return e},contact_uri:function(e){if("string"==typeof e&&-1!==(e=jl.parse(e,"SIP_URI")))return e},display_name:function(e){return e},instance_id:function(e){return/^uuid:/i.test(e)&&(e=e.substr(5)),-1===jl.parse(e,"uuid")?void 0:e},no_answer_timeout:function(e){if(Ul.isDecimal(e)&&0<(e=Number(e)))return e},session_timers:function(e){if("boolean"==typeof e)return e},session_timers_refresh_method:function(e){if("string"==typeof e&&((e=e.toUpperCase())===Bl.INVITE||e===Bl.UPDATE))return e},session_timers_force_refresher:function(e){if("boolean"==typeof e)return e},password:function(e){return String(e)},realm:function(e){return String(e)},ha1:function(e){return String(e)},register:function(e){if("boolean"==typeof e)return e},register_expires:function(e){if(Ul.isDecimal(e)&&0<(e=Number(e)))return e},registrar_server:function(e){return/^sip:/i.test(e)||(e="".concat(Bl.SIP,":").concat(e)),e=Vl.parse(e),!e||e.user?void 0:e},use_preloaded_route:function(e){if("boolean"==typeof e)return e},extra_headers:function(e){var t=[];if(Array.isArray(e)&&e.length){var n,r=R(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;"string"==typeof i&&t.push(i)}}catch(e){r.e(e)}finally{r.f()}return t}},log_level:function(e){return Ul.isDecimal(e)&&-1!==(0,c.default)(Bl.LOG_LEVEL).indexOf(Number(e))?(zl.setLogLevel(Number(e)),e):(zl.setLogLevel(Bl.LOG_LEVEL.TRACE),Bl.LOG_LEVEL.TRACE)},log_report:function(e){return"boolean"==typeof e?(zl.setLogReport(e),e):(zl.setLogReport(!0),!0)},log_proxy:function(e){return zl.setLogProxy(e),e},use_trtc:function(e){if("boolean"==typeof e)return e},trtc_proxy_server:function(e){return e},trtc_turn_server:function(e){return e}}}),Xr=(Qr.load=function(e,t){for(var n in Gl.mandatory){if(!t.hasOwnProperty(n))throw new Yl.ConfigurationError(n);var r=t[n],i=Gl.mandatory[n](r);if(void 0===i)throw new Yl.ConfigurationError(n,r);e[n]=i}for(var o in Gl.optional)if(t.hasOwnProperty(o)){var a=t[o];if(Ul.isEmpty(a))continue;var s=Gl.optional[o](a);if(void 0===s)throw new Yl.ConfigurationError(o,a);e[o]=s}},Lr.EventEmitter),Wl=ko,Kl=Sr,Xl=ei,Zl=Jr,Jl=co,Ql=Fs,ec=Io,tc=ta,nc=W(),rc=kr,ic=z(),oc=ea,ac=Kr,sc=Qr,lc=new Wl("UA"),cc={STATUS_INIT:0,STATUS_READY:1,STATUS_USER_CLOSED:2,STATUS_NOT_READY:3,CONFIGURATION_ERROR:1,NETWORK_ERROR:2},Us=(f(_r,Xr),Ll=T(_r),l(_r,[{key:"C",get:function(){return cc}},{key:"status",get:function(){return this._status}},{key:"contact",get:function(){return this._contact}},{key:"configuration",get:function(){return this._configuration}},{key:"transport",get:function(){return this._transport}},{key:"start",value:function(){lc.debug("start()"),this._status===cc.STATUS_INIT?this._transport.connect():this._status===cc.STATUS_USER_CLOSED?(lc.debug("restarting UA"),null!==this._closeTimer&&(clearTimeout(this._closeTimer),this._closeTimer=null,this._transport.disconnect()),this._status=cc.STATUS_INIT,this._transport.connect()):this._status===cc.STATUS_READY?lc.debug("UA is in READY status, not restarted"):lc.debug("ERROR: connection is down, Auto-Recovery system is trying to reconnect"),this._dynConfiguration.register=this._configuration.register}},{key:"register",value:function(){lc.debug("register()"),this._dynConfiguration.register=!0,this._registrator.register()}},{key:"unregister",value:function(e){lc.debug("unregister()"),this._dynConfiguration.register=!1,this._registrator.unregister(e)}},{key:"registrator",value:function(){return this._registrator}},{key:"isRegistered",value:function(){return this._registrator.registered}},{key:"isConnected",value:function(){return this._transport.isConnected()}},{key:"call",value:function(e,t){lc.debug("call()");var n=new Zl(this);return n.connect(e,t),n}},{key:"sendMessage",value:function(e,t,n){lc.debug("sendMessage()");var r=new Jl(this);return r.send(e,t,n),r}},{key:"sendOptions",value:function(e,t,n){lc.debug("sendOptions()");var r=new Ql(this);return r.send(e,t,n),r}},{key:"terminateSessions",value:function(e){for(var t in lc.debug("terminateSessions()"),this._sessions)this._sessions[t].isEnded()||this._sessions[t].terminate(e)}},{key:"stop",value:function(){var e=this;if(lc.debug("stop()"),this._dynConfiguration={},this._status!==cc.STATUS_USER_CLOSED){this._registrator.close();var t,n,r=(0,Ee.default)(this._sessions).length;for(t in this._sessions)if(Object.prototype.hasOwnProperty.call(this._sessions,t)){lc.debug("closing session ".concat(t));try{this._sessions[t].terminate()}catch(e){}}for(n in this._applicants)if(Object.prototype.hasOwnProperty.call(this._applicants,n))try{this._applicants[n].close()}catch(e){}this._status=cc.STATUS_USER_CLOSED,0===(0,Ee.default)(this._transactions.nict).length+(0,Ee.default)(this._transactions.nist).length+(0,Ee.default)(this._transactions.ict).length+(0,Ee.default)(this._transactions.ist).length&&0===r?this._transport.disconnect():this._closeTimer=setTimeout(function(){e._closeTimer=null,e._transport.disconnect()},2e3)}else lc.debug("UA already closed")}},{key:"normalizeTarget",value:function(e){return nc.normalizeTarget(e,this._configuration.hostport_params)}},{key:"get",value:function(e){switch(e){case"authorization_user":return this._configuration.authorization_user;case"realm":return this._configuration.realm;case"ha1":return this._configuration.ha1;case"authorization_jwt":return this._configuration.authorization_jwt;default:return void lc.warn('get() | cannot get "%s" parameter in runtime',e)}}},{key:"set",value:function(e,t){switch(e){case"authorization_user":this._configuration.authorization_user=String(t);break;case"password":this._configuration.password=String(t);break;case"realm":this._configuration.realm=String(t);break;case"ha1":this._configuration.ha1=String(t),this._configuration.password=null;break;case"authorization_jwt":this._configuration.authorization_jwt=String(t);break;case"display_name":this._configuration.display_name=t;break;case"log_level":nc.isDecimal(t)&&-1!==(0,c.default)(Kl.LOG_LEVEL).indexOf(Number(t))&&Wl.setLogLevel(t);break;case"log_report":Wl.setLogReport(Boolean(t));break;case"log_proxy":Wl.setLogProxy(t);break;case"trtc_proxy_server":case"trtc_turn_server":this._configuration[e]=t;break;default:return lc.warn('set() | cannot set "%s" parameter in runtime',e),!1}return!0}},{key:"newTransaction",value:function(e){this._transactions[e.type][e.id]=e,this.emit("newTransaction",{transaction:e})}},{key:"destroyTransaction",value:function(e){delete this._transactions[e.type][e.id],this.emit("transactionDestroyed",{transaction:e})}},{key:"newDialog",value:function(e){this._dialogs[e.id]=e}},{key:"destroyDialog",value:function(e){delete this._dialogs[e.id]}},{key:"newMessage",value:function(e,t){this._applicants[e]=e,this.emit("newMessage",t)}},{key:"newOptions",value:function(e,t){this._applicants[e]=e,this.emit("newOptions",t)}},{key:"destroyMessage",value:function(e){delete this._applicants[e]}},{key:"newRTCSession",value:function(e,t){this._sessions[e.id]=e,this.emit("newRTCSession",t)}},{key:"destroyRTCSession",value:function(e){delete this._sessions[e.id]}},{key:"registered",value:function(e){this.emit("registered",e)}},{key:"unregistered",value:function(e){this.emit("unregistered",e)}},{key:"registrationFailed",value:function(e){this.emit("registrationFailed",e)}},{key:"receiveRequest",value:function(e){var t,n,r,i=e.method;if(e.ruri.user!==this._configuration.uri.user&&e.ruri.user!==this._contact.uri.user)lc.debug("Request-URI does not point to us"),e.method!==Kl.ACK&&e.reply_sl(404);else if(e.ruri.scheme!==Kl.SIPS){if(!ec.checkTransaction(this,e)){if(i===Kl.INVITE?new ec.InviteServerTransaction(this,this._transport,e):i!==Kl.ACK&&i!==Kl.CANCEL&&new ec.NonInviteServerTransaction(this,this._transport,e),i===Kl.OPTIONS){if(0===this.listeners("newOptions").length)return void e.reply(200);new Ql(this).init_incoming(e)}else if(i===Kl.MESSAGE){if(0===this.listeners("newMessage").length)return void e.reply(405);new Jl(this).init_incoming(e)}else if(i===Kl.INVITE&&!e.to_tag&&0===this.listeners("newRTCSession").length)return void e.reply(405);if(e.to_tag)(t=this._findDialog(e.call_id,e.from_tag,e.to_tag))?t.receiveRequest(e):i===Kl.NOTIFY?(n=this._findSession(e))?n.receiveRequest(e):(lc.debug("received NOTIFY request for a non existent subscription"),e.reply(481,"Subscription does not exist")):i!==Kl.ACK&&e.reply(481);else switch(i){case Kl.INVITE:window.RTCPeerConnection?e.hasHeader("replaces")?(r=e.replaces,(t=this._findDialog(r.call_id,r.from_tag,r.to_tag))?(n=t.owner).isEnded()?e.reply(603):n.receiveRequest(e):e.reply(481)):(n=new Zl(this)).init_incoming(e):(lc.warn("INVITE received but WebRTC is not supported"),e.reply(488));break;case Kl.BYE:e.reply(481);break;case Kl.CANCEL:(n=this._findSession(e))?n.receiveRequest(e):lc.debug("received CANCEL request for a non existent session");break;case Kl.ACK:break;case Kl.NOTIFY:this.emit("sipEvent",{event:e.event,request:e}),e.reply(200);break;default:e.reply(405)}}}else e.reply_sl(416)}},{key:"_findSession",value:function(e){var t=e.call_id,n=e.from_tag,e=e.to_tag,n=this._sessions[t+n],t=this._sessions[t+e];return n||t||null}},{key:"_findDialog",value:function(e,t,n){return this._dialogs[e+t+n]||this._dialogs[e+n+t]||null}},{key:"_loadConfig",value:function(e){try{sc.load(this._configuration,e),Wl.setConfig({attributes:{uri:this._configuration.uri.toString()}})}catch(n){throw lc.error("config load: %o",e,n),n}0===this._configuration.display_name&&(this._configuration.display_name="0"),this._configuration.instance_id||(this._configuration.instance_id=nc.newUUID()),this._configuration.jssip_id=nc.createRandomToken(5);var t,n=this._configuration.uri.clone();n.user=null,this._configuration.hostport_params=n.toString().replace(/^sip:/i,"");try{this._transport=new tc(this._configuration.sockets,{max_interval:this._configuration.connection_recovery_max_interval,min_interval:this._configuration.connection_recovery_min_interval}),this._transport.onconnecting=function(e){this.emit("connecting",e)}.bind(this),this._transport.onconnect=function(e){this._status!==cc.STATUS_USER_CLOSED&&(this._status=cc.STATUS_READY,this._error=null,this.emit("connected",e),this._dynConfiguration.register&&this._registrator.register())}.bind(this),this._transport.ondisconnect=function(e){for(var t=0,n=["nict","ict","nist","ist"];t<n.length;t++){var r,i=n[t];for(r in this._transactions[i])Object.prototype.hasOwnProperty.call(this._transactions[i],r)&&this._transactions[i][r].onTransportError()}this.emit("disconnected",e),this._registrator.onTransportClosed(),this._status!==cc.STATUS_USER_CLOSED&&(this._status=cc.STATUS_NOT_READY,this._error=cc.NETWORK_ERROR)}.bind(this),this._transport.ondata=function(e){var t,n=e.transport,r=e.message;if((r=oc.parseMessage(r,this))&&!(this._status===cc.STATUS_USER_CLOSED&&r instanceof ac.IncomingRequest)&&function(e,t,n){Al=e,Rl=t,Ol=n;for(var r=0,i=Dl;r<i.length;r++)if(!1===(0,i[r])())return!1;if(Al instanceof Ml.IncomingRequest){for(var o=0,a=Fl;o<a.length;o++)if(!1===(0,a[o])())return!1}else if(Al instanceof Ml.IncomingResponse)for(var s=0,l=ql;s<l.length;s++)if(!1===(0,l[s])())return!1;return!0}(r,this,n))if(r instanceof ac.IncomingRequest)r.transport=n,this.receiveRequest(r);else if(r instanceof ac.IncomingResponse)switch(r.method){case Kl.INVITE:(t=this._transactions.ict[r.via_branch])&&t.receiveResponse(r);break;case Kl.ACK:break;default:(t=this._transactions.nict[r.via_branch])&&t.receiveResponse(r)}}.bind(this)}catch(e){throw lc.warn(e),new rc.ConfigurationError("sockets",this._configuration.sockets)}delete this._configuration.sockets,this._configuration.authorization_user||(this._configuration.authorization_user=this._configuration.uri.user),this._configuration.registrar_server||((t=this._configuration.uri.clone()).user=null,t.clearParams(),t.clearHeaders(),this._configuration.registrar_server=t),this._configuration.no_answer_timeout*=1e3,this._configuration.contact_uri?this._configuration.via_host=this._configuration.contact_uri.host:this._configuration.contact_uri=new ic("sip",nc.createRandomToken(8),this._configuration.via_host,null,{transport:"ws"});var r,i,o=this._configuration.use_trtc,a=(this._contact={pub_gruu:null,temp_gruu:null,uri:this._configuration.contact_uri,toString:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.anonymous||null,e=e.outbound||null,n="<";return n+=t?this.temp_gruu||"sip:anonymous@anonymous.invalid;transport=ws":this.pub_gruu||this.uri.toString(),!e||(t?this.temp_gruu:this.pub_gruu)||(n+=";ob"),o&&(n+=";trtc"),n+">"}},["authorization_user","password","realm","ha1","authorization_jwt","display_name","register","log_level","log_report","log_proxy","use_trtc","trtc_proxy_server","trtc_turn_server"]);for(r in this._configuration)Object.prototype.hasOwnProperty.call(this._configuration,r)&&(-1!==a.indexOf(r)?(0,ke.default)(this._configuration,r,{writable:!0,configurable:!1}):(0,ke.default)(this._configuration,r,{writable:!1,configurable:!1}));for(i in lc.debug("configuration parameters after validation:"),this._configuration)if(Object.prototype.hasOwnProperty.call(sc.settings,i))switch(i){case"uri":case"registrar_server":lc.debug("- ".concat(i,": ").concat(this._configuration[i]));break;case"password":case"ha1":case"authorization_jwt":lc.debug("- ".concat(i,": NOT SHOWN"));break;default:lc.debug("- ".concat(i,": ").concat((0,Z.default)(this._configuration[i])))}}}],[{key:"C",get:function(){return cc}}]),_r),Zr=ko,uc=H(),dc=new Zr("WebSocketInterface"),Ps=(l(yr,[{key:"via_transport",get:function(){return this._via_transport},set:function(e){this._via_transport=e.toUpperCase()}},{key:"sip_uri",get:function(){return this._sip_uri}},{key:"url",get:function(){return this._url}},{key:"connect",value:function(){if(dc.debug("connect()"),this.isConnected())dc.debug("WebSocket ".concat(this._url," is already connected"));else if(this.isConnecting())dc.debug("WebSocket ".concat(this._url," is connecting"));else{this._ws&&this.disconnect(),dc.debug("connecting to WebSocket ".concat(this._url));try{this._ws=new WebSocket(this._url,"sip"),this._ws.binaryType="arraybuffer",this._ws.onopen=this._onOpen.bind(this),this._ws.onclose=this._onClose.bind(this),this._ws.onmessage=this._onMessage.bind(this),this._ws.onerror=this._onError.bind(this)}catch(e){this._onError(e)}}}},{key:"disconnect",value:function(){dc.debug("disconnect()"),this._ws&&(this._ws.onopen=function(){},this._ws.onclose=function(){},this._ws.onmessage=function(){},this._ws.onerror=function(){},this._ws.close(),this._ws=null)}},{key:"send",value:function(e){return dc.debug("send()"),this.isConnected()?(this._ws.send(e),!0):(dc.warn("unable to send message, WebSocket is not open"),!1)}},{key:"isConnected",value:function(){return this._ws&&this._ws.readyState===this._ws.OPEN}},{key:"isConnecting",value:function(){return this._ws&&this._ws.readyState===this._ws.CONNECTING}},{key:"_onOpen",value:function(){dc.debug("WebSocket ".concat(this._url," connected")),this.onconnect()}},{key:"_onClose",value:function(e){var t=e.wasClean,n=e.code,e=e.reason;dc.debug("WebSocket ".concat(this._url," closed")),!1===t&&dc.debug("WebSocket abrupt disconnection"),this.ondisconnect(!t,n,e)}},{key:"_onMessage",value:function(e){e=e.data,dc.debug("received WebSocket message"),this.ondata(e)}},{key:"_onError",value:function(e){dc.warn("WebSocket ".concat(this._url," error: "),e)}}]),yr),wr={},Lr=e.default;wr.getMicrophones=Lr.getMicrophones,wr.getSpeakers=Lr.getSpeakers,wr.getDevices=Lr.getDevices;var fc=xr,ei=Sr,Jr=kr,co=W(),Fs=Us,Io=z(),ta=j(),ea=H(),Kr=Ps,Qr=wr,Xr=ko;return Pr.exports(fc.title)("version %s",fc.version),{C:ei,Exceptions:Jr,Utils:co,UA:Fs,URI:Io,NameAddrHeader:ta,WebSocketInterface:Kr,Grammar:ea,Devices:Qr,Logger:Xr,debug:Pr.exports,get name(){return fc.title},get version(){return fc.version}}})}).call(t,n(15))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(387),o=r(i),a=n(57),s=r(a);t.default=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=(0,s.default)(e);!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if((0,o.default)(Object(t)))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(e,t,n){e.exports={default:n(388),__esModule:!0}},function(e,t,n){n(45),n(40),e.exports=n(389)},function(e,t,n){var r=n(71),i=n(10)("iterator"),o=n(41);e.exports=n(2).isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||o.hasOwnProperty(r(t))}},function(e,t,n){n(391),e.exports=n(2).Number.isInteger},function(e,t,n){var r=n(3);r(r.S,"Number",{isInteger:n(392)})},function(e,t,n){var r=n(9),i=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&i(e)===e}},function(e,t,n){n(394),e.exports=n(2).Math.trunc},function(e,t,n){var r=n(3);r(r.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,n){n(396),e.exports=n(2).Reflect.apply},function(e,t,n){var r=n(3),i=n(37),o=n(12),a=(n(6).Reflect||{}).apply,s=Function.apply;r(r.S+r.F*!n(33)(function(){a(function(){})}),"Reflect",{apply:function(e,t,n){var r=i(e),l=o(n);return a?a(r,t,l):s.call(r,t,l)}})},function(e,t,n){e.exports={default:n(398),__esModule:!0}},function(e,t,n){n(399),e.exports=n(2).Object.entries},function(e,t,n){var r=n(3),i=n(157)(!0);r(r.S,"Object",{entries:function(e){return i(e)}})},function(e,t,n){e.exports={default:n(401),__esModule:!0}},function(e,t,n){n(104),e.exports=n(2).Symbol.for},function(e,t,n){n(403),e.exports=n(2).Reflect.ownKeys},function(e,t,n){var r=n(3);r(r.S,"Reflect",{ownKeys:n(156)})},function(e,t,n){e.exports={default:n(405),__esModule:!0}},function(e,t,n){e.exports=n(67).f("toPrimitive")},function(e,t,n){n(63),n(40),n(45),n(407),n(408),n(409),n(410),e.exports=n(2).Map},function(e,t,n){"use strict";var r=n(166),i=n(66);e.exports=n(126)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=r.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return r.def(i(this,"Map"),0===e?0:e,t)}},r,!0)},function(e,t,n){var r=n(3);r(r.P+r.R,"Map",{toJSON:n(167)("Map")})},function(e,t,n){n(127)("Map")},function(e,t,n){n(128)("Map")},function(e,t,n){n(412),e.exports=n(2).Reflect.construct},function(e,t,n){var r=n(3),i=n(60),o=n(37),a=n(12),s=n(9),l=n(33),c=n(413),u=(n(6).Reflect||{}).construct,d=l(function(){function e(){}return!(u(function(){},[],e)instanceof e)}),f=!l(function(){u(function(){})});r(r.S+r.F*(d||f),"Reflect",{construct:function(e,t){o(e),a(t);var n=arguments.length<3?e:o(arguments[2]);if(f&&!d)return u(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(c.apply(e,r))}var l=n.prototype,p=i(s(l)?l:Object.prototype),h=Function.apply.call(e,p,t);return s(h)?h:p}})},function(e,t,n){"use strict";var r=n(37),i=n(9),o=n(145),a=[].slice,s={},l=function(e,t,n){if(!(t in s)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";s[t]=Function("F,a","return new F("+r.join(",")+")")}return s[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=a.call(arguments,1),s=function(){var r=n.concat(a.call(arguments));return this instanceof s?l(t,r.length,r):o(t,r,e)};return i(t.prototype)&&(s.prototype=t.prototype),s}},function(e,t,n){n(415);var r=n(2).Object;e.exports=function(e,t){return r.defineProperties(e,t)}},function(e,t,n){var r=n(3);r(r.S+r.F*!n(16),"Object",{defineProperties:n(143)})},function(e,t,n){n(104),e.exports=n(2).Object.getOwnPropertySymbols},function(e,t,n){e.exports={default:n(418),__esModule:!0}},function(e,t,n){n(63),n(45),n(419),n(421),n(422),e.exports=n(2).WeakMap},function(e,t,n){"use strict";var r,i=n(6),o=n(122)(0),a=n(93),s=n(49),l=n(153),c=n(420),u=n(9),d=n(66),f=n(66),p=!i.ActiveXObject&&"ActiveXObject"in i,h=s.getWeak,g=Object.isExtensible,m=c.ufstore,v=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},b={get:function(e){if(u(e)){var t=h(e);return!0===t?m(d(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return c.def(d(this,"WeakMap"),e,t)}},_=e.exports=n(126)("WeakMap",v,b,c,!0,!0);f&&p&&(r=c.getConstructor(v,"WeakMap"),l(r.prototype,b),s.NEED=!0,o(["delete","has","get","set"],function(e){var t=_.prototype,n=t[e];a(t,e,function(t,i){if(u(t)&&!g(t)){this._f||(this._f=new r);var o=this._f[e](t,i);return"set"==e?this:o}return n.call(this,t,i)})}))},function(e,t,n){"use strict";var r=n(73),i=n(49).getWeak,o=n(12),a=n(9),s=n(72),l=n(54),c=n(122),u=n(31),d=n(66),f=c(5),p=c(6),h=0,g=function(e){return e._l||(e._l=new m)},m=function(){this.a=[]},v=function(e,t){return f(e.a,function(e){return e[0]===t})};m.prototype={get:function(e){var t=v(this,e);if(t)return t[1]},has:function(e){return!!v(this,e)},set:function(e,t){var n=v(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=p(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,o){var c=e(function(e,r){s(e,c,t,"_i"),e._t=t,e._i=h++,e._l=void 0,void 0!=r&&l(r,n,e[o],e)});return r(c.prototype,{delete:function(e){if(!a(e))return!1;var n=i(e);return!0===n?g(d(this,t)).delete(e):n&&u(n,this._i)&&delete n[this._i]},has:function(e){if(!a(e))return!1;var n=i(e);return!0===n?g(d(this,t)).has(e):n&&u(n,this._i)}}),c},def:function(e,t,n){var r=i(o(t),!0);return!0===r?g(e).set(t,n):r[e._i]=n,e},ufstore:g}},function(e,t,n){n(127)("WeakMap")},function(e,t,n){n(128)("WeakMap")},function(e,t,n){e.exports={default:n(424),__esModule:!0}},function(e,t,n){n(425),e.exports=n(2).Number.isNaN},function(e,t,n){var r=n(3);r(r.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){e.exports={default:n(427),__esModule:!0}},function(e,t,n){n(428),e.exports=n(2).Object.is},function(e,t,n){var r=n(3);r(r.S,"Object",{is:n(429)})},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,n){e.exports={default:n(431),__esModule:!0}},function(e,t,n){n(432),e.exports=n(2).Object.preventExtensions},function(e,t,n){var r=n(9),i=n(49).onFreeze;n(43)("preventExtensions",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},function(e,t,n){e.exports={default:n(434),__esModule:!0}},function(e,t,n){n(435),e.exports=n(2).Object.isExtensible},function(e,t,n){var r=n(9);n(43)("isExtensible",function(e){return function(t){return!!r(t)&&(!e||e(t))}})},function(e,t,n){e.exports={default:n(437),__esModule:!0}},function(e,t,n){n(438),e.exports=n(2).Reflect.get},function(e,t,n){function r(e,t){var n,s,u=arguments.length<3?e:arguments[2];return c(e)===u?e[t]:(n=i.f(e,t))?a(n,"value")?n.value:void 0!==n.get?n.get.call(u):void 0:l(s=o(e))?r(s,t,u):void 0}var i=n(61),o=n(94),a=n(31),s=n(3),l=n(9),c=n(12);s(s.S,"Reflect",{get:r})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(440),i=n(7),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=new o.default("netWorkState"),s=new r.WebRTCStats({getStatsInterval:1e3}),l=null;s.on("timeline",function(e){if("stats"===e.event){var t=e.data&&e.data.connection||{},n=t.local||{},r=t.remote||{},i={networkType:n.networkType,availableOutgoingBitrate:t.availableOutgoingBitrate,rtt:1e3*t.currentRoundTripTime,packetsDiscardedOnSend:t.packetsDiscardedOnSend,packetsSent:t.packetsSent,packetsReceived:t.packetsReceived,packageLostUp:t.packetsSent?t.packetsDiscardedOnSend/t.packetsSent:0,bytesReceived:t.bytesReceived,bytesSent:t.bytesSent,local:{ip:n.ip,port:n.port,protocol:n.protocol},remote:{ip:r.ip,port:r.port,protocol:r.protocol},interval:1e3};l&&l(i)}});var c=function(e,t){try{s.addConnection({pc:e,peerId:"sip",connectionId:"sip-stats"})}catch(e){a.$error(e.message)}return l=t,function(){l=null;try{s.removeConnection({connectionId:"sip-stats"})}catch(e){a.$error(e.message)}}};t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){}function o(){o.init.call(this)}function a(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function s(e,t,n){if(t)e.call(n);else for(var r=e.length,i=v(e,r),o=0;o<r;++o)i[o].call(n)}function l(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,o=v(e,i),a=0;a<i;++a)o[a].call(n,r)}function c(e,t,n,r,i){if(t)e.call(n,r,i);else for(var o=e.length,a=v(e,o),s=0;s<o;++s)a[s].call(n,r,i)}function u(e,t,n,r,i,o){if(t)e.call(n,r,i,o);else for(var a=e.length,s=v(e,a),l=0;l<a;++l)s[l].call(n,r,i,o)}function d(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,o=v(e,i),a=0;a<i;++a)o[a].apply(n,r)}function f(e,t,n,r){var o,s,l;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if(s=e._events,s?(s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),l=s[t]):(s=e._events=new i,e._eventsCount=0),l){if("function"==typeof l?l=s[t]=r?[n,l]:[l,n]:r?l.unshift(n):l.push(n),!l.warned&&(o=a(e))&&0<o&&l.length>o){l.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=l.length,p(c)}}else l=s[t]=n,++e._eventsCount;return e}function p(e){"function"==typeof console.warn?console.warn(e):console.log(e)}function h(e,t,n){function r(){e.removeListener(t,r),i||(i=!0,n.apply(e,arguments))}var i=!1;return r.listener=n,r}function g(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function m(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}function v(e,t){for(var n=Array(t);t--;)n[t]=e[t];return n}function b(e){for(var t=Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function _(){if(!ce&&!(ce="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ce(ue)}function y(e){return"string"==typeof e&&de.test(e)}function w(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=(fe[e[t+0]]+fe[e[t+1]]+fe[e[t+2]]+fe[e[t+3]]+"-"+fe[e[t+4]]+fe[e[t+5]]+"-"+fe[e[t+6]]+fe[e[t+7]]+"-"+fe[e[t+8]]+fe[e[t+9]]+"-"+fe[e[t+10]]+fe[e[t+11]]+fe[e[t+12]]+fe[e[t+13]]+fe[e[t+14]]+fe[e[t+15]]).toLowerCase();if(!y(n))throw TypeError("Stringified UUID is invalid");return n}function x(e,t,n){e=e||{};var r=e.random||(e.rng||_)();if(r[6]=64|15&r[6],r[8]=128|63&r[8],t){n=n||0;for(var i=0;16>i;++i)t[n+i]=r[i];return t}return w(r)}function k(e,t){return t?(e.audio.inbound.map(function(e){var n=t.audio.inbound.find(function(t){return t.id===e.id});e.bitrate=T(e,n,"bytesReceived"),e.packetRate=T(e,n,"packetsReceived")}),e.audio.outbound.map(function(e){var n=t.audio.outbound.find(function(t){return t.id===e.id});e.bitrate=T(e,n,"bytesSent"),e.packetRate=T(e,n,"packetsSent")}),e.video.inbound.map(function(e){var n=t.video.inbound.find(function(t){return t.id===e.id});e.bitrate=T(e,n,"bytesReceived"),e.packetRate=T(e,n,"packetsReceived")}),e.video.outbound.map(function(e){var n=t.video.outbound.find(function(t){return t.id===e.id});e.bitrate=T(e,n,"bytesSent"),e.packetRate=T(e,n,"packetsSent")}),e):e}function S(e,t){if(!e||!t)return{};var n=(0,ee.default)({},e);if(n.localCandidateId){var r=t.get(n.localCandidateId);n.local=(0,ee.default)({},r)}if(n.remoteCandidateId){var i=t.get(n.remoteCandidateId);n.remote=(0,ee.default)({},i)}return n}function C(e,t,n){var r=e[n],i=t?t[n]:null;return null===r||null===i?null:(r-i)/(e.timestamp-t.timestamp)*1e3}function T(e,t,n){return 8*C(e,t,n)}function E(e){if(!e.entries)return e;var t={};return e.forEach(function(e,n){t[n]=e}),t}function I(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)return null;var r={audio:{inbound:[],outbound:[]},video:{inbound:[],outbound:[]},connection:{inbound:[],outbound:[]}};n.remote&&(r.remote={audio:{inbound:[],outbound:[]},video:{inbound:[],outbound:[]}});var i=!0,o=!1,a=void 0;try{for(var s,l=(0,J.default)(e.values());!(i=(s=l.next()).done);i=!0){var c=s.value;switch(c.type){case"outbound-rtp":var u=c.mediaType||c.kind,d={},f={};if(!["audio","video"].includes(u))continue;if(c.codecId){var p=e.get(c.codecId);p&&(d.clockRate=p.clockRate,d.mimeType=p.mimeType,d.payloadType=p.payloadType)}f=e.get(c.mediaSourceId)||e.get(c.trackId)||{},r[u].outbound.push((0,ee.default)({},c,d,{track:(0,ee.default)({},f)}));break;case"inbound-rtp":var h=c.mediaType||c.kind,g={},m={};if(!["audio","video"].includes(h))if(c.id.includes("Video"))h="video";else{if(!c.id.includes("Audio"))continue;h="audio"}if(c.codecId){var v=e.get(c.codecId);v&&(m.clockRate=v.clockRate,m.mimeType=v.mimeType,m.payloadType=v.payloadType)}if(!r.connection.id&&c.transportId){var b=e.get(c.transportId);if(b&&b.selectedCandidatePairId){var _=e.get(b.selectedCandidatePairId);r.connection=S(_,e)}}g=e.get(c.mediaSourceId)||e.get(c.trackId)||{},r[h].inbound.push((0,ee.default)({},c,m,{track:(0,ee.default)({},g)}));break;case"peer-connection":r.connection.dataChannelsClosed=c.dataChannelsClosed,r.connection.dataChannelsOpened=c.dataChannelsOpened;break;case"remote-inbound-rtp":if(!n.remote)break;var y=c.mediaType||c.kind,w={};if(!["audio","video"].includes(y))if(c.id.includes("Video"))y="video";else{if(!c.id.includes("Audio"))continue;y="audio"}if(c.codecId){var x=e.get(c.codecId);x&&(w.clockRate=x.clockRate,w.mimeType=x.mimeType,w.payloadType=x.payloadType)}if(!r.connection.id&&c.transportId){var C=e.get(c.transportId);if(C&&C.selectedCandidatePairId){var T=e.get(C.selectedCandidatePairId);r.connection=S(T,e)}}r.remote[y].inbound.push((0,ee.default)({},c,w));break;case"remote-outbound-rtp":if(!n.remote)break;var E=c.mediaType||c.kind,I={};if(!["audio","video"].includes(E))continue;if(c.codecId){var A=e.get(c.codecId);A&&(I.clockRate=A.clockRate,I.mimeType=A.mimeType,I.payloadType=A.payloadType)}r.remote[E].outbound.push((0,ee.default)({},c,I))}}}catch(e){o=!0,a=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw a}}if(!r.connection.id){var R=!0,O=!1,L=void 0;try{for(var P,M=(0,J.default)(e.values());!(R=(P=M.next()).done);R=!0){var $=P.value;"candidate-pair"===$.type&&$.nominated&&"succeeded"===$.state&&(r.connection=S($,e))}}catch(e){O=!0,L=e}finally{try{!R&&M.return&&M.return()}finally{if(O)throw L}}}return r=k(r,t)}var A=n(169),R=r(A),O=n(46),L=r(O),P=n(14),M=r(P),$=n(296),N=r($),D=n(100),F=r(D),q=n(68),U=r(q),B=n(69),j=r(B),V=n(4),H=r(V),Y=n(5),z=r(Y),G=n(20),W=r(G),K=n(21),X=r(K),Z=n(57),J=r(Z),Q=n(137),ee=r(Q),te=n(291),ne=r(te),re=n(34),ie=r(re),oe=n(13),ae=r(oe),se=n(35),le=r(se);Object.defineProperty(t,"__esModule",{value:!0});i.prototype=(0,le.default)(null),o.EventEmitter=o,o.usingDomains=!1,o.prototype.domain=void 0,o.prototype._events=void 0,o.prototype._maxListeners=void 0,o.defaultMaxListeners=10,o.init=function(){this.domain=null,o.usingDomains&&(void 0).active&&!(this instanceof(void 0).Domain)&&(this.domain=(void 0).active),this._events&&this._events!==(0,ae.default)(this)._events||(this._events=new i,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||0>e||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return a(this)},o.prototype.emit=function(e){var t,n,r,i,o,a,f,p="error"===e;if(a=this._events)p=p&&null==a.error;else if(!p)return!1;if(f=this.domain,p){if(t=arguments[1],!f){if(t instanceof Error)throw t;var h=new Error('Uncaught, unspecified "error" event. ('+t+")");throw h.context=t,h}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=f,t.domainThrown=!1,f.emit("error",t),!1}if(!(n=a[e]))return!1;var g="function"==typeof n;switch(r=arguments.length){case 1:s(n,g,this);break;case 2:l(n,g,this,arguments[1]);break;case 3:c(n,g,this,arguments[1],arguments[2]);break;case 4:u(n,g,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=Array(r-1),o=1;o<r;o++)i[o-1]=arguments[o];d(n,g,this,i)}return!0},o.prototype.addListener=function(e,t){return f(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return f(this,e,t,!0)},o.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,h(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,h(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,o,a,s;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener&&n.listener===t)0==--this._eventsCount?this._events=new i:(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,a=n.length;0<a--;)if(n[a]===t||n[a].listener&&n[a].listener===t){s=n[a].listener,o=a;break}if(0>o)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new i,this;delete r[e]}else m(n,o);r.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.removeAllListeners=function(e){var t,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new i,this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=new i:delete n[e]),this;if(0===arguments.length){for(var r,o=(0,ie.default)(n),a=0;a<o.length;++a)"removeListener"!==(r=o[a])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new i,this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1])}while(t[0]);return this},o.prototype.listeners=function(e){var t,n,r=this._events;return r?(t=r[e],n=t?"function"==typeof t?[t.listener||t]:b(t):[]):n=[],n},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},o.prototype.listenerCount=g,o.prototype.eventNames=function(){return 0<this._eventsCount?(0,ne.default)(this._events):[]};for(var ce,ue=new Uint8Array(16),de=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,fe=[],pe=0;256>pe;++pe)fe.push((pe+256).toString(16).substr(1));var he={},ge=void 0,me=[],ve=function(e){function t(e){(0,H.default)(this,t);var n=(0,W.default)(this,(t.__proto__||(0,ae.default)(t)).call(this));if(n.monitoringSetInterval=0,n.connectionMonitoringSetInterval=0,n.connectionMonitoringInterval=1e3,n.remote=!0,n.peersToMonitor={},n.timeline=[],n.statsToMonitor=["inbound-rtp","outbound-rtp","remote-inbound-rtp","remote-outbound-rtp","peer-connection","data-channel","stream","track","sender","receiver","transport","candidate-pair","local-candidate","remote-candidate"],"undefined"==typeof window)throw new Error("WebRTCStats only works in browser");var r=(0,ee.default)({},e);return n.isEdge=!!window.RTCIceGatherer,n.getStatsInterval=r.getStatsInterval||1e3,n.rawStats=!!r.rawStats,n.statsObject=!!r.statsObject,n.filteredStats=!!r.filteredStats,n.shouldWrapGetUserMedia=!!r.wrapGetUserMedia,"boolean"==typeof r.remote&&(n.remote=r.remote),n.debug=!!r.debug,n.logLevel=r.logLevel||"none",n.shouldWrapGetUserMedia&&n.wrapGetUserMedia(),n}return(0,X.default)(t,e),(0,z.default)(t,[{key:"addPeer",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,j.default)(U.default.mark(function e(t,n){return U.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.warn("The addPeer() method has been deprecated, please use addConnection()"),e.abrupt("return",this.addConnection({peerId:t,pc:n}));case 2:case"end":return e.stop()}},e,this)}));return e}()},{key:"addConnection",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,j.default)(U.default.mark(function e(t){var n,r,i,o,a,s,l;return U.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.pc,r=t.peerId,i=t.connectionId,o=t.remote,o="boolean"==typeof o?o:this.remote,n&&n instanceof RTCPeerConnection){e.next=5;break}throw new Error("Missing argument 'pc' or is not of instance RTCPeerConnection");case 5:if(r){e.next=7;break}throw new Error("Missing argument peerId");case 7:if(!this.isEdge){e.next=9;break}throw new Error("Can't monitor peers in Edge at this time.");case 9:if(!this.peersToMonitor[r]){e.next=23;break}if(!(i&&i in this.peersToMonitor[r])){e.next=14;break}throw new Error("We are already monitoring connection with id "+i+".");case 14:e.t0=U.default.keys(this.peersToMonitor[r]);case 15:if((e.t1=e.t0()).done){e.next=23;break}if(a=e.t1.value,s=this.peersToMonitor[r][a],s.pc!==n){e.next=20;break}throw new Error("We are already monitoring peer with id "+r+".");case 20:"closed"===s.pc.connectionState&&this.removeConnection({pc:s.pc}),e.next=15;break;case 23:return l=n.getConfiguration(),l.iceServers&&l.iceServers.forEach(function(e){delete e.credential}),i||(i=x()),this.emitEvent({event:"addConnection",tag:"peer",peerId:r,connectionId:i,data:{options:t,peerConfiguration:l}}),this.monitorPeer({peerId:r,connectionId:i,pc:n,remote:o}),e.abrupt("return",{connectionId:i});case 29:case"end":return e.stop()}},e,this)}));return e}()},{key:"getTimeline",value:function(e){return this.timeline=this.timeline.sort(function(e,t){return e.timestamp.getTime()-t.timestamp.getTime()}),e?this.timeline.filter(function(t){return t.tag===e}):this.timeline}},{key:"removeConnection",value:function(e){var t=e.connectionId,n=e.pc,r=void 0;if(!n&&!t)throw new Error("Missing arguments. You need to either send pc or a connectionId.");if(t){if("string"!=typeof t)throw new Error("connectionId must be a string.");for(var i in this.peersToMonitor)t in this.peersToMonitor[i]&&(n=this.peersToMonitor[i][t].pc,r=i)}else if(n){if(!(n instanceof RTCPeerConnection))throw new Error("pc must be an instance of RTCPeerConnection.");for(var o in this.peersToMonitor)for(var a in this.peersToMonitor[o])this.peersToMonitor[o][a].pc===n&&(t=a,r=o)}if(!n||!t)throw new Error("Could not find the desired connection.");return this.removePeerConnectionEventListeners(t,n),delete this.peersToMonitor[r][t],0===(0,F.default)(this.peersToMonitor[r]).length&&delete this.peersToMonitor[r],{connectionId:t}}},{key:"removeAllPeers",value:function(){for(var e in this.peersToMonitor)this.removePeer(e)}},{key:"removePeer",value:function(e){if(this.logger.info("Removing PeerConnection with id "+e+"."),this.peersToMonitor[e]){for(var t in this.peersToMonitor[e]){var n=this.peersToMonitor[e][t].pc;this.removePeerConnectionEventListeners(t,n)}delete this.peersToMonitor[e]}}},{key:"destroy",value:function(){var e=this;this.removeAllPeers(),me.forEach(function(t){e.removeTrackEventListeners(t)}),me=[],navigator.mediaDevices.getUserMedia=ge}},{key:"monitorPeer",value:function(e){var t=e.peerId,n=e.connectionId,r=e.pc,i=e.remote;if(!r)return void this.logger.warn("Did not receive pc argument when calling monitorPeer()");var o={pc:r,connectionId:n,stream:null,stats:{parsed:null,raw:null},options:{remote:i}};if(this.peersToMonitor[t]){if(n in this.peersToMonitor[t])return void this.logger.warn("Already watching connection with ID "+n);this.peersToMonitor[t][n]=o}else this.peersToMonitor[t]=(0,N.default)({},n,o);this.addPeerConnectionEventListeners(t,n,r),1===this.numberOfMonitoredPeers&&(this.startStatsMonitoring(),this.startConnectionStateMonitoring())}},{key:"startStatsMonitoring",value:function(){var e=this;this.monitoringSetInterval||(this.monitoringSetInterval=window.setInterval(function(){e.numberOfMonitoredPeers||e.stopStatsMonitoring(),e.getStats().then(function(t){t.forEach(function(t){e.emitEvent(t)})})},this._getStatsInterval))}},{key:"stopStatsMonitoring",value:function(){this.monitoringSetInterval&&(window.clearInterval(this.monitoringSetInterval),this.monitoringSetInterval=0)}},{key:"getStats",value:function(){function e(){return t.apply(this,arguments)}var t=(0,j.default)(U.default.mark(function e(){var t,n,r,i,o,a,s,l,c,u,d,f,p,h,g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return U.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.logger.info(g?"Getting stats from peer "+g:"Getting stats from all peers"),t={},!g){e.next=8;break}if(this.peersToMonitor[g]){e.next=5;break}throw new Error("Cannot get stats. Peer with id "+g+" does not exist");case 5:t[g]=this.peersToMonitor[g],e.next=9;break;case 8:t=this.peersToMonitor;case 9:n=[],e.t0=U.default.keys(t);case 11:if((e.t1=e.t0()).done){e.next=49;break}r=e.t1.value,e.t2=U.default.keys(t[r]);case 14:if((e.t3=e.t2()).done){e.next=47;break}if(i=e.t3.value,o=t[r][i],(a=o.pc)&&!this.checkIfConnectionIsClosed(r,i,a)){e.next=20;break}return e.abrupt("continue",14);case 20:if(e.prev=20,s=this.getTimestamp(),!(l=a.getStats(null))){e.next=39;break}return e.next=26,l;case 26:c=e.sent,u=this.getTimestamp(),d=E(c),f={remote:o.options.remote},p=I(c,o.stats.parsed,f),h={event:"stats",tag:"stats",peerId:r,connectionId:i,timeTaken:u-s,data:p},!0===this.rawStats&&(h.rawStats=c),!0===this.statsObject&&(h.statsObject=d),!0===this.filteredStats&&(h.filteredStats=this.filteroutStats(d)),n.push(h),o.stats.parsed=p,e.next=40;break;case 39:this.logger.error("PeerConnection from peer "+r+" did not return any stats data");case 40:e.next=45;break;case 42:e.prev=42,e.t4=e.catch(20),this.logger.error(e.t4);case 45:e.next=14;break;case 47:e.next=11;break;case 49:return e.abrupt("return",n);case 50:case"end":return e.stop()}},e,this,[[20,42]])}));return e}()},{key:"startConnectionStateMonitoring",value:function(){var e=this;this.connectionMonitoringSetInterval=window.setInterval(function(){e.numberOfMonitoredPeers||e.stopConnectionStateMonitoring();for(var t in e.peersToMonitor)for(var n in e.peersToMonitor[t]){var r=e.peersToMonitor[t][n].pc;e.checkIfConnectionIsClosed(t,n,r)}},this.connectionMonitoringInterval)}},{key:"checkIfConnectionIsClosed",value:function(e,t,n){var r=this.isConnectionClosed(n);if(r){this.removeConnection({pc:n});var i="closed"===n.connectionState?"onconnectionstatechange":"oniceconnectionstatechange";this.emitEvent({event:i,peerId:e,connectionId:t,tag:"connection",data:"closed"})}return r}},{key:"isConnectionClosed",value:function(e){return"closed"===e.connectionState||"closed"===e.iceConnectionState}},{key:"stopConnectionStateMonitoring",value:function(){this.connectionMonitoringSetInterval&&(window.clearInterval(this.connectionMonitoringSetInterval),this.connectionMonitoringSetInterval=0)}},{key:"wrapGetUserMedia",value:function(){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return void this.logger.warn("'navigator.mediaDevices.getUserMedia' is not available in browser. Will not wrap getUserMedia.");this.logger.info("Wrapping getUsermedia functions."),ge=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);var e=this.parseGetUserMedia.bind(this),t=function(){return e({constraints:arguments[0]}),ge.apply(navigator.mediaDevices,arguments).then(function(t){return e({stream:t}),t},function(t){return e({error:t}),M.default.reject(t)})};navigator.mediaDevices.getUserMedia=t.bind(navigator.mediaDevices)}},{key:"filteroutStats",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,ee.default)({},e);for(var n in t){var r=t[n];this.statsToMonitor.includes(r.type)||delete t[n]}return t}},{key:"addPeerConnectionEventListeners",value:function(e,t,n){var r=this;this.logger.debug("Adding event listeners for peer "+e+" and connection "+t+"."),he[t]={},(0,ie.default)(this.peerConnectionListeners).forEach(function(i){he[t][i]=r.peerConnectionListeners[i].bind(r,e,t,n),n.addEventListener(i,he[t][i],!1)})}},{key:"parseGetUserMedia",value:function(e){var t=this;try{var n={event:"getUserMedia",tag:"getUserMedia",data:(0,ee.default)({},e)};e.stream&&(n.data.details=this.parseStream(e.stream),e.stream.getTracks().map(function(e){t.addTrackEventListeners(e),me.push(e)})),this.emitEvent(n)}catch(e){}}},{key:"parseStream",value:function(e){var t=this,n={audio:[],video:[]};return e.getTracks().forEach(function(e){n[e.kind].push(t.getMediaTrackDetails(e))}),n}},{key:"getMediaTrackDetails",value:function(e){return{enabled:e.enabled,id:e.id,contentHint:e.contentHint,kind:e.kind,label:e.label,muted:e.muted,readyState:e.readyState,constructorName:e.constructor.name,capabilities:e.getCapabilities?e.getCapabilities():{},constraints:e.getConstraints?e.getConstraints():{},settings:e.getSettings?e.getSettings():{},_track:e}}},{key:"getStreamDetails",value:function(e){return{active:e.active,id:e.id,_stream:e}}},{key:"getTrackEventObject",value:function(e){var t=this;return{mute:function(n){t.emitEvent({event:"mute",tag:"track",connectionId:e,data:{event:n}})},unmute:function(n){t.emitEvent({event:"unmute",tag:"track",connectionId:e,data:{event:n}})},overconstrained:function(n){t.emitEvent({event:"overconstrained",tag:"track",connectionId:e,data:{event:n}})},ended:function(n){t.emitEvent({event:"ended",tag:"track",connectionId:e,data:{event:n}}),t.removeTrackEventListeners(n.target)}}}},{key:"addTrackEventListeners",value:function(e,t){var n=this;he[e.id]={};var r=this.getTrackEventObject(t);(0,ie.default)(r).forEach(function(t){he[e.id][t]=r[t].bind(n),e.addEventListener(t,he[e.id][t])}),he[e.id].readyState=setInterval(function(){if("ended"===e.readyState){var t=new CustomEvent("ended",{detail:{check:"readyState"}});e.dispatchEvent(t)}},1e3)}},{key:"removeTrackEventListeners",value:function(e){if(e.id in he){var t=this.getTrackEventObject();(0,ie.default)(t).forEach(function(t){e.removeEventListener(t,he[e.id][t])}),clearInterval(he[e.id].readyState),delete he[e.id]}}},{key:"addToTimeline",value:function(e){this.timeline.push(e),this.emit("timeline",e)}},{key:"emitEvent",value:function(e){var t=(0,ee.default)({},e,{timestamp:new Date});this.addToTimeline(t),t.tag&&this.emit(t.tag,t)}},{key:"removePeerConnectionEventListeners",value:function(e,t){var n=this;e in he&&((0,ie.default)(this.peerConnectionListeners).forEach(function(n){t.removeEventListener(n,he[e][n],!1)}),delete he[e]),t.getSenders().forEach(function(e){e.track&&n.removeTrackEventListeners(e.track)}),t.getReceivers().forEach(function(e){e.track&&n.removeTrackEventListeners(e.track)})}},{key:"getTimestamp",value:function(){return Date.now()}},{key:"wrapGetDisplayMedia",value:function(){var e=this;if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia){var t=navigator.mediaDevices.getDisplayMedia.bind(navigator.mediaDevices),n=function(){return e.debug("navigator.mediaDevices.getDisplayMedia",null,arguments[0]),t.apply(navigator.mediaDevices,arguments).then(function(e){return e},function(t){return e.debug("navigator.mediaDevices.getDisplayMediaOnFailure",null,t.name),M.default.reject(t)})};navigator.mediaDevices.getDisplayMedia=n.bind(navigator.mediaDevices)}}},{key:"logger",get:function(){var e=this,t=function(t){var n=["none","error","warn","info","debug"];return n.slice(0,n.indexOf(e.logLevel)+1).indexOf(t)>-1};return{error:function(){for(var e,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];this.debug&&t("error")&&(e=console).error.apply(e,["[webrtc-stats][error] "].concat((0,L.default)(r)))},warn:function(){for(var e,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];this.debug&&t("warn")&&(e=console).warn.apply(e,["[webrtc-stats][warn] "].concat((0,L.default)(r)))},info:function(){for(var e,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];this.debug&&t("info")&&(e=console).log.apply(e,["[webrtc-stats][info] "].concat((0,L.default)(r)))},debug:function(){for(var e,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];this.debug&&t("debug")&&(e=console).debug.apply(e,["[webrtc-stats][debug] "].concat((0,L.default)(r)))}}}},{key:"peerConnectionListeners",get:function(){var e=this;return{icecandidate:function(t,n,r,i){e.logger.debug("[pc-event] icecandidate | peerId: ${peerId}",i),e.emitEvent({event:"onicecandidate",tag:"connection",peerId:t,connectionId:n,data:i.candidate})},track:function(t,n,r,i){e.logger.debug("[pc-event] track | peerId: "+t,i);var o=i.track,a=i.streams[0];t in e.peersToMonitor&&n in e.peersToMonitor[t]&&(e.peersToMonitor[t][n].stream=a),e.addTrackEventListeners(o,n),e.emitEvent({event:"ontrack",tag:"track",peerId:t,connectionId:n,data:{stream:a?e.getStreamDetails(a):null,track:o?e.getMediaTrackDetails(o):null,title:i.track.kind+":"+i.track.id+" "+i.streams.map(function(e){return"stream:"+e.id})}})},signalingstatechange:function(t,n,r){e.logger.debug("[pc-event] signalingstatechange | peerId: "+t),e.emitEvent({event:"onsignalingstatechange",tag:"connection",peerId:t,connectionId:n,data:{signalingState:r.signalingState,localDescription:r.localDescription,remoteDescription:r.remoteDescription}})},iceconnectionstatechange:function(t,n,r){e.logger.debug("[pc-event] iceconnectionstatechange | peerId: "+t),e.emitEvent({event:"oniceconnectionstatechange",tag:"connection",peerId:t,connectionId:n,data:r.iceConnectionState})},icegatheringstatechange:function(t,n,r){e.logger.debug("[pc-event] icegatheringstatechange | peerId: "+t),e.emitEvent({event:"onicegatheringstatechange",tag:"connection",peerId:t,connectionId:n,data:r.iceGatheringState})},icecandidateerror:function(t,n,r,i){e.logger.debug("[pc-event] icecandidateerror | peerId: "+t),e.emitEvent({event:"onicecandidateerror",tag:"connection",peerId:t,connectionId:n,error:{errorCode:i.errorCode}})},connectionstatechange:function(t,n,r){e.logger.debug("[pc-event] connectionstatechange | peerId: "+t),e.emitEvent({event:"onconnectionstatechange",tag:"connection",peerId:t,connectionId:n,data:r.connectionState})},negotiationneeded:function(t,n,r){e.logger.debug("[pc-event] negotiationneeded | peerId: "+t),e.emitEvent({event:"onnegotiationneeded",tag:"connection",peerId:t,connectionId:n})},datachannel:function(t,n,r,i){e.logger.debug("[pc-event] datachannel | peerId: "+t,i),e.emitEvent({event:"ondatachannel",tag:"datachannel",peerId:t,connectionId:n,data:i.channel})}}}},{key:"getStatsInterval",set:function(e){if(!(0,R.default)(e))throw new Error("getStatsInterval should be an integer, got: "+e);this._getStatsInterval=e,this.monitoringSetInterval&&(this.stopStatsMonitoring(),this.startStatsMonitoring())}},{key:"numberOfMonitoredPeers",get:function(){return(0,ie.default)(this.peersToMonitor).length}}]),t}(o);t.WebRTCStats=ve},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),o=r(i),a=n(13),s=r(a),l=n(4),c=r(l),u=n(5),d=r(u),f=n(20),p=r(f),h=n(21),g=r(h),m=n(384),v=r(m),b=n(288),_=r(b),y=n(7),w=r(y),x=n(38),k=r(x),S=new w.default("ErrLog"),C=void 0,T=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];(0,c.default)(this,t);var r=(0,p.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e,n)),i=r.name=e.name||"siprtc",o=r.logName=e.logName||i,a=function(t){e.loginDone&&e.loginDone(t,r.name)};r.platform=e.platform||8,r.isCalling=!1;var l=e.voipNumber,u=e.voipPassword,d=e.url,f=r.client=new v.default({platform:r.platform,name:o,uin:n.getState("uin"),deviceId:e.devicesInputDefault,deviceIdOutput:e.devicesOutputDefault}),h=n._getOptions&&n._getOptions().kfext,g=r.onwork=function(){n.stopRetry("agentOffWork"),n._isConfigedSuccess()&&n.isConnected()&&f.userAgent&&!f.userAgent.isRegistered()?f.login():r.agentOnWork({retry:3,label:i,success:function(){a(!0)},fail:a}),r.log.$log("connected, agentOnWork executed")},m=r.offwork=function(e){n.stopRetry("agentOnWork"),!e&&a(),n.agentOffWork({retry:3,type:5,label:i,platform:r.platform})};return r.log=new w.default("SIP-Action-"+o),f.one("newCalling."+i,function(e,t){n.trigger("_platFormSet",i),n.trigger("newCalling",t),r.log.$log("platFormSet to "+i)}),f.one("streamReady."+i,function(e,t){n.trigger("_streamReady",t)}),f.one("registered."+i,g),n.one("_relogin."+i+".sipEvents",g),n.one("agentReset."+i+".sipEvents",function(e,t){n._isConfigedSuccess()&&n.isConnected()&&f.login(),a(0===t.errCode)}),f.one("sipAnswered."+i,function(e){r.isCalling=!0}),f.one("hangup."+i,function(e,t){r.isCalling=!1,n.trigger("_sessionEnd"),n.isConnected()||f.logout(!0)}),f.one("sessionFailed."+i,function(e,t){var i={errCode:0,message:t.cause};r.isCalling=!1,n.trigger("_sessionFailed",i)}),f.one("registrationFailed."+i,function(e,t){var i=k.default.code.registrationFailed;m(),S.$error("SIP-Action-"+r.logName+": agent registration failed, reported"),n.report({apiName:"registrationFailed",code:i,statusCode:i})}),n.one("logout."+i+".sipEvents",function(){f.logout(!0)}),n.one("disconnect."+i+".sipEvents",function(){f.logout(!r.isCalling)}),n.one("connect."+i+".sipEvents",function(){"webrtc"===n._getOptions("mode")&&f.login(void 0,!r.isCalling)}),n.one("_reset."+i+".sipEvents",r.destroy.bind(r)),C&&window.removeEventListener("unload",C),C=function(){n.setState("status","normal",!1),f.logout(!0)},window.addEventListener("unload",C,!1),d&&l&&f.login({voipNumber:l,voipPassword:u,url:d,kfext:h,uin:n.getState("uin"),from:"web"}),r}return(0,g.default)(t,e),(0,d.default)(t,[{key:"answer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.success,r=t.fail,i=t.complete;this.log.$log("answer, "+(0,o.default)(t)),this.client.answer().then(function(){n&&n.call(e.qd,{code:0})}).catch(function(t){r&&r.call(e.qd,t)}).finally(function(){i&&i.call(e.qd)})}},{key:"hangup",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.client,n=this.qd.getState(),r=n.status;e.callid=e.callid||n.callid,e.type=r&&"online"!==r?2:1,this.log.$log("hangup"),t.hangup(),this.apiCached.hangup(e)}},{key:"ringPause",value:function(){this.client.ringPause()}},{key:"setMuteState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=e.isMute,r=e.success,i=e.fail,a=e.complete;this.log.$log("setMuteState, "+(0,o.default)(e));try{this.client[n?"setMute":"unmute"](),!t&&this.qd.trigger("muteState",{IsMute:n}),r&&r.call(this.qd,{code:0})}catch(e){i&&i.call(this.qd,{code:-1,message:e.message})}a&&a.call(this.qd)}},{key:"setVolume",value:function(e){this.client.setVolume(e),this.log.$log("set volume "+e)}},{key:"agentOnWork",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.type=5,e.platform=e.platform||this.platform,this.log.$log("agentOnWork"),this.apiCached.agentOnWork(e)}},{key:"dialClick",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.client,n=e.key,r=e.success,i=e.fail,a=e.complete;this.log.$log("dialClick, "+(0,o.default)(e));try{t.dialClick(n),r&&r.call(this.qd,{code:0})}catch(e){i&&i.call(this.qd,{code:-1,message:e.message})}a&&a.call(this.qd)}},{key:"getNetWorkState",value:function(){return this.isCalling?(this.qd.trigger("netWorkStatus",this.client.stats),this.client.stats):this.client.stats}},{key:"setDeviceOutPut",value:function(e){this.client.setDeviceOutPut(e)}},{key:"setDeviceInPut",value:function(e){this.client.setDeviceInPut(e)}},{key:"destroy",value:function(){var e=this.client,t=this.name;this.log.$log("destroyed"),e.logout(!0),e.userAgent&&(e.userAgent.removeAllListeners(),e.userAgent.stop()),e.off("."+t),this.qd.off("."+t+".sipEvents")}}]),t}(_.default);t.default=T},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(100),o=r(i),a=n(14),s=r(a),l=n(8),c=r(l),u=n(444),d=r(u),f=n(445),p=n(59),h=n(316),g=n(464),m=r(g),v=n(7),b=r(v),_=new b.default("barState"),y=new b.default("actionStep"),w=new b.default("agentStatus"),x={status:"normal",socketEnv:"",roomId:"",autoAnswer:"",asrAuto:1,currentTab:"call-state",lastStatus:"",role:"b1",direction:"",multi:!1,mute:!1,callType:0,callKfext:"",callOperator:"",tel:"",customerName:"",callName:"",on:!0,answerType:2,ccStatus:"",callid:"",cuin:"",customerType:"",telMap:{},tplInfo:{opIcons:[],callIcons:[]},isCollapsed:!1,withPortrait:0,withTrack:0,withProfile:0,withAddCL:0,withAddMyList:0,workorder:{status:0},transtor:{},disposableId:void 0},k=(0,d.default)(),S=k.inClient||0,C=k.hidestatus||0,T=k.hidemenu||0;t.default={env:{inClient:S,isHideStatus:C,isHideMenu:T},initializeState:function(){var e=this;if(sessionStorage){var t=JSON.parse(sessionStorage.getItem("stat")||"{}"),n=this.getState("kfext")||this.getState("callKfext"),r="stat-"+n,i=JSON.parse(localStorage.getItem(r)||"{}");n===t.kfext&&(0,c.default)(x,t,{asrAuto:1,asrmind:0},i,{status:this.getState("status"),currentTab:"call-state",isSipbar:!1,switchboardList:[],scheduleData:{records:[]},restList:[]})}this.setState(x),this.clearCache("getSwitchBoardNumList"),this.clearCache("getRestList"),this.clearCache("getReceptionGroupList"),this.getSwitchBoardNumList({cache:30,index:1,count:50,success:function(t){var n=t.node||[],r=e.getState("currentSwitchboardNumber"),i=n.findIndex(function(e){return e.switchboard_number===r});e.setState({switchboardList:n,switchboardTotal:t.total||0}),e.setState("currentSwitchboardNumber",i>-1?r:"",!0)}}),this.getRestList({cache:30,success:function(t){var n=t.list||[];e.setState("restList",n)},fail:function(t){e.showTip("拉取小休状态列表出错")}}),this.once("_loginComplete.extend",function(){_.$log("agentbar is ready"),e.trigger("ready")}),this.trigger("_agentLogin")},resetState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.getState("status"),n=e.status,r={status:n||t,stack:[],role:"b1",lastStatus:"normal",lastCallType:1,callType:"",multi:!1,mute:!1,cuin:"",customerType:-1,customerName:"",switchboardNumber:"",remarkUnread:!1,telMap:{},tel:e.CustomerNum||("connect"===t?this.getState("tel"):""),tplInfo:{opIcons:[],callIcons:[]},currentAnswerType:e.AnswerType||0,direction:e.direction,remark:"",callbackType:1,callbackTimer:"",callbackOnTimeSaveId:"",callbackRemark:"",netWorkStatus:"",callName:"",consultType:"",consultSet:"",nextState:e,originDir:"",transtor:{},disposableId:void 0};this.setState(r,!1),this.clearCache("getCallInfo"),this.clearCache("getApiInfo"),this.clearCache("getCustomerInfo"),this.clearCache("getIvrEventList")},assign:c.default,format:function(e,t){var n=String(t).length;return 10===n?t*=1e3:n>13&&(t=+String(t).substring(0,13)),(0,m.default)(e,t)},formatTel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=/\*{3,4}/,n=!1,r=void 0,i=function(e){return n=/^\s*\+/.test(e),(0,f.parsePhoneNumberFromString)(e,n?void 0:"CN")},o=function(t){return e.startsWith("0")&&!t.startsWith("0")&&(t="0"+t),t},a=/^[\d\-\s\*\+]+$/,s="";if(e=String(e),!a.test(e))return e;if(r=e.match(t)){var l=e.replace(r[0],r[0].replace(/\*/g,"0")),c=i(l),u=c.countryCallingCode;return e.replace(r[0]," "+r[0]+" ").replace(u,u+" ").replace(/\+86\s*/,"")}var d=i(e);if(!d)return e||"";s=d["CN"===d.country?"formatNational":"formatInternational"]();var p=s.split(/\s+/);return s=2===p.length&&p[1].length<7?(n?"+"+d.countryCallingCode+" ":"")+o(d.nationalNumber):o(s),s.replace(/-/g," ")},showTip:function(e,t,n,r,i){this.trigger("_showTip",[e,t,n,r,i])},hideTip:function(e){this.trigger("_hideTip",e)},togglePage:function(e){this.trigger("_togglePage",e)},showPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.show=!0,this.trigger("_togglePage",e)},hidePage:function(e){this.trigger("_togglePage",{name:e,show:!1})},show:function(){this.trigger("_toggleMainFrame",!0),_.$log("show agentbar")},hide:function(){this.trigger("_toggleMainFrame",!1),_.$log("hide agentbar")},toggle:function(){this.trigger("_toggleMainFrame"),_.$log("toggle agentbar")},syncState:function(e){var t=this,n=void 0;return n=new s.default(function(n,r){t.getCallStatus({timeout:5,success:function(e){var r=t.getState(),i=null!==e.call_status&&p.status[e.call_status||e.agent_status]||"normal",o=e.hold_status,a=1===e.hardware,s=e.call_direction?1===e.call_direction?"callin":"callout":r.direction,l=e.call_role?2===e.call_role?"b2":"b1":r.role,c=e.call_kfext||r.kfext,u={role:l,direction:s,multi:1===e.multi_call,tel:e.call_number||r.tel,callType:e.call_type||r.callType,callKfext:c,kfext:c,callid:e.callid?e.callid:r.callid,roomId:"",hardware:a,switchboardNumber:e.switchboardNumber||r.switchboardNumber};i=o?"hold":i,i!==r.status&&(u.status=i),t.setState(u),b.default.$setExtraInfo({kfext:c}),n(e)},fail:function(e){return r(e)},complete:function(){e&&e.call(t)}})}),n.catch(function(e){}),n},syncCallInfo:function(e){var t=this,n=void 0;return n=new s.default(function(n,r){e?t.getCallInfo({cache:3600,callid:e,success:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.getState("nextState")||{};(0,c.default)(r,e.data),t.setState("nextState",r),n(e)},fail:function(e){return r(e)}}):r({code:2,msg:"缺少callid"})}),n.catch(function(e){}),n},syncCustomerInfo:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=/^\s*\+?(\d+[-\s]*){3,}$/,r=this.getState();if(t=t||r.nextState&&r.nextState.CustomerNum||r.tel,!n.test(t))return y.$log("getCustomerInfo is resolve directly as "+(t||'""')+" is not phone number"),s.default.resolve({});var i=new s.default(function(n,i){e.getCustomerInfo({cache:3600,tel:t,withPortrait:r.withPortrait,withTrack:r.withTrack,withProfile:r.withProfile,withAddCL:r.withAddCL,withAddMyList:r.withAddMyList,success:function(r){var i=r.portrait||{},o=i.name||r.name;r.customerName=o||t,e.setState({customerType:r.type,customerName:o,cuin:i.customerId}),e.trigger("_customerInfoSynced",r),n(r)},fail:function(e){return i(e)}})});return i.catch(function(e){}),i},isPSTN:function(){var e=this.getState(),t=e.isHardwareLogin;return(e.currentAnswerType?e.currentAnswerType===p.answerType.pstn:e.answerType===p.answerType.pstn)&&!t},dial:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.trigger("dial",{tel:e,isToCall:t})},syncCountInQueue:function(){var e=this,t=new s.default(function(t,n){e.getQueueCountList({stopOnFail:3,success:function(n){var r=n.node||[],i=0,o=void 0;r.forEach(function(e){i+=e.queue_count||0}),o={list:r,count:i},e.setState("queue",o),t(o),e.trigger("_refreshQueCount")},fail:function(e){return n(e)}})});return t.catch(function(e){}),t},getFormattedNumber:function(e){var t=this,n=e||this.getState("switchboardNumber"),r=this.getState("switchboardList")||[],i=this.formatTel(n),o=r.filter(function(e){if(e.switchboard_number&&t.formatTel(e.switchboard_number)===i)return e}),a=o&&o[0]&&o[0].switchboard_group;return a||this.getSwitchBoardNumList({index:1,count:1,keywords:"callin:"+n,success:function(e){var n=e.node||[],r=n.length>0?n[0].switchboard_group:"";r&&t.trigger("_currentSwitchboardGroup",r)}}),a||i},resolve:function(e){return s.default.resolve(e)},values:function(e){return(0,o.default)(e)},confirm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.hidePage("confirmFrame"),this.showPage({name:"confirmFrame",trigger:e.trigger,params:e})},getDisposableStatus:function(){var e=this.getState(),t=e.nextState||{},n=e.isPostEditOn||{},r=e.originDir||e.direction,i=t.AgentStatusBeforeCall,o=void 0!==e.disposableId?e.disposableId:n[r+"AfterStatus"],a=this.isCallingState();if(i>0&&i<100&&(i=1),2===o){var s=e.restId;o=s>99?s:i,o=void 0===o?1:o}return a&&w.$log("agentStatusBeforeCall: "+i+", agentStatusAfterCall: "+o),o},getCollege:function(){var e=this.getState("callType"),t=this.getState("callOperator"),n=this.getState("callOperatored"),r=this.getState("role"),i=e===p.callTypeCode.monitor||e===p.callTypeCode.breakIn,o=e===p.callTypeCode.consult;return i&&"b2"===r||o&&"b1"===r?n:t},getCallName:function(){var e=this,t=this.getState("callType"),n=this.getState("role"),r=this.getCollege();return t===p.callTypeCode.consult&&"b1"===n&&this.getState("callName")?this.resolve(this.getState("callName")):this.syncStaffInfo(r).then(function(t){var n=t.name||t.cname||t.ename||e.formatTel(r);return e.setState("callName",n),n})},getCustomerName:function(){return this.syncCustomerInfo().then(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).customerName})},isLogin:h.isLogin}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=void 0,n={};return e=e||location.href,t=e.split("?")[1]||"",t.split("&").forEach(function(e){var t=e.split("=");n[t[0]]=isNaN(+t[1])?t[1]:+t[1]}),n}},function(e,t,n){"use strict";function r(e,t){var n=Array.prototype.slice.call(t);return n.push(b.a),e.apply(this,n)}function i(){return r(_.o,arguments)}function o(){return r(_.q,arguments)}function a(){return r(_.d,arguments)}function s(){return r(_.s,arguments)}function l(){return r(_.e,arguments)}function c(){return r(_.t,arguments)}function u(e,t){return _.c.call(this,e,t,b.a)}function d(e){return _.a.call(this,e,b.a)}function f(){return r(_.l,arguments)}function p(){return r(_.h,arguments)}function h(){return r(_.i,arguments)}function g(e){return r(_.k,arguments)}function m(){return r(_.j,arguments)}function v(){return r(_.f,arguments)}Object.defineProperty(t,"__esModule",{value:!0}),t.parsePhoneNumber=i,t.parsePhoneNumberFromString=o,t.findNumbers=a,t.searchNumbers=s,t.findPhoneNumbersInText=l,t.searchPhoneNumbersInText=c,t.PhoneNumberMatcher=u,t.AsYouType=d,t.isSupportedCountry=f,t.getCountries=p,t.getCountryCallingCode=h,t.getExtPrefix=g,t.getExampleNumber=m,t.formatIncompletePhoneNumber=v;var b=n(446),_=n(304);n.d(t,"ParseError",function(){return _.b}),n.d(t,"parseIncompletePhoneNumber",function(){return _.n}),n.d(t,"parsePhoneNumberCharacter",function(){return _.p}),n.d(t,"parseDigits",function(){return _.m}),n.d(t,"parseRFC3966",function(){return _.r}),n.d(t,"formatRFC3966",function(){return _.g}),u.prototype=Object.create(_.c.prototype,{}),u.prototype.constructor=u,d.prototype=Object.create(_.a.prototype,{}),d.prototype.constructor=d},function(e,t,n){"use strict";t.a={version:"1.7.41",country_calling_codes:{1:["US","AG","AI","AS","BB","BM","BS","CA","DM","DO","GD","GU","JM","KN","KY","LC","MP","MS","PR","SX","TC","TT","VC","VG","VI"],7:["RU","KZ"],20:["EG"],27:["ZA"],30:["GR"],31:["NL"],32:["BE"],33:["FR"],34:["ES"],36:["HU"],39:["IT","VA"],40:["RO"],41:["CH"],43:["AT"],44:["GB","GG","IM","JE"],45:["DK"],46:["SE"],47:["NO","SJ"],48:["PL"],49:["DE"],51:["PE"],52:["MX"],53:["CU"],54:["AR"],55:["BR"],56:["CL"],57:["CO"],58:["VE"],60:["MY"],61:["AU","CC","CX"],62:["ID"],63:["PH"],64:["NZ"],65:["SG"],66:["TH"],81:["JP"],82:["KR"],84:["VN"],86:["CN"],90:["TR"],91:["IN"],92:["PK"],93:["AF"],94:["LK"],95:["MM"],98:["IR"],211:["SS"],212:["MA","EH"],213:["DZ"],216:["TN"],218:["LY"],220:["GM"],221:["SN"],222:["MR"],223:["ML"],224:["GN"],225:["CI"],226:["BF"],227:["NE"],228:["TG"],229:["BJ"],230:["MU"],231:["LR"],232:["SL"],233:["GH"],234:["NG"],235:["TD"],236:["CF"],237:["CM"],238:["CV"],239:["ST"],240:["GQ"],241:["GA"],242:["CG"],243:["CD"],244:["AO"],245:["GW"],246:["IO"],247:["AC"],248:["SC"],249:["SD"],250:["RW"],251:["ET"],252:["SO"],253:["DJ"],254:["KE"],255:["TZ"],256:["UG"],257:["BI"],258:["MZ"],260:["ZM"],261:["MG"],262:["RE","YT"],263:["ZW"],264:["NA"],265:["MW"],266:["LS"],267:["BW"],268:["SZ"],269:["KM"],290:["SH","TA"],291:["ER"],297:["AW"],298:["FO"],299:["GL"],350:["GI"],351:["PT"],352:["LU"],353:["IE"],354:["IS"],355:["AL"],356:["MT"],357:["CY"],358:["FI","AX"],359:["BG"],370:["LT"],371:["LV"],372:["EE"],373:["MD"],374:["AM"],375:["BY"],376:["AD"],377:["MC"],378:["SM"],380:["UA"],381:["RS"],382:["ME"],383:["XK"],385:["HR"],386:["SI"],387:["BA"],389:["MK"],420:["CZ"],421:["SK"],423:["LI"],500:["FK"],501:["BZ"],502:["GT"],503:["SV"],504:["HN"],505:["NI"],506:["CR"],507:["PA"],508:["PM"],509:["HT"],590:["GP","BL","MF"],591:["BO"],592:["GY"],593:["EC"],594:["GF"],595:["PY"],596:["MQ"],597:["SR"],598:["UY"],599:["CW","BQ"],670:["TL"],672:["NF"],673:["BN"],674:["NR"],675:["PG"],676:["TO"],677:["SB"],678:["VU"],679:["FJ"],680:["PW"],681:["WF"],682:["CK"],683:["NU"],685:["WS"],686:["KI"],687:["NC"],688:["TV"],689:["PF"],690:["TK"],691:["FM"],692:["MH"],850:["KP"],852:["HK"],853:["MO"],855:["KH"],856:["LA"],880:["BD"],886:["TW"],960:["MV"],961:["LB"],962:["JO"],963:["SY"],964:["IQ"],965:["KW"],966:["SA"],967:["YE"],968:["OM"],970:["PS"],971:["AE"],972:["IL"],973:["BH"],974:["QA"],975:["BT"],976:["MN"],977:["NP"],992:["TJ"],993:["TM"],994:["AZ"],995:["GE"],996:["KG"],998:["UZ"]},countries:{AC:["247","00","(?:[01589]\\d|[46])\\d{4}",[5,6]],AD:["376","00","(?:1|6\\d)\\d{7}|[136-9]\\d{5}",[6,8,9],[["(\\d{3})(\\d{3})","$1 $2",["[136-9]"]],["(\\d{4})(\\d{4})","$1 $2",["1"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]]],AE:["971","00","(?:[4-7]\\d|9[0-689])\\d{7}|800\\d{2,9}|[2-4679]\\d{7}",[5,6,7,8,9,10,11,12],[["(\\d{3})(\\d{2,9})","$1 $2",["60|8"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[236]|[479][2-8]"],"0$1"],["(\\d{3})(\\d)(\\d{5})","$1 $2 $3",["[479]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"]],"0"],AF:["93","00","[2-7]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"]],"0"],AG:["1","011","(?:268|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([457]\\d{6})$","268$1",0,"268"],AI:["1","011","(?:264|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2457]\\d{6})$","264$1",0,"264"],AL:["355","00","(?:700\\d\\d|900)\\d{3}|8\\d{5,7}|(?:[2-5]|6\\d)\\d{7}",[6,7,8,9],[["(\\d{3})(\\d{3,4})","$1 $2",["80|9"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["4[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2358][2-5]|4"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["[23578]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["6"],"0$1"]],"0"],AM:["374","00","(?:[1-489]\\d|55|60|77)\\d{6}",[8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[89]0"],"0 $1"],["(\\d{3})(\\d{5})","$1 $2",["2|3[12]"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["1|47"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[3-9]"],"0$1"]],"0"],AO:["244","00","[29]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[29]"]]]],AR:["54","00","11\\d{8}|(?:[2368]|9\\d)\\d{9}",[10,11],[["(\\d{4})(\\d{2})(\\d{4})","$1 $2-$3",["2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9])","2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8]))|2(?:2[24-9]|3[1-59]|47)","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5[56][46]|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|58|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|54(?:4|5[13-7]|6[89])|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:454|85[56])[46]|3(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["1"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[68]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2-$3",["[23]"],"0$1",1],["(\\d)(\\d{4})(\\d{2})(\\d{4})","$2 15-$3-$4",["9(?:2[2-469]|3[3-578])","9(?:2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9]))","9(?:2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8])))|92(?:2[24-9]|3[1-59]|47)","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5(?:[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|5(?:4(?:4|5[13-7]|6[89])|[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",0,"$1 $2 $3-$4"],["(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 15-$3-$4",["91"],"0$1",0,"$1 $2 $3-$4"],["(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 15-$3-$4",["9"],"0$1",0,"$1 $2 $3-$4"]],"0",0,"0?(?:(11|2(?:2(?:02?|[13]|2[13-79]|4[1-6]|5[2457]|6[124-8]|7[1-4]|8[13-6]|9[1267])|3(?:02?|1[467]|2[03-6]|3[13-8]|[49][2-6]|5[2-8]|[67])|4(?:7[3-578]|9)|6(?:[0136]|2[24-6]|4[6-8]?|5[15-8])|80|9(?:0[1-3]|[19]|2\\d|3[1-6]|4[02568]?|5[2-4]|6[2-46]|72?|8[23]?))|3(?:3(?:2[79]|6|8[2578])|4(?:0[0-24-9]|[12]|3[5-8]?|4[24-7]|5[4-68]?|6[02-9]|7[126]|8[2379]?|9[1-36-8])|5(?:1|2[1245]|3[237]?|4[1-46-9]|6[2-4]|7[1-6]|8[2-5]?)|6[24]|7(?:[069]|1[1568]|2[15]|3[145]|4[13]|5[14-8]|7[2-57]|8[126])|8(?:[01]|2[15-7]|3[2578]?|4[13-6]|5[4-8]?|6[1-357-9]|7[36-8]?|8[5-8]?|9[124])))15)?","9$1"],AS:["1","011","(?:[58]\\d\\d|684|900)\\d{7}",[10],0,"1",0,"1|([267]\\d{6})$","684$1",0,"684"],AT:["43","00","1\\d{3,12}|2\\d{6,12}|43(?:(?:0\\d|5[02-9])\\d{3,9}|2\\d{4,5}|[3467]\\d{4}|8\\d{4,6}|9\\d{4,7})|5\\d{4,12}|8\\d{7,12}|9\\d{8,12}|(?:[367]\\d|4[0-24-9])\\d{4,11}",[4,5,6,7,8,9,10,11,12,13],[["(\\d)(\\d{3,12})","$1 $2",["1(?:11|[2-9])"],"0$1"],["(\\d{3})(\\d{2})","$1 $2",["517"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["5[079]"],"0$1"],["(\\d{3})(\\d{3,10})","$1 $2",["(?:31|4)6|51|6(?:5[0-3579]|[6-9])|7(?:20|32|8)|[89]"],"0$1"],["(\\d{4})(\\d{3,9})","$1 $2",["[2-467]|5[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["5"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,7})","$1 $2 $3",["5"],"0$1"]],"0"],AU:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{7,8}|8[0-24-9]\\d{7})|(?:[2-478]\\d\\d|550)\\d{6}|1\\d{4,7}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,4})","$1 $2",["16"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,4})","$1 $2 $3",["16"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["14|[45]"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[2378]"],"(0$1)"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:30|[89])"]]],"0",0,"0|(183[12])",0,0,0,[["(?:[237]\\d{5}|8(?:51(?:0(?:0[03-9]|[1247]\\d|3[2-9]|5[0-8]|6[1-9]|8[0-6])|1(?:1[69]|[23]\\d|4[0-4]))|(?:[6-8]\\d{3}|9(?:[02-9]\\d\\d|1(?:[0-57-9]\\d|6[0135-9])))\\d))\\d{3}",[9]],["483[0-3]\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[06-9]|7[02-9]|8[0-2457-9]|9[0-27-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,["16\\d{3,7}",[5,6,7,8,9]],["(?:14(?:5(?:1[0458]|[23][458])|71\\d)|550\\d\\d)\\d{4}",[9]],["13(?:00\\d{3}|45[0-4])\\d{3}|13\\d{4}",[6,8,10]]],"0011"],AW:["297","00","(?:[25-79]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[25-9]"]]]],AX:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","2\\d{4,9}|35\\d{4,5}|(?:60\\d\\d|800)\\d{4,6}|7\\d{5,11}|(?:[14]\\d|3[0-46-9]|50)\\d{4,8}",[5,6,7,8,9,10,11,12],0,"0",0,0,0,0,"18",0,"00"],AZ:["994","00","365\\d{6}|(?:[124579]\\d|60|88)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[28]|2|365|46","1[28]|2|365|46","1[28]|2|365(?:[0-46-9]|5[0-35-9])|46"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[13-9]"],"0$1"]],"0"],BA:["387","00","6\\d{8}|(?:[35689]\\d|49|70)\\d{6}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["6[1-3]|[7-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2-$3",["[3-5]|6[56]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["6"],"0$1"]],"0"],BB:["1","011","(?:246|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-9]\\d{6})$","246$1",0,"246"],BD:["880","00","[13469]\\d{9}|8[0-79]\\d{7,8}|[2-7]\\d{8}|[2-9]\\d{7}|[3-689]\\d{6}|[57-9]\\d{5}",[6,7,8,9,10],[["(\\d{2})(\\d{4,6})","$1-$2",["31[5-7]|[459]1"],"0$1"],["(\\d{3})(\\d{3,7})","$1-$2",["3(?:[67]|8[013-9])|4(?:6[168]|7|[89][18])|5(?:6[128]|9)|6(?:28|4[14]|5)|7[2-589]|8(?:0[014-9]|[12])|9[358]|(?:3[2-5]|4[235]|5[2-578]|6[0389]|76|8[3-7]|9[24])1|(?:44|66)[01346-9]"],"0$1"],["(\\d{4})(\\d{3,6})","$1-$2",["[13-9]"],"0$1"],["(\\d)(\\d{7,8})","$1-$2",["2"],"0$1"]],"0"],BE:["32","00","4\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:80|9)0"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[239]|4[23]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[15-8]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4"],"0$1"]],"0"],BF:["226","00","[025-7]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[025-7]"]]]],BG:["359","00","[2-7]\\d{6,7}|[89]\\d{6,8}|2\\d{5}",[6,7,8,9],[["(\\d)(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["43[1-6]|70[1-9]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[356]|4[124-7]|7[1-9]|8[1-6]|9[1-7]"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:70|8)0"],"0$1"],["(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["43[1-7]|7"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[48]|9[08]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"]],"0"],BH:["973","00","[136-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[13679]|8[047]"]]]],BI:["257","00","(?:[267]\\d|31)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2367]"]]]],BJ:["229","00","(?:[2689]\\d|51)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[25689]"]]]],BL:["590","00","(?:590|69\\d|976)\\d{6}",[9],0,"0",0,0,0,0,0,[["590(?:2[7-9]|5[12]|87)\\d{4}"],["69(?:0\\d\\d|1(?:2[29]|3[0-5]))\\d{4}"],0,0,0,0,0,0,["976[01]\\d{5}"]]],BM:["1","011","(?:441|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-8]\\d{6})$","441$1",0,"441"],BN:["673","00","[2-578]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-578]"]]]],BO:["591","00(?:1\\d)?","(?:[2-467]\\d\\d|8001)\\d{5}",[8,9],[["(\\d)(\\d{7})","$1 $2",["[23]|4[46]"]],["(\\d{8})","$1",["[67]"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["8"]]],"0",0,"0(1\\d)?"],BQ:["599","00","(?:[34]1|7\\d)\\d{5}",[7],0,0,0,0,0,0,"[347]"],BR:["55","00(?:1[245]|2[1-35]|31|4[13]|[56]5|99)","(?:[1-46-9]\\d\\d|5(?:[0-46-9]\\d|5[0-24679]))\\d{8}|[1-9]\\d{9}|[3589]\\d{8}|[34]\\d{7}",[8,9,10,11],[["(\\d{4})(\\d{4})","$1-$2",["300|4(?:0[02]|37)","4(?:02|37)0|[34]00"]],["(\\d{3})(\\d{2,3})(\\d{4})","$1 $2 $3",["(?:[358]|90)0"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-57]"],"($1)"],["(\\d{2})(\\d{5})(\\d{4})","$1 $2-$3",["[16][1-9]|[2-57-9]"],"($1)"]],"0",0,"0(?:(1[245]|2[1-35]|31|4[13]|[56]5|99)(\\d{10,11}))?","$2"],BS:["1","011","(?:242|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([3-8]\\d{6})$","242$1",0,"242"],BT:["975","00","[17]\\d{7}|[2-8]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[2-68]|7[246]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[67]|7"]]]],BW:["267","00","90\\d{5}|(?:[2-6]|7\\d)\\d{6}",[7,8],[["(\\d{2})(\\d{5})","$1 $2",["90"]],["(\\d{3})(\\d{4})","$1 $2",["[2-6]"]],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["7"]]]],BY:["375","810","(?:[12]\\d|33|44|902)\\d{7}|8(?:0[0-79]\\d{5,7}|[1-7]\\d{9})|8(?:1[0-489]|[5-79]\\d)\\d{7}|8[1-79]\\d{6,7}|8[0-79]\\d{5}|8\\d{5}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3})","$1 $2",["800"],"8 $1"],["(\\d{3})(\\d{2})(\\d{2,4})","$1 $2 $3",["800"],"8 $1"],["(\\d{4})(\\d{2})(\\d{3})","$1 $2-$3",["1(?:5[169]|6[3-5]|7[179])|2(?:1[35]|2[34]|3[3-5])","1(?:5[169]|6(?:3[1-3]|4|5[125])|7(?:1[3-9]|7[0-24-6]|9[2-7]))|2(?:1[35]|2[34]|3[3-5])"],"8 0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["1(?:[56]|7[467])|2[1-3]"],"8 0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-4]"],"8 0$1"],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["[89]"],"8 $1"]],"8",0,"0|80?",0,0,0,0,"8~10"],BZ:["501","00","(?:0800\\d|[2-8])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1-$2",["[2-8]"]],["(\\d)(\\d{3})(\\d{4})(\\d{3})","$1-$2-$3-$4",["0"]]]],CA:["1","011","(?:[2-8]\\d|90)\\d{8}",[10],0,"1",0,0,0,0,0,[["(?:2(?:04|[23]6|[48]9|50)|3(?:06|43|65)|4(?:03|1[68]|3[178]|50)|5(?:06|1[49]|48|79|8[17])|6(?:04|13|39|47|72)|7(?:0[59]|78|8[02])|8(?:[06]7|19|25|73)|90[25])[2-9]\\d{6}"],[""],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["(?:5(?:00|2[12]|33|44|66|77|88)|622)[2-9]\\d{6}"],0,0,0,["600[2-9]\\d{6}"]]],CC:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d|8[0-24-9])\\d{7}|(?:[148]\\d\\d|550)\\d{6}|1\\d{5,7}",[6,7,8,9,10],0,"0",0,"0|([59]\\d{7})$","8$1",0,0,[["8(?:51(?:0(?:02|31|60)|118)|91(?:0(?:1[0-2]|29)|1(?:[28]2|50|79)|2(?:10|64)|3(?:[06]8|22)|4[29]8|62\\d|70[23]|959))\\d{3}",[9]],["483[0-3]\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[06-9]|7[02-9]|8[0-2457-9]|9[0-27-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["(?:14(?:5(?:1[0458]|[23][458])|71\\d)|550\\d\\d)\\d{4}",[9]],["13(?:00\\d{3}|45[0-4])\\d{3}|13\\d{4}",[6,8,10]]],"0011"],CD:["243","00","[189]\\d{8}|[1-68]\\d{6}",[7,9],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[1-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]"],"0$1"]],"0"],CF:["236","00","(?:[27]\\d{3}|8776)\\d{4}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[278]"]]]],CG:["242","00","222\\d{6}|(?:0\\d|80)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["801"]],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[02]"]]]],CH:["41","00","8\\d{11}|[2-9]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8[047]|90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]|81"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["8"],"0$1"]],"0"],CI:["225","00","[02-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[02-9]"]]]],CK:["682","00","[2-578]\\d{4}",[5],[["(\\d{2})(\\d{3})","$1 $2",["[2-578]"]]]],CL:["56","(?:0|1(?:1[0-69]|2[0-57]|5[13-58]|69|7[0167]|8[018]))0","12300\\d{6}|6\\d{9,10}|[2-9]\\d{8}",[9,10,11],[["(\\d{5})(\\d{4})","$1 $2",["21"],"($1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["44"]],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2[23]"],"($1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["9[2-9]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["3[2-5]|[47]|5[1-3578]|6[13-57]|8(?:0[1-9]|[1-9])"],"($1)"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["60|8"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{3})(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3 $4",["60"]]]],CM:["237","00","(?:[26]\\d\\d|88)\\d{6}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["88"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[26]"]]]],CN:["86","00|1(?:[12]\\d|79|9[0235-7])\\d\\d00","1[1279]\\d{8,9}|2\\d{9}(?:\\d{2})?|[12]\\d{6,7}|86\\d{6}|(?:1[03-68]\\d|6)\\d{7,9}|(?:[3-579]\\d|8[0-57-9])\\d{6,9}",[7,8,9,10,11,12],[["(\\d{2})(\\d{5,6})","$1 $2",["(?:10|2[0-57-9])[19]","(?:10|2[0-57-9])(?:10|9[56])","(?:10|2[0-57-9])(?:100|9[56])"],"0$1"],["(\\d{3})(\\d{5,6})","$1 $2",["3(?:[157]|35|49|9[1-68])|4(?:[17]|2[179]|6[47-9]|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])|(?:4[35]|59|85)[1-9]","(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))[19]","85[23](?:10|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:10|9[56])","85[23](?:100|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:100|9[56])"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["(?:4|80)0"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|2(?:[02-57-9]|1[1-9])","10|2(?:[02-57-9]|1[1-9])","10[0-79]|2(?:[02-57-9]|1[1-79])|(?:10|21)8(?:0[1-9]|[1-9])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["3(?:[3-59]|7[02-68])|4(?:[26-8]|3[3-9]|5[2-9])|5(?:3[03-9]|[468]|7[028]|9[2-46-9])|6|7(?:[0-247]|3[04-9]|5[0-4689]|6[2368])|8(?:[1-358]|9[1-7])|9(?:[013479]|5[1-5])|(?:[34]1|55|79|87)[02-9]"],"0$1",1],["(\\d{3})(\\d{7,8})","$1 $2",["9"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["80"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[3-578]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["1[3-9]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["[12]"],"0$1",1]],"0",0,"0|(1(?:[12]\\d|79|9[0235-7])\\d\\d)",0,0,0,0,"00"],CO:["57","00(?:4(?:[14]4|56)|[579])","(?:1\\d|3)\\d{9}|[124-8]\\d{7}",[8,10,11],[["(\\d)(\\d{7})","$1 $2",["[14][2-9]|[25-8]"],"($1)"],["(\\d{3})(\\d{7})","$1 $2",["3"]],["(\\d)(\\d{3})(\\d{7})","$1-$2-$3",["1"],"0$1",0,"$1 $2 $3"]],"0",0,"0([3579]|4(?:[14]4|56))?"],CR:["506","00","(?:8\\d|90)\\d{8}|[24-8]\\d{7}",[8,10],[["(\\d{4})(\\d{4})","$1 $2",["[24-7]|8[3-9]"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[89]"]]],0,0,"(19(?:0[0-2468]|1[09]|20|66|77|99))"],CU:["53","119","[27]\\d{6,7}|[34]\\d{5,7}|(?:5|8\\d\\d)\\d{7}",[6,7,8,10],[["(\\d{2})(\\d{4,6})","$1 $2",["2[1-4]|[34]"],"(0$1)"],["(\\d)(\\d{6,7})","$1 $2",["7"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["5"],"0$1"],["(\\d{3})(\\d{7})","$1 $2",["8"],"0$1"]],"0"],CV:["238","0","(?:[2-59]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2-589]"]]]],CW:["599","00","(?:[34]1|60|(?:7|9\\d)\\d)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[3467]"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["9[4-8]"]]],0,0,0,0,0,"[69]"],CX:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d|8[0-24-9])\\d{7}|(?:[148]\\d\\d|550)\\d{6}|1\\d{5,7}",[6,7,8,9,10],0,"0",0,"0|([59]\\d{7})$","8$1",0,0,[["8(?:51(?:0(?:01|30|59)|117)|91(?:00[6-9]|1(?:[28]1|49|78)|2(?:09|63)|3(?:12|26|75)|4(?:56|97)|64\\d|7(?:0[01]|1[0-2])|958))\\d{3}",[9]],["483[0-3]\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[06-9]|7[02-9]|8[0-2457-9]|9[0-27-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["(?:14(?:5(?:1[0458]|[23][458])|71\\d)|550\\d\\d)\\d{4}",[9]],["13(?:00\\d{3}|45[0-4])\\d{3}|13\\d{4}",[6,8,10]]],"0011"],CY:["357","00","(?:[279]\\d|[58]0)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[257-9]"]]]],CZ:["420","00","(?:[2-578]\\d|60)\\d{7}|9\\d{8,11}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]|9[015-7]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]]],DE:["49","00","[2579]\\d{5,14}|49(?:[05]\\d{10}|[46][1-8]\\d{4,9})|49(?:[0-25]\\d|3[1-689]|7[1-7])\\d{4,8}|49(?:[0-2579]\\d|[34][1-9]|6[0-8])\\d{3}|49\\d{3,4}|(?:1|[368]\\d|4[0-8])\\d{3,13}",[4,5,6,7,8,9,10,11,12,13,14,15],[["(\\d{2})(\\d{3,13})","$1 $2",["3[02]|40|[68]9"],"0$1"],["(\\d{3})(\\d{3,12})","$1 $2",["2(?:0[1-389]|1[124]|2[18]|3[14])|3(?:[35-9][15]|4[015])|906|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1","2(?:0[1-389]|12[0-8])|3(?:[35-9][15]|4[015])|906|2(?:[13][14]|2[18])|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1"],"0$1"],["(\\d{4})(\\d{2,11})","$1 $2",["[24-6]|3(?:[3569][02-46-9]|4[2-4679]|7[2-467]|8[2-46-8])|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]","[24-6]|3(?:3(?:0[1-467]|2[127-9]|3[124578]|7[1257-9]|8[1256]|9[145])|4(?:2[135]|4[13578]|9[1346])|5(?:0[14]|2[1-3589]|6[1-4]|7[13468]|8[13568])|6(?:2[1-489]|3[124-6]|6[13]|7[12579]|8[1-356]|9[135])|7(?:2[1-7]|4[145]|6[1-5]|7[1-4])|8(?:21|3[1468]|6|7[1467]|8[136])|9(?:0[12479]|2[1358]|4[134679]|6[1-9]|7[136]|8[147]|9[1468]))|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]|3[68]4[1347]|3(?:47|60)[1356]|3(?:3[46]|46|5[49])[1246]|3[4579]3[1357]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["138"],"0$1"],["(\\d{5})(\\d{2,10})","$1 $2",["3"],"0$1"],["(\\d{3})(\\d{5,11})","$1 $2",["181"],"0$1"],["(\\d{3})(\\d)(\\d{4,10})","$1 $2 $3",["1(?:3|80)|9"],"0$1"],["(\\d{3})(\\d{7,8})","$1 $2",["1[67]"],"0$1"],["(\\d{3})(\\d{7,12})","$1 $2",["8"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["185","1850","18500"],"0$1"],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["18[68]"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["15[0568]"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["15[1279]"],"0$1"],["(\\d{3})(\\d{8})","$1 $2",["18"],"0$1"],["(\\d{3})(\\d{2})(\\d{7,8})","$1 $2 $3",["1(?:6[023]|7)"],"0$1"],["(\\d{4})(\\d{2})(\\d{7})","$1 $2 $3",["15[279]"],"0$1"],["(\\d{3})(\\d{2})(\\d{8})","$1 $2 $3",["15"],"0$1"]],"0"],DJ:["253","00","(?:2\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[27]"]]]],DK:["45","00","[2-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-9]"]]]],DM:["1","011","(?:[58]\\d\\d|767|900)\\d{7}",[10],0,"1",0,"1|([2-7]\\d{6})$","767$1",0,"767"],DO:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,0,0,0,"8[024]9"],DZ:["213","00","(?:[1-4]|[5-79]\\d|80)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["9"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-8]"],"0$1"]],"0"],EC:["593","00","1800\\d{6,7}|(?:[2-7]|9\\d)\\d{7}",[8,9,10,11],[["(\\d)(\\d{3})(\\d{4})","$1 $2-$3",["[2-7]"],"(0$1)",0,"$1-$2-$3"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{3})(\\d{3,4})","$1 $2 $3",["1"]]],"0"],EE:["372","00","8\\d{9}|[4578]\\d{7}|(?:[3-8]\\d\\d|900)\\d{4}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[369]|4[3-8]|5(?:[0-2]|5[0-478]|6[45])|7[1-9]","[369]|4[3-8]|5(?:[02]|1(?:[0-8]|95)|5[0-478]|6(?:4[0-4]|5[1-589]))|7[1-9]"]],["(\\d{4})(\\d{3,4})","$1 $2",["[45]|8(?:00|[1-4])","[45]|8(?:00[1-9]|[1-4])"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["80"]]]],EG:["20","00","[189]\\d{8,9}|[24-6]\\d{8}|[135]\\d{7}",[8,9,10],[["(\\d)(\\d{7,8})","$1 $2",["[23]"],"0$1"],["(\\d{2})(\\d{6,7})","$1 $2",["1[35]|[4-6]|8[2468]|9[235-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[189]"],"0$1"]],"0"],EH:["212","00","[5-8]\\d{8}",[9],0,"0",0,0,0,0,"528[89]"],ER:["291","00","[178]\\d{6}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[178]"],"0$1"]],"0"],ES:["34","00","(?:51|[6-9]\\d)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]00"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-9]"]]]],ET:["251","00","(?:11|[2-59]\\d)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-59]"],"0$1"]],"0"],FI:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","[1-35689]\\d{4}|7\\d{10,11}|(?:[124-7]\\d|3[0-46-9])\\d{8}|[1-9]\\d{5,8}",[5,6,7,8,9,10,11,12],[["(\\d)(\\d{4,9})","$1 $2",["[2568][1-8]|3(?:0[1-9]|[1-9])|9"],"0$1"],["(\\d{3})(\\d{3,7})","$1 $2",["[12]00|[368]|70[07-9]"],"0$1"],["(\\d{2})(\\d{4,8})","$1 $2",["[1245]|7[135]"],"0$1"],["(\\d{2})(\\d{6,10})","$1 $2",["7"],"0$1"]],"0",0,0,0,0,"1[03-79]|[2-9]",0,"00"],FJ:["679","0(?:0|52)","45\\d{5}|(?:0800\\d|[235-9])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1 $2",["[235-9]|45"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]]],0,0,0,0,0,0,0,"00"],FK:["500","00","[2-7]\\d{4}",[5]],FM:["691","00","[39]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[39]"]]]],FO:["298","00","(?:[2-8]\\d|90)\\d{4}",[6],[["(\\d{6})","$1",["[2-9]"]]],0,0,"(10(?:01|[12]0|88))"],FR:["33","00","[1-9]\\d{8}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0 $1"],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[1-79]"],"0$1"]],"0"],GA:["241","00","(?:[067]\\d|11)\\d{6}|[2-7]\\d{6}",[7,8],[["(\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-7]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["11|[67]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]]],0,0,"0(11\\d{6}|6[256]\\d{6}|7[47]\\d{6})","$1"],GB:["44","00","[1-357-9]\\d{9}|[18]\\d{8}|8\\d{6}",[7,9,10],[["(\\d{3})(\\d{4})","$1 $2",["800","8001","80011","800111","8001111"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["845","8454","84546","845464"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["800"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["1(?:38|5[23]|69|76|94)","1(?:(?:38|69)7|5(?:24|39)|768|946)","1(?:3873|5(?:242|39[4-6])|(?:697|768)[347]|9467)"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["1(?:[2-69][02-9]|[78])"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[25]|7(?:0|6[02-9])","[25]|7(?:0|6(?:[03-9]|2[356]))"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[1389]"],"0$1"]],"0",0,0,0,0,0,[["(?:1(?:(?:1(?:3[0-58]|4[0-5]|5[0-26-9]|6[0-4]|[78][0-49])|3(?:0\\d|1[0-8]|[25][02-9]|3[02-579]|[468][0-46-9]|7[1-35-79]|9[2-578])|4(?:0[03-9]|[137]\\d|[28][02-57-9]|4[02-69]|5[0-8]|[69][0-79])|5(?:0[1-35-9]|[16]\\d|2[024-9]|3[015689]|4[02-9]|5[03-9]|7[0-35-9]|8[0-468]|9[0-57-9])|6(?:0[034689]|1\\d|2[0-35689]|[38][013-9]|4[1-467]|5[0-69]|6[13-9]|7[0-8]|9[0-24578])|7(?:0[0246-9]|2\\d|3[0236-8]|4[03-9]|5[0-46-9]|6[013-9]|7[0-35-9]|8[024-9]|9[02-9])|8(?:0[35-9]|2[1-57-9]|3[02-578]|4[0-578]|5[124-9]|6[2-69]|7\\d|8[02-9]|9[02569])|9(?:0[02-589]|[18]\\d|2[02-689]|3[1-57-9]|4[2-9]|5[0-579]|6[2-47-9]|7[0-24578]|9[2-57]))\\d\\d|2(?:(?:0[024-9]|2[3-9]|3[3-79]|4[1-689]|[58][02-9]|6[0-47-9]|7[013-9]|9\\d)\\d\\d|1(?:[0-7]\\d\\d|80[04589])))|2(?:0[013478]|3[0189]|4[017]|8[0-46-9]|9[0-2])\\d{3})\\d{4}|1(?:2(?:0(?:46[1-4]|87[2-9])|545[1-79]|76(?:2\\d|3[1-8]|6[1-6])|9(?:7(?:2[0-4]|3[2-5])|8(?:2[2-8]|7[0-47-9]|8[3-5])))|3(?:6(?:38[2-5]|47[23])|8(?:47[04-9]|64[0157-9]))|4(?:044[1-7]|20(?:2[23]|8\\d)|6(?:0(?:30|5[2-57]|6[1-8]|7[2-8])|140)|8(?:052|87[1-3]))|5(?:2(?:4(?:3[2-79]|6\\d)|76\\d)|6(?:26[06-9]|686))|6(?:06(?:4\\d|7[4-79])|295[5-7]|35[34]\\d|47(?:24|61)|59(?:5[08]|6[67]|74)|9(?:55[0-4]|77[23]))|7(?:26(?:6[13-9]|7[0-7])|(?:442|688)\\d|50(?:2[0-3]|[3-68]2|76))|8(?:27[56]\\d|37(?:5[2-5]|8[239])|843[2-58])|9(?:0(?:0(?:6[1-8]|85)|52\\d)|3583|4(?:66[1-8]|9(?:2[01]|81))|63(?:23|3[1-4])|9561))\\d{3}",[9,10]],["7(?:457[0-57-9]|700[01]|911[028])\\d{5}|7(?:[1-3]\\d\\d|4(?:[0-46-9]\\d|5[0-689])|5(?:0[0-8]|[13-9]\\d|2[0-35-9])|7(?:0[1-9]|[1-7]\\d|8[02-9]|9[0-689])|8(?:[014-9]\\d|[23][0-8])|9(?:[024-9]\\d|1[02-9]|3[0-689]))\\d{6}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[2-49]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:0[0-2]|2[356]|34|4[0134]|5[49]|6[0-369]|77|81|9[39])\\d{6}",[10]],["56\\d{8}",[10]]],0," x"],GD:["1","011","(?:473|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-9]\\d{6})$","473$1",0,"473"],GE:["995","00","(?:[3-57]\\d\\d|800)\\d{6}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["32"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[57]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[348]"],"0$1"]],"0"],GF:["594","00","(?:[56]94|976)\\d{6}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"]],"0"],GG:["44","00","(?:1481|[357-9]\\d{3})\\d{6}|8\\d{6}(?:\\d{2})?",[7,9,10],0,"0",0,"0|([25-9]\\d{5})$","1481$1",0,0,[["1481[25-9]\\d{5}",[10]],["7(?:(?:781|839)\\d|911[17])\\d{5}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[0-3]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:0[0-2]|2[356]|34|4[0134]|5[49]|6[0-369]|77|81|9[39])\\d{6}",[10]],["56\\d{8}",[10]]]],GH:["233","00","(?:[235]\\d{3}|800)\\d{5}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[235]"],"0$1"]],"0"],GI:["350","00","[256]\\d{7}",[8],[["(\\d{3})(\\d{5})","$1 $2",["2"]]]],GL:["299","00","(?:19|[2-689]\\d)\\d{4}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["19|[2-689]"]]]],GM:["220","00","[2-9]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],GN:["224","00","(?:30|6\\d\\d|722)\\d{6}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["3"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[67]"]]]],GP:["590","00","(?:590|69\\d|976)\\d{6}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"]],"0",0,0,0,0,0,[["590(?:0[1-68]|1[0-2]|2[0-68]|3[1289]|4[0-24-9]|5[3-579]|6[0189]|7[08]|8[0-689]|9\\d)\\d{4}"],["69(?:0\\d\\d|1(?:2[29]|3[0-5]))\\d{4}"],0,0,0,0,0,0,["976[01]\\d{5}"]]],GQ:["240","00","222\\d{6}|(?:3\\d|55|[89]0)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235]"]],["(\\d{3})(\\d{6})","$1 $2",["[89]"]]]],GR:["30","00","5005000\\d{3}|(?:[2689]\\d|70)\\d{8}",[10],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["21|7"]],["(\\d{4})(\\d{6})","$1 $2",["2(?:2|3[2-57-9]|4[2-469]|5[2-59]|6[2-9]|7[2-69]|8[2-49])|5"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2689]"]]]],GT:["502","00","(?:1\\d{3}|[2-7])\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1 $2",["[2-7]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],GU:["1","011","(?:[58]\\d\\d|671|900)\\d{7}",[10],0,"1",0,"1|([3-9]\\d{6})$","671$1",0,"671"],GW:["245","00","[49]\\d{8}|4\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["40"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"]]]],GY:["592","001","(?:862\\d|9008)\\d{3}|(?:[2-46]\\d|77)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-46-9]"]]]],HK:["852","00(?:30|5[09]|[126-9]?)","8[0-46-9]\\d{6,7}|9\\d{4}(?:\\d(?:\\d(?:\\d{4})?)?)?|(?:[235-79]\\d|46)\\d{6}",[5,6,7,8,9,11],[["(\\d{3})(\\d{2,5})","$1 $2",["900","9003"]],["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[1-4]|9(?:0[1-9]|[1-8])"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{3})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]],0,0,0,0,0,0,0,"00"],HN:["504","00","8\\d{10}|[237-9]\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1-$2",["[237-9]"]]]],HR:["385","00","(?:[24-69]\\d|3[0-79])\\d{7}|80\\d{5,7}|[1-79]\\d{7}|6\\d{5,6}",[6,7,8,9],[["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["6[01]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{4})(\\d{3})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[67]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-5]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"]],"0"],HT:["509","00","[2-489]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[2-489]"]]]],HU:["36","00","[2357]\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27][2-9]|3[2-7]|4[24-9]|5[2-79]|6|8[2-57-9]|9[2-69]"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-57-9]"],"06 $1"]],"06"],ID:["62","00[189]","(?:(?:007803|8\\d{4})\\d|[1-36])\\d{6}|[1-9]\\d{8,10}|[2-9]\\d{7}",[7,8,9,10,11,12,13],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["15"]],["(\\d{2})(\\d{5,9})","$1 $2",["2[124]|[36]1"],"(0$1)"],["(\\d{3})(\\d{5,7})","$1 $2",["800"],"0$1"],["(\\d{3})(\\d{5,8})","$1 $2",["[2-79]"],"(0$1)"],["(\\d{3})(\\d{3,4})(\\d{3})","$1-$2-$3",["8[1-35-9]"],"0$1"],["(\\d{3})(\\d{6,8})","$1 $2",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["804"],"0$1"],["(\\d{3})(\\d)(\\d{3})(\\d{3})","$1 $2 $3 $4",["80"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1-$2-$3",["8"],"0$1"]],"0"],IE:["353","00","(?:1\\d|[2569])\\d{6,8}|4\\d{6,9}|7\\d{8}|8\\d{8,9}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["2[24-9]|47|58|6[237-9]|9[35-9]"],"(0$1)"],["(\\d{3})(\\d{5})","$1 $2",["[45]0"],"(0$1)"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["1"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2569]|4[1-69]|7[14]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["81"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[78]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["4"],"(0$1)"],["(\\d{2})(\\d)(\\d{3})(\\d{4})","$1 $2 $3 $4",["8"],"0$1"]],"0"],IL:["972","0(?:0|1[2-9])","1\\d{6}(?:\\d{3,5})?|[57]\\d{8}|[1-489]\\d{7}",[7,8,9,10,11,12],[["(\\d{4})(\\d{3})","$1-$2",["125"]],["(\\d{4})(\\d{2})(\\d{2})","$1-$2-$3",["121"]],["(\\d)(\\d{3})(\\d{4})","$1-$2-$3",["[2-489]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1-$2-$3",["12"]],["(\\d{4})(\\d{6})","$1-$2",["159"]],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3-$4",["1[7-9]"]],["(\\d{3})(\\d{1,2})(\\d{3})(\\d{4})","$1-$2 $3-$4",["15"]]],"0"],IM:["44","00","1624\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"0|([5-8]\\d{5})$","1624$1",0,"74576|(?:16|7[56])24"],IN:["91","00","(?:000800|[2-9]\\d\\d)\\d{7}|1\\d{7,12}",[8,9,10,11,12,13],[["(\\d{8})","$1",["5(?:0|2[23]|3[03]|[67]1|88)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|888)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|8888)"],0,1],["(\\d{4})(\\d{4,5})","$1 $2",["180","1800"],0,1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["140"],0,1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["11|2[02]|33|4[04]|79[1-7]|80[2-46]","11|2[02]|33|4[04]|79(?:[1-6]|7[19])|80(?:[2-4]|6[0-589])","11|2[02]|33|4[04]|79(?:[124-6]|3(?:[02-9]|1[0-24-9])|7(?:1|9[1-6]))|80(?:[2-4]|6[0-589])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:2[0-249]|3[0-25]|4[145]|[68]|7[1257])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|5[12]|[78]1)|6(?:12|[2-4]1|5[17]|6[13]|80)|7(?:12|3[134]|4[47]|61|88)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91)|(?:43|59|75)[15]|(?:1[59]|29|67|72)[14]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|674|7(?:(?:2[14]|3[34]|5[15])[2-6]|61[346]|88[0-8])|8(?:70[2-6]|84[235-7]|91[3-7])|(?:1(?:29|60|8[06])|261|552|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))[2-7]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12(?:[2-6]|7[0-8])|74[2-7])|7(?:(?:2[14]|5[15])[2-6]|3171|61[346]|88(?:[2-7]|82))|8(?:70[2-6]|84(?:[2356]|7[19])|91(?:[3-6]|7[19]))|73[134][2-6]|(?:74[47]|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[2-6]|7[19])|(?:1(?:29|60|8[06])|261|552|6(?:[2-4]1|5[17]|6[13]|7(?:1|4[0189])|80)|7(?:12|88[01]))[2-7]"],"0$1",1],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2[2457-9]|3[2-5]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1[013-9]|28|3[129]|4[1-35689]|5[29]|6[02-5]|70)|807","1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2(?:[2457]|84|95)|3(?:[2-4]|55)|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1(?:[013-8]|9[6-9])|28[6-8]|3(?:17|2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4|5[0-367])|70[13-7])|807[19]","1(?:[2-479]|5(?:[0236-9]|5[013-9]))|[2-5]|6(?:2(?:84|95)|355|83)|73179|807(?:1|9[1-3])|(?:1552|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])\\d|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]))[2-7]"],"0$1",1],["(\\d{5})(\\d{5})","$1 $2",["[6-9]"],"0$1",1],["(\\d{4})(\\d{2,4})(\\d{4})","$1 $2 $3",["1(?:6|8[06])","1(?:6|8[06]0)"],0,1],["(\\d{4})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["18"],0,1]],"0"],IO:["246","00","3\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["3"]]]],IQ:["964","00","(?:1|7\\d\\d)\\d{7}|[2-6]\\d{7,8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-6]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],IR:["98","00","[1-9]\\d{9}|(?:[1-8]\\d\\d|9)\\d{3,4}",[4,5,6,7,10],[["(\\d{4,5})","$1",["96"],"0$1"],["(\\d{2})(\\d{4,5})","$1 $2",["(?:1[137]|2[13-68]|3[1458]|4[145]|5[1468]|6[16]|7[1467]|8[13467])[12689]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[1-8]"],"0$1"]],"0"],IS:["354","00|1(?:0(?:01|[12]0)|100)","(?:38\\d|[4-9])\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["[4-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["3"]]],0,0,0,0,0,0,0,"00"],IT:["39","00","0\\d{5,10}|3[0-8]\\d{7,10}|55\\d{8}|8\\d{5}(?:\\d{2,4})?|(?:1\\d|39)\\d{7,8}",[6,7,8,9,10,11],[["(\\d{2})(\\d{4,6})","$1 $2",["0[26]"]],["(\\d{3})(\\d{3,6})","$1 $2",["0[13-57-9][0159]|8(?:03|4[17]|9[245])","0[13-57-9][0159]|8(?:03|4[17]|9(?:2|[45][0-4]))"]],["(\\d{4})(\\d{2,6})","$1 $2",["0(?:[13-579][2-46-8]|8[236-8])"]],["(\\d{4})(\\d{4})","$1 $2",["894"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[26]|5"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["1[4679]|[38]"]],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[13-57-9][0159]"]],["(\\d{2})(\\d{4})(\\d{5})","$1 $2 $3",["0[26]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["3"]]],0,0,0,0,0,0,[["0669[0-79]\\d{1,6}|0(?:1(?:[0159]\\d|[27][1-5]|31|4[1-4]|6[1356]|8[2-57])|2\\d\\d|3(?:[0159]\\d|2[1-4]|3[12]|[48][1-6]|6[2-59]|7[1-7])|4(?:[0159]\\d|[23][1-9]|4[245]|6[1-5]|7[1-4]|81)|5(?:[0159]\\d|2[1-5]|3[2-6]|4[1-79]|6[4-6]|7[1-578]|8[3-8])|6(?:[0-57-9]\\d|6[0-8])|7(?:[0159]\\d|2[12]|3[1-7]|4[2-46]|6[13569]|7[13-6]|8[1-59])|8(?:[0159]\\d|2[3-578]|3[1-356]|[6-8][1-5])|9(?:[0159]\\d|[238][1-5]|4[12]|6[1-8]|7[1-6]))\\d{2,7}"],["3[1-9]\\d{8}|3[2-9]\\d{7}",[9,10]],["80(?:0\\d{3}|3)\\d{3}",[6,9]],["(?:0878\\d\\d|89(?:2|4[5-9]\\d))\\d{3}|89[45][0-4]\\d\\d|(?:1(?:44|6[346])|89(?:5[5-9]|9))\\d{6}",[6,8,9,10]],["1(?:78\\d|99)\\d{6}",[9,10]],0,0,0,["55\\d{8}",[10]],["84(?:[08]\\d{3}|[17])\\d{3}",[6,9]]]],JE:["44","00","1534\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"0|([0-24-8]\\d{5})$","1534$1",0,0,[["1534[0-24-8]\\d{5}"],["7(?:(?:(?:50|82)9|937)\\d|7(?:00[378]|97[7-9]))\\d{5}"],["80(?:07(?:35|81)|8901)\\d{4}"],["(?:8(?:4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|90(?:066[59]|1810|71(?:07|55)))\\d{4}"],["701511\\d{4}"],0,["(?:3(?:0(?:07(?:35|81)|8901)|3\\d{4}|4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|55\\d{4})\\d{4}"],["76(?:0[0-2]|2[356]|34|4[0134]|5[49]|6[0-369]|77|81|9[39])\\d{6}"],["56\\d{8}"]]],JM:["1","011","(?:[58]\\d\\d|658|900)\\d{7}",[10],0,"1",0,0,0,0,"658|876"],JO:["962","00","900\\d{5}|(?:(?:[268]|7\\d)\\d|32|53)\\d{6}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2356]|87"],"(0$1)"],["(\\d{3})(\\d{5,6})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["70"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],JP:["81","010","00[1-9]\\d{6,14}|[257-9]\\d{9}|(?:00|[1-9]\\d\\d)\\d{6}",[8,9,10,11,12,13,14,15,16,17],[["(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3",["(?:12|57|99)0"],"0$1"],["(\\d{4})(\\d)(\\d{4})","$1-$2-$3",["1(?:26|3[79]|4[56]|5[4-68]|6[3-5])|499|5(?:76|97)|746|8(?:3[89]|47|51|63)|9(?:49|80|9[16])","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:76|97)9|7468|8(?:3(?:8[78]|96)|477|51[24]|636)|9(?:496|802|9(?:1[23]|69))|1(?:45|58)[67]","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:769|979[2-69])|7468|8(?:3(?:8[78]|96[2457-9])|477|51[24]|636[2-57-9])|9(?:496|802|9(?:1[23]|69))|1(?:45|58)[67]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2-$3",["[36]|4(?:2[09]|7[01])","[36]|4(?:2(?:0|9[02-69])|7(?:0[019]|1))"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["1(?:1|5[45]|77|88|9[69])|2(?:2[1-37]|3[0-269]|4[59]|5|6[24]|7[1-358]|8[1369]|9[0-38])|4(?:[28][1-9]|3[0-57]|[45]|6[248]|7[2-579]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-389])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9[2-6])|8(?:2[124589]|3[279]|49|6[0-24-689]|7[0-468]|8[68]|9[019])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9[1-489])","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2(?:[127]|3[014-9])|3[0-269]|4[59]|5(?:[0468][01]|[1-3]|5[0-69]|9[19])|62|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|2[01]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|8[1-9])|5(?:2|3[045]|4[0-369]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0-2469])|49|6(?:[0-24]|5[0-3589]|9[01459])|7[0-468]|8[68])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3[34]|4[0178]))|(?:49|55|83)[29]|(?:264|837)[016-9]|2(?:57|93)[015-9]|(?:47[59]|59[89]|8(?:6[68]|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[0468][01]|[1-3]|5[0-69]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|2[01]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0169])|3(?:[29]|7(?:[017-9]|6[6-8]))|49|6(?:[0-24]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:8294|96)[1-3]|2(?:57|93)[015-9]|(?:223|8699)[014-9]|(?:48|8292|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[0468][01]|[1-3]|5[0-69]|7[015-9]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17|3[015-9]))|4(?:2(?:[13-79]|2[01]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9(?:[019]|4[1-3]|6(?:[0-47-9]|5[01346-9])))|3(?:[29]|7(?:[017-9]|6[6-8]))|49|6(?:[0-24]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:223|8699)[014-9]|(?:48|829(?:2|66)|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]"],"0$1"],["(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["[14]|[29][2-9]|5[3-9]|7[2-4679]|8(?:[246-9]|3[3-8]|5[2-9])","[14]|[29][2-9]|5[3-9]|7[2-4679]|8(?:[246-9]|3(?:[3-6][2-9]|7|8[2-5])|5[2-9])"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["800"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[2579]|80"],"0$1"]],"0"],KE:["254","000","(?:[17]\\d\\d|900)\\d{6}|(?:2|80)0\\d{6,7}|[4-6]\\d{6,8}",[7,8,9,10],[["(\\d{2})(\\d{5,7})","$1 $2",["[24-6]"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[17]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0"],KG:["996","00","8\\d{9}|(?:[235-8]\\d|99)\\d{7}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["3(?:1[346]|[24-79])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235-79]|88"],"0$1"],["(\\d{3})(\\d{3})(\\d)(\\d{2,3})","$1 $2 $3 $4",["8"],"0$1"]],"0"],KH:["855","00[14-9]","1\\d{9}|[1-9]\\d{7,8}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],KI:["686","00","(?:[37]\\d|6[0-79])\\d{6}|(?:[2-48]\\d|50)\\d{3}",[5,8],0,"0"],KM:["269","00","[3478]\\d{6}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[3478]"]]]],KN:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-7]\\d{6})$","869$1",0,"869"],KP:["850","00|99","85\\d{6}|(?:19\\d|2)\\d{7}",[8,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"]],"0"],KR:["82","00(?:[125689]|3(?:[46]5|91)|7(?:00|27|3|55|6[126]))","00[1-9]\\d{8,11}|(?:[12]|5\\d{3})\\d{7}|[13-6]\\d{9}|(?:[1-6]\\d|80)\\d{7}|[3-6]\\d{4,5}|(?:00|7)0\\d{8}",[5,6,8,9,10,11,12,13,14],[["(\\d{2})(\\d{3,4})","$1-$2",["(?:3[1-3]|[46][1-4]|5[1-5])1"],"0$1"],["(\\d{4})(\\d{4})","$1-$2",["1"]],["(\\d)(\\d{3,4})(\\d{4})","$1-$2-$3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60|8"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1-$2-$3",["[1346]|5[1-5]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{2})(\\d{5})(\\d{4})","$1-$2-$3",["5"],"0$1"]],"0",0,"0(8(?:[1-46-8]|5\\d\\d))?"],KW:["965","00","(?:18|[2569]\\d\\d)\\d{5}",[7,8],[["(\\d{4})(\\d{3,4})","$1 $2",["[169]|2(?:[235]|4[1-35-9])|52"]],["(\\d{3})(\\d{5})","$1 $2",["[25]"]]]],KY:["1","011","(?:345|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-9]\\d{6})$","345$1",0,"345"],KZ:["7","810","33622\\d{5}|(?:7\\d|80)\\d{8}",[10],0,"8",0,0,0,0,"33|7",0,"8~10"],LA:["856","00","(?:2\\d|3)\\d{8}|(?:[235-8]\\d|41)\\d{6}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2[13]|3[14]|[4-8]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["3"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["2"],"0$1"]],"0"],LB:["961","00","[7-9]\\d{7}|[13-9]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[13-69]|7(?:[2-57]|62|8[0-7]|9[04-9])|8[02-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[7-9]"]]],"0"],LC:["1","011","(?:[58]\\d\\d|758|900)\\d{7}",[10],0,"1",0,"1|([2-7]\\d{6})$","758$1",0,"758"],LI:["423","00","90\\d{5}|(?:[2378]|6\\d\\d)\\d{6}",[7,9],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[237-9]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["69"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]],"0",0,"0|(1001)"],LK:["94","00","(?:[1-7]\\d|[89]1)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[1-689]"],"0$1"]],"0"],LR:["231","00","(?:2|33|5\\d|77|88)\\d{7}|[45]\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[45]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3578]"],"0$1"]],"0"],LS:["266","00","(?:[256]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2568]"]]]],LT:["370","00","(?:[3469]\\d|52|[78]0)\\d{6}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["52[0-79]"],"(8-$1)",1],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[7-9]"],"8 $1",1],["(\\d{2})(\\d{6})","$1 $2",["37|4(?:[15]|6[1-8])"],"(8-$1)",1],["(\\d{3})(\\d{5})","$1 $2",["[3-6]"],"(8-$1)",1]],"8",0,"[08]"],LU:["352","00","35[013-9]\\d{4,8}|6\\d{8}|35\\d{2,4}|(?:[2457-9]\\d|3[0-46-9])\\d{2,9}",[4,5,6,7,8,9,10,11],[["(\\d{2})(\\d{3})","$1 $2",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["20[2-689]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4",["2(?:[0367]|4[3-8])"]],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["80[01]|90[015]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["20"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4 $5",["2(?:[0367]|4[3-8])"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,5})","$1 $2 $3 $4",["[3-57]|8[13-9]|9(?:0[89]|[2-579])|(?:2|80)[2-9]"]]],0,0,"(15(?:0[06]|1[12]|[35]5|4[04]|6[26]|77|88|99)\\d)"],LV:["371","00","(?:[268]\\d|90)\\d{6}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[269]|8[01]"]]]],LY:["218","00","[2-9]\\d{8}",[9],[["(\\d{2})(\\d{7})","$1-$2",["[2-9]"],"0$1"]],"0"],MA:["212","00","[5-8]\\d{8}",[9],[["(\\d{5})(\\d{4})","$1-$2",["5(?:29|38)","5(?:29|38)[89]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5[45]"],"0$1"],["(\\d{4})(\\d{5})","$1-$2",["5(?:2[2-489]|3[5-9]|9)|892","5(?:2(?:[2-49]|8[235-9])|3[5-9]|9)|892"],"0$1"],["(\\d{2})(\\d{7})","$1-$2",["8"],"0$1"],["(\\d{3})(\\d{6})","$1-$2",["[5-7]"],"0$1"]],"0",0,0,0,0,0,[["5(?:29(?:[189]0|29)|38[89]0)\\d{4}|5(?:2(?:[015-7]\\d|2[02-9]|3[0-578]|4[02-46-8]|8[0235-7]|90)|3(?:[0-47]\\d|5[02-9]|6[02-8]|80|9[3-9])|(?:4[067]|5[03])\\d)\\d{5}"],["(?:6(?:[0-79]\\d|8[0-247-9])|7(?:0[016-8]|6[1267]|7[0-27]))\\d{6}"],["80\\d{7}"],["89\\d{7}"],0,0,0,0,["592(?:4[0-2]|93)\\d{4}"]]],MC:["377","00","870\\d{5}|(?:[349]|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["4"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[39]"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["6"],"0$1"]],"0"],MD:["373","00","(?:[235-7]\\d|[89]0)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["22|3"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[25-7]"],"0$1"]],"0"],ME:["382","00","(?:20|[3-79]\\d)\\d{6}|80\\d{6,7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"0$1"]],"0"],MF:["590","00","(?:590|69\\d|976)\\d{6}",[9],0,"0",0,0,0,0,0,[["590(?:0[079]|[14]3|[27][79]|30|5[0-268]|87)\\d{4}"],["69(?:0\\d\\d|1(?:2[29]|3[0-5]))\\d{4}"],0,0,0,0,0,0,["976[01]\\d{5}"]]],MG:["261","00","[23]\\d{8}",[9],[["(\\d{2})(\\d{2})(\\d{3})(\\d{2})","$1 $2 $3 $4",["[23]"],"0$1"]],"0",0,"0|([24-9]\\d{6})$","20$1"],MH:["692","011","329\\d{4}|(?:[256]\\d|45)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1-$2",["[2-6]"]]],"1"],MK:["389","00","[2-578]\\d{7}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[347]"],"0$1"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["[58]"],"0$1"]],"0"],ML:["223","00","[24-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-9]"]]]],MM:["95","00","1\\d{5,7}|95\\d{6}|(?:[4-7]|9[0-46-9])\\d{6,8}|(?:2|8\\d)\\d{5,8}",[6,7,8,9,10],[["(\\d)(\\d{2})(\\d{3})","$1 $2 $3",["16|2"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["[45]|6(?:0[23]|[1-689]|7[235-7])|7(?:[0-4]|5[2-7])|8[1-6]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[4-7]|8[1-35]"],"0$1"],["(\\d)(\\d{3})(\\d{4,6})","$1 $2 $3",["9(?:2[0-4]|[35-9]|4[137-9])"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["92"],"0$1"],["(\\d)(\\d{5})(\\d{4})","$1 $2 $3",["9"],"0$1"]],"0"],MN:["976","001","[12]\\d{7,9}|[57-9]\\d{7}",[8,9,10],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[12]1"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[57-9]"]],["(\\d{3})(\\d{5,6})","$1 $2",["[12]2[1-3]"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["[12](?:27|3[2-8]|4[2-68]|5[1-4689])","[12](?:27|3[2-8]|4[2-68]|5[1-4689])[0-3]"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["[12]"],"0$1"]],"0"],MO:["853","00","(?:28|[68]\\d)\\d{6}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[268]"]]]],MP:["1","011","[58]\\d{9}|(?:67|90)0\\d{7}",[10],0,"1",0,"1|([2-9]\\d{6})$","670$1",0,"670"],MQ:["596","00","69\\d{7}|(?:59|97)6\\d{6}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"]],"0"],MR:["222","00","(?:[2-4]\\d\\d|800)\\d{5}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-48]"]]]],MS:["1","011","66449\\d{5}|(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|(4\\d{6})$","664$1",0,"664"],MT:["356","00","3550\\d{4}|(?:[2579]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2357-9]"]]]],MU:["230","0(?:0|[24-7]0|3[03])","(?:[2-468]|5\\d)\\d{6}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[2-46]|8[013]"]],["(\\d{4})(\\d{4})","$1 $2",["5"]]],0,0,0,0,0,0,0,"020"],MV:["960","0(?:0|19)","(?:800|9[0-57-9]\\d)\\d{7}|[34679]\\d{6}",[7,10],[["(\\d{3})(\\d{4})","$1-$2",["[3467]|9[13-9]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"]]],0,0,0,0,0,0,0,"00"],MW:["265","00","1\\d{6}(?:\\d{2})?|(?:[23]1|77|88|99)\\d{7}",[7,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["1[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["3"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[17-9]"],"0$1"]],"0"],MX:["52","0[09]","(?:1(?:[01467]\\d|[2359][1-9]|8[1-79])|[2-9]\\d)\\d{8}",[10,11],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["33|5[56]|81"],0,1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2-9]"],0,1],["(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 $3 $4",["1(?:33|5[56]|81)"],0,1],["(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 $3 $4",["1"],0,1]],"01",0,"0(?:[12]|4[45])|1",0,0,0,0,"00"],MY:["60","00","1\\d{8,9}|(?:3\\d|[4-9])\\d{7}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1-$2 $3",["[4-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1-$2 $3",["1(?:[02469]|[37][2-9]|8[1-9])|8"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2 $3",["3"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3-$4",["1[36-8]"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2 $3",["15"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2 $3",["1"],"0$1"]],"0"],MZ:["258","00","(?:2|8\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2|8[2-7]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],NA:["264","00","[68]\\d{7,8}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["87"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],NC:["687","00","[2-57-9]\\d{5}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1.$2.$3",["[2-57-9]"]]]],NE:["227","00","[0289]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["08"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[089]|2[01]"]]]],NF:["672","00","[13]\\d{5}",[6],[["(\\d{2})(\\d{4})","$1 $2",["1"]],["(\\d)(\\d{5})","$1 $2",["3"]]],0,0,"([0-258]\\d{4})$","3$1"],NG:["234","009","(?:[124-7]|9\\d{3})\\d{6}|[1-9]\\d{7}|[78]\\d{9,13}",[7,8,10,11,12,13,14],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["78"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]|9(?:0[3-9]|[1-9])"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[3-7]|8[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[7-9]"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["[78]"],"0$1"],["(\\d{3})(\\d{5})(\\d{5,6})","$1 $2 $3",["[78]"],"0$1"]],"0"],NI:["505","00","(?:1800|[25-8]\\d{3})\\d{4}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[125-8]"]]]],NL:["31","00","(?:[124-7]\\d\\d|3(?:[02-9]\\d|1[0-8]))\\d{6}|[89]\\d{6,9}|1\\d{4,5}",[5,6,7,8,9,10],[["(\\d{3})(\\d{4,7})","$1 $2",["[89]0"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["66"],"0$1"],["(\\d)(\\d{8})","$1 $2",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-57-9]"],"0$1"]],"0"],NO:["47","00","(?:0|[2-9]\\d{3})\\d{4}",[5,8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[489]|5[89]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[235-7]"]]],0,0,0,0,0,"[02-689]|7[0-8]"],NP:["977","00","9\\d{9}|[1-9]\\d{7}",[8,10],[["(\\d)(\\d{7})","$1-$2",["1[2-6]"],"0$1"],["(\\d{2})(\\d{6})","$1-$2",["[1-8]|9(?:[1-579]|6[2-6])"],"0$1"],["(\\d{3})(\\d{7})","$1-$2",["9"]]],"0"],NR:["674","00","(?:444|55\\d|888)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[458]"]]]],NU:["683","00","(?:[47]|888\\d)\\d{3}",[4,7],[["(\\d{3})(\\d{4})","$1 $2",["8"]]]],NZ:["64","0(?:0|161)","2\\d{7,9}|(?:[34]\\d|6[0-35-9])\\d{6}|(?:508|[79]\\d)\\d{6,7}|8\\d{4,9}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,8})","$1 $2",["83"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[89]0"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1-$2 $3",["24|[346]|7[2-57-9]|9[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:10|74)|[59]|80"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["2[028]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,5})","$1 $2 $3",["2(?:[169]|7[0-35-9])|7|86"],"0$1"]],"0",0,0,0,0,0,0,"00"],OM:["968","00","(?:[279]\\d{3}|500)\\d{4}|8007\\d{4,5}",[7,8,9],[["(\\d{3})(\\d{4,6})","$1 $2",["[58]"]],["(\\d{2})(\\d{6})","$1 $2",["2"]],["(\\d{4})(\\d{4})","$1 $2",["[79]"]]]],PA:["507","00","(?:[1-57-9]|6\\d)\\d{6}",[7,8],[["(\\d{3})(\\d{4})","$1-$2",["[1-57-9]"]],["(\\d{4})(\\d{4})","$1-$2",["6"]]]],PE:["51","19(?:1[124]|77|90)00","(?:[14-8]|9\\d)\\d{7}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["80"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["1"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[4-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"]]],"0",0,0,0,0,0,0,0," Anexo "],PF:["689","00","[48]\\d{7}|4\\d{5}",[6,8],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["44"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[48]"]]]],PG:["675","00|140[1-3]","(?:180|[78]\\d{3})\\d{4}|(?:[2-589]\\d|64)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["18|[2-69]|85"]],["(\\d{4})(\\d{4})","$1 $2",["[78]"]]],0,0,0,0,0,0,0,"00"],PH:["63","00","1800\\d{7,9}|(?:2|[89]\\d{4})\\d{5}|[2-8]\\d{8}|[28]\\d{7}",[6,8,9,10,11,12,13],[["(\\d)(\\d{5})","$1 $2",["2"],"(0$1)"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"(0$1)"],["(\\d{4})(\\d{4,6})","$1 $2",["3(?:23|39|46)|4(?:2[3-6]|[35]9|4[26]|76)|544|88[245]|(?:52|64|86)2","3(?:230|397|461)|4(?:2(?:35|[46]4|51)|396|4(?:22|63)|59[347]|76[15])|5(?:221|446)|642[23]|8(?:622|8(?:[24]2|5[13]))"],"(0$1)"],["(\\d{5})(\\d{4})","$1 $2",["346|4(?:27|9[35])|883","3469|4(?:279|9(?:30|56))|8834"],"(0$1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|8[2-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{4})(\\d{1,2})(\\d{3})(\\d{4})","$1 $2 $3 $4",["1"]]],"0"],PK:["92","00","122\\d{6}|[24-8]\\d{10,11}|9(?:[013-9]\\d{8,10}|2(?:[01]\\d\\d|2(?:[025-8]\\d|1[01]))\\d{7})|(?:[2-8]\\d{3}|92(?:[0-7]\\d|8[1-9]))\\d{6}|[24-9]\\d{8}|[89]\\d{7}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["[89]0"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["1"]],["(\\d{2})(\\d{7,8})","$1 $2",["(?:2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]"],"(0$1)"],["(\\d{3})(\\d{6,7})","$1 $2",["2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8])","9(?:2[3-8]|98)|(?:2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:22|3[27-9]|4[2-6]|6[3569]|9[25-7]))[2-9]"],"(0$1)"],["(\\d{5})(\\d{5})","$1 $2",["58"],"(0$1)"],["(\\d{3})(\\d{7})","$1 $2",["3"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[24-9]"],"(0$1)"]],"0"],PL:["48","00","[1-57-9]\\d{6}(?:\\d{2})?|6\\d{5,8}",[6,7,8,9],[["(\\d{5})","$1",["19"]],["(\\d{3})(\\d{3})","$1 $2",["11|64"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])1","(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])19"]],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["64"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["39|45|5[0137]|6[0469]|7[02389]|8[08]"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[2-8]|[2-8]|9[145]"]]]],PM:["508","00","[45]\\d{5}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[45]"],"0$1"]],"0"],PR:["1","011","(?:[589]\\d\\d|787)\\d{7}",[10],0,"1",0,0,0,0,"787|939"],PS:["970","00","[2489]2\\d{6}|(?:1\\d|5)\\d{8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2489]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["5"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],PT:["351","00","(?:[26-9]\\d|30)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["2[12]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[236-9]"]]]],PW:["680","01[12]","(?:[24-8]\\d\\d|345|900)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],PY:["595","00","59\\d{4,6}|(?:[2-46-9]\\d|5[0-8])\\d{4,7}",[6,7,8,9],[["(\\d{3})(\\d{3,6})","$1 $2",["[2-9]0"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36]"],"(0$1)"],["(\\d{3})(\\d{4,5})","$1 $2",["2[279]|3[13-5]|4[359]|5|6[347]|7[46-8]|85"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["87"]],["(\\d{3})(\\d{6})","$1 $2",["9"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]"],"0$1"]],"0"],QA:["974","00","[2-7]\\d{7}|(?:2\\d\\d|800)\\d{4}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["2[126]|8"]],["(\\d{4})(\\d{4})","$1 $2",["[2-7]"]]]],RE:["262","00","9769\\d{5}|(?:26|[68]\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2689]"],"0$1"]],"0",0,0,0,0,"26[23]|69|[89]"],RO:["40","00","(?:[237]\\d|[89]0)\\d{7}|[23]\\d{5}",[6,9],[["(\\d{3})(\\d{3})","$1 $2",["2[3-6]","2[3-6]\\d9"],"0$1"],["(\\d{2})(\\d{4})","$1 $2",["219|31"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[23]1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[237-9]"],"0$1"]],"0",0,0,0,0,0,0,0," int "],RS:["381","00","38[02-9]\\d{6,9}|6\\d{7,9}|90\\d{4,8}|38\\d{5,6}|(?:7\\d\\d|800)\\d{3,9}|(?:[12]\\d|3[0-79])\\d{5,10}",[6,7,8,9,10,11,12],[["(\\d{3})(\\d{3,9})","$1 $2",["(?:2[389]|39)0|[7-9]"],"0$1"],["(\\d{2})(\\d{5,10})","$1 $2",["[1-36]"],"0$1"]],"0"],RU:["7","810","[347-9]\\d{9}",[10],[["(\\d{4})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-8]|2[1-9])","7(?:1(?:[0-6]2|7|8[27])|2(?:1[23]|[2-9]2))","7(?:1(?:[0-6]2|7|8[27])|2(?:13[03-69]|62[013-9]))|72[1-57-9]2"],"8 ($1)",1],["(\\d{5})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-68]|2[1-9])","7(?:1(?:[06][3-6]|[18]|2[35]|[3-5][3-5])|2(?:[13][3-5]|[24-689]|7[457]))","7(?:1(?:0(?:[356]|4[023])|[18]|2(?:3[013-9]|5)|3[45]|43[013-79]|5(?:3[1-8]|4[1-7]|5)|6(?:3[0-35-9]|[4-6]))|2(?:1(?:3[178]|[45])|[24-689]|3[35]|7[457]))|7(?:14|23)4[0-8]|71(?:33|45)[1-79]"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[3489]"],"8 ($1)",1]],"8",0,0,0,0,"3[04-689]|[489]",0,"8~10"],RW:["250","00","(?:06|[27]\\d\\d|[89]00)\\d{6}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[7-9]"],"0$1"]],"0"],SA:["966","00","92\\d{7}|(?:[15]|8\\d)\\d{8}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["9"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["81"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]],"0"],SB:["677","0[01]","(?:[1-6]|[7-9]\\d\\d)\\d{4}",[5,7],[["(\\d{2})(\\d{5})","$1 $2",["7|8[4-9]|9(?:[1-8]|9[0-8])"]]]],SC:["248","010|0[0-2]","8000\\d{3}|(?:[249]\\d|64)\\d{5}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[246]"]]],0,0,0,0,0,0,0,"00"],SD:["249","00","[19]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[19]"],"0$1"]],"0"],SE:["46","00","(?:[26]\\d\\d|9)\\d{9}|[1-9]\\d{8}|[1-689]\\d{7}|[1-4689]\\d{6}|2\\d{5}",[6,7,8,9,10],[["(\\d{2})(\\d{2,3})(\\d{2})","$1-$2 $3",["20"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{4})","$1-$2",["9(?:00|39|44)"],"0$1",0,"$1 $2"],["(\\d{2})(\\d{3})(\\d{2})","$1-$2 $3",["[12][136]|3[356]|4[0246]|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3"],["(\\d)(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2,3})(\\d{2})","$1-$2 $3",["1[2457]|2(?:[247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6(?:[125689]|4[02-57]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{2,3})(\\d{3})","$1-$2 $3",["9(?:00|39|44)"],"0$1",0,"$1 $2 $3"],["(\\d{2})(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["1[13689]|2[0136]|3[1356]|4[0246]|54|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3 $4"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["10|7"],"0$1",0,"$1 $2 $3 $4"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1-$2 $3 $4",["[13-5]|2(?:[247-9]|5[0138])|6(?:[124-689]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{3})","$1-$2 $3 $4",["9"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4 $5",["[26]"],"0$1",0,"$1 $2 $3 $4 $5"]],"0"],SG:["65","0[0-3]\\d","(?:(?:1\\d|8)\\d\\d|7000)\\d{7}|[3689]\\d{7}",[8,10,11],[["(\\d{4})(\\d{4})","$1 $2",["[369]|8[1-9]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]],["(\\d{4})(\\d{4})(\\d{3})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],SH:["290","00","(?:[256]\\d|8)\\d{3}",[4,5],0,0,0,0,0,0,"[256]"],SI:["386","00|10(?:22|66|88|99)","[1-7]\\d{7}|8\\d{4,7}|90\\d{4,6}",[5,6,7,8],[["(\\d{2})(\\d{3,6})","$1 $2",["8[09]|9"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["59|8"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37][01]|4[0139]|51|6"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-57]"],"(0$1)"]],"0",0,0,0,0,0,0,"00"],SJ:["47","00","0\\d{4}|(?:[4589]\\d|79)\\d{6}",[5,8],0,0,0,0,0,0,"79"],SK:["421","00","[2-689]\\d{8}|[2-59]\\d{6}|[2-5]\\d{5}",[6,7,9],[["(\\d)(\\d{2})(\\d{3,4})","$1 $2 $3",["21"],"0$1"],["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["[3-5][1-8]1","[3-5][1-8]1[67]"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1/$2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[689]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1/$2 $3 $4",["[3-5]"],"0$1"]],"0"],SL:["232","00","(?:[2378]\\d|99)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[237-9]"],"(0$1)"]],"0"],SM:["378","00","(?:0549|[5-7]\\d)\\d{6}",[8,10],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]"]],["(\\d{4})(\\d{6})","$1 $2",["0"]]],0,0,"([89]\\d{5})$","0549$1"],SN:["221","00","(?:[378]\\d{4}|93330)\\d{4}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[379]"]]]],SO:["252","00","[346-9]\\d{8}|[12679]\\d{7}|(?:[1-4]\\d|59)\\d{5}|[1348]\\d{5}",[6,7,8,9],[["(\\d{2})(\\d{4})","$1 $2",["8[125]"]],["(\\d{6})","$1",["[134]"]],["(\\d)(\\d{6})","$1 $2",["1|2[0-79]|3[0-46-8]|4[0-7]|59"]],["(\\d)(\\d{7})","$1 $2",["24|[67]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[348]|64|79[0-8]|90"]],["(\\d{2})(\\d{5,7})","$1 $2",["1|28|6[1-35-9]|799|9[2-9]"]]],"0"],SR:["597","00","(?:[2-5]|68|[78]\\d)\\d{5}",[6,7],[["(\\d{2})(\\d{2})(\\d{2})","$1-$2-$3",["56"]],["(\\d{3})(\\d{3})","$1-$2",["[2-5]"]],["(\\d{3})(\\d{4})","$1-$2",["[6-8]"]]]],SS:["211","00","[19]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[19]"],"0$1"]],"0"],ST:["239","00","(?:22|9\\d)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[29]"]]]],SV:["503","00","[267]\\d{7}|[89]00\\d{4}(?:\\d{4})?",[7,8,11],[["(\\d{3})(\\d{4})","$1 $2",["[89]"]],["(\\d{4})(\\d{4})","$1 $2",["[267]"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[89]"]]]],SX:["1","011","7215\\d{6}|(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|(5\\d{6})$","721$1",0,"721"],SY:["963","00","[1-39]\\d{8}|[1-5]\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-5]"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1",1]],"0"],SZ:["268","00","0800\\d{4}|(?:[237]\\d|900)\\d{6}",[8,9],[["(\\d{4})(\\d{4})","$1 $2",["[0237]"]],["(\\d{5})(\\d{4})","$1 $2",["9"]]]],TA:["290","00","8\\d{3}",[4],0,0,0,0,0,0,"8"],TC:["1","011","(?:[58]\\d\\d|649|900)\\d{7}",[10],0,"1",0,"1|([2-479]\\d{6})$","649$1",0,"649"],TD:["235","00|16","(?:22|[69]\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2679]"]]],0,0,0,0,0,0,0,"00"],TG:["228","00","[279]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[279]"]]]],TH:["66","00[1-9]","1\\d{8,9}|(?:[2-57]|[689]\\d)\\d{7}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["14|[3-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],TJ:["992","810","(?:00|11|[3-579]\\d|88)\\d{7}",[9],[["(\\d{6})(\\d)(\\d{2})","$1 $2 $3",["331","3317"],0,1],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[34]7|91[78]"],0,1],["(\\d{4})(\\d)(\\d{4})","$1 $2 $3",["3"],0,1],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[0457-9]|11"],0,1]],"8",0,0,0,0,0,0,"8~10"],TK:["690","00","[2-47]\\d{3,6}",[4,5,6,7]],TL:["670","00","7\\d{7}|(?:[2-47]\\d|[89]0)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[2-489]|70"]],["(\\d{4})(\\d{4})","$1 $2",["7"]]]],TM:["993","810","[1-6]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["12"],"(8 $1)"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-5]"],"(8 $1)"],["(\\d{2})(\\d{6})","$1 $2",["6"],"8 $1"]],"8",0,0,0,0,0,0,"8~10"],TN:["216","00","[2-57-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-57-9]"]]]],TO:["676","00","(?:0800|[5-8]\\d{3})\\d{3}|[2-8]\\d{4}",[5,7],[["(\\d{2})(\\d{3})","$1-$2",["[2-4]|50|6[09]|7[0-24-69]|8[05]"]],["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{3})(\\d{4})","$1 $2",["[5-8]"]]]],TR:["90","00","(?:4|8\\d{5})\\d{6}|(?:[2-58]\\d\\d|900)\\d{7}",[7,10,12],[["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["512|8[0589]|90"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5(?:[0-59]|61)","5(?:[0-59]|616)","5(?:[0-59]|6161)"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24][1-8]|3[1-9]"],"(0$1)",1],["(\\d{3})(\\d{3})(\\d{6})","$1 $2 $3",["80"],"0$1",1]],"0"],TT:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-46-8]\\d{6})$","868$1",0,"868"],TV:["688","00","(?:2|7\\d\\d|90)\\d{4}",[5,6,7]],TW:["886","0(?:0[25-79]|19)","[2-689]\\d{8}|7\\d{9,10}|[2-8]\\d{7}|2\\d{6}",[7,8,9,10,11],[["(\\d{2})(\\d)(\\d{4})","$1 $2 $3",["202"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[258]0"],"0$1"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["[23568]|4(?:0[02-48]|[1-47-9])|7[1-9]","[23568]|4(?:0[2-48]|[1-47-9])|(?:400|7)[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,5})","$1 $2 $3",["7"],"0$1"]],"0",0,0,0,0,0,0,0,"#"],TZ:["255","00[056]","(?:[26-8]\\d|41|90)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[24]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[67]"],"0$1"]],"0"],UA:["380","00","[89]\\d{9}|[3-9]\\d{8}",[9,10],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6[12][29]|(?:3[1-8]|4[136-8]|5[12457]|6[49])2|(?:56|65)[24]","6[12][29]|(?:35|4[1378]|5[12457]|6[49])2|(?:56|65)[24]|(?:3[1-46-8]|46)2[013-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["4[45][0-5]|5(?:0|6[37])|6(?:[12][018]|[36-8])|7|89|9[1-9]|(?:48|57)[0137-9]","4[45][0-5]|5(?:0|6(?:3[14-7]|7))|6(?:[12][018]|[36-8])|7|89|9[1-9]|(?:48|57)[0137-9]"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["[3-6]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0",0,0,0,0,0,0,"0~0"],UG:["256","00[057]","800\\d{6}|(?:[29]0|[347]\\d)\\d{7}",[9],[["(\\d{4})(\\d{5})","$1 $2",["202","2024"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[27-9]|4(?:6[45]|[7-9])"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[34]"],"0$1"]],"0"],US:["1","011","[2-9]\\d{9}",[10],[["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",["[2-9]"],0,1,"$1-$2-$3"]],"1",0,0,0,0,0,[["(?:2(?:0[1-35-9]|1[02-9]|2[03-589]|3[149]|4[08]|5[1-46]|6[0279]|7[0269]|8[13])|3(?:0[1-57-9]|1[02-9]|2[0135]|3[0-24679]|4[167]|5[12]|6[014]|8[056])|4(?:0[124-9]|1[02-579]|2[3-5]|3[0245]|4[0235]|58|6[39]|7[0589]|8[04])|5(?:0[1-57-9]|1[0235-8]|20|3[0149]|4[01]|5[19]|6[1-47]|7[013-5]|8[056])|6(?:0[1-35-9]|1[024-9]|2[03689]|[34][016]|5[0179]|6[0-279]|78|8[0-29])|7(?:0[1-46-8]|1[2-9]|2[04-7]|3[1247]|4[037]|5[47]|6[02359]|7[02-59]|8[156])|8(?:0[1-68]|1[02-8]|2[08]|3[0-28]|4[3578]|5[046-9]|6[02-5]|7[028])|9(?:0[1346-9]|1[02-9]|2[0589]|3[0146-8]|4[0179]|5[12469]|7[0-389]|8[04-69]))[2-9]\\d{6}"],[""],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}"],0,["710[2-9]\\d{6}"]]],UY:["598","0(?:0|1[3-9]\\d)","(?:[249]\\d\\d|80)\\d{5}|9\\d{6}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["8|90"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[24]"]]],"0",0,0,0,0,0,0,"00"," int. "],UZ:["998","810","[679]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[679]"],"8 $1"]],"8",0,0,0,0,0,0,"8~10"],VA:["39","00","0\\d{5,10}|3[0-8]\\d{7,10}|55\\d{8}|8\\d{5}(?:\\d{2,4})?|(?:1\\d|39)\\d{7,8}",[6,7,8,9,10,11],0,0,0,0,0,0,"06698"],VC:["1","011","(?:[58]\\d\\d|784|900)\\d{7}",[10],0,"1",0,"1|([2-7]\\d{6})$","784$1",0,"784"],VE:["58","00","[89]00\\d{7}|(?:[24]\\d|50)\\d{8}",[10],[["(\\d{3})(\\d{7})","$1-$2",["[24589]"],"0$1"]],"0"],VG:["1","011","(?:284|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-578]\\d{6})$","284$1",0,"284"],VI:["1","011","[58]\\d{9}|(?:34|90)0\\d{7}",[10],0,"1",0,"1|([2-9]\\d{6})$","340$1",0,"340"],VN:["84","00","[12]\\d{9}|[135-9]\\d{8}|[16]\\d{7}|[16-8]\\d{6}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["80"],"0$1",1],["(\\d{4})(\\d{4,6})","$1 $2",["1"],0,1],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[69]"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[3578]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["2[48]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["2"],"0$1",1]],"0"],VU:["678","00","(?:[23]\\d|[48]8)\\d{3}|(?:[57]\\d|90)\\d{5}",[5,7],[["(\\d{3})(\\d{4})","$1 $2",["[579]"]]]],WF:["681","00","(?:[45]0|68|72|8\\d)\\d{4}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[4-8]"]]]],WS:["685","0","[2-6]\\d{4}|8\\d{5}(?:\\d{4})?|[78]\\d{6}",[5,6,7,10],[["(\\d{5})","$1",["[2-6]"]],["(\\d{3})(\\d{3,7})","$1 $2",["8"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],XK:["383","00","[23]\\d{7,8}|(?:4\\d\\d|[89]00)\\d{5}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[23]"],"0$1"]],"0"],YE:["967","00","(?:1|7\\d)\\d{7}|[1-7]\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-6]|7[24-68]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"],"0$1"]],"0"],YT:["262","00","80\\d{7}|(?:26|63)9\\d{6}",[9],0,"0",0,0,0,0,"269|63"],ZA:["27","00","[1-9]\\d{8}|8\\d{4,7}",[5,6,7,8,9],[["(\\d{2})(\\d{3,4})","$1 $2",["8[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["8[1-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["860"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-9]"],"0$1"]],"0"],ZM:["260","00","(?:63|80)0\\d{6}|(?:21|[79]\\d)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[28]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[79]"],"0$1"]],"0"],ZW:["263","00","2(?:[0-57-9]\\d{6,8}|6[0-24-9]\\d{6,7})|[38]\\d{9}|[35-8]\\d{8}|[3-6]\\d{7}|[1-689]\\d{6}|[1-3569]\\d{5}|[1356]\\d{4}",[5,6,7,8,9,10],[["(\\d{3})(\\d{3,5})","$1 $2",["2(?:0[45]|2[278]|[49]8)|3(?:[09]8|17)|6(?:[29]8|37|75)|[23][78]|(?:33|5[15]|6[68])[78]"],"0$1"],["(\\d)(\\d{3})(\\d{2,4})","$1 $2 $3",["[49]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["80"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["24|8[13-59]|(?:2[05-79]|39|5[45]|6[15-8])2","2(?:02[014]|4|[56]20|[79]2)|392|5(?:42|525)|6(?:[16-8]21|52[013])|8[13-59]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:1[39]|2[0157]|[378]|[56][14])|3(?:12|29)","2(?:1[39]|2[0157]|[378]|[56][14])|3(?:123|29)"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["1|2(?:0[0-36-9]|12|29|[56])|3(?:1[0-689]|[24-6])|5(?:[0236-9]|1[2-4])|6(?:[013-59]|7[0-46-9])|(?:33|55|6[68])[0-69]|(?:29|3[09]|62)[0-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["29[013-9]|39|54"],"0$1"],["(\\d{4})(\\d{3,5})","$1 $2",["(?:25|54)8","258|5483"],"0$1"]],"0"]},nonGeographic:{800:["800",0,"\\d{8}",[8],[["(\\d{4})(\\d{4})","$1 $2"]],0,0,0,0,0,0,[0,0,["\\d{8}"]]],808:["808",0,"\\d{8}",[8],[["(\\d{4})(\\d{4})","$1 $2"]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,0,["\\d{8}"]]],870:["870",0,"[35-7]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[35-7]"]]],0,0,0,0,0,0,[0,["(?:[356]\\d|7[6-8])\\d{7}"]]],878:["878",0,"10\\d{10}",[12],[["(\\d{2})(\\d{5})(\\d{5})","$1 $2 $3",["1"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["10\\d{10}"]]],881:["881",0,"[67]\\d{8}",[9],[["(\\d)(\\d{3})(\\d{5})","$1 $2 $3",["[67]"]]],0,0,0,0,0,0,[0,["[67]\\d{8}"]]],882:["882",0,"1\\d{6,11}|3\\d{6}(?:\\d{2,5})?",[7,8,9,10,11,12],[["(\\d{2})(\\d{5})","$1 $2",["16|342"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["1"]],["(\\d{2})(\\d{4})(\\d{3})","$1 $2 $3",["3[23]"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["1"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["34[57]"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["34"]],["(\\d{2})(\\d{4,5})(\\d{5})","$1 $2 $3",["[13]"]]],0,0,0,0,0,0,[0,["3(?:37\\d\\d|42)\\d{4}|3(?:2|47|7\\d{3})\\d{7}",[7,9,10,12]],0,0,0,0,0,0,["1(?:3(?:0[0347]|[13][0139]|2[035]|4[013568]|6[0459]|7[06]|8[15-8]|9[0689])\\d{4}|6\\d{5,10})|3(?:45|9\\d{3})\\d{7}"]]],883:["883",0,"51\\d{7}(?:\\d{3})?",[9,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["510"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["510"]],["(\\d{4})(\\d{4})(\\d{4})","$1 $2 $3",["5"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["51[013]0\\d{8}|5100\\d{5}"]]],888:["888",0,"\\d{11}",[11],[["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3"]],0,0,0,0,0,0,[0,0,0,0,0,0,["\\d{11}"]]],979:["979",0,"\\d{9}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3"]],0,0,0,0,0,0,[0,0,0,["\\d{9}"]]]}}},function(e,t,n){"use strict";function r(e,t){for(var n=e.split("."),r=t.split("."),i=0;i<3;i++){var o=Number(n[i]),a=Number(r[i]);if(o>a)return 1;if(a>o)return-1;if(!isNaN(o)&&isNaN(a))return 1;if(isNaN(o)&&!isNaN(a))return-1}return 0}t.a=r},function(e,t,n){"use strict";var r=n(44);n.d(t,"a",function(){return r.b})},function(e,t,n){"use strict";n(257)},function(e,t,n){"use strict";function r(){var e=Object(i.b)(arguments),t=e.text,n=e.options,r=e.metadata;return Object(o.a)(t,n,r)}t.a=r;var i=n(158),o=n(451)},function(e,t,n){"use strict";function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){i(e,t,n[t])})}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t,n){t&&t.defaultCountry&&!Object(l.d)(t.defaultCountry,n)&&(t=r({},t,{defaultCountry:void 0}));try{return Object(a.a)(e,t,n)}catch(e){if(!(e instanceof s.a))throw e}}t.a=o;var a=n(305),s=n(253),l=n(44)},function(e,t,n){"use strict";function r(e,t,n){for(var r=new i.a(e,t,n),o=[];r.hasNext();)o.push(r.next());return o}t.a=r;var i=n(258)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}n.d(t,"a",function(){return s});var a=n(454),s=function(){function e(t){r(this,e),this.cache=new a.a(t)}return o(e,[{key:"getPatternForRegExp",value:function(e){var t=this.cache.get(e);return t||(t=new RegExp("^"+e),this.cache.put(e,t)),t}}]),e}()},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return s});var a=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;o(this,e),this.key=t,this.value=n,this.next=r,this.prev=i},s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;o(this,e),this.size=0,this.limit=t,this.head=null,this.tail=null,this.cache={}}return i(e,[{key:"put",value:function(e,t){if(this.ensureLimit(),this.head){var n=new a(e,t,this.head);this.head.prev=n,this.head=n}else this.head=this.tail=new a(e,t);this.cache[e]=this.head,this.size++}},{key:"get",value:function(e){if(this.cache[e]){var t=this.cache[e].value;return this.remove(e),this.put(e,t),t}console.log("Item not available in cache for key ".concat(e))}},{key:"ensureLimit",value:function(){this.size===this.limit&&this.remove(this.tail.key)}},{key:"remove",value:function(e){var t=this.cache[e];null!==t.prev?t.prev.next=t.next:this.head=t.next,null!==t.next?t.next.prev=t.prev:this.tail=t.prev,delete this.cache[e],this.size--}},{key:"clear",value:function(){this.head=null,this.tail=null,this.size=0,this.cache={}}}]),e}()},function(e,t,n){"use strict";function r(e,t,n){for(var r=0;r<t.length-1;r++){var i=t.charAt(r);if("x"===i||"X"===i){var o=t.charAt(r+1);if("x"===o||"X"===o){if(r++,util.isNumberMatch(e,t.substring(r))!=MatchType.NSN_MATCH)return!1}else if(Object(d.a)(t.substring(r))!==e.ext)return!1}}return!0}function i(e,t){if("FROM_DEFAULT_COUNTRY"!=e.getCountryCodeSource())return!0;var n=util.getRegionCodeForCountryCode(e.getCountryCode()),r=util.getMetadataForRegion(n);if(null==r)return!0;var i=util.getNationalSignificantNumber(e),o=util.chooseFormattingPatternForNumber(r.numberFormats(),i);if(o&&o.getNationalPrefixFormattingRule().length>0){if(o.getNationalPrefixOptionalWhenFormatting())return!0;if(PhoneNumberUtil.formattingRuleHasFirstGroupOnly(o.getNationalPrefixFormattingRule()))return!0;var a=PhoneNumberUtil.normalizeDigitsOnly(e.getRawInput());return util.maybeStripNationalPrefixAndCarrierCode(a,r,null)}return!0}function o(e,t){var n=t.indexOf("/");if(n<0)return!1;var r=t.indexOf("/",n+1);return!(r<0)&&(!(e.getCountryCodeSource()===CountryCodeSource.FROM_NUMBER_WITH_PLUS_SIGN||e.getCountryCodeSource()===CountryCodeSource.FROM_NUMBER_WITHOUT_PLUS_SIGN)||PhoneNumberUtil.normalizeDigitsOnly(t.substring(0,n))!==String(e.getCountryCode())||t.slice(r+1).indexOf("/")>=0)}function a(e,t,n,r,i){var o=normalizeDigits(t,!0),a=s(n,e,null);if(r(n,e,o,a))return!0;var l=MetadataManager.getAlternateFormatsForCountry(e.getCountryCode()),c=util.getNationalSignificantNumber(e);if(l)for(var u=l.numberFormats(),d=Array.isArray(u),f=0,u=d?u:u[Symbol.iterator]();;){var p;if(d){if(f>=u.length)break;p=u[f++]}else{if(f=u.next(),f.done)break;p=f.value}var h=p;if(h.leadingDigitsPatterns().length>0){var g=i.getPatternForRegExp("^"+h.leadingDigitsPatterns()[0]);if(!g.test(c))continue}if(a=s(n,e,h),r(n,e,o,a))return!0}return!1}function s(e,t,n){if(n){var r=util.getNationalSignificantNumber(t);return util.formatNsnUsingPattern(r,n,"RFC3966",e).split("-")}var i=formatNumber(t,"RFC3966",e),o=i.indexOf(";");o<0&&(o=i.length);var a=i.indexOf("-")+1;return i.slice(a,o).split("-")}function l(e,t,n,r){var i=n.split(NON_DIGITS_PATTERN),o=t.hasExtension()?i.length-2:i.length-1;if(1==i.length||i[o].contains(util.getNationalSignificantNumber(t)))return!0;for(var a=r.length-1;a>0&&o>=0;){if(i[o]!==r[a])return!1;a--,o--}return o>=0&&Object(f.a)(i[o],r[0])}function c(e,t,n,r){var i=0;if(t.getCountryCodeSource()!==CountryCodeSource.FROM_DEFAULT_COUNTRY){var o=String(t.getCountryCode());i=n.indexOf(o)+o.length()}for(var a=0;a<r.length;a++){if((i=n.indexOf(r[a],i))<0)return!1;if(i+=r[a].length(),0==a&&i<n.length()){var s=util.getRegionCodeForCountryCode(t.getCountryCode());if(null!=util.getNddPrefixForRegion(s,!0)&&Character.isDigit(n.charAt(i))){var l=util.getNationalSignificantNumber(t);return Object(f.c)(n.slice(i-r[a].length),l)}}}return n.slice(i).contains(t.getExtension())}var u=n(257),d=n(159),f=n(161);t.a={POSSIBLE:function(e,t,n){return!0},VALID:function(e,t,n){return!(!Object(u.a)(e,void 0,n)||!r(e,t.toString(),n))},STRICT_GROUPING:function(e,t,n,s){var l=t.toString();return!(!Object(u.a)(e,void 0,n)||!r(e,l,n)||o(e,l)||!i(e,n))&&a(e,t,n,c,s)},EXACT_GROUPING:function(e,t,n,s){var c=t.toString();return!(!Object(u.a)(e,void 0,n)||!r(e,c,n)||o(e,c)||!i(e,n))&&a(e,t,n,l,s)}}},function(e,t,n){"use strict";function r(e){return Object(i.d)(o,e)}t.a=r;var i=n(161),o=/[\\/] *x/},function(e,t,n){"use strict";function r(e,t,n){if(i.test(e))return!1;if(o.test(e)){var r=n.slice(t+e.length);if(a.test(r))return!1}return!0}t.a=r;var i=/(?:(?:[0-3]?\d\/[01]?\d)|(?:[01]?\d\/[0-3]?\d))\/(?:[12]\d)?\d{2}/,o=/[12]\d{3}[-/]?[01]\d[-/]?[0-3]\d +[0-2]\d$/,a=/^:[0-5]\d/},function(e,t,n){"use strict";function r(e,t,n,r){if(d.test(e)&&!f.test(e)){if("POSSIBLE"!==r){if(t>0&&!c.test(e)){var i=n[t-1];if(Object(a.d)(i)||Object(a.e)(i))return!1}var o=t+e.length;if(o<n.length){var s=n[o];if(Object(a.d)(s)||Object(a.e)(s))return!1}}return!0}}n.d(t,"a",function(){return l}),t.b=r;var i=n(74),o=n(161),a=n(312),s="[^".concat("(\\[（［").concat(")\\]）］","]"),l="[".concat("(\\[（［").concat(i.d,"]"),c=new RegExp("^"+l),u=Object(o.b)(0,3),d=new RegExp("^(?:[(\\[（［])?(?:"+s+"+[)\\]）］])?"+s+"+(?:[(\\[（［]"+s+"+[)\\]）］])"+u+s+"*$"),f=/\d{1,5}-+\d{1,5}\s{0,4}\(\d{1,4}/},function(e,t,n){"use strict";function r(e,t,n,r){var a=Object(o.b)(t,n,r);return Object(i.a)(e,a.options,a.metadata)}t.a=r;var i=n(313),o=n(314)},function(e,t,n){"use strict";function r(e){return new i.a(e).getCountries()}t.a=r;var i=n(44)},function(e,t,n){"use strict";function r(e,t,n){if(t[e])return new i.a(e,t[e],n)}t.a=r;var i=n(160)},function(e,t,n){"use strict";function r(e,t,n){return n||(n=t,t=void 0),new i.a(t,n).input(e)}t.a=r;var i=n(315)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.attachAsrPop=void 0;var i=n(8),o=r(i),a=n(317),s=r(a),l=n(7),c=r(l),u=new c.default("asr"),d=new s.default,f=null,p={},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];d.pause(),this.getCallAsrResult((0,o.default)({callid:f&&f.callid,success:function(e){var t=f&&f.records||[],n=e.record||[];n.length&&(n.forEach(function(e){var n=e.uint32_index;t[n]=e}),this.trigger("asrChange"))},complete:function(){this.isCallingState(void 0,!0)&&d.recount(),t&&t()}},e))},g=function(){var e=f&&f.records||[],t=[];e.forEach(function(e,n){if(e.uint32_index!==n)for(var r=n;r<e.uint32_index;r++){var i=p["r"+(r+1)]||0;i<2&&(t.push(r+1),p["r"+(r+1)]=i+1)}}),t.length&&h.call(this,{index_arr:t})},m=function(e,t){var n=e.result||{},r=t[n.uint32_index],i=!!r;i?(r.str_line_ctx=n.str_line_ctx,r.uint32_status=n.uint32_status):(n.uint32_leg_type=e.uint32_leg_type,r=n,t[n.uint32_index]=r),this.trigger("asrChange",[i,r]),g.call(this),d.recount()},v=function(){var e=this,t=this.getState("asrRecords");if(!f){var n=this.getState("customerName")||this.formatTel(this.getState("tel"));u.$log("start record"),f={callid:this.getState("callid"),direction:this.getState("direction"),customerName:n,records:[]},5===t.length&&t.pop(),t.push(f),this.trigger("asrNewSession",f),d.recount(),this.one("asrPush.asrPop",function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.str_callid===e.getState("callid")&&m.call(e,n,f.records)})}},b=function(){var e=this.getState("asrRecords");this.off("asrPush.asrPop"),d.stop(),u.$log("stop record"),f&&!f.records.length&&(e.pop(),e.length?this.trigger("asrPopOut"):this.hidePage("asrFrame")),f=null,p={}},_=function(){var e=this;this.one("_staffInfoSynced.asrPop",function(t){e.setState("asrRecords",[]),e.getState("withAsr")?(u.$log("asr monitoring on"),e.one("_calling.stateChange.asrPop",function(){v.call(e)}),e.one("_online.stateChange.asrPop",function(t){v.call(e),e.getState("asrAuto")&&e.showPage({name:"asrFrame"})}),e.one("stateChange.asrPop",function(t,n){"postEdit"!==n&&"over"!==n||!f||h.call(e,{index_from:f&&f.records.length||0},function(){b.call(e)})}),e.one("disconnect.asrPop",function(){d.stop()}),d.onTick(function(t){t>=8&&h.call(e,{index_from:f&&f.records.length||0})})):(e.off("_calling.stateChange.asrPop"),e.off("_online.stateChange.asrPop"),e.off("stateChange.asrPop"),e.off("disconnect.asrPop"),d.stop(),e.hidePage("asrFrame"),u.$log("asr monitoring off"))})};t.attachAsrPop=_},function(e,t,n){"use strict";function r(e,t){return e=e||"Y-m-d H:i:s",1==arguments.length?t=new Date:t instanceof Date||(t=new Date(parseInt(t)||0)),e.replace(/\\?([a-z])/gi,function(e,n){return l[e]?l[e].call(l,t):n})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=["January","February","March","April","May","June","July","August","September","October","November","December"],o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a=function(e){return e<10?"0"+e:e},s=function(e,t){return t=t||new Date(e.getFullYear(),0,1),e-t},l={d:function(e){return a(this.j(e))},D:function(e){return this.l(e).substr(0,3)},j:function(e){return e.getDate()},l:function(e){return o[e.getDay()]},N:function(e){return this.w(e)||7},w:function(e){return e.getDay()},z:function(e){return Math.floor(s(e)/864e5)},F:function(e){return i[e.getMonth()]},m:function(e){return a(this.n(e))},n:function(e){return e.getMonth()+1},M:function(e){return this.F(e).substr(0,3)},Y:function(e){return e.getFullYear()},y:function(e){return this.Y(e).toString().slice(-2)},a:function(e){return e.getHours()<12?"am":"pm"},A:function(e){return this.a(e).toUpperCase()},c:function(e){return e.getHours()<12?"上午":"下午"},g:function(e){return e.getHours()%12||12},G:function(e){return e.getHours()},h:function(e){return a(this.g(e))},H:function(e){return a(this.G(e))},i:function(e){return a(e.getMinutes())},s:function(e){return a(e.getSeconds())}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){var e=this,t=function(){d.createMainPage(),!e.getState("isSipbar")&&(0,c.default)(e)};d?d.isPageExist("mainFrame")?d.remove("mainFrame").then(t):t():p=!0}function o(e,t){var n=t._getOptions();d&&(f&&document.body.removeEventListener("click",f),d.destroy()),d=new s.default({container:e,stator:t}),f=d.remove.bind(d),document.body.addEventListener("click",f),t.one("_togglePage.pages",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(d){if(!t.name)return void d.remove();void 0===t.show&&(t.show=!d.isVisible(t.name)),!1===t.show?d.remove(t.name):!0===t.show&&(d.currentPage&&d.remove(d.currentPage),d.createPage(t))}}),t.one("_toggleMainFrame.pages",function(e,t){void 0===t&&(t=!d.isVisible("mainFrame")),d.instances.mainFrame&&d.instances.mainFrame[t?"show":"hide"]()}),n.manualMount&&!p||i.call(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.createMainPage=i,t.default=o;var a=n(466),s=r(a),l=n(316),c=r(l);n(670);var u=n(7),d=(r(u),void 0),f=void 0,p=!1},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(14),o=r(i),a=n(34),s=r(a),l=n(8),c=r(l),u=n(35),d=r(u),f=n(4),p=r(f),h=n(5),g=r(h),m=n(7),v=r(m),b=n(101),_=n(467),y=(0,b.getCreateHooks)(),w=(0,b.getBeforeCreateHooks)(),x=(0,b.getPositionHooks)(),k=new v.default("page"),S=function(){function e(t){(0,p.default)(this,e),this.stator=t.stator,this.instances=(0,d.default)(null),this.currentPage="",this.container=t.container||"#qd_agentbar"}return(0,g.default)(e,[{key:"createMainPage",value:function(){var e=this.container;if("string"==typeof e&&(e=document.querySelector(e)),!e)return void k.$warn("找不到容器");this.offsetParent=e.offsetParent,this.width=e.offsetWidth,this.height=e.offsetHeight,this.createPage({name:"mainFrame",params:e})}},{key:"createPage",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.name,r=t.params,i=t.trigger,o=t.relativePage,a=t.relativeEl;if(!n||this.instances[n]||w[n]&&!1===w[n].call(this,r))return void(this.instances[n]&&this.stator.trigger("_newPage."+n));this.instances[n]="creating";var s=this.stator._getOptions(),l=y[n],u=(0,c.default)(this.stator.getState(),this.stator.env,{format:this.stator.format,mode:s.mode,simple:s.simple,width:this.width,height:this.height,Date:Date}),d=function(){var s=_.PAGES_STICKY.indexOf(n)>-1,l=x[n];if(void 0===a){var d=e.instances[o||"mainFrame"];a=d&&d.el}e.instances[n]=_.PAGES[n].call(e,u,(0,c.default)({params:r,trigger:i,relativeEl:a,container:"mainFrame"===n||s&&"callPanelFrame"!==n&&"portraitFrame"!==n?void 0:e.offsetParent},l?l.call(e,_.POS_CONFIGS[n]):_.POS_CONFIGS[n],t)),s||(e.currentPage=n)};return l?l.call(this,u,r).then(function(e){u.data=e,d()}).catch(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.abort||(d(),k.$warn(e.msg||n+" create hook execute failed"))}):d(),this}},{key:"isPageExist",value:function(e){return e&&this.instances[e]}},{key:"show",value:function(e){e&&this.instances[e]&&this.instances[e].show()}},{key:"hide",value:function(e){var t=this;return e?this.instances[e]&&this.instances[e].hide():this.instances&&(0,s.default)(this.instances).forEach(function(e){"mainFrame"!==e&&t.instances[e]&&t.instances[e].hide()}),this.currentPage="",this}},{key:"remove",value:function(e){var t=this;if(e&&"string"==typeof e){var n=this.instances[e];if(n)return"creating"!==n?n.remove().then(function(){delete t.instances[e],t.stator.trigger("_removePage."+e)}):(delete this.instances[e],this.stator.trigger("_removePage."+e),o.default.resolve())}else this.instances&&(0,s.default)(this.instances).forEach(function(e){-1===_.PAGES_STICKY.indexOf(e)&&t.instances[e]&&t.instances[e].remove().then(function(){delete t.instances[e],t.stator.trigger("_removePage."+e)})});return this.currentPage="",this}},{key:"isVisible",value:function(e){return!(!e||!this.instances[e])&&this.instances[e].isVisible()}},{key:"destroy",value:function(){var e=this;this.instances&&(0,s.default)(this.instances).forEach(function(t){e.instances[t]&&e.instances[t].remove()}),this.offsetParent=null,this.instances=(0,d.default)(null),this.stator=null,this.currentPage=""}}]),e}();t.default=S},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.POS_CONFIGS=t.PAGES_STICKY=t.PAGES=void 0;var i=n(468),o=r(i),a=n(568),s=r(a),l=n(572),c=r(l),u=n(576),d=r(u),f=n(580),p=r(f),h=n(585),g=r(h),m=n(588),v=r(m),b=n(593),_=r(b),y=n(598),w=r(y),x=n(603),k=r(x),S=n(607),C=r(S),T=n(611),E=r(T),I=n(616),A=r(I),R=n(620),O=r(R),L=n(625),P=r(L),M=n(629),$=r(M),N=n(633),D=r(N),F=n(638),q=r(F),U=n(644),B=r(U),j=n(649),V=r(j),H=n(654),Y=r(H),z=n(658),G=r(z),W=n(664),K=r(W),X=n(669),Z=r(X);t.PAGES={mainFrame:o.default,transferFrame:s.default,consultFrame:c.default,menuFrame:d.default,restFrame:p.default,dialFrame:g.default,switchboardFrame:v.default,queueFrame:_.default,historyListFrame:w.default,messageTemplateFrame:k.default,clientAttrFrame:C.default,callInfoFrame:E.default,remarkFrame:O.default,callPanelFrame:A.default,netWorkStateFrame:P.default,detectFrame:$.default,callOnTimeFrame:D.default,scheduleFrame:B.default,customerInfoFrame:q.default,datePickerFrame:V.default,customerOperationsFrame:Y.default,asrFrame:G.default,confirmFrame:K.default,orderPopFrame:Z.default},t.PAGES_STICKY=["mainFrame","remarkFrame","callPanelFrame","detectFrame","callOnTimeFrame","asrFrame","confirmFrame","orderPopFrame"],t.POS_CONFIGS={mainFrame:{position:"static"},menuFrame:{offsetX:0,offsetY:83,align:"left"},restFrame:{offsetX:0,offsetY:77},switchboardFrame:{offsetX:-6,offsetY:43},queueFrame:{offsetX:-7,offsetY:15},historyListFrame:{offsetX:-7,offsetY:11},messageTemplateFrame:{offsetX:0,offsetY:11},clientAttrFrame:{offsetX:0,offsetY:11},callPanelFrame:{offsetX:22,offsetY:11,align:"left"},dialFrame:{offsetX:-2,offsetY:21,align:"right"},consultFrame:{offsetX:-2,offsetY:21,align:"right"},transferFrame:{offsetX:-2,offsetY:21,align:"right"},callInfoFrame:{offsetX:2,offsetY:15},remarkFrame:{offsetX:330,offsetY:107},netWorkStateFrame:{offsetX:0,offsetY:5},detectFrame:{offsetX:0,offsetY:107,align:"left"},callOnTimeFrame:{offsetX:0,offsetY:19},scheduleFrame:{offsetX:-7,offsetY:15},customerInfoFrame:{offsetX:-6,offsetY:15},datePickerFrame:{offsetX:0,offsetY:15},customerOperationsFrame:{offsetX:-175,offsetY:43},asrFrame:{offsetX:290,offsetY:107},confirmFrame:{offsetX:-46,offsetY:275},orderPopFrame:{offsetX:0,offsetY:107,align:"left"}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(18),o=r(i),a=n(261),s=n(24),l=r(s),c=n(59),u=n(319),d=r(u),f=n(317),p=r(f),h=n(168),g=r(h),m=n(7),v=r(m),b=n(318),_=r(b),y=n(472),w=r(y),x=n(477),k=r(x),S=n(478),C=r(S),T=n(479),E=r(T),I=n(26),A=r(I),R=n(27),O=new v.default("userAction"),L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.stator,r=n._getOptions(),i=r.width,s=r.origin||{},u=r.moveable,f=t.params||e.el;e.moveable=u;var h=l.default.call(n||this,{name:"mainFrame",container:f,moveable:u,visible:!1!==r.visible,style:{"min-width":i&&i>=586?i:810,width:i,height:100,left:s.left||0,top:s.top||0,position:u?"absolute":"static"},animateCss:{in:[],out:[]},data:e,script:E.default,cssText:k.default.toString(),html:(0,A.default)(R)+C.default,props:{callTypeCode:c.callTypeCode,operations:d.default,log:O,setInViewPort:function(){return a.setInViewPort},formatTime:function(){return g.default},Timer:function(){return p.default},renderFactory:function(){return new w.default(n)},noticeCustom:function(){return new _.default({evt:n,doc:this.doc,className:"shedule-notice"})},noticeWarning:function(){return new _.default({evt:n,doc:this.doc,className:"warning-notice",isCover:!0})}}});return new o.default(h,t)};t.default=L},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(28),o=r(i),a=n(4),s=r(a),l=n(5),c=r(l),u=n(89),d=r(u),f=n(470),p=function(e,t){var n=void 0,r=/^[\w-]*$/,i="#"===t[0],o=!i&&"."===t[0],a=i||o?t.slice(1):t,s=r.test(a);return e.getElementById&&s&&i?(n=e.getElementById(a))?[n]:[]:1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType?[]:Array.prototype.slice.call(s&&!i&&e.getElementsByClassName?o?e.getElementsByClassName(a):e.getElementsByTagName(t):e.querySelectorAll(t))},h=function(e,t,n){if(!t||!e||1!==e.nodeType)return!1;var r=n.createElement("div"),i=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(i)return i.call(e,t);var o=void 0,a=e.parentNode,s=!a;return s&&(a=r).appendChild(e),o=~p(a,t).indexOf(e),s&&r.removeChild(e),!!o},g=function e(t,n){var r=void 0;return t&&1===t.nodeType?(n.indexOf(".")>-1||n.indexOf("#")>-1?r=n.substring(1):n=n.toUpperCase(),t.nodeName.toUpperCase()===n||t.classList.contains(r)||t.id===r?t:e(t.parentNode,n)):null},m=new d.default,v=function(){function e(t,n){return(0,s.default)(this,e),this.doc=n,t.elems?void(this.elems=t.elems):"string"===(void 0===t?"undefined":(0,o.default)(t))?(this.elems=[this.doc||document],this.elems=this.find(t).elems,void(this.length=this.elems.length)):t.nodeType?(this.elems=[t],void(this.length=1)):(this.elems=[],void(this.length=0))}return(0,c.default)(e,[{key:"find",value:function(t){var n=[];return this.each(function(e){n=n.concat(Array.prototype.slice.call(e.querySelectorAll(t),0))}),new e({elems:n},this.doc)}},{key:"is",value:function(e){return this.elems.length>0&&h(this.elems[0],e,this.doc)}},{key:"bind",value:function(e,t,n){return this.each(function(r){if(n){if(m.has(e))return;r.addEventListener(e,t),m.add(e)}else r.addEventListener(e,t)}),this}},{key:"unbind",value:function(e,t){return this.each(function(n){m.has(e)&&m.delete(e),n&&n.removeEventListener(e,t)}),this}},{key:"prop",value:function(e,t){return t?(this.each(function(n){n.setAttribute(e,t)}),this):this.elems[0].getAttribute(e)}},{key:"css",value:function(e,t){var n=this.elems;if(void 0===t&&"string"==typeof e)return n[0].getComputedStyle(e);var r=[];if("object"===(void 0===e?"undefined":(0,o.default)(e)))for(var i in e)e.hasOwnProperty(i)&&r.push(i+":"+e[i]);return"string"==typeof e&&r.push(e+":"+t),this.each(function(e){e.style.cssText=r.join(";")}),this}},{key:"addClass",value:function(e){return e=(0,f.trim)(e),this.each(function(t){var n=(0,f.trim)(t.getAttribute("class")||"");-1===n.indexOf(e)&&t.setAttribute("class",n+" "+e)}),this}},{key:"hasClass",value:function(e){e=(0,f.trim)(e);var t=void 0;return this.each(function(n){(0,f.trim)(n.getAttribute("class")||"").indexOf(e)>-1&&(t=!0)}),t}},{key:"removeClass",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e=(0,f.trim)(e),this.each(function(t){if(e){var n=t.getAttribute("class")||"";n.indexOf(e)>-1&&t.setAttribute("class",(0,f.trim)(n.replace(e,"")))}else t.setAttribute("class","")}),this}},{key:"toggleClass",value:function(e){return this[this.is("."+e)?"removeClass":"addClass"](e),this}},{key:"each",value:function(){var e=[this.elems].concat(Array.prototype.slice.call(arguments,0));return f.each.apply(this,e),this}},{key:"eq",value:function(t){return this.elems[t]&&new e(this.elems[t],this.doc)}},{key:"text",value:function(e){return void 0===e?this.elems[0]&&this.elems[0].textContent:(this.each(function(t){1!==t.nodeType&&11!==t.nodeType&&9!==t.nodeType||(t.textContent=e)}),this)}},{key:"html",value:function(e){return void 0===e?this.elems[0]&&this.elems[0].innerHTML:(this.each(function(t){1===t.nodeType&&(t.innerHTML=e)}),this)}},{key:"append",value:function(e){if(e){var t=document.createElement("div"),n=null;return t.innerHTML=e,n=t.childNodes,this.each(function(e){if(1===e.nodeType)for(var t=0;t<n.length;t++)e.appendChild(n[t].cloneNode(!0))}),n=null,t=null,this}}},{key:"findParent",value:function(e){return g(this.elems[0],e)}},{key:"remove",value:function(){this.each(function(e){e.parentElement.removeChild(e)})}}]),e}(),b=function e(t){var n=this;return(0,s.default)(this,e),this.doc=t||document,function(e){return new v(e,n.doc)}};t.default=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){return function(){return e.apply(t,arguments)}},i=function(e){return e.replace(/(^[\s]*)|([\s]*$)/g,"")},o=function(){var e=Array.prototype.slice.call(arguments,0);Array.prototype.forEach.apply(e.shift(),e)},a=function(e,t){return Array.prototype.indexOf.call(t,e)};t.proxy=r,t.trim=i,t.each=o,t.inArray=a},function(e,t,n){"use strict";function r(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;").replace(/ /g,"&nbsp;").replace(/=/g,"&#61;").replace(/`/g,"&#96;")}function i(e,t){var n=e||"",i=[];"string"==typeof t?i.push(t):i=t||i;if(!n)return"";var o=new RegExp("{%HLS%}","g"),a=new RegExp("{%HLE%}","g"),s=new RegExp("{%HLE%}{%HLS%}","g"),l=/^[+*()]/;return i.forEach(function(e){var t=e.trim();if(t.length){t=t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");var r=t.split("").map(function(e){return l.test(e)?"\\"+e:e}),i=new RegExp("("+r.join("\\s*")+")","ig");n=n.replace(i,"{%HLS%}$1{%HLE%}")}}),n=r(n),"null"===n&&(n="<span>null</span>"),n=n.replace(s,""),n=n.replace(o,'<span class="highlight-text green">'),n=n.replace(a,"</span>")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(14),o=r(i),a=n(8),s=r(a),l=n(4),c=r(l),u=n(5),d=r(u),f=n(140),p=r(f),h=n(59),g=n(319),m=r(g),v=n(473),b=r(v),_=n(474),y=r(_),w=n(475),x=r(w),k=n(476),S=r(k),C=function(){function e(t){(0,c.default)(this,e),this.stator=t}return(0,d.default)(e,[{key:"renderMarquee",value:function(e,t){return this.renderCallStatus({marquee:e,timeStr:t})}},{key:"renderCallStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.stator.getState(),n=t.status,r=t.mute,i=t.consultType,o=t.consultSet,a=this.stator.isPSTN(),l="",c=void 0;switch(n){case"normal":case"connect":l=a?"回拨中":"接通中";break;case"calling":l=a?"回拨已发起":"振铃中";break;case"consult":case"multi":case"monitor":case"breakIn":case"online":l=a?"回拨已接通":"通话中";break;case"hold":l="客户保持中";break;case"postEdit":l="通话已结束"}return i===h.consultTypeCode.systemservice&&1===o&&(n="hold",l="客户保持中"),c="multi"===n,n=r?"mute":n,l=r?"麦克风静音":l,(0,p.default)(S.default)((0,s.default)(t,{status:n,statusText:l,callTypeCode:h.callTypeCode,consultTypeCode:h.consultTypeCode,isMulti:c,isPSTN:a},e))}},{key:"renderOperators",value:function(){var e=void 0,t=void 0,n=void 0;if(this.getTplInfo(),e=this.stator.getState(),(t=this.stator.getDisposableStatus())>99){(e.restList||[]).forEach(function(e){e.id==t&&(n=e.name)})}else n=["忙碌","空闲","通话前"][t];return n=n||"请选择状态",(0,p.default)(b.default)((0,s.default)(e,{operations:m.default,disposableName:n}))}},{key:"renderIncomingExtra",value:function(){var e=this.stator,t=void 0,n=function(){return(0,p.default)(y.default)((0,s.default)(e.getState(),{format:e.format,switchboardNumberFormatted:e.getFormattedNumber(),routeType:h.routeType})).split("-#-")};return t=new o.default(function(t,r){var i=e.getState("nextState")||{},o=e.getState("callid");o&&void 0===i.Historycallcount?e.syncCallInfo(o).then(function(){t(n())}):t(n())}),t.catch(function(e){}),t}},{key:"renderScheduleList",value:function(e){var t=this.stator;return(0,p.default)(x.default)({format:t.format,formatTel:t.formatTel,scheduleData:e})}},{key:"getTplInfo",value:function(){var e=this.stator,t=e.getState(),n=t.transtor||{},r=t.tplInfo||{opIcons:[],callIcons:[]},i=t.mute?"mutecancel":"mute",o=e._getOptions().mode,a=n.isBEvent,s=t.multi&&!n.bMultiOut&&!n.cMultiOut,l=t.isHardwareLogin,c=[i,"hold","consult","transfer","dial"],u=function(e){var t=c.indexOf(e);t>-1&&c.splice(t,1)},d=["hangup"],f=e.isPSTN();switch(r.opIcons=r.opIcons&&r.opIcons[0]&&r.opIcons[0].length?r.opIcons[0].concat(r.opIcons[1]):r.opIcons,r.opIcons.forEach(function(e,t){e.indexOf("mute")>-1&&r.opIcons.splice(t,1,i)}),d="calling"===t.status&&("callin"===t.direction&&!f||h.callTypeCode.monitor===t.callType&&"b2"===t.role)?["answer"]:[],d=d.concat("b1"!==t.role||h.callTypeCode.consult!==t.callType||s?"hangup":"consultback"),t.status){case"connect":case"normal":c=[],t.callid||(d=[]);break;case"calling":c=[];break;case"hold":c=r.opIcons;var p=c.indexOf("hold");p>-1&&c.splice(p,1,"unHold");break;case"monitor":"b2"===t.role&&(c=["insert"]);break;case"breakIn":c="b2"===t.role?["break"]:[];break;case"consult":case"multi":case"online":if(t.consultType===h.consultTypeCode.systemservice){c=1===t.consultSet?[]:[i];break}if(c=[i,"hold","consult","transfer","dial"],h.callTypeCode.transfer===t.callType)u("transfer"),u("consult");else if(n.isConsultTransfer)u("consult");else if(h.callTypeCode.consult!==t.callType||t.multi)if(t.multi){if(c=[i],n.bMultiOut||n.cMultiOut){var g="customer"===n.operator;c=g?[i]:"b1"===t.role?[i,"hold","consult","transfer"]:[i,"hold","transfer"]}}else n.history&&"consult"===n.history[0]?a||(c=[i,"dial"]):"b2"===t.role&&"customer"===n.operator&&(c=[i,"dial"]);else c="b1"===t.role?["shift","multi",i,"dial"]:[i,"dial"];if("hold"===t.lastStatus){c=r.opIcons;var m=c.indexOf("unHold");m>-1&&c.splice(m,1,"hold")}f&&(c=[]);break;case"postEdit":case"over":c=[],d=[]}return t.isNumberHidden,l&&(u("mutedisabled"),u(i),d=[]),"sip"===o&&(u("dial"),u(i)),r.opIcons=c.length?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[[],[]];return e.forEach(function(e){t[["unHold","hold","mutedisabled","mute","mutecancel"].indexOf(e)>-1?0:1].push(e)}),t}(c):c,r.callIcons=d,e.setState("tplInfo",r),r}}]),e}();t.default=C},function(e,t){e.exports='<%\n    var CALLTYPE_NORMAL = 1;\n    var CALLTYPE_CONSULT = 2;\n    var CALLTYPE_TRANSFER = 3;\n\n    var VOIP = 2;\n    var isHoldState = status === \'hold\' || consultSet === 1;\n    var isOnlineState = \'online|consult|multi|monitor|breakIn\'.indexOf(status) > -1;\n    var isOverState = status === \'over\';\n    var isPostState = status === \'postEdit\';\n    var isCallingState = status === \'calling\';\n    var isMultiState = multi;\n    var isNormalCall =  callType === 1 || role === \'b2\';\n    var isConsulting = callType == CALLTYPE_CONSULT;\n    var isTransferging = callType == CALLTYPE_TRANSFER;\n    var dir = originDir || direction;\n    var isVOIP = answerType == VOIP;\n    var isMute = mute || false;\n    var isClient = mode === \'client\';\n    var isWebRTC = mode === \'webrtc\';\n    var nextState = nextState || {};\n    isPostEditOn = isPostEditOn || {};\n%>\n\n\x3c!-- 渲染操作按钮 --\x3e\n<%if (tplInfo.opIcons && tplInfo.opIcons.length) {%>\n    <%\n        for (var idx = 0; idx < tplInfo.opIcons[0].length; idx++) {\n            var operation = operations[tplInfo.opIcons[0][idx]];\n    %>\n        <a href="javascript:;" title="<%=operation.title%>" class="<%=operation.class%> icon">\n            <svg viewBox="<%=operation.viewBox%>"><use xlink:href="<%=operation.id%>"></use></svg>\n        </a>\n    <%}%>\n    <%if (tplInfo.opIcons[1].length && !simple) {%>\n        <%\n            for (var idx = 0; idx < tplInfo.opIcons[1].length; idx++) {\n                var operation = operations[tplInfo.opIcons[1][idx]];\n        %>\n            <a href="javascript:;" title="<%=operation.title%>" class="<%=operation.class%> icon">\n                <svg viewBox="<%=operation.viewBox%>"><use xlink:href="<%=operation.id%>"></use></svg\n                ><% if(operation.name) {%><span><%=operation.name%></span><%}%>\n            </a>\n        <%}%>\n    <%}%>\n<%} else if (isPostState) {%>\n    <div class="disposable">\n        结束后状态为\n        <span class="trigger">\n            <i id="disposable"><%=disposableName%></i>\n            <svg class="icon arrow" viewBox="0 0 12 12"><use xlink:href="#arrow"></use></svg>\n        </span>\n    </div>\n    <div title="结束事后整理" class="post-edit ctimer icon">\n        <div class="hand hand-left"><span style="animation-duration:<%=isPostEditOn[dir] || 0%>s"></span></div>\n        <div class="hand hand-right"><span style="animation-duration:<%=isPostEditOn[dir] || 0%>s"></span></div>\n        <svg viewBox="0 0 12 12"><use xlink:href="#action-postedit"></use></svg>\n    </div>\n<%}%>\n\n<%\nif (tplInfo.callIcons.length) {\n    var len = tplInfo.callIcons.length;\n%>\n    <% for (var idx = 0; idx < len; idx++) {\n        var callIcon =operations[tplInfo.callIcons[idx]];\n    %>\n        <a href="javascript:;" title="<%=callIcon.title%>" class="<%=callIcon.class%> icon">\n            <svg viewBox="<%=callIcon.viewBox%>"><use xlink:href="<%=callIcon.id%>"></use></svg>\n        </a>\n    <%}%>\n<%}%>\n'},function(e,t){e.exports='<%\nvar nextState = nextState || {};\nvar RouteType = RouteType || nextState.RouteType;\nvar IvrTime = IvrTime || nextState.IvrTime;\nvar Inqueueduration = Inqueueduration || nextState.Inqueueduration;\nvar Queuetimes = Queuetimes || nextState.Queuetimes;\nvar CalloutTaskName = CalloutTaskName || nextState.CalloutTaskName;\nvar Phonenumpos = Phonenumpos || nextState.Phonenumpos;\nvar Historycallcount = Historycallcount || nextState.Historycallcount;\nvar Lastcalltime = Lastcalltime || nextState.Lastcalltime;\n%>\n<%if(switchboardNumberFormatted || RouteType !== undefined || IvrTime || Inqueueduration || Queuetimes || CalloutTaskName) {%>\n<div class="inner">\n    <%if(switchboardNumberFormatted) {%>\n    <span class="tag"><i>总机</i> <span id="numGroupName">&nbsp;<%=switchboardNumberFormatted%></span></span>\n    <%}%>\n\n    <%if(RouteType !== undefined) {\n        RouteType = RouteType > 4 ? 5 : RouteType;\n    %>\n    <span class="tag"><i>路由</i> <%=routeType[RouteType] || \'-\'%></span><br/>\n    <%}%>\n\n    <%if(IvrTime) {%>\n    <span class="tag"><i>IVR</i> <%=IvrTime%>s</span>\n    <%}%>\n\n    <%if(Inqueueduration || Queuetimes) {%>\n    <span class="tag"><i>排队</i> <%=Queuetimes ? Queuetimes + \'次\' : \'\'%> <%=Inqueueduration ? Inqueueduration + \'s\' : \'\'%></span>\n    <%}%>\n\n    <%if(CalloutTaskName) {%>\n    <span class="tag"><i>外呼</i> <%=CalloutTaskName%></span>\n    <%}%>\n\n    <svg class="icon arrow" viewBox="0 0 12 12"><use xlink:href="#arrow"></use></svg>\n</div>\n<%}%>\n-#-\n<div class="base-extra">\n    <%if(Phonenumpos) {%>\n    <span class="tag"><%=Phonenumpos%></span>\n    <%}%>\n\n    <%if(Historycallcount) {%>\n    <span class="tag"><i>来电</i> <%=Historycallcount%>次</span>\n    <%}%>\n\n    <%if(Lastcalltime) {%>\n    <span class="tag"><i>最近</i> <%=format(\'m-d H:i\', Lastcalltime)%></span>\n    <%}%>\n</div>\n'},function(e,t){e.exports='<%\nvar state = [\'待完成\', \'已完成\', \'过期已完成\', \'过期未完成\'];\nvar clz = [\'\', \'done\', \'dated-done\', \'dated\'];\nvar list = scheduleData.records || [];\nif (list.length) {\n%>\n<span data-dir="left" class="btn-move is-left disabled"><svg class="icon arrow" viewBox="0 0 12 12"><use xlink:href="#arrow-move"></use></svg></span>\n<div class="schedule-content">\n    <ul>\n    <%\n        for(var i=0; i<list.length; i++) {\n            var item = list[i];\n    %>\n        <li data-id="<%=item.id%>" title="查看详情">\n            <svg class="icon timer" viewBox="0 0 12 12"><use xlink:href="#timer"></use></svg>\n            <span class="time text-stress"><%=format(\'m-d H:i\', item.time)%></span>\n            <span class="status <%=clz[item.status]%>"><%=state[item.status]%></span>\n            <p class="drop">\n                <svg class="icon person" viewBox="0 0 12 12"><use xlink:href="#person"></use></svg>\n                <span class="text-stress"><%=item.customerName%>(<%=formatTel(item.customerPhone)%>)</span>\n                <svg class="icon arrow" viewBox="0 0 12 12"><use xlink:href="#arrow"></use></svg>\n            </p>\n        </li>\n    <%}%>\n    </ul>\n</div>\n<span data-dir="right" class="btn-move is-right"><svg class="icon arrow arrow-reverse" viewBox="0 0 12 12"><use xlink:href="#arrow-move"></use></svg></span>\n<%} else {%>\n<div class="empty"><%=scheduleData.errorMsg ? scheduleData.errorMsg : \'暂无预约回呼计划\'%></div>\n<%}%>'},function(e,t){e.exports="<%\n    var clz = {\n        online: 'green',\n        hold: 'orange',\n        consult: 'green',\n        multi: 'green',\n        mute: 'orange',\n        monitor: 'green',\n        breakIn: 'green'\n    };\n%>\n<%if (marquee) {%>\n    <span>振铃中</span>\n    <span class=\"timer\"><%=timeStr%></span>\n    <div class=\"marquee\">\n        <p>\n            <span><%=marquee%></span><span><%=marquee%></span>\n        </p>\n    </div>\n<%} else if(callType === callTypeCode.consult && isMulti || callType === callTypeCode.breakIn) {%>\n    <p class=\"<%=clz[status]%>\">三方通话中</p>\n    <span class=\"timer <%=clz[status] || ''%>\">00:00</span>\n<%} else if(callType === callTypeCode.consult && status !== 'postEdit') {%>\n    <p class=\"<%=clz[status] || ''%>\"><%=statusText%> <span class=\"timer <%=clz[status] || ''%>\">00:00</span></p>\n    <span class=\"gap\"><%=role === 'b1' && status !== 'multi' && status !== 'mute' ? '客户保持中' : '咨询'%></span>\n<%} else if(callType === callTypeCode.monitor && status === 'monitor') {%>\n    <p class=\"<%=clz[status] || ''%>\">监听中</p>\n    <span class=\"timer <%=clz[status] || ''%>\">00:00</span>\n<%} else if(callType === callTypeCode.monitor) {%>\n    <p class=\"<%=clz[status] || ''%>\"><%=statusText%> <span class=\"timer <%=clz[status] || ''%>\">00:00</span></p>\n    <span class=\"gap <%=clz[status] || ''%>\">监听</span>\n<%} else {%>\n    <p class=\"<%=clz[status] || ''%>\">\n        <%=statusText%>\n        <%if (status === 'postEdit') {%>\n        整理\n        <%}%>\n    </p>\n    <span class=\"timer <%=clz[status] || ''%>\">00:00</span>\n<%}%>"},function(e,t,n){t=e.exports=n(19)(!1),t.i(n(25),""),t.push([e.i,"h2 {\n  margin: 0;\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 1.5;\n  padding: 10px 15px 5px;\n  color: #262d3d;\n}\n.icon {\n  display: inline-block;\n  width: 16px;\n  overflow: hidden;\n  color: #a1abc2;\n}\n.icon svg {\n  width: 100%;\n}\n.icon.green:hover {\n  color: #01c480;\n}\na:hover .icon,\n.icon:hover {\n  color: #8490ae;\n}\n.drop {\n  overflow: hidden;\n  position: relative;\n  padding-right: 12px;\n}\n.drop .arrow {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 8px;\n  margin-left: 3px;\n}\n.icon.is-on,\n.text-stress {\n  color: #262d3d;\n}\n.text-hint {\n  color: #d4d8e1;\n}\n.green {\n  color: #00d48a;\n  border-color: #00d48a;\n}\n.red {\n  color: #f75559;\n}\n.blue {\n  color: #4a70ff;\n}\n.orange {\n  color: #ff8345;\n}\n.is-calling {\n  color: #a1abc2;\n}\n.is-calling h2 {\n  color: #f8f9fB;\n}\n.is-calling::-webkit-scrollbar-thumb,\n.is-calling ::-webkit-scrollbar-thumb {\n  background-color: #696c7c;\n}\n.is-calling::-webkit-scrollbar-thumb:hover,\n.is-calling ::-webkit-scrollbar-thumb:hover {\n  background-color: #50535f;\n}\n.is-calling .is-loading {\n  border: 2px solid #fff;\n  border-bottom-color: transparent;\n}\n.is-calling .text {\n  color: #a1abc2;\n}\n.is-calling .icon.is-on,\n.is-calling .text-stress {\n  color: #f8f9fB;\n}\n.is-calling .green {\n  color: #00cb83;\n  border-color: #00cb83;\n}\n.is-calling .red {\n  color: #e1464a;\n}\n.is-calling .blue {\n  color: #6283ff;\n}\n.is-calling.bg-main,\n.is-calling .bg-main {\n  background-position: 100% 50%;\n}\n.is-calling .bg-gap {\n  background-position: 100% 50%;\n}\n.is-calling .ck {\n  color: #f8f9fB;\n}\n.is-calling textarea,\n.is-calling input,\n.is-calling select,\n.is-calling .select,\n.is-calling .select .options {\n  border-color: #4a5264;\n  color: #f8f9fB;\n  background-color: #25283a;\n}\n.is-calling textarea:focus,\n.is-calling input:focus,\n.is-calling select:focus,\n.is-calling .select:focus,\n.is-calling .select .options:focus {\n  border-color: #8d96aa;\n}\n.is-calling textarea::placeholder,\n.is-calling input::placeholder,\n.is-calling select::placeholder,\n.is-calling .select::placeholder,\n.is-calling .select .options::placeholder {\n  color: #a1abc2;\n}\n.is-calling .select .options p:hover,\n.is-calling .select .options .selected {\n  background-color: #383a4a;\n}\n.is-calling .close {\n  color: #78849e;\n}\n.is-calling .close:hover {\n  color: #fff;\n}\n.is-calling input[type=checkbox] {\n  cursor: pointer;\n  position: relative;\n}\n.is-calling input[type=checkbox]::after {\n  position: absolute;\n  top: 0;\n  background-color: #1e2030;\n  color: #fff;\n  width: 14px;\n  height: 14px;\n  display: inline-block;\n  visibility: visible;\n  padding-left: 0px;\n  text-align: center;\n  content: ' ';\n  border-radius: 2px;\n  box-sizing: border-box;\n  border: 1px solid #4A5264;\n}\n.is-calling input[type=checkbox]:checked::after {\n  content: \"\";\n  border-color: #4A70FF;\n  background-color: #4A70FF;\n}\n.is-calling input[type=checkbox]:checked::before {\n  content: '';\n  position: absolute;\n  top: 1px;\n  left: 5px;\n  width: 3px;\n  height: 8px;\n  border: solid white;\n  border-width: 0 2px 2px 0;\n  transform: rotate(45deg);\n  z-index: 1;\n}\n.close {\n  position: absolute;\n  right: 0px;\n  top: 0px;\n  padding: 8px;\n  color: #a8abb3;\n}\n.close:hover {\n  color: #1e2300;\n}\n.close svg {\n  width: 14px;\n  height: 14px;\n}\n.bg-main {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #fff, #fff, #25283a, #25283a) left / cover;\n}\n.bg-gap {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #f4f7fb, #f4f7fb, #101328, #101328) left / cover;\n}\n.bgEaseIn {\n  background-position: 100% 50%;\n}\n.bgEaseOut {\n  background-position: 0% 50%;\n}\n.bg-main,\n.bg-gap {\n  background-size: 800% 800%;\n  animation-fill-mode: both;\n}\n@keyframes bgEaseIn {\n  0% {\n    background-position: 0% 50%;\n  }\n  100% {\n    background-position: 100% 50%;\n  }\n}\n@keyframes bgEaseOut {\n  0% {\n    background-position: 100% 50%;\n  }\n  100% {\n    background-position: 0% 50%;\n  }\n}\nbody {\n  margin: 0;\n  overflow: hidden;\n  font-size: 12px;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  color: #a1abc2;\n}\np {\n  margin: 0;\n}\ntextarea::placeholder,\ninput::placeholder {\n  color: #A1ABC2;\n}\n::-webkit-scrollbar {\n  width: 4px;\n  height: 8px;\n}\n::-webkit-scrollbar-thumb {\n  background-color: #f3f5fa;\n  border-radius: 8px;\n}\n::-webkit-scrollbar-thumb:hover {\n  background-color: #aaa;\n}\n::-webkit-scrollbar-track-piece {\n  background-color: transparent;\n}\nsvg {\n  fill: currentColor;\n}\na {\n  text-decoration: none;\n}\nul,\nli {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n.ck {\n  width: 9px;\n  height: 9px;\n  color: #262d3d;\n  position: absolute;\n  top: 50%;\n  right: 10px;\n  transform: translateY(-50%);\n  display: none;\n}\n.is-selected .ck {\n  display: inline-block;\n}\ninput,\ntextarea,\nselect,\n.select,\n.select .options {\n  font-size: 12px;\n  color: #262d3d;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  border-radius: 3px;\n  border: 1px solid #e1e6f0;\n  background-color: #fff;\n}\ninput:focus,\ntextarea:focus,\nselect:focus,\n.select:focus,\n.select .options:focus {\n  outline: 0;\n  border-color: #c5ccdb;\n}\nselect,\n.select,\n.select .options p {\n  padding: 0 5px;\n}\n.select {\n  min-height: 26px;\n  position: relative;\n  cursor: default;\n}\n.select .options {\n  position: absolute;\n  z-index: 1;\n  left: -1px;\n  top: 29px;\n  width: 100%;\n  max-height: 73px;\n  overflow: auto;\n}\n.select .options p:hover,\n.select .options p.selected {\n  background: #f1f5fb;\n}\n.select p {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.cls:after {\n  content: \"\";\n  font-size: 0;\n  display: block;\n  height: 0;\n  clear: both;\n  visibility: hidden;\n}\n.disabled {\n  pointer-events: none;\n  opacity: .3;\n}\n.hidden {\n  display: none!important;\n}\n.overlay {\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  background: rgba(255, 255, 255, 0.6);\n}\ninput::-webkit-outer-spin-button,\ninput::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n}\ninput[type=\"number\"] {\n  -moz-appearance: textfield;\n}\n.is-loading {\n  border-radius: 100%;\n  margin: 2px;\n  border: 2px solid #ccc;\n  border-bottom-color: transparent;\n  height: 12px;\n  width: 12px;\n  margin-top: -7px;\n  background: 0 0!important;\n  display: inline-block;\n  -webkit-animation: rotate .75s 0s linear infinite;\n  animation: rotate .75s 0s linear infinite;\n}\n@keyframes rotate {\n  0% {\n    -webkit-transform: rotate(0);\n    transform: rotate(0);\n  }\n  50% {\n    -webkit-transform: rotate(180deg);\n    transform: rotate(180deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n.marquee {\n  white-space: nowrap;\n  overflow: hidden;\n  width: 80px;\n  position: relative;\n}\n.marquee p {\n  overflow: hidden;\n  float: left;\n  animation: move linear 6s infinite;\n}\n.marquee span {\n  display: inline-block;\n  padding-left: 10px;\n}\n.marquee::before,\n.marquee::after {\n  position: absolute;\n  top: 0;\n  z-index: 1;\n  content: ' ';\n  width: 10px;\n  height: 100%;\n  animation: bgfadeIn linear 2s;\n}\n.marquee::before {\n  left: -2px;\n  background: linear-gradient(90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n.marquee::after {\n  right: -2px;\n  background: linear-gradient(-90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n@keyframes move {\n  0% {\n    transform: translateX(0);\n  }\n  100% {\n    transform: translateX(-50%);\n  }\n}\n.q-notice {\n  position: absolute;\n  width: 100%;\n  left: 0;\n  top: 0;\n  text-align: center;\n}\n.q-notice.is-auto {\n  pointer-events: none;\n  z-index: 10;\n}\n.q-notice.is-cover {\n  height: 100%;\n  background: rgba(255, 255, 255, 0.7);\n}\n.q-notice .item {\n  margin: 4px auto;\n}\n.q-notice .info {\n  pointer-events: initial;\n  min-width: 170px;\n  padding: 0 15px;\n  line-height: 29px;\n  height: 28px;\n  overflow: hidden;\n  white-space: nowrap;\n  display: inline-block;\n  color: rgba(255, 255, 255, 0.8);\n  background-color: #25283a;\n  box-shadow: 0px 2px 18px 2px rgba(172, 172, 172, 0.3);\n  border-radius: 2px;\n  position: relative;\n}\n.q-notice .info .icon-tip {\n  vertical-align: -3px;\n  margin-right: 2px;\n  width: 14px;\n}\n.q-notice .info [data-action] * {\n  pointer-events: none;\n}\n.q-notice .is-error .info {\n  color: #fff;\n  background-color: #f75559;\n}\n.q-notice .is-success .info {\n  color: #fff;\n  background-color: #00cb83;\n}\n.q-notice .is-close-able .info {\n  text-align: left;\n}\n.q-notice .is-close-able .btn-close {\n  width: 12px;\n  height: 12px;\n  color: #fff;\n  margin: 8px -5px 0 10px;\n  float: right;\n}\n.q-notice .is-close-able .btn-close:hover {\n  opacity: .8;\n}\n.q-notice .is-warning .info {\n  color: rgba(0, 1, 10, 0.93);\n  border: 0.5px solid #FFEBDA;\n  background-color: #FFF8F0;\n  box-shadow: 0px 16px 32px rgba(18, 19, 25, 0.16), 0px 0px 8px rgba(18, 19, 25, 0.08), 0px 0px 1px rgba(18, 19, 25, 0.08);\n}\n.ringing {\n  animation: ringing 2s ease;\n  animation-fill-mode: both;\n  animation-iteration-count: infinite;\n}\n@keyframes ringing {\n  10% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  15% {\n    -webkit-transform: rotate(-15deg);\n    transform: rotate(-15deg);\n  }\n  20% {\n    -webkit-transform: rotate(15deg);\n    transform: rotate(15deg);\n  }\n  25% {\n    -webkit-transform: rotate(-10deg);\n    transform: rotate(-10deg);\n    color: #2af2ac;\n  }\n  30% {\n    -webkit-transform: rotate(5deg);\n    transform: rotate(5deg);\n    color: #2af2ac;\n  }\n  35% {\n    -webkit-transform: rotate(-5deg);\n    transform: rotate(-5deg);\n  }\n  40% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n}\n.ctimer {\n  border-radius: 50%;\n  height: 40px;\n  overflow: hidden;\n  position: relative;\n  width: 40px;\n  background: rgba(255, 255, 255, 0.3);\n}\n.ctimer svg {\n  position: absolute;\n  left: 0;\n  z-index: 2;\n}\n.ctimer .hand {\n  position: absolute;\n  top: 0;\n  height: 100%;\n  overflow: hidden;\n  width: 50%;\n}\n.ctimer .hand span {\n  border: 20px solid rgba(255, 255, 255, 0.3);\n  border-bottom-color: transparent;\n  border-left-color: transparent;\n  border-radius: 50%;\n  display: block;\n  height: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  transform: rotate(225deg);\n  width: 0;\n}\n.ctimer .hand-left {\n  left: 0;\n  transform: rotate(180deg);\n}\n.ctimer .hand-right {\n  right: 0;\n}\n.ctimer .hand span {\n  animation-duration: var(--post-edit-time);\n  animation-iteration-count: 1;\n  animation-timing-function: linear;\n  animation-fill-mode: both;\n}\n.ctimer .hand-left span {\n  animation-name: spinleft;\n}\n.ctimer .hand-right span {\n  animation-name: spinright;\n}\n@keyframes spinleft {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(225deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\n@keyframes spinright {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(405deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\nbody {\n  background: transparent;\n  overflow: hidden;\n}\nbody.is-collapsed .agentbar {\n  min-width: auto;\n  height: 30px;\n}\nbody.is-collapsed .agentbar .content,\nbody.is-collapsed .agentbar .q-notice,\nbody.is-collapsed .agentbar .menu,\nbody.is-collapsed .agentbar .agent-info,\nbody.is-collapsed .agentbar .tabs,\nbody.is-collapsed .agentbar .collapse-b {\n  display: none!important;\n}\nbody.is-collapsed .agentbar .collapse-a {\n  display: inline-block;\n}\nbody.is-collapsed .agentbar .header {\n  cursor: move;\n}\nbody.is-collapsed .agentbar .call-status .state {\n  pointer-events: none;\n}\nbody.is-collapsed .q-notice {\n  display: none!important;\n}\n.agentbar {\n  min-width: 586px;\n  height: 100px;\n  border-radius: 5px;\n  position: relative;\n  overflow: hidden;\n  user-select: none;\n  -webkit-user-select: none;\n  color: #a1abc2;\n}\n.agentbar .header {\n  height: 32px;\n  line-height: 32px;\n  padding: 0 8px;\n  overflow: hidden;\n}\n.agentbar .header .time,\n.agentbar .header .timer,\n.agentbar .header .t-long {\n  min-width: 32px;\n  margin-left: 3px;\n  display: inline-block;\n}\n.agentbar .header .t-long {\n  min-width: 48px;\n}\n.agentbar .header .menu,\n.agentbar .header .agent-info,\n.agentbar .header .status,\n.agentbar .header .tabs {\n  float: left;\n  margin-right: 8px;\n}\n.agentbar .header .status {\n  margin-right: 0;\n}\n.agentbar .header .menu {\n  margin-top: 5px;\n  width: 20px;\n}\n.agentbar .header .agent-info {\n  transform: scale(0.83);\n  margin: 1px 0 0 -4px;\n  line-height: 1.3;\n  min-width: 40px;\n}\n.agentbar .header .agent-info span {\n  overflow: hidden;\n  display: inline-block;\n  max-width: 100px;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.agentbar .header .agent-status .agent-status-info,\n.agentbar .header .call-status .state {\n  display: flex;\n  padding: 0 3px;\n}\n.agentbar .header .agent-status {\n  position: relative;\n  top: 2px;\n  height: 28px;\n  padding: 0 13px 0 4px;\n  border-radius: 4px;\n  margin-right: -3px;\n  cursor: pointer;\n}\n.agentbar .header .agent-status .icon {\n  color: currentColor;\n}\n.agentbar .header .agent-status .arrow {\n  margin: 0;\n}\n.agentbar .header .agent-status:hover {\n  background-color: #f1f5fb;\n}\n.agentbar .header .agent-status .icon,\n.agentbar .header .agent-status-info {\n  float: left;\n}\n.agentbar .header .agent-status-info {\n  margin-top: -1px;\n  line-height: 30px;\n  min-width: 33px;\n}\n.agentbar .header .agent-status .icon-status {\n  position: relative;\n  top: 50%;\n  margin-right: 1px;\n  transform: translateY(-50%);\n}\n.agentbar .header .call-status {\n  display: none;\n  align-items: center;\n  padding-left: 3px;\n  margin-right: -5px;\n  height: 31px;\n}\n.agentbar .header .call-status .state {\n  flex: 1;\n  margin: 1px 0 0 1px;\n  line-height: 22px;\n  cursor: pointer;\n}\n.agentbar .header .call-status .state:hover {\n  background: #383a4a;\n  border-radius: 3px;\n}\n.agentbar .header .call-status .state span {\n  white-space: nowrap;\n}\n.agentbar .header .call-status .marquee {\n  position: relative;\n  right: -3px;\n}\n.agentbar .header .call-status .gap {\n  margin-left: 5px;\n}\n.agentbar .header .tabs {\n  font-size: 14px;\n  margin-left: 30px;\n  position: relative;\n}\n.agentbar .header .tabs::before {\n  position: absolute;\n  left: -15px;\n  top: 8px;\n  content: ' ';\n  height: 16px;\n  width: 1px;\n  overflow: hidden;\n  background-color: rgba(18, 42, 79, 0.08);\n}\n.agentbar .header .tabs span {\n  display: inline-block;\n  padding: 0 8px;\n  border-radius: 4px;\n  line-height: 24px;\n  margin-right: 16px;\n  cursor: pointer;\n  position: relative;\n}\n.agentbar .header .tabs span:hover {\n  background-color: #f1f5fb;\n}\n.agentbar .header .tabs span.text-stress {\n  cursor: default;\n  font-weight: bold;\n}\n.agentbar .header .tabs span.text-stress:hover {\n  background-color: transparent;\n}\n.agentbar .header .tabs span.new::after {\n  content: ' ';\n  position: absolute;\n  right: 3px;\n  top: 3px;\n  width: 6px;\n  height: 6px;\n  border-radius: 3px;\n  background-color: #f75559;\n}\n.agentbar .header .tabs .pointer {\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  height: 3px;\n  border-bottom-width: 3px;\n  border-bottom-style: solid;\n  transition: transform 0.15s ease-in;\n}\n.agentbar .header .logon {\n  overflow: hidden;\n}\n.agentbar .header .logout {\n  padding-left: 4px;\n}\n.agentbar .content {\n  height: 68px;\n  overflow: hidden;\n}\n.agentbar .content .normal-info,\n.agentbar .content .calling-info,\n.agentbar .content .call-schedule {\n  display: flex;\n  height: 52px;\n}\n.agentbar .content .box {\n  margin-right: 8px;\n  border-radius: 4px;\n  height: 44px;\n  min-width: 50px;\n  line-height: 22px;\n  padding: 4px 7px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  background-color: #fff;\n}\n.agentbar .content .box.status-info {\n  text-align: right;\n  min-width: 120px;\n  max-width: 200px;\n  flex: 1;\n}\n.agentbar .content .box.call-info {\n  text-align: right;\n  min-width: 120px;\n  max-width: 200px;\n  flex: 1;\n}\n.agentbar .content .box label {\n  float: left;\n}\n.agentbar .content .box .tag {\n  margin-right: 7px;\n  white-space: nowrap;\n}\n.agentbar .content .box .tag i {\n  border-radius: 3px;\n  font-style: normal;\n  color: #25283a;\n  background-color: #808798;\n  padding: 0 2px;\n  transform: scale(0.7);\n  display: inline-block;\n  line-height: 1.4;\n  margin: 0 -4px;\n}\n.agentbar .content .box .timer {\n  font-weight: 500;\n}\n.agentbar .content .box.queue,\n.agentbar .content .box.schedule-today {\n  cursor: pointer;\n}\n.agentbar .content .box.queue .drop,\n.agentbar .content .box.schedule-today .drop {\n  white-space: nowrap;\n  height: 20px;\n}\n.agentbar .content .box.queue span,\n.agentbar .content .box.schedule-today span {\n  font-size: 18px;\n  font-weight: 500;\n}\n.agentbar .content .box.queue:hover,\n.agentbar .content .box.schedule-today:hover {\n  background-color: #fafafa;\n}\n.agentbar .content .box.call-input {\n  flex: 2;\n  margin-right: 0;\n  padding-left: 12px;\n  position: relative;\n}\n.agentbar .content .box.call-input .drop {\n  display: inline-block;\n  height: 20px;\n  white-space: nowrap;\n}\n.agentbar .content .box.call-input .telephone {\n  width: 12px;\n  color: #d4d8e1;\n  position: absolute;\n  left: 0;\n  top: 3px;\n}\n.agentbar .content .box.call-input .switchboard {\n  margin-right: 45px;\n  line-height: 20px;\n  padding-left: 15px;\n  max-width: calc(100% - 80px);\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.agentbar .content .box.call-input .switchboard:hover {\n  color: #000;\n}\n.agentbar .content .box.call-input .switchboard .arrow {\n  right: 0;\n}\n.agentbar .content .box.call-input i {\n  margin: 0;\n  font-style: normal;\n  font-weight: 500;\n}\n.agentbar .content .box.call-input .input {\n  margin-right: 40px;\n  margin-top: -2px;\n}\n.agentbar .content .box.call-input input {\n  display: block;\n  width: 100%;\n  border: 0;\n  font-size: 18px;\n  color: #262d3d;\n}\n.agentbar .content .box.call-input input:focus {\n  outline: 0;\n}\n.agentbar .content .box.call-input .dial {\n  position: absolute;\n  right: 7px;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 40px;\n  height: 40px;\n}\n.agentbar .content .box.call-input .dial svg {\n  width: 40px;\n}\n.agentbar .content .box.call-input .dial.is-disable {\n  opacity: .3;\n  pointer-events: none;\n}\n.agentbar .content .box.incoming-base,\n.agentbar .content .box.incoming-extra {\n  cursor: pointer;\n}\n.agentbar .content .box.incoming-base:hover,\n.agentbar .content .box.incoming-extra:hover {\n  background-color: #383a4a;\n}\n.agentbar .content .box.incoming-base .arrow,\n.agentbar .content .box.incoming-extra .arrow {\n  top: 72%;\n  right: 11px;\n}\n.agentbar .content .box.incoming-base {\n  width: 260px;\n}\n.agentbar .content .box.incoming-base.multis {\n  pointer-events: none;\n}\n.agentbar .content .box.incoming-base.multis .person {\n  height: 40px;\n  line-height: 40px;\n}\n.agentbar .content .box.incoming-base.multis .extra,\n.agentbar .content .box.incoming-base.multis .btn-action,\n.agentbar .content .box.incoming-base.multis .arrow {\n  display: none;\n}\n.agentbar .content .box.incoming-base .person {\n  overflow: hidden;\n  text-align: right;\n  user-select: text;\n  -webkit-user-select: text;\n  cursor: default;\n}\n.agentbar .content .box.incoming-base .person .icon {\n  color: #a1abc2;\n  position: relative;\n  top: 3px;\n}\n.agentbar .content .box.incoming-base .person .icon:hover {\n  color: #f8f9fB;\n}\n.agentbar .content .box.incoming-base .person .is-on .icon {\n  color: #f8f9fB;\n}\n.agentbar .content .box.incoming-base .remark.new {\n  position: relative;\n}\n.agentbar .content .box.incoming-base .remark.new::after {\n  content: ' ';\n  border: 3px solid red;\n  width: 0;\n  height: 0;\n  border-radius: 100%;\n  position: absolute;\n  right: -2px;\n  top: -2px;\n}\n.agentbar .content .box.incoming-base .tel,\n.agentbar .content .box.incoming-base .extra {\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n}\n.agentbar .content .box.incoming-base .extra {\n  max-width: 90%;\n}\n.agentbar .content .box.incoming-base .tel {\n  margin-right: 5px;\n  font-size: 20px;\n  float: left;\n  max-width: 85%;\n  font-family: arial, 'microsoft yahei', status-bar;\n}\n.agentbar .content .box.incoming-base a {\n  margin-top: 3px;\n  display: inline-block;\n}\n.agentbar .content .box.incoming-base .btn-action {\n  cursor: pointer;\n}\n.agentbar .content .box.incoming-base .btn-action a {\n  margin-left: 3px;\n}\n.agentbar .content .box.incoming-extra {\n  padding-left: 12px;\n  width: 200px;\n  white-space: inherit;\n}\n.agentbar .content .box.incoming-extra .inner {\n  margin-right: 18px;\n  height: 40px;\n  overflow: hidden;\n}\n.agentbar .content .box.incoming-extra .inner i {\n  text-indent: 0;\n}\n.agentbar .content .action {\n  flex: 1;\n  padding: 6px 6px 6px 0;\n  height: 40px;\n  min-width: 280px;\n  overflow: hidden;\n  text-align: right;\n  white-space: nowrap;\n}\n.agentbar .content .action .icon {\n  width: 40px;\n  height: 40px;\n  margin-left: 3px;\n  color: #1e2031;\n}\n.agentbar .content .action .icon:hover {\n  color: #4a5264;\n}\n.agentbar .content .action .icon.is-disabled {\n  pointer-events: none;\n  opacity: .7;\n}\n.agentbar .content .action .icon.red {\n  color: #e1464a;\n}\n.agentbar .content .action .icon.red:hover {\n  color: #f75559;\n}\n.agentbar .content .action .icon.green {\n  color: #00cb83;\n}\n.agentbar .content .action .icon.green:hover {\n  color: #00d48a;\n}\n.agentbar .content .action .icon.post-edit {\n  cursor: pointer;\n  color: #7e879a;\n}\n.agentbar .content .action .icon.post-edit:hover {\n  color: #676f7e;\n}\n.agentbar .content .action .is-on .icon {\n  color: #25283a;\n}\n.agentbar .content .action .post-edit {\n  vertical-align: middle;\n}\n.agentbar .content .action .disposable {\n  display: inline-block;\n  vertical-align: middle;\n  margin-right: 10px;\n}\n.agentbar .content .action .disposable span {\n  cursor: pointer;\n}\n.agentbar .content .action .disposable span:hover {\n  opacity: .8;\n}\n.agentbar .content .action .disposable span i {\n  color: #668AFF;\n  max-width: 80px;\n  display: inline-block;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  vertical-align: -4px;\n}\n.agentbar .content .action .disposable i {\n  font-style: normal;\n}\n.agentbar .content .action .disposable .icon {\n  width: 8px;\n  height: auto;\n  color: #a1abc2;\n}\n.agentbar .content .action .disposable .is-on .icon {\n  color: #a1abc2;\n}\n.agentbar .content .call-message {\n  height: 52px;\n  overflow: hidden;\n  padding: 8px;\n  display: flex;\n}\n.agentbar .content .call-message .tel-input {\n  height: 52px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  border-radius: 4px;\n  margin-right: 8px;\n  background: #FFFFFF;\n}\n.agentbar .content .call-message .tel-input .calling-tag {\n  display: inline-block;\n  margin-left: 8px;\n  margin-top: 4px;\n  padding: 2px;\n  height: 16px;\n  opacity: 1;\n  width: 50px;\n  font-weight: 400;\n  font-size: 10px;\n  line-height: 16px;\n  color: rgba(1, 11, 50, 0.41);\n  background: rgba(18, 42, 79, 0.08);\n  border-radius: 3px;\n}\n.agentbar .content .call-message .tel-input .calling-tag-hidden {\n  height: 0;\n  opacity: 0;\n  margin-top: 0px;\n  transition-property: height,opacity,margin;\n  transition-duration: 0.1s;\n  transition-timing-function: cubic-bezier(0.36, 0.01, 0.1, 1);\n}\n.agentbar .content .call-message .tel-input .tel-number {\n  margin-left: 8px;\n  display: block;\n  width: 280px;\n  border: 0;\n  font-size: 20px;\n  color: #262d3d;\n}\n.agentbar .content .call-message .tel-input .tel-number:focus {\n  outline: 0;\n}\n.agentbar .content .call-message .message-template-trigger {\n  height: 52px;\n  line-height: 36px;\n  border-radius: 4px 0 0 4px;\n  font-weight: 400;\n  font-size: 14px;\n  background: #FFFFFF;\n  color: rgba(0, 1, 10, 0.93);\n  padding: 8px;\n  box-sizing: border-box;\n  margin-right: 1px;\n  cursor: pointer;\n}\n.agentbar .content .call-message .message-template-trigger svg {\n  width: 12px;\n  height: 12px;\n}\n.agentbar .content .call-message .message-template-trigger .message-template-trigger-selected {\n  color: rgba(1, 11, 50, 0.41);\n}\n.agentbar .content .call-message .message-template-preview-box {\n  height: 36px;\n  border-radius: 0 4px 4px 0;\n  background: #FFFFFF;\n  flex: 1;\n  padding: 8px;\n}\n.agentbar .content .call-message .message-template-preview-overflow {\n  height: 36px;\n  overflow: hidden;\n}\n.agentbar .content .call-message .message-template-preview {\n  font-weight: 400;\n  font-size: 12px;\n  line-height: 18px;\n  color: rgba(0, 1, 10, 0.93);\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  overflow: hidden;\n  /*! autoprefixer: off */\n  -webkit-box-orient: vertical;\n  word-break: break-word;\n  position: relative;\n  top: 50%;\n  transform: translateY(-50%);\n}\n.agentbar .content .call-message .message-template-preview a {\n  color: #4A70FF;\n}\n.agentbar .content .call-message .send-message {\n  width: 40px;\n  height: 40px;\n  margin: 6px 0 0 8px;\n  background: #0FB87F;\n  border-radius: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n}\n.agentbar .content .call-message .send-message .send-msg-icon {\n  width: 24px;\n  height: 24px;\n}\n.agentbar .content .call-message .is-disable {\n  background: #8CDEBB;\n  cursor: default;\n}\n.agentbar .content .call-state {\n  height: 52px;\n  overflow: hidden;\n  padding: 8px;\n}\n.agentbar .content .call-state .calling-info {\n  display: none;\n}\n.agentbar .content .call-schedule {\n  height: 52px;\n  overflow: hidden;\n  padding: 8px;\n}\n.agentbar .content .call-schedule .empty {\n  flex: 1;\n  line-height: 52px;\n  text-align: center;\n  color: #a1abc2;\n}\n.agentbar .content .call-schedule .schedule-wrap {\n  display: flex;\n  flex: 1;\n}\n.agentbar .content .call-schedule .box,\n.agentbar .content .call-schedule .btn-move,\n.agentbar .content .call-schedule .schedule-content li {\n  cursor: pointer;\n  border-radius: 4px;\n  background-color: #fff;\n}\n.agentbar .content .call-schedule .box:hover,\n.agentbar .content .call-schedule .btn-move:hover,\n.agentbar .content .call-schedule .schedule-content li:hover {\n  background-color: #fafafa;\n}\n.agentbar .content .call-schedule .schedule-today svg.schedule {\n  width: 12px;\n  vertical-align: -1px;\n  margin-left: 2px;\n}\n.agentbar .content .call-schedule .schedule-list {\n  flex: 1;\n  height: 52px;\n  overflow: hidden;\n  display: flex;\n  position: relative;\n}\n.agentbar .content .call-schedule .schedule-list .is-loading {\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  border-color: #4a70ff;\n  border-bottom-color: transparent;\n  margin-left: -7px;\n}\n.agentbar .content .call-schedule .btn-move {\n  display: inline-block;\n  width: 16px;\n  height: 100%;\n  text-align: center;\n}\n.agentbar .content .call-schedule .btn-move svg.arrow {\n  width: 14px;\n  position: relative;\n  top: 50%;\n  transform: translateY(-50%);\n}\n.agentbar .content .call-schedule .btn-move svg.arrow-reverse {\n  transform: rotate(180deg) translateY(50%);\n}\n.agentbar .content .call-schedule .btn-move.disabled {\n  opacity: .3;\n  cursor: default;\n  pointer-events: none;\n}\n.agentbar .content .call-schedule .schedule-content {\n  flex: 1;\n  margin: 0 8px;\n  overflow: hidden;\n}\n.agentbar .content .call-schedule .schedule-content ul {\n  overflow: hidden;\n  width: 2000%;\n  transition: transform ease .21s;\n}\n.agentbar .content .call-schedule .schedule-content li {\n  width: 191px;\n  margin-right: 8px;\n  padding: 6px 12px;\n  height: 40px;\n  float: left;\n  line-height: 21px;\n}\n.agentbar .content .call-schedule .schedule-content li .status {\n  display: inline-block;\n  padding: 0 5px 0 16px;\n  position: relative;\n  border-radius: 3px;\n  font-weight: normal;\n  background-color: #edf0f7;\n  transform: scale(0.8);\n  line-height: 17px;\n}\n.agentbar .content .call-schedule .schedule-content li .status::before {\n  content: ' ';\n  position: absolute;\n  left: 5px;\n  top: 50%;\n  margin-top: -4px;\n  width: 6px;\n  height: 6px;\n  overflow: hidden;\n  border-radius: 4px;\n  background-color: #00d48a;\n}\n.agentbar .content .call-schedule .schedule-content li .status.dated::before {\n  background-color: #f75559;\n}\n.agentbar .content .call-schedule .schedule-content li .status.dated-done::before {\n  background-color: #ff8345;\n}\n.agentbar .content .call-schedule .schedule-content li .status.done::before {\n  background-color: #a1abc2;\n}\n.agentbar .content .call-schedule .schedule-content .timer,\n.agentbar .content .call-schedule .schedule-content .person {\n  color: #d4d8e1;\n  width: 12px;\n  vertical-align: -1px;\n}\n.agentbar .content .call-schedule .schedule-content .timer {\n  vertical-align: -2px;\n}\n.agentbar .content .call-schedule .schedule-content .drop span {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: inline-block;\n  max-width: 90%;\n  vertical-align: -6px;\n}\n.agentbar .content .call-schedule .schedule-content .drop .arrow {\n  right: 0;\n}\n.agentbar .content .logout {\n  padding: 12px;\n  position: relative;\n}\n.agentbar .content .logout .win-close {\n  position: static;\n}\n.agentbar .content .logout .corner {\n  position: absolute;\n  right: 0;\n  bottom: 0;\n  width: 80px;\n  height: 68px;\n  transform: translate3d(68px, 68px, 0);\n  transition: transform 0.35s ease-out;\n}\n.agentbar .content .button {\n  cursor: pointer;\n  display: inline-block;\n  width: 140px;\n  height: 44px;\n  line-height: 44px;\n  text-align: center;\n  background-color: #fff;\n  color: #262d3d;\n  margin-right: 8px;\n}\n.agentbar .content .button:hover {\n  background-color: #fafafa;\n}\n.agentbar .content .button.button-primary {\n  color: #fff;\n  background-color: #00d48a;\n}\n.agentbar .content .button.button-primary:hover {\n  background-color: #01c480;\n}\n.agentbar .win-close,\n.agentbar .toggle {\n  position: absolute;\n  width: 14px;\n  right: 8px;\n  top: 9px;\n}\n.agentbar .toggle {\n  top: 5px;\n  width: 20px;\n  border-radius: 3px;\n  display: none;\n  color: rgba(236, 241, 253, 0.75);\n}\n.agentbar .toggle:hover {\n  background: rgba(189, 200, 255, 0.1);\n}\n.agentbar .toggle .collapse-a {\n  display: none;\n}\n.agentbar.is-online .toggle {\n  display: block;\n}\n.agentbar.is-calling .agent-status:hover,\n.agentbar.is-calling .tabs span:hover {\n  background-color: #383a4a;\n}\n.agentbar.is-calling .tabs::before {\n  background-color: rgba(189, 200, 255, 0.1);\n}\n.agentbar.is-calling .win-close {\n  display: none;\n}\n.agentbar.is-calling .header .call-status {\n  display: flex;\n}\n.agentbar.is-calling .header .agent-status {\n  display: none;\n}\n.agentbar.is-calling .content .btn-move,\n.agentbar.is-calling .content .schedule-content li,\n.agentbar.is-calling .content .schedule-today,\n.agentbar.is-calling .content .queue {\n  background-color: #25283a;\n}\n.agentbar.is-calling .content .btn-move:hover,\n.agentbar.is-calling .content .schedule-content li:hover,\n.agentbar.is-calling .content .schedule-today:hover,\n.agentbar.is-calling .content .queue:hover {\n  background-color: #383a4a;\n}\n.agentbar.is-calling .content .box {\n  background-color: #25283a;\n}\n.agentbar.is-calling .content .box.call-input input {\n  background-color: #25283a;\n  color: #a1abc2;\n}\n.agentbar.is-calling .content .box.call-input input::placeholder {\n  opacity: .2;\n}\n.agentbar.is-calling .content .call-message .tel-input {\n  background: rgba(157, 179, 225, 0.05);\n}\n.agentbar.is-calling .content .call-message .tel-input .tel-number {\n  color: rgba(250, 252, 255, 0.98);\n  padding: 0;\n  background: transparent;\n}\n.agentbar.is-calling .content .call-message .tel-input .calling-tag {\n  display: inline-block;\n  margin-left: 8px;\n  margin-top: 4px;\n  padding: 2px;\n  height: 16px;\n  opacity: 1;\n  width: 50px;\n  font-weight: 400;\n  font-size: 10px;\n  line-height: 16px;\n  color: rgba(217, 226, 252, 0.51);\n  background: rgba(189, 200, 255, 0.1);\n  border-radius: 3px;\n}\n.agentbar.is-calling .content .call-message .tel-input .calling-tag-hidden {\n  height: 0;\n  opacity: 0;\n  margin-top: 0px;\n  transition-property: height,opacity,margin;\n  transition-duration: 0.1s;\n  transition-timing-function: cubic-bezier(0.36, 0.01, 0.1, 1);\n}\n.agentbar.is-calling .content .call-message .message-template-trigger {\n  background: rgba(157, 179, 225, 0.05);\n  color: rgba(250, 252, 255, 0.98);\n}\n.agentbar.is-calling .content .call-message .message-template-trigger-selected {\n  color: rgba(250, 252, 255, 0.98);\n}\n.agentbar.is-calling .content .call-message .message-template-preview-box {\n  background: rgba(157, 179, 225, 0.05);\n  color: rgba(236, 241, 253, 0.75);\n}\n.agentbar.is-calling .content .call-message .message-template-preview-box .message-template-preview {\n  color: rgba(250, 252, 255, 0.98);\n}\n.agentbar.is-calling .content .call-state .normal-info {\n  display: none;\n}\n.agentbar.is-calling .content .call-state .calling-info {\n  display: flex;\n}\n.agentbar.is-calling .content .schedule-content li .status {\n  color: #30384b;\n  background-color: #808798;\n}\n.agentbar.is-calling .content .schedule-content li .status::before {\n  background-color: #00cb83;\n}\n.agentbar.is-calling .content .schedule-content li .status.dated::before {\n  background-color: #e1464a;\n}\n.agentbar.is-calling .content .call-schedule .empty {\n  color: #6c7280;\n}\n.agentbar.offline .header .transition {\n  transform: translateY(-50%);\n}\n.agentbar.offline .content .transition .tabsContent {\n  display: none;\n}\n.agentbar.offline .logout .corner {\n  transform: translate3d(0, 0, 0);\n}\n.net {\n  display: inline-block;\n  width: 20px;\n  height: 18px;\n  overflow: hidden;\n  color: transparent;\n  border-radius: 1px;\n  background-color: #101328;\n  text-align: center;\n  cursor: pointer;\n}\n.net span {\n  display: inline-block;\n  width: 18px;\n  height: 18px;\n}\n.net .level_5 {\n  transform: translateY(0);\n}\n.net .level_4 {\n  transform: translateY(-18px);\n}\n.net .level_3 {\n  transform: translateY(-36px);\n}\n.net .level_2 {\n  transform: translateY(-54px);\n}\n.net .level_1 {\n  transform: translateY(-72px);\n}\n.net svg {\n  width: 18px;\n  height: 18px;\n  margin: 0;\n}\n.warning-notice {\n  z-index: 20;\n}\n.warning-notice .info {\n  line-height: 40px;\n  height: 40px;\n  min-width: 300px;\n  max-width: 90%;\n  text-overflow: ellipsis;\n  text-align: left;\n}\n.warning-notice .relogin {\n  float: right;\n  line-height: 20px;\n  padding: 0 8px;\n  margin: 10px 0 0 0;\n  color: #f75559;\n  background-color: #fff;\n  border-radius: 2px;\n  cursor: pointer;\n}\n.warning-notice .relogin:hover {\n  background-color: #f1f1f1;\n}\n.warning-notice .is-close-able .btn-close {\n  margin-top: 14px;\n}\n.shedule-notice {\n  z-index: 9;\n}\n.shedule-notice .n-msg {\n  display: inline-block;\n  max-width: 300px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  line-height: 17px;\n  vertical-align: -4px;\n  margin-right: 8px;\n}\n.shedule-notice .notice-action,\n.shedule-notice a {\n  cursor: pointer;\n}\n.shedule-notice .notice-action:hover,\n.shedule-notice a:hover {\n  text-decoration: underline;\n}\n.shedule-notice a {\n  color: #f8f9fB;\n}\n.shedule-notice .notice-action {\n  margin-right: 10px;\n  color: #00cb83;\n}\n.shedule-notice .ring .info {\n  height: 40px;\n  line-height: 40px;\n  width: 290px;\n  text-align: left;\n  padding: 0 10px 0 15px;\n}\n.shedule-notice .ring .info .answer,\n.shedule-notice .ring .info .pop_hangup {\n  margin-top: 9px;\n  float: right;\n  cursor: pointer;\n  width: 22px;\n}\n.shedule-notice .ring .info .pop_hangup {\n  margin-left: 8px;\n}\n.shedule-notice .ring .info .name {\n  margin-right: 5px;\n  color: #f8f9fB;\n}\n.shedule-notice .ring .info .gren {\n  color: #00d48a;\n}\n.shedule-notice .ring .info .red:hover {\n  color: #e1464a;\n}\n.shedule-notice .ring .info .gren:hover {\n  color: #00cb83;\n}\n.shedule-notice .remarkmsg {\n  display: inline-block;\n  max-width: 500px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  vertical-align: -10px;\n  margin-right: 10px;\n}\n.shedule-notice .viewremark {\n  cursor: pointer;\n  color: #f8f9fB;\n}\n.shedule-notice .viewremark:hover {\n  color: rgba(255, 255, 255, 0.8);\n}\n.autoplay-btn {\n  margin-left: 16px;\n  color: #4a70ff;\n}\n.autoplay-btn:hover {\n  cursor: pointer;\n}\n",""])},function(e,t){e.exports='<%\n    var status = status || \'normal\';\n    var isNormalState = status === \'normal\' || status === \'over\';\n    var uin = voiceNumber || kfext || callKfext;\n%>\n<div class="agentbar bg-main <%=isNormalState ? \'\' : \'is-calling\'%>">\n    <div class="header">\n        <div class="transition">\n            <div class="logon">\n                <a href="javascript:void 0;" title="菜单" class="menu icon"><svg viewBox="0 0 12 12"><use xlink:href="#basic_more2_line"></use></svg></a>\n                <div class="agent-info">\n                    <span><%=name || \'-\'%></span>\n                    <p><%=voiceNumber || \'-\'%></p>\n                </div>\n                <div class="status">\n                    <div class="agent-status drop">\n                        <span class="icon icon-status">\n                            <svg class="" viewBox="0 0 12 12"><use xlink:href="#idle"></use></svg>\n                        </span>\n                        <div class="agent-status-info">\n                            <p>空闲</p>\n                            <span class="time">00:00</span>\n                        </div>\n                        <svg class="icon arrow" viewBox="0 0 12 12"><use xlink:href="#arrow"></use></svg>\n                    </div>\n\n                    <div class="call-status">\n                        <span class="net">\n                            <span>\n                                <svg viewBox="0 0 20 14"><use xlink:href="#signal_5"></use></svg>\n                                <svg viewBox="0 0 20 14"><use xlink:href="#signal_4"></use></svg>\n                                <svg viewBox="0 0 20 14"><use xlink:href="#signal_3"></use></svg>\n                                <svg viewBox="0 0 20 14"><use xlink:href="#signal_2"></use></svg>\n                                <svg viewBox="0 0 20 14"><use xlink:href="#signal_1"></use></svg>\n                            </span>\n                        </span>\n                        <div class="state"></div>\n                    </div>\n                </div>\n                <div class="tabs">\n                    <span data-to="call-state" class="text-stress">通话</span>\n                    <span data-to="call-schedule" class="tab-schedule">预约回呼</span>\n                    <span data-to="call-message" class="tab-message">发短信</span>\n                    <i class="pointer green" style="width: 44px;"></i>\n                </div>\n            </div>\n            <div class="logout">\n                登录以使用电话条\n            </div>\n        </div>\n    </div>\n    <div class="content bg-gap">\n        <div class="transition">\n            <div class="tabsContent">\n                <div class="call-state tabc">\n                    <div class="normal-info">\n                        <div class="box queue">\n                            排队人数\n                            <div class="drop">\n                                <span class="text-stress">-</span>\n                                <svg class="icon arrow" viewBox="0 0 12 12"><use xlink:href="#arrow"></use></svg>\n                            </div>\n                        </div>\n                        <div class="box call-info">\n                            <p><label>今日通话时长</label><span class="timer text-stress">-</span></p>\n                            <p><label>今日通话次数</label><span class="timer text-stress">-</span></p>\n                        </div>\n                        <div class="box status-info">\n                            <p><label title="今日忙碌总时长">忙碌总时长</label><span class="timer text-stress">-</span></p>\n                            <p><label title="今日空闲总时长">空闲总时长</label><span class="timer text-stress">-</span></p>\n                        </div>\n                        <div class="box call-input">\n                            <a class="drop switchboard" href="javascript:void(0);" title="切换外呼总机号码">\n                                <svg class="icon telephone" viewBox="0 0 12 12"><use xlink:href="#switchboard"></use></svg>\n                                <i class="text-stress">系统分配</i>\n                                <svg class="icon arrow" viewBox="0 0 12 12"><use xlink:href="#arrow"></use></svg>\n                            </a>\n                            <div class="input">\n                                <input class="number" type="text" placeholder="请输入号码">\n                            </div>\n                            <a href="javascript:void(0);" class="icon dial is-disable">\n                                <svg class="icon green" viewBox="0 0 12 12"><use xlink:href="#call-answer"></use></svg>\n                            </a>\n                        </div>\n                    </div>\n\n                    <div class="calling-info">\n                        <div class="box incoming-base drop" title="查看详情">\n                            <div class="person">\n                                <span class="tel text-stress"></span>\n                                <span class="btn-action hidden" title=""><svg class="icon" viewBox="0 0 12 12"><use xlink:href="#more"></use></svg></span>\n                            </div>\n                            <div class="extra"></div>\n                            <svg class="icon arrow" viewBox="0 0 12 12"><use xlink:href="#arrow"></use></svg>\n                        </div>\n                        <div class="box hidden incoming-extra drop" title="查看详情"></div>\n                        <div class="action"></div>\n                    </div>\n                </div>\n\n                <div class="call-schedule tabc">\n                    <div class="schedule-wrap">\n                        <div class="box schedule-today" title="查看今日计划">\n                            今日计划<svg class="icon schedule" viewBox="0 0 12 12"><use xlink:href="#schedule"></use></svg>\n                            <div class="drop">\n                                <span class="text-stress">-</span>\n                                <svg class="icon arrow" viewBox="0 0 12 12"><use xlink:href="#arrow"></use></svg>\n                            </div>\n                        </div>\n                        <div class="schedule-list"><span class="is-loading"></span></div>\n                    </div>\n                </div>\n\n                <div class="call-message tabc">\n                    <div class="tel-input">\n                        <div class="calling-tag calling-tag-hidden"></div>\n                        <input class="tel-number" type="text" placeholder="输入或选择号码">\n                    </div>\n                    <div class="message-template-trigger">\n                        <span class="message-template-trigger-text message-template-trigger-selected">请选择发送内容</span>\n                        <svg class="icon arrow" viewBox="0 0 12 12"><use xlink:href="#arrow_down_small_line"></use></svg>\n                    </div>\n                    <div class="message-template-preview-box">\n                        <div class="message-template-preview-overflow">\n                            <div class="message-template-preview">\n                            </div>\n                        </div>\n                    </div>\n                    <a href="javascript:void(0);" class="icon send-message is-disable">\n                        <svg class="icon send-msg-icon" viewBox="0 0 24 24"><use xlink:href="#basic_send_fill"></use></svg>\n                    </a>\n                </div>\n            </div>\n\n            <div class="logout">\n                <span class="btn-login button button-primary">登录</span>\n                <%if (inClient) {%>\n                <span class="win-close button">关闭</span>\n                <%}%>\n                <div class="corner">\n                    <svg style="width: 80px;" viewBox="0 0 80 68"><use xlink:href="#logout"></use></svg>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <%if (inClient || moveable) {%>\n    <a href="javascript:void(0);" title="关闭" class="win-close icon"><svg viewBox="0 0 12 12"><use xlink:href="#close"></use></svg></a>\n\n    <a href="javascript:void(0);" class="toggle icon">\n        <span title="折叠电话条" class="collapse-b"><svg viewBox="0 0 20 20"><use xlink:href="#collapse-b"></use></svg></span>\n        <span title="展开电话条" class="collapse-a"><svg viewBox="0 0 20 20"><use xlink:href="#collapse-a"></use></svg></span>\n    </a>\n    <%}%>\n</div>\n'},function(e,t){e.exports="'use strict';\n\nvar qd = window.qd;\nvar stateManager = qd.stateManager;\nvar render = window.render;\nvar stateTpl = window.stateTpl;\nvar operations = window.operations;\nvar callTypeCode = window.callTypeCode;\nvar Timer = window.Timer;\nvar formatTime = window.formatTime;\nvar log = window.log;\nvar setInViewPort = window.setInViewPort;\nvar options = qd._getOptions();\nvar simple = options.simple;\nvar clientTip = {\n    client: 'PC客户端',\n    webrtc: 'WebRTC',\n    sip: 'SIP端'\n};\nvar client = clientTip[options.mode];\nvar $agentbar = $('.agentbar');\nvar silentAudioTipId = '';\n\nvar onlineStatus = {\n    idle: 1,\n    busy: 0,\n    rest: 99 };\nvar $rootEl = $(window.getRootEl());\nvar barWidth;\n\nsetTimeout(function () {\n    qd._debug() && console.log('log from main');\n}, 1000);\n\nfunction onRemove() {\n    qd.trigger('_destroyTimer');\n    qd.off('.mainFrame');\n}\n\nfunction onShow() {\n    barWidth = $rootEl.elems[0].style.width || (options.moveable ? '810px' : '100%');\n    $rootEl.elems[0].style.cssText += '--qd-bar-width:' + barWidth;\n}\n\nvar hideSilentAudioTip = function hideSilentAudioTip() {\n    if (!silentAudioTipId) return;\n    silentAudioTipId && notice.hide(silentAudioTipId);\n    silentAudioTipId = '';\n};\n\n(function topbar() {\n    var $pointer = $('.pointer');\n    var $taba = $('.tabs span');\n    var $tabc = $('.tabsContent');\n    var showTab = function showTab(taba) {\n        if (!taba) {\n            return;\n        }\n        var left = taba.offsetLeft;\n        var width = taba.offsetWidth;\n        var tab = taba.dataset.to;\n        $pointer.css({\n            transform: 'translate3d(' + left + 'px, 0, 0)',\n            width: width + 'px'\n        });\n        $taba.removeClass('text-stress');\n        taba.classList.add('text-stress');\n\n        var tabs_position = {\n            'call-state': 0,\n            'call-schedule': '-' + 100 / 3 + '%',\n            'call-message': '-' + 200 / 3 + '%'\n        };\n        $tabc.css({\n            transform: 'translate3d(0, ' + tabs_position[tab] + ', 0)'\n        });\n        qd.setState('currentTab', tab);\n        qd.trigger('_tabChange', tab);\n    };\n    $('.tabs').bind('click', function (e) {\n        if (e.target.dataset.to && !e.target.classList.contains('text-stress')) {\n            showTab(e.target);\n        }\n    });\n\n    qd.one('_changeTab.mainFrame', function (e, index) {\n        showTab($taba.elems[index || 0]);\n    });\n\n    qd.one('_staffInfoSynced.mainFrame', function () {\n        var state = qd.getState();\n        $('.agent-info span').text(state.name || '-');\n        $('.agent-info p').text(state.voiceNumber || '-');\n    });\n\n    qd.one('syncNetWorkState.mainFrame', function (e, res) {\n        $('.net').find('span').removeClass().addClass('level_' + res.level);\n    });\n\n    triggerFrame($('.menu'), 'menuFrame');\n\n    if (qd.env.inClient) {\n        var lastMouseDownTime;\n        $agentbar.bind('mousedown', function (e) {\n            var button = typeof e.which !== 'undefined' ? e.which : e.button;\n\n            if (button === 1) {\n                var now = Date.now();\n                if (lastMouseDownTime && now - lastMouseDownTime < 100) {\n                    return;\n                }\n                lastMouseDownTime = now;\n                qd.trigger('_mousedown.client');\n            }\n        });\n    }\n    $('.win-close').bind('click', function () {\n        qd.env.inClient ? qd.trigger('_close.client') : qd.hide();\n    });\n\n    function collapse(collapsed) {\n        var collapseState = qd.getState('isCollapsed');\n        var isCollapsed = typeof collapsed === 'boolean' ? collapsed : !collapseState;\n        if (collapseState !== isCollapsed) {\n            if (!isCollapsed && options.moveable) {\n                setInViewPort({\n                    width: parseInt(barWidth),\n                    height: 102,\n                    el: $rootEl.elems[0]\n                });\n            }\n\n            cssAnimate($rootEl.elems[0], [isCollapsed ? 'qd__collapse' : 'qd__expand']).then(function () {\n                isCollapsed && $rootEl.addClass('qd__mini');\n            });\n\n            document.body.classList[isCollapsed ? 'add' : 'remove']('is-collapsed');\n            !isCollapsed && $rootEl.removeClass('qd__mini');\n            qd.setState('isCollapsed', isCollapsed);\n        }\n    }\n\n    $('.toggle').bind('click', collapse);\n    qd.one('_online.stateChange.mainFrameHeader', function () {\n        $agentbar.addClass('is-online');\n    });\n    qd.one('_postEdit.stateChange.mainFrameHeader', function () {\n        collapse(false);\n        $agentbar.removeClass('is-online');\n    });\n    qd.one('_over.stateChange.mainFrameHeader', function () {\n        collapse(false);\n        $agentbar.removeClass('is-online');\n    });\n})();\n\n(function agentStatus() {\n    var $agentStatus = $('.agent-status');\n    var $callStatus = $('.call-status');\n    var $statusIcon = $agentStatus.find('.icon-status');\n    var $statusText = $agentStatus.find('p');\n    var $statusTimer = $('.status-info .timer');\n    var iconTpl = '<svg class=\"\" viewBox=\"0 0 12 12\"><use xlink:href=\"#<%=icon%>\"></use></svg>';\n    var timerWorkStatus = new Timer(function () {\n        return $agentStatus.find('.time');\n    });\n    var setStatusIcon = function setStatusIcon() {\n        var ccStatus = qd.getState('ccStatus');\n        var autoAnswer = qd.getState('autoAnswer');\n        var icons = ['busy', 'idle'];\n        var names = ['忙碌', '空闲'];\n        var icon = render(iconTpl)({ icon: autoAnswer ? 'auto-answer' : icons[ccStatus] || 'rest' });\n        $statusIcon.html(icon);\n        $statusText.text(names[ccStatus] || getRestName());\n    };\n    var agentAnalysisStatus = {};\n\n    qd.one('_destroyTimer.agentStatus.mainFrame', function () {\n        timerWorkStatus.destroy();\n    });\n\n    function onAutoAnswerChange(res) {\n        var bAuto = !!res.status;\n        qd.setState('autoAnswer', bAuto);\n        setStatusIcon();\n    }\n\n    function getRestName(id) {\n        var restList = qd.getState('restList');\n        var target = void 0;\n        id = id || qd.getState('restId');\n        target = restList && restList.filter(function (item) {\n            return item.id === id;\n        });\n        return target && target.length ? target[0].name : '';\n    }\n\n    var stateChangeOnAgentStatus = function stateChangeOnAgentStatus() {\n        qd.isCallingState() ? timerWorkStatus.pause() : timerWorkStatus.resume();\n    };\n    qd.one('stateChange.agentStatus', stateChangeOnAgentStatus);\n    stateChangeOnAgentStatus();\n\n    timerWorkStatus.start();\n    timerWorkStatus.onTick(function (time) {\n        var ccStatus = qd.getState('ccStatus');\n        if (ccStatus === onlineStatus.busy) {\n            var curTime = agentAnalysisStatus.uint64_current_status_time || 0;\n            curTime = (agentAnalysisStatus.uint64_busy_time || 0) - curTime;\n            time += Math.max(0, curTime);\n            $statusTimer.eq(0).text(formatTime(time));\n        } else if (ccStatus === onlineStatus.idle) {\n            var curTime = agentAnalysisStatus.uint64_current_status_time || 0;\n            curTime = (agentAnalysisStatus.uint64_idle_time || 0) - curTime;\n            time += Math.max(0, curTime);\n            $statusTimer.eq(1).text(formatTime(time));\n        }\n    });\n\n    triggerFrame($agentStatus, 'restFrame');\n    triggerFrame($callStatus, 'restFrame', undefined, undefined, function () {\n        var status = qd.getState('status');\n        return status !== 'calling' && status !== 'connect' && !qd.getState('isCollapsed');\n    });\n\n    function changeWorkStatusView(status, refresh) {\n        var state = qd.getState();\n        var restId = state.restId;\n        var ccStatus = state.ccStatus;\n        var el = $agentStatus.elems[0];\n\n        if (status === onlineStatus.idle) {\n            restId = -1;\n            el.classList.remove('red', 'blue');\n            el.classList.add('green');\n        } else if (status === onlineStatus.busy) {\n                restId = -1;\n                el.classList.remove('green', 'blue');\n                el.classList.add('red');\n            } else {\n                    restId = status;\n                    status = -1;\n                    el.classList.remove('red', 'green');\n                    el.classList.add('blue');\n                }\n\n        if (ccStatus !== status) {\n            timerWorkStatus.recount();\n        }\n\n        qd.setState({\n            restId: restId,\n            ccStatus: status\n        });\n        setStatusIcon();\n\n        refresh && qd.getAgentAnalysisStatus({\n            success: function success(res) {\n                agentAnalysisStatus = res && res.data || {};\n                timerWorkStatus.setTime(agentAnalysisStatus.uint64_current_status_time || 0);\n                $statusTimer.eq(0).text(formatTime(agentAnalysisStatus.uint64_busy_time || 0));\n                $statusTimer.eq(1).text(formatTime(agentAnalysisStatus.uint64_idle_time || 0));\n            }\n        });\n    }\n\n    function getWorkStatus() {\n        qd.getWorkStatus({\n            success: function success(res) {\n                var restId = qd.getState('restId');\n                changeWorkStatusView(restId > 99 ? restId : res.status, true);\n            }\n        });\n    };\n\n    function setDisposableSuccess(id, name) {\n        notice.success('设置成功');\n        qd.setState('disposableId', id);\n        if (qd.getState('status') === 'postEdit') {\n            $('#disposable').text(name);\n        }\n    }\n\n    qd.one('_syncAgentStatus.mainFrame', function (e, id) {\n        if (id !== undefined) {\n            agentAnalysisStatus.uint64_current_status_time = 0;\n            changeWorkStatusView(id);\n        } else {\n            getWorkStatus();\n        }\n    });\n    qd.one('_setAgentStatus.mainFrame', function (e, id, name) {\n        if (qd.isCallingState()) {\n            var curRestId = qd.getState('restId');\n            var ccStatus = qd.getState('ccStatus');\n\n            if (qd.getState('status') === 'postEdit' && curRestId > 99) {\n                setDisposableSuccess(id, name);\n                return;\n            }\n            qd.setDisposableStatus({\n                type: 1,\n                callid: qd.getState('callid'),\n                status: id,\n                prev_status: curRestId > 99 ? curRestId : ccStatus,\n                success: function success() {\n                    setDisposableSuccess(id, name);\n                },\n                fail: function fail(err) {\n                    notice.error(err.msg || '设置状态失败');\n                }\n            });\n        } else {\n            setWorkStatus(id);\n        }\n    });\n\n    qd.one('autoAnswerChange.mainFrame', function (e, res) {\n        onAutoAnswerChange(res);\n    });\n\n    qd.one('restStatusChange.mainFrame', function (e, res) {\n        var state = qd.getState();\n        var isRest = state.ccStatus === -1;\n        var isToRest = res.status > 99 && res.errCode === 0;\n        var onStatusSetted = function onStatusSetted(res) {\n            var st = ['', '空闲', '忙碌'];\n            var from = isRest ? '小休' : st[state.ccStatus] || '忙碌';\n            var to = isToRest ? '小休' : st[res.status] || '-';\n            if (from !== to) {\n                notice.info('\\u7BA1\\u7406\\u5458' + (res.name || '') + '\\u4FEE\\u6539\\u4E86\\u60A8\\u7684\\u72B6\\u6001\\uFF0C\\u4ECE' + from + '变为' + to, 0);\n            }\n        };\n\n        res.isPassive && onStatusSetted(res);\n\n        isToRest && changeWorkStatusView(res.status);\n    });\n\n    qd.one('onlineStatusChange.mainFrame', function (e, res) {\n        switch (res.status) {\n            case 0:\n                changeWorkStatusView(0);\n                $agentbar.addClass('offline');\n                notice.error(client + '已离线', 0);\n                break;\n            case 1:\n                changeWorkStatusView(qd.getState('ccStatus'));\n                loginSuccess(false);\n                break;\n        }\n\n        if (res.isPassive) {\n            var from = '小休';\n            var to = res.status === 1 ? '在线' : '离线';\n\n            notice.info('\\u7BA1\\u7406\\u5458' + (res.name || '') + '\\u4FEE\\u6539\\u4E86\\u60A8\\u7684\\u72B6\\u6001\\uFF0C\\u4ECE' + from + '变为' + to, 0);\n        }\n    });\n\n    qd.one('logout.mainFrame', function (e, res) {\n        if (res && res.errCode === 0) {\n            $agentbar.addClass('offline');\n            qd.hidePage();\n\n            if (res.isPassive) {\n                var state = qd.getState();\n                var st = ['忙碌', '空闲'];\n                var isRest = state.ccStatus === -1;\n                var from = isRest ? '小休' : st[state.ccStatus] || '-';\n                notice.info('\\u7BA1\\u7406\\u5458' + (res.name || '') + '\\u4FEE\\u6539\\u4E86\\u60A8\\u7684\\u72B6\\u6001\\uFF0C\\u4ECE' + from + '变为未登录状态', 0);\n            }\n        } else {\n            notice.error('退出登录失败');\n        }\n    });\n\n    if (qd._webrtcReady) {\n        loginSuccess();\n    }\n    qd.one('webrtcReady.mainFrame', loginSuccess);\n\n    qd.one('_agentLogin', function () {\n        var mode = options.mode;\n\n        mode !== 'webrtc' && agentLogin(false);\n        getDailyCallInfo(true);\n    });\n\n    qd.one('agentReset.mainFrame', function (e, res) {\n        if (res.errCode === 0) {\n            loginSuccess(true, '重置完成');\n        } else {\n            notice.error('重置登录状态失败');\n        }\n    });\n\n    qd.one('ccLoginStatusChange.mainFrame', loginStatusChange);\n\n    $('.btn-login').bind('click', function () {\n        agentLogin();\n    });\n\n    function loginSuccess() {\n        var show = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n        var msg = arguments[1];\n\n        $agentbar.removeClass('offline');\n        notice.clear();\n\n        qd.getRestStatus({\n            success: function success(res) {\n                if (res.status > 1) {\n                    var id = res.status;\n                    changeWorkStatusView(id);\n                    qd.setState('restId', id);\n                }\n            }\n        });\n\n        qd.getAutoAnswer({\n            success: function success(res) {\n                onAutoAnswerChange(res);\n            }\n        });\n\n        qd.getAnswerType({\n            success: function success(res) {\n                var answerType = res.answer_type;\n                qd.setState({\n                    answerType: answerType\n                });\n                qd.trigger('_syncAnswerType', answerType);\n            }\n        });\n\n        qd.syncState(function () {\n            setTimeout(function () {\n                getWorkStatus();\n                qd.trigger('_loginComplete');\n            }, 0);\n        });\n\n        qd.getHardwareMode();\n\n        timerWorkStatus.resume();\n    }\n\n    function agentLogin() {\n        var show = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n        var cb = arguments[1];\n\n        if (options.mode === 'webrtc') {\n            if (qd._webrtcReady) {\n                loginSuccess();\n            }\n            qd.trigger('_relogin');\n            return;\n        }\n\n        qd.isAgentLogin({\n            kfext: qd.getState('callKfext'),\n            success: function success(res) {\n                if (res.status === 0) {\n                    $agentbar.addClass('offline');\n                } else {\n                    loginSuccess(show);\n                    cb && cb();\n                }\n            },\n            fail: function fail() {\n                show && notice.error(client + '尚未登录');\n                $agentbar.addClass('offline');\n                qd.trigger('_loginComplete');\n            }\n        });\n    }\n\n    function loginStatusChange(e, res) {\n        if (res.errCode === 0 && res.status === 1) {\n            loginSuccess(true);\n        } else {\n            $agentbar.addClass('offline');\n            notice.error(client + '尚未登录');\n        }\n\n        if (res.isPassive) {\n            var from = '';\n            var to = '';\n            if (res.status === 1) {\n                from = '签出';\n                to = '签入';\n            } else {\n                from = '签入';\n                to = '签出';\n            }\n            notice.info('\\u7BA1\\u7406\\u5458' + (res.name || '') + '\\u4FEE\\u6539\\u4E86\\u60A8\\u7684\\u72B6\\u6001\\uFF0C\\u4ECE' + from + '变为' + to, 0);\n        }\n    };\n\n    qd.one('disconnect.mainFrame', function (e, reason) {\n        noticeWarning.clear();\n        noticeWarning.notify({\n            type: 'error',\n            duration: 60 * 60 * 24,\n            data: {},\n\n            html: '<span class=\"relogin\" data-id=\"<%=__id%>\" data-action=\"relogin\">\\u91CD\\u65B0\\u767B\\u5F55</span> ' + (reason === 'socketbreak' ? '您的账号被踢下线' : '当前连接已断开') + '\\uFF0C\\u8BF7\\u91CD\\u65B0\\u767B\\u5F55'\n        });\n        timerWorkStatus.pause();\n    });\n\n    qd.one('logout.agentStatus', function () {\n        timerWorkStatus.stop();\n    });\n    qd.one('login.agentStatus', function () {\n        timerWorkStatus.start();\n    });\n\n    qd.one('notice.relogin', function () {\n        qd.connect();\n    });\n\n    qd.one('connect.mainFrame', function () {\n        noticeWarning.clear();\n        agentLogin();\n    });\n})();\n\n(function call() {\n    var $dial = $('.dial');\n    var $number = $('.number');\n    var numberEl = $number.elems[0];\n    var $switchboard = $('.switchboard');\n    var $switchboardLabel = $switchboard.find('i');\n    var telReg = /^\\s*\\+?(\\d+[-\\s]*){3,}$/;\n\n    function makeCall() {\n        var state = qd.getState();\n        var type = parseInt(state.answerType, 10) === 1 ? 4 : 1;\n        qd.agentMakeCall({\n            phone_number: state.tel,\n            num_display_type: 3,\n            client_account_type: type,\n            fail: function fail(res) {\n                getDailyCallInfo();\n                notice.error(res.msg || '呼叫失败');\n                qd.setState('status', 'over');\n            }\n        });\n    }\n\n    var onCurrentSwitchboardNumberChange = function onCurrentSwitchboardNumberChange() {\n        var state = qd.getState();\n        var label;\n        if (!state.currentSwitchboardNumber) {\n            label = '系统分配';\n        } else {\n            var numFormatted = qd.formatTel(state.currentSwitchboardNumber);\n            var numFormattedGetted = qd.getFormattedNumber(state.currentSwitchboardNumber);\n            label = numFormatted + (numFormattedGetted === numFormatted || !numFormattedGetted ? '' : '(' + numFormattedGetted + ')');\n        }\n        $switchboardLabel.text(label);\n    };\n\n    qd.one('currentSwitchboardNumber.change.mainFrame', onCurrentSwitchboardNumberChange);\n    onCurrentSwitchboardNumberChange();\n\n    var dial = function dial(tel, isToCall) {\n        if (!telReg.test(tel)) {\n            notice.error('请输入正确号码');\n        } else {\n            $number.elems[0].value = qd.formatTel(tel);\n            tel = tel.replace(/\\s*/g, '');\n            $dial.removeClass('is-disable');\n            if (isToCall) {\n                qd.resetState({\n                    status: 'connect',\n                    CustomerNum: tel,\n                    direction: 'callout'\n                });\n                makeCall();\n            }\n        }\n    };\n    qd.one('dial.mainFrame', function (e, data) {\n        var data = data || {};\n\n        if (!data.DisplayNumType || data.DisplayNumType === 3) {\n            dial(data.tel, data.isToCall);\n        }\n    });\n\n    qd.one('_over.stateChange.mainFrame', function () {\n        $number.elems[0].value = '';\n        $dial.addClass('is-disable');\n    });\n\n    $dial.bind('click', function () {\n        if ($(this).is('.is-disable')) {\n            return;\n        }\n        log.$log('user click makecall');\n        var tel = $number.elems[0].value;\n        dial(tel, true);\n    });\n\n    function onInput() {\n        var pass = telReg.test(numberEl.value);\n        numberEl.value = qd.formatTel(numberEl.value);\n        $dial[pass ? 'removeClass' : 'addClass']('is-disable');\n    }\n\n    $number.bind('keyup', function (e) {\n        onInput();\n        if (e.keyCode === 13) {\n            $dial.elems[0].click();\n        }\n    });\n\n    $number.bind('paste', function () {\n        setTimeout(onInput, 0);\n    });\n\n    $number.bind('mousedown', function (e) {\n        e.stopPropagation();\n    });\n\n    triggerFrame($('.switchboard'), 'switchboardFrame');\n})();\n\n(function queue() {\n    if (simple) {\n        return;\n    }\n\n    var $queueLabel = $('.queue span');\n    var queueTimer = new Timer();\n    var initerval = 20;\n    queueTimer.onTick(function (time) {\n        if (time % initerval === 0) {\n            qd.syncCountInQueue().then(function (queue) {\n                $queueLabel.text(queue.count !== undefined ? queue.count : '-');\n            });\n        }\n    });\n\n    qd.one('getQueueCountList.stop', function () {\n        queueTimer.stop();\n    });\n\n    qd.one('_destroyTimer.queue.mainFrame', function () {\n        queueTimer.destroy();\n    });\n\n    qd.one('_refreshQueCount.queue', function () {\n        var queue = qd.getState('queue') || {};\n        $queueLabel.text(queue.count !== undefined ? queue.count : '-');\n    });\n\n    var stateChangeOnQueue = function stateChangeOnQueue() {\n        qd.isCallingState() ? queueTimer.stop() : queueTimer.recount();\n    };\n    qd.one('stateChange.queue', stateChangeOnQueue);\n    stateChangeOnQueue();\n\n    qd.one('destroyed.queue', function () {\n        queueTimer.stop();\n    });\n    qd.one('disconnect.queue', function () {\n        queueTimer.stop();\n    });\n    qd.one('logout.queue', function () {\n        queueTimer.stop();\n    });\n    qd.one('connect.queue', function () {\n        !qd.isCallingState() && queueTimer.recount();\n    });\n    qd.one('login.queue', function () {\n        !qd.isCallingState() && queueTimer.recount();\n    });\n\n    triggerFrame($('.queue'), 'queueFrame');\n})();\n\n(function message() {\n    var $telNumber = $('.tel-number');\n    var $tag = $('.calling-tag');\n    var $sendMessage = $('.send-message');\n    var msgCallId = '';\n    var callingTelMode = false;\n    var msgFinishCheck = function msgFinishCheck(callingTel) {\n        var tel = $telNumber.elems[0].value;\n        if (callingTel) {\n            tel = callingTel;\n        }\n        var finishedMsgTemp = qd.getState('finishedMsgTemp');\n        var telReg = /^\\s*\\+?(\\d+[-\\s]*){3,}$/;\n        var telPass = telReg.test(tel);\n        var tempPass = Boolean(finishedMsgTemp && finishedMsgTemp.temp && finishedMsgTemp.temp.id);\n\n        var pass = telPass && tempPass;\n        $sendMessage[pass ? 'removeClass' : 'addClass']('is-disable');\n        if (callingTel) {\n            $telNumber.elems[0].value = qd.formatTel(callingTel);\n            callingTelMode = true;\n            $sendMessage.elems[0].click();\n        }\n    };\n    var initLatestTemp = function initLatestTemp() {\n        qd.handle({\n            action: 'msgTemplateList',\n            params: {\n                keyword: '',\n                count: 15,\n                type: 0,\n                index: 1\n            },\n            success: function success(res) {\n                var access = res.data.access;\n                qd.setState('msgTempAccess', access);\n                if (!access) {\n                    var latestTemp = qd.getState('finishedMsgTemp') || qd.getState('latestTemp', true);\n                    if (latestTemp) {\n                        $('.message-template-trigger-text').html(latestTemp.temp ? latestTemp.temp.name || '' : '');\n                        $('.message-template-preview').html(latestTemp.temp ? latestTemp.temp.text || '' : '');\n                        $('.message-template-trigger-text').removeClass('message-template-trigger-selected');\n                        msgFinishCheck();\n                        qd.setState('finishedMsgTemp', latestTemp);\n                    }\n                }\n            },\n            fail: function fail(err) {\n                notice.error(err.msg || '获取短信模板失败');\n            }\n        });\n    };\n    initLatestTemp();\n    $sendMessage.bind('click', function (e, args) {\n        var tel = $telNumber.elems[0].value;\n        var finishedMsgTemp = qd.getState('finishedMsgTemp');\n        var disabled = $sendMessage.hasClass('is-disable');\n        if (disabled) {\n            callingTelMode = false;\n            return;\n        }\n        var params = {\n            phone_number: tel.replaceAll(' ', ''),\n            sms_template_id: finishedMsgTemp.temp.id\n        };\n        qd.handle({\n            action: 'sendTemplateMessage',\n            params: params,\n            success: function success(res) {\n                qd.setState('latestTemp', finishedMsgTemp, false, true);\n                notice.success('短信已发送');\n                if (!callingTelMode) {\n                    $telNumber.elems[0].value = '';\n                    $tag.addClass('calling-tag-hidden');\n                    msgFinishCheck();\n                }\n            },\n            fail: function fail(err) {\n                notice.error(err.msg || '系统错误，请重新发送');\n            }\n        });\n        callingTelMode = false;\n    });\n    $telNumber.bind('keyup', function (e) {\n        this.value = qd.formatTel(this.value);\n        qd.hidePage('historyListFrame');\n        msgFinishCheck();\n    });\n    $telNumber.bind('focus', function (e) {\n        $tag.addClass('calling-tag-hidden');\n    });\n    triggerFrame($('.tel-input'), 'historyListFrame');\n    triggerFrame($('.message-template-trigger'), 'messageTemplateFrame');\n    var stateChangeOnCallingStatus = function stateChangeOnCallingStatus() {\n        var status = qd.getState('status');\n        var currentCallId = qd.getState('callid');\n        var currentStatus = qd.getState('status');\n        if (msgCallId !== currentCallId || currentStatus === 'over') {\n            msgCallId = currentCallId;\n            if (currentStatus === 'over') {\n                $tag.html('最近通话');\n                msgCallId = '';\n            } else {\n                $tag.html('正在通话');\n            }\n            $tag.removeClass('calling-tag-hidden');\n            var tel = qd.formatTel(qd.getState('tel') || '') || '';\n            $telNumber.elems[0].value = tel;\n            msgFinishCheck();\n        }\n    };\n    var stateChangeOnMsgTelNumber = function stateChangeOnMsgTelNumber(e, tel) {\n        if (tel) {\n            tel = qd.formatTel(tel) || '';\n            $telNumber.elems[0].value = tel;\n            msgFinishCheck();\n        }\n    };\n    var stateChangeOnMsgTemp = function stateChangeOnMsgTemp() {\n        var finishedMsgTemp = qd.getState('finishedMsgTemp');\n        $('.message-template-trigger-text').html(finishedMsgTemp.temp.name);\n        $('.message-template-preview').html(finishedMsgTemp.temp.text);\n        $('.message-template-trigger-text').removeClass('message-template-trigger-selected');\n        msgFinishCheck();\n    };\n    var stateChangeOnMsgTempSend = function stateChangeOnMsgTempSend(e, tel) {\n        var finishedMsgTemp = qd.getState('finishedMsgTemp');\n        $('.message-template-trigger-text').html(finishedMsgTemp.temp.name);\n        $('.message-template-preview').html(finishedMsgTemp.temp.text);\n        $('.message-template-trigger-text').removeClass('message-template-trigger-selected');\n        msgFinishCheck(tel);\n    };\n    qd.one('stateChange.msgCallingStatus', stateChangeOnCallingStatus);\n    qd.one('_msgTelNumber', stateChangeOnMsgTelNumber);\n    qd.one('_messageTemplateFrame', stateChangeOnMsgTemp);\n    qd.one('_messageTemplateFrameSend', stateChangeOnMsgTempSend);\n})();\n\n(function schedule() {\n    var $tab = $('.tab-schedule').elems[0];\n    var $schedule = $('.schedule-list');\n    var $count = $('.schedule-today .text-stress');\n\n    var $container;\n    var $btnLeft;\n    var $btnRight;\n    var $list;\n\n    var maxLeft = 0;\n    var left = 0;\n    function refreshMaxLeft() {\n        if ($btnLeft) {\n            var nums = $list.find('li').elems.length;\n            var containerWidth = $container.elems[0].offsetWidth;\n            maxLeft = Math.min(nums * -223 + containerWidth + 8, 0);\n        }\n    }\n    qd.one('_tabChange.schedule', function (e, tab) {\n        if (tab === 'call-schedule') {\n            $tab.classList.remove('new');\n            qd.setState('scheduleUnread', false);\n            refreshMaxLeft();\n            if (maxLeft === 0) {\n                $btnRight && $btnRight.classList.add('disabled');\n            }\n\n            fetchScheduleList();\n        }\n    });\n    function move(isLeft) {\n        if (isLeft) {\n            left += 223;\n            left = Math.min(left, 0);\n        } else {\n            left -= 223;\n            left = Math.max(left, maxLeft);\n        }\n        $list.css('transform', 'translateX(' + left + 'px)');\n        if (isLeft) {\n            $btnRight.classList.remove('disabled');\n            left === 0 && $btnLeft.classList.add('disabled');\n        } else {\n            $btnLeft.classList.remove('disabled');\n            left === maxLeft && $btnRight.classList.add('disabled');\n        }\n    }\n\n    triggerFrame($('.schedule-today'), 'scheduleFrame');\n\n    function renderScheduleList() {\n        var scheduleData = qd.getState('scheduleData') || {};\n        $count.text(scheduleData.total);\n        $schedule.html(renderFactory.renderScheduleList(scheduleData));\n        $container = $schedule.find('.schedule-content');\n        $btnLeft = $schedule.find('.is-left').elems[0];\n        $btnRight = $schedule.find('.is-right').elems[0];\n        $list = $schedule.find('ul');\n        $('.btn-move').bind('click', function (e) {\n            var isLeft = e.currentTarget.dataset.dir === 'left';\n            move(isLeft);\n        });\n        refreshMaxLeft();\n    }\n\n    qd.one('notice.callback', function (e, data) {\n        if (qd.isCallingState()) {\n            notice.error('请在本次通话结束后，再发起新通话');\n            return;\n        }\n        qd.handle({\n            action: 'call',\n            params: {\n                id: data.sid\n            },\n            fail: function fail(err) {\n                notice.error(err.msg || '回呼失败');\n            }\n        });\n        noticeCustom.hide(data.id);\n    });\n    qd.one('notice.openUrl', function (e, data) {\n        qd.trigger('_openUrl', data.url);\n        qd.env.inClient && noticeCustom.hide(data.id);\n    });\n\n    qd.one('pushEvent.schedule', function (e, res) {\n        var data = res.data;\n        var id = data.id || data.info.id;\n\n        if (res.event === 'scheduleOnTime') {\n            noticeCustom.notify({\n                type: 'info',\n                closeAble: true,\n\n                data: qd.assign(data, {\n                    decodeURIComponent: window.decodeURIComponent,\n                    inClient: qd.env.inClient,\n                    time: qd.format('Y-m-d H:i', data.time)\n                }),\n\n                html: '您有一个预约回呼计划：<span class=\"n-msg\"><%=data.customerName%> <%=data.time%> <%=data.decodeURIComponent(data.remark || data.remarks || \"\")%></span> <span class=\"notice-action <%=data.inClient ? \\\"\\\" : \\\"hidden\\\"%>\" data-id=\"<%=__id%>\" data-action=\"callback\" data-sid=\"<%=data.id%>\">立即回呼</span> <a data-id=\"<%=__id%>\" data-action=\"openUrl\" data-url=\"<%=data.url%>\" <%=data.inClient ? \"click.prevent\" : \"\"%> href=\"<%=data.url%>\" target=\"_blank\">查看</a>'\n            });\n            return;\n        }\n\n        if (res.event === 'scheduleListChange') {\n            var scheduleData = qd.getState('scheduleData') || {};\n            var list = scheduleData.records;\n            var tab = qd.getState('currentTab');\n\n            if (data.type === 1) {\n                for (var i = 0; i < list.length; i++) {\n                    if (list[i].id == id) {\n                        return;\n                    }\n                }\n                list.unshift(data.info);\n                ++scheduleData.total;\n                if (tab === 'call-schedule') {\n                    notice.success('预约回呼计划创建成功');\n                } else {\n                    $tab.classList.add('new');\n                    qd.setState('scheduleUnread', true);\n                }\n            } else {\n                deleteScheduleList(id);\n                return;\n            }\n\n            renderScheduleList();\n        }\n    });\n\n    function deleteScheduleList(ids) {\n        var scheduleData = qd.getState('scheduleData') || {};\n        var list = scheduleData.records;\n        var ids = ids || [];\n        ids.forEach(function (id) {\n            var index = -1;\n            for (var i = 0; i < list.length; i++) {\n                if (list[i].id == id) {\n                    index = i;\n                    break;\n                }\n            }\n            if (index > -1) {\n                list.splice(index, 1);\n                --scheduleData.total;\n            }\n        });\n        renderScheduleList();\n    }\n\n    qd.one('_deleteSchedules.schedule', function (e, ids) {\n        deleteScheduleList([ids]);\n    });\n\n    qd.one('_schedulesInfoChanged.schedule', function (e, id) {\n        renderScheduleList();\n    });\n\n    function fetchScheduleList() {\n        qd.handle({\n            action: 'getScheduleList',\n            params: {\n                index: 1,\n                count: 50,\n                kfext: qd.getState('callKfext'),\n                filter: {\n                    currentDay: 1,\n                    sortKey: 'time',\n                    sortType: 'asc'\n                }\n            },\n            success: function success(res) {\n                if (res.data && !res.data.records) {\n                    res.data.records = [];\n                }\n                qd.setState('scheduleData', res.data);\n                renderScheduleList();\n            },\n            fail: function fail(res) {\n                qd.setState('scheduleData', { errorMsg: '\\u62C9\\u53D6\\u9884\\u7EA6\\u56DE\\u547C\\u8BA1\\u5212\\u5931\\u8D25 ' + (res.msg || '') });\n                renderScheduleList();\n            }\n        });\n    }\n\n    qd.one('ready.schedule', function () {\n        fetchScheduleList();\n    });\n\n    $schedule.bind('click', function (e) {\n        var el = $(e.target).findParent('li');\n        if (el) {\n            var id = el.dataset.id;\n            qd.showPage({\n                trigger: e.target,\n                name: 'callOnTimeFrame',\n                params: id\n            });\n        }\n    });\n})();\n\n(function callingStateRender() {\n    var $callStatus = $('.call-status');\n    var $state = $callStatus.find('.state');\n    var $incomingBase = $('.incoming-base');\n    var $incomingExtra = $('.incoming-extra');\n    var $incomingBaseExtra = $incomingBase.find('.extra');\n    var $action = $('.call-state .action');\n    var $customerName = $incomingBase.find('.tel');\n    var $customerAction = $incomingBase.find('.btn-action');\n    var timerAgentStatus = new Timer(function () {\n        return $callStatus.find('.timer');\n    });\n\n    qd.one('_destroyTimer.callingStateRender.mainFrame', function () {\n        timerAgentStatus.destroy();\n    });\n\n    var getLimitedName = function getLimitedName(str) {\n        var len = 0;\n        str = str || '';\n        len = /[^\\x00-\\xff]/.test(str) ? 4 : 8;\n        return str.substr(0, len) + (str.length > len ? '..' : '');\n    };\n\n    var renderCustomerNameAndAction = function renderCustomerNameAndAction() {\n        var callType = qd.getState('callType');\n        var role = qd.getState('role');\n        var customerName = qd.formatTel(qd.getState('customerName') || qd.getState('tel'));\n        var callName = qd.formatTel(qd.getState('callName'));\n        var transtor = qd.getState('transtor') || {};\n        var multi = qd.getState('multi');\n        var name = '';\n        var isBcard = false;\n        var sepor = '\\x00+\\x00';\n\n        if (callType === callTypeCode.consult && !multi) {\n            name = callName;\n            isBcard = true;\n        } else if (multi) {\n            if (transtor.bMultiOut) {\n                name = customerName;\n            } else if (transtor.cMultiOut) {\n                name = callName;\n                isBcard = true;\n            } else {\n                    name = customerName + ' ' + sepor + ' ' + callName;\n                }\n        } else if (callType === callTypeCode.monitor && role === 'b2') {\n                name = customerName + ' ' + sepor + ' ' + callName;\n                isBcard = true;\n            } else if (callType === callTypeCode.breakIn) {\n                    if (transtor.bMultiOut) {\n                        name = customerName;\n                    } else if (transtor.cMultiOut) {\n                        name = callName;\n                        isBcard = true;\n                    } else {\n                        name = customerName + ' ' + sepor + ' ' + callName;\n                    }\n                } else if (transtor.history && transtor.history[0] === 'consult') {\n                        if (transtor.operator === 'customer') {\n                            name = callName;\n                            isBcard = true;\n                        } else {\n                            name = customerName;\n                        }\n                    } else if (role === 'b2' && transtor.operator === 'customer') {\n                            name = callName;\n                            isBcard = true;\n                        } else {\n                            name = customerName;\n                        }\n\n        $incomingBase[isBcard ? 'addClass' : 'removeClass']('multis');\n        callInfoLoaded && $incomingExtra[isBcard ? 'addClass' : 'removeClass']('hidden');\n        var nameSplits = name.split(/\\s*\\x00\\+\\x00\\s*/);\n        if (nameSplits.length === 2 && nameSplits[0]) {\n            var dname = getLimitedName(nameSplits[0]) + ' + ' + getLimitedName(nameSplits[1]);\n            $customerName.text(dname);\n        } else {\n            $customerName.text(name);\n        }\n        $customerName.elems[0].setAttribute('title', name);\n\n        if (!isBcard) {\n            $customerAction.removeClass('hidden');\n        }\n    };\n    var resetCallingCard = function resetCallingCard() {\n        $customerName.text('');\n        $customerAction.addClass('hidden');\n        $incomingBaseExtra.text('');\n        $incomingExtra.addClass('hidden');\n        callInfoLoaded = false;\n    };\n\n    var callInfoLoaded = false;\n    var renderCallInfo = function renderCallInfo() {\n        renderFactory.renderIncomingExtra().then(function (html) {\n            !/^\\s*$/.test(html[0]) && $incomingExtra.removeClass('hidden').html(html[0]) && (callInfoLoaded = true);\n            $incomingBaseExtra.html(html[1]);\n        }).catch(function () {\n            $incomingExtra.addClass('hidden');\n        });\n    };\n\n    qd.one('_currentSwitchboardGroup.mainFrame', function (e, group) {\n        $('#numGroupName').html('&nbsp;' + group);\n    });\n\n    var renderTimerAndCallAction = function renderTimerAndCallAction(status, lastStatus) {\n        $state.html(renderFactory.renderCallStatus());\n        timerAgentStatus.setEle();\n\n        $action.html(renderFactory.renderOperators());\n        bindAction();\n\n        switch (status) {\n            case 'connect':\n                if (lastStatus !== 'connect') {\n                    timerAgentStatus.start();\n                }\n                break;\n            case 'calling':\n                if (lastStatus === 'normal' || lastStatus === 'over' || lastStatus === 'connect') {\n                    timerAgentStatus.recount();\n                }\n                break;\n            case 'consult':\n            case 'multi':\n            case 'monitor':\n            case 'breakIn':\n            case 'online':\n                if (lastStatus && lastStatus !== status && 'hold|consult|multi|monitor|breakIn'.indexOf(lastStatus) === -1) {\n                    timerAgentStatus.recount();\n                }\n                break;\n            case 'hold':\n                break;\n            case 'postEdit':\n                timerAgentStatus.recount();\n                break;\n            case 'over':\n                timerAgentStatus.stop();\n        }\n    };\n\n    var getCallerName = function getCallerName(callType, role) {\n        if (callType === callTypeCode.consult && role === 'b1' && qd.getState('callName')) {\n            return qd.resolve(qd.getState('callName'));\n        }\n        var callOperator = qd.getState('callOperator');\n        var callOperatored = qd.getState('callOperatored');\n        var isMonitor = callType === callTypeCode.monitor || callType === callTypeCode.breakIn;\n        var isConsult = callType === callTypeCode.consult;\n        return qd.syncStaffInfo(isMonitor && role === 'b2' || isConsult && role === 'b1' ? callOperatored : callOperator).then(function (res) {\n            var callName = res.name || res.cname || res.ename || qd.formatTel(callOperator);\n            qd.setState('callName', callName);\n            return callName;\n        });\n    };\n\n    qd.env.inClient && qd.one('tel.change.dial', function (e, tel) {\n        qd.syncCustomerInfo(tel);\n        renderCallInfo();\n    });\n\n    var stateChangeOnRender = function stateChangeOnRender(e, status, lastStatus) {\n        var callType = qd.getState('callType');\n        var isConsult = callType === callTypeCode.consult;\n        var isTransfer = callType === callTypeCode.transfer;\n        var isMonitor = callType === callTypeCode.monitor;\n        var isBreakIn = callType === callTypeCode.breakIn;\n\n        if (status === 'postEdit') {\n            qd.setState('mute', false);\n        }\n\n        if (status === 'over') {\n            timerAgentStatus.stop();\n            qd.hidePage();\n            resetCallingCard();\n            getDailyCallInfo();\n            return;\n        }\n\n        if (qd.isCallingState(status, true) && !qd.isCallingState(lastStatus, true)) {\n            renderCallInfo();\n\n            qd.syncCustomerInfo().then(function () {\n                if (qd.getState('currentTab') === 'call-schedule' && status === 'calling') {\n                    ringpop();\n                }\n            }).catch(function () {});\n        }\n        renderCustomerNameAndAction();\n\n        if (isTransfer || isConsult || isMonitor || isBreakIn) {\n            var role = qd.getState('role');\n            getCallerName(callType, role).then(function (callName) {\n                if (status === 'calling' && (isTransfer || isConsult && role === 'b2')) {\n                    var opStr = callType === callTypeCode.transfer ? '转接' : '咨询';\n                    var marquee = '\\u6765\\u81EA' + callName + opStr + '\\u6765\\u7535';\n                    $state.html(renderFactory.renderMarquee(marquee, timerAgentStatus.getTimeStr()));\n                    timerAgentStatus.resume();\n                    renderCustomerNameAndAction();\n                } else {\n                    renderTimerAndCallAction(status, lastStatus);\n                    renderCustomerNameAndAction();\n                }\n            });\n        }\n\n        renderTimerAndCallAction(status, lastStatus);\n    };\n    qd.one('stateChange.callingStateRender', stateChangeOnRender);\n    stateChangeOnRender(null, qd.getState('status'), 'normal');\n\n    var hangup = function hangup() {\n        var state = qd.getState();\n\n        if (qd.isPSTN() && state.status === 'calling') {\n            notice.info('电话还未接通，请在手机端挂断电话');\n            return false;\n        }\n\n        qd.setState('status', 'over');\n\n        return true;\n    };\n\n    var changeTab = function changeTab(index) {\n        qd.trigger('_changeTab', index);\n    };\n    var ringPopId = '';\n    var ringpop = function ringpop() {\n        var customerName = qd.getState('customerName');\n        var nextState = qd.getState('nextState');\n        var pos = nextState.Phonenumpos;\n        ringPopId = noticeCustom.notify({\n            type: 'info',\n            className: 'ring',\n            closeAble: false,\n            duration: 6000,\n            data: {\n                customerName: customerName,\n                pos: pos\n            },\n            html: '\\n                <span class=\"name\"><%=data.customerName%></span> <%=data.pos%>\\n                <span href=\"javascript:;\" title=\"\\u6302\\u65AD\" class=\"pop_hangup red icon\" data-action=\"hangup\" data-id=\"<%=__id%>\">\\n                    <svg viewBox=\"0 0 34 34\"><use xlink:href=\"#action-hangup\"></use></svg>\\n                </span>\\n                <span title=\"\\u63A5\\u542C\" class=\"answer ringing green icon\" data-action=\"answer\" data-id=\"<%=__id%>\">\\n                    <svg viewBox=\"0 0 12 12\"><use xlink:href=\"#call-answer\"></use></svg>\\n                </span>\\n            '\n        });\n    };\n    var hideRingPop = function hideRingPop() {\n        ringPopId && noticeCustom.hide(ringPopId);\n        ringPopId = '';\n        hideSilentAudioTip();\n    };\n    qd.one('notice.answer', function () {\n        log.$log('user click button:\\u63A5\\u542C, from popRing');\n        qd.answer({\n            callid: qd.getState('callid'),\n            success: function success() {\n                changeTab(0);\n            },\n            fail: function fail(err) {\n                notice.error(err.msg || '电话接听出错');\n            }\n        });\n        hideRingPop();\n    });\n    qd.one('notice.hangup', function () {\n        log.$log('user click button:\\u6302\\u65AD, from popRing');\n        qd.hangup({\n            callid: qd.getState('callid')\n        });\n        hangup();\n        hideRingPop();\n    });\n    qd.one('stateChange.ringPop', function (e, status) {\n        if (status !== 'calling') {\n            hideRingPop();\n            qd.isCallingState() && changeTab(0);\n        }\n    });\n    qd.one('_tabChange.ringPop', function (e, tab) {\n        if (tab === 'call-state') {\n            hideRingPop();\n        }\n    });\n\n    qd.one('newCustomer.mainFrame', function (e, res) {\n        var state = qd.getState();\n        var customerNum = qd.formatTel(state.tel);\n        var tel = qd.formatTel(res.tel);\n\n        if (customerNum === tel && tel !== '-') {\n            qd.setState({\n                customerName: res.name || state.customerName,\n                customerType: res.type,\n                cuin: res.customerId\n            });\n            renderCustomerNameAndAction();\n        }\n    });\n\n    qd.one('_callbackOnTimeSaved.render', function () {\n        renderCustomerNameAndAction();\n    });\n\n    qd.one('_customerInfoSynced.callingStateRender', function () {\n        renderCustomerNameAndAction();\n    });\n\n    qd.one('muteState.callingStateRender', function (e, res) {\n        var isMute = res.IsMute === 1;\n        qd.setState('mute', isMute);\n        renderTimerAndCallAction(qd.getState('status'));\n    });\n\n    qd.one('_multiOut.mainFrame', function (e, name, who) {\n        var cName = qd.getState(who === 'c' ? 'callName' : 'customerName');\n        qd.isCallingState() && notice.info(name + ' 已退出三方通话');\n        $customerName.text(cName);\n    });\n\n    qd.one('_transfer.mainFrame', function (e, msg, type) {\n        notice.notify({\n            type: type,\n            message: msg\n        });\n    });\n\n    triggerFrame($('.incoming-base'), 'customerInfoFrame');\n\n    triggerFrame($('.incoming-extra'), 'callInfoFrame');\n\n    var toggleingHoldState = false;\n    var toggleingHoldStateTimeout;\n    function toggleHold(hold) {\n        var state = qd.getState();\n        clearTimeout(toggleingHoldStateTimeout);\n        toggleingHoldState = true;\n        qd.hold({\n            callid: state.callid,\n            hold: hold ? 1 : 0,\n            success: function success() {\n                qd.setState('status', hold ? 'hold' : 'online');\n            },\n            fail: function fail(res) {\n                notice.error(res.msg || '更改保持状态失败');\n            },\n            complete: function complete() {\n                toggleingHoldStateTimeout = setTimeout(function () {\n                    toggleingHoldState = false;\n                }, 500);\n            }\n        });\n    }\n\n    function bindAction() {\n        $('.play').bind('click', function () {\n            if (toggleingHoldState) {\n                return;\n            }\n            log.$log('user click button:' + (this.title || this.datset && this.datset.name));\n            toggleHold();\n        });\n\n        $('.hold').bind('click', function () {\n            if (toggleingHoldState) {\n                return;\n            }\n            log.$log('user click button:' + (this.title || this.datset && this.datset.name));\n            toggleHold(true);\n        });\n\n        $('.post-edit').bind('click', function () {\n            log.$log('user click button:' + (this.title || this.datset && this.datset.name));\n            var restId = qd.getState('restId');\n            var ccStatus = qd.getState('ccStatus');\n            var disposableId = qd.getDisposableStatus();\n            disposableId = disposableId === 2 ? onlineStatus.idle : disposableId;\n            qd.setState('status', 'over');\n\n            if (restId > 99 && disposableId == restId) {\n                log.$log('setWorkStatus is ignored as disposableId:' + disposableId + ', restId:' + restId + ', ccStatus:' + ccStatus);\n            } else {\n                setWorkStatus(disposableId, true);\n            }\n        });\n\n        triggerFrame($('.net'), 'netWorkStateFrame', 'hover');\n\n        triggerFrame($('.transfer'), 'transferFrame');\n\n        triggerFrame($('.consult'), 'consultFrame');\n\n        triggerFrame($('.dial-panel'), 'dialFrame');\n\n        triggerFrame($('.btn-action'), 'customerOperationsFrame');\n\n        triggerFrame($('.disposable .trigger'), 'restFrame', 'click', {\n            offsetY: 32\n        });\n\n        bindOpera($('.consult-back'), 'consultBack', function () {\n            return {\n                type: qd.getState('consultType') || 1,\n                callid: qd.getState('callid')\n            };\n        });\n\n        bindOpera($('.hangup'), 'hangup', function () {\n            return {\n                callid: qd.getState('callid')\n            };\n        }, function () {\n            return hangup();\n        });\n\n        bindOpera($('.answer'), 'answer', function () {\n            return {\n                callid: qd.getState('callid')\n            };\n        });\n\n        bindOpera($('.mute_btn'), 'setMuteState', function () {\n            return {\n                isMute: qd.getState('mute') ? 0 : 1,\n                success: function success(res, opts) {\n                    var isMute = !!opts.isMute;\n                    qd.setState('mute', isMute);\n                    renderTimerAndCallAction(qd.getState('status'));\n                }\n            };\n        });\n\n        bindOpera($('.shift'), 'shift', function () {\n            return {\n                callid: qd.getState('callid')\n            };\n        });\n\n        bindOpera($('.multi'), 'multicast', function () {\n            return {\n                callid: qd.getState('callid')\n            };\n        });\n\n        bindOpera($('.agent_insert'), 'agentInsert', function () {\n            return {\n                callid: qd.getState('callid'),\n                to_kfext: qd.getState('callOperatored')\n            };\n        });\n\n        bindOpera($('.agent_break'), 'agentBreak', function () {\n            return {\n                callid: qd.getState('callid'),\n                to_kfext: qd.getState('callOperatored')\n            };\n        });\n    }\n\n    var $person = $('.person');\n    $person.bind('click', function (e) {\n        e.stopPropagation();\n        qd.hidePage();\n    });\n    $person.bind('mousedown', function (e) {\n        e.stopPropagation();\n    });\n})();\n\n(function () {\n    var tipId = '';\n    function showInfo(data) {\n        data = data || {};\n        data.decodeURIComponent = decodeURIComponent;\n        tipId = noticeCustom.notify({\n            type: 'info',\n            closeAble: true,\n            data: data,\n\n            html: '<span class=\"remarkmsg\"><%=data.name%>备注：<%=data.decodeURIComponent(data.msg || \"\")%></span> <span data-id=\"<%=__id%>\" data-action=\"viewremark\" class=\"viewremark\">查看全部</span>'\n        });\n    }\n    qd.one('notice.viewremark', function (e, data, target) {\n        qd.showPage({\n            name: 'remarkFrame',\n            show: true,\n            params: 0\n        });\n    });\n    qd.one('_remark.hide', function () {\n        noticeCustom.hide(tipId);\n    });\n\n    function setUnread(flag) {\n        qd.setState('remarkUnread', flag);\n    }\n\n    var fetched = false;\n    var stateChangeOnRemark = function stateChangeOnRemark(e, status) {\n        var state = qd.getState();\n        var role = state.role;\n        if (['connect', 'calling', 'online'].indexOf(state.status) > -1 && (role === 'b2' && state.callType === callTypeCode.consult || role === 'b1' && state.callType === callTypeCode.transfer)) {\n            if (fetched) {\n                return;\n            }\n            fetched = true;\n            setUnread(false);\n            qd.getCallRemarks({\n                callid: qd.getState('callid'),\n                success: function success(res) {\n                    var records = res && res.records ? res.records : [];\n                    var item = records.pop();\n                    if (item) {\n                        showInfo(item);\n                        setUnread(true);\n                    }\n                }\n            });\n        } else {\n            if (status === 'over' || status === 'postEdit') {\n                noticeCustom.hide(tipId);\n            }\n            fetched = false;\n        }\n    };\n    qd.one('stateChange.remark', stateChangeOnRemark);\n    stateChangeOnRemark(null, qd.getState('status'));\n\n    qd.one('_remarkRead', function () {\n        setUnread(false);\n    });\n})();\n\nfunction triggerFrame(el, frameName, type, extra, filter) {\n    var dom = el && el.elems[0];\n    if (!el || !dom || dom.binded) {\n        return;\n    }\n    dom.binded = true;\n\n    if (type === 'hover') {\n        var timeout = void 0;\n        el.bind('mouseenter', function (e) {\n            clearTimeout(timeout);\n            timeout = setTimeout(function () {\n                $(el).toggleClass('is-on');\n                qd.togglePage(qd.assign({\n                    trigger: e.target,\n                    name: frameName,\n                    params: extra\n                }, extra));\n            }, 300);\n        });\n        el.bind('mouseleave', function (e) {\n            clearTimeout(timeout);\n            timeout = setTimeout(function () {\n                $(el).toggleClass('is-on');\n                qd.hidePage(frameName);\n            }, 300);\n        });\n        el.bind('click', function (e) {\n            e.stopPropagation();\n            e.preventDefault();\n        });\n        qd.one(frameName + '.mouseenter', function () {\n            clearTimeout(timeout);\n        });\n        qd.one(frameName + '.mouseleave', function (e) {\n            $(el).toggleClass('is-on');\n            qd.hidePage(frameName);\n        });\n        return;\n    }\n    el.bind('click', function (e) {\n        e.stopPropagation();\n        e.preventDefault();\n\n        if (filter && !filter()) {\n            return;\n        }\n        $(this).toggleClass('is-on');\n        qd.togglePage(qd.assign({\n            trigger: e.currentTarget,\n            name: frameName,\n            show: type === 'show' || undefined,\n            params: extra\n        }, extra));\n    });\n}\n\nfunction bindOpera(el, method, opts, filter) {\n    if (!el || el.binded) {\n        return;\n    }\n    el.binded = true;\n    el.bind('click', function (e) {\n        var ele = $(this);\n        e.stopPropagation();\n        e.preventDefault();\n\n        hideSilentAudioTip();\n\n        if (ele.hasClass('is-disabled')) {\n            return;\n        }\n\n        opts = typeof opts === 'function' ? opts() : opts;\n\n        if (filter && !filter(opts)) {\n            return;\n        }\n\n        log.$log('user click button:' + (this.title || this.datset && this.datset.name));\n        var success = opts.success;\n        opts.success = function (res) {\n            !ele.is('.answer') && ele.removeClass('is-disabled');\n            success && success(res, opts);\n        };\n        opts.fail = function (res) {\n            ele.removeClass('is-disabled');\n            notice.error(res.msg || '操作失败');\n        };\n        qd[method](opts);\n        ele.addClass('is-disabled');\n        qd.hidePage();\n    });\n}\n\nvar syncDefer = void 0;\nfunction getDailyCallInfo(immediate) {\n    var kfext = qd.getState('callKfext');\n    if (simple) {\n        return;\n    }\n    getDailyInfo();\n    qd.initializeStaffInfo();\n    if (!immediate) {\n        clearTimeout(syncDefer);\n        syncDefer = setTimeout(getDailyInfo, 60000);\n    }\n\n    function getDailyInfo() {\n        var $timer = $('.call-info .timer');\n        qd.getDayCallInfo({\n            kfext: kfext,\n            success: function success(res) {\n                $timer.eq(0).text(formatTime(res.duration));\n                $timer.eq(1).text(res.counts);\n            }\n        });\n    }\n}\n\nqd.one('_showTip.mainFrame', function (e, msg, type, stick, withCloseBtn, id) {\n    type = type || 'error';\n    notice.notify({\n        type: type,\n        message: msg,\n        closeAble: withCloseBtn,\n        duration: stick ? 0 : 3,\n        __id: id\n    });\n});\n\nqd.one('_hideTip.mainFrame', function (e, id) {\n    id ? notice.hide(id) : notice.clear();\n});\n\nfunction setWorkStatus(status, isPostEditFinish) {\n    var state = qd.getState();\n    var kfext = state.callKfext;\n    var restId = state.restId;\n    if (status === onlineStatus.busy || status === onlineStatus.idle) {\n        qd.agentSetWorkStatus({\n            isPostEditFinish: ~~isPostEditFinish,\n            status: status,\n            restId: restId,\n            type: 1,\n            kfext: kfext,\n            success: function success(res) {\n                if (res.status !== status && res.status !== 2) {\n                    notice.error('切换状态失败');\n                } else {\n                    qd.trigger('_syncAgentStatus', res.status == 0 ? onlineStatus.busy : onlineStatus.idle);\n                }\n            },\n            fail: function fail(err) {\n                notice.error(err.msg || '切换状态失败');\n            }\n        });\n    } else {\n        qd.setRestStatus({\n            fromId: state.ccStatus != -1 ? -1 : restId,\n            toId: status,\n            ccStatus: state.ccStatus,\n            kfext: kfext,\n            success: function success(res) {\n                qd.trigger('_syncAgentStatus', res.status);\n            },\n            fail: function fail(err) {\n                notice.error(err.msg || '切换状态失败');\n            }\n        });\n    }\n}\n\nqd.one('hardwareStateChange.mainFrame', function (e, res) {\n    var isHardwareLogin = res.IsHardware === 1;\n    qd.setState({\n        isHardwareLogin: isHardwareLogin\n    });\n    qd.trigger('_syncHardwareState', isHardwareLogin);\n});\n\nqd.one('_menuFrameHide.mainFrame', function () {\n    $('.menu').removeClass('is-on');\n});\n\nqd.one('_customerOperationsFrameHide.mainFrame', function () {\n    $('.person .btn-action').removeClass('is-on');\n});\n\nqd.one('_transferFrameHide.mainFrame', function () {\n    $('.transfer').removeClass('is-on');\n});\n\nqd.one('_consultFrameHide.mainFrame', function () {\n    $('.consult').removeClass('is-on');\n});\n\nqd.one('_dialFrameHide.mainFrame', function () {\n    $('.dial').removeClass('is-on');\n});\nqd.one('_callPanelFrameHide.mainFrame', function () {\n    $('.pop-dial').removeClass('is-on');\n});\n\nqd.one('_callOnTimeFrameHide.mainFrame', function () {\n    $('.callback').removeClass('is-on');\n});\n\nqd.one('detectError.mainFrame', function (e, err) {\n    noticeWarning.error(err.message, 0);\n});\n\nqd.one('_sessionFailed.mainFrame', function (e, err) {\n    var message = err.message || '';\n    if (message.toLowerCase().indexOf('denied') > -1) {\n        notice.error('检测到麦克风未授权或耳麦未插入电脑');\n    }\n});\n\n$('body').bind('click', function () {\n    qd.hidePage();\n});\n\nqd.one('debug.mainFrame', function () {\n    console.log('main page');\n});\n\nqd.one('_showAudioAutoplayTip.mainFrame', function () {\n    silentAudioTipId = notice.notify({\n        type: 'warning',\n        duration: 60 * 60 * 24,\n        html: '<span>\\u70B9\\u51FB\\u201C\\u786E\\u8BA4\\u201D\\uFF0C\\u5F00\\u542F\\u4E0B\\u4E00\\u901A\\u6765\\u7535\\u632F\\u94C3\\u97F3</span><span class=\"autoplay-btn\" data-id=\"<%=__id%>\" data-action=\"ensureAutoplay\">\\u786E\\u8BA4</span>'\n    });\n});\n\nqd.one('notice.ensureAutoplay', function () {\n    log.$log('user click button:\\u786E\\u8BA4, from audioAutoplayErrorTip');\n    hideSilentAudioTip();\n});"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"action-break",use:"action-break-usage",viewBox:"0 0 40 40",content:'<symbol viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg" id="action-break">\n<circle cx="20" cy="20" r="20" fill="currentColor" />\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8.19556 16.4692C8.58817 17.4027 9.50524 18.0072 10.518 17.9999C11.8937 17.9949 13.0049 16.8757 13 15.5C13 14.4872 12.3889 13.5745 11.4525 13.1886C10.5162 12.8028 9.43948 13.02 8.72593 13.7387C8.01238 14.4574 7.80295 15.5356 8.19556 16.4692ZM16.6111 16.9192C16.533 16.9973 16.533 17.124 16.6111 17.2021L18.9241 19.5151L16.611 21.8282C16.5329 21.9063 16.5329 22.0329 16.611 22.111L17.3889 22.8889C17.467 22.967 17.5936 22.967 17.6717 22.8889L19.9999 20.5606L22.3282 22.8889C22.4063 22.967 22.5329 22.967 22.611 22.8889L23.3889 22.111C23.467 22.0329 23.467 21.9063 23.3889 21.8282L21.0759 19.5152L23.389 17.2021C23.4671 17.124 23.4671 16.9973 23.389 16.9192L22.6111 16.1414C22.533 16.0633 22.4064 16.0633 22.3283 16.1414L20.0001 18.4697L17.6718 16.1414C17.5937 16.0633 17.4671 16.0633 17.389 16.1414L16.6111 16.9192ZM7.00002 25.9999V22.4356C6.99307 20.4344 8.52209 18.7986 10.4321 18.764H10.6493C12.5779 18.7908 13.9621 20.4154 14 22.4356V25.9999H7.00002ZM26 26V22.5813C25.9932 20.6294 27.4847 19.0338 29.3476 19H29.5595C31.4407 19.0261 32.963 20.6108 33 22.5813V26H26ZM27.1956 16.4692C27.5882 17.4027 28.5052 18.0072 29.518 17.9999C30.8937 17.9949 32.0049 16.8757 32 15.5C32 14.4872 31.3889 13.5745 30.4525 13.1886C29.5162 12.8028 28.4395 13.02 27.7259 13.7387C27.0124 14.4574 26.803 15.5356 27.1956 16.4692Z" fill="white" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"action-consult",use:"action-consult-usage",viewBox:"0 0 40 40",content:'<symbol viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg" id="action-consult">\n<circle cx="20" cy="20" r="20" fill="currentColor" />\n<circle cx="14.712" cy="20.1331" r="2.40344" fill="white" />\n<circle cx="24.806" cy="20.6138" r="2.88413" fill="white" />\n<path fill-rule="evenodd" clip-rule="evenodd" d="M10.3857 25.7769C10.3857 25.5652 10.3857 25.4593 10.3907 25.3698C10.4819 23.7409 11.7823 22.4404 13.4113 22.3493C13.5007 22.3443 13.6066 22.3443 13.8184 22.3443H15.6055C15.8172 22.3443 15.9231 22.3443 16.0126 22.3493C17.6415 22.4404 18.942 23.7409 19.0331 25.3698C19.0381 25.4593 19.0381 25.5652 19.0381 25.7769C19.0381 26.0049 18.8533 26.1898 18.6253 26.1898H10.7986C10.5706 26.1898 10.3857 26.0049 10.3857 25.7769Z" fill="white" />\n<path fill-rule="evenodd" clip-rule="evenodd" d="M19.999 27.8002C19.999 27.5943 19.999 27.4914 20.0026 27.4044C20.0932 25.1813 21.8747 23.3999 24.0977 23.3092C24.1847 23.3057 24.2877 23.3057 24.4935 23.3057H25.1437C25.326 23.3057 25.4171 23.3057 25.4941 23.3084C27.7329 23.3892 29.5292 25.1855 29.61 27.4243C29.6128 27.5014 29.6128 27.5925 29.6128 27.7747C29.6128 27.9613 29.4615 28.1125 29.275 28.1125H20.3114C20.1389 28.1125 19.999 27.9727 19.999 27.8002Z" fill="white" />\n<path d="M19.9997 11C22.5862 11 24.7752 12.7024 25.5071 15.0479C25.6561 15.5256 25.7447 16.0299 25.764 16.552L25.7656 16.8375C25.7665 17.0146 25.5654 17.1153 25.4261 17.0059C24.8387 16.5446 23.6867 15.6104 23.5421 15.2691C22.9577 13.8901 21.5917 12.9228 19.9997 12.9228C17.9835 12.9228 16.3297 14.4744 16.1673 16.4487C16.1527 16.6265 16.0128 16.7683 15.8344 16.7683H14.584C14.3901 16.7683 14.2304 16.6094 14.242 16.4159C14.4241 13.3943 16.9323 11 19.9997 11Z" fill="white" />\n<path fill-rule="evenodd" clip-rule="evenodd" d="M25.695 16.7511C25.7671 16.9257 25.5938 17.1011 25.4183 17.0312L22.2963 15.7858C22.1371 15.7223 22.1138 15.5065 22.2557 15.4104L24.5106 13.8841L25.695 16.7511Z" fill="white" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"action-consultback",use:"action-consultback-usage",viewBox:"0 0 40 40",content:'<symbol viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg" id="action-consultback">\n<circle cx="20" cy="20" r="20" fill="currentColor" />\n<g clip-path="url(#action-consultback_clip0)">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M20.0935 26.75C21.0028 26.75 22.0258 26.525 22.9352 26.1875C23.5035 25.85 24.1855 26.1875 24.4129 26.75C24.6402 27.3125 24.4129 27.9875 23.8445 28.2125C22.5942 28.775 21.3438 29 20.0935 29C15.0921 29 11 24.95 11 20C11 15.05 15.0921 11 20.0935 11C21.3438 11 22.5942 11.225 23.8445 11.7875C24.4129 12.0125 24.6402 12.6875 24.4129 13.25C24.1855 13.8125 23.5035 14.0375 22.9352 13.8125C22.0258 13.475 21.0028 13.25 20.0935 13.25C16.3424 13.25 13.2734 16.2875 13.2734 20C13.2734 23.7125 16.3424 26.75 20.0935 26.75ZM26.5047 16.6589L28.7477 19.3449C29.0841 19.6672 29.0841 20.3119 28.7477 20.6342L26.5047 23.3203C26.2804 23.6426 25.9439 23.75 25.6075 23.75C25.5514 23.75 25.4953 23.7232 25.4393 23.6963C25.3832 23.6694 25.3271 23.6426 25.271 23.6426C24.8224 23.5351 24.486 23.1054 24.486 22.6756V21.064H20V18.9151H24.486V17.3035C24.486 16.8737 24.8224 16.444 25.271 16.3365C25.7196 16.1216 26.1682 16.3365 26.5047 16.6589Z" fill="white" />\n</g>\n<defs>\n<clipPath id="action-consultback_clip0">\n<rect width="21" height="21" fill="white" transform="translate(35 20) rotate(135)" />\n</clipPath>\n</defs>\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"action-dial",use:"action-dial-usage",viewBox:"0 0 40 40",content:'<symbol viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg" id="action-dial">\n<circle cx="20" cy="20" r="20" fill="currentColor" />\n<circle cx="13.1111" cy="15.1111" r="2.11111" fill="white" />\n<circle cx="13.1111" cy="22.5002" r="2.11111" fill="white" />\n<circle cx="20.4998" cy="15.1111" r="2.11111" fill="white" />\n<circle cx="20.4998" cy="22.5002" r="2.11111" fill="white" />\n<circle cx="20.4998" cy="29.8888" r="2.11111" fill="white" />\n<circle cx="27.8894" cy="15.1111" r="2.11111" fill="white" />\n<circle cx="27.8894" cy="22.5002" r="2.11111" fill="white" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"action-hangup",use:"action-hangup-usage",viewBox:"0 0 40 40",content:'<symbol viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg" id="action-hangup">\n<circle cx="20" cy="20" r="20" fill="currentColor" />\n<g clip-path="url(#action-hangup_clip0)">\n<path d="M15.912 21.5602C16.5879 20.8843 16.4734 19.4211 17.0585 18.8361C17.643 18.2515 22.8517 18.1951 23.4926 18.8361C24.1314 19.4748 23.8816 20.7529 24.5409 21.4122C25.0146 21.8859 29.6577 23.0191 30.3885 22.2883C31.1196 21.5577 31.576 18.5047 30.3885 17.3172C26.9158 13.8445 13.9011 13.6255 9.91586 17.6108C8.8185 18.7081 8.5824 21.2498 9.91586 22.5833C10.373 23.0404 15.2542 22.218 15.912 21.5602Z" fill="white" />\n</g>\n<defs>\n<clipPath id="action-hangup_clip0">\n<rect width="21" height="21" fill="white" transform="translate(35 20) rotate(135)" />\n</clipPath>\n</defs>\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"action-hold",use:"action-hold-usage",viewBox:"0 0 40 40",content:'<symbol viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg" id="action-hold">\n<circle cx="20" cy="20" r="20" fill="currentColor" />\n<path d="M16.9 25C16.6791 25 16.5 24.8209 16.5 24.6L16.5 16.4C16.5 16.1791 16.6791 16 16.9 16L18.1 16C18.3209 16 18.5 16.1791 18.5 16.4L18.5 24.6C18.5 24.8209 18.3209 25 18.1 25L16.9 25Z" fill="white" />\n<path d="M21.9 25C21.6791 25 21.5 24.8209 21.5 24.6L21.5 16.4C21.5 16.1791 21.6791 16 21.9 16L23.1 16C23.3209 16 23.5 16.1791 23.5 16.4L23.5 24.6C23.5 24.8209 23.3209 25 23.1 25L21.9 25Z" fill="white" />\n<circle cx="20" cy="20" r="11" stroke="white" stroke-width="2" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"action-insert",use:"action-insert-usage",viewBox:"0 0 40 40",content:'<symbol viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg" id="action-insert">\n<circle cx="20" cy="20" r="20" fill="currentColor" />\n<path fill-rule="evenodd" clip-rule="evenodd" d="M18.1566 12.7753C18.4707 13.5222 19.2043 14.0058 20.0145 13.9999C21.1151 13.9959 22.004 13.1005 22.0001 12C22.0001 11.1898 21.5112 10.4596 20.7621 10.1509C20.013 9.84222 19.1517 10.016 18.5809 10.5909C18.01 11.1659 17.8425 12.0285 18.1566 12.7753ZM17 21V18.2266C16.9942 16.468 18.2726 15.0305 19.8694 15H20.051C21.6635 15.0235 22.9683 16.4512 23 18.2266V21H17ZM9.15645 19.7753C9.47054 20.5222 10.2042 21.0058 11.0144 20.9999C12.1149 20.9959 13.0039 20.1005 13 19C13 18.1898 12.5111 17.4596 11.762 17.1509C11.0129 16.8422 10.1516 17.016 9.58075 17.5909C9.00991 18.1659 8.84236 19.0285 9.15645 19.7753ZM8.00002 28V25.2266C7.9942 23.468 9.27256 22.0305 10.8694 22H11.051C12.6635 22.0235 13.9683 23.4512 14 25.2266V28H8.00002ZM23.3889 26.3889C23.467 26.467 23.467 26.5936 23.3889 26.6717L22.611 27.4495C22.5329 27.5276 22.4063 27.5276 22.3282 27.4495L19.9999 25.1213L17.6717 27.4495C17.5936 27.5276 17.467 27.5276 17.3889 27.4495L16.611 26.6717C16.5329 26.5936 16.5329 26.467 16.611 26.3889L19.8585 23.1414C19.9366 23.0633 20.0633 23.0633 20.1414 23.1414L23.3889 26.3889ZM26 28V25.2266C25.9942 23.468 27.2726 22.0305 28.8694 22H29.051C30.6635 22.0235 31.9683 23.4512 32 25.2266V28H26ZM27.1564 19.7753C27.4705 20.5222 28.2042 21.0058 29.0144 20.9999C30.1149 20.9959 31.0039 20.1005 31 19C31 18.1898 30.5111 17.4596 29.762 17.1509C29.0129 16.8422 28.1516 17.016 27.5807 17.5909C27.0099 18.1659 26.8424 19.0285 27.1564 19.7753Z" fill="white" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"action-multi",use:"action-multi-usage",viewBox:"0 0 40 40",content:'<symbol viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg" id="action-multi">\n<circle cx="20" cy="20" r="20" fill="currentColor" />\n<path d="M19.5378 11.4429C19.7373 11.2101 20.0975 11.2101 20.297 11.4429L25.2099 17.1746C25.4879 17.4989 25.2575 18 24.8303 18H21.6449C21.9188 19.779 22.5465 21.138 23.5 22.2894C24.9113 23.9935 26.5736 25.2117 29.1067 26.47L29.1555 26.4971C29.3978 26.6318 29.4842 26.9378 29.3483 27.1794L28.1836 29.2481C28.0527 29.4807 27.7631 29.5694 27.5267 29.4454C26.8955 29.1143 25.6975 28.464 24.9113 27.9017C23.5875 26.955 22.4496 25.9757 21.4983 24.9609C20.8752 24.2963 20.349 23.5534 19.9174 22.7343C19.4858 23.5534 18.9596 24.2963 18.3365 24.9609C17.3852 25.9757 16.2473 26.955 14.9235 27.9017C14.1373 28.464 12.9393 29.1143 12.3081 29.4454C12.0717 29.5694 11.7821 29.4807 11.6511 29.2481L10.4865 27.1794C10.3506 26.9378 10.437 26.6318 10.6793 26.4971L10.7281 26.47C13.2612 25.2117 14.9235 23.9935 16.3348 22.2894C17.2883 21.138 17.916 19.779 18.1899 18H15.0045C14.5773 18 14.3469 17.4989 14.6249 17.1746L19.5378 11.4429Z" fill="white" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"action-mute",use:"action-mute-usage",viewBox:"0 0 40 40",content:'<symbol viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg" id="action-mute">\n<circle cx="20" cy="20" r="20" fill="currentColor" />\n<path fill-rule="evenodd" clip-rule="evenodd" d="M15.6667 14.4725C15.6667 12.0793 17.6068 10.1392 20 10.1392C22.3932 10.1392 24.3333 12.0793 24.3333 14.4725V19.2873C24.3333 21.6805 22.3932 23.6206 20 23.6206C17.6068 23.6206 15.6667 21.6805 15.6667 19.2873V14.4725ZM19.1875 29.8802H16.2733C16.034 29.8802 15.84 30.0742 15.84 30.3135V31.0068C15.84 31.2462 16.034 31.4402 16.2733 31.4402H23.7266C23.966 31.4402 24.16 31.2462 24.16 31.0068V30.3135C24.16 30.0742 23.966 29.8802 23.7266 29.8802H20.8125V28.0844C24.9156 27.6781 28.125 24.2047 28.125 20V19.6533C28.125 19.414 27.931 19.22 27.6917 19.22H26.9333C26.694 19.22 26.5 19.414 26.5 19.6533V20C26.5 23.575 23.575 26.5 20 26.5C16.425 26.5 13.5 23.575 13.5 20V19.3933C13.5 19.154 13.306 18.96 13.0667 18.96H12.3083C12.069 18.96 11.875 19.154 11.875 19.3933V20C11.875 24.2047 15.0844 27.6781 19.1875 28.0844V29.8802Z" fill="white" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"action-postedit",use:"action-postedit-usage",viewBox:"0 0 40 40",content:'<symbol viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg" id="action-postedit">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M30 20C30 25.5228 25.5228 30 20 30C14.4772 30 10 25.5228 10 20C10 14.4772 14.4772 10 20 10C25.5228 10 30 14.4772 30 20ZM32 20C32 26.6274 26.6274 32 20 32C13.3726 32 8 26.6274 8 20C8 13.3726 13.3726 8 20 8C26.6274 8 32 13.3726 32 20ZM17 22.6C17 22.8209 17.1791 23 17.4 23H22.6C22.8209 23 23 22.8209 23 22.6V17.4C23 17.1791 22.8209 17 22.6 17H17.4C17.1791 17 17 17.1791 17 17.4V22.6Z" fill="white" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"action-transfer",use:"action-transfer-usage",viewBox:"0 0 40 40",content:'<symbol viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg" id="action-transfer">\n<circle cx="20" cy="20" r="20" fill="currentColor" />\n<path d="M21.52 23.3566C20.6939 23.1352 19.6114 23.8784 18.8964 23.6869C18.1819 23.4954 15.8081 19.4849 16.018 18.7014C16.2272 17.9208 17.3293 17.5426 17.5452 16.7368C17.7003 16.1579 16.5013 12.0533 15.6081 11.814C14.7149 11.5743 12.1452 12.5865 11.7563 14.0378C10.6191 18.2821 16.2715 28.4642 21.1422 29.7693C22.4834 30.1287 24.5584 29.1746 24.9951 27.5449C25.1448 26.9862 22.324 23.572 21.52 23.3566Z" fill="white" />\n<path fill-rule="evenodd" clip-rule="evenodd" d="M24.7661 20.2762V21.4999C24.7661 21.836 25.1498 22.0278 25.4187 21.8262L28.4096 19.5834C28.6271 19.4202 28.6271 19.094 28.4096 18.9308L25.4187 16.6872C25.1498 16.4856 24.7661 16.6774 24.7661 17.0135V18.237H19.668V20.2762H24.7661Z" fill="white" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"action-unhold",use:"action-unhold-usage",viewBox:"0 0 40 40",content:'<symbol viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg" id="action-unhold">\n<circle cx="20" cy="20" r="20" fill="currentColor" />\n<circle cx="20" cy="20" r="11" stroke="white" stroke-width="2" />\n<path d="M17 23.2516V16.7484C17 15.975 17.8404 15.4943 18.507 15.8865L24.0347 19.1381C24.692 19.5247 24.692 20.4753 24.0347 20.8619L18.507 24.1135C17.8404 24.5057 17 24.025 17 23.2516Z" fill="#FF8345" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"action-unmute",use:"action-unmute-usage",viewBox:"0 0 40 40",content:'<symbol viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg" id="action-unmute">\n<circle cx="20" cy="20" r="20" fill="currentColor" />\n<path fill-rule="evenodd" clip-rule="evenodd" d="M16.2476 27.2068C17.1428 27.6746 18.1358 27.9802 19.1875 28.0844V29.8802H16.2733C16.034 29.8802 15.84 30.0742 15.84 30.3135V31.0068C15.84 31.2462 16.034 31.4402 16.2733 31.4402H23.7266C23.966 31.4402 24.16 31.2462 24.16 31.0068V30.3135C24.16 30.0742 23.966 29.8802 23.7266 29.8802H20.8125V28.0844C24.9156 27.6781 28.125 24.2047 28.125 20V19.6533C28.125 19.414 27.931 19.22 27.6917 19.22H26.9333C26.694 19.22 26.5 19.414 26.5 19.6533V20C26.5 23.575 23.575 26.5 20 26.5C19.1039 26.5 18.2485 26.3162 17.4699 25.9844L16.2476 27.2068ZM19.8368 23.6176C19.8909 23.6196 19.9453 23.6206 20 23.6206C22.3932 23.6206 24.3333 21.6805 24.3333 19.2873V19.121L19.8368 23.6176ZM24.3333 16.9997L18.1338 23.1993C17.4669 22.8806 16.8943 22.3964 16.469 21.7999L24.3039 13.965C24.3233 14.1315 24.3333 14.3008 24.3333 14.4725V16.9997ZM23.7856 12.362C23.0446 11.0359 21.627 10.1392 20 10.1392C17.6068 10.1392 15.6667 12.0793 15.6667 14.4725V19.2873C15.6667 19.6538 15.7122 20.0098 15.7979 20.3497L23.7856 12.362ZM13.9022 22.2454C13.6422 21.5448 13.5 20.7882 13.5 20V19.3933C13.5 19.154 13.306 18.96 13.0667 18.96H12.3083C12.069 18.96 11.875 19.154 11.875 19.3933V20C11.875 21.2467 12.1572 22.4292 12.6611 23.4864L13.9022 22.2454ZM14.9615 26.3715C14.3934 25.9213 13.8867 25.3967 13.4563 24.8126L14.625 23.6439C15.0345 24.2449 15.542 24.7744 16.1239 25.2092L14.9615 26.3715Z" fill="white" />\n<rect x="10" y="28.2689" width="25.8362" height="2.16667" rx="0.433333" transform="rotate(-45 10 28.2689)" fill="#FF8345" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"arrow-down",use:"arrow-down-usage",viewBox:"0 0 12 12",content:'<symbol viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" id="arrow-down">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M3 6.75209L6.49993 10L10 6.75209L9.3761 6L7 8.22672L7 2L6 2L6 8.22684L3.6239 6L3 6.75209Z" fill="currentColor" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"arrow-move",use:"arrow-move-usage",viewBox:"0 0 12 12",content:'<symbol viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" id="arrow-move">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M6.79792 1.61109C6.87602 1.53299 7.00266 1.53299 7.08076 1.61109L7.85858 2.38891C7.93668 2.46701 7.93668 2.59365 7.85858 2.67175L4.53033 6L7.85858 9.32825C7.93668 9.40635 7.93668 9.53299 7.85858 9.61109L7.08076 10.3889C7.00266 10.467 6.87602 10.467 6.79792 10.3889L2.55043 6.14142C2.47233 6.06332 2.47233 5.93668 2.55043 5.85858L6.79792 1.61109Z" fill="#9098AA" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"arrow-up",use:"arrow-up-usage",viewBox:"0 0 12 12",content:'<symbol viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" id="arrow-up">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M9 5.24791L5.50007 2L2 5.24791L2.6239 6L5 3.77328V10H6V3.77316L8.3761 6L9 5.24791Z" fill="currentColor" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"arrow",use:"arrow-usage",viewBox:"0 0 8 8",content:'<symbol viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg" id="arrow">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M0.611148 3.17181C0.533043 3.0937 0.533043 2.96707 0.611148 2.88897L1.38897 2.11115C1.46707 2.03304 1.5937 2.03304 1.67181 2.11115L4.00006 4.4394L6.32831 2.11115C6.40641 2.03304 6.53304 2.03304 6.61115 2.11115L7.38897 2.88897C7.46707 2.96707 7.46707 3.0937 7.38897 3.17181L4.14148 6.4193C4.06337 6.4974 3.93674 6.4974 3.85864 6.4193L0.611148 3.17181Z" fill="currentColor" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"arrow_double_left_line",use:"arrow_double_left_line-usage",viewBox:"0 0 12 12",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" class="design-iconfont" id="arrow_double_left_line"><path fill-rule="evenodd" clip-rule="evenodd" d="M5.55992 1.61931C5.65035 1.6383 5.72927 1.67423 5.88744 1.80695L6.07543 1.96469C6.2336 2.09741 6.28269 2.16889 6.3171 2.25465C6.3515 2.34041 6.35939 2.4305 6.34039 2.52093C6.3214 2.61136 6.28547 2.69028 6.15275 2.84845L3.50841 6L6.15275 9.15154C6.28547 9.30971 6.3214 9.38863 6.34039 9.47906C6.35939 9.56949 6.3515 9.65958 6.3171 9.74534C6.28269 9.8311 6.2336 9.90258 6.07543 10.0353L5.88744 10.193C5.72927 10.3258 5.65035 10.3617 5.55992 10.3807C5.46949 10.3997 5.3794 10.3918 5.29364 10.3574C5.20789 10.323 5.1364 10.2739 5.00368 10.1157L1.81986 6.32139C1.66389 6.13551 1.66389 5.86448 1.81986 5.6786L5.00368 1.88427C5.1364 1.7261 5.20789 1.67701 5.29364 1.6426C5.3794 1.60819 5.46949 1.60031 5.55992 1.61931ZM8.55992 1.61931C8.65035 1.6383 8.72927 1.67423 8.88744 1.80695L9.07543 1.96469C9.2336 2.09741 9.28269 2.16889 9.3171 2.25465C9.3515 2.34041 9.35939 2.4305 9.34039 2.52093C9.3214 2.61136 9.28547 2.69028 9.15275 2.84845L6.50841 6L9.15275 9.15154C9.28547 9.30971 9.3214 9.38863 9.34039 9.47906C9.35939 9.56949 9.3515 9.65958 9.3171 9.74534C9.28269 9.8311 9.2336 9.90258 9.07543 10.0353L8.88744 10.193C8.72927 10.3258 8.65035 10.3617 8.55992 10.3807C8.46949 10.3997 8.3794 10.3918 8.29364 10.3574C8.20789 10.323 8.1364 10.2739 8.00368 10.1157L4.55018 6L8.00368 1.88427C8.1364 1.7261 8.20789 1.67701 8.29364 1.6426C8.3794 1.60819 8.46949 1.60031 8.55992 1.61931Z" /></symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"arrow_down_small_line",use:"arrow_down_small_line-usage",viewBox:"0 0 12 12",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" id="arrow_down_small_line">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M6.00593 8.74125C5.87496 8.74362 5.74323 8.69483 5.64328 8.59489L2.25228 5.20388C2.05702 5.00862 2.05702 4.69204 2.25228 4.49678C2.44754 4.30151 2.76413 4.30151 2.95939 4.49678L5.99989 7.53727L9.04056 4.4966C9.23582 4.30134 9.5524 4.30134 9.74766 4.49661C9.94292 4.69187 9.94292 5.00845 9.74766 5.20371L6.35656 8.59481C6.25967 8.6917 6.13292 8.74051 6.00593 8.74125Z" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"arrow_left",use:"arrow_left-usage",viewBox:"0 0 6 10",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 6 10" id="arrow_left">\n<path d="M0.3,4.3l4-4c0.4-0.4,1-0.4,1.4,0c0.4,0.4,0.4,1,0,1.4L2.4,5l3.3,3.3c0.4,0.4,0.4,1,0,1.4c-0.4,0.4-1,0.4-1.4,0\n\tl-4-4C0.1,5.5,0,5.2,0,5C0,4.7,0.1,4.5,0.3,4.3z" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"arrow_left_small_line",use:"arrow_left_small_line-usage",viewBox:"0 0 12 12",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" class="design-iconfont" id="arrow_left_small_line"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.36894 6.60314C3.34644 6.58086 3.32221 6.55663 3.29588 6.5303C3.13114 6.36556 3.04878 6.28319 3.01072 6.19131C2.95997 6.06879 2.95997 5.93114 3.01072 5.80862C3.04878 5.71674 3.13114 5.63437 3.29588 5.46963L7.18497 1.58055C7.3497 1.41581 7.43207 1.33344 7.52395 1.29538C7.64647 1.24464 7.78412 1.24464 7.90664 1.29538C7.99852 1.33344 8.08089 1.41581 8.24563 1.58055C8.41036 1.74528 8.49273 1.82765 8.53079 1.91954C8.58154 2.04205 8.58154 2.17971 8.53079 2.30222C8.49273 2.3941 8.41036 2.47647 8.24563 2.64121L4.88698 5.99986L8.24583 9.35871C8.41057 9.52344 8.49294 9.60581 8.531 9.6977C8.58174 9.82021 8.58174 9.95787 8.531 10.0804C8.49294 10.1723 8.41057 10.2546 8.24583 10.4194C8.0811 10.5841 7.99873 10.6665 7.90685 10.7045C7.78433 10.7553 7.64668 10.7553 7.52416 10.7045C7.43228 10.6665 7.34991 10.5841 7.18517 10.4194L3.36894 6.60314Z" /></symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"arrow_right",use:"arrow_right-usage",viewBox:"0 0 6 10",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 6 10" id="arrow_right">\n<path d="M6,5c0,0.3-0.1,0.5-0.3,0.7l-4,4c-0.4,0.4-1,0.4-1.4,0c-0.4-0.4-0.4-1,0-1.4L3.6,5L0.3,1.7\n\tc-0.4-0.4-0.4-1,0-1.4c0.4-0.4,1-0.4,1.4,0l4,4C5.9,4.5,6,4.7,6,5z" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"arrow_right_small_line",use:"arrow_right_small_line-usage",viewBox:"0 0 12 12",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" id="arrow_right_small_line">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M8.74119 5.99407C8.74356 6.12505 8.69477 6.25678 8.59482 6.35672L5.20382 9.74772C5.00856 9.94298 4.69198 9.94298 4.49672 9.74772C4.30145 9.55246 4.30145 9.23588 4.49672 9.04062L7.53721 6.00012L4.49654 2.95945C4.30128 2.76419 4.30128 2.4476 4.49654 2.25234C4.69181 2.05708 5.00839 2.05708 5.20365 2.25234L8.59475 5.64344C8.69164 5.74033 8.74045 5.86709 8.74119 5.99407Z" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"asr-auto",use:"asr-auto-usage",viewBox:"0 0 14 14",content:'<symbol viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" id="asr-auto">\n<g clip-path="url(#asr-auto_clip0_392_3317)">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M6.04176 0.699812V2.00092L5.85545 2.04336C4.03668 2.4577 2.58216 3.86425 2.08178 5.65814L2.94491 5.87392L0.97243 7.30845L0 5.09838L0.868315 5.30512C1.50297 3.00454 3.39602 1.2401 5.75433 0.758508L6.04176 0.699812ZM1.07195 6.93992L1.07193 6.93988L2.38919 5.98187L2.38925 5.98188L1.07195 6.93992ZM1.79044 5.83216L1.79048 5.83217C1.80574 5.76573 1.82224 5.69975 1.83996 5.63425L1.84934 5.60003C2.37138 3.71967 3.89441 2.24447 5.80225 1.80984V0.993175L5.80222 0.993181V1.80981C3.81653 2.26217 2.2477 3.84177 1.79044 5.83216ZM13.334 6.04176H12.0586L12.0161 5.85545C11.601 4.03313 10.1897 2.57649 8.39082 2.07886L8.13819 2.92095L6.72109 0.97243L8.93115 0L8.72442 0.868297C11.0251 1.50257 12.8142 3.39482 13.2779 5.7561L13.334 6.04176ZM8.58655 0.413296L8.43686 1.04198L8.43682 1.04198L8.5865 0.413315L8.58655 0.413296ZM13.0429 5.80222C12.9217 5.18508 12.7063 4.60111 12.4123 4.0656C12.668 4.53134 12.8642 5.03375 12.9908 5.56274C13.0097 5.64199 13.0271 5.72184 13.0429 5.80225H12.2496L12.2496 5.80222H13.0429ZM8.22725 1.79044C8.71764 1.9031 9.18309 2.08323 9.61289 2.32045C9.1831 2.08325 8.71766 1.90313 8.22728 1.79047L8.04765 2.38925L8.04762 2.38922L8.22725 1.79044ZM0.691206 7.95784H1.96541L2.00701 8.14552C2.41363 9.98017 3.82888 11.4489 5.63579 11.9499L5.88658 11.0721L7.30845 13.0272L5.09209 14.0024L5.30255 13.1605C2.99304 12.5228 1.19944 10.6172 0.745571 8.2423L0.691206 7.95784ZM5.42846 12.9465C5.4829 12.9609 5.53763 12.9746 5.59265 12.9875L5.59265 12.9875C5.04688 12.8591 4.52865 12.6577 4.04918 12.3942C4.48032 12.6311 4.9428 12.8179 5.42846 12.9465ZM5.44299 13.5863L5.443 13.5862L6.93989 12.9276L6.93992 12.9277L5.44299 13.5863ZM1.77317 8.19734C1.89783 8.7598 2.11285 9.28923 2.40203 9.76995C2.11284 9.28923 1.89781 8.75981 1.77315 8.19734H1.77317ZM7.95784 13.2791V11.9987L8.14414 11.9562C9.96291 11.5419 11.4174 10.1353 11.9178 8.34146L11.0547 8.12568L13.0272 6.69115L14.0024 8.90751L13.1605 8.69705C12.5248 10.9991 10.6284 12.7886 8.2406 13.2271L7.95784 13.2791ZM12.9465 8.57117C12.9609 8.5167 12.9746 8.46195 12.9875 8.40691L13.5863 8.55661L13.5863 8.55658L12.9875 8.40688C12.4406 10.731 10.5702 12.5558 8.19734 12.9915V12.9916C8.27777 12.9768 8.35762 12.9604 8.43685 12.9425C10.6401 12.4441 12.3724 10.7388 12.9465 8.57117ZM11.6104 8.01771L11.6104 8.01769L12.2091 8.16737L12.2091 8.1674L11.6104 8.01771ZM6.44967 4.48495H7.5498L9.57205 9.51464H8.43052L7.97197 8.31374H6.02751L5.56895 9.51464H4.42743L6.44967 4.48495ZM4.60468 9.39486H5.4865L5.48649 9.39489H4.60465L6.5306 4.6047H6.53061L4.60468 9.39486ZM8.05443 8.19399H5.94507L5.94508 8.19396H8.05445L8.51301 9.39486H9.39482L9.39483 9.39489H8.51298L8.05443 8.19399ZM6.98918 5.45L6.98917 5.45003H7.01738L7.8075 7.5499H7.80754L7.0174 5.45H6.98918ZM6.36552 7.43017H7.6345L7.00283 5.75143L6.36552 7.43017Z" fill="#C5CCDB" />\n</g>\n<defs>\n<clipPath id="asr-auto_clip0_392_3317">\n<rect width="14" height="14" fill="white" />\n</clipPath>\n</defs>\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"asr-manual",use:"asr-manual-usage",viewBox:"0 0 14 14",content:'<symbol viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" id="asr-manual">\n<g clip-path="url(#asr-manual_clip0_392_3320)">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M6.04076 0.699696V2.00059L5.85449 2.04303C4.03602 2.4573 2.58174 3.86362 2.08143 5.6572L2.94442 5.87295L0.972269 7.30724L0 5.09754L0.868172 5.30425C1.50272 3.00404 3.39546 1.2399 5.75338 0.758383L6.04076 0.699696ZM1.07177 6.93878L1.07175 6.93873L2.3888 5.98088L2.38885 5.9809L1.07177 6.93878ZM1.79015 5.8312L1.79018 5.83121C1.80544 5.76478 1.82194 5.69881 1.83966 5.63332L1.84903 5.5991C2.37099 3.71906 3.89376 2.2441 5.80129 1.80954V0.993011L5.80126 0.993017V1.80951C3.8159 2.2618 2.24732 3.84113 1.79015 5.8312ZM13.3318 6.04076H12.0566L12.0141 5.85449C11.599 4.03246 10.188 2.57606 8.38944 2.07851L8.13685 2.92047L6.71998 0.972269L8.92968 0L8.72298 0.868154C11.0233 1.50232 12.8121 3.39426 13.2757 5.75515L13.3318 6.04076ZM8.58513 0.413228L8.43547 1.04181L8.43543 1.0418L8.58509 0.413247L8.58513 0.413228ZM13.0407 5.80126C12.9196 5.18423 12.7042 4.60035 12.4103 4.06493C12.6659 4.5306 12.8621 5.03291 12.9886 5.56182C13.0076 5.64106 13.025 5.7209 13.0408 5.80129H12.2476L12.2476 5.80126H13.0407ZM8.22589 1.79015C8.7162 1.90278 9.18157 2.08289 9.6113 2.32007C9.18158 2.0829 8.71622 1.90281 8.22592 1.79018L8.04632 2.38885L8.04629 2.38882L8.22589 1.79015ZM0.691092 7.95652H1.96508L2.00667 8.14417C2.41324 9.97852 3.82824 11.447 5.63486 11.9479L5.88561 11.0703L7.30724 13.025L5.09125 14.0001L5.30168 13.1584C2.99254 12.5207 1.19924 10.6154 0.745448 8.24094L0.691092 7.95652ZM5.42756 12.9443C5.48199 12.9587 5.53672 12.9724 5.59172 12.9854L5.59173 12.9854C4.99565 12.8451 4.43242 12.6178 3.91668 12.3176C4.38483 12.5901 4.8921 12.8025 5.42756 12.9443ZM5.44209 13.5841L5.4421 13.584L6.93874 12.9255L6.93878 12.9255L5.44209 13.5841ZM1.77288 8.19599C1.88713 8.71149 2.0773 9.19925 2.3309 9.64717C2.07729 9.19925 1.88711 8.7115 1.77285 8.19599H1.77288ZM7.95652 13.2769V11.9967L8.1428 11.9543C9.96127 11.54 11.4155 10.1337 11.9159 8.34008L11.0529 8.12434L13.025 6.69004L14.0001 8.90603L13.1584 8.69561C12.5227 10.9973 10.6266 12.7865 8.23924 13.2249L7.95652 13.2769ZM12.9443 8.56975C12.9587 8.5153 12.9724 8.46055 12.9854 8.40553L13.5841 8.5552L13.584 8.55516L12.9854 8.40549C12.4386 10.7293 10.5685 12.5537 8.19599 12.9894V12.9894C8.2764 12.9747 8.35623 12.9583 8.43546 12.9404C10.6384 12.442 12.3704 10.737 12.9443 8.56975ZM11.6084 8.01639L11.6085 8.01637L12.2071 8.16603L12.2071 8.16605L11.6084 8.01639ZM6.28021 4.00521V9.99195H7.71703V4.00521H6.28021ZM3.88551 5.20265V8.7947H5.32233V5.20265H3.88551ZM8.67491 8.7947V5.20265H10.1117V8.7947H8.67491Z" fill="currentColor" />\n</g>\n<defs>\n<clipPath id="asr-manual_clip0_392_3320">\n<rect width="14" height="14" fill="white" />\n</clipPath>\n</defs>\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"auto-answer",use:"auto-answer-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" id="auto-answer">\n<circle cx="8" cy="8" r="8" fill="currentColor" />\n<path d="M9.05418 3.96386L9.02943 3.9H8.96094H7.16406H7.09557L7.07082 3.96386L3.90676 12.1279L3.854 12.2641H4H5.67969H5.75089L5.77419 12.1968L6.45402 10.2328H9.6332L10.3514 12.1984L10.3754 12.2641H10.4453H12.125H12.271L12.2182 12.1279L9.05418 3.96386ZM7.91757 6.03691L7.92075 6.03055L7.92299 6.02381C7.95024 5.94206 7.98983 5.7966 8.0414 5.59046C8.04419 5.58208 8.0469 5.57383 8.04955 5.56572C8.09271 5.69926 8.14424 5.8408 8.20403 5.99026L8.20371 5.99039L8.20743 5.99785C8.20723 5.99745 8.20728 5.99756 8.20763 5.99838C8.20827 5.99988 8.20991 6.00375 8.21288 6.01117C8.21687 6.02115 8.22226 6.035 8.22909 6.0529C8.24275 6.08864 8.26173 6.13933 8.28611 6.20514C8.33483 6.33669 8.40474 6.52772 8.49586 6.77831C8.66968 7.2563 8.9205 7.95049 9.24834 8.86094H6.91457C7.2301 7.96315 7.47162 7.27849 7.63915 6.80691C7.72702 6.55958 7.79448 6.37101 7.84157 6.24111C7.86513 6.17612 7.8835 6.12607 7.89673 6.09078C7.90336 6.0731 7.90858 6.05944 7.91246 6.04962C7.91522 6.04261 7.91678 6.03889 7.91741 6.03739C7.9178 6.03645 7.91783 6.03638 7.91757 6.03691Z" fill="white" stroke="white" stroke-width="0.2" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"avatar-c",use:"avatar-c-usage",viewBox:"0 0 36 36",content:'<symbol viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg" id="avatar-c">\n<circle cx="18" cy="18" r="18" fill="#A8BDE3" />\n<mask id="avatar-c_mask0_618_6169" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="36" height="36">\n<circle cx="18" cy="18" r="18" fill="white" />\n</mask>\n<g mask="url(#avatar-c_mask0_618_6169)">\n<circle cx="18" cy="15.4286" r="5.14286" fill="#E8F2FD" />\n<circle cx="18" cy="36" r="12.8571" fill="#E8F2FD" />\n</g>\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"basic_calendar_line",use:"basic_calendar_line-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="design-iconfont" id="basic_calendar_line"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.03806 3.30866C7 3.40054 7 3.51703 7 3.75V4H6.2C5.0799 4 4.51984 4 4.09202 4.21799C3.71569 4.40973 3.40973 4.71569 3.21799 5.09202C3 5.51984 3 6.0799 3 7.2V17.8C3 18.9201 3 19.4802 3.21799 19.908C3.40973 20.2843 3.71569 20.5903 4.09202 20.782C4.51984 21 5.0799 21 6.2 21H17.8C18.9201 21 19.4802 21 19.908 20.782C20.2843 20.5903 20.5903 20.2843 20.782 19.908C21 19.4802 21 18.9201 21 17.8V7.2C21 6.0799 21 5.51984 20.782 5.09202C20.5903 4.71569 20.2843 4.40973 19.908 4.21799C19.4802 4 18.9201 4 17.8 4H17V3.75C17 3.51703 17 3.40054 16.9619 3.30866C16.9112 3.18614 16.8139 3.08881 16.6913 3.03806C16.5995 3 16.483 3 16.25 3C16.017 3 15.9005 3 15.8087 3.03806C15.6861 3.08881 15.5888 3.18614 15.5381 3.30866C15.5 3.40054 15.5 3.51703 15.5 3.75V4H8.5V3.75C8.5 3.51703 8.5 3.40054 8.46194 3.30866C8.41119 3.18614 8.31386 3.08881 8.19134 3.03806C8.09946 3 7.98297 3 7.75 3C7.51703 3 7.40054 3 7.30866 3.03806C7.18614 3.08881 7.08881 3.18614 7.03806 3.30866ZM15.5 7.25V5.5H8.5V7.25C8.5 7.48297 8.5 7.59946 8.46194 7.69134C8.41119 7.81386 8.31386 7.91119 8.19134 7.96194C8.09946 8 7.98297 8 7.75 8C7.51703 8 7.40054 8 7.30866 7.96194C7.18614 7.91119 7.08881 7.81386 7.03806 7.69134C7 7.59946 7 7.48297 7 7.25V5.5H6.2C5.6152 5.5 5.26681 5.50117 5.00855 5.52227C4.85093 5.53514 4.78468 5.55214 4.76692 5.55765C4.67765 5.60469 4.60469 5.67765 4.55765 5.76693C4.55214 5.78468 4.53514 5.85093 4.52227 6.00855C4.50117 6.26681 4.5 6.6152 4.5 7.2V9.5H19.5V7.2C19.5 6.6152 19.4988 6.26681 19.4777 6.00855C19.4649 5.85094 19.4479 5.78469 19.4424 5.76693C19.3953 5.67765 19.3224 5.60469 19.2331 5.55765C19.2153 5.55214 19.1491 5.53514 18.9914 5.52227C18.7332 5.50117 18.3848 5.5 17.8 5.5H17V7.25C17 7.48297 17 7.59946 16.9619 7.69134C16.9112 7.81386 16.8139 7.91119 16.6913 7.96194C16.5995 8 16.483 8 16.25 8C16.017 8 15.9005 8 15.8087 7.96194C15.6861 7.91119 15.5888 7.81386 15.5381 7.69134C15.5 7.59946 15.5 7.48297 15.5 7.25ZM19.5 11H4.5V17.8C4.5 18.3848 4.50117 18.7332 4.52227 18.9914C4.53514 19.1491 4.55214 19.2153 4.55765 19.2331C4.60469 19.3224 4.67765 19.3953 4.76693 19.4424C4.78469 19.4479 4.85094 19.4649 5.00855 19.4777C5.26681 19.4988 5.6152 19.5 6.2 19.5H17.8C18.3848 19.5 18.7332 19.4988 18.9914 19.4777C19.1491 19.4649 19.2153 19.4479 19.2331 19.4424C19.3224 19.3953 19.3953 19.3224 19.4424 19.2331C19.4479 19.2153 19.4649 19.1491 19.4777 18.9914C19.4988 18.7332 19.5 18.3848 19.5 17.8V11ZM19.2352 5.55834L19.2383 5.55945C19.2383 5.55945 19.2381 5.55938 19.2379 5.55927L19.2352 5.55834ZM19.4405 5.76175C19.4406 5.76169 19.441 5.76263 19.4417 5.76475L19.4405 5.76175ZM19.4405 19.2383L19.4417 19.2353C19.441 19.2374 19.4406 19.2383 19.4405 19.2383ZM19.2383 19.4405C19.2383 19.4406 19.2374 19.441 19.2352 19.4417L19.2383 19.4405ZM4.76478 19.4417L4.76181 19.4406L4.76336 19.4412L4.76478 19.4417ZM4.55945 19.2383C4.55943 19.2383 4.55904 19.2374 4.55833 19.2352L4.55945 19.2383ZM4.55945 5.76175L4.55833 5.76478C4.55904 5.76264 4.55943 5.76169 4.55945 5.76175ZM4.76175 5.55945C4.76169 5.55943 4.76264 5.55904 4.76478 5.55833L4.76175 5.55945Z" /></symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"basic_detail_line",use:"basic_detail_line-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="design-iconfont" id="basic_detail_line">\n  <path d="M16.8 20.5H7.2C6.6152 20.5 6.26681 20.4988 6.00855 20.4777C5.85092 20.4649 5.78467 20.4479 5.76692 20.4424C5.67764 20.3953 5.60468 20.3223 5.55765 20.2331C5.55214 20.2153 5.53514 20.1491 5.52227 19.9914C5.50117 19.7332 5.5 19.3848 5.5 18.8V5.2C5.5 4.6152 5.50117 4.26681 5.52227 4.00855C5.53514 3.85094 5.55214 3.78468 5.55765 3.76693C5.60469 3.67765 5.67765 3.60469 5.76693 3.55765C5.78468 3.55214 5.85093 3.53514 6.00855 3.52227C6.26681 3.50117 6.6152 3.5 7.2 3.5H16.8C17.3848 3.5 17.7332 3.50117 17.9914 3.52227C18.1491 3.53514 18.2153 3.55214 18.2331 3.55765C18.3224 3.60469 18.3953 3.67765 18.4424 3.76692C18.4479 3.78467 18.4649 3.85093 18.4777 4.00855C18.4988 4.26681 18.5 4.6152 18.5 5.2V18.8C18.5 19.3848 18.4988 19.7332 18.4777 19.9914C18.4649 20.1491 18.4479 20.2153 18.4424 20.2331C18.3953 20.3223 18.3224 20.3953 18.2331 20.4424C18.2153 20.4479 18.1491 20.4649 17.9914 20.4777C17.7332 20.4988 17.3848 20.5 16.8 20.5ZM5.76175 20.4405L5.76476 20.4417C5.76263 20.441 5.76169 20.4406 5.76175 20.4405ZM5.55912 20.2375C5.55933 20.238 5.55944 20.2383 5.55945 20.2382L5.55834 20.2352L5.55912 20.2375ZM5.55945 3.76175L5.55833 3.76478C5.55904 3.76264 5.55943 3.76169 5.55945 3.76175ZM5.76175 3.55945C5.76169 3.55943 5.76264 3.55904 5.76478 3.55833L5.76175 3.55945ZM18.2383 3.55945L18.2352 3.55833C18.2374 3.55904 18.2383 3.55943 18.2383 3.55945ZM18.4405 3.76175C18.4406 3.76169 18.441 3.76264 18.4417 3.76477L18.4405 3.76175ZM18.4405 20.2383L18.4417 20.2352C18.441 20.2373 18.4406 20.2383 18.4405 20.2383ZM18.2383 20.4405C18.2383 20.4406 18.2373 20.441 18.2352 20.4417L18.2383 20.4405ZM7.2 2C6.0799 2 5.51984 2 5.09202 2.21799C4.71569 2.40973 4.40973 2.71569 4.21799 3.09202C4 3.51984 4 4.0799 4 5.2V18.8C4 19.9201 4 20.4802 4.21799 20.908C4.40973 21.2843 4.71569 21.5903 5.09202 21.782C5.51984 22 6.0799 22 7.2 22H16.8C17.9201 22 18.4802 22 18.908 21.782C19.2843 21.5903 19.5903 21.2843 19.782 20.908C20 20.4802 20 19.9201 20 18.8V5.2C20 4.0799 20 3.51984 19.782 3.09202C19.5903 2.71569 19.2843 2.40973 18.908 2.21799C18.4802 2 17.9201 2 16.8 2H7.2ZM8.03806 7.30866C8 7.40054 8 7.51703 8 7.75C8 7.98297 8 8.09946 8.03806 8.19134C8.08881 8.31386 8.18614 8.41119 8.30866 8.46194C8.40054 8.5 8.51703 8.5 8.75 8.5H15.25C15.483 8.5 15.5995 8.5 15.6913 8.46194C15.8139 8.41119 15.9112 8.31386 15.9619 8.19134C16 8.09946 16 7.98297 16 7.75C16 7.51703 16 7.40054 15.9619 7.30866C15.9112 7.18614 15.8139 7.08881 15.6913 7.03806C15.5995 7 15.483 7 15.25 7H8.75C8.51703 7 8.40054 7 8.30866 7.03806C8.18614 7.08881 8.08881 7.18614 8.03806 7.30866ZM8 12C8 11.767 8 11.6505 8.03806 11.5587C8.08881 11.4361 8.18614 11.3388 8.30866 11.2881C8.40054 11.25 8.51703 11.25 8.75 11.25H15.25C15.483 11.25 15.5995 11.25 15.6913 11.2881C15.8139 11.3388 15.9112 11.4361 15.9619 11.5587C16 11.6505 16 11.767 16 12C16 12.233 16 12.3495 15.9619 12.4413C15.9112 12.5639 15.8139 12.6612 15.6913 12.7119C15.5995 12.75 15.483 12.75 15.25 12.75H8.75C8.51703 12.75 8.40054 12.75 8.30866 12.7119C8.18614 12.6612 8.08881 12.5639 8.03806 12.4413C8 12.3495 8 12.233 8 12ZM8.03806 15.8087C8 15.9005 8 16.017 8 16.25C8 16.483 8 16.5995 8.03806 16.6913C8.08881 16.8139 8.18614 16.9112 8.30866 16.9619C8.40054 17 8.51703 17 8.75 17H15.25C15.483 17 15.5995 17 15.6913 16.9619C15.8139 16.9112 15.9112 16.8139 15.9619 16.6913C16 16.5995 16 16.483 16 16.25C16 16.017 16 15.9005 15.9619 15.8087C15.9112 15.6861 15.8139 15.5888 15.6913 15.5381C15.5995 15.5 15.483 15.5 15.25 15.5H8.75C8.51703 15.5 8.40054 15.5 8.30866 15.5381C8.18614 15.5888 8.08881 15.6861 8.03806 15.8087Z" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"basic_email_line",use:"basic_email_line-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="basic_email_line">\n  <path d="M5.2 5.5C4.6152 5.5 4.26681 5.50117 4.00855 5.52227C3.85093 5.53514 3.78468 5.55214 3.76692 5.55765C3.67765 5.60469 3.60469 5.67765 3.55765 5.76693C3.55214 5.78468 3.53514 5.85093 3.52227 6.00855C3.50117 6.26681 3.5 6.6152 3.5 7.2V7.41016L11.9998 11.6614L20.5 7.40991V7.2C20.5 6.6152 20.4988 6.26681 20.4777 6.00855C20.4649 5.85094 20.4479 5.78469 20.4424 5.76693C20.3953 5.67765 20.3224 5.60469 20.2331 5.55765C20.2153 5.55214 20.1491 5.53514 19.9914 5.52227C19.7332 5.50117 19.3848 5.5 18.8 5.5H5.2ZM3.5 9.08732V16.8C3.5 17.3848 3.50117 17.7332 3.52227 17.9914C3.53514 18.1491 3.55214 18.2153 3.55765 18.2331C3.60469 18.3224 3.67765 18.3953 3.76693 18.4424C3.78469 18.4479 3.85094 18.4649 4.00855 18.4777C4.26681 18.4988 4.6152 18.5 5.2 18.5H18.8C19.3848 18.5 19.7332 18.4988 19.9914 18.4777C20.1491 18.4649 20.2153 18.4479 20.2331 18.4424C20.3224 18.3953 20.3953 18.3224 20.4424 18.2331C20.4479 18.2153 20.4649 18.1491 20.4777 17.9914C20.4988 17.7332 20.5 17.3848 20.5 16.8V9.08707L12.3353 13.1708C12.1241 13.2764 11.8755 13.2764 11.6643 13.1708L3.5 9.08732ZM20.2383 5.55945L20.2352 5.55834C20.2374 5.55904 20.2383 5.55943 20.2383 5.55945ZM20.4405 5.76175C20.4406 5.76169 20.441 5.76263 20.4417 5.76475L20.4405 5.76175ZM20.4405 18.2382L20.4417 18.2353C20.4409 18.2374 20.4406 18.2383 20.4405 18.2382ZM20.2382 18.4405C20.2383 18.4406 20.2374 18.4409 20.2353 18.4417L20.2382 18.4405ZM3.76175 18.4405L3.76478 18.4417C3.76265 18.441 3.76169 18.4406 3.76175 18.4405ZM3.55945 18.2383C3.55943 18.2383 3.55904 18.2374 3.55833 18.2352L3.55945 18.2383ZM3.55945 5.76175L3.55833 5.76478C3.55904 5.76264 3.55943 5.76169 3.55945 5.76175ZM3.76175 5.55945C3.76169 5.55943 3.76264 5.55904 3.76478 5.55833L3.76175 5.55945ZM2 7.2C2 6.0799 2 5.51984 2.21799 5.09202C2.40973 4.71569 2.71569 4.40973 3.09202 4.21799C3.51984 4 4.0799 4 5.2 4H18.8C19.9201 4 20.4802 4 20.908 4.21799C21.2843 4.40973 21.5903 4.71569 21.782 5.09202C22 5.51984 22 6.0799 22 7.2V16.8C22 17.9201 22 18.4802 21.782 18.908C21.5903 19.2843 21.2843 19.5903 20.908 19.782C20.4802 20 19.9201 20 18.8 20H5.2C4.0799 20 3.51984 20 3.09202 19.782C2.71569 19.5903 2.40973 19.2843 2.21799 18.908C2 18.4802 2 17.9201 2 16.8V7.2Z" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"basic_extend_close",use:"basic_extend_close-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" id="basic_extend_close">\n<path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M12.2276 2.76511C12.1357 2.80317 12.0534 2.88554 11.8886 3.05027L7.99953 6.93936L4.11045 3.05027C3.94571 2.88554 3.86334 2.80317 3.77146 2.76511C3.64894 2.71436 3.51129 2.71436 3.38877 2.76511C3.29689 2.80317 3.21452 2.88554 3.04979 3.05027C2.88505 3.21501 2.80268 3.29738 2.76462 3.38926C2.71388 3.51178 2.71388 3.64943 2.76462 3.77195C2.80268 3.86383 2.88505 3.9462 3.04979 4.11093L6.93887 8.00002L3.04979 11.8891C2.88505 12.0538 2.80268 12.1362 2.76462 12.2281C2.71388 12.3506 2.71388 12.4883 2.76462 12.6108C2.80268 12.7027 2.88505 12.785 3.04979 12.9498C3.21452 13.1145 3.29689 13.1969 3.38877 13.2349C3.51129 13.2857 3.64894 13.2857 3.77146 13.2349C3.86334 13.1969 3.94571 13.1145 4.11045 12.9498L7.99953 9.06068L11.8886 12.9498C12.0534 13.1145 12.1357 13.1969 12.2276 13.2349C12.3501 13.2857 12.4878 13.2857 12.6103 13.2349C12.7022 13.1969 12.7845 13.1145 12.9493 12.9498C13.114 12.785 13.1964 12.7027 13.2344 12.6108C13.2852 12.4883 13.2852 12.3506 13.2344 12.2281C13.1964 12.1362 13.114 12.0538 12.9493 11.8891L9.06019 8.00002L12.9493 4.11093C13.114 3.9462 13.1964 3.86383 13.2344 3.77195C13.2852 3.64943 13.2852 3.51178 13.2344 3.38926C13.1964 3.29738 13.114 3.21501 12.9493 3.05027C12.7845 2.88554 12.7022 2.80317 12.6103 2.76511C12.4878 2.71436 12.3501 2.71436 12.2276 2.76511Z" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"basic_extend_window",use:"basic_extend_window-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="basic_extend_window">\n  <path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M19.5 19L19.5 15.5V13V12.5C19.5 12.2239 19.7239 12 20 12H20.5C20.7761 12 21 12.2239 21 12.5L21 13L21 15.5L21 19C21 20.1046 20.1046 21 19 21L5 21C3.89543 21 3 20.1046 3 19L3 5C3 3.89543 3.89543 3 5 3L8.49856 3L8.5 3H11.5C11.7761 3 12 3.22386 12 3.5V4C12 4.27614 11.7761 4.5 11.5 4.5L11 4.5L8.5 4.5L5 4.5C4.72386 4.5 4.5 4.72386 4.5 5L4.5 19C4.5 19.2761 4.72386 19.5 5 19.5L19 19.5C19.2761 19.5 19.5 19.2761 19.5 19ZM10.2001 8.5L10.2001 12.7998L18.7782 4.22173C18.9735 4.02647 19.2901 4.02647 19.4854 4.22173L19.8389 4.57528C20.0342 4.77055 20.0342 5.08713 19.8389 5.28239L11.1213 14H15.7002C15.9763 14 16.2002 14.2239 16.2002 14.5V15C16.2002 15.2762 15.9763 15.5 15.7002 15.5L9.20017 15.5C9.08043 15.5 8.97052 15.4579 8.88443 15.3877C8.77196 15.2961 8.70014 15.1564 8.70014 15L8.70014 8.5C8.70014 8.22386 8.924 8 9.20014 8H9.70014C9.97628 8 10.2001 8.22386 10.2001 8.5Z" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"basic_group_line",use:"basic_group_line-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="design-iconfont" id="basic_group_line">\n  <path d="M13.5 7.65503L13.5 7.65519C13.5057 8.9993 14.4915 9.9 15.5044 9.9C16.5137 9.9 17.5 8.99576 17.5 7.65295C17.5 6.38614 16.5532 5.5 15.5044 5.5C14.4603 5.5 13.4947 6.41455 13.5 7.65503ZM12 7.6615C11.9913 5.64254 13.5779 4 15.5044 4C17.4396 4 19 5.61688 19 7.65295C19 9.72324 17.4396 11.4 15.5044 11.4C13.5691 11.4 12.0088 9.73179 12 7.6615ZM15.5 14.5C17.9236 14.5 19.4053 15.4039 20.1554 16.0347C20.2429 16.1083 20.2938 16.1514 20.3357 16.1891C20.3732 16.2229 20.3862 16.2373 20.3896 16.2412L20.3899 16.2416C20.3903 16.2419 20.3907 16.2424 20.3911 16.2429C20.3923 16.2444 20.394 16.2467 20.3973 16.252C20.404 16.2625 20.4206 16.2905 20.4478 16.3489C20.4725 16.4019 20.4792 16.427 20.4858 16.4846C20.4979 16.5895 20.5 16.7292 20.5 17.0716V18.5H10.5V17.0716C10.5 16.7291 10.5021 16.5895 10.5142 16.4846C10.5208 16.427 10.5275 16.4019 10.5522 16.3489C10.5794 16.2905 10.596 16.2625 10.6027 16.252C10.6073 16.2446 10.6088 16.2429 10.61 16.2416L10.6104 16.2412C10.6138 16.2373 10.6268 16.2229 10.6643 16.1891C10.7062 16.1514 10.7571 16.1083 10.8446 16.0347C11.5947 15.4039 13.0763 14.5 15.5 14.5ZM9.19241 15.7157C9 16.1289 9 16.4432 9 17.0716V19.1765C9 19.5647 9 19.7588 9.1206 19.8794C9.24121 20 9.43531 20 9.82353 20H21.1765C21.5647 20 21.7588 20 21.8794 19.8794C22 19.7588 22 19.5647 22 19.1765V17.0716C22 16.4432 22 16.1289 21.8076 15.7157C21.6152 15.3025 21.4504 15.1639 21.1208 14.8867C20.1493 14.0697 18.3359 13 15.5 13C12.6641 13 10.8507 14.0697 9.87915 14.8867C9.54959 15.1639 9.38481 15.3025 9.19241 15.7157ZM5.80002 8.81919L5.80002 8.81902C5.79565 7.83258 6.5903 7.06 7.504 7.06C8.42152 7.06 9.2 7.8069 9.2 8.81803C9.2 9.90102 8.38145 10.66 7.504 10.66C6.62311 10.66 5.8047 9.90376 5.80002 8.81919ZM7.504 12.16C9.27336 12.16 10.7 10.6645 10.7 8.81803C10.7 7.00208 9.27336 5.56 7.504 5.56C5.74262 5.56 4.29206 7.02497 4.30003 8.82566C4.308 10.6721 5.73465 12.16 7.504 12.16ZM3.2835 16.8721C3.96144 16.3091 5.30224 15.5 7.49999 15.5C7.55714 15.5 7.61371 15.5005 7.6697 15.5016C7.71246 15.3658 7.76594 15.2262 7.83284 15.0825C7.97576 14.7756 8.13819 14.5096 8.35857 14.2592C8.42262 14.1864 8.48903 14.1183 8.55441 14.0554C8.22149 14.0196 7.87018 14 7.49999 14C4.89544 14 3.22522 14.9707 2.32516 15.7181C2.01662 15.9744 1.86235 16.1025 1.68117 16.4885C1.5 16.8744 1.5 17.1677 1.5 17.7543V19.2353C1.5 19.5958 1.5 19.776 1.61199 19.888C1.72398 20 1.90422 20 2.26471 20H7.54644C7.53914 19.9604 7.53335 19.9229 7.52867 19.8881C7.49955 19.6715 7.49993 19.4301 7.50018 19.2747L7.50022 19.2364L7.50023 18.5H3V17.7543C3 17.6026 3.00009 17.494 3.00238 17.3999C3.00462 17.3084 3.00855 17.2543 3.01262 17.2193C3.01624 17.1881 3.01961 17.1756 3.02082 17.1713C3.02197 17.1672 3.02572 17.1542 3.03902 17.1258C3.06169 17.0776 3.07499 17.0552 3.07933 17.0482C3.08391 17.0435 3.09514 17.0324 3.11779 17.0122C3.15516 16.9789 3.20119 16.9404 3.2835 16.8721Z" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"basic_me_fill",use:"basic_me_fill-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="design-iconfont" id="basic_me_fill"><path fill-rule="evenodd" clip-rule="evenodd" d="M16.3 7.44277C16.3 9.96069 14.3829 12 12.0054 12C9.62779 12 7.71074 9.9711 7.70003 7.45318C7.68932 4.99769 9.6385 3 12.0054 3C14.3829 3 16.3 4.96647 16.3 7.44277ZM3.7441 16.9039C3.5 17.415 3.5 17.8108 3.5 18.6023V20C3.5 20.4714 3.5 20.7071 3.64645 20.8535C3.79289 21 4.0286 21 4.5 21H19.5C19.9714 21 20.2071 21 20.3536 20.8535C20.5 20.7071 20.5 20.4714 20.5 20V18.6023C20.5 17.8108 20.5 17.415 20.2559 16.9039C20.0118 16.3929 19.7971 16.2194 19.3678 15.8725C18.1017 14.8494 15.7256 13.5 12 13.5C8.27438 13.5 5.89824 14.8495 4.63215 15.8725C4.20285 16.2194 3.9882 16.3929 3.7441 16.9039Z" /></symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"basic_me_line",use:"basic_me_line-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="design-iconfont" id="basic_me_line">\n  <path d="M9.20002 7.4468C9.20757 9.22393 10.5364 10.5 12.0054 10.5C13.4708 10.5 14.8 9.21849 14.8 7.44277C14.8 5.75028 13.5106 4.5 12.0054 4.5C10.5069 4.5 9.19276 5.78425 9.20001 7.44664L9.20002 7.4468ZM12.0054 3C14.3829 3 16.3 4.96647 16.3 7.44277C16.3 9.96069 14.3829 12 12.0054 12C9.62779 12 7.71074 9.9711 7.70003 7.45318C7.68932 4.99769 9.6385 3 12.0054 3ZM5.57491 17.0392C5.33771 17.2309 5.27215 17.2881 5.22521 17.3394C5.206 17.3604 5.16901 17.401 5.09764 17.5504C5.05117 17.6477 5.03304 17.7134 5.02042 17.8216C5.00217 17.9782 5 18.1777 5 18.6023V19.5H19V18.6023C19 18.1777 18.9978 17.9782 18.9796 17.8216C18.967 17.7134 18.9488 17.6477 18.9024 17.5504C18.831 17.401 18.794 17.3604 18.7748 17.3394C18.7278 17.2881 18.6623 17.2309 18.4251 17.0392C17.3831 16.1972 15.3312 15 12 15C8.66877 15 6.61692 16.1972 5.57491 17.0392ZM3.5 18.6023C3.5 17.8108 3.5 17.415 3.7441 16.9039C3.9882 16.3929 4.20285 16.2194 4.63215 15.8725C5.89824 14.8495 8.27438 13.5 12 13.5C15.7256 13.5 18.1017 14.8494 19.3678 15.8725C19.7971 16.2194 20.0118 16.3929 20.2559 16.9039C20.5 17.415 20.5 17.8108 20.5 18.6023V20C20.5 20.4714 20.5 20.7071 20.3536 20.8535C20.2071 21 19.9714 21 19.5 21H4.5C4.0286 21 3.79289 21 3.64645 20.8535C3.5 20.7071 3.5 20.4714 3.5 20V18.6023Z" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"basic_more2_line",use:"basic_more2_line-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="design-iconfont" id="basic_more2_line"><path fill-rule="evenodd" clip-rule="evenodd" d="M3 4.25C3 4.01703 3 3.90054 3.03806 3.80866C3.08881 3.68614 3.18614 3.58881 3.30866 3.53806C3.40054 3.5 3.51703 3.5 3.75 3.5H20.25C20.483 3.5 20.5995 3.5 20.6913 3.53806C20.8139 3.58881 20.9112 3.68614 20.9619 3.80866C21 3.90054 21 4.01703 21 4.25C21 4.48297 21 4.59946 20.9619 4.69134C20.9112 4.81386 20.8139 4.91119 20.6913 4.96194C20.5995 5 20.483 5 20.25 5H3.75C3.51703 5 3.40054 5 3.30866 4.96194C3.18614 4.91119 3.08881 4.81386 3.03806 4.69134C3 4.59946 3 4.48297 3 4.25ZM3 12C3 11.767 3 11.6505 3.03806 11.5587C3.08881 11.4361 3.18614 11.3388 3.30866 11.2881C3.40054 11.25 3.51703 11.25 3.75 11.25H20.25C20.483 11.25 20.5995 11.25 20.6913 11.2881C20.8139 11.3388 20.9112 11.4361 20.9619 11.5587C21 11.6505 21 11.767 21 12C21 12.233 21 12.3495 20.9619 12.4413C20.9112 12.5639 20.8139 12.6612 20.6913 12.7119C20.5995 12.75 20.483 12.75 20.25 12.75H3.75C3.51703 12.75 3.40054 12.75 3.30866 12.7119C3.18614 12.6612 3.08881 12.5639 3.03806 12.4413C3 12.3495 3 12.233 3 12ZM3.03806 19.3087C3 19.4005 3 19.517 3 19.75C3 19.983 3 20.0995 3.03806 20.1913C3.08881 20.3139 3.18614 20.4112 3.30866 20.4619C3.40054 20.5 3.51703 20.5 3.75 20.5H20.25C20.483 20.5 20.5995 20.5 20.6913 20.4619C20.8139 20.4112 20.9112 20.3139 20.9619 20.1913C21 20.0995 21 19.983 21 19.75C21 19.517 21 19.4005 20.9619 19.3087C20.9112 19.1861 20.8139 19.0888 20.6913 19.0381C20.5995 19 20.483 19 20.25 19H3.75C3.51703 19 3.40054 19 3.30866 19.0381C3.18614 19.0888 3.08881 19.1861 3.03806 19.3087Z" /></symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"basic_search_line",use:"basic_search_line-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="design-iconfont" id="basic_search_line"><path fill-rule="evenodd" clip-rule="evenodd" d="M18.5 11C18.5 15.1421 15.1421 18.5 11 18.5C6.85786 18.5 3.5 15.1421 3.5 11C3.5 6.85786 6.85786 3.5 11 3.5C15.1421 3.5 18.5 6.85786 18.5 11ZM16.8116 17.8723C15.2436 19.1996 13.2153 20 11 20C6.02944 20 2 15.9706 2 11C2 6.02944 6.02944 2 11 2C15.9706 2 20 6.02944 20 11C20 13.2153 19.1996 15.2436 17.8723 16.8117L21.6065 20.5459C21.7713 20.7107 21.8536 20.793 21.8917 20.8849C21.9425 21.0074 21.9425 21.1451 21.8917 21.2676C21.8536 21.3595 21.7713 21.4419 21.6065 21.6066C21.4418 21.7713 21.3594 21.8537 21.2676 21.8918C21.145 21.9425 21.0074 21.9425 20.8849 21.8918C20.793 21.8537 20.7106 21.7713 20.5459 21.6066L16.8116 17.8723Z" /></symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"basic_send_fill",use:"basic_send_fill-usage",viewBox:"0 0 24 24",content:'<symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="basic_send_fill"><path d="M19.6953 11.5611C20.0427 11.7506 20.0427 12.2494 19.6953 12.4389L5.06803 20.4174C4.6758 20.6314 4.22127 20.2627 4.3497 19.8348L6.22417 13.5889C6.33257 13.2277 6.63493 12.9582 7.00615 12.8919L12 12L7.00615 11.1081C6.63493 11.0418 6.33257 10.7723 6.22417 10.4111L4.3497 4.16523C4.22127 3.7373 4.6758 3.36862 5.06802 3.58256L19.6953 11.5611Z" fill="#FFFFFF" /></symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"basic_volume_line",use:"basic_volume_line-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="design-iconfont" id="basic_volume_line"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.56596 8.74215L11.25 4.50547V19.4945L7.56595 15.2579C7.42351 15.0941 7.21708 15 7 15H5.25C4.88759 15 4.66089 14.9994 4.49008 14.9855C4.32802 14.9722 4.28335 14.9508 4.27301 14.9455C4.17893 14.8976 4.10244 14.8211 4.0545 14.727C4.04923 14.7167 4.02778 14.672 4.01454 14.5099C4.00059 14.3391 4 14.1124 4 13.75V10.25C4 9.88761 4.00059 9.66091 4.01454 9.4901C4.02778 9.32804 4.04923 9.28337 4.0545 9.27303C4.10244 9.17895 4.17893 9.10246 4.27301 9.05452C4.28335 9.04925 4.32802 9.0278 4.49008 9.01456C4.66089 9.00061 4.88759 9.00002 5.25 9.00002H7C7.21708 9.00002 7.42352 8.90597 7.56596 8.74215ZM12.4967 2.50327C12.2772 2.25691 11.9503 2.13467 11.623 2.17656C11.3109 2.21651 11.1048 2.41598 11.0334 2.48502L11.0327 2.48566C10.9428 2.5727 10.8425 2.68808 10.7481 2.79668L10.7322 2.81497L6.65828 7.50002H5.25L5.22223 7.50002C4.89597 7.50001 4.60723 7.49999 4.36793 7.51954C4.11311 7.54036 3.84907 7.58704 3.59202 7.71801C3.2157 7.90976 2.90974 8.21572 2.71799 8.59204C2.58702 8.84909 2.54034 9.11313 2.51952 9.36795C2.49997 9.60724 2.49999 9.89597 2.5 10.2222V10.2222V10.25V13.75V13.7778V13.7778C2.49999 14.1041 2.49997 14.3928 2.51952 14.6321C2.54034 14.8869 2.58702 15.151 2.71799 15.408C2.90974 15.7843 3.2157 16.0903 3.59202 16.282C3.84907 16.413 4.11311 16.4597 4.36793 16.4805C4.60722 16.5001 4.89596 16.5 5.22221 16.5H5.25H6.65828L10.7322 21.185L10.7481 21.2033L10.7481 21.2033C10.8425 21.3119 10.9428 21.4273 11.0327 21.5143L11.0334 21.5149C11.1048 21.584 11.3109 21.7834 11.6231 21.8234C11.9503 21.8653 12.2772 21.743 12.4967 21.4967C12.706 21.2617 12.7307 20.9759 12.7392 20.877L12.7393 20.8761C12.7501 20.7514 12.75 20.5985 12.75 20.4547V20.4546L12.75 20.4304V3.56957L12.75 3.54533V3.5453C12.75 3.40142 12.7501 3.24857 12.7393 3.12387L12.7392 3.12296C12.7307 3.02403 12.706 2.73822 12.4967 2.50327ZM21.9999 11.9999C21.9999 15.0158 20.6648 17.7199 18.5534 19.5534L17.4896 18.4896C19.3309 16.9304 20.4999 14.6017 20.4999 11.9999C20.4999 9.39821 19.331 7.0695 17.4897 5.51031L18.5534 4.44654C20.6648 6.28001 21.9999 8.98406 21.9999 11.9999ZM17.9999 12C17.9999 13.9116 17.1059 15.6144 15.7132 16.7132L14.6426 15.6426C15.7681 14.8247 16.4999 13.4978 16.4999 12C16.4999 10.5022 15.7681 9.17533 14.6426 8.35736L15.7132 7.28679C17.1059 8.38555 17.9999 10.0884 17.9999 12Z" /></symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"busy",use:"busy-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" id="busy">\n<circle cx="8" cy="8" r="8" fill="currentColor" />\n<rect x="4" y="7" width="8" height="2" fill="white" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"c-add-custom",use:"c-add-custom-usage",viewBox:"0 0 12 12",content:'<symbol viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" id="c-add-custom">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M10.1 3.91998C10.1 3.74324 9.95674 3.59998 9.78001 3.59998H9.22001C9.04327 3.59998 8.90001 3.74324 8.90001 3.91998V4.99997H7.82C7.64327 4.99997 7.5 5.14324 7.5 5.31997V5.87997C7.5 6.0567 7.64327 6.19997 7.82 6.19997H8.90001V7.27998C8.90001 7.45671 9.04327 7.59998 9.22001 7.59998H9.78001C9.95674 7.59998 10.1 7.45671 10.1 7.27998V6.19997H11.18C11.3567 6.19997 11.5 6.0567 11.5 5.87997V5.31997C11.5 5.14324 11.3567 4.99997 11.18 4.99997H10.1V3.91998Z" fill="#E1E4EB" />\n<mask id="c-add-custom_path-2-inside-1_58_6484" fill="white">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M4.5 6C5.60457 6 6.5 5.10457 6.5 4C6.5 2.89543 5.60457 2 4.5 2C3.39543 2 2.5 2.89543 2.5 4C2.5 5.10457 3.39543 6 4.5 6ZM3.5 6.5C2.11929 6.5 1 7.61929 1 9V9.68C1 9.85673 1.14327 10 1.32 10H7.68C7.85673 10 8 9.85673 8 9.68V9C8 7.61929 6.88071 6.5 5.5 6.5H3.5Z" />\n</mask>\n<path d="M5.3 4C5.3 4.44183 4.94183 4.8 4.5 4.8V7.2C6.26731 7.2 7.7 5.76731 7.7 4H5.3ZM4.5 3.2C4.94183 3.2 5.3 3.55817 5.3 4H7.7C7.7 2.23269 6.26731 0.8 4.5 0.8V3.2ZM3.7 4C3.7 3.55817 4.05817 3.2 4.5 3.2V0.8C2.73269 0.8 1.3 2.23269 1.3 4H3.7ZM4.5 4.8C4.05817 4.8 3.7 4.44183 3.7 4H1.3C1.3 5.76731 2.73269 7.2 4.5 7.2V4.8ZM2.2 9C2.2 8.28203 2.78203 7.7 3.5 7.7V5.3C1.45655 5.3 -0.2 6.95655 -0.2 9H2.2ZM2.2 9.68V9H-0.2V9.68H2.2ZM1.32 8.8C1.80601 8.8 2.2 9.19399 2.2 9.68H-0.2C-0.2 10.5195 0.480528 11.2 1.32 11.2V8.8ZM7.68 8.8H1.32V11.2H7.68V8.8ZM6.8 9.68C6.8 9.19399 7.19399 8.8 7.68 8.8V11.2C8.51947 11.2 9.2 10.5195 9.2 9.68H6.8ZM6.8 9V9.68H9.2V9H6.8ZM5.5 7.7C6.21797 7.7 6.8 8.28203 6.8 9H9.2C9.2 6.95655 7.54345 5.3 5.5 5.3V7.7ZM3.5 7.7H5.5V5.3H3.5V7.7Z" fill="#E1E4EB" mask="url(#c-add-custom_path-2-inside-1_58_6484)" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"c-add-remark",use:"c-add-remark-usage",viewBox:"0 0 12 12",content:'<symbol viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" id="c-add-remark">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M3.43558 6.0419C3.40403 6.07165 3.37886 6.1075 3.36159 6.14728L2.91937 7.16582C2.80149 7.43733 3.08374 7.70959 3.35082 7.58201L4.30304 7.12717C4.33297 7.11287 4.3605 7.094 4.38464 7.07124L9.65071 2.10577C9.77929 1.98453 9.78524 1.782 9.664 1.65342L9.14261 1.10047C9.02137 0.971885 8.81884 0.965935 8.69026 1.08718L3.43558 6.0419ZM1.32 8.86769C1.14327 8.86769 1 9.01096 1 9.18769V9.74769C1 9.92442 1.14327 10.0677 1.32 10.0677H10.68C10.8567 10.0677 11 9.92442 11 9.74769V9.18769C11 9.01096 10.8567 8.86769 10.68 8.86769H1.32Z" fill="#E1E4EB" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"c-add-schedule",use:"c-add-schedule-usage",viewBox:"0 0 12 12",content:'<symbol viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" id="c-add-schedule">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M3.12581 1C3.05638 1 3.00009 1.05628 3.00009 1.12571V2H2.00009C1.24267 2 0.628662 2.82026 0.628662 3.49999V9.49998C0.628662 10.1797 1.24267 10.7307 2.00009 10.7307L10.0001 10.7307C10.7223 10.7307 11.3715 10.1367 11.3715 9.49998V3.5C11.3715 2.82026 10.7575 2 10.0001 2L9.00009 2V1.12571C9.00009 1.05628 8.94381 1 8.87438 1H7.86866C7.79923 1 7.74295 1.05628 7.74295 1.12571V2H6.31421H4.25723V1.12571C4.25723 1.05628 4.20095 1 4.13152 1H3.12581ZM10.0001 9.49998V3.2L6.37159 3.2H2.00009L2.00009 9.49998L10.0001 9.49998ZM6.3801 3.8C6.55683 3.8 6.7001 3.94327 6.7001 4.12V5.60001H8.28009C8.45682 5.60001 8.60009 5.74328 8.60009 5.92001V6.48001C8.60009 6.65675 8.45682 6.80001 8.28009 6.80001H6.7001V8.48C6.7001 8.65673 6.55683 8.8 6.3801 8.8H5.8201C5.64337 8.8 5.5001 8.65673 5.5001 8.48V6.80001H3.92009C3.74336 6.80001 3.60009 6.65675 3.60009 6.48001V5.92001C3.60009 5.74328 3.74336 5.60001 3.92009 5.60001H5.5001V4.12C5.5001 3.94327 5.64337 3.8 5.8201 3.8H6.3801Z" fill="#E1E4EB" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"c-icard",use:"c-icard-usage",viewBox:"0 0 12 12",content:'<symbol viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" id="c-icard">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M7.5 2.32C7.5 2.14327 7.64327 2 7.82 2H11.18C11.3567 2 11.5 2.14327 11.5 2.32V2.88C11.5 3.05673 11.3567 3.2 11.18 3.2H7.82C7.64327 3.2 7.5 3.05673 7.5 2.88V2.32ZM8.9 5.71998C8.9 5.54325 9.04327 5.39998 9.22 5.39998H11.18C11.3567 5.39998 11.5 5.54325 11.5 5.71998V6.27998C11.5 6.45671 11.3567 6.59998 11.18 6.59998H9.22C9.04327 6.59998 8.9 6.45671 8.9 6.27998V5.71998ZM9.22 8.80001C9.04327 8.80001 8.9 8.94328 8.9 9.12001V9.68001C8.9 9.85674 9.04327 10 9.22 10H11.18C11.3567 10 11.5 9.85674 11.5 9.68001V9.12001C11.5 8.94328 11.3567 8.80001 11.18 8.80001H9.22Z" fill="#E1E4EB" />\n<mask id="c-icard_path-2-inside-1_58_6506" fill="white">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M4.5 6C5.60457 6 6.5 5.10457 6.5 4C6.5 2.89543 5.60457 2 4.5 2C3.39543 2 2.5 2.89543 2.5 4C2.5 5.10457 3.39543 6 4.5 6ZM3.5 6.5C2.11929 6.5 1 7.61929 1 9V9.68C1 9.85673 1.14327 10 1.32 10H7.68C7.85673 10 8 9.85673 8 9.68V9C8 7.61929 6.88071 6.5 5.5 6.5H3.5Z" />\n</mask>\n<path d="M5.3 4C5.3 4.44183 4.94183 4.8 4.5 4.8V7.2C6.26731 7.2 7.7 5.76731 7.7 4H5.3ZM4.5 3.2C4.94183 3.2 5.3 3.55817 5.3 4H7.7C7.7 2.23269 6.26731 0.8 4.5 0.8V3.2ZM3.7 4C3.7 3.55817 4.05817 3.2 4.5 3.2V0.8C2.73269 0.8 1.3 2.23269 1.3 4H3.7ZM4.5 4.8C4.05817 4.8 3.7 4.44183 3.7 4H1.3C1.3 5.76731 2.73269 7.2 4.5 7.2V4.8ZM2.2 9C2.2 8.28203 2.78203 7.7 3.5 7.7V5.3C1.45655 5.3 -0.2 6.95655 -0.2 9H2.2ZM2.2 9.68V9H-0.2V9.68H2.2ZM1.32 8.8C1.80601 8.8 2.2 9.19399 2.2 9.68H-0.2C-0.2 10.5195 0.480528 11.2 1.32 11.2V8.8ZM7.68 8.8H1.32V11.2H7.68V8.8ZM6.8 9.68C6.8 9.19399 7.19399 8.8 7.68 8.8V11.2C8.51947 11.2 9.2 10.5195 9.2 9.68H6.8ZM6.8 9V9.68H9.2V9H6.8ZM5.5 7.7C6.21797 7.7 6.8 8.28203 6.8 9H9.2C9.2 6.95655 7.54345 5.3 5.5 5.3V7.7ZM3.5 7.7H5.5V5.3H3.5V7.7Z" fill="#E1E4EB" mask="url(#c-icard_path-2-inside-1_58_6506)" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"c-order",use:"c-order-usage",viewBox:"0 0 12 12",content:'<symbol viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" id="c-order">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M9.50005 0.800049H2.50005C1.69794 0.800049 0.800049 1.40732 0.800049 2.44449V9.5556C0.800049 10.5928 1.69794 11.2 2.50005 11.2H9.50005C10.3022 11.2 11.2 10.5928 11.2 9.5556V2.44449C11.2 1.40732 10.3022 0.800049 9.50005 0.800049ZM2.50005 2.00005H9.50005C9.77619 2.00005 10 2.19903 10 2.44449V5H2.00005V2.44449C2.00005 2.19903 2.22391 2.00005 2.50005 2.00005ZM2.00005 6.2V9.5556C2.00005 9.80106 2.22391 10 2.50005 10H9.50005C9.77619 10 10 9.80106 10 9.5556V6.2H2.00005ZM3 3.32C3 3.14327 3.14327 3 3.32 3H3.68C3.85673 3 4 3.14327 4 3.32V3.88C4 4.05673 3.85673 4.2 3.68 4.2H3.32C3.14327 4.2 3 4.05673 3 3.88V3.32ZM5 3.32C5 3.14327 5.14327 3 5.32 3H5.68C5.85673 3 6 3.14327 6 3.32V3.88C6 4.05673 5.85673 4.2 5.68 4.2H5.32C5.14327 4.2 5 4.05673 5 3.88V3.32ZM7.32 3C7.14327 3 7 3.14327 7 3.32V3.88C7 4.05673 7.14327 4.2 7.32 4.2H7.68C7.85673 4.2 8 4.05673 8 3.88V3.32C8 3.14327 7.85673 3 7.68 3H7.32Z" fill="#E1E4EB" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"c-orderpop",use:"c-orderpop-usage",viewBox:"0 0 12 12",content:'<symbol viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" id="c-orderpop">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M9.8 1H2.6C1.71634 1 1 1.71634 1 2.6V3.3C1 3.80532 1.23426 4.25593 1.6001 4.54915V10.4999C1.6001 11.0522 2.04781 11.4999 2.6001 11.4999H9.8001C10.3524 11.4999 10.8001 11.0522 10.8001 10.4999V4.549C11.1658 4.25577 11.4 3.80523 11.4 3.3V2.6C11.4 1.71634 10.6837 1 9.8 1ZM9.6001 4.9H2.8001V10.2999H9.6001V4.9ZM2.2 2.6C2.2 2.37909 2.37909 2.2 2.6 2.2H9.8C10.0209 2.2 10.2 2.37909 10.2 2.6V3.3C10.2 3.52091 10.0209 3.7 9.8 3.7H2.6C2.37909 3.7 2.2 3.52091 2.2 3.3V2.6ZM4.19995 6.2199C4.19995 6.04317 4.34322 5.8999 4.51995 5.8999H6.87995C7.05668 5.8999 7.19995 6.04317 7.19995 6.2199V6.5799C7.19995 6.75663 7.05668 6.8999 6.87995 6.8999H4.51995C4.34322 6.8999 4.19995 6.75663 4.19995 6.5799V6.2199ZM4.51995 7.8999C4.34322 7.8999 4.19995 8.04317 4.19995 8.2199V8.5799C4.19995 8.75663 4.34322 8.8999 4.51995 8.8999H6.87995C7.05668 8.8999 7.19995 8.75663 7.19995 8.5799V8.2199C7.19995 8.04317 7.05668 7.8999 6.87995 7.8999H4.51995Z" fill="#E1E4EB" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"c-schedule",use:"c-schedule-usage",viewBox:"0 0 12 12",content:'<symbol viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" id="c-schedule">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M3.37143 1.12571C3.37143 1.05628 3.42771 1 3.49714 1H4.50286C4.57229 1 4.62857 1.05628 4.62857 1.12571V2H6.68555H8.11429V1.12571C8.11429 1.05628 8.17057 1 8.24 1H9.24571C9.31514 1 9.37143 1.05628 9.37143 1.12571V2L10.3714 2C11.1288 2 11.7429 2.82026 11.7429 3.5V7H10.3714V3.2L6.74293 3.2H2.37143L2.37143 9.49998L5.37143 9.49998V10.7307L2.37143 10.7307C1.61401 10.7307 1 10.1797 1 9.49998V3.49999C1 2.82026 1.61401 2 2.37143 2H3.37143V1.12571ZM8.84124 8.71586C9.02152 8.66353 9.20855 8.60924 9.36967 8.65241C9.67238 8.73352 10.7345 10.019 10.6781 10.2294C10.5137 10.843 9.73241 11.2022 9.22744 11.0669C7.39353 10.5755 5.26534 6.7418 5.69353 5.14375C5.83995 4.59733 6.80748 4.21624 7.14376 4.30647C7.48006 4.39658 7.93151 5.94201 7.8731 6.15999C7.83213 6.31289 7.70643 6.42489 7.58172 6.53601C7.45897 6.64538 7.33719 6.75389 7.29812 6.8997C7.21908 7.19466 8.11285 8.70469 8.38185 8.77677C8.51161 8.81154 8.6735 8.76455 8.84124 8.71586Z" fill="#E1E4EB" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"call-answer",use:"call-answer-usage",viewBox:"0 0 40 40",content:'<symbol viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg" id="call-answer">\n<circle cx="20" cy="20" r="20" fill="currentColor" />\n<path d="M24.7043 22.6387C23.8373 22.6387 22.9723 23.6505 22.2218 23.6505C21.472 23.6505 18.0951 20.346 18.0951 19.5238C18.0951 18.7044 19.0751 18.045 19.0751 17.1993C19.0751 16.5917 16.824 12.8869 15.8865 12.8869C14.949 12.8866 12.6982 14.552 12.6982 16.0752C12.6982 20.5298 20.9049 29.0174 26.017 29.0174C27.4246 29.0174 29.2062 27.5387 29.2062 25.8282C29.2062 25.2418 25.5481 22.6387 24.7043 22.6387Z" fill="white" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"call-in",use:"call-in-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="call-in">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M7.58153 3.61867C7.04672 2.86994 5.96495 2.787 5.32226 3.44545L3.9233 4.87871C3.26458 5.55358 2.83338 6.53144 3.06177 7.57976C3.43498 9.29277 4.57908 12.4377 8.06072 15.9193C11.5424 19.401 14.6873 20.5451 16.4003 20.9183C17.4486 21.1467 18.4265 20.7155 19.1014 20.0568L20.5346 18.6578C21.1931 18.0151 21.1101 16.9334 20.3614 16.3985L16.6707 13.7623C16.0323 13.3063 15.1487 13.4289 14.6585 14.0416L14.0187 14.8414C13.915 14.7911 13.7936 14.728 13.6559 14.6493C13.0969 14.3299 12.2642 13.7515 11.2464 12.7337C10.2285 11.7159 9.65018 10.8832 9.33078 10.3242C9.25206 10.1865 9.18893 10.0651 9.13872 9.96135L9.93847 9.32156C10.5511 8.83141 10.6738 7.94782 10.2177 7.30935L7.58153 3.61867ZM14.2577 15.7432C14.0758 16.4708 14.0754 16.4707 14.075 16.4706L14.2577 15.7432ZM14.0725 16.47L14.075 16.4706C14.3596 16.5417 14.6602 16.4407 14.8434 16.2117L15.8164 14.9955L19.4674 17.6034L18.0536 18.9833C17.6417 19.3854 17.1552 19.5476 16.7196 19.4527C15.2693 19.1367 12.3871 18.1244 9.12138 14.8587C5.8557 11.593 4.84337 8.71078 4.52739 7.26045C4.4325 6.8249 4.59466 6.33836 4.99673 5.92645L6.37671 4.51263L8.98462 8.1637L7.76836 9.1367C7.53937 9.3199 7.43815 9.61975 7.50928 9.90425L8.23668 9.7224C7.50928 9.90425 7.50958 9.90544 7.50967 9.90582L7.5101 9.90752L7.51108 9.91131L7.51348 9.92044L7.52024 9.94482C7.52566 9.96378 7.53295 9.98811 7.54247 10.0176C7.56152 10.0767 7.58946 10.1564 7.62907 10.2555C7.70833 10.4536 7.83409 10.7284 8.02841 11.0684C8.41734 11.749 9.07856 12.6872 10.1857 13.7943C11.2929 14.9015 12.231 15.5627 12.9117 15.9517C13.2517 16.146 13.5265 16.2717 13.7246 16.351C13.8236 16.3906 13.9034 16.4186 13.9624 16.4376C13.992 16.4471 14.0163 16.4544 14.0353 16.4598L14.0596 16.4666L14.0688 16.469L14.0725 16.47ZM19.2675 3.67057L15.1328 7.80529V5.11614C15.1328 4.88317 15.1328 4.76668 15.0947 4.67479C15.0439 4.55228 14.9466 4.45494 14.8241 4.4042C14.7322 4.36614 14.6157 4.36614 14.3828 4.36614C14.1498 4.36614 14.0333 4.36614 13.9414 4.4042C13.8189 4.45494 13.7216 4.55228 13.6708 4.67479C13.6328 4.76668 13.6328 4.88317 13.6328 5.11614L13.6328 9.61614C13.6328 9.84911 13.6328 9.96559 13.6708 10.0575C13.7216 10.18 13.8189 10.2773 13.9414 10.3281C14.0333 10.3661 14.1498 10.3661 14.3828 10.3661C14.4418 10.3661 14.4934 10.3661 14.539 10.3655L18.8831 10.3655C19.1161 10.3655 19.2325 10.3655 19.3244 10.3275C19.4469 10.2767 19.5443 10.1794 19.595 10.0569C19.6331 9.96497 19.6331 9.84849 19.6331 9.61552C19.6331 9.38255 19.6331 9.26606 19.595 9.17417C19.5443 9.05166 19.4469 8.95432 19.3244 8.90358C19.2325 8.86552 19.1161 8.86552 18.8831 8.86552L16.1938 8.86552L20.3281 4.73124C20.4929 4.5665 20.5752 4.48413 20.6133 4.39225C20.664 4.26973 20.664 4.13208 20.6133 4.00956C20.5752 3.91768 20.4929 3.83531 20.3281 3.67057C20.1634 3.50584 20.081 3.42347 19.9891 3.38541C19.8666 3.33466 19.729 3.33466 19.6065 3.38541C19.5146 3.42347 19.4322 3.50584 19.2675 3.67057Z" fill="#4A70FF" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"call-out",use:"call-out-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="call-out">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M7.58153 3.61867C7.04672 2.86994 5.96495 2.787 5.32226 3.44545L3.9233 4.87871C3.26458 5.55358 2.83338 6.53144 3.06177 7.57976C3.43498 9.29277 4.57908 12.4377 8.06072 15.9193C11.5424 19.401 14.6873 20.5451 16.4003 20.9183C17.4486 21.1467 18.4265 20.7155 19.1014 20.0568L20.5346 18.6578C21.1931 18.0151 21.1101 16.9334 20.3614 16.3985L16.6707 13.7623C16.0323 13.3063 15.1487 13.4289 14.6585 14.0416L14.0187 14.8414C13.915 14.7911 13.7936 14.728 13.6559 14.6493C13.0969 14.3299 12.2642 13.7515 11.2464 12.7337C10.2285 11.7159 9.65018 10.8832 9.33078 10.3242C9.25206 10.1865 9.18893 10.0651 9.13872 9.96135L9.93847 9.32156C10.5511 8.83141 10.6738 7.94782 10.2177 7.30935L7.58153 3.61867ZM14.2577 15.7432C14.0758 16.4708 14.0754 16.4707 14.075 16.4706L14.2577 15.7432ZM14.0725 16.47L14.075 16.4706C14.3596 16.5417 14.6602 16.4407 14.8434 16.2117L15.8164 14.9955L19.4674 17.6034L18.0536 18.9833C17.6417 19.3854 17.1552 19.5476 16.7196 19.4527C15.2693 19.1367 12.3871 18.1244 9.12138 14.8587C5.8557 11.593 4.84337 8.71078 4.52739 7.26045C4.4325 6.8249 4.59466 6.33836 4.99673 5.92645L6.37671 4.51263L8.98462 8.1637L7.76836 9.1367C7.53937 9.3199 7.43815 9.61975 7.50928 9.90425L8.23668 9.7224C7.50928 9.90425 7.50958 9.90544 7.50967 9.90582L7.5101 9.90752L7.51108 9.91131L7.51348 9.92044L7.52024 9.94482C7.52566 9.96378 7.53295 9.98811 7.54247 10.0176C7.56152 10.0767 7.58946 10.1564 7.62907 10.2555C7.70833 10.4536 7.83409 10.7284 8.02841 11.0684C8.41734 11.749 9.07856 12.6872 10.1857 13.7943C11.2929 14.9015 12.231 15.5627 12.9117 15.9517C13.2517 16.146 13.5265 16.2717 13.7246 16.351C13.8236 16.3906 13.9034 16.4186 13.9624 16.4376C13.992 16.4471 14.0163 16.4544 14.0353 16.4598L14.0596 16.4666L14.0688 16.469L14.0725 16.47ZM15.0166 10.0429L19.1514 5.90815V8.5973C19.1514 8.83027 19.1514 8.94676 19.1894 9.03864C19.2402 9.16116 19.3375 9.2585 19.46 9.30924C19.5519 9.3473 19.6684 9.3473 19.9014 9.3473C20.1343 9.3473 20.2508 9.3473 20.3427 9.30924C20.4652 9.2585 20.5626 9.16116 20.6133 9.03865C20.6514 8.94676 20.6514 8.83027 20.6514 8.5973V4.0973C20.6514 3.86433 20.6514 3.74785 20.6133 3.65596C20.5626 3.53345 20.4652 3.43611 20.3427 3.38536C20.2508 3.3473 20.1343 3.3473 19.9014 3.3473C19.8423 3.3473 19.7907 3.3473 19.7452 3.34792L15.401 3.34792C15.1681 3.34792 15.0516 3.34792 14.9597 3.38598C14.8372 3.43673 14.7398 3.53407 14.6891 3.65658C14.651 3.74847 14.651 3.86495 14.651 4.09792C14.651 4.33089 14.651 4.44738 14.6891 4.53927C14.7398 4.66178 14.8372 4.75912 14.9597 4.80986C15.0516 4.84792 15.1681 4.84792 15.401 4.84792L18.0903 4.84792L13.956 8.9822L13.956 8.98221C13.7913 9.14694 13.7089 9.22931 13.6708 9.32119C13.6201 9.44371 13.6201 9.58136 13.6708 9.70388C13.7089 9.79576 13.7913 9.87813 13.956 10.0429C14.1207 10.2076 14.2031 10.29 14.295 10.328C14.4175 10.3788 14.5551 10.3788 14.6777 10.328C14.7695 10.29 14.8519 10.2076 15.0166 10.0429L15.0166 10.0429Z" fill="#0FB87F" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"checked",use:"checked-usage",viewBox:"0 0 12 12",content:'<symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 12 12" id="checked">\n    <path d="M4.8,11c-0.3,0-0.6-0.1-0.8-0.3L0.2,6.4C-0.1,6-0.1,5.4,0.3,5c0.4-0.4,1-0.3,1.4,0.1l3,3.3l5.5-7.1\n            c0.3-0.4,1-0.5,1.4-0.2c0.4,0.3,0.5,1,0.2,1.4l-6.2,8C5.4,10.9,5.1,11,4.8,11C4.8,11,4.8,11,4.8,11z" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"clear",use:"clear-usage",viewBox:"0 0 12 12",content:'<symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 12 12" id="clear">\n    <path d="M7.4,6l3.3-3.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0L6,4.6L2.7,1.3c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4L4.6,6\n            L1.3,9.3c-0.4,0.4-0.4,1,0,1.4C1.5,10.9,1.7,11,2,11s0.5-0.1,0.7-0.3L6,7.4l3.3,3.3C9.5,10.9,9.7,11,10,11s0.5-0.1,0.7-0.3\n            c0.4-0.4,0.4-1,0-1.4L7.4,6z" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"close",use:"close-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" id="close">\n<path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M12.2276 2.76511C12.1357 2.80317 12.0534 2.88554 11.8886 3.05027L7.99953 6.93936L4.11045 3.05027C3.94571 2.88554 3.86334 2.80317 3.77146 2.76511C3.64894 2.71436 3.51129 2.71436 3.38877 2.76511C3.29689 2.80317 3.21452 2.88554 3.04979 3.05027C2.88505 3.21501 2.80268 3.29738 2.76462 3.38926C2.71388 3.51178 2.71388 3.64943 2.76462 3.77195C2.80268 3.86383 2.88505 3.9462 3.04979 4.11093L6.93887 8.00002L3.04979 11.8891C2.88505 12.0538 2.80268 12.1362 2.76462 12.2281C2.71388 12.3506 2.71388 12.4883 2.76462 12.6108C2.80268 12.7027 2.88505 12.785 3.04979 12.9498C3.21452 13.1145 3.29689 13.1969 3.38877 13.2349C3.51129 13.2857 3.64894 13.2857 3.77146 13.2349C3.86334 13.1969 3.94571 13.1145 4.11045 12.9498L7.99953 9.06068L11.8886 12.9498C12.0534 13.1145 12.1357 13.1969 12.2276 13.2349C12.3501 13.2857 12.4878 13.2857 12.6103 13.2349C12.7022 13.1969 12.7845 13.1145 12.9493 12.9498C13.114 12.785 13.1964 12.7027 13.2344 12.6108C13.2852 12.4883 13.2852 12.3506 13.2344 12.2281C13.1964 12.1362 13.114 12.0538 12.9493 11.8891L9.06019 8.00002L12.9493 4.11093C13.114 3.9462 13.1964 3.86383 13.2344 3.77195C13.2852 3.64943 13.2852 3.51178 13.2344 3.38926C13.1964 3.29738 13.114 3.21501 12.9493 3.05027C12.7845 2.88554 12.7022 2.80317 12.6103 2.76511C12.4878 2.71436 12.3501 2.71436 12.2276 2.76511Z" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"collapse-a",use:"collapse-a-usage",viewBox:"0 0 20 20",content:'<symbol viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" id="collapse-a">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M16 4.5C16 4.34469 16 4.26703 15.9746 4.20577C15.9408 4.1241 15.8759 4.0592 15.7942 4.02537C15.733 4 15.6553 4 15.5 4H4.49996C4.34464 4 4.26698 4 4.20573 4.02537C4.12405 4.0592 4.05916 4.1241 4.02533 4.20577C3.99995 4.26703 3.99995 4.34469 3.99995 4.5C3.99995 4.65531 3.99995 4.73297 4.02533 4.79423C4.05916 4.8759 4.12405 4.9408 4.20573 4.97463C4.26698 5 4.34464 5 4.49996 5H15.5C15.6553 5 15.733 5 15.7942 4.97463C15.8759 4.9408 15.9408 4.8759 15.9746 4.79423C16 4.73297 16 4.65531 16 4.5ZM15.9746 9.70577C16 9.76703 16 9.84469 16 10C16 10.1553 16 10.233 15.9746 10.2942C15.9408 10.3759 15.8759 10.4408 15.7942 10.4746C15.733 10.5 15.6553 10.5 15.5 10.5H9.83331C9.678 10.5 9.60034 10.5 9.53908 10.4746C9.4574 10.4408 9.39251 10.3759 9.35868 10.2942C9.33331 10.233 9.33331 10.1553 9.33331 10C9.33331 9.84469 9.33331 9.76703 9.35868 9.70577C9.39251 9.6241 9.4574 9.55921 9.53908 9.52537C9.60034 9.5 9.678 9.5 9.83331 9.5H15.5C15.6553 9.5 15.733 9.5 15.7942 9.52537C15.8759 9.55921 15.9408 9.6241 15.9746 9.70577ZM15.9746 15.2058C16 15.267 16 15.3447 16 15.5C16 15.6553 16 15.733 15.9746 15.7942C15.9408 15.8759 15.8759 15.9408 15.7942 15.9746C15.733 16 15.6553 16 15.5 16H9.83331C9.678 16 9.60034 16 9.53908 15.9746C9.4574 15.9408 9.39251 15.8759 9.35868 15.7942C9.33331 15.733 9.33331 15.6553 9.33331 15.5C9.33331 15.3447 9.33331 15.267 9.35868 15.2058C9.39251 15.1241 9.4574 15.0592 9.53908 15.0254C9.60034 15 9.678 15 9.83331 15H15.5C15.6553 15 15.733 15 15.7942 15.0254C15.8759 15.0592 15.9408 15.1241 15.9746 15.2058ZM4.08442 15.5342C3.99996 15.4353 3.99996 15.2218 3.99996 14.7947L3.99996 10.5387C3.99996 10.1116 3.99996 9.89802 4.08441 9.79913C4.1577 9.71333 4.26763 9.6678 4.38012 9.67665C4.50977 9.68685 4.66077 9.83786 4.96279 10.1399L7.48961 12.6667L4.96279 15.1935C4.66077 15.4955 4.50977 15.6465 4.38012 15.6567C4.26763 15.6656 4.1577 15.62 4.08442 15.5342Z" fill="currentColor" fill-opacity="0.75" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"collapse-b",use:"collapse-b-usage",viewBox:"0 0 20 20",content:'<symbol viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" id="collapse-b">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M4 4.5C4 4.34469 4 4.26703 4.02537 4.20577C4.05921 4.1241 4.1241 4.0592 4.20577 4.02537C4.26703 4 4.34469 4 4.5 4H15.5C15.6554 4 15.733 4 15.7943 4.02537C15.8759 4.0592 15.9408 4.1241 15.9747 4.20577C16 4.26703 16 4.34469 16 4.5C16 4.65531 16 4.73297 15.9747 4.79423C15.9408 4.8759 15.8759 4.9408 15.7943 4.97463C15.733 5 15.6554 5 15.5 5H4.5C4.34469 5 4.26703 5 4.20577 4.97463C4.1241 4.9408 4.05921 4.8759 4.02537 4.79423C4 4.73297 4 4.65531 4 4.5ZM4.02537 9.70577C4 9.76703 4 9.84469 4 10C4 10.1553 4 10.233 4.02537 10.2942C4.05921 10.3759 4.1241 10.4408 4.20577 10.4746C4.26703 10.5 4.34469 10.5 4.5 10.5H10.1667C10.322 10.5 10.3997 10.5 10.4609 10.4746C10.5426 10.4408 10.6075 10.3759 10.6413 10.2942C10.6667 10.233 10.6667 10.1553 10.6667 10C10.6667 9.84469 10.6667 9.76703 10.6413 9.70577C10.6075 9.6241 10.5426 9.55921 10.4609 9.52537C10.3997 9.5 10.322 9.5 10.1667 9.5H4.5C4.34469 9.5 4.26703 9.5 4.20577 9.52537C4.1241 9.55921 4.05921 9.6241 4.02537 9.70577ZM4.02537 15.2058C4 15.267 4 15.3447 4 15.5C4 15.6553 4 15.733 4.02537 15.7942C4.05921 15.8759 4.1241 15.9408 4.20577 15.9746C4.26703 16 4.34469 16 4.5 16H10.1667C10.322 16 10.3997 16 10.4609 15.9746C10.5426 15.9408 10.6075 15.8759 10.6413 15.7942C10.6667 15.733 10.6667 15.6553 10.6667 15.5C10.6667 15.3447 10.6667 15.267 10.6413 15.2058C10.6075 15.1241 10.5426 15.0592 10.4609 15.0254C10.3997 15 10.322 15 10.1667 15H4.5C4.34469 15 4.26703 15 4.20577 15.0254C4.1241 15.0592 4.05921 15.1241 4.02537 15.2058ZM15.9156 15.5342C16 15.4353 16 15.2218 16 14.7947L16 10.5387C16 10.1116 16 9.89802 15.9156 9.79913C15.8423 9.71333 15.7324 9.6678 15.6199 9.67665C15.4902 9.68685 15.3392 9.83786 15.0372 10.1399L12.5104 12.6667L15.0372 15.1935C15.3392 15.4955 15.4902 15.6465 15.6199 15.6567C15.7324 15.6656 15.8423 15.62 15.9156 15.5342Z" fill="currentColor" fill-opacity="0.75" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"default-search-dark",use:"default-search-dark-usage",viewBox:"0 0 100 100",content:'<symbol viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg" id="default-search-dark">\n<path d="M83.25 89.25H16.75V15V15L16.7501 10.75H71.6892L77.4695 16.5303L77.9999 16L77.4696 16.5303L83.25 22.3107V89.25Z" fill="#191B23" stroke="#313655" stroke-width="1.5" />\n<path d="M29 30H59V35H29V30Z" fill="#313655" />\n<path d="M29 44H43V49H29V44Z" fill="#313655" />\n<path d="M77.2351 72.1809L78.355 69.836L82.1054 73.5864L80.373 75.3188L77.2351 72.1809Z" fill="#7396FF" />\n<path d="M78.9313 73.7609L80.5488 72.1434L88.7488 80.3434L87.1313 81.9609L78.9313 73.7609Z" fill="#4A70FF" stroke="#4D68D5" stroke-width="2" />\n<circle cx="70.1963" cy="63.2085" r="11.2085" fill="#404B80" stroke="#4D68D5" stroke-width="4" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"default-search",use:"default-search-usage",viewBox:"0 0 100 100",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" id="default-search">\n  <path d="M16 90H84V22L71.9999 10H16.0001C15.9991 36.6667 16 63.3333 16 90Z" fill="white" />\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M17.5 88.5H82.5V22.6213L71.3785 11.5H17.5001C17.4994 29.2039 17.4996 46.9079 17.4998 64.6118C17.4999 72.5746 17.5 80.5373 17.5 88.5ZM16 88.5C16 80.5373 15.9999 72.5746 15.9998 64.6119C15.9996 46.4079 15.9994 28.204 16.0001 10H71.9999L84 22V90H16C16 89.5 16 89 16 88.5Z" fill="#EDF0F7" />\n  <path d="M29 30H59V35H29V30Z" fill="#EDF0F7" />\n  <path d="M29 43H43V48H29V43Z" fill="#EDF0F7" />\n  <path d="M77.2352 72.1809L78.3551 69.836L82.1055 73.5864L80.3731 75.3188L77.2352 72.1809Z" fill="#7396FF" />\n  <circle cx="70.1965" cy="63.2085" r="11.2085" fill="#DFE9FF" stroke="#7396FF" stroke-width="4" />\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M77.7805 74.0241C75.6342 75.5318 73.0187 76.4169 70.1965 76.4169C62.9017 76.4169 56.988 70.5033 56.988 63.2085C56.988 55.9136 62.9017 50 70.1965 50C77.4913 50 83.405 55.9136 83.405 63.2085C83.405 66.1335 82.4542 68.8364 80.8449 71.0251L89.8097 79.9899C90.005 80.1851 90.005 80.5017 89.8097 80.697L87.4851 83.0216C87.2898 83.2169 86.9733 83.2169 86.778 83.0216L77.7805 74.0241ZM79.405 63.2085C79.405 68.2942 75.2822 72.4169 70.1965 72.4169C65.1108 72.4169 60.988 68.2942 60.988 63.2085C60.988 58.1228 65.1108 54 70.1965 54C75.2822 54 79.405 58.1228 79.405 63.2085Z" fill="#7396FF" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"default_setting-dark",use:"default_setting-dark-usage",viewBox:"0 0 100 100",content:'<symbol viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg" id="default_setting-dark">\n<path d="M83.25 89.25H16.75V15V15L16.7501 10.75H71.6892L77.4695 16.5303L77.9999 16L77.4696 16.5303L83.25 22.3107V89.25Z" fill="#191B23" stroke="#313655" stroke-width="1.5" />\n<path d="M30 46H70V51H30V46Z" fill="#313655" />\n<circle cx="38.5" cy="48.5" r="4.5" fill="#404B80" />\n<path d="M30 32H70V37H30V32Z" fill="#313655" />\n<circle cx="61.5" cy="34.5" r="4.5" fill="#404B80" />\n<path d="M79.5 81.7113C79.1906 81.89 78.8094 81.89 78.5 81.7113L66.5096 74.7887C66.2002 74.61 66.0096 74.2799 66.0096 73.9226V60.0774C66.0096 59.7201 66.2002 59.39 66.5096 59.2113L78.5 52.2887C78.8094 52.11 79.1906 52.11 79.5 52.2887L91.4904 59.2113C91.7998 59.39 91.9904 59.7201 91.9904 60.0774V73.9226C91.9904 74.2799 91.7998 74.61 91.4904 74.7887L79.5 81.7113Z" fill="#4D68D5" />\n<circle cx="79" cy="67" r="3.5" fill="#404B80" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"default_setting",use:"default_setting-usage",viewBox:"0 0 100 100",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" id="default_setting">\n  <path d="M16.0003 90H84.0003V22L72.0002 10H16.0005C15.9995 36.6667 16.0003 63.3333 16.0003 90Z" fill="white" />\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M17.5003 88.5H82.5003V22.6213L71.3789 11.5H17.5004C17.4998 29.2039 17.5 46.9079 17.5002 64.6118C17.5003 72.5746 17.5003 80.5373 17.5003 88.5ZM16.0003 88.5C16.0003 80.5373 16.0003 72.5746 16.0002 64.6119C16 46.4079 15.9998 28.204 16.0005 10H72.0002L84.0003 22V90H16.0003C16.0003 89.5 16.0003 89 16.0003 88.5Z" fill="#EDF0F7" />\n  <path d="M30 46H70V51H30V46Z" fill="#F2F5F9" />\n  <circle cx="38.5" cy="48.5" r="4.5" fill="#DAE2F0" />\n  <path d="M30 32H70V37H30V32Z" fill="#F2F5F9" />\n  <circle cx="61.5" cy="34.5" r="4.5" fill="#DAE2F0" />\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M65.5096 76.7887L77.5 83.7113C77.8094 83.89 78.1906 83.8899 78.5 83.7113L90.4904 76.7887C90.7998 76.61 90.9904 76.2799 90.9904 75.9226V62.0773C90.9904 61.7201 90.7998 61.39 90.4904 61.2113L78.5 54.2887C78.1906 54.11 77.8094 54.11 77.5 54.2887L65.5096 61.2113C65.2002 61.39 65.0096 61.7201 65.0096 62.0773V75.9226C65.0096 76.2799 65.2002 76.61 65.5096 76.7887ZM78 72.5C79.933 72.5 81.5 70.933 81.5 69C81.5 67.067 79.933 65.5 78 65.5C76.067 65.5 74.5 67.067 74.5 69C74.5 70.933 76.067 72.5 78 72.5Z" fill="#7396FF" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"delete",use:"delete-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" id="delete">\n<circle cx="8" cy="8" r="8" fill="rgba(255,255,255,.2)" />\n<path fill-rule="evenodd" clip-rule="evenodd" d="M11.125 8.9375C10.6072 8.9375 10.1875 8.51777 10.1875 8C10.1875 7.48223 10.6072 7.0625 11.125 7.0625C11.6428 7.0625 12.0625 7.48223 12.0625 8C12.0625 8.51777 11.6428 8.9375 11.125 8.9375ZM8 8.9375C7.48223 8.9375 7.0625 8.51777 7.0625 8C7.0625 7.48223 7.48223 7.0625 8 7.0625C8.51777 7.0625 8.9375 7.48223 8.9375 8C8.9375 8.51777 8.51777 8.9375 8 8.9375ZM3.9375 8C3.9375 8.51777 4.35723 8.9375 4.875 8.9375C5.39277 8.9375 5.8125 8.51777 5.8125 8C5.8125 7.48223 5.39277 7.0625 4.875 7.0625C4.35723 7.0625 3.9375 7.48223 3.9375 8Z" fill="currentColor" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"device_mobile",use:"device_mobile-usage",viewBox:"0 0 10 14",content:'<symbol viewBox="0 0 10 14" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="device_mobile">\n    \x3c!-- Generator: Sketch 61.2 (89653) - https://sketch.com --\x3e\n    <title>ic_device_mobile</title>\n    <desc>Created with Sketch.</desc>\n    <g id="device_mobile_切图" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="device_mobile_画板" transform="translate(-559.000000, -637.000000)" fill="#FFFFFF">\n            <path d="M569,637 L569,651 L559,651 L559,637 L569,637 Z M565,648 L563,648 L563,650 L565,650 L565,648 Z M567,639 L561,639 L561,647 L567,647 L567,639 Z" id="device_mobile_ic_device_mobile" />\n        </g>\n    </g>\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"device_pc",use:"device_pc-usage",viewBox:"0 0 14 14",content:'<symbol viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="device_pc">\n    \x3c!-- Generator: Sketch 61.2 (89653) - https://sketch.com --\x3e\n    <title>ic_device_pc</title>\n    <desc>Created with Sketch.</desc>\n    <g id="device_pc_切图" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="device_pc_画板" transform="translate(-505.000000, -637.000000)" fill="currentColor" fill-rule="nonzero">\n            <path d="M519,637 L519,647 L514,647 L514,649 L516,649 L516,651 L508,651 L508,649 L510,649 L510,647 L505,647 L505,637 L519,637 Z M517,639 L507,639 L507,645 L517,645 L517,639 Z" id="device_pc_ic_device_pc" />\n        </g>\n    </g>\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"idle",use:"idle-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" id="idle">\n<circle cx="8" cy="8" r="8" fill="currentColor" />\n<rect x="5.41504" y="6.57898" width="5.06225" height="2" transform="rotate(45.0404 5.41504 6.57898)" fill="white" />\n<rect x="12.7881" y="6.41431" width="7.294" height="2" transform="rotate(135 12.7881 6.41431)" fill="white" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"input-clear",use:"input-clear-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="input-clear">\n  <path d="M22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12ZM15.5352 8.46426C15.6999 8.629 15.7823 8.71136 15.8203 8.80325C15.8711 8.92576 15.8711 9.06342 15.8203 9.18593C15.7823 9.27782 15.6999 9.36018 15.5352 9.52491L13.0604 11.9997L15.5356 14.4749C15.7004 14.6397 15.7827 14.722 15.8208 14.8139C15.8715 14.9364 15.8715 15.0741 15.8208 15.1966C15.7827 15.2885 15.7004 15.3708 15.5356 15.5356C15.3709 15.7003 15.2885 15.7827 15.1966 15.8207C15.0741 15.8715 14.9365 15.8715 14.814 15.8207C14.7221 15.7827 14.6397 15.7003 14.475 15.5356L11.9997 13.0604L9.52478 15.5353C9.36005 15.7001 9.27767 15.7824 9.18579 15.8205C9.06327 15.8712 8.92562 15.8712 8.8031 15.8205C8.71122 15.7824 8.62885 15.7001 8.46412 15.5353C8.29939 15.3706 8.21701 15.2882 8.17895 15.1963C8.12821 15.0738 8.12821 14.9362 8.17895 14.8137C8.21701 14.7218 8.29938 14.6394 8.46412 14.4747L10.9391 11.9997L8.46457 9.52517C8.29984 9.36044 8.21746 9.27807 8.1794 9.18618C8.12866 9.06367 8.12866 8.92601 8.1794 8.8035C8.21746 8.71161 8.29983 8.62925 8.46457 8.46451C8.6293 8.29978 8.71167 8.21741 8.80355 8.17935C8.92607 8.1286 9.06372 8.1286 9.18624 8.17935C9.27812 8.21741 9.36049 8.29977 9.52522 8.46451L11.9997 10.939L14.4745 8.46426C14.6393 8.29953 14.7216 8.21716 14.8135 8.1791C14.936 8.12835 15.0737 8.12835 15.1962 8.1791C15.2881 8.21716 15.3704 8.29953 15.5352 8.46426Z" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"input-search",use:"input-search-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="input-search">\n  <path d="M18.5 11C18.5 6.85786 15.1421 3.5 11 3.5C6.85786 3.5 3.5 6.85786 3.5 11C3.5 15.1421 6.85786 18.5 11 18.5C15.1421 18.5 18.5 15.1421 18.5 11ZM16.8116 17.8723C15.2436 19.1996 13.2153 20 11 20C6.02944 20 2 15.9706 2 11C2 6.02944 6.02944 2 11 2C15.9706 2 20 6.02944 20 11C20 13.2153 19.1996 15.2436 17.8723 16.8117L21.6065 20.5459C21.7713 20.7107 21.8536 20.793 21.8917 20.8849C21.9425 21.0074 21.9425 21.1451 21.8917 21.2676C21.8536 21.3595 21.7713 21.4419 21.6065 21.6066C21.4418 21.7713 21.3594 21.8537 21.2676 21.8918C21.145 21.9425 21.0074 21.9425 20.8849 21.8918C20.793 21.8537 20.7106 21.7713 20.5459 21.6066L16.8116 17.8723Z" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"ip",use:"ip-usage",viewBox:"0 0 36 16",content:'<symbol viewBox="0 0 36 16" fill="none" xmlns="http://www.w3.org/2000/svg" id="ip">\n<rect width="36" height="16" rx="1" fill="#C5CCDB" />\n<path d="M14.1795 4.146V12H15.3675V4.146H14.1795ZM16.929 4.146V12H18.128V8.942H20.163C22.044 8.942 22.99 8.139 22.99 6.533C22.99 4.938 22.055 4.146 20.185 4.146H16.929ZM18.128 5.169H20.086C20.669 5.169 21.098 5.279 21.373 5.499C21.648 5.697 21.791 6.049 21.791 6.533C21.791 7.017 21.648 7.369 21.384 7.589C21.109 7.809 20.68 7.919 20.086 7.919H18.128V5.169Z" fill="currentColor" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"ivr",use:"ivr-usage",viewBox:"0 0 20 12",content:'<symbol viewBox="0 0 20 12" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="ivr">\n    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <path d="M18,0 C19.1045695,-2.02906125e-16 20,0.8954305 20,2 L20,10 C20,11.1045695 19.1045695,12 18,12 L2,12 C0.8954305,12 1.3527075e-16,11.1045695 0,10 L0,2 C-1.3527075e-16,0.8954305 0.8954305,2.02906125e-16 2,0 L18,0 Z M4.50585938,2.6 L3.5,2.6 L3.5,9.26503906 L4.50585938,9.26503906 L4.50585938,2.6 Z M6.49316406,2.6 L5.34082031,2.6 L7.68457031,9.26503906 L8.79296875,9.26503906 L11.1318359,2.6 L10.0039062,2.6 L8.27539062,8.03945312 L8.23632812,8.03945312 L6.49316406,2.6 Z M14.4619141,2.6 L11.9716797,2.6 L11.9716797,9.26503906 L12.9677734,9.26503906 L12.9677734,6.66738281 L14.4423828,6.66738281 L15.6533203,9.26503906 L16.7910156,9.26503906 L15.4384766,6.48671875 C15.9951172,6.28164062 16.6689453,5.72011719 16.6689453,4.62636719 C16.6689453,3.5375 15.9755859,2.6 14.4619141,2.6 Z M14.3251953,3.44472656 C15.1064453,3.44472656 15.6289062,3.85976562 15.6289062,4.6703125 C15.6289062,5.42226562 15.1650391,5.8421875 14.2958984,5.8421875 L12.9677734,5.8421875 L12.9677734,3.44472656 L14.3251953,3.44472656 Z" id="ivr_Combined-Shape" fill="currentColor" />\n    </g>\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"logout",use:"logout-usage",viewBox:"0 0 80 68",content:'<symbol viewBox="0 0 80 68" fill="none" xmlns="http://www.w3.org/2000/svg" id="logout">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M67.5347 0C70.8205 5.95746 72.6881 12.7915 72.6881 20.0574C72.6881 23.1715 72.345 26.2064 71.6943 29.1268C54.4029 30.2471 40.5696 43.909 39.3856 61.0125C36.475 61.6406 33.4518 61.9707 30.3507 61.9707C18.6557 61.9707 8.06828 57.2763 0.406125 49.6871C-0.258509 48.6059 -0.0945322 47.2156 0.803847 46.315L14.7225 32.3619C15.6633 31.4188 17.149 31.2721 18.2594 32.0128C21.3525 35.0787 25.6278 36.9753 30.3507 36.9753C39.7888 36.9753 47.4398 29.4009 47.4398 20.0574C47.4398 15.3819 45.524 11.1493 42.4271 8.08722C42.396 8.06046 42.3658 8.03263 42.3367 8.00378C41.6517 7.325 41.6522 6.22502 42.3379 5.5469L47.9463 0H67.5347ZM80 35.6565H73.9944C58.6743 35.6565 46.2259 47.8285 45.9785 62.9368L45.9747 63.3955V68H63.3202V63.3955C63.3202 57.5594 68.0992 52.8283 73.9944 52.8283H80V35.6565Z" fill="white" fill-opacity="0.7" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"mic",use:"mic-usage",viewBox:"0 0 14 14",content:'<symbol viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" id="mic">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8.16469 3.56641V6.41797C8.16469 7.06121 7.64324 7.58266 7 7.58266C6.35676 7.58266 5.83531 7.06121 5.83531 6.41797V3.56641C5.83531 2.92317 6.35676 2.40172 7 2.40172C7.64324 2.40172 8.16469 2.92317 8.16469 3.56641ZM4.43359 3.56641C4.43359 2.14902 5.58261 1 7 1C8.41739 1 9.5664 2.14902 9.5664 3.56641V6.41797C9.5664 7.83535 8.41739 8.98437 7 8.98437C5.58261 8.98437 4.43359 7.83535 4.43359 6.41797V3.56641ZM7.5 11.6947V12.7998H9.29365C9.44093 12.7998 9.56032 12.9192 9.56032 13.0665V13.4932C9.56032 13.6404 9.44093 13.7598 9.29365 13.7598H4.70699C4.55971 13.7598 4.44032 13.6404 4.44032 13.4932V13.0665C4.44032 12.9192 4.55971 12.7998 4.70699 12.7998H6.5V11.6947C3.975 11.4447 2 9.30721 2 6.71971V6.34638C2 6.1991 2.11939 6.07971 2.26667 6.07971H2.73333C2.88061 6.07971 3 6.1991 3 6.34638V6.71971C3 8.91971 4.8 10.7197 7 10.7197C9.2 10.7197 11 8.91971 11 6.71971V6.50638C11 6.3591 11.1194 6.23971 11.2667 6.23971H11.7333C11.8806 6.23971 12 6.3591 12 6.50638V6.71971C12 9.30721 10.025 11.4447 7.5 11.6947Z" fill="#C5CCDB" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"more",use:"more-usage",viewBox:"0 0 18 18",content:'<symbol viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" id="more">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M9 16.5C13.1421 16.5 16.5 13.1421 16.5 9C16.5 4.85786 13.1421 1.5 9 1.5C4.85786 1.5 1.5 4.85786 1.5 9C1.5 13.1421 4.85786 16.5 9 16.5ZM11.0625 9C11.0625 9.51777 11.4822 9.9375 12 9.9375C12.5178 9.9375 12.9375 9.51777 12.9375 9C12.9375 8.48223 12.5178 8.0625 12 8.0625C11.4822 8.0625 11.0625 8.48223 11.0625 9ZM8.0625 9C8.0625 9.51777 8.48223 9.9375 9 9.9375C9.51777 9.9375 9.9375 9.51777 9.9375 9C9.9375 8.48223 9.51777 8.0625 9 8.0625C8.48223 8.0625 8.0625 8.48223 8.0625 9ZM6 9.9375C5.48223 9.9375 5.0625 9.51777 5.0625 9C5.0625 8.48223 5.48223 8.0625 6 8.0625C6.51777 8.0625 6.9375 8.48223 6.9375 9C6.9375 9.51777 6.51777 9.9375 6 9.9375Z" fill="currentColor" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"person",use:"person-usage",viewBox:"0 0 12 12",content:'<symbol viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" id="person">\n<circle cx="6" cy="3" r="2" fill="currentColor" />\n<path fill-rule="evenodd" clip-rule="evenodd" d="M2 10C2 7.79086 3.79086 6 6 6C8.20914 6 10 7.79086 10 10V11H2.0495C2.02216 11 2 10.9778 2 10.9505V10Z" fill="currentColor" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"pstn",use:"pstn-usage",viewBox:"0 0 36 16",content:'<symbol viewBox="0 0 36 16" fill="none" xmlns="http://www.w3.org/2000/svg" id="pstn">\n<rect width="36" height="16" rx="1" fill="#C5CCDB" />\n<path d="M4.58619 4.146V12H5.78519V8.942H7.82019C9.70119 8.942 10.6472 8.139 10.6472 6.533C10.6472 4.938 9.71219 4.146 7.84219 4.146H4.58619ZM5.78519 5.169H7.74319C8.32619 5.169 8.75519 5.279 9.03019 5.499C9.30519 5.697 9.44819 6.049 9.44819 6.533C9.44819 7.017 9.30519 7.369 9.04119 7.589C8.76619 7.809 8.33719 7.919 7.74319 7.919H5.78519V5.169ZM14.512 3.992C13.676 3.992 12.983 4.179 12.433 4.553C11.85 4.949 11.564 5.488 11.564 6.181C11.564 6.863 11.861 7.391 12.466 7.754C12.708 7.886 13.302 8.095 14.27 8.403C15.139 8.667 15.656 8.843 15.832 8.931C16.327 9.184 16.58 9.525 16.58 9.965C16.58 10.317 16.404 10.592 16.052 10.79C15.7 10.988 15.227 11.098 14.633 11.098C13.973 11.098 13.489 10.977 13.17 10.735C12.818 10.471 12.598 10.02 12.51 9.404H11.322C11.388 10.394 11.74 11.12 12.389 11.582C12.928 11.956 13.676 12.154 14.633 12.154C15.623 12.154 16.393 11.956 16.943 11.56C17.493 11.153 17.768 10.603 17.768 9.899C17.768 9.173 17.427 8.612 16.756 8.205C16.448 8.018 15.755 7.765 14.699 7.435C13.962 7.215 13.511 7.05 13.335 6.951C12.939 6.742 12.752 6.467 12.752 6.115C12.752 5.719 12.917 5.433 13.258 5.257C13.533 5.103 13.929 5.026 14.446 5.026C15.04 5.026 15.48 5.136 15.788 5.367C16.096 5.587 16.294 5.961 16.404 6.467H17.592C17.515 5.609 17.207 4.982 16.657 4.575C16.14 4.179 15.425 3.992 14.512 3.992ZM18.279 4.146V5.169H20.908V12H22.096V5.169H24.714V4.146H18.279ZM25.6624 4.146V12H26.8614V6.093H26.9054L30.9644 12H32.1304V4.146H30.9314V9.987H30.8874L26.8724 4.146H25.6624Z" fill="currentColor" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"rest",use:"rest-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" id="rest">\n<circle cx="8" cy="8" r="8" fill="currentColor" />\n<circle cx="4" cy="8" r="1" fill="white" />\n<circle cx="8" cy="8" r="1" fill="white" />\n<circle cx="12" cy="8" r="1" fill="white" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"schedule",use:"schedule-usage",viewBox:"0 0 12 12",content:'<symbol viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" id="schedule">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M9 2.5H8.5C8.5 1.948 8.052 1.5 7.5 1.5H4.5C3.948 1.5 3.5 1.948 3.5 2.5H3C2.448 2.5 2 2.948 2 3.5V9.5C2 10.052 2.448 10.5 3 10.5H9C9.552 10.5 10 10.052 10 9.5V3.5C10 2.948 9.552 2.5 9 2.5ZM4.50004 2.49996H7.50004V3.49996H4.50004V2.49996ZM3.00012 9.5H9.00012V3.5H8.50012C8.50012 4.052 8.05212 4.5 7.50012 4.5H4.50012C3.94812 4.5 3.50012 4.052 3.50012 3.5H3.00012V9.5ZM7.75016 5.50001H4.25016C4.11216 5.50001 4.00016 5.61201 4.00016 5.75001V6.25001C4.00016 6.38801 4.11216 6.50001 4.25016 6.50001H7.75016C7.88816 6.50001 8.00016 6.38801 8.00016 6.25001V5.75001C8.00016 5.61201 7.88816 5.50001 7.75016 5.50001ZM4.25016 7.50002H7.75016C7.88816 7.50002 8.00016 7.61202 8.00016 7.75002V8.25002C8.00016 8.38802 7.88816 8.50002 7.75016 8.50002H4.25016C4.11216 8.50002 4.00016 8.38802 4.00016 8.25002V7.75002C4.00016 7.61202 4.11216 7.50002 4.25016 7.50002Z" fill="currentColor" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"signal_1",use:"signal_1-usage",viewBox:"0 0 20 14",content:'<symbol viewBox="0 0 20 14" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="signal_1">\n    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="signal_1_Group-2">\n            <path d="M2,0 L17.5,0 C18.6045695,-2.02906125e-16 19.5,0.8954305 19.5,2 L19.5,12 C19.5,13.1045695 18.6045695,14 17.5,14 L2,14 C0.8954305,14 -7.52907669e-16,13.1045695 0,12 L0,2 C-1.3527075e-16,0.8954305 0.8954305,2.02906125e-16 2,0 Z" id="signal_1_Rectangle-Copy-20" fill="currentColor" style="mix-blend-mode: lighten;" />\n            <polygon id="signal_1_Rectangle" fill="#FF4222" points="2 10 3.5 10 3.5 12 2 12" />\n            <polygon id="signal_1_Rectangle-Copy" fill="#FFFFFF" opacity="0.15" points="5.5 8 7 8 7 12 5.5 12" />\n            <polygon id="signal_1_Rectangle-Copy-3" fill="#FFFFFF" opacity="0.15" points="12.5 4 14 4 14 12 12.5 12" />\n            <polygon id="signal_1_Rectangle-Copy-2" fill="#FFFFFF" opacity="0.15" points="9 6 10.5 6 10.5 12 9 12" />\n            <polygon id="signal_1_Rectangle-Copy-4" fill="#FFFFFF" opacity="0.15" points="16 2 17.5 2 17.5 12 16 12" />\n        </g>\n    </g>\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"signal_2",use:"signal_2-usage",viewBox:"0 0 20 14",content:'<symbol viewBox="0 0 20 14" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="signal_2">\n    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="signal_2_Group-2">\n            <path d="M2,0 L17.5,0 C18.6045695,-2.02906125e-16 19.5,0.8954305 19.5,2 L19.5,12 C19.5,13.1045695 18.6045695,14 17.5,14 L2,14 C0.8954305,14 -7.52907669e-16,13.1045695 0,12 L0,2 C-1.3527075e-16,0.8954305 0.8954305,2.02906125e-16 2,0 Z" id="signal_2_Rectangle-Copy-20" fill="currentColor" opacity="0.1" style="mix-blend-mode: lighten;" />\n            <polygon id="signal_2_Rectangle" fill="#FF4222" points="2 10 3.5 10 3.5 12 2 12" />\n            <polygon id="signal_2_Rectangle-Copy" fill="#FF4222" points="5.5 8 7 8 7 12 5.5 12" />\n            <polygon id="signal_2_Rectangle-Copy-3" fill="#FFFFFF" opacity="0.15" points="12.5 4 14 4 14 12 12.5 12" />\n            <polygon id="signal_2_Rectangle-Copy-2" fill="#FFFFFF" opacity="0.15" points="9 6 10.5 6 10.5 12 9 12" />\n            <polygon id="signal_2_Rectangle-Copy-4" fill="#FFFFFF" opacity="0.15" points="16 2 17.5 2 17.5 12 16 12" />\n        </g>\n    </g>\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"signal_3",use:"signal_3-usage",viewBox:"0 0 20 14",content:'<symbol viewBox="0 0 20 14" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="signal_3">\n    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="signal_3_Group-2">\n            <path d="M2,0 L17.5,0 C18.6045695,-2.02906125e-16 19.5,0.8954305 19.5,2 L19.5,12 C19.5,13.1045695 18.6045695,14 17.5,14 L2,14 C0.8954305,14 -7.52907669e-16,13.1045695 0,12 L0,2 C-1.3527075e-16,0.8954305 0.8954305,2.02906125e-16 2,0 Z" id="signal_3_Rectangle-Copy-20" fill="currentColor" opacity="0.1" style="mix-blend-mode: lighten;" />\n            <polygon id="signal_3_Rectangle" fill="#FFCD54" points="2 10 3.5 10 3.5 12 2 12" />\n            <polygon id="signal_3_Rectangle-Copy" fill="#FFCD54" points="5.5 8 7 8 7 12 5.5 12" />\n            <polygon id="signal_3_Rectangle-Copy-3" fill="#FFFFFF" opacity="0.15" points="12.5 4 14 4 14 12 12.5 12" />\n            <polygon id="signal_3_Rectangle-Copy-2" fill="#FFCD54" points="9 6 10.5 6 10.5 12 9 12" />\n            <polygon id="signal_3_Rectangle-Copy-4" fill="#FFFFFF" opacity="0.15" points="16 2 17.5 2 17.5 12 16 12" />\n        </g>\n    </g>\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"signal_4",use:"signal_4-usage",viewBox:"0 0 20 14",content:'<symbol viewBox="0 0 20 14" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="signal_4">\n    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="signal_4_Group-2">\n            <path d="M2,0 L17.5,0 C18.6045695,-2.02906125e-16 19.5,0.8954305 19.5,2 L19.5,12 C19.5,13.1045695 18.6045695,14 17.5,14 L2,14 C0.8954305,14 -7.52907669e-16,13.1045695 0,12 L0,2 C-1.3527075e-16,0.8954305 0.8954305,2.02906125e-16 2,0 Z" id="signal_4_Rectangle-Copy-20" fill="currentColor" opacity="0.1" style="mix-blend-mode: lighten;" />\n            <polygon id="signal_4_Rectangle" fill="#00CC26" points="2 10 3.5 10 3.5 12 2 12" />\n            <polygon id="signal_4_Rectangle-Copy" fill="#00CC26" points="5.5 8 7 8 7 12 5.5 12" />\n            <polygon id="signal_4_Rectangle-Copy-3" fill="#00CC26" points="12.5 4 14 4 14 12 12.5 12" />\n            <polygon id="signal_4_Rectangle-Copy-2" fill="#00CC26" points="9 6 10.5 6 10.5 12 9 12" />\n            <polygon id="signal_4_Rectangle-Copy-4" fill="#FFFFFF" opacity="0.15" points="16 2 17.5 2 17.5 12 16 12" />\n        </g>\n    </g>\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"signal_5",use:"signal_5-usage",viewBox:"0 0 20 14",content:'<symbol viewBox="0 0 20 14" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="signal_5">\n    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="signal_5_Group-2">\n            <path d="M2,0 L17.5,0 C18.6045695,-2.02906125e-16 19.5,0.8954305 19.5,2 L19.5,12 C19.5,13.1045695 18.6045695,14 17.5,14 L2,14 C0.8954305,14 -7.52907669e-16,13.1045695 0,12 L0,2 C-1.3527075e-16,0.8954305 0.8954305,2.02906125e-16 2,0 Z" id="signal_5_Rectangle-Copy-20" fill="currentColor" opacity="0.1" style="mix-blend-mode: lighten;" />\n            <polygon id="signal_5_Rectangle" fill="#00CC26" points="2 10 3.5 10 3.5 12 2 12" />\n            <polygon id="signal_5_Rectangle-Copy" fill="#00CC26" points="5.5 8 7 8 7 12 5.5 12" />\n            <polygon id="signal_5_Rectangle-Copy-3" fill="#00CC26" points="12.5 4 14 4 14 12 12.5 12" />\n            <polygon id="signal_5_Rectangle-Copy-2" fill="#00CC26" points="9 6 10.5 6 10.5 12 9 12" />\n            <polygon id="signal_5_Rectangle-Copy-4" fill="#00CC26" points="16 2 17.5 2 17.5 12 16 12" />\n        </g>\n    </g>\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"status-busy",use:"status-busy-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" id="status-busy">\n<circle cx="8" cy="8" r="8" fill="currentColor" />\n<rect x="4" y="7" width="8" height="2" fill="white" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"status-idle",use:"status-idle-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" id="status-idle">\n<circle cx="8" cy="8" r="8" fill="currentColor" />\n<rect x="5.41504" y="6.57898" width="5.06225" height="2" transform="rotate(45.0404 5.41504 6.57898)" fill="white" />\n<rect x="12.7881" y="6.41431" width="7.294" height="2" transform="rotate(135 12.7881 6.41431)" fill="white" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"status-rest",use:"status-rest-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" id="status-rest">\n<circle cx="8" cy="8" r="8" fill="currentColor" />\n<circle cx="4" cy="8" r="1" fill="white" />\n<circle cx="8" cy="8" r="1" fill="white" />\n<circle cx="12" cy="8" r="1" fill="white" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"switchboard",use:"switchboard-usage",viewBox:"0 0 12 12",content:'<symbol viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" id="switchboard">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M12 4.00899V3.25375V3.22977C12 3.13387 11.978 3.05195 11.9341 2.98402C11.8901 2.91608 11.8322 2.85415 11.7602 2.7982C11.6883 2.74226 11.6084 2.69231 11.5205 2.64835C11.4326 2.6044 11.3407 2.55445 11.2448 2.4985C11.1489 2.45055 10.967 2.34466 10.6993 2.18082C10.4316 2.01698 10.0759 1.84715 9.63237 1.67133C9.18881 1.4955 8.66533 1.33966 8.06194 1.2038C7.45854 1.06793 6.77323 1 6.00599 1C5.33466 1 4.7013 1.06793 4.10589 1.2038C3.51049 1.33966 2.97902 1.4955 2.51149 1.67133C2.04396 1.84715 1.65634 2.01698 1.34865 2.18082C1.04096 2.34466 0.843157 2.45055 0.755245 2.4985C0.667333 2.55445 0.579421 2.6044 0.491509 2.64835C0.403596 2.69231 0.323676 2.74226 0.251748 2.7982C0.17982 2.85415 0.11988 2.91608 0.0719281 2.98402C0.023976 3.05195 0 3.13387 0 3.22977V3.25375V4.00899C0 4.21678 0.0739261 4.39261 0.221778 4.53646C0.36963 4.68032 0.547453 4.75225 0.755245 4.75225H2.25375C2.46154 4.75225 2.63736 4.68032 2.78122 4.53646C2.92507 4.39261 2.997 4.21678 2.997 4.00899V3.25375H9.003V4.00899C9.003 4.21678 9.07493 4.39261 9.21878 4.53646C9.36264 4.68032 9.53846 4.75225 9.74625 4.75225H11.2448C11.4525 4.75225 11.6304 4.68032 11.7782 4.53646C11.9261 4.39261 12 4.21678 12 4.00899ZM5.23668 4.02091H4.43666L4.43667 4.82738L1.20862 7.6452V9.52542C1.20862 10.0444 1.76158 10.4656 2.28051 10.4656H9.80152C10.3205 10.4656 10.8863 10.0444 10.8863 9.52542V7.6452L7.65611 4.82738V4.02091H6.84963V4.82738H5.23668V4.02091ZM7.66298 7.65984C7.66298 8.55029 6.941 9.27226 6.05049 9.27227C5.16004 9.27227 4.43804 8.55029 4.43804 7.65984C4.43804 6.76929 5.16004 6.04733 6.05049 6.04733C6.941 6.04733 7.66298 6.76929 7.66298 7.65984Z" fill="currentColor" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"timer",use:"timer-usage",viewBox:"0 0 12 12",content:'<symbol viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" id="timer">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M6 11C8.76142 11 11 8.76142 11 6C11 3.23858 8.76142 1 6 1C3.23858 1 1 3.23858 1 6C1 8.76142 3.23858 11 6 11ZM6.75 5.25V3H5.25V6.75H9V5.25H6.75Z" fill="currentColor" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"tip-error",use:"tip-error-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" id="tip-error">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M10.6423 4.72819C10.5848 4.75198 10.5333 4.80346 10.4304 4.90642L7.99971 7.3371L5.56903 4.90642C5.46607 4.80346 5.41459 4.75198 5.35716 4.72819C5.28059 4.69648 5.19456 4.69648 5.11798 4.72819C5.06056 4.75198 5.00908 4.80346 4.90612 4.90642C4.80316 5.00938 4.75168 5.06086 4.72789 5.11829C4.69617 5.19486 4.69617 5.28089 4.72789 5.35747C4.75168 5.41489 4.80316 5.46637 4.90612 5.56933L7.3368 8.00001L4.90612 10.4307C4.80316 10.5337 4.75168 10.5851 4.72789 10.6426C4.69617 10.7191 4.69617 10.8052 4.72789 10.8817C4.75168 10.9392 4.80316 10.9906 4.90612 11.0936C5.00908 11.1966 5.06056 11.248 5.11798 11.2718C5.19456 11.3035 5.28059 11.3035 5.35716 11.2718C5.41459 11.248 5.46607 11.1966 5.56903 11.0936L7.99971 8.66293L10.4304 11.0936C10.5333 11.1966 10.5848 11.248 10.6423 11.2718C10.7188 11.3035 10.8049 11.3035 10.8814 11.2718C10.9389 11.248 10.9903 11.1966 11.0933 11.0936C11.1963 10.9906 11.2477 10.9392 11.2715 10.8817C11.3032 10.8052 11.3032 10.7191 11.2715 10.6426C11.2477 10.5851 11.1963 10.5337 11.0933 10.4307L8.66262 8.00001L11.0933 5.56933C11.1963 5.46637 11.2477 5.41489 11.2715 5.35747C11.3032 5.2809 11.3032 5.19486 11.2715 5.11829C11.2477 5.06086 11.1963 5.00938 11.0933 4.90642C10.9903 4.80346 10.9389 4.75198 10.8814 4.72819C10.8049 4.69648 10.7188 4.69648 10.6423 4.72819Z" fill="white" />\n<circle cx="8" cy="8" r="7.5" stroke="white" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"tip-success",use:"tip-success-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" id="tip-success">\n<circle cx="8" cy="8" r="7.5" stroke="white" />\n<path fill-rule="evenodd" clip-rule="evenodd" d="M12.2339 5.18738C12.3202 5.25638 12.3342 5.38224 12.2652 5.46849L7.36793 11.5901C7.29051 11.6868 7.14461 11.6906 7.06227 11.598L3.75885 7.88163C3.68547 7.79908 3.6929 7.67266 3.77546 7.59928L4.2239 7.20066C4.30646 7.12728 4.43287 7.13471 4.50626 7.21727L7.17956 10.2247L11.4843 4.8438C11.5533 4.75754 11.6792 4.74356 11.7654 4.81256L12.2339 5.18738Z" fill="white" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"tip-warning",use:"tip-warning-usage",viewBox:"0 0 18 18",content:'<symbol viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" id="tip-warning">\n<path d="M17.3337 8.99996C17.3337 4.39759 13.6027 0.666626 9.00033 0.666626C4.39795 0.666626 0.666992 4.39759 0.666992 8.99996C0.666992 13.6023 4.39795 17.3333 9.00033 17.3333C13.6027 17.3333 17.3337 13.6023 17.3337 8.99996ZM9.62533 12.5416C9.62533 12.7358 9.62533 12.8328 9.59361 12.9094C9.55132 13.0115 9.47021 13.0926 9.36811 13.1349C9.29154 13.1666 9.19447 13.1666 9.00033 13.1666C8.80618 13.1666 8.70911 13.1666 8.63254 13.1349C8.53045 13.0926 8.44933 13.0115 8.40704 12.9094C8.37533 12.8328 8.37533 12.7358 8.37533 12.5416V8.37496C8.37533 8.18082 8.37533 8.08375 8.40704 8.00717C8.44933 7.90508 8.53045 7.82397 8.63254 7.78168C8.70911 7.74996 8.80618 7.74996 9.00033 7.74996C9.19447 7.74996 9.29154 7.74996 9.36811 7.78168C9.47021 7.82397 9.55132 7.90508 9.59361 8.00717C9.62533 8.08375 9.62533 8.18082 9.62533 8.37496V12.5416ZM8.16699 5.66668C8.16699 5.20644 8.54009 4.83334 9.00033 4.83334C9.46056 4.83334 9.83366 5.20644 9.83366 5.66668C9.83366 6.12691 9.46056 6.50001 9.00033 6.50001C8.54009 6.50001 8.16699 6.12691 8.16699 5.66668Z" fill="#FF8345" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=new i.a({id:"voip",use:"voip-usage",viewBox:"0 0 36 16",content:'<symbol viewBox="0 0 36 16" fill="none" xmlns="http://www.w3.org/2000/svg" id="voip">\n<rect width="36" height="16" rx="1" fill="#C5CCDB" />\n<path d="M6.56211 4.146L9.37811 12H10.8301L13.6461 4.146H12.3481L10.1261 10.658H10.0931L7.86011 4.146H6.56211ZM16.9824 6.159C16.1244 6.159 15.4314 6.445 14.9144 7.017C14.3974 7.578 14.1444 8.293 14.1444 9.162C14.1444 10.02 14.3974 10.735 14.9034 11.285C15.4314 11.857 16.1244 12.154 16.9824 12.154C17.8404 12.154 18.5334 11.857 19.0614 11.285C19.5674 10.735 19.8204 10.02 19.8204 9.162C19.8204 8.293 19.5564 7.578 19.0504 7.017C18.5334 6.445 17.8404 6.159 16.9824 6.159ZM16.9824 7.116C17.5214 7.116 17.9394 7.325 18.2474 7.754C18.5114 8.117 18.6434 8.59 18.6434 9.162C18.6434 9.723 18.5114 10.185 18.2474 10.559C17.9394 10.977 17.5214 11.197 16.9824 11.197C16.4434 11.197 16.0254 10.977 15.7284 10.559C15.4644 10.196 15.3434 9.734 15.3434 9.162C15.3434 8.59 15.4644 8.117 15.7284 7.754C16.0254 7.325 16.4434 7.116 16.9824 7.116ZM21.0598 4.146V12H22.2478V4.146H21.0598ZM23.8093 4.146V12H25.0083V8.942H27.0433C28.9243 8.942 29.8703 8.139 29.8703 6.533C29.8703 4.938 28.9353 4.146 27.0653 4.146H23.8093ZM25.0083 5.169H26.9663C27.5493 5.169 27.9783 5.279 28.2533 5.499C28.5283 5.697 28.6713 6.049 28.6713 6.533C28.6713 7.017 28.5283 7.369 28.2643 7.589C27.9893 7.809 27.5603 7.919 26.9663 7.919H25.0083V5.169Z" fill="currentColor" />\n</symbol>'});a.a.add(s);t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(18),o=r(i),a=n(24),s=r(a),l=n(569),c=r(l),u=n(570),d=r(u),f=n(320),p=r(f),h=n(571),g=r(h),m=n(260),v=r(m),b=n(26),_=r(b),y=n(27),w=function(e,t){return new o.default(s.default.call(this.stator,{name:"transferFrame",style:{width:280,height:360},data:e,script:g.default,cssText:c.default.toString(),html:(0,_.default)(y)+d.default,props:{ivrTpl:p.default,dialTpl:v.default}}),t)};t.default=w},function(e,t,n){t=e.exports=n(19)(!1),t.i(n(25),""),t.push([e.i,"h2 {\n  margin: 0;\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 1.5;\n  padding: 10px 15px 5px;\n  color: #262d3d;\n}\n.icon {\n  display: inline-block;\n  width: 16px;\n  overflow: hidden;\n  color: #a1abc2;\n}\n.icon svg {\n  width: 100%;\n}\n.icon.green:hover {\n  color: #01c480;\n}\na:hover .icon,\n.icon:hover {\n  color: #8490ae;\n}\n.drop {\n  overflow: hidden;\n  position: relative;\n  padding-right: 12px;\n}\n.drop .arrow {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 8px;\n  margin-left: 3px;\n}\n.icon.is-on,\n.text-stress {\n  color: #262d3d;\n}\n.text-hint {\n  color: #d4d8e1;\n}\n.green {\n  color: #00d48a;\n  border-color: #00d48a;\n}\n.red {\n  color: #f75559;\n}\n.blue {\n  color: #4a70ff;\n}\n.orange {\n  color: #ff8345;\n}\n.is-calling {\n  color: #a1abc2;\n}\n.is-calling h2 {\n  color: #f8f9fB;\n}\n.is-calling::-webkit-scrollbar-thumb,\n.is-calling ::-webkit-scrollbar-thumb {\n  background-color: #696c7c;\n}\n.is-calling::-webkit-scrollbar-thumb:hover,\n.is-calling ::-webkit-scrollbar-thumb:hover {\n  background-color: #50535f;\n}\n.is-calling .is-loading {\n  border: 2px solid #fff;\n  border-bottom-color: transparent;\n}\n.is-calling .text {\n  color: #a1abc2;\n}\n.is-calling .icon.is-on,\n.is-calling .text-stress {\n  color: #f8f9fB;\n}\n.is-calling .green {\n  color: #00cb83;\n  border-color: #00cb83;\n}\n.is-calling .red {\n  color: #e1464a;\n}\n.is-calling .blue {\n  color: #6283ff;\n}\n.is-calling.bg-main,\n.is-calling .bg-main {\n  background-position: 100% 50%;\n}\n.is-calling .bg-gap {\n  background-position: 100% 50%;\n}\n.is-calling .ck {\n  color: #f8f9fB;\n}\n.is-calling textarea,\n.is-calling input,\n.is-calling select,\n.is-calling .select,\n.is-calling .select .options {\n  border-color: #4a5264;\n  color: #f8f9fB;\n  background-color: #25283a;\n}\n.is-calling textarea:focus,\n.is-calling input:focus,\n.is-calling select:focus,\n.is-calling .select:focus,\n.is-calling .select .options:focus {\n  border-color: #8d96aa;\n}\n.is-calling textarea::placeholder,\n.is-calling input::placeholder,\n.is-calling select::placeholder,\n.is-calling .select::placeholder,\n.is-calling .select .options::placeholder {\n  color: #a1abc2;\n}\n.is-calling .select .options p:hover,\n.is-calling .select .options .selected {\n  background-color: #383a4a;\n}\n.is-calling .close {\n  color: #78849e;\n}\n.is-calling .close:hover {\n  color: #fff;\n}\n.is-calling input[type=checkbox] {\n  cursor: pointer;\n  position: relative;\n}\n.is-calling input[type=checkbox]::after {\n  position: absolute;\n  top: 0;\n  background-color: #1e2030;\n  color: #fff;\n  width: 14px;\n  height: 14px;\n  display: inline-block;\n  visibility: visible;\n  padding-left: 0px;\n  text-align: center;\n  content: ' ';\n  border-radius: 2px;\n  box-sizing: border-box;\n  border: 1px solid #4A5264;\n}\n.is-calling input[type=checkbox]:checked::after {\n  content: \"\";\n  border-color: #4A70FF;\n  background-color: #4A70FF;\n}\n.is-calling input[type=checkbox]:checked::before {\n  content: '';\n  position: absolute;\n  top: 1px;\n  left: 5px;\n  width: 3px;\n  height: 8px;\n  border: solid white;\n  border-width: 0 2px 2px 0;\n  transform: rotate(45deg);\n  z-index: 1;\n}\n.close {\n  position: absolute;\n  right: 0px;\n  top: 0px;\n  padding: 8px;\n  color: #a8abb3;\n}\n.close:hover {\n  color: #1e2300;\n}\n.close svg {\n  width: 14px;\n  height: 14px;\n}\n.bg-main {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #fff, #fff, #25283a, #25283a) left / cover;\n}\n.bg-gap {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #f4f7fb, #f4f7fb, #101328, #101328) left / cover;\n}\n.bgEaseIn {\n  background-position: 100% 50%;\n}\n.bgEaseOut {\n  background-position: 0% 50%;\n}\n.bg-main,\n.bg-gap {\n  background-size: 800% 800%;\n  animation-fill-mode: both;\n}\n@keyframes bgEaseIn {\n  0% {\n    background-position: 0% 50%;\n  }\n  100% {\n    background-position: 100% 50%;\n  }\n}\n@keyframes bgEaseOut {\n  0% {\n    background-position: 100% 50%;\n  }\n  100% {\n    background-position: 0% 50%;\n  }\n}\nbody {\n  margin: 0;\n  overflow: hidden;\n  font-size: 12px;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  color: #a1abc2;\n}\np {\n  margin: 0;\n}\ntextarea::placeholder,\ninput::placeholder {\n  color: #A1ABC2;\n}\n::-webkit-scrollbar {\n  width: 4px;\n  height: 8px;\n}\n::-webkit-scrollbar-thumb {\n  background-color: #f3f5fa;\n  border-radius: 8px;\n}\n::-webkit-scrollbar-thumb:hover {\n  background-color: #aaa;\n}\n::-webkit-scrollbar-track-piece {\n  background-color: transparent;\n}\nsvg {\n  fill: currentColor;\n}\na {\n  text-decoration: none;\n}\nul,\nli {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n.ck {\n  width: 9px;\n  height: 9px;\n  color: #262d3d;\n  position: absolute;\n  top: 50%;\n  right: 10px;\n  transform: translateY(-50%);\n  display: none;\n}\n.is-selected .ck {\n  display: inline-block;\n}\ninput,\ntextarea,\nselect,\n.select,\n.select .options {\n  font-size: 12px;\n  color: #262d3d;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  border-radius: 3px;\n  border: 1px solid #e1e6f0;\n  background-color: #fff;\n}\ninput:focus,\ntextarea:focus,\nselect:focus,\n.select:focus,\n.select .options:focus {\n  outline: 0;\n  border-color: #c5ccdb;\n}\nselect,\n.select,\n.select .options p {\n  padding: 0 5px;\n}\n.select {\n  min-height: 26px;\n  position: relative;\n  cursor: default;\n}\n.select .options {\n  position: absolute;\n  z-index: 1;\n  left: -1px;\n  top: 29px;\n  width: 100%;\n  max-height: 73px;\n  overflow: auto;\n}\n.select .options p:hover,\n.select .options p.selected {\n  background: #f1f5fb;\n}\n.select p {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.cls:after {\n  content: \"\";\n  font-size: 0;\n  display: block;\n  height: 0;\n  clear: both;\n  visibility: hidden;\n}\n.disabled {\n  pointer-events: none;\n  opacity: .3;\n}\n.hidden {\n  display: none!important;\n}\n.overlay {\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  background: rgba(255, 255, 255, 0.6);\n}\ninput::-webkit-outer-spin-button,\ninput::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n}\ninput[type=\"number\"] {\n  -moz-appearance: textfield;\n}\n.is-loading {\n  border-radius: 100%;\n  margin: 2px;\n  border: 2px solid #ccc;\n  border-bottom-color: transparent;\n  height: 12px;\n  width: 12px;\n  margin-top: -7px;\n  background: 0 0!important;\n  display: inline-block;\n  -webkit-animation: rotate .75s 0s linear infinite;\n  animation: rotate .75s 0s linear infinite;\n}\n@keyframes rotate {\n  0% {\n    -webkit-transform: rotate(0);\n    transform: rotate(0);\n  }\n  50% {\n    -webkit-transform: rotate(180deg);\n    transform: rotate(180deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n.marquee {\n  white-space: nowrap;\n  overflow: hidden;\n  width: 80px;\n  position: relative;\n}\n.marquee p {\n  overflow: hidden;\n  float: left;\n  animation: move linear 6s infinite;\n}\n.marquee span {\n  display: inline-block;\n  padding-left: 10px;\n}\n.marquee::before,\n.marquee::after {\n  position: absolute;\n  top: 0;\n  z-index: 1;\n  content: ' ';\n  width: 10px;\n  height: 100%;\n  animation: bgfadeIn linear 2s;\n}\n.marquee::before {\n  left: -2px;\n  background: linear-gradient(90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n.marquee::after {\n  right: -2px;\n  background: linear-gradient(-90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n@keyframes move {\n  0% {\n    transform: translateX(0);\n  }\n  100% {\n    transform: translateX(-50%);\n  }\n}\n.q-notice {\n  position: absolute;\n  width: 100%;\n  left: 0;\n  top: 0;\n  text-align: center;\n}\n.q-notice.is-auto {\n  pointer-events: none;\n  z-index: 10;\n}\n.q-notice.is-cover {\n  height: 100%;\n  background: rgba(255, 255, 255, 0.7);\n}\n.q-notice .item {\n  margin: 4px auto;\n}\n.q-notice .info {\n  pointer-events: initial;\n  min-width: 170px;\n  padding: 0 15px;\n  line-height: 29px;\n  height: 28px;\n  overflow: hidden;\n  white-space: nowrap;\n  display: inline-block;\n  color: rgba(255, 255, 255, 0.8);\n  background-color: #25283a;\n  box-shadow: 0px 2px 18px 2px rgba(172, 172, 172, 0.3);\n  border-radius: 2px;\n  position: relative;\n}\n.q-notice .info .icon-tip {\n  vertical-align: -3px;\n  margin-right: 2px;\n  width: 14px;\n}\n.q-notice .info [data-action] * {\n  pointer-events: none;\n}\n.q-notice .is-error .info {\n  color: #fff;\n  background-color: #f75559;\n}\n.q-notice .is-success .info {\n  color: #fff;\n  background-color: #00cb83;\n}\n.q-notice .is-close-able .info {\n  text-align: left;\n}\n.q-notice .is-close-able .btn-close {\n  width: 12px;\n  height: 12px;\n  color: #fff;\n  margin: 8px -5px 0 10px;\n  float: right;\n}\n.q-notice .is-close-able .btn-close:hover {\n  opacity: .8;\n}\n.q-notice .is-warning .info {\n  color: rgba(0, 1, 10, 0.93);\n  border: 0.5px solid #FFEBDA;\n  background-color: #FFF8F0;\n  box-shadow: 0px 16px 32px rgba(18, 19, 25, 0.16), 0px 0px 8px rgba(18, 19, 25, 0.08), 0px 0px 1px rgba(18, 19, 25, 0.08);\n}\n.ringing {\n  animation: ringing 2s ease;\n  animation-fill-mode: both;\n  animation-iteration-count: infinite;\n}\n@keyframes ringing {\n  10% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  15% {\n    -webkit-transform: rotate(-15deg);\n    transform: rotate(-15deg);\n  }\n  20% {\n    -webkit-transform: rotate(15deg);\n    transform: rotate(15deg);\n  }\n  25% {\n    -webkit-transform: rotate(-10deg);\n    transform: rotate(-10deg);\n    color: #2af2ac;\n  }\n  30% {\n    -webkit-transform: rotate(5deg);\n    transform: rotate(5deg);\n    color: #2af2ac;\n  }\n  35% {\n    -webkit-transform: rotate(-5deg);\n    transform: rotate(-5deg);\n  }\n  40% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n}\n.ctimer {\n  border-radius: 50%;\n  height: 40px;\n  overflow: hidden;\n  position: relative;\n  width: 40px;\n  background: rgba(255, 255, 255, 0.3);\n}\n.ctimer svg {\n  position: absolute;\n  left: 0;\n  z-index: 2;\n}\n.ctimer .hand {\n  position: absolute;\n  top: 0;\n  height: 100%;\n  overflow: hidden;\n  width: 50%;\n}\n.ctimer .hand span {\n  border: 20px solid rgba(255, 255, 255, 0.3);\n  border-bottom-color: transparent;\n  border-left-color: transparent;\n  border-radius: 50%;\n  display: block;\n  height: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  transform: rotate(225deg);\n  width: 0;\n}\n.ctimer .hand-left {\n  left: 0;\n  transform: rotate(180deg);\n}\n.ctimer .hand-right {\n  right: 0;\n}\n.ctimer .hand span {\n  animation-duration: var(--post-edit-time);\n  animation-iteration-count: 1;\n  animation-timing-function: linear;\n  animation-fill-mode: both;\n}\n.ctimer .hand-left span {\n  animation-name: spinleft;\n}\n.ctimer .hand-right span {\n  animation-name: spinright;\n}\n@keyframes spinleft {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(225deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\n@keyframes spinright {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(405deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\n.input {\n  height: 32px;\n  padding: 9px 10px 0;\n  position: relative;\n}\n.input .icon-search {\n  position: absolute;\n  left: 17px;\n  top: 16px;\n}\n.input input {\n  width: 100%;\n  height: 30px;\n  line-height: 30px;\n  padding: 0 24px 0 28px;\n  font-size: 12px;\n  border-radius: 2px;\n}\n.input input:focus {\n  outline: none;\n}\n.input .clear {\n  color: #a8abb3;\n  position: absolute;\n  right: 2px;\n  top: 3px;\n  padding: 5px;\n  margin: 10px 10px 0 0;\n  display: block;\n  cursor: pointer;\n}\n.input .clear:hover {\n  color: #1e2300;\n}\n.transfer,\n.consult {\n  overflow: hidden;\n  user-select: none;\n  -webkit-user-select: none;\n}\n.tab {\n  height: 40px;\n  line-height: 39px;\n  position: relative;\n  text-align: center;\n  background-color: #f4f7fb;\n  transition: background-color 0.15s linear;\n}\n.tab a,\n.tab .t_item {\n  display: inline-block;\n  text-align: center;\n  color: #1d2331;\n  font-size: 14px;\n  padding: 0 5px;\n  margin: 0 8px;\n}\n.tab .is-selected,\n.tab a:hover,\n.tab .t_item:hover {\n  color: #0067ed;\n}\n.tab .pointer {\n  width: 25%;\n  height: 3px;\n  display: block;\n  overflow: hidden;\n  background-color: #00cb83;\n  position: absolute;\n  left: 0;\n  bottom: -1px;\n  transition: transform 0.2s ease-out;\n  transform: translate3d(-100%, 0, 0);\n}\n.title {\n  height: 27px;\n  line-height: 28px;\n  border-bottom: 1px solid #25283a;\n  text-align: center;\n  position: relative;\n}\n.title .aleft {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 10px;\n  height: 10px;\n}\n.title .aleft:hover {\n  color: #fff;\n}\n.title .aleft,\n.title .icon-ivr {\n  display: none;\n}\n.title.goback .aleft,\n.title.goback .icon-ivr {\n  display: inline-block;\n}\n.icon-ivr,\n.aright,\n.aleft,\n.clear {\n  width: 12px;\n  height: 12px;\n  color: #a8abb3;\n  display: inline-block;\n  vertical-align: -2px;\n}\n.aright svg,\n.aleft svg,\n.clear svg {\n  float: left;\n}\n.icon-ivr {\n  margin-right: 3px;\n  color: #b3b5bc;\n}\n.aleft {\n  padding: 9px;\n  transform: rotate(180deg);\n  -ms-transform: rotate(180deg);\n}\n.aleft:hover {\n  color: #1d2331;\n}\n.recept-container {\n  height: 319px;\n}\n.employee-container {\n  overflow: hidden;\n}\n.container ul {\n  width: 100%;\n  height: 278px;\n  padding: 1px 0;\n  float: left;\n  overflow: auto;\n}\n.container li {\n  padding: 0 20px 0 15px;\n  line-height: 28px;\n  height: 28px;\n  position: relative;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  cursor: default;\n}\n.container li:hover {\n  background-color: #f5fafe;\n}\n.container li.transfer-tip {\n  margin: 5px 0 7px;\n  color: #A8ABB3;\n  width: 100%;\n  box-sizing: border-box;\n  text-align: center;\n  pointer-events: none;\n}\n.container li .gray {\n  color: #a8abb3;\n  margin-left: 6px;\n}\n.container .aright {\n  padding: 9px;\n  position: absolute;\n  right: 0;\n  top: 1px;\n  width: 8px;\n  height: 8px;\n}\n.container li.fivr {\n  cursor: pointer;\n}\n.container .loading .aright {\n  border-radius: 100%;\n  margin: 2px;\n  border: 2px solid #fff;\n  height: 8px;\n  width: 8px;\n  margin: -5px 0 0 -4px;\n  background: 0 0!important;\n  display: inline-block;\n  -webkit-animation: rotate .75s 0s linear infinite;\n  animation: rotate .75s 0s linear infinite;\n  top: 50%;\n  left: auto;\n  right: 9px;\n  border-color: #0067ed;\n  border-bottom-color: transparent;\n  padding: 0;\n}\n.empty {\n  color: #a8abb3;\n  width: 300px;\n  text-align: center;\n  position: absolute;\n  left: 0;\n  top: 50%;\n  margin-top: -10px;\n}\n.container .loading .aright svg {\n  display: none;\n}\n.container .status {\n  display: inline-block;\n  width: 6px;\n  height: 6px;\n  border-radius: 50%;\n  vertical-align: middle;\n  line-height: 10px;\n}\n.container .status.online {\n  background-color: #00cb83;\n}\n.container .status.invalid {\n  background-color: #e1464a;\n}\n.container .status.offline {\n  background-color: #a8abb3;\n}\n.container .btn_transfer,\n.container .btn_consult {\n  display: none;\n  text-align: center;\n  width: 40px;\n  height: 20px;\n  line-height: 20px;\n  color: #fff;\n  background-color: #6283ff;\n  position: absolute;\n  vertical-align: middle;\n  top: 0;\n  right: 0;\n  margin: 4px 10px 0;\n  border-radius: 2px;\n}\n.container .btn_transfer:hover,\n.container .btn_consult:hover {\n  background-color: #4a70ff;\n}\n.container li:hover .btn_transfer,\n.container li:hover .btn_consult {\n  display: block;\n}\n.callin.recept-container {\n  height: 254px;\n}\n.callin.recept-container ul {\n  height: 252px;\n}\n.recept-container {\n  transform: translate3d(0, 0, 0);\n  -webkit-transform: translate3d(0, 0, 0);\n  transition: transform 0.1s ease-out;\n}\n.recept-container.show-sub {\n  transform: translate3d(-280px, 0, 0);\n  -webkit-transform: translate3d(-280px, 0, 0);\n}\n.is-disabled {\n  color: #a8abb3;\n}\n.container .is-disabled:hover {\n  background-color: #fff;\n}\n.container .is-disabled:hover .btn_transfer,\n.container .is-disabled:hover .btn_consult {\n  display: none;\n}\n.green,\n.highlight-text {\n  color: #00cb83;\n}\n.outline {\n  padding-bottom: 25px;\n}\n.is-calling .outline,\n.is-calling .employees,\n.is-calling .receptiongroup,\n.is-calling .systemservice-container {\n  background-color: #101328;\n}\n.is-calling .container li:hover {\n  background-color: #383a4a;\n}\n.is-calling .container li.transfer-tip,\n.is-calling .container li.transfer-tip:hover {\n  background-color: transparent;\n  color: #6c7280;\n}\n.is-calling .input input {\n  background-color: transparent;\n}\n.is-calling .input .clear {\n  color: #a8abb3;\n}\n.is-calling .input .clear:hover {\n  color: #fff;\n}\n.is-calling .tab {\n  border-bottom: 1px solid transparent;\n  background-color: #25283a;\n}\n.is-calling .tab a,\n.is-calling .tab .t_item {\n  color: #a1abc2;\n}\n.is-calling .tab .is-selected,\n.is-calling .tab a:hover,\n.is-calling .tab .t_item:hover {\n  color: #f8f9fB;\n}\n.is-calling .bg-main {\n  background: transparent;\n}\n.bgEaseIn .tab {\n  background-color: transparent;\n}\n.btn-action {\n  display: inline-block;\n  width: 40px;\n  line-height: 20px;\n  height: 20px;\n  color: #fff;\n  margin: 16px auto 0;\n  border-radius: 2px;\n  background-color: #6283ff;\n}\n.btn-action:hover {\n  background-color: #4a70ff;\n}\n.dia-container {\n  padding: 10px 0 2px 0;\n  white-space: nowrap;\n}\n.dia-container .dia-res-display {\n  height: 18px;\n  text-align: center;\n  white-space: nowrap;\n}\n.dia-container .dia-res-display .dia-res-number {\n  display: inline-block;\n  text-align: center;\n  width: 100%;\n  margin: 0 auto;\n  padding: 0;\n  height: 16px;\n  font-size: 14px;\n  line-height: 14px;\n  vertical-align: middle;\n  white-space: nowrap;\n  outline: none;\n  background: none;\n  border: 0px;\n}\n.dia-container .dia-res-display .dia-res-number:focus {\n  outline: none;\n}\n.dia-container.is-calling .switchboard:hover {\n  color: #fff;\n}\n.dia-container.is-calling .dia-number-container td div {\n  color: #fff;\n  background-color: #101328;\n}\n.dia-container.is-calling .dia-number-container td div:hover {\n  background-color: #383a4a;\n}\n@keyframes shrink {\n  0%,\n  100% {\n    opacity: 0;\n  }\n  50% {\n    opacity: 1;\n  }\n}\n.dia-number-container {\n  height: 195px;\n  width: 100%;\n  padding: 0 5px;\n}\n.dia-number-container td div {\n  width: 40px;\n  height: 40px;\n  line-height: 40px;\n  border-radius: 100%;\n  text-align: center;\n  color: #fff;\n  background-color: #1e2031;\n  font-size: 20px;\n  font-weight: normal;\n  margin: 0 auto;\n  cursor: pointer;\n}\n.dia-number-container td div:hover {\n  background-color: #55586c;\n}\n.dia-number-container td div:active {\n  background-color: #7e879a;\n}\n.dia-container {\n  border: none;\n  height: auto;\n  width: 66%;\n  margin: 0 auto;\n}\n.dia-container .dia-res-display {\n  padding: 15px 0 18px;\n}\n.dia-container .dia-res-display .dia-res-number {\n  font-size: 20px;\n  height: 20px;\n  vertical-align: -3px;\n}\n.dial-frame {\n  height: 360px;\n  background: #101328;\n}\n.dial-frame .dia-res-display {\n  padding: 40px 0 20px;\n}\n.dial-frame td div {\n  margin: 5px auto;\n}\n.del {\n  display: inline-block;\n  background-color: #25283a;\n  height: 8px;\n  padding: 1px 2px 1px 0;\n  width: 8px;\n  color: #edf0f7;\n  cursor: pointer;\n  position: relative;\n  overflow: visible;\n}\n.del::before {\n  content: ' ';\n  position: absolute;\n  left: -10px;\n  top: 0;\n  width: 0;\n  height: 0;\n  border: 5px solid transparent;\n  border-right-color: #25283a;\n}\n.del:hover {\n  color: #fff;\n  background-color: #55586c;\n}\n.del:hover::before {\n  border-right-color: #55586c;\n}\n.del svg {\n  width: 8px;\n  height: 8px;\n}\n.transfer {\n  position: relative;\n}\n.transfer .receptiongroup {\n  height: 319px;\n}\n.transfer .receptiongroup .recept-container,\n.transfer .receptiongroup ul {\n  height: 319px;\n}\n.transfer .receptiongroup.c-ivr {\n  width: 100%;\n  overflow: hidden;\n}\n.transfer .receptiongroup.c-ivr .recept-container,\n.transfer .receptiongroup.c-ivr ul {\n  height: 291px;\n}\n.transfer .receptiongroup.c-ivr .recept-container {\n  width: 200%;\n}\n.transfer .receptiongroup.c-ivr ul {\n  width: 280px;\n}\n.is-loading {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  border-color: #0067ed;\n  margin-left: -8px;\n  border-bottom-color: transparent;\n}\n.systemservice-container {\n  overflow: hidden;\n}\n.systemservice-container ul {\n  height: 317px;\n}\n.outline {\n  text-align: center;\n}\n.btn-action {\n  margin-top: 16px;\n}\n",""])},function(e,t){e.exports='<%\n    var status = status || \'normal\';\n    var isNormalState = status === \'normal\' || status === \'over\';\n%>\n<div class="transfer bg-main <%=isNormalState ? \'\' : \'is-calling\'%>">\n    <div class="tab">\n        <a index="0" href="javascript:;" class="is-selected" name="receptiongroup">技能组</a>\n        <a index="1" href="javascript:;" name="employees">员工</a>\n        <a index="2" href="javascript:;" name="systemservice">系统服务</a>\n        <a index="3" href="javascript:;" name="outline">外线</a>\n        <i class="pointer"></i>\n    </div>\n    <div class="container receptiongroup"></div>\n    <div class="container employees" style="display: none">\n        <div class="input">\n            <svg class="icon icon-search" viewBox="0 0 12 12"><use xlink:href="#basic_search_line"></use></svg>\n            <input class="keywords" type="text" placeholder="员工姓名/工号"/>\n            <a class="clear" href="javascript:;"><svg viewBox="0 0 12 12"><use xlink:href="#close"></use></svg></a>\n        </div>\n        <div class="employee-container">\n            <ul class="employee"></ul>\n            <span class="is-loading"></span>\n        </div>\n    </div>\n    <div class="container systemservice" style="display: none">\n        <div class="systemservice-container">\n            <ul class="employee"></ul>\n            <span class="is-loading"></span>\n        </div>\n    </div>\n    <div class="container outline" style="display: none">\n        <div class="outline-container">\n\n        </div>\n        <a class="btn-action" href="javascript:;">转接</a>\n    </div>\n</div>\n'},function(e,t){e.exports="'use strict';\n\nvar qd = window.qd;\nvar render = window.render;\nvar ivrTpl = window.ivrTpl;\nvar dialTpl = window.dialTpl;\n\nvar VALID_INPUT = /^[0-9#\\*]+$/;\n\nqd._debug() && console.log('log from transfer');\n\nvar type = '';\nvar transfor;\nvar staffFetched = false;\nvar index = 1;\nvar count = 10;\nvar keywords = '';\nvar nomore = false;\nvar $emloading = $('.employee-container .is-loading');\nvar $sysLoading = $('.systemservice-container .is-loading');\nvar $loading = $emloading;\n\nvar timeout;\nvar callid;\nvar $res;\n\nvar CONSULT_KFEXT = 1;\nvar TRANSFER_OUTLINE = 3;\n\nfunction renderDialPanel() {\n    var html = render(dialTpl)({\n        inputAble: true\n    });\n    function valChange(val) {\n        $('.del')[val ? 'removeClass' : 'addClass']('hidden');\n    }\n    $('.outline-container').html(html);\n    $res = $('.dia-res-number').elems[0];\n    currentTab === 3 && $res.focus();\n    $('.dia-number-container').bind('click', function (e) {\n        if (e.target && e.target.nodeName.toUpperCase() === 'DIV') {\n            var $dom = $(e.target.parentNode);\n            var val = $dom.prop('val');\n            $res.value = qd.formatTel($res.value + val);\n            valChange($res.value);\n            $res.focus();\n        }\n    });\n    $('.dia-res-number').bind('input', function () {\n        var val = this.value;\n        if (val && !VALID_INPUT.test(val)) {\n            val = val.replace(/[^0-9#\\*]/g, '');\n        }\n        if (!/[#\\*]/.test(val)) {\n            val = qd.formatTel(val);\n        }\n        this.value = val;\n        valChange(val);\n    });\n    $('.dia-res-number').bind('keypress', function (e) {\n        e.keyCode === 13 && transferOutLine();\n    });\n    $('.btn-action').bind('click', transferOutLine);\n    $('.del').bind('click', function () {\n        var str = $res.value.replace(/\\s*/g, '');\n        $res.value = str.substr(0, str.length - 1);\n        valChange($res.value);\n        $res.focus();\n    });\n    function transferOutLine() {\n        var phone = $res.value.replace(/\\s*/g, '');\n        if (phone) {\n            transfer(TRANSFER_OUTLINE, phone, $res.value);\n            qd.hidePage();\n        } else {\n            notice.error('请输入正确号码');\n        }\n    }\n}\n\nrenderDialPanel();\n\nfunction onShow() {\n    var state = qd.getState();\n    setTab($('.tab a').eq(0).elems[0]);\n    $('.keywords').elems[0].value = '';\n    keywords = '';\n\n    getReceptionGroupList();\n    callid = state.callid;\n    type = state.direction;\n}\n\nfunction onHide() {\n    $('.dia-res-display input').elems[0].value = '';\n    qd.trigger('_transferFrameHide');\n}\n\nfunction getReceptionGroupList() {\n    qd.getReceptionGroupList({\n        withoutEmptyGroup: 1,\n        cache: 60,\n        success: function success(res) {\n            renderReceptionGroup(res.records || []);\n        },\n        fail: function fail(err) {\n            notice.error(err.msg || '加载技能组列表出错');\n        }\n    });\n}\n\nfunction renderReceptionGroup(rec) {\n    var state = qd.getState();\n    var html = '';\n    state.isType = 'skill';\n    rec && (state.records = rec);\n    html = render(ivrTpl)(state);\n    $('.receptiongroup').html(html);\n}\n\nfunction getIvr() {\n    var state = qd.getState();\n    state.direction === 'callout' ? qd.getIvrList({\n        callid: state.callid,\n        success: function success(res) {\n            renderIvr('ivr', res.node || []);\n        },\n        fail: function fail(err) {\n            notice.error(err.msg || '加载技能组列表出错');\n        }\n    }) : qd.getIvrNodeList({\n        callid: state.callid,\n        type: 1,\n        success: function success(res) {\n            renderIvr('recept', res.node || [], res.ivr_id);\n        },\n        fail: function fail(err) {\n            notice.error(err.msg || '加载技能组列表出错');\n        }\n    });\n}\n\nfunction renderIvr(isType, rec, vid) {\n    var state = qd.getState();\n    state.isType = isType;\n    rec && (state.records = rec);\n    vid && (state.ivr_id = vid);\n    var html = render(ivrTpl)(state);\n    $('.receptiongroup').html(html);\n}\n\nfunction getIvrNodeList($target) {\n    var vid = $target.prop('vid');\n    var $li = $('.recept .fivr_' + vid);\n    var name = $li.text();\n    $li.addClass('loading');\n    qd.getIvrNodeList({\n        ivr_id: vid,\n        type: 2,\n        success: function success(res) {\n            var html = render(ivrTpl)({\n                isType: 'sub',\n                ivr_id: vid,\n                records: res.node\n            });\n            $('.ivr').html(html);\n            $('.title').addClass('goback').find('.name').text(name);\n            $('.recept-container').addClass('show-sub');\n        },\n        fail: function fail(err) {\n            notice.error(err.msg || '加载技能组列表出错');\n        },\n        complete: function complete() {\n            $li.removeClass('loading');\n        }\n    });\n}\n\nfunction transfer(type, vid, svid) {\n    var state = qd.getState();\n    var types = [5, 1, 3, 4];\n    var type = types[currentTab];\n    var options = {\n        type: type,\n        callid: state.callid,\n        success: function success() {\n            qd.showTip('成功转接至：' + ('' + (type !== 4 ? transfor : vid)), 'success');\n        },\n        fail: function fail(res) {\n            qd.showTip(res.msg || '转接至' + transfor + '失败', 'error');\n        },\n        complete: function complete() {\n            qd.hidePage();\n        }\n    };\n    switch (type) {\n        case 1:\n            options.to_kfext = vid;\n            break;\n        case 2:\n            options.to_ivr_id = vid;\n            options.to_ivr_node_id = svid;\n            break;\n        case 3:\n            options.to_sys_service_id = vid;\n            break;\n        case 4:\n            options.to_phone_number = vid;\n        case 5:\n            options.to_skill_group_id = vid;\n    }\n    qd.transfer(options);\n}\n\nfunction initStaff() {\n    currentTab === 1 && $('.keywords').elems[0].focus();\n    keywords && currentTab !== 2 ? getStaffList(onStaffLoaded) : getAgentList(onStaffLoaded);\n}\n\nfunction getAgentList(cb) {\n    var isSystemService = currentTab === 2;\n    $loading.css('display', 'block');\n    qd.getAgentList({\n        type: 2,\n        get_sys_service: isSystemService ? 2 : 0,\n        keywords: keywords,\n        callid: qd.getState().callid,\n        success: function success(res) {\n            var records = res.list || [];\n            records.map(function (elem) {\n                elem.sname = elem.name;\n            });\n            var html = render(ivrTpl)({\n                keywords: keywords,\n                isType: el[currentTab],\n                records: records\n            });\n\n            $('.' + el[currentTab]).find('.employee').html(html);\n            cb && cb(records);\n        },\n        fail: function fail(err) {\n            $loading.css('display', 'none');\n            notice.error(err.msg || '\\u52A0\\u8F7D' + (isSystemService ? '系统服务' : '员工') + '\\u5217\\u8868\\u51FA\\u9519');\n        }\n    });\n}\n\nfunction onStaffLoaded(list) {\n    if (index === 1 && list.length === 0) {\n        $('.' + el[currentTab]).find('.employee').html('<div class=\"empty\">' + (keywords ? '无搜索结果' : '没有数据') + '</div>');\n    }\n    $loading.css('display', 'none');\n}\n\nfunction getStaffList(cb, append) {\n    index = append ? ++index : 1;\n    nomore = append ? nomore : false;\n    $loading.css('display', 'block');\n    qd.getStaffList({\n        current_page: index,\n        items_per_page: count,\n        keywords: keywords,\n        need_status: 1,\n        type: 1,\n        success: function success(res) {\n            var records = res.list || [];\n            records.map(function (elem) {\n                elem.sname = elem.name;\n            });\n            if (keywords) {\n                records.map(function (item) {\n                    var name = item.name;\n                    item.name = highLight(name, keywords);\n                });\n            }\n            var html = render(ivrTpl)({\n                keywords: keywords,\n                isType: el[currentTab],\n                records: records\n            });\n            html = append ? $('.employee').html() + html : html;\n            $('.employee').html(html);\n            nomore = count * (index - 1) + records.length >= res.total;\n            cb && cb(records);\n        },\n        fail: function fail(err) {\n            $loading.css('display', 'none');\n            notice.error(err.msg || '搜索员工出错');\n        }\n    });\n}\n\nvar el = ['receptiongroup', 'employees', 'systemservice', 'outline'];\nvar currentTab = 0;\nfunction setTab(tab) {\n    var width = tab.clientWidth;\n    var left = tab.offsetLeft;\n    $('.pointer').css({\n        width: width,\n        transform: 'translate3d(' + left + 'px, 0, 0)'\n    });\n}\n$('.tab a').bind('click', function (e) {\n    var name = $(this).prop('name');\n    currentTab = ~~$(this).prop('index');\n    if (currentTab === 2) {\n        $loading = $sysLoading;\n    } else {\n        $loading = $emloading;\n    }\n    $('.tab').find('.is-selected').removeClass('is-selected');\n    $(this).addClass('is-selected');\n    setTab(this);\n    $('.container').css('display', 'none');\n    $('.' + el[currentTab]).css('display', 'block');\n    name === 'receptiongroup' ? getReceptionGroupList() : name !== 'outline' && initStaff();\n    name === 'outline' && $res.focus();\n});\n$('.clear').bind('click', function () {\n    var el = $('.keywords').elems[0];\n    el.focus();\n    if (el.value === '') {\n        return;\n    }\n    el.value = keywords = '';\n\n    getAgentList(onStaffLoaded);\n});\n\n$('.keywords').bind('keypress', function (e) {\n    var str = $('.keywords').elems[0].value;\n    if (e.keyCode === 13 && keywords !== str) {\n        keywords = str;\n        getStaffList(onStaffLoaded);\n    }\n});\n\n$('.receptiongroup').bind('click', function (e) {\n    var $target = $(e.target);\n\n    if ($target.is('.btn_transfer')) {\n        var vid = $target.prop('vid');\n        transfor = $target.prop('name');\n        transfer(5, vid);\n    }\n});\n\n$('.employee').bind('click', function (e) {\n    var $target = $(e.target);\n\n    if ($target.is('.btn_transfer')) {\n        var vid = $target.prop('vid');\n        transfor = $target.prop('sname');\n        transfer(1, vid);\n    }\n});\n\nqd.one('debug.transferFrame', function () {\n    console.log('transfer page');\n});"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(18),o=r(i),a=n(24),s=r(a),l=n(573),c=r(l),u=n(574),d=r(u),f=n(320),p=r(f),h=n(260),g=r(h),m=n(575),v=r(m),b=n(26),_=r(b),y=n(27),w=function(e,t){var n=this.stator.getState("consutlViewType",!0)||"staff";return this.stator.setState("consutlViewType",n),e.consutlViewType=n,new o.default(s.default.call(this.stator,{name:"consultFrame",style:{width:280,height:360},data:e,script:v.default,cssText:c.default.toString(),html:(0,_.default)(y)+d.default,props:{ivrTpl:p.default,dialTpl:g.default}}),t)};t.default=w},function(e,t,n){t=e.exports=n(19)(!1),t.i(n(25),""),t.push([e.i,"h2 {\n  margin: 0;\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 1.5;\n  padding: 10px 15px 5px;\n  color: #262d3d;\n}\n.icon {\n  display: inline-block;\n  width: 16px;\n  overflow: hidden;\n  color: #a1abc2;\n}\n.icon svg {\n  width: 100%;\n}\n.icon.green:hover {\n  color: #01c480;\n}\na:hover .icon,\n.icon:hover {\n  color: #8490ae;\n}\n.drop {\n  overflow: hidden;\n  position: relative;\n  padding-right: 12px;\n}\n.drop .arrow {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 8px;\n  margin-left: 3px;\n}\n.icon.is-on,\n.text-stress {\n  color: #262d3d;\n}\n.text-hint {\n  color: #d4d8e1;\n}\n.green {\n  color: #00d48a;\n  border-color: #00d48a;\n}\n.red {\n  color: #f75559;\n}\n.blue {\n  color: #4a70ff;\n}\n.orange {\n  color: #ff8345;\n}\n.is-calling {\n  color: #a1abc2;\n}\n.is-calling h2 {\n  color: #f8f9fB;\n}\n.is-calling::-webkit-scrollbar-thumb,\n.is-calling ::-webkit-scrollbar-thumb {\n  background-color: #696c7c;\n}\n.is-calling::-webkit-scrollbar-thumb:hover,\n.is-calling ::-webkit-scrollbar-thumb:hover {\n  background-color: #50535f;\n}\n.is-calling .is-loading {\n  border: 2px solid #fff;\n  border-bottom-color: transparent;\n}\n.is-calling .text {\n  color: #a1abc2;\n}\n.is-calling .icon.is-on,\n.is-calling .text-stress {\n  color: #f8f9fB;\n}\n.is-calling .green {\n  color: #00cb83;\n  border-color: #00cb83;\n}\n.is-calling .red {\n  color: #e1464a;\n}\n.is-calling .blue {\n  color: #6283ff;\n}\n.is-calling.bg-main,\n.is-calling .bg-main {\n  background-position: 100% 50%;\n}\n.is-calling .bg-gap {\n  background-position: 100% 50%;\n}\n.is-calling .ck {\n  color: #f8f9fB;\n}\n.is-calling textarea,\n.is-calling input,\n.is-calling select,\n.is-calling .select,\n.is-calling .select .options {\n  border-color: #4a5264;\n  color: #f8f9fB;\n  background-color: #25283a;\n}\n.is-calling textarea:focus,\n.is-calling input:focus,\n.is-calling select:focus,\n.is-calling .select:focus,\n.is-calling .select .options:focus {\n  border-color: #8d96aa;\n}\n.is-calling textarea::placeholder,\n.is-calling input::placeholder,\n.is-calling select::placeholder,\n.is-calling .select::placeholder,\n.is-calling .select .options::placeholder {\n  color: #a1abc2;\n}\n.is-calling .select .options p:hover,\n.is-calling .select .options .selected {\n  background-color: #383a4a;\n}\n.is-calling .close {\n  color: #78849e;\n}\n.is-calling .close:hover {\n  color: #fff;\n}\n.is-calling input[type=checkbox] {\n  cursor: pointer;\n  position: relative;\n}\n.is-calling input[type=checkbox]::after {\n  position: absolute;\n  top: 0;\n  background-color: #1e2030;\n  color: #fff;\n  width: 14px;\n  height: 14px;\n  display: inline-block;\n  visibility: visible;\n  padding-left: 0px;\n  text-align: center;\n  content: ' ';\n  border-radius: 2px;\n  box-sizing: border-box;\n  border: 1px solid #4A5264;\n}\n.is-calling input[type=checkbox]:checked::after {\n  content: \"\";\n  border-color: #4A70FF;\n  background-color: #4A70FF;\n}\n.is-calling input[type=checkbox]:checked::before {\n  content: '';\n  position: absolute;\n  top: 1px;\n  left: 5px;\n  width: 3px;\n  height: 8px;\n  border: solid white;\n  border-width: 0 2px 2px 0;\n  transform: rotate(45deg);\n  z-index: 1;\n}\n.close {\n  position: absolute;\n  right: 0px;\n  top: 0px;\n  padding: 8px;\n  color: #a8abb3;\n}\n.close:hover {\n  color: #1e2300;\n}\n.close svg {\n  width: 14px;\n  height: 14px;\n}\n.bg-main {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #fff, #fff, #25283a, #25283a) left / cover;\n}\n.bg-gap {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #f4f7fb, #f4f7fb, #101328, #101328) left / cover;\n}\n.bgEaseIn {\n  background-position: 100% 50%;\n}\n.bgEaseOut {\n  background-position: 0% 50%;\n}\n.bg-main,\n.bg-gap {\n  background-size: 800% 800%;\n  animation-fill-mode: both;\n}\n@keyframes bgEaseIn {\n  0% {\n    background-position: 0% 50%;\n  }\n  100% {\n    background-position: 100% 50%;\n  }\n}\n@keyframes bgEaseOut {\n  0% {\n    background-position: 100% 50%;\n  }\n  100% {\n    background-position: 0% 50%;\n  }\n}\nbody {\n  margin: 0;\n  overflow: hidden;\n  font-size: 12px;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  color: #a1abc2;\n}\np {\n  margin: 0;\n}\ntextarea::placeholder,\ninput::placeholder {\n  color: #A1ABC2;\n}\n::-webkit-scrollbar {\n  width: 4px;\n  height: 8px;\n}\n::-webkit-scrollbar-thumb {\n  background-color: #f3f5fa;\n  border-radius: 8px;\n}\n::-webkit-scrollbar-thumb:hover {\n  background-color: #aaa;\n}\n::-webkit-scrollbar-track-piece {\n  background-color: transparent;\n}\nsvg {\n  fill: currentColor;\n}\na {\n  text-decoration: none;\n}\nul,\nli {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n.ck {\n  width: 9px;\n  height: 9px;\n  color: #262d3d;\n  position: absolute;\n  top: 50%;\n  right: 10px;\n  transform: translateY(-50%);\n  display: none;\n}\n.is-selected .ck {\n  display: inline-block;\n}\ninput,\ntextarea,\nselect,\n.select,\n.select .options {\n  font-size: 12px;\n  color: #262d3d;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  border-radius: 3px;\n  border: 1px solid #e1e6f0;\n  background-color: #fff;\n}\ninput:focus,\ntextarea:focus,\nselect:focus,\n.select:focus,\n.select .options:focus {\n  outline: 0;\n  border-color: #c5ccdb;\n}\nselect,\n.select,\n.select .options p {\n  padding: 0 5px;\n}\n.select {\n  min-height: 26px;\n  position: relative;\n  cursor: default;\n}\n.select .options {\n  position: absolute;\n  z-index: 1;\n  left: -1px;\n  top: 29px;\n  width: 100%;\n  max-height: 73px;\n  overflow: auto;\n}\n.select .options p:hover,\n.select .options p.selected {\n  background: #f1f5fb;\n}\n.select p {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.cls:after {\n  content: \"\";\n  font-size: 0;\n  display: block;\n  height: 0;\n  clear: both;\n  visibility: hidden;\n}\n.disabled {\n  pointer-events: none;\n  opacity: .3;\n}\n.hidden {\n  display: none!important;\n}\n.overlay {\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  background: rgba(255, 255, 255, 0.6);\n}\ninput::-webkit-outer-spin-button,\ninput::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n}\ninput[type=\"number\"] {\n  -moz-appearance: textfield;\n}\n.is-loading {\n  border-radius: 100%;\n  margin: 2px;\n  border: 2px solid #ccc;\n  border-bottom-color: transparent;\n  height: 12px;\n  width: 12px;\n  margin-top: -7px;\n  background: 0 0!important;\n  display: inline-block;\n  -webkit-animation: rotate .75s 0s linear infinite;\n  animation: rotate .75s 0s linear infinite;\n}\n@keyframes rotate {\n  0% {\n    -webkit-transform: rotate(0);\n    transform: rotate(0);\n  }\n  50% {\n    -webkit-transform: rotate(180deg);\n    transform: rotate(180deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n.marquee {\n  white-space: nowrap;\n  overflow: hidden;\n  width: 80px;\n  position: relative;\n}\n.marquee p {\n  overflow: hidden;\n  float: left;\n  animation: move linear 6s infinite;\n}\n.marquee span {\n  display: inline-block;\n  padding-left: 10px;\n}\n.marquee::before,\n.marquee::after {\n  position: absolute;\n  top: 0;\n  z-index: 1;\n  content: ' ';\n  width: 10px;\n  height: 100%;\n  animation: bgfadeIn linear 2s;\n}\n.marquee::before {\n  left: -2px;\n  background: linear-gradient(90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n.marquee::after {\n  right: -2px;\n  background: linear-gradient(-90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n@keyframes move {\n  0% {\n    transform: translateX(0);\n  }\n  100% {\n    transform: translateX(-50%);\n  }\n}\n.q-notice {\n  position: absolute;\n  width: 100%;\n  left: 0;\n  top: 0;\n  text-align: center;\n}\n.q-notice.is-auto {\n  pointer-events: none;\n  z-index: 10;\n}\n.q-notice.is-cover {\n  height: 100%;\n  background: rgba(255, 255, 255, 0.7);\n}\n.q-notice .item {\n  margin: 4px auto;\n}\n.q-notice .info {\n  pointer-events: initial;\n  min-width: 170px;\n  padding: 0 15px;\n  line-height: 29px;\n  height: 28px;\n  overflow: hidden;\n  white-space: nowrap;\n  display: inline-block;\n  color: rgba(255, 255, 255, 0.8);\n  background-color: #25283a;\n  box-shadow: 0px 2px 18px 2px rgba(172, 172, 172, 0.3);\n  border-radius: 2px;\n  position: relative;\n}\n.q-notice .info .icon-tip {\n  vertical-align: -3px;\n  margin-right: 2px;\n  width: 14px;\n}\n.q-notice .info [data-action] * {\n  pointer-events: none;\n}\n.q-notice .is-error .info {\n  color: #fff;\n  background-color: #f75559;\n}\n.q-notice .is-success .info {\n  color: #fff;\n  background-color: #00cb83;\n}\n.q-notice .is-close-able .info {\n  text-align: left;\n}\n.q-notice .is-close-able .btn-close {\n  width: 12px;\n  height: 12px;\n  color: #fff;\n  margin: 8px -5px 0 10px;\n  float: right;\n}\n.q-notice .is-close-able .btn-close:hover {\n  opacity: .8;\n}\n.q-notice .is-warning .info {\n  color: rgba(0, 1, 10, 0.93);\n  border: 0.5px solid #FFEBDA;\n  background-color: #FFF8F0;\n  box-shadow: 0px 16px 32px rgba(18, 19, 25, 0.16), 0px 0px 8px rgba(18, 19, 25, 0.08), 0px 0px 1px rgba(18, 19, 25, 0.08);\n}\n.ringing {\n  animation: ringing 2s ease;\n  animation-fill-mode: both;\n  animation-iteration-count: infinite;\n}\n@keyframes ringing {\n  10% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  15% {\n    -webkit-transform: rotate(-15deg);\n    transform: rotate(-15deg);\n  }\n  20% {\n    -webkit-transform: rotate(15deg);\n    transform: rotate(15deg);\n  }\n  25% {\n    -webkit-transform: rotate(-10deg);\n    transform: rotate(-10deg);\n    color: #2af2ac;\n  }\n  30% {\n    -webkit-transform: rotate(5deg);\n    transform: rotate(5deg);\n    color: #2af2ac;\n  }\n  35% {\n    -webkit-transform: rotate(-5deg);\n    transform: rotate(-5deg);\n  }\n  40% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n}\n.ctimer {\n  border-radius: 50%;\n  height: 40px;\n  overflow: hidden;\n  position: relative;\n  width: 40px;\n  background: rgba(255, 255, 255, 0.3);\n}\n.ctimer svg {\n  position: absolute;\n  left: 0;\n  z-index: 2;\n}\n.ctimer .hand {\n  position: absolute;\n  top: 0;\n  height: 100%;\n  overflow: hidden;\n  width: 50%;\n}\n.ctimer .hand span {\n  border: 20px solid rgba(255, 255, 255, 0.3);\n  border-bottom-color: transparent;\n  border-left-color: transparent;\n  border-radius: 50%;\n  display: block;\n  height: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  transform: rotate(225deg);\n  width: 0;\n}\n.ctimer .hand-left {\n  left: 0;\n  transform: rotate(180deg);\n}\n.ctimer .hand-right {\n  right: 0;\n}\n.ctimer .hand span {\n  animation-duration: var(--post-edit-time);\n  animation-iteration-count: 1;\n  animation-timing-function: linear;\n  animation-fill-mode: both;\n}\n.ctimer .hand-left span {\n  animation-name: spinleft;\n}\n.ctimer .hand-right span {\n  animation-name: spinright;\n}\n@keyframes spinleft {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(225deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\n@keyframes spinright {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(405deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\n.input {\n  height: 32px;\n  padding: 9px 10px 0;\n  position: relative;\n}\n.input .icon-search {\n  position: absolute;\n  left: 17px;\n  top: 16px;\n}\n.input input {\n  width: 100%;\n  height: 30px;\n  line-height: 30px;\n  padding: 0 24px 0 28px;\n  font-size: 12px;\n  border-radius: 2px;\n}\n.input input:focus {\n  outline: none;\n}\n.input .clear {\n  color: #a8abb3;\n  position: absolute;\n  right: 2px;\n  top: 3px;\n  padding: 5px;\n  margin: 10px 10px 0 0;\n  display: block;\n  cursor: pointer;\n}\n.input .clear:hover {\n  color: #1e2300;\n}\n.transfer,\n.consult {\n  overflow: hidden;\n  user-select: none;\n  -webkit-user-select: none;\n}\n.tab {\n  height: 40px;\n  line-height: 39px;\n  position: relative;\n  text-align: center;\n  background-color: #f4f7fb;\n  transition: background-color 0.15s linear;\n}\n.tab a,\n.tab .t_item {\n  display: inline-block;\n  text-align: center;\n  color: #1d2331;\n  font-size: 14px;\n  padding: 0 5px;\n  margin: 0 8px;\n}\n.tab .is-selected,\n.tab a:hover,\n.tab .t_item:hover {\n  color: #0067ed;\n}\n.tab .pointer {\n  width: 25%;\n  height: 3px;\n  display: block;\n  overflow: hidden;\n  background-color: #00cb83;\n  position: absolute;\n  left: 0;\n  bottom: -1px;\n  transition: transform 0.2s ease-out;\n  transform: translate3d(-100%, 0, 0);\n}\n.title {\n  height: 27px;\n  line-height: 28px;\n  border-bottom: 1px solid #25283a;\n  text-align: center;\n  position: relative;\n}\n.title .aleft {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 10px;\n  height: 10px;\n}\n.title .aleft:hover {\n  color: #fff;\n}\n.title .aleft,\n.title .icon-ivr {\n  display: none;\n}\n.title.goback .aleft,\n.title.goback .icon-ivr {\n  display: inline-block;\n}\n.icon-ivr,\n.aright,\n.aleft,\n.clear {\n  width: 12px;\n  height: 12px;\n  color: #a8abb3;\n  display: inline-block;\n  vertical-align: -2px;\n}\n.aright svg,\n.aleft svg,\n.clear svg {\n  float: left;\n}\n.icon-ivr {\n  margin-right: 3px;\n  color: #b3b5bc;\n}\n.aleft {\n  padding: 9px;\n  transform: rotate(180deg);\n  -ms-transform: rotate(180deg);\n}\n.aleft:hover {\n  color: #1d2331;\n}\n.recept-container {\n  height: 319px;\n}\n.employee-container {\n  overflow: hidden;\n}\n.container ul {\n  width: 100%;\n  height: 278px;\n  padding: 1px 0;\n  float: left;\n  overflow: auto;\n}\n.container li {\n  padding: 0 20px 0 15px;\n  line-height: 28px;\n  height: 28px;\n  position: relative;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  cursor: default;\n}\n.container li:hover {\n  background-color: #f5fafe;\n}\n.container li.transfer-tip {\n  margin: 5px 0 7px;\n  color: #A8ABB3;\n  width: 100%;\n  box-sizing: border-box;\n  text-align: center;\n  pointer-events: none;\n}\n.container li .gray {\n  color: #a8abb3;\n  margin-left: 6px;\n}\n.container .aright {\n  padding: 9px;\n  position: absolute;\n  right: 0;\n  top: 1px;\n  width: 8px;\n  height: 8px;\n}\n.container li.fivr {\n  cursor: pointer;\n}\n.container .loading .aright {\n  border-radius: 100%;\n  margin: 2px;\n  border: 2px solid #fff;\n  height: 8px;\n  width: 8px;\n  margin: -5px 0 0 -4px;\n  background: 0 0!important;\n  display: inline-block;\n  -webkit-animation: rotate .75s 0s linear infinite;\n  animation: rotate .75s 0s linear infinite;\n  top: 50%;\n  left: auto;\n  right: 9px;\n  border-color: #0067ed;\n  border-bottom-color: transparent;\n  padding: 0;\n}\n.empty {\n  color: #a8abb3;\n  width: 300px;\n  text-align: center;\n  position: absolute;\n  left: 0;\n  top: 50%;\n  margin-top: -10px;\n}\n.container .loading .aright svg {\n  display: none;\n}\n.container .status {\n  display: inline-block;\n  width: 6px;\n  height: 6px;\n  border-radius: 50%;\n  vertical-align: middle;\n  line-height: 10px;\n}\n.container .status.online {\n  background-color: #00cb83;\n}\n.container .status.invalid {\n  background-color: #e1464a;\n}\n.container .status.offline {\n  background-color: #a8abb3;\n}\n.container .btn_transfer,\n.container .btn_consult {\n  display: none;\n  text-align: center;\n  width: 40px;\n  height: 20px;\n  line-height: 20px;\n  color: #fff;\n  background-color: #6283ff;\n  position: absolute;\n  vertical-align: middle;\n  top: 0;\n  right: 0;\n  margin: 4px 10px 0;\n  border-radius: 2px;\n}\n.container .btn_transfer:hover,\n.container .btn_consult:hover {\n  background-color: #4a70ff;\n}\n.container li:hover .btn_transfer,\n.container li:hover .btn_consult {\n  display: block;\n}\n.callin.recept-container {\n  height: 254px;\n}\n.callin.recept-container ul {\n  height: 252px;\n}\n.recept-container {\n  transform: translate3d(0, 0, 0);\n  -webkit-transform: translate3d(0, 0, 0);\n  transition: transform 0.1s ease-out;\n}\n.recept-container.show-sub {\n  transform: translate3d(-280px, 0, 0);\n  -webkit-transform: translate3d(-280px, 0, 0);\n}\n.is-disabled {\n  color: #a8abb3;\n}\n.container .is-disabled:hover {\n  background-color: #fff;\n}\n.container .is-disabled:hover .btn_transfer,\n.container .is-disabled:hover .btn_consult {\n  display: none;\n}\n.green,\n.highlight-text {\n  color: #00cb83;\n}\n.outline {\n  padding-bottom: 25px;\n}\n.is-calling .outline,\n.is-calling .employees,\n.is-calling .receptiongroup,\n.is-calling .systemservice-container {\n  background-color: #101328;\n}\n.is-calling .container li:hover {\n  background-color: #383a4a;\n}\n.is-calling .container li.transfer-tip,\n.is-calling .container li.transfer-tip:hover {\n  background-color: transparent;\n  color: #6c7280;\n}\n.is-calling .input input {\n  background-color: transparent;\n}\n.is-calling .input .clear {\n  color: #a8abb3;\n}\n.is-calling .input .clear:hover {\n  color: #fff;\n}\n.is-calling .tab {\n  border-bottom: 1px solid transparent;\n  background-color: #25283a;\n}\n.is-calling .tab a,\n.is-calling .tab .t_item {\n  color: #a1abc2;\n}\n.is-calling .tab .is-selected,\n.is-calling .tab a:hover,\n.is-calling .tab .t_item:hover {\n  color: #f8f9fB;\n}\n.is-calling .bg-main {\n  background: transparent;\n}\n.bgEaseIn .tab {\n  background-color: transparent;\n}\n.btn-action {\n  display: inline-block;\n  width: 40px;\n  line-height: 20px;\n  height: 20px;\n  color: #fff;\n  margin: 16px auto 0;\n  border-radius: 2px;\n  background-color: #6283ff;\n}\n.btn-action:hover {\n  background-color: #4a70ff;\n}\n.dia-container {\n  padding: 10px 0 2px 0;\n  white-space: nowrap;\n}\n.dia-container .dia-res-display {\n  height: 18px;\n  text-align: center;\n  white-space: nowrap;\n}\n.dia-container .dia-res-display .dia-res-number {\n  display: inline-block;\n  text-align: center;\n  width: 100%;\n  margin: 0 auto;\n  padding: 0;\n  height: 16px;\n  font-size: 14px;\n  line-height: 14px;\n  vertical-align: middle;\n  white-space: nowrap;\n  outline: none;\n  background: none;\n  border: 0px;\n}\n.dia-container .dia-res-display .dia-res-number:focus {\n  outline: none;\n}\n.dia-container.is-calling .switchboard:hover {\n  color: #fff;\n}\n.dia-container.is-calling .dia-number-container td div {\n  color: #fff;\n  background-color: #101328;\n}\n.dia-container.is-calling .dia-number-container td div:hover {\n  background-color: #383a4a;\n}\n@keyframes shrink {\n  0%,\n  100% {\n    opacity: 0;\n  }\n  50% {\n    opacity: 1;\n  }\n}\n.dia-number-container {\n  height: 195px;\n  width: 100%;\n  padding: 0 5px;\n}\n.dia-number-container td div {\n  width: 40px;\n  height: 40px;\n  line-height: 40px;\n  border-radius: 100%;\n  text-align: center;\n  color: #fff;\n  background-color: #1e2031;\n  font-size: 20px;\n  font-weight: normal;\n  margin: 0 auto;\n  cursor: pointer;\n}\n.dia-number-container td div:hover {\n  background-color: #55586c;\n}\n.dia-number-container td div:active {\n  background-color: #7e879a;\n}\n.dia-container {\n  border: none;\n  height: auto;\n  width: 66%;\n  margin: 0 auto;\n}\n.dia-container .dia-res-display {\n  padding: 15px 0 18px;\n}\n.dia-container .dia-res-display .dia-res-number {\n  font-size: 20px;\n  height: 20px;\n  vertical-align: -3px;\n}\n.dial-frame {\n  height: 360px;\n  background: #101328;\n}\n.dial-frame .dia-res-display {\n  padding: 40px 0 20px;\n}\n.dial-frame td div {\n  margin: 5px auto;\n}\n.del {\n  display: inline-block;\n  background-color: #25283a;\n  height: 8px;\n  padding: 1px 2px 1px 0;\n  width: 8px;\n  color: #edf0f7;\n  cursor: pointer;\n  position: relative;\n  overflow: visible;\n}\n.del::before {\n  content: ' ';\n  position: absolute;\n  left: -10px;\n  top: 0;\n  width: 0;\n  height: 0;\n  border: 5px solid transparent;\n  border-right-color: #25283a;\n}\n.del:hover {\n  color: #fff;\n  background-color: #55586c;\n}\n.del:hover::before {\n  border-right-color: #55586c;\n}\n.del svg {\n  width: 8px;\n  height: 8px;\n}\n.tab a {\n  margin: 0 15px;\n}\n.consult {\n  position: relative;\n}\n.consult .employees .bar {\n  height: 32px;\n  padding: 9px 10px 0;\n  display: flex;\n}\n.consult .employees .input {\n  padding: 0;\n  position: relative;\n  flex: 1;\n}\n.consult .employees .input .icon-search {\n  left: 7px;\n  top: 7px;\n}\n.consult .employees .input .clear {\n  right: -8px;\n  top: -6px;\n}\n.consult .employees .list ul {\n  display: none;\n}\n.consult .employees .list li {\n  height: auto;\n}\n.consult .employees .list li.loading {\n  height: 28px;\n}\n.consult .employees .list .icon {\n  margin-right: 2px;\n  width: 9px;\n  vertical-align: 0;\n  transform: rotate(-90deg);\n  transition: transform .15s linear;\n}\n.consult .employees .list .expand {\n  height: 30px;\n  line-height: 30px;\n  padding: 0 20px 0 15px;\n  margin: 0 -20px 0 -15px;\n}\n.consult .employees .list .expand:hover {\n  background-color: #f5fafe;\n}\n.consult .employees .list .is-empty {\n  text-align: center;\n  color: #6c7280;\n}\n.consult .employees .view {\n  margin-left: 5px;\n  width: 72px;\n  min-width: 72px;\n  height: 30px;\n  display: flex;\n  border-radius: 3px;\n  overflow: hidden;\n  padding-left: 1px;\n}\n.consult .employees .view span {\n  padding: 5px 8px 7px;\n  display: inline-block;\n  text-align: center;\n  width: 20px;\n  height: 16px;\n  color: #00010A;\n  border: 1px solid #e1e6f0;\n  margin-left: -1px;\n  cursor: pointer;\n}\n.consult .employees .view span:hover {\n  background-color: #f5fafe;\n}\n.consult .employees .view span.is-selected {\n  background-color: #668AFF;\n  border-color: #668AFF;\n  position: relative;\n  cursor: default;\n  color: #fff;\n}\n.consult .employees .view span.staff {\n  border-radius: 3px 0 0 3px;\n}\n.consult .employees .view span.group {\n  border-radius: 0 3px 3px 0;\n}\n.consult .employees .view svg {\n  height: 16px;\n}\n.consult .group .is-expand:hover {\n  background-color: transparent!important;\n}\n.consult .group .is-expand .expand .icon {\n  transform: rotate(0deg);\n}\n.consult .group .is-expand ul {\n  display: block;\n}\n.consult .group > li {\n  height: auto;\n}\n.consult .group > li:hover {\n  background-color: inherit;\n}\n.consult .group > li:hover .btn_consult {\n  display: none;\n}\n.consult .group ul {\n  height: auto;\n  padding: 0 20px 0 15px;\n  margin: 0 -20px 0 -15px;\n}\n.consult .group ul li {\n  margin: 0 -20px 0 -15px;\n  padding-left: 35px;\n}\n.consult .group ul li:hover .btn_consult {\n  display: block;\n}\n.consult .group ul li.transfer-tip {\n  text-align: left;\n  padding-right: 0;\n  pointer-events: none;\n  text-overflow: inherit;\n  overflow: visible;\n}\n.consult.is-calling .employees .view span {\n  color: #fff;\n  border-color: #4a5264;\n}\n.consult.is-calling .employees .view span:hover {\n  background-color: #383a4a;\n}\n.consult.is-calling .employees .view span.is-selected {\n  border-color: #668AFF;\n}\n.consult.is-calling .employees .view span.is-selected:hover {\n  background-color: #668AFF;\n}\n.consult.is-calling .group .expand:hover {\n  background-color: #383a4a;\n}\n.is-loading {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  border-color: #0067ed;\n  margin-left: -8px;\n  border-bottom-color: transparent;\n}\n.systemservice-container {\n  overflow: hidden;\n}\n.systemservice-container ul {\n  height: 317px;\n}\n.recept-container {\n  transition: transform 0.2s ease-out;\n}\n.outline {\n  text-align: center;\n}\n",""])},function(e,t){e.exports='<%\n    var status = status || \'normal\';\n    var isNormalState = status === \'normal\' || status === \'over\';\n%>\n<div class="consult bg-main <%=isNormalState ? \'\' : \'is-calling\'%>">\n    <div class="tab">\n        <a index="0" href="javascript:;" name="employees">员工</a>\n        <a index="1" href="javascript:;" name="systemservice">系统服务</a>\n        <a index="2" href="javascript:;" name="outline">外线</a>\n        <i class="pointer"></i>\n    </div>\n    <div class="container employees">\n        <div class="bar">\n            <div class="input">\n                <svg class="icon icon-search" viewBox="0 0 12 12"><use xlink:href="#basic_search_line"></use></svg>\n                <input class="keywords" type="text" placeholder="员工姓名/工号"/>\n                <a class="clear" href="javascript:;"><svg viewBox="0 0 12 12"><use xlink:href="#close"></use></svg></a>\n            </div>\n            <div class="view">\n                <span class="staff <%=consutlViewType === \'staff\' ? \'is-selected\' : \'\'%>" title="按员工列表查看"><svg viewBox="0 0 12 12"><use xlink:href="#basic_me_line"></use></svg></span>\n                <span class="group <%=consutlViewType === \'group\' ? \'is-selected\' : \'\'%>" title="按技能组查看"><svg viewBox="0 0 12 12"><use xlink:href="#basic_group_line"></use></svg></span>\n            </div>\n        </div>\n        <div class="employee-container">\n            <ul class="list"></ul>\n            <span class="is-loading"></span>\n        </div>\n    </div>\n    <div class="container systemservice" style="display: none">\n        <div class="systemservice-container">\n            <ul class="list employee"></ul>\n            <span class="is-loading"></span>\n        </div>\n    </div>\n    <div class="container outline" style="display: none">\n        <div class="outline-container">\n            \n        </div>\n        <a class="btn-action" href="javascript:;">咨询</a>\n    </div>\n</div>\n'},function(e,t){e.exports="'use strict';\n\nvar qd = window.qd;\nvar render = window.render;\nvar ivrTpl = window.ivrTpl;\nvar dialTpl = window.dialTpl;\n\nvar VALID_INPUT = /^[0-9#\\*]+$/;\n\nvar CALLTYPE_NORMAL = 1;\nvar CALLTYPE_CONSULT = 2;\nvar CALLTYPE_TRANSFER = 3;\n\nvar CONSULT_KFEXT = 1;\nvar CONSULT_SYSTEM = 2;\nvar CONSULT_OUTLINE = 3;\n\nvar type = '';\nvar transfor;\nvar staffFetched = false;\nvar index = 1;\nvar count = 10;\nvar keywords = '';\nvar nomore = false;\nvar $emloading = $('.employee-container .is-loading');\nvar $sysLoading = $('.systemservice-container .is-loading');\nvar $loading = $emloading;\n\nvar timeout;\nvar callid;\nvar $res;\n\nfunction onShow() {\n    var state = qd.getState();\n    setTab($('.tab a').eq(0).elems[0]);\n    callid = state.callid;\n    type = state.direction;\n    $('.keywords').elems[0].value = '';\n    keywords = '';\n    initStaff();\n    $res && ($res.value = '');\n}\n\nfunction renderDialPanel() {\n    var html = render(dialTpl)({\n        inputAble: true\n    });\n    function valChange(val) {\n        $('.del')[val ? 'removeClass' : 'addClass']('hidden');\n    }\n    $('.outline-container').html(html);\n    $res = $('.dia-res-number').elems[0];\n    currentTab === 1 && $res.focus();\n    $('.dia-number-container').bind('click', function (e) {\n        if (e.target && e.target.nodeName.toUpperCase() === 'DIV') {\n            var $dom = $(e.target.parentNode);\n            var val = $dom.prop('val');\n            $res.value = qd.formatTel($res.value + val);\n            valChange($res.value);\n            $res.focus();\n        }\n    });\n    $('.dia-res-number').bind('input', function () {\n        var val = this.value;\n        if (val && !VALID_INPUT.test(val)) {\n            val = val.replace(/[^0-9#\\*]/g, '');\n        }\n        if (!/[#\\*]/.test(val)) {\n            val = qd.formatTel(val);\n        }\n        this.value = val;\n        valChange(val);\n    });\n    $('.dia-res-number').bind('keypress', function (e) {\n        e.keyCode === 13 && consultOutLine();\n    });\n    $('.btn-action').bind('click', consultOutLine);\n    $('.del').bind('click', function () {\n        var str = $res.value.replace(/\\s*/g, '');\n        $res.value = str.substr(0, str.length - 1);\n        valChange($res.value);\n        $res.focus();\n    });\n    function consultOutLine() {\n        var phone = $res.value.replace(/\\s*/g, '');\n        if (phone) {\n            consult(CONSULT_OUTLINE, phone, $res.value);\n            qd.hidePage();\n        } else {\n            notice.error('请输入正确号码');\n        }\n    }\n}\n\nrenderDialPanel();\n\nfunction onHide() {\n    qd.trigger('_consultFrameHide');\n}\n\nfunction consult(type, vid, name) {\n    var options = {\n        type: type,\n        callid: qd.getState().callid,\n        success: function success(res) {\n            var status = qd.getState('status');\n            var transtor = qd.stateManager.transtor;\n            status = status === 'consult' ? 'consult' : 'calling';\n            qd.setState({\n                status: status,\n                direction: 'callout',\n                callType: CALLTYPE_CONSULT,\n                nextState: {\n                    direction: qd.getState('direction')\n                }\n            });\n\n            transtor.cMultiOut = transtor.bMultiOut = transtor.isMulti = false;\n        },\n        fail: function fail(err) {\n            qd.showTip(err.msg || '员工状态变更导致咨询失败，请重试', 'error');\n        },\n        complete: function complete() {\n            qd.hidePage();\n        }\n    };\n    var param = ['', 'to_kfext', 'to_sys_service_id', 'to_phone_number'];\n    options[param[type]] = vid;\n    qd.setState({\n        consultType: type,\n        callOperatored: vid,\n        callName: name\n    });\n    qd.consult(options);\n}\n\nfunction initStaff() {\n    currentTab === 0 && $('.keywords').elems[0].focus();\n    keywords && currentTab !== 1 ? getStaffList(onStaffLoaded) : getAgentList(onStaffLoaded);\n}\n\nfunction getGroupList() {\n    qd.getReceptionGroupList({\n        withoutEmptyGroup: 1,\n        cache: 60,\n        success: function success(res) {\n            var groups = res.records || [];\n            var html = render(ivrTpl)({\n                keywords: keywords,\n                isType: 'employees',\n                viewType: 'group',\n                records: groups\n            });\n            $('.employee-container .list').html(html);\n            onStaffLoaded(groups, '请先创建技能组');\n        },\n        fail: function fail(err) {\n            notice.error(err.msg || '加载技能组列表出错');\n        }\n    });\n}\n\nfunction getAgentList(cb) {\n    var isSystemService = currentTab === 1;\n    var consutlViewType = qd.getState('consutlViewType');\n    var $groupListContainer = $('.employee-container .list');\n\n    $loading.css('display', 'block');\n    if (currentTab === 0 && !keywords && consutlViewType === 'group') {\n        $groupListContainer.addClass('group');\n        getGroupList();\n        return;\n    } else {\n        $groupListContainer.removeClass('group');\n    }\n\n    var params = {\n        type: 1,\n        get_sys_service: isSystemService ? 2 : 0,\n        keywords: keywords,\n        callid: qd.getState().callid,\n        need_status: 1\n    };\n    var opts = {\n        success: function success(res) {\n            var data = res.data || {};\n            var records = data.list || res.list || [];\n            records.map(function (elem) {\n                elem.sname = elem.name;\n            });\n            var html = render(ivrTpl)({\n                keywords: keywords,\n                isConsult: true,\n                isType: isSystemService ? 'systemservice' : 'employees',\n                records: records,\n                total: 11 });\n\n            $((!isSystemService ? '.employee-container' : '.systemservice-container') + ' .list').html(html);\n            cb && cb(records);\n        },\n        fail: function fail(err) {\n            $loading.css('display', 'none');\n            notice.error(err.msg || '\\u52A0\\u8F7D' + (isSystemService ? '系统服务' : '员工') + '\\u5217\\u8868\\u51FA\\u9519');\n        }\n    };\n    isSystemService ? qd.getAgentList(qd.assign(opts, params)) : qd.handle(qd.assign(opts, {\n        action: 'getStaffList',\n        params: params\n    }));\n}\n\nfunction onStaffLoaded(list, msg) {\n    if (index === 1 && list.length === 0) {\n        var html = '<div class=\"empty\">' + (keywords ? '无搜索结果' : msg || '没有数据') + '</div>';\n        $((currentTab === 1 ? '.systemservice-container' : '.employee-container') + ' .list').html(html);\n    }\n    $loading.css('display', 'none');\n}\n\nfunction getStaffList(cb, append) {\n    index = append ? ++index : 1;\n    nomore = append ? nomore : false;\n    $('.employee-container .group').removeClass('group');\n    $loading.css('display', 'block');\n    qd.handle({\n        action: 'getStaffList',\n        params: {\n            current_page: index,\n            items_per_page: count,\n            keywords: keywords,\n            need_status: 1,\n            type: 1\n        },\n        success: function success(res) {\n            var data = res.data || {};\n            var records = data.list || [];\n            var $container = $('.employee-container .list');\n            if (keywords) {\n                records.map(function (item) {\n                    var name = item.name;\n                    item.name = highLight(name, keywords);\n                });\n            }\n            var html = render(ivrTpl)({\n                keywords: keywords,\n                isType: 'employees',\n                isConsult: true,\n                records: records\n            });\n            html = append ? $container.html() + html : html;\n            $container.html(html);\n\n            nomore = count * (index - 1) + records.length >= res.total;\n            cb && cb(records);\n        },\n        fail: function fail(err) {\n            $loading.css('display', 'none');\n            notice.error(err.msg || '搜索员工出错');\n        }\n    });\n}\n\n$('.list').bind('click', function (e) {\n    var $target = $(e.target);\n\n    if ($target.is('.btn_consult')) {\n        var vid = $target.prop('vid');\n        var name = $target.prop('name');\n        vid = parseInt(vid, 10) || vid;\n        consult(currentTab === 0 ? CONSULT_KFEXT : CONSULT_SYSTEM, vid, name);\n    } else if ($target.is('.expand')) {\n        var id = e.target.dataset.id;\n        var $liParent = $($target.findParent('LI'));\n        $liParent.toggleClass('is-expand');\n\n        if ($target.is('.loaded')) {\n            return;\n        }\n\n        qd.handle({\n            action: 'getStaffList',\n            params: {\n                current_page: 1,\n                items_per_page: count,\n                need_status: 1,\n                type: 1,\n                skill_group_id: id,\n                sort_type: 2\n            },\n            success: function success(res) {\n                var data = res.data || {};\n                var records = data.list || [];\n                var total = res.total;\n                var html = records.length ? render(ivrTpl)({\n                    isType: 'employees',\n                    isConsult: true,\n                    records: records,\n                    total: total,\n                    keywords: ''\n                }) : '<li class=\"is-empty\">该技能组下暂无空闲坐席</li>';\n                $target.addClass('loaded');\n                $liParent.find('.group-members').html(html);\n            },\n            fail: function fail(err) {\n                notice.error(err.msg || '加载员工列表出错');\n            }\n        });\n    }\n});\n\nvar $viewSpan = $('.view span');\n$viewSpan.bind('click', function () {\n    var viewType = $(this).is('.staff') ? 'staff' : 'group';\n    $viewSpan.removeClass('is-selected');\n    $(this).addClass('is-selected');\n    qd.setState('consutlViewType', viewType, false, true);\n    keywords && currentTab !== 1 ? getStaffList(onStaffLoaded) : getAgentList(onStaffLoaded);\n});\n\nvar el = ['employees', 'systemservice', 'outline'];\nvar currentTab = 0;\nfunction setTab(tab) {\n    var width = tab.clientWidth;\n    var left = tab.offsetLeft;\n    $('.pointer').css({\n        width: width,\n        transform: 'translate3d(' + left + 'px, 0, 0)'\n    });\n}\n$('.tab a').bind('click', function (e) {\n    var name = $(this).prop('name');\n    currentTab = ~~$(this).prop('index');\n    if (currentTab === 1) {\n        $loading = $sysLoading;\n    } else {\n        $loading = $emloading;\n    }\n    $('.tab').find('.is-selected').removeClass('is-selected');\n    $(this).addClass('is-selected');\n    setTab(this);\n    $('.container').css('display', 'none');\n    $('.' + el[currentTab]).css('display', 'block');\n    name !== 'outline' ? initStaff() : $res.focus();\n});\n\n$('.clear').bind('click', function () {\n    var el = $('.keywords').elems[0];\n    el.focus();\n    if (el.value === '') {\n        return;\n    }\n    el.value = keywords = '';\n\n    getAgentList(onStaffLoaded);\n});\n\n$('.keywords').bind('keypress', function (e) {\n    var str = $('.keywords').elems[0].value;\n    if (e.keyCode === 13 && keywords !== str) {\n        keywords = str;\n        getStaffList(onStaffLoaded);\n    }\n});\n\nqd._debug() && console.log('log from consult');\n\nqd.one('debug.consultFrame', function () {\n    console.log('consult page');\n});"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(59),o=n(18),a=r(o),s=n(24),l=r(s),c=n(577),u=r(c),d=n(578),f=r(d),p=n(579),h=r(p),g=n(26),m=r(g),v=n(27),b=function(e,t){return new a.default(l.default.call(this.stator,{name:"menuFrame",style:{width:240},autoHeight:".menu-container",data:e,script:h.default,cssText:u.default.toString(),html:(0,m.default)(v)+f.default,props:{ANSWER_TYPE:i.answerType}}),t)};t.default=b},function(e,t,n){t=e.exports=n(19)(!1),t.i(n(25),""),t.push([e.i,"h2 {\n  margin: 0;\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 1.5;\n  padding: 10px 15px 5px;\n  color: #262d3d;\n}\n.icon {\n  display: inline-block;\n  width: 16px;\n  overflow: hidden;\n  color: #a1abc2;\n}\n.icon svg {\n  width: 100%;\n}\n.icon.green:hover {\n  color: #01c480;\n}\na:hover .icon,\n.icon:hover {\n  color: #8490ae;\n}\n.drop {\n  overflow: hidden;\n  position: relative;\n  padding-right: 12px;\n}\n.drop .arrow {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 8px;\n  margin-left: 3px;\n}\n.icon.is-on,\n.text-stress {\n  color: #262d3d;\n}\n.text-hint {\n  color: #d4d8e1;\n}\n.green {\n  color: #00d48a;\n  border-color: #00d48a;\n}\n.red {\n  color: #f75559;\n}\n.blue {\n  color: #4a70ff;\n}\n.orange {\n  color: #ff8345;\n}\n.is-calling {\n  color: #a1abc2;\n}\n.is-calling h2 {\n  color: #f8f9fB;\n}\n.is-calling::-webkit-scrollbar-thumb,\n.is-calling ::-webkit-scrollbar-thumb {\n  background-color: #696c7c;\n}\n.is-calling::-webkit-scrollbar-thumb:hover,\n.is-calling ::-webkit-scrollbar-thumb:hover {\n  background-color: #50535f;\n}\n.is-calling .is-loading {\n  border: 2px solid #fff;\n  border-bottom-color: transparent;\n}\n.is-calling .text {\n  color: #a1abc2;\n}\n.is-calling .icon.is-on,\n.is-calling .text-stress {\n  color: #f8f9fB;\n}\n.is-calling .green {\n  color: #00cb83;\n  border-color: #00cb83;\n}\n.is-calling .red {\n  color: #e1464a;\n}\n.is-calling .blue {\n  color: #6283ff;\n}\n.is-calling.bg-main,\n.is-calling .bg-main {\n  background-position: 100% 50%;\n}\n.is-calling .bg-gap {\n  background-position: 100% 50%;\n}\n.is-calling .ck {\n  color: #f8f9fB;\n}\n.is-calling textarea,\n.is-calling input,\n.is-calling select,\n.is-calling .select,\n.is-calling .select .options {\n  border-color: #4a5264;\n  color: #f8f9fB;\n  background-color: #25283a;\n}\n.is-calling textarea:focus,\n.is-calling input:focus,\n.is-calling select:focus,\n.is-calling .select:focus,\n.is-calling .select .options:focus {\n  border-color: #8d96aa;\n}\n.is-calling textarea::placeholder,\n.is-calling input::placeholder,\n.is-calling select::placeholder,\n.is-calling .select::placeholder,\n.is-calling .select .options::placeholder {\n  color: #a1abc2;\n}\n.is-calling .select .options p:hover,\n.is-calling .select .options .selected {\n  background-color: #383a4a;\n}\n.is-calling .close {\n  color: #78849e;\n}\n.is-calling .close:hover {\n  color: #fff;\n}\n.is-calling input[type=checkbox] {\n  cursor: pointer;\n  position: relative;\n}\n.is-calling input[type=checkbox]::after {\n  position: absolute;\n  top: 0;\n  background-color: #1e2030;\n  color: #fff;\n  width: 14px;\n  height: 14px;\n  display: inline-block;\n  visibility: visible;\n  padding-left: 0px;\n  text-align: center;\n  content: ' ';\n  border-radius: 2px;\n  box-sizing: border-box;\n  border: 1px solid #4A5264;\n}\n.is-calling input[type=checkbox]:checked::after {\n  content: \"\";\n  border-color: #4A70FF;\n  background-color: #4A70FF;\n}\n.is-calling input[type=checkbox]:checked::before {\n  content: '';\n  position: absolute;\n  top: 1px;\n  left: 5px;\n  width: 3px;\n  height: 8px;\n  border: solid white;\n  border-width: 0 2px 2px 0;\n  transform: rotate(45deg);\n  z-index: 1;\n}\n.close {\n  position: absolute;\n  right: 0px;\n  top: 0px;\n  padding: 8px;\n  color: #a8abb3;\n}\n.close:hover {\n  color: #1e2300;\n}\n.close svg {\n  width: 14px;\n  height: 14px;\n}\n.bg-main {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #fff, #fff, #25283a, #25283a) left / cover;\n}\n.bg-gap {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #f4f7fb, #f4f7fb, #101328, #101328) left / cover;\n}\n.bgEaseIn {\n  background-position: 100% 50%;\n}\n.bgEaseOut {\n  background-position: 0% 50%;\n}\n.bg-main,\n.bg-gap {\n  background-size: 800% 800%;\n  animation-fill-mode: both;\n}\n@keyframes bgEaseIn {\n  0% {\n    background-position: 0% 50%;\n  }\n  100% {\n    background-position: 100% 50%;\n  }\n}\n@keyframes bgEaseOut {\n  0% {\n    background-position: 100% 50%;\n  }\n  100% {\n    background-position: 0% 50%;\n  }\n}\nbody {\n  margin: 0;\n  overflow: hidden;\n  font-size: 12px;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  color: #a1abc2;\n}\np {\n  margin: 0;\n}\ntextarea::placeholder,\ninput::placeholder {\n  color: #A1ABC2;\n}\n::-webkit-scrollbar {\n  width: 4px;\n  height: 8px;\n}\n::-webkit-scrollbar-thumb {\n  background-color: #f3f5fa;\n  border-radius: 8px;\n}\n::-webkit-scrollbar-thumb:hover {\n  background-color: #aaa;\n}\n::-webkit-scrollbar-track-piece {\n  background-color: transparent;\n}\nsvg {\n  fill: currentColor;\n}\na {\n  text-decoration: none;\n}\nul,\nli {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n.ck {\n  width: 9px;\n  height: 9px;\n  color: #262d3d;\n  position: absolute;\n  top: 50%;\n  right: 10px;\n  transform: translateY(-50%);\n  display: none;\n}\n.is-selected .ck {\n  display: inline-block;\n}\ninput,\ntextarea,\nselect,\n.select,\n.select .options {\n  font-size: 12px;\n  color: #262d3d;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  border-radius: 3px;\n  border: 1px solid #e1e6f0;\n  background-color: #fff;\n}\ninput:focus,\ntextarea:focus,\nselect:focus,\n.select:focus,\n.select .options:focus {\n  outline: 0;\n  border-color: #c5ccdb;\n}\nselect,\n.select,\n.select .options p {\n  padding: 0 5px;\n}\n.select {\n  min-height: 26px;\n  position: relative;\n  cursor: default;\n}\n.select .options {\n  position: absolute;\n  z-index: 1;\n  left: -1px;\n  top: 29px;\n  width: 100%;\n  max-height: 73px;\n  overflow: auto;\n}\n.select .options p:hover,\n.select .options p.selected {\n  background: #f1f5fb;\n}\n.select p {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.cls:after {\n  content: \"\";\n  font-size: 0;\n  display: block;\n  height: 0;\n  clear: both;\n  visibility: hidden;\n}\n.disabled {\n  pointer-events: none;\n  opacity: .3;\n}\n.hidden {\n  display: none!important;\n}\n.overlay {\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  background: rgba(255, 255, 255, 0.6);\n}\ninput::-webkit-outer-spin-button,\ninput::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n}\ninput[type=\"number\"] {\n  -moz-appearance: textfield;\n}\n.is-loading {\n  border-radius: 100%;\n  margin: 2px;\n  border: 2px solid #ccc;\n  border-bottom-color: transparent;\n  height: 12px;\n  width: 12px;\n  margin-top: -7px;\n  background: 0 0!important;\n  display: inline-block;\n  -webkit-animation: rotate .75s 0s linear infinite;\n  animation: rotate .75s 0s linear infinite;\n}\n@keyframes rotate {\n  0% {\n    -webkit-transform: rotate(0);\n    transform: rotate(0);\n  }\n  50% {\n    -webkit-transform: rotate(180deg);\n    transform: rotate(180deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n.marquee {\n  white-space: nowrap;\n  overflow: hidden;\n  width: 80px;\n  position: relative;\n}\n.marquee p {\n  overflow: hidden;\n  float: left;\n  animation: move linear 6s infinite;\n}\n.marquee span {\n  display: inline-block;\n  padding-left: 10px;\n}\n.marquee::before,\n.marquee::after {\n  position: absolute;\n  top: 0;\n  z-index: 1;\n  content: ' ';\n  width: 10px;\n  height: 100%;\n  animation: bgfadeIn linear 2s;\n}\n.marquee::before {\n  left: -2px;\n  background: linear-gradient(90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n.marquee::after {\n  right: -2px;\n  background: linear-gradient(-90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n@keyframes move {\n  0% {\n    transform: translateX(0);\n  }\n  100% {\n    transform: translateX(-50%);\n  }\n}\n.q-notice {\n  position: absolute;\n  width: 100%;\n  left: 0;\n  top: 0;\n  text-align: center;\n}\n.q-notice.is-auto {\n  pointer-events: none;\n  z-index: 10;\n}\n.q-notice.is-cover {\n  height: 100%;\n  background: rgba(255, 255, 255, 0.7);\n}\n.q-notice .item {\n  margin: 4px auto;\n}\n.q-notice .info {\n  pointer-events: initial;\n  min-width: 170px;\n  padding: 0 15px;\n  line-height: 29px;\n  height: 28px;\n  overflow: hidden;\n  white-space: nowrap;\n  display: inline-block;\n  color: rgba(255, 255, 255, 0.8);\n  background-color: #25283a;\n  box-shadow: 0px 2px 18px 2px rgba(172, 172, 172, 0.3);\n  border-radius: 2px;\n  position: relative;\n}\n.q-notice .info .icon-tip {\n  vertical-align: -3px;\n  margin-right: 2px;\n  width: 14px;\n}\n.q-notice .info [data-action] * {\n  pointer-events: none;\n}\n.q-notice .is-error .info {\n  color: #fff;\n  background-color: #f75559;\n}\n.q-notice .is-success .info {\n  color: #fff;\n  background-color: #00cb83;\n}\n.q-notice .is-close-able .info {\n  text-align: left;\n}\n.q-notice .is-close-able .btn-close {\n  width: 12px;\n  height: 12px;\n  color: #fff;\n  margin: 8px -5px 0 10px;\n  float: right;\n}\n.q-notice .is-close-able .btn-close:hover {\n  opacity: .8;\n}\n.q-notice .is-warning .info {\n  color: rgba(0, 1, 10, 0.93);\n  border: 0.5px solid #FFEBDA;\n  background-color: #FFF8F0;\n  box-shadow: 0px 16px 32px rgba(18, 19, 25, 0.16), 0px 0px 8px rgba(18, 19, 25, 0.08), 0px 0px 1px rgba(18, 19, 25, 0.08);\n}\n.ringing {\n  animation: ringing 2s ease;\n  animation-fill-mode: both;\n  animation-iteration-count: infinite;\n}\n@keyframes ringing {\n  10% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  15% {\n    -webkit-transform: rotate(-15deg);\n    transform: rotate(-15deg);\n  }\n  20% {\n    -webkit-transform: rotate(15deg);\n    transform: rotate(15deg);\n  }\n  25% {\n    -webkit-transform: rotate(-10deg);\n    transform: rotate(-10deg);\n    color: #2af2ac;\n  }\n  30% {\n    -webkit-transform: rotate(5deg);\n    transform: rotate(5deg);\n    color: #2af2ac;\n  }\n  35% {\n    -webkit-transform: rotate(-5deg);\n    transform: rotate(-5deg);\n  }\n  40% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n}\n.ctimer {\n  border-radius: 50%;\n  height: 40px;\n  overflow: hidden;\n  position: relative;\n  width: 40px;\n  background: rgba(255, 255, 255, 0.3);\n}\n.ctimer svg {\n  position: absolute;\n  left: 0;\n  z-index: 2;\n}\n.ctimer .hand {\n  position: absolute;\n  top: 0;\n  height: 100%;\n  overflow: hidden;\n  width: 50%;\n}\n.ctimer .hand span {\n  border: 20px solid rgba(255, 255, 255, 0.3);\n  border-bottom-color: transparent;\n  border-left-color: transparent;\n  border-radius: 50%;\n  display: block;\n  height: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  transform: rotate(225deg);\n  width: 0;\n}\n.ctimer .hand-left {\n  left: 0;\n  transform: rotate(180deg);\n}\n.ctimer .hand-right {\n  right: 0;\n}\n.ctimer .hand span {\n  animation-duration: var(--post-edit-time);\n  animation-iteration-count: 1;\n  animation-timing-function: linear;\n  animation-fill-mode: both;\n}\n.ctimer .hand-left span {\n  animation-name: spinleft;\n}\n.ctimer .hand-right span {\n  animation-name: spinright;\n}\n@keyframes spinleft {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(225deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\n@keyframes spinright {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(405deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\nbody {\n  background: none;\n}\n.menu-container {\n  background-color: #fff;\n  user-select: none;\n  -webkit-user-select: none;\n}\n.menu-container .mtag {\n  display: inline-block;\n  width: 36px;\n  height: 16px;\n  overflow: hidden;\n  vertical-align: -4px;\n  margin-right: 10px;\n  color: #fff;\n}\n.menu-container .header {\n  padding: 20px 20px 13px 66px;\n  overflow: hidden;\n  position: relative;\n  color: #a8abb3;\n  min-height: 36px;\n}\n.menu-container .header.single .title {\n  line-height: 36px;\n}\n.menu-container .header .name {\n  font-size: 16px;\n}\n.menu-container .header .tag {\n  display: inline-block;\n  white-space: nowrap;\n  line-height: 16px;\n  padding: 0 5px;\n  color: #fff;\n  background-color: #c5ccdb;\n  transform: scale(0.85);\n}\n.menu-container .header p {\n  line-height: 18px;\n}\n.menu-container .header img {\n  position: absolute;\n  left: 20px;\n  top: 20px;\n  border-radius: 100%;\n  background-color: #f1f1f1;\n}\n.menu-container .menu-item-container {\n  padding: 8px 0;\n  margin: 0 20px;\n  border-top: solid 1px #edf0f7;\n}\n.menu-container .menu-item-container .hide {\n  display: none;\n}\n.menu-container .menu-item-container .question {\n  display: inline-block;\n  width: 12px;\n  height: 12px;\n  vertical-align: -2px;\n  color: #1e2330;\n}\n.menu-container .menu-item-container .menu-item {\n  height: 30px;\n  padding: 0 20px 0 20px;\n  margin: 0 -20px;\n  line-height: 30px;\n  position: relative;\n}\n.menu-container .menu-item-container .menu-item:hover {\n  background: #f1f5fb;\n  cursor: pointer;\n}\n.menu-container .menu-item-container .menu-item .text-stress {\n  display: inline-block;\n  vertical-align: middle;\n}\n.menu-container .menu-item-container .menu-item .ck {\n  right: 20px;\n}\n.menu-container .menu-item-container .mic .icon,\n.menu-container .menu-item-container .prefix {\n  float: left;\n  margin: 6px 5px 0 0;\n  color: #f8f9fB;\n}\n.menu-container .asr .icon {\n  color: #C5CCDB;\n}\n.menu-container.is-calling .mtag {\n  color: #333;\n  opacity: .5;\n}\n.menu-container.is-calling .header .tag {\n  color: #101328;\n  background-color: #7e879a;\n}\n.menu-container.is-calling .header p {\n  color: #a1abc2;\n}\n.menu-container.is-calling .menu-item-container {\n  border-top-color: #4A5264;\n}\n.menu-container.is-calling .menu-item-container .menu-item {\n  color: #f8f9fB;\n}\n.menu-container.is-calling .menu-item-container .menu-item:hover {\n  background: #383a4a;\n}\n.menu-container.is-calling .menu-item-container .menu-item.is-selected .text-stress {\n  color: #fff;\n}\n",""])},function(e,t){e.exports='<%\n    var status = status || \'normal\';\n    var isNormalState = status === \'normal\' || status === \'over\';\n    var receptions = receptions || [];\n    var uin = kfext || callKfext;\n    var receptionsStr = receptions.join(\'，\');\n    var avatar = avatar || `https://q2.qlogo.cn/g?b=qq&nk=${uin}&s=100`;\n%>\n<div class="menu-container bg-main <%=isNormalState ? \'\' : \'is-calling\'%>">\n    <div class="header <%=receptionsStr ? \'\' : \'single\'%>">\n        <img width="36" height="36" src="<%=avatar%>" />\n        <p class="title">\n            <span class="text-stress name" title="<%=name%>"><%=name%></span>\n            <%if(voiceNumber){%>\n            <span class="tag" title="语音播报工号"><%=voiceNumber%></span>\n            <%}%>\n        </p>\n        <%if (receptionsStr) {%>\n        <p style="margin-top:5px"><%=receptionsStr%></p>\n        <%}%>\n    </div>\n    <ul class="answer">\n        <li class="menu-item-container tel-type">\n            <div class="menu-item voip-tel <%=!isHardwareLogin && answerType == 2 ? \'is-selected\' : \'\'%>" val="2">\n                <span class="mtag"><svg viewBox="0 0 28 14"><use xlink:href="#voip"></use></svg></span><span class="text-stress">电脑音频</span>\n                <span class="ck"><svg viewBox="0 0 12 12"><use xlink:href="#checked"></use></svg></span>\n            </div>\n            <div class="menu-item pstn-tel <%=!isHardwareLogin && answerType == 1 ? \'is-selected\' : \'\'%>" val="1">\n                <span class="mtag"><svg viewBox="0 0 28 14"><use xlink:href="#pstn"></use></svg></span><span class="text-stress">手机接听</span>\n                <span class="ck"><svg viewBox="0 0 12 12"><use xlink:href="#checked"></use></svg></span>\n            </div>\n            <%if(mode !== \'sip\' && mode !== \'webrtc\'){%>\n            <div class="menu-item phone-tel hide <%=isHardwareLogin ? \'is-selected\' : \'\'%>" val="4">\n                <span class="mtag"><svg viewBox="0 0 28 14"><use xlink:href="#ip"></use></svg></span><span class="text-stress">座机</span>\n                <span class="ck"><svg viewBox="0 0 12 12"><use xlink:href="#checked"></use></svg></span>\n            </div>\n            <%}%>\n        </li>\n        <li class="menu-item-container">\n            <div class="menu-item mic" val="10">\n                <span class="icon"><svg viewBox="0 0 12 12"><use xlink:href="#mic"></use></svg></span>\n                <span class="text-stress">音频输入输出设置</span>\n            </div>\n        </li>\n        <%if(withAsr){%>\n        <li class="menu-item-container asr">\n            <div class="menu-item <%=asrAuto ? \'is-selected\' : \'\'%>" val="1">\n                <span class="icon prefix"><svg viewBox="0 0 12 12"><use xlink:href="#asr-auto"></use></svg></span>\n                <span class="text-stress">通话自动开启实时转文字</span>\n                <span class="ck"><svg viewBox="0 0 12 12"><use xlink:href="#checked"></use></svg></span>\n            </div>\n            <div class="menu-item <%=asrAuto ? \'\' : \'is-selected\'%>" val="0">\n                <span class="icon prefix"><svg viewBox="0 0 12 12"><use xlink:href="#asr-manual"></use></svg></span>\n                <span class="text-stress">通话手动开启实时转文字</span>\n                <span class="ck"><svg viewBox="0 0 12 12"><use xlink:href="#checked"></use></svg></span>\n            </div>\n        </li>\n        <%}%>\n        <li class="menu-item-container logging">\n            <div class="menu-item reset" val="1">\n                <span class="text-stress">重置登录状态</span>\n            </div>\n            <div class="menu-item text-stress logout" val="2">退出登录</div>\n        </li>\n    </ul>\n</div>\n'},function(e,t){e.exports="'use strict';\n\nvar qd = window.qd;\nvar ANSWER_TYPE = window.ANSWER_TYPE;\nqd._debug() && console.log('log from menuFrame');\nvar options = qd._getOptions();\n\nvar FEEDBACK = 0;\nvar RESET = 1;\nvar LOGOUT = 2;\n\nvar hardware = qd.getState().hardware;\n$('.phone-tel')[hardware ? 'removeClass' : 'addClass']('hide');\n\nfunction onShow() {\n    var state = qd.getState();\n    var kfext = state.callKfext;\n    var isHardwareLogin = state.isHardwareLogin;\n    selected(isHardwareLogin ? ANSWER_TYPE.hardware : qd.getState().answerType);\n}\n\nfunction onHide() {\n    qd.trigger('_menuFrameHide');\n}\n\nfunction selected(type) {\n    var $types = $('.tel-type').find('.menu-item');\n    var index = void 0;\n\n    type = type === 3 ? 2 : type;\n    $('.tel-type .is-selected').removeClass('is-selected');\n    switch (type) {\n        case ANSWER_TYPE.pstn:\n            index = 1;\n            break;\n        case ANSWER_TYPE.voip:\n            index = 0;\n            break;\n        case ANSWER_TYPE.hardware:\n            index = 2;\n    }\n    index !== undefined && $types.eq(index).addClass('is-selected');\n}\n\n$('.menu-item-container.tel-type .menu-item').bind('click', function (e) {\n    var val = parseInt($(this).prop('val'), 10);\n    var el = this.parentElement;\n\n    if ($(this).is('.is-selected')) {\n        return false;\n    }\n\n    var state = qd.getState();\n    var isHardwareLogin = state.isHardwareLogin;\n    var tempType = state.answerType;\n\n    if (val === ANSWER_TYPE.hardware) {\n        qd.setHardwareMode({\n            is_hardware: 1\n        });\n        qd.hidePage('menuFrame');\n        return;\n    }\n\n    if (isHardwareLogin) {\n        qd.setHardwareMode({\n            is_hardware: 0,\n            success: changeAnswerType\n        });\n        return;\n    }\n\n    changeAnswerType();\n\n    function changeAnswerType() {\n        el.classList.add('disabled');\n        qd.changeAnswerType({\n            answer_type: val,\n            success: onSetSuccess,\n            fail: onSetError\n        });\n    }\n\n    function onSetSuccess() {\n        var isHardwareLogin = state.isHardwareLogin;\n        el.classList.remove('disabled');\n        if (isHardwareLogin) {\n            qd.setHardwareMode({\n                is_hardware: 0\n            });\n        }\n        qd.setState('answerType', val);\n        selected(val);\n    }\n\n    function onSetError(err) {\n        el.classList.remove('disabled');\n        selected(tempType);\n        qd.trigger('_showTip', err.msg || '更改电话类型失败');\n    }\n});\n\n$('.menu-item-container.logging .menu-item').bind('click', function (e) {\n    var action = parseInt($(this).prop('val'), 10);\n\n    var kfext = qd.getState().callKfext;\n\n    switch (action) {\n        case FEEDBACK:\n            qd.reportIssue({\n                kfext: kfext\n            });\n            break;\n        case RESET:\n            qd.agentReset({\n                kfext: kfext\n            });\n            break;\n        case LOGOUT:\n            qd.logout({\n                kfext: kfext\n            });\n            break;\n    }\n\n    qd.hidePage('menuFrame');\n});\n\n$('.mic').bind('click', function (e) {\n    var isCalling = qd.isCallingState();\n    var mode = qd._getOptions().mode;\n    if (isCalling && mode === 'webrtc') {\n        qd.showTip('当前正在通话中，请电话结束后使用');\n    } else {\n        qd.showPage({\n            name: 'detectFrame'\n        });\n    }\n    qd.hidePage('menuFrame');\n});\n\n$('.asr .menu-item').bind('click', function (e) {\n    if ($(this).is('.is-selected')) {\n        return false;\n    }\n\n    var auto = parseInt($(this).prop('val'), 10);\n    qd.setState('asrAuto', auto, false, true);\n    $('.asr .is-selected').removeClass('is-selected');\n    $(this).addClass('is-selected');\n});\n\nqd.one('answerTypeChange.menuFrame', function (e, res) {\n    var type = res.AnswerType;\n    selected(type);\n});\n\nqd.one('_syncAnswerType.menuFrame', function (e, answerType) {\n    selected(answerType);\n});\n\nqd.one('_syncHardwareState.menuFrame', function (e, isHardwareLogin) {\n    isHardwareLogin && selected(ANSWER_TYPE.hardware);\n});\n\nqd.one('debug.menuFrame', function () {\n    console.log('menu page');\n});"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(8),o=r(i),a=n(18),s=r(a),l=n(24),c=r(l),u=n(581),d=r(u),f=n(582),p=r(f),h=n(583),g=r(h),m=n(584),v=r(m),b=n(26),_=r(b),y=n(101),w=n(27);(0,y.setPositionHook)("restFrame",function(e){var t=this.stator.getState().isCollapsed;return(0,o.default)({},e,t?{offsetX:-50}:{})});var x=function(e,t){e.withoutAutoAnswer=this.stator._getOptions("withoutAutoAnswer"),e.disStatus=this.stator.getDisposableStatus();var n=c.default.call(this.stator,{name:"restFrame",style:{width:200,background:"#fff"},autoHeight:".rest-info-container",data:e,script:v.default,cssText:d.default.toString(),html:(0,_.default)(w)+p.default,props:{restTpl:g.default}});return new s.default(n,t)};t.default=x},function(e,t,n){t=e.exports=n(19)(!1),t.i(n(25),""),t.push([e.i,"h2 {\n  margin: 0;\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 1.5;\n  padding: 10px 15px 5px;\n  color: #262d3d;\n}\n.icon {\n  display: inline-block;\n  width: 16px;\n  overflow: hidden;\n  color: #a1abc2;\n}\n.icon svg {\n  width: 100%;\n}\n.icon.green:hover {\n  color: #01c480;\n}\na:hover .icon,\n.icon:hover {\n  color: #8490ae;\n}\n.drop {\n  overflow: hidden;\n  position: relative;\n  padding-right: 12px;\n}\n.drop .arrow {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 8px;\n  margin-left: 3px;\n}\n.icon.is-on,\n.text-stress {\n  color: #262d3d;\n}\n.text-hint {\n  color: #d4d8e1;\n}\n.green {\n  color: #00d48a;\n  border-color: #00d48a;\n}\n.red {\n  color: #f75559;\n}\n.blue {\n  color: #4a70ff;\n}\n.orange {\n  color: #ff8345;\n}\n.is-calling {\n  color: #a1abc2;\n}\n.is-calling h2 {\n  color: #f8f9fB;\n}\n.is-calling::-webkit-scrollbar-thumb,\n.is-calling ::-webkit-scrollbar-thumb {\n  background-color: #696c7c;\n}\n.is-calling::-webkit-scrollbar-thumb:hover,\n.is-calling ::-webkit-scrollbar-thumb:hover {\n  background-color: #50535f;\n}\n.is-calling .is-loading {\n  border: 2px solid #fff;\n  border-bottom-color: transparent;\n}\n.is-calling .text {\n  color: #a1abc2;\n}\n.is-calling .icon.is-on,\n.is-calling .text-stress {\n  color: #f8f9fB;\n}\n.is-calling .green {\n  color: #00cb83;\n  border-color: #00cb83;\n}\n.is-calling .red {\n  color: #e1464a;\n}\n.is-calling .blue {\n  color: #6283ff;\n}\n.is-calling.bg-main,\n.is-calling .bg-main {\n  background-position: 100% 50%;\n}\n.is-calling .bg-gap {\n  background-position: 100% 50%;\n}\n.is-calling .ck {\n  color: #f8f9fB;\n}\n.is-calling textarea,\n.is-calling input,\n.is-calling select,\n.is-calling .select,\n.is-calling .select .options {\n  border-color: #4a5264;\n  color: #f8f9fB;\n  background-color: #25283a;\n}\n.is-calling textarea:focus,\n.is-calling input:focus,\n.is-calling select:focus,\n.is-calling .select:focus,\n.is-calling .select .options:focus {\n  border-color: #8d96aa;\n}\n.is-calling textarea::placeholder,\n.is-calling input::placeholder,\n.is-calling select::placeholder,\n.is-calling .select::placeholder,\n.is-calling .select .options::placeholder {\n  color: #a1abc2;\n}\n.is-calling .select .options p:hover,\n.is-calling .select .options .selected {\n  background-color: #383a4a;\n}\n.is-calling .close {\n  color: #78849e;\n}\n.is-calling .close:hover {\n  color: #fff;\n}\n.is-calling input[type=checkbox] {\n  cursor: pointer;\n  position: relative;\n}\n.is-calling input[type=checkbox]::after {\n  position: absolute;\n  top: 0;\n  background-color: #1e2030;\n  color: #fff;\n  width: 14px;\n  height: 14px;\n  display: inline-block;\n  visibility: visible;\n  padding-left: 0px;\n  text-align: center;\n  content: ' ';\n  border-radius: 2px;\n  box-sizing: border-box;\n  border: 1px solid #4A5264;\n}\n.is-calling input[type=checkbox]:checked::after {\n  content: \"\";\n  border-color: #4A70FF;\n  background-color: #4A70FF;\n}\n.is-calling input[type=checkbox]:checked::before {\n  content: '';\n  position: absolute;\n  top: 1px;\n  left: 5px;\n  width: 3px;\n  height: 8px;\n  border: solid white;\n  border-width: 0 2px 2px 0;\n  transform: rotate(45deg);\n  z-index: 1;\n}\n.close {\n  position: absolute;\n  right: 0px;\n  top: 0px;\n  padding: 8px;\n  color: #a8abb3;\n}\n.close:hover {\n  color: #1e2300;\n}\n.close svg {\n  width: 14px;\n  height: 14px;\n}\n.bg-main {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #fff, #fff, #25283a, #25283a) left / cover;\n}\n.bg-gap {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #f4f7fb, #f4f7fb, #101328, #101328) left / cover;\n}\n.bgEaseIn {\n  background-position: 100% 50%;\n}\n.bgEaseOut {\n  background-position: 0% 50%;\n}\n.bg-main,\n.bg-gap {\n  background-size: 800% 800%;\n  animation-fill-mode: both;\n}\n@keyframes bgEaseIn {\n  0% {\n    background-position: 0% 50%;\n  }\n  100% {\n    background-position: 100% 50%;\n  }\n}\n@keyframes bgEaseOut {\n  0% {\n    background-position: 100% 50%;\n  }\n  100% {\n    background-position: 0% 50%;\n  }\n}\nbody {\n  margin: 0;\n  overflow: hidden;\n  font-size: 12px;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  color: #a1abc2;\n}\np {\n  margin: 0;\n}\ntextarea::placeholder,\ninput::placeholder {\n  color: #A1ABC2;\n}\n::-webkit-scrollbar {\n  width: 4px;\n  height: 8px;\n}\n::-webkit-scrollbar-thumb {\n  background-color: #f3f5fa;\n  border-radius: 8px;\n}\n::-webkit-scrollbar-thumb:hover {\n  background-color: #aaa;\n}\n::-webkit-scrollbar-track-piece {\n  background-color: transparent;\n}\nsvg {\n  fill: currentColor;\n}\na {\n  text-decoration: none;\n}\nul,\nli {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n.ck {\n  width: 9px;\n  height: 9px;\n  color: #262d3d;\n  position: absolute;\n  top: 50%;\n  right: 10px;\n  transform: translateY(-50%);\n  display: none;\n}\n.is-selected .ck {\n  display: inline-block;\n}\ninput,\ntextarea,\nselect,\n.select,\n.select .options {\n  font-size: 12px;\n  color: #262d3d;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  border-radius: 3px;\n  border: 1px solid #e1e6f0;\n  background-color: #fff;\n}\ninput:focus,\ntextarea:focus,\nselect:focus,\n.select:focus,\n.select .options:focus {\n  outline: 0;\n  border-color: #c5ccdb;\n}\nselect,\n.select,\n.select .options p {\n  padding: 0 5px;\n}\n.select {\n  min-height: 26px;\n  position: relative;\n  cursor: default;\n}\n.select .options {\n  position: absolute;\n  z-index: 1;\n  left: -1px;\n  top: 29px;\n  width: 100%;\n  max-height: 73px;\n  overflow: auto;\n}\n.select .options p:hover,\n.select .options p.selected {\n  background: #f1f5fb;\n}\n.select p {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.cls:after {\n  content: \"\";\n  font-size: 0;\n  display: block;\n  height: 0;\n  clear: both;\n  visibility: hidden;\n}\n.disabled {\n  pointer-events: none;\n  opacity: .3;\n}\n.hidden {\n  display: none!important;\n}\n.overlay {\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  background: rgba(255, 255, 255, 0.6);\n}\ninput::-webkit-outer-spin-button,\ninput::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n}\ninput[type=\"number\"] {\n  -moz-appearance: textfield;\n}\n.is-loading {\n  border-radius: 100%;\n  margin: 2px;\n  border: 2px solid #ccc;\n  border-bottom-color: transparent;\n  height: 12px;\n  width: 12px;\n  margin-top: -7px;\n  background: 0 0!important;\n  display: inline-block;\n  -webkit-animation: rotate .75s 0s linear infinite;\n  animation: rotate .75s 0s linear infinite;\n}\n@keyframes rotate {\n  0% {\n    -webkit-transform: rotate(0);\n    transform: rotate(0);\n  }\n  50% {\n    -webkit-transform: rotate(180deg);\n    transform: rotate(180deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n.marquee {\n  white-space: nowrap;\n  overflow: hidden;\n  width: 80px;\n  position: relative;\n}\n.marquee p {\n  overflow: hidden;\n  float: left;\n  animation: move linear 6s infinite;\n}\n.marquee span {\n  display: inline-block;\n  padding-left: 10px;\n}\n.marquee::before,\n.marquee::after {\n  position: absolute;\n  top: 0;\n  z-index: 1;\n  content: ' ';\n  width: 10px;\n  height: 100%;\n  animation: bgfadeIn linear 2s;\n}\n.marquee::before {\n  left: -2px;\n  background: linear-gradient(90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n.marquee::after {\n  right: -2px;\n  background: linear-gradient(-90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n@keyframes move {\n  0% {\n    transform: translateX(0);\n  }\n  100% {\n    transform: translateX(-50%);\n  }\n}\n.q-notice {\n  position: absolute;\n  width: 100%;\n  left: 0;\n  top: 0;\n  text-align: center;\n}\n.q-notice.is-auto {\n  pointer-events: none;\n  z-index: 10;\n}\n.q-notice.is-cover {\n  height: 100%;\n  background: rgba(255, 255, 255, 0.7);\n}\n.q-notice .item {\n  margin: 4px auto;\n}\n.q-notice .info {\n  pointer-events: initial;\n  min-width: 170px;\n  padding: 0 15px;\n  line-height: 29px;\n  height: 28px;\n  overflow: hidden;\n  white-space: nowrap;\n  display: inline-block;\n  color: rgba(255, 255, 255, 0.8);\n  background-color: #25283a;\n  box-shadow: 0px 2px 18px 2px rgba(172, 172, 172, 0.3);\n  border-radius: 2px;\n  position: relative;\n}\n.q-notice .info .icon-tip {\n  vertical-align: -3px;\n  margin-right: 2px;\n  width: 14px;\n}\n.q-notice .info [data-action] * {\n  pointer-events: none;\n}\n.q-notice .is-error .info {\n  color: #fff;\n  background-color: #f75559;\n}\n.q-notice .is-success .info {\n  color: #fff;\n  background-color: #00cb83;\n}\n.q-notice .is-close-able .info {\n  text-align: left;\n}\n.q-notice .is-close-able .btn-close {\n  width: 12px;\n  height: 12px;\n  color: #fff;\n  margin: 8px -5px 0 10px;\n  float: right;\n}\n.q-notice .is-close-able .btn-close:hover {\n  opacity: .8;\n}\n.q-notice .is-warning .info {\n  color: rgba(0, 1, 10, 0.93);\n  border: 0.5px solid #FFEBDA;\n  background-color: #FFF8F0;\n  box-shadow: 0px 16px 32px rgba(18, 19, 25, 0.16), 0px 0px 8px rgba(18, 19, 25, 0.08), 0px 0px 1px rgba(18, 19, 25, 0.08);\n}\n.ringing {\n  animation: ringing 2s ease;\n  animation-fill-mode: both;\n  animation-iteration-count: infinite;\n}\n@keyframes ringing {\n  10% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  15% {\n    -webkit-transform: rotate(-15deg);\n    transform: rotate(-15deg);\n  }\n  20% {\n    -webkit-transform: rotate(15deg);\n    transform: rotate(15deg);\n  }\n  25% {\n    -webkit-transform: rotate(-10deg);\n    transform: rotate(-10deg);\n    color: #2af2ac;\n  }\n  30% {\n    -webkit-transform: rotate(5deg);\n    transform: rotate(5deg);\n    color: #2af2ac;\n  }\n  35% {\n    -webkit-transform: rotate(-5deg);\n    transform: rotate(-5deg);\n  }\n  40% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n}\n.ctimer {\n  border-radius: 50%;\n  height: 40px;\n  overflow: hidden;\n  position: relative;\n  width: 40px;\n  background: rgba(255, 255, 255, 0.3);\n}\n.ctimer svg {\n  position: absolute;\n  left: 0;\n  z-index: 2;\n}\n.ctimer .hand {\n  position: absolute;\n  top: 0;\n  height: 100%;\n  overflow: hidden;\n  width: 50%;\n}\n.ctimer .hand span {\n  border: 20px solid rgba(255, 255, 255, 0.3);\n  border-bottom-color: transparent;\n  border-left-color: transparent;\n  border-radius: 50%;\n  display: block;\n  height: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  transform: rotate(225deg);\n  width: 0;\n}\n.ctimer .hand-left {\n  left: 0;\n  transform: rotate(180deg);\n}\n.ctimer .hand-right {\n  right: 0;\n}\n.ctimer .hand span {\n  animation-duration: var(--post-edit-time);\n  animation-iteration-count: 1;\n  animation-timing-function: linear;\n  animation-fill-mode: both;\n}\n.ctimer .hand-left span {\n  animation-name: spinleft;\n}\n.ctimer .hand-right span {\n  animation-name: spinright;\n}\n@keyframes spinleft {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(225deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\n@keyframes spinright {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(405deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\n.rest-info-container {\n  user-select: none;\n  -webkit-user-select: none;\n  padding: 10px 0;\n}\n.rest-info-container .tip {\n  padding: 0 20px;\n  margin-bottom: 5px;\n}\n.rest-info-container .status-list {\n  max-height: 300px;\n  overflow: auto;\n}\n.rest-info-container .status-list .ck {\n  right: 15px;\n}\n.rest-info-container .rest-list-item,\n.rest-info-container .auto-answer {\n  height: 30px;\n  line-height: 30px;\n  padding: 0 35px 0 20px;\n  position: relative;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.rest-info-container .rest-list-item:hover,\n.rest-info-container .auto-answer:hover {\n  cursor: pointer;\n  background: #f1f5fb;\n}\n.rest-info-container .rest-list-item .icon,\n.rest-info-container .auto-answer .icon {\n  vertical-align: -4px;\n  margin-right: 5px;\n}\n.rest-info-container .switch-icon {\n  cursor: pointer;\n  display: inline-block;\n  width: 26px;\n  height: 16px;\n  border-radius: 10px;\n  background: #d4d8e1;\n  position: absolute;\n  top: 50%;\n  right: 15px;\n  transform: translate3d(0, -50%, 0);\n  -webkit-transform: translate3d(0, -50%, 0);\n}\n.rest-info-container .switch-icon::before {\n  position: absolute;\n  display: block;\n  content: '';\n  bottom: 3px;\n  left: 3px;\n  cursor: pointer;\n  background-color: #fff;\n  height: 10px;\n  width: 10px;\n  border-radius: 50%;\n  transition: all 0.4s ease;\n  transform: translate3d(0, 0, 0);\n  -webkit-transform: translate3d(0, 0, 0);\n}\n.rest-info-container .switch-icon.is-on {\n  background: #6283ff;\n}\n.rest-info-container .switch-icon.is-on::before {\n  transform: translate3d(10px, 0, 0);\n  -webkit-transform: translate3d(10px, 0, 0);\n}\n.rest-info-container .switch-icon.is-disabled {\n  pointer-events: none;\n  opacity: .5;\n}\n.rest-info-container.is-calling .rest-list-item:hover,\n.rest-info-container.is-calling .auto-answer:hover {\n  background-color: #383a4a;\n}\n.rest-info-container.is-calling .switch-icon {\n  background-color: #808798;\n}\n.rest-info-container.is-calling .switch-icon.is-on {\n  background: #6283ff;\n}\n.rest-info-container.is-calling .tip {\n  color: rgba(217, 226, 252, 0.51);\n}\n",""])},function(e,t){e.exports='<%\n    var status = status || \'normal\';\n    var isNormalState = status === \'normal\' || status === \'over\';\n    var sId = isNormalState ? ccStatus : disStatus;\n%>\n<div class="rest-info-container bg-main <%=isNormalState ? \'\' : \'is-calling\'%>">\n    <%if (!isNormalState) {%>\n    <div class="tip">设置通话结束后的状态：</div>\n    <%}%>\n    <div class="status-list">\n        <ul class="rest-list">\n            <li data-id="1" class="rest-list-item <%=1 === sId ? \'is-selected\' : \'\'%>">\n                <span class="icon"><svg class="green" viewBox="0 0 12 12"><use xlink:href="#idle"></use></svg></span>\n                空闲\n                <span class="ck"><svg viewBox="0 0 12 12"><use xlink:href="#checked"></use></svg></span>\n            </li>\n            <li data-id="0" class="rest-list-item <%=0 === sId ? \'is-selected\' : \'\'%>">\n                <span class="icon"><svg class="red" viewBox="0 0 12 12"><use xlink:href="#busy"></use></svg></span>\n                忙碌\n                <span class="ck"><svg viewBox="0 0 12 12"><use xlink:href="#checked"></use></svg></span>\n            </li>\n        </ul>\n        <div id="list"></div>\n    </div>\n\n    <%if (withoutAutoAnswer !== true && isNormalState) {%>\n    <div data-icon="auto-answer" class="auto-answer">\n        <span class="icon"><svg class="green" viewBox="0 0 12 12"><use xlink:href="#auto-answer"></use></svg></span>\n        自动接听\n        <span class="switch-icon <%= autoAnswer ? \'is-on\' : \'\'%>"></span>\n    </div>\n    <%}%>\n</div>\n'},function(e,t){e.exports='<%\n    var status = status || \'normal\';\n    var isNormalState = status === \'normal\' || status === \'over\';\n    var sId = isNormalState ? restId : disStatus;\n\n    restList = restList || [];\n    if (restList.length) {\n%>\n<ul class="rest-list">\n<% for (var i = 0; i < restList.length; i++) {\n    var item = restList[i];\n%>\n    <li data-id="<%=item.id%>" class="rest-list-item <%=item.id === sId ? \'is-selected\' : \'\'%>">\n        <span class="icon"><svg class="blue" viewBox="0 0 12 12"><use xlink:href="#rest"></use></svg></span>\n        <%=item.name%>\n        <span class="ck"><svg viewBox="0 0 12 12"><use xlink:href="#checked"></use></svg></span>\n    </li>\n<%}%>\n</ul>\n<%}%>\n'},function(e,t){e.exports="'use strict';\n\nvar qd = window.qd;\nvar render = window.render;\nvar restTpl = window.restTpl;\n\nsetTimeout(function () {\n    qd._debug() && console.log('log from restFrame');\n}, 1000);\n\nvar $autoAnswer = $('.switch-icon');\n\nfunction onShow() {\n    var state = qd.getState();\n    var kfext = state.callKfext;\n    renderRest(state.restList || []);\n\n    qd.getRestList({\n        kfext: kfext,\n        cache: 30,\n        success: function success(res) {\n            var restList = res.list || [];\n            qd.setState('restList', restList);\n            renderRest(restList);\n        }\n    });\n}\n\nfunction renderRest(list) {\n    var state = qd.getState();\n    state.disStatus = qd.getDisposableStatus();\n    var html = render(restTpl)(state);\n    $('#list').html(html);\n    window.onRefresh();\n}\n\nfunction bindEvents() {\n    $('.status-list').bind('click', function (e) {\n        var $dom = $(e.target);\n        if ($dom.hasClass('is-selected')) {\n            return;\n        }\n        if (e.target && e.target.nodeName.toUpperCase() === 'LI') {\n            var name = e.target.innerText.replace(/\\s+/, '');\n            qd.trigger('_setAgentStatus', [parseInt(e.target.dataset.id, 10), name]);\n            qd.hidePage();\n        }\n    });\n    $('.auto-answer').bind('click', function () {\n        var kfext = qd.getState('callKfext');\n        var bAuto = qd.getState('autoAnswer') ? 0 : 1;\n        $autoAnswer.toggleClass('is-on').addClass('is-disabled');\n        qd.setAutoAnswer({\n            kfext: kfext,\n            status: bAuto,\n            fail: function fail() {\n                $autoAnswer.toggleClass('is-on');\n                notice.error('\\u81EA\\u52A8\\u63A5\\u542C' + (bAuto ? '开启' : '关闭') + '\\u5931\\u8D25');\n            },\n            complete: function complete() {\n                $autoAnswer.removeClass('is-disabled');\n            }\n        });\n    });\n}\nbindEvents();\n\nfunction onAutoAnswerChange(e, res) {\n    var bAuto = !!res.status;\n    $autoAnswer[bAuto ? 'addClass' : 'removeClass']('is-on');\n}\n\nqd.one('autoAnswerChange.restFrame', onAutoAnswerChange);"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(18),o=r(i),a=n(24),s=r(a),l=n(586),c=r(l),u=n(260),d=r(u),f=n(587),p=r(f),h=n(26),g=r(h),m=n(27),v=function(e,t){var n=e.status,r="normal"===n||"over"===n;return new o.default(s.default.call(this.stator,{name:"dialFrame",style:{width:280,height:360},data:e,script:p.default,cssText:c.default.toString(),html:(0,g.default)(m)+'\n        <div class="dial-frame bg-main '+(r?"":"is-calling")+'">\n            '+d.default+"\n        </div>"}),t)};t.default=v},function(e,t,n){t=e.exports=n(19)(!1),t.i(n(25),""),t.push([e.i,"h2 {\n  margin: 0;\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 1.5;\n  padding: 10px 15px 5px;\n  color: #262d3d;\n}\n.icon {\n  display: inline-block;\n  width: 16px;\n  overflow: hidden;\n  color: #a1abc2;\n}\n.icon svg {\n  width: 100%;\n}\n.icon.green:hover {\n  color: #01c480;\n}\na:hover .icon,\n.icon:hover {\n  color: #8490ae;\n}\n.drop {\n  overflow: hidden;\n  position: relative;\n  padding-right: 12px;\n}\n.drop .arrow {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 8px;\n  margin-left: 3px;\n}\n.icon.is-on,\n.text-stress {\n  color: #262d3d;\n}\n.text-hint {\n  color: #d4d8e1;\n}\n.green {\n  color: #00d48a;\n  border-color: #00d48a;\n}\n.red {\n  color: #f75559;\n}\n.blue {\n  color: #4a70ff;\n}\n.orange {\n  color: #ff8345;\n}\n.is-calling {\n  color: #a1abc2;\n}\n.is-calling h2 {\n  color: #f8f9fB;\n}\n.is-calling::-webkit-scrollbar-thumb,\n.is-calling ::-webkit-scrollbar-thumb {\n  background-color: #696c7c;\n}\n.is-calling::-webkit-scrollbar-thumb:hover,\n.is-calling ::-webkit-scrollbar-thumb:hover {\n  background-color: #50535f;\n}\n.is-calling .is-loading {\n  border: 2px solid #fff;\n  border-bottom-color: transparent;\n}\n.is-calling .text {\n  color: #a1abc2;\n}\n.is-calling .icon.is-on,\n.is-calling .text-stress {\n  color: #f8f9fB;\n}\n.is-calling .green {\n  color: #00cb83;\n  border-color: #00cb83;\n}\n.is-calling .red {\n  color: #e1464a;\n}\n.is-calling .blue {\n  color: #6283ff;\n}\n.is-calling.bg-main,\n.is-calling .bg-main {\n  background-position: 100% 50%;\n}\n.is-calling .bg-gap {\n  background-position: 100% 50%;\n}\n.is-calling .ck {\n  color: #f8f9fB;\n}\n.is-calling textarea,\n.is-calling input,\n.is-calling select,\n.is-calling .select,\n.is-calling .select .options {\n  border-color: #4a5264;\n  color: #f8f9fB;\n  background-color: #25283a;\n}\n.is-calling textarea:focus,\n.is-calling input:focus,\n.is-calling select:focus,\n.is-calling .select:focus,\n.is-calling .select .options:focus {\n  border-color: #8d96aa;\n}\n.is-calling textarea::placeholder,\n.is-calling input::placeholder,\n.is-calling select::placeholder,\n.is-calling .select::placeholder,\n.is-calling .select .options::placeholder {\n  color: #a1abc2;\n}\n.is-calling .select .options p:hover,\n.is-calling .select .options .selected {\n  background-color: #383a4a;\n}\n.is-calling .close {\n  color: #78849e;\n}\n.is-calling .close:hover {\n  color: #fff;\n}\n.is-calling input[type=checkbox] {\n  cursor: pointer;\n  position: relative;\n}\n.is-calling input[type=checkbox]::after {\n  position: absolute;\n  top: 0;\n  background-color: #1e2030;\n  color: #fff;\n  width: 14px;\n  height: 14px;\n  display: inline-block;\n  visibility: visible;\n  padding-left: 0px;\n  text-align: center;\n  content: ' ';\n  border-radius: 2px;\n  box-sizing: border-box;\n  border: 1px solid #4A5264;\n}\n.is-calling input[type=checkbox]:checked::after {\n  content: \"\";\n  border-color: #4A70FF;\n  background-color: #4A70FF;\n}\n.is-calling input[type=checkbox]:checked::before {\n  content: '';\n  position: absolute;\n  top: 1px;\n  left: 5px;\n  width: 3px;\n  height: 8px;\n  border: solid white;\n  border-width: 0 2px 2px 0;\n  transform: rotate(45deg);\n  z-index: 1;\n}\n.close {\n  position: absolute;\n  right: 0px;\n  top: 0px;\n  padding: 8px;\n  color: #a8abb3;\n}\n.close:hover {\n  color: #1e2300;\n}\n.close svg {\n  width: 14px;\n  height: 14px;\n}\n.bg-main {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #fff, #fff, #25283a, #25283a) left / cover;\n}\n.bg-gap {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #f4f7fb, #f4f7fb, #101328, #101328) left / cover;\n}\n.bgEaseIn {\n  background-position: 100% 50%;\n}\n.bgEaseOut {\n  background-position: 0% 50%;\n}\n.bg-main,\n.bg-gap {\n  background-size: 800% 800%;\n  animation-fill-mode: both;\n}\n@keyframes bgEaseIn {\n  0% {\n    background-position: 0% 50%;\n  }\n  100% {\n    background-position: 100% 50%;\n  }\n}\n@keyframes bgEaseOut {\n  0% {\n    background-position: 100% 50%;\n  }\n  100% {\n    background-position: 0% 50%;\n  }\n}\nbody {\n  margin: 0;\n  overflow: hidden;\n  font-size: 12px;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  color: #a1abc2;\n}\np {\n  margin: 0;\n}\ntextarea::placeholder,\ninput::placeholder {\n  color: #A1ABC2;\n}\n::-webkit-scrollbar {\n  width: 4px;\n  height: 8px;\n}\n::-webkit-scrollbar-thumb {\n  background-color: #f3f5fa;\n  border-radius: 8px;\n}\n::-webkit-scrollbar-thumb:hover {\n  background-color: #aaa;\n}\n::-webkit-scrollbar-track-piece {\n  background-color: transparent;\n}\nsvg {\n  fill: currentColor;\n}\na {\n  text-decoration: none;\n}\nul,\nli {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n.ck {\n  width: 9px;\n  height: 9px;\n  color: #262d3d;\n  position: absolute;\n  top: 50%;\n  right: 10px;\n  transform: translateY(-50%);\n  display: none;\n}\n.is-selected .ck {\n  display: inline-block;\n}\ninput,\ntextarea,\nselect,\n.select,\n.select .options {\n  font-size: 12px;\n  color: #262d3d;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  border-radius: 3px;\n  border: 1px solid #e1e6f0;\n  background-color: #fff;\n}\ninput:focus,\ntextarea:focus,\nselect:focus,\n.select:focus,\n.select .options:focus {\n  outline: 0;\n  border-color: #c5ccdb;\n}\nselect,\n.select,\n.select .options p {\n  padding: 0 5px;\n}\n.select {\n  min-height: 26px;\n  position: relative;\n  cursor: default;\n}\n.select .options {\n  position: absolute;\n  z-index: 1;\n  left: -1px;\n  top: 29px;\n  width: 100%;\n  max-height: 73px;\n  overflow: auto;\n}\n.select .options p:hover,\n.select .options p.selected {\n  background: #f1f5fb;\n}\n.select p {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.cls:after {\n  content: \"\";\n  font-size: 0;\n  display: block;\n  height: 0;\n  clear: both;\n  visibility: hidden;\n}\n.disabled {\n  pointer-events: none;\n  opacity: .3;\n}\n.hidden {\n  display: none!important;\n}\n.overlay {\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  background: rgba(255, 255, 255, 0.6);\n}\ninput::-webkit-outer-spin-button,\ninput::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n}\ninput[type=\"number\"] {\n  -moz-appearance: textfield;\n}\n.is-loading {\n  border-radius: 100%;\n  margin: 2px;\n  border: 2px solid #ccc;\n  border-bottom-color: transparent;\n  height: 12px;\n  width: 12px;\n  margin-top: -7px;\n  background: 0 0!important;\n  display: inline-block;\n  -webkit-animation: rotate .75s 0s linear infinite;\n  animation: rotate .75s 0s linear infinite;\n}\n@keyframes rotate {\n  0% {\n    -webkit-transform: rotate(0);\n    transform: rotate(0);\n  }\n  50% {\n    -webkit-transform: rotate(180deg);\n    transform: rotate(180deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n.marquee {\n  white-space: nowrap;\n  overflow: hidden;\n  width: 80px;\n  position: relative;\n}\n.marquee p {\n  overflow: hidden;\n  float: left;\n  animation: move linear 6s infinite;\n}\n.marquee span {\n  display: inline-block;\n  padding-left: 10px;\n}\n.marquee::before,\n.marquee::after {\n  position: absolute;\n  top: 0;\n  z-index: 1;\n  content: ' ';\n  width: 10px;\n  height: 100%;\n  animation: bgfadeIn linear 2s;\n}\n.marquee::before {\n  left: -2px;\n  background: linear-gradient(90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n.marquee::after {\n  right: -2px;\n  background: linear-gradient(-90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n@keyframes move {\n  0% {\n    transform: translateX(0);\n  }\n  100% {\n    transform: translateX(-50%);\n  }\n}\n.q-notice {\n  position: absolute;\n  width: 100%;\n  left: 0;\n  top: 0;\n  text-align: center;\n}\n.q-notice.is-auto {\n  pointer-events: none;\n  z-index: 10;\n}\n.q-notice.is-cover {\n  height: 100%;\n  background: rgba(255, 255, 255, 0.7);\n}\n.q-notice .item {\n  margin: 4px auto;\n}\n.q-notice .info {\n  pointer-events: initial;\n  min-width: 170px;\n  padding: 0 15px;\n  line-height: 29px;\n  height: 28px;\n  overflow: hidden;\n  white-space: nowrap;\n  display: inline-block;\n  color: rgba(255, 255, 255, 0.8);\n  background-color: #25283a;\n  box-shadow: 0px 2px 18px 2px rgba(172, 172, 172, 0.3);\n  border-radius: 2px;\n  position: relative;\n}\n.q-notice .info .icon-tip {\n  vertical-align: -3px;\n  margin-right: 2px;\n  width: 14px;\n}\n.q-notice .info [data-action] * {\n  pointer-events: none;\n}\n.q-notice .is-error .info {\n  color: #fff;\n  background-color: #f75559;\n}\n.q-notice .is-success .info {\n  color: #fff;\n  background-color: #00cb83;\n}\n.q-notice .is-close-able .info {\n  text-align: left;\n}\n.q-notice .is-close-able .btn-close {\n  width: 12px;\n  height: 12px;\n  color: #fff;\n  margin: 8px -5px 0 10px;\n  float: right;\n}\n.q-notice .is-close-able .btn-close:hover {\n  opacity: .8;\n}\n.q-notice .is-warning .info {\n  color: rgba(0, 1, 10, 0.93);\n  border: 0.5px solid #FFEBDA;\n  background-color: #FFF8F0;\n  box-shadow: 0px 16px 32px rgba(18, 19, 25, 0.16), 0px 0px 8px rgba(18, 19, 25, 0.08), 0px 0px 1px rgba(18, 19, 25, 0.08);\n}\n.ringing {\n  animation: ringing 2s ease;\n  animation-fill-mode: both;\n  animation-iteration-count: infinite;\n}\n@keyframes ringing {\n  10% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  15% {\n    -webkit-transform: rotate(-15deg);\n    transform: rotate(-15deg);\n  }\n  20% {\n    -webkit-transform: rotate(15deg);\n    transform: rotate(15deg);\n  }\n  25% {\n    -webkit-transform: rotate(-10deg);\n    transform: rotate(-10deg);\n    color: #2af2ac;\n  }\n  30% {\n    -webkit-transform: rotate(5deg);\n    transform: rotate(5deg);\n    color: #2af2ac;\n  }\n  35% {\n    -webkit-transform: rotate(-5deg);\n    transform: rotate(-5deg);\n  }\n  40% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n}\n.ctimer {\n  border-radius: 50%;\n  height: 40px;\n  overflow: hidden;\n  position: relative;\n  width: 40px;\n  background: rgba(255, 255, 255, 0.3);\n}\n.ctimer svg {\n  position: absolute;\n  left: 0;\n  z-index: 2;\n}\n.ctimer .hand {\n  position: absolute;\n  top: 0;\n  height: 100%;\n  overflow: hidden;\n  width: 50%;\n}\n.ctimer .hand span {\n  border: 20px solid rgba(255, 255, 255, 0.3);\n  border-bottom-color: transparent;\n  border-left-color: transparent;\n  border-radius: 50%;\n  display: block;\n  height: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  transform: rotate(225deg);\n  width: 0;\n}\n.ctimer .hand-left {\n  left: 0;\n  transform: rotate(180deg);\n}\n.ctimer .hand-right {\n  right: 0;\n}\n.ctimer .hand span {\n  animation-duration: var(--post-edit-time);\n  animation-iteration-count: 1;\n  animation-timing-function: linear;\n  animation-fill-mode: both;\n}\n.ctimer .hand-left span {\n  animation-name: spinleft;\n}\n.ctimer .hand-right span {\n  animation-name: spinright;\n}\n@keyframes spinleft {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(225deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\n@keyframes spinright {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(405deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\n.dia-container {\n  padding: 10px 0 2px 0;\n  white-space: nowrap;\n}\n.dia-container .dia-res-display {\n  height: 18px;\n  text-align: center;\n  white-space: nowrap;\n}\n.dia-container .dia-res-display .dia-res-number {\n  display: inline-block;\n  text-align: center;\n  width: 100%;\n  margin: 0 auto;\n  padding: 0;\n  height: 16px;\n  font-size: 14px;\n  line-height: 14px;\n  vertical-align: middle;\n  white-space: nowrap;\n  outline: none;\n  background: none;\n  border: 0px;\n}\n.dia-container .dia-res-display .dia-res-number:focus {\n  outline: none;\n}\n.dia-container.is-calling .switchboard:hover {\n  color: #fff;\n}\n.dia-container.is-calling .dia-number-container td div {\n  color: #fff;\n  background-color: #101328;\n}\n.dia-container.is-calling .dia-number-container td div:hover {\n  background-color: #383a4a;\n}\n@keyframes shrink {\n  0%,\n  100% {\n    opacity: 0;\n  }\n  50% {\n    opacity: 1;\n  }\n}\n.dia-number-container {\n  height: 195px;\n  width: 100%;\n  padding: 0 5px;\n}\n.dia-number-container td div {\n  width: 40px;\n  height: 40px;\n  line-height: 40px;\n  border-radius: 100%;\n  text-align: center;\n  color: #fff;\n  background-color: #1e2031;\n  font-size: 20px;\n  font-weight: normal;\n  margin: 0 auto;\n  cursor: pointer;\n}\n.dia-number-container td div:hover {\n  background-color: #55586c;\n}\n.dia-number-container td div:active {\n  background-color: #7e879a;\n}\n.dia-container {\n  border: none;\n  height: auto;\n  width: 66%;\n  margin: 0 auto;\n}\n.dia-container .dia-res-display {\n  padding: 15px 0 18px;\n}\n.dia-container .dia-res-display .dia-res-number {\n  font-size: 20px;\n  height: 20px;\n  vertical-align: -3px;\n}\n.dial-frame {\n  height: 360px;\n  background: #101328;\n}\n.dial-frame .dia-res-display {\n  padding: 40px 0 20px;\n}\n.dial-frame td div {\n  margin: 5px auto;\n}\n.del {\n  display: inline-block;\n  background-color: #25283a;\n  height: 8px;\n  padding: 1px 2px 1px 0;\n  width: 8px;\n  color: #edf0f7;\n  cursor: pointer;\n  position: relative;\n  overflow: visible;\n}\n.del::before {\n  content: ' ';\n  position: absolute;\n  left: -10px;\n  top: 0;\n  width: 0;\n  height: 0;\n  border: 5px solid transparent;\n  border-right-color: #25283a;\n}\n.del:hover {\n  color: #fff;\n  background-color: #55586c;\n}\n.del:hover::before {\n  border-right-color: #55586c;\n}\n.del svg {\n  width: 8px;\n  height: 8px;\n}\n",""])},function(e,t){e.exports="'use strict';\n\nvar qd = window.qd;\nvar $res = $('.dia-res-number').elems[0];\nvar number = -1;\nvar VALID_INPUT = /[0-9#\\*]/;\nvar INVALID_INPUT = /[^0-9#\\*]/g;\nvar oldLength = 0;\nvar newLength = 0;\nvar lastStart = 0;\nvar newStart = 0;\nvar validInput = false;\n\nqd._debug() && console.log('log from dialFrame');\n\nfunction onShow() {\n    $res.value = '';\n    $res.focus();\n    qd.one('dialClick', function (e, res) {\n        if (res.errCode === 0) {}\n        $res.focus();\n    });\n\n    $('.dia-number-input').bind('keydown', updateStartIndex);\n    $('.dia-number-input').bind('keyup', handleKeyEvent);\n}\n\nfunction onHide() {\n    $('.dia-number-input').unbind('keydown', updateStartIndex);\n    $('.dia-number-input').unbind('keyup', handleKeyEvent);\n    $res.value = '';\n    qd.trigger('_dialFrameHide');\n}\n\nfunction updateStartIndex(e) {\n    if (e.shiftKey && e.keyCode !== 56 && e.keyCode !== 51) {\n        e.preventDefault();\n        validInput = false;\n        return;\n    } else if ((e.keyCode < 48 || e.keyCode > 57 && e.keyCode < 96 || e.keyCode > 105) && e.keyCode !== 8) {\n        e.preventDefault();\n        validInput = false;\n        return;\n    }\n    lastStart = e.target.selectionStart;\n    validInput = true;\n}\n\nfunction handleKeyEvent(e) {\n    newStart = e.target.selectionStart;\n    var keyNumber = e.target.value.substr(lastStart, 1);\n    validInput && keyNumber && qd.dialClick({\n        callid: qd.getState().callid,\n        key: parseInt(keyNumber, 10) || keyNumber,\n        success: function success(res) {},\n        fail: function fail(err) {}\n    });\n}\n\n$('.dia-number-container').bind('click', function (e) {\n    if (e.target && e.target.nodeName.toUpperCase() === 'DIV') {\n        var $dom = $(e.target.parentNode);\n        number = $dom.prop('val');\n\n        qd.dialClick({\n            callid: qd.getState().callid,\n            key: number,\n            success: function success(res) {\n                $res.value += number;\n            },\n            fail: function fail(err) {}\n        });\n    }\n});"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(8),o=r(i),a=n(18),s=r(a),l=n(24),c=r(l),u=n(589),d=r(u),f=n(590),p=r(f),h=n(591),g=r(h),m=n(592),v=r(m),b=n(26),_=r(b),y=n(101),w=n(27);(0,y.setPositionHook)("switchboardFrame",function(e){var t=this.stator.getState().isCollapsed;return(0,o.default)({},e,t?{offsetX:0,offsetY:6}:{})});var x=function(e,t){var n=c.default.call(this.stator,{name:"switchboardFrame",style:{width:200},autoHeight:".switchboard-info-container",data:e,script:v.default,cssText:d.default.toString(),html:(0,_.default)(w)+p.default,props:{listTpl:g.default}});return new s.default(n,t)};t.default=x},function(e,t,n){t=e.exports=n(19)(!1),t.i(n(25),""),t.push([e.i,"h2 {\n  margin: 0;\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 1.5;\n  padding: 10px 15px 5px;\n  color: #262d3d;\n}\n.icon {\n  display: inline-block;\n  width: 16px;\n  overflow: hidden;\n  color: #a1abc2;\n}\n.icon svg {\n  width: 100%;\n}\n.icon.green:hover {\n  color: #01c480;\n}\na:hover .icon,\n.icon:hover {\n  color: #8490ae;\n}\n.drop {\n  overflow: hidden;\n  position: relative;\n  padding-right: 12px;\n}\n.drop .arrow {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 8px;\n  margin-left: 3px;\n}\n.icon.is-on,\n.text-stress {\n  color: #262d3d;\n}\n.text-hint {\n  color: #d4d8e1;\n}\n.green {\n  color: #00d48a;\n  border-color: #00d48a;\n}\n.red {\n  color: #f75559;\n}\n.blue {\n  color: #4a70ff;\n}\n.orange {\n  color: #ff8345;\n}\n.is-calling {\n  color: #a1abc2;\n}\n.is-calling h2 {\n  color: #f8f9fB;\n}\n.is-calling::-webkit-scrollbar-thumb,\n.is-calling ::-webkit-scrollbar-thumb {\n  background-color: #696c7c;\n}\n.is-calling::-webkit-scrollbar-thumb:hover,\n.is-calling ::-webkit-scrollbar-thumb:hover {\n  background-color: #50535f;\n}\n.is-calling .is-loading {\n  border: 2px solid #fff;\n  border-bottom-color: transparent;\n}\n.is-calling .text {\n  color: #a1abc2;\n}\n.is-calling .icon.is-on,\n.is-calling .text-stress {\n  color: #f8f9fB;\n}\n.is-calling .green {\n  color: #00cb83;\n  border-color: #00cb83;\n}\n.is-calling .red {\n  color: #e1464a;\n}\n.is-calling .blue {\n  color: #6283ff;\n}\n.is-calling.bg-main,\n.is-calling .bg-main {\n  background-position: 100% 50%;\n}\n.is-calling .bg-gap {\n  background-position: 100% 50%;\n}\n.is-calling .ck {\n  color: #f8f9fB;\n}\n.is-calling textarea,\n.is-calling input,\n.is-calling select,\n.is-calling .select,\n.is-calling .select .options {\n  border-color: #4a5264;\n  color: #f8f9fB;\n  background-color: #25283a;\n}\n.is-calling textarea:focus,\n.is-calling input:focus,\n.is-calling select:focus,\n.is-calling .select:focus,\n.is-calling .select .options:focus {\n  border-color: #8d96aa;\n}\n.is-calling textarea::placeholder,\n.is-calling input::placeholder,\n.is-calling select::placeholder,\n.is-calling .select::placeholder,\n.is-calling .select .options::placeholder {\n  color: #a1abc2;\n}\n.is-calling .select .options p:hover,\n.is-calling .select .options .selected {\n  background-color: #383a4a;\n}\n.is-calling .close {\n  color: #78849e;\n}\n.is-calling .close:hover {\n  color: #fff;\n}\n.is-calling input[type=checkbox] {\n  cursor: pointer;\n  position: relative;\n}\n.is-calling input[type=checkbox]::after {\n  position: absolute;\n  top: 0;\n  background-color: #1e2030;\n  color: #fff;\n  width: 14px;\n  height: 14px;\n  display: inline-block;\n  visibility: visible;\n  padding-left: 0px;\n  text-align: center;\n  content: ' ';\n  border-radius: 2px;\n  box-sizing: border-box;\n  border: 1px solid #4A5264;\n}\n.is-calling input[type=checkbox]:checked::after {\n  content: \"\";\n  border-color: #4A70FF;\n  background-color: #4A70FF;\n}\n.is-calling input[type=checkbox]:checked::before {\n  content: '';\n  position: absolute;\n  top: 1px;\n  left: 5px;\n  width: 3px;\n  height: 8px;\n  border: solid white;\n  border-width: 0 2px 2px 0;\n  transform: rotate(45deg);\n  z-index: 1;\n}\n.close {\n  position: absolute;\n  right: 0px;\n  top: 0px;\n  padding: 8px;\n  color: #a8abb3;\n}\n.close:hover {\n  color: #1e2300;\n}\n.close svg {\n  width: 14px;\n  height: 14px;\n}\n.bg-main {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #fff, #fff, #25283a, #25283a) left / cover;\n}\n.bg-gap {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #f4f7fb, #f4f7fb, #101328, #101328) left / cover;\n}\n.bgEaseIn {\n  background-position: 100% 50%;\n}\n.bgEaseOut {\n  background-position: 0% 50%;\n}\n.bg-main,\n.bg-gap {\n  background-size: 800% 800%;\n  animation-fill-mode: both;\n}\n@keyframes bgEaseIn {\n  0% {\n    background-position: 0% 50%;\n  }\n  100% {\n    background-position: 100% 50%;\n  }\n}\n@keyframes bgEaseOut {\n  0% {\n    background-position: 100% 50%;\n  }\n  100% {\n    background-position: 0% 50%;\n  }\n}\nbody {\n  margin: 0;\n  overflow: hidden;\n  font-size: 12px;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  color: #a1abc2;\n}\np {\n  margin: 0;\n}\ntextarea::placeholder,\ninput::placeholder {\n  color: #A1ABC2;\n}\n::-webkit-scrollbar {\n  width: 4px;\n  height: 8px;\n}\n::-webkit-scrollbar-thumb {\n  background-color: #f3f5fa;\n  border-radius: 8px;\n}\n::-webkit-scrollbar-thumb:hover {\n  background-color: #aaa;\n}\n::-webkit-scrollbar-track-piece {\n  background-color: transparent;\n}\nsvg {\n  fill: currentColor;\n}\na {\n  text-decoration: none;\n}\nul,\nli {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n.ck {\n  width: 9px;\n  height: 9px;\n  color: #262d3d;\n  position: absolute;\n  top: 50%;\n  right: 10px;\n  transform: translateY(-50%);\n  display: none;\n}\n.is-selected .ck {\n  display: inline-block;\n}\ninput,\ntextarea,\nselect,\n.select,\n.select .options {\n  font-size: 12px;\n  color: #262d3d;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  border-radius: 3px;\n  border: 1px solid #e1e6f0;\n  background-color: #fff;\n}\ninput:focus,\ntextarea:focus,\nselect:focus,\n.select:focus,\n.select .options:focus {\n  outline: 0;\n  border-color: #c5ccdb;\n}\nselect,\n.select,\n.select .options p {\n  padding: 0 5px;\n}\n.select {\n  min-height: 26px;\n  position: relative;\n  cursor: default;\n}\n.select .options {\n  position: absolute;\n  z-index: 1;\n  left: -1px;\n  top: 29px;\n  width: 100%;\n  max-height: 73px;\n  overflow: auto;\n}\n.select .options p:hover,\n.select .options p.selected {\n  background: #f1f5fb;\n}\n.select p {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.cls:after {\n  content: \"\";\n  font-size: 0;\n  display: block;\n  height: 0;\n  clear: both;\n  visibility: hidden;\n}\n.disabled {\n  pointer-events: none;\n  opacity: .3;\n}\n.hidden {\n  display: none!important;\n}\n.overlay {\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  background: rgba(255, 255, 255, 0.6);\n}\ninput::-webkit-outer-spin-button,\ninput::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n}\ninput[type=\"number\"] {\n  -moz-appearance: textfield;\n}\n.is-loading {\n  border-radius: 100%;\n  margin: 2px;\n  border: 2px solid #ccc;\n  border-bottom-color: transparent;\n  height: 12px;\n  width: 12px;\n  margin-top: -7px;\n  background: 0 0!important;\n  display: inline-block;\n  -webkit-animation: rotate .75s 0s linear infinite;\n  animation: rotate .75s 0s linear infinite;\n}\n@keyframes rotate {\n  0% {\n    -webkit-transform: rotate(0);\n    transform: rotate(0);\n  }\n  50% {\n    -webkit-transform: rotate(180deg);\n    transform: rotate(180deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n.marquee {\n  white-space: nowrap;\n  overflow: hidden;\n  width: 80px;\n  position: relative;\n}\n.marquee p {\n  overflow: hidden;\n  float: left;\n  animation: move linear 6s infinite;\n}\n.marquee span {\n  display: inline-block;\n  padding-left: 10px;\n}\n.marquee::before,\n.marquee::after {\n  position: absolute;\n  top: 0;\n  z-index: 1;\n  content: ' ';\n  width: 10px;\n  height: 100%;\n  animation: bgfadeIn linear 2s;\n}\n.marquee::before {\n  left: -2px;\n  background: linear-gradient(90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n.marquee::after {\n  right: -2px;\n  background: linear-gradient(-90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n@keyframes move {\n  0% {\n    transform: translateX(0);\n  }\n  100% {\n    transform: translateX(-50%);\n  }\n}\n.q-notice {\n  position: absolute;\n  width: 100%;\n  left: 0;\n  top: 0;\n  text-align: center;\n}\n.q-notice.is-auto {\n  pointer-events: none;\n  z-index: 10;\n}\n.q-notice.is-cover {\n  height: 100%;\n  background: rgba(255, 255, 255, 0.7);\n}\n.q-notice .item {\n  margin: 4px auto;\n}\n.q-notice .info {\n  pointer-events: initial;\n  min-width: 170px;\n  padding: 0 15px;\n  line-height: 29px;\n  height: 28px;\n  overflow: hidden;\n  white-space: nowrap;\n  display: inline-block;\n  color: rgba(255, 255, 255, 0.8);\n  background-color: #25283a;\n  box-shadow: 0px 2px 18px 2px rgba(172, 172, 172, 0.3);\n  border-radius: 2px;\n  position: relative;\n}\n.q-notice .info .icon-tip {\n  vertical-align: -3px;\n  margin-right: 2px;\n  width: 14px;\n}\n.q-notice .info [data-action] * {\n  pointer-events: none;\n}\n.q-notice .is-error .info {\n  color: #fff;\n  background-color: #f75559;\n}\n.q-notice .is-success .info {\n  color: #fff;\n  background-color: #00cb83;\n}\n.q-notice .is-close-able .info {\n  text-align: left;\n}\n.q-notice .is-close-able .btn-close {\n  width: 12px;\n  height: 12px;\n  color: #fff;\n  margin: 8px -5px 0 10px;\n  float: right;\n}\n.q-notice .is-close-able .btn-close:hover {\n  opacity: .8;\n}\n.q-notice .is-warning .info {\n  color: rgba(0, 1, 10, 0.93);\n  border: 0.5px solid #FFEBDA;\n  background-color: #FFF8F0;\n  box-shadow: 0px 16px 32px rgba(18, 19, 25, 0.16), 0px 0px 8px rgba(18, 19, 25, 0.08), 0px 0px 1px rgba(18, 19, 25, 0.08);\n}\n.ringing {\n  animation: ringing 2s ease;\n  animation-fill-mode: both;\n  animation-iteration-count: infinite;\n}\n@keyframes ringing {\n  10% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  15% {\n    -webkit-transform: rotate(-15deg);\n    transform: rotate(-15deg);\n  }\n  20% {\n    -webkit-transform: rotate(15deg);\n    transform: rotate(15deg);\n  }\n  25% {\n    -webkit-transform: rotate(-10deg);\n    transform: rotate(-10deg);\n    color: #2af2ac;\n  }\n  30% {\n    -webkit-transform: rotate(5deg);\n    transform: rotate(5deg);\n    color: #2af2ac;\n  }\n  35% {\n    -webkit-transform: rotate(-5deg);\n    transform: rotate(-5deg);\n  }\n  40% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n}\n.ctimer {\n  border-radius: 50%;\n  height: 40px;\n  overflow: hidden;\n  position: relative;\n  width: 40px;\n  background: rgba(255, 255, 255, 0.3);\n}\n.ctimer svg {\n  position: absolute;\n  left: 0;\n  z-index: 2;\n}\n.ctimer .hand {\n  position: absolute;\n  top: 0;\n  height: 100%;\n  overflow: hidden;\n  width: 50%;\n}\n.ctimer .hand span {\n  border: 20px solid rgba(255, 255, 255, 0.3);\n  border-bottom-color: transparent;\n  border-left-color: transparent;\n  border-radius: 50%;\n  display: block;\n  height: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  transform: rotate(225deg);\n  width: 0;\n}\n.ctimer .hand-left {\n  left: 0;\n  transform: rotate(180deg);\n}\n.ctimer .hand-right {\n  right: 0;\n}\n.ctimer .hand span {\n  animation-duration: var(--post-edit-time);\n  animation-iteration-count: 1;\n  animation-timing-function: linear;\n  animation-fill-mode: both;\n}\n.ctimer .hand-left span {\n  animation-name: spinleft;\n}\n.ctimer .hand-right span {\n  animation-name: spinright;\n}\n@keyframes spinleft {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(225deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\n@keyframes spinright {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(405deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\n.switchboard-info-container {\n  user-select: none;\n  -webkit-user-select: none;\n}\n.switchboard-info-container .input {\n  height: 32px;\n  padding: 0 15px 3px;\n  position: relative;\n}\n.switchboard-info-container .icon-search {\n  position: absolute;\n  left: 22px;\n  top: 8px;\n}\n.switchboard-info-container .input input {\n  height: 32px;\n  line-height: 32px;\n  padding: 1px 24px 1px 28px;\n  width: 100%;\n}\n.switchboard-info-container .input input:focus {\n  outline: none;\n}\n.switchboard-info-container .input .clear {\n  display: block;\n  cursor: pointer;\n  padding: 0;\n  right: 22px;\n  top: 11px;\n}\n.switchboard-info-container .input .clear svg {\n  width: 12px;\n  height: 12px;\n}\n.switchboard-info-container h2 {\n  display: block;\n  font-size: 14px;\n  font-weight: normal;\n  color: #262d3d;\n  padding: 15px 15px 5px;\n}\n.switchboard-info-container .busy {\n  height: 40px;\n  line-height: 40px;\n  padding: 0 8px 0 15px;\n  position: relative;\n}\n.switchboard-info-container .busy:hover {\n  cursor: pointer;\n  background: #edf5ff;\n}\n.switchboard-info-container .switchboard-list {\n  max-height: 213px;\n  overflow: auto;\n}\n.switchboard-info-container .switchboard-list-item {\n  height: 30px;\n  line-height: 30px;\n  padding: 0 25px 0 15px;\n  position: relative;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  color: #262d3d;\n}\n.switchboard-info-container .switchboard-list-item .ck {\n  right: 15px;\n}\n.switchboard-info-container .switchboard-list-item:hover {\n  cursor: pointer;\n  background: #f1f5fb;\n}\n.switchboard-info-container .is-loading {\n  display: none;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  border-color: #0067ed;\n  margin-left: -8px;\n  border-bottom-color: transparent;\n}\n.switchboard-info-container .tip {\n  padding: 10px 0 20px;\n  color: #a1abc2;\n  text-align: center;\n}\n.switchboard-info-container .empty {\n  height: 66px;\n  text-align: center;\n  color: #a1abc2;\n  line-height: 66px;\n}\n.switchboard-info-container.is-calling .input .clear {\n  color: #6283ff;\n}\n.switchboard-info-container.is-calling .switchboard-list-item:hover {\n  background-color: #383a4a;\n}\n.switchboard-info-container.is-calling .switchboard-list .tip {\n  color: #6c7280;\n}\n",""])},function(e,t){e.exports='<%\n    var status = status || \'normal\';\n    var isNormalState = status === \'normal\' || status === \'over\';\n%>\n<div class="switchboard-info-container bg-main <%=isNormalState ? \'\' : \'is-calling\'%>">\n    <h2>切换外呼总机号码</h2>\n    <div class="input">\n        <svg class="icon icon-search" viewBox="0 0 12 12"><use xlink:href="#basic_search_line"></use></svg>\n        <input class="keywords" type="text" placeholder="总机号码"/>\n        <a class="close clear" href="javascript:;"><svg viewBox="0 0 12 12"><use xlink:href="#close"></use></svg></a>\n    </div>\n    <ul id="list" class="switchboard-list"></ul>\n    <span class="is-loading"></span>\n</div>\n'},function(e,t){e.exports='<%if (keywords && switchboardList.length === 0) {%>\n    <div class="empty">无搜索结果</div>\n<%} else {\n    for (var i = 0; i < switchboardList.length; i++) {\n        var item = switchboardList[i];\n        if(item.switchboard_number || item.switchboard_group) {\n    %>\n        <li data-id="<%=item.switchboard_number%>" class="switchboard-list-item <%=item.switchboard_number == currentSwitchboardNumber ? \'is-selected\' : \'\'%>">\n            <%==item.str%>\n            <%if(item.switchboard_number && item.switchboard_group) {%>\n                (<%=item.switchboard_group%>)\n            <%}%>\n            <span class="ck"><svg viewBox="0 0 12 12"><use xlink:href="#checked"></use></svg></span>\n        </li>\n    <%  }\n    }%>\n    <%if (switchboardTotal > switchboardList.length) {%>\n        <div class="tip">还没有找到？请搜索具体的号码</div>\n    <%}%>\n<%}%>   '},function(e,t){e.exports="'use strict';\n\nvar qd = window.qd;\nvar render = window.render;\nvar listTpl = window.listTpl;\nvar count = 50;\n\nsetTimeout(function () {\n    qd._debug() && console.log('log from switchboardFrame');\n}, 1000);\n\nvar $loading = $('.is-loading');\nvar $clear = $('.clear');\nvar $input = $('.keywords');\nvar el = $input.elems[0];\nvar keywords = '';\n$clear.bind('click', function () {\n    el.focus();\n    if (el.value === '') {\n        return;\n    }\n    el.value = '';\n    getNumberList(true);\n});\n$input.bind('keypress', function (e) {\n    e.keyCode === 13 && getNumberList();\n});\n\nfunction getNumberList(cache) {\n    $loading.css('display', 'block');\n    keywords = el && el.value;\n    qd.getSwitchBoardNumList({\n        cache: cache ? 30 : 0,\n        index: 1,\n        count: count,\n        keywords: keywords,\n        success: function success(res) {\n            qd.setState({\n                switchboardList: res.node || [],\n                switchboardTotal: res.total || 0\n            });\n        },\n        complete: function complete() {\n            renderList();\n            $loading.css('display', 'none');\n        }\n    });\n}\n\nfunction onShow() {\n    renderList();\n    getNumberList(true);\n}\n\nfunction renderList() {\n    var state = qd.getState();\n    var list = state.switchboardList || [];\n    var html = '';\n    state.keywords = keywords;\n    !keywords && (!list[0] || list[0].switchboard_number) && list.unshift({ switchboard_group: '系统分配', switchboard_number: '' });\n    list = list.map(function (item) {\n        var str = item.switchboard_number || item.switchboard_group;\n        str = qd.formatTel(str);\n        if (keywords) {\n            str = highLight(qd.formatTel(str), keywords);\n        }\n        item.str = str;\n        return item;\n    });\n    state.switchboardList = list;\n    html = render(listTpl)(state);\n    $('#list').html(html);\n    el && el.focus();\n    window.onRefresh();\n}\n\nfunction bindEvents() {\n    $('#list').bind('click', function (e) {\n        var $dom = $(e.target);\n        var id;\n        if ($dom.hasClass('is-selected')) {\n            qd.hidePage();\n            return;\n        }\n        if (e.target && e.target.nodeName.toUpperCase() === 'LI') {\n            id = $dom.prop('data-id') || '';\n            qd.setState('currentSwitchboardNumber', id, true);\n            qd.hidePage();\n        }\n    });\n}\nbindEvents();"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(18),o=r(i),a=n(24),s=r(a),l=n(594),c=r(l),u=n(595),d=r(u),f=n(596),p=r(f),h=n(597),g=r(h),m=n(26),v=r(m),b=n(27),_=function(e,t){var n=s.default.call(this.stator,{name:"queueFrame",style:{width:220,background:"#fff"},autoHeight:".queue-info-container",data:e,script:g.default,cssText:c.default.toString(),html:(0,v.default)(b)+d.default,props:{listTpl:p.default}});return new o.default(n,t)};t.default=_},function(e,t,n){t=e.exports=n(19)(!1),t.i(n(25),""),t.push([e.i,"h2 {\n  margin: 0;\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 1.5;\n  padding: 10px 15px 5px;\n  color: #262d3d;\n}\n.icon {\n  display: inline-block;\n  width: 16px;\n  overflow: hidden;\n  color: #a1abc2;\n}\n.icon svg {\n  width: 100%;\n}\n.icon.green:hover {\n  color: #01c480;\n}\na:hover .icon,\n.icon:hover {\n  color: #8490ae;\n}\n.drop {\n  overflow: hidden;\n  position: relative;\n  padding-right: 12px;\n}\n.drop .arrow {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 8px;\n  margin-left: 3px;\n}\n.icon.is-on,\n.text-stress {\n  color: #262d3d;\n}\n.text-hint {\n  color: #d4d8e1;\n}\n.green {\n  color: #00d48a;\n  border-color: #00d48a;\n}\n.red {\n  color: #f75559;\n}\n.blue {\n  color: #4a70ff;\n}\n.orange {\n  color: #ff8345;\n}\n.is-calling {\n  color: #a1abc2;\n}\n.is-calling h2 {\n  color: #f8f9fB;\n}\n.is-calling::-webkit-scrollbar-thumb,\n.is-calling ::-webkit-scrollbar-thumb {\n  background-color: #696c7c;\n}\n.is-calling::-webkit-scrollbar-thumb:hover,\n.is-calling ::-webkit-scrollbar-thumb:hover {\n  background-color: #50535f;\n}\n.is-calling .is-loading {\n  border: 2px solid #fff;\n  border-bottom-color: transparent;\n}\n.is-calling .text {\n  color: #a1abc2;\n}\n.is-calling .icon.is-on,\n.is-calling .text-stress {\n  color: #f8f9fB;\n}\n.is-calling .green {\n  color: #00cb83;\n  border-color: #00cb83;\n}\n.is-calling .red {\n  color: #e1464a;\n}\n.is-calling .blue {\n  color: #6283ff;\n}\n.is-calling.bg-main,\n.is-calling .bg-main {\n  background-position: 100% 50%;\n}\n.is-calling .bg-gap {\n  background-position: 100% 50%;\n}\n.is-calling .ck {\n  color: #f8f9fB;\n}\n.is-calling textarea,\n.is-calling input,\n.is-calling select,\n.is-calling .select,\n.is-calling .select .options {\n  border-color: #4a5264;\n  color: #f8f9fB;\n  background-color: #25283a;\n}\n.is-calling textarea:focus,\n.is-calling input:focus,\n.is-calling select:focus,\n.is-calling .select:focus,\n.is-calling .select .options:focus {\n  border-color: #8d96aa;\n}\n.is-calling textarea::placeholder,\n.is-calling input::placeholder,\n.is-calling select::placeholder,\n.is-calling .select::placeholder,\n.is-calling .select .options::placeholder {\n  color: #a1abc2;\n}\n.is-calling .select .options p:hover,\n.is-calling .select .options .selected {\n  background-color: #383a4a;\n}\n.is-calling .close {\n  color: #78849e;\n}\n.is-calling .close:hover {\n  color: #fff;\n}\n.is-calling input[type=checkbox] {\n  cursor: pointer;\n  position: relative;\n}\n.is-calling input[type=checkbox]::after {\n  position: absolute;\n  top: 0;\n  background-color: #1e2030;\n  color: #fff;\n  width: 14px;\n  height: 14px;\n  display: inline-block;\n  visibility: visible;\n  padding-left: 0px;\n  text-align: center;\n  content: ' ';\n  border-radius: 2px;\n  box-sizing: border-box;\n  border: 1px solid #4A5264;\n}\n.is-calling input[type=checkbox]:checked::after {\n  content: \"\";\n  border-color: #4A70FF;\n  background-color: #4A70FF;\n}\n.is-calling input[type=checkbox]:checked::before {\n  content: '';\n  position: absolute;\n  top: 1px;\n  left: 5px;\n  width: 3px;\n  height: 8px;\n  border: solid white;\n  border-width: 0 2px 2px 0;\n  transform: rotate(45deg);\n  z-index: 1;\n}\n.close {\n  position: absolute;\n  right: 0px;\n  top: 0px;\n  padding: 8px;\n  color: #a8abb3;\n}\n.close:hover {\n  color: #1e2300;\n}\n.close svg {\n  width: 14px;\n  height: 14px;\n}\n.bg-main {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #fff, #fff, #25283a, #25283a) left / cover;\n}\n.bg-gap {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #f4f7fb, #f4f7fb, #101328, #101328) left / cover;\n}\n.bgEaseIn {\n  background-position: 100% 50%;\n}\n.bgEaseOut {\n  background-position: 0% 50%;\n}\n.bg-main,\n.bg-gap {\n  background-size: 800% 800%;\n  animation-fill-mode: both;\n}\n@keyframes bgEaseIn {\n  0% {\n    background-position: 0% 50%;\n  }\n  100% {\n    background-position: 100% 50%;\n  }\n}\n@keyframes bgEaseOut {\n  0% {\n    background-position: 100% 50%;\n  }\n  100% {\n    background-position: 0% 50%;\n  }\n}\nbody {\n  margin: 0;\n  overflow: hidden;\n  font-size: 12px;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  color: #a1abc2;\n}\np {\n  margin: 0;\n}\ntextarea::placeholder,\ninput::placeholder {\n  color: #A1ABC2;\n}\n::-webkit-scrollbar {\n  width: 4px;\n  height: 8px;\n}\n::-webkit-scrollbar-thumb {\n  background-color: #f3f5fa;\n  border-radius: 8px;\n}\n::-webkit-scrollbar-thumb:hover {\n  background-color: #aaa;\n}\n::-webkit-scrollbar-track-piece {\n  background-color: transparent;\n}\nsvg {\n  fill: currentColor;\n}\na {\n  text-decoration: none;\n}\nul,\nli {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n.ck {\n  width: 9px;\n  height: 9px;\n  color: #262d3d;\n  position: absolute;\n  top: 50%;\n  right: 10px;\n  transform: translateY(-50%);\n  display: none;\n}\n.is-selected .ck {\n  display: inline-block;\n}\ninput,\ntextarea,\nselect,\n.select,\n.select .options {\n  font-size: 12px;\n  color: #262d3d;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  border-radius: 3px;\n  border: 1px solid #e1e6f0;\n  background-color: #fff;\n}\ninput:focus,\ntextarea:focus,\nselect:focus,\n.select:focus,\n.select .options:focus {\n  outline: 0;\n  border-color: #c5ccdb;\n}\nselect,\n.select,\n.select .options p {\n  padding: 0 5px;\n}\n.select {\n  min-height: 26px;\n  position: relative;\n  cursor: default;\n}\n.select .options {\n  position: absolute;\n  z-index: 1;\n  left: -1px;\n  top: 29px;\n  width: 100%;\n  max-height: 73px;\n  overflow: auto;\n}\n.select .options p:hover,\n.select .options p.selected {\n  background: #f1f5fb;\n}\n.select p {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.cls:after {\n  content: \"\";\n  font-size: 0;\n  display: block;\n  height: 0;\n  clear: both;\n  visibility: hidden;\n}\n.disabled {\n  pointer-events: none;\n  opacity: .3;\n}\n.hidden {\n  display: none!important;\n}\n.overlay {\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  background: rgba(255, 255, 255, 0.6);\n}\ninput::-webkit-outer-spin-button,\ninput::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n}\ninput[type=\"number\"] {\n  -moz-appearance: textfield;\n}\n.is-loading {\n  border-radius: 100%;\n  margin: 2px;\n  border: 2px solid #ccc;\n  border-bottom-color: transparent;\n  height: 12px;\n  width: 12px;\n  margin-top: -7px;\n  background: 0 0!important;\n  display: inline-block;\n  -webkit-animation: rotate .75s 0s linear infinite;\n  animation: rotate .75s 0s linear infinite;\n}\n@keyframes rotate {\n  0% {\n    -webkit-transform: rotate(0);\n    transform: rotate(0);\n  }\n  50% {\n    -webkit-transform: rotate(180deg);\n    transform: rotate(180deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n.marquee {\n  white-space: nowrap;\n  overflow: hidden;\n  width: 80px;\n  position: relative;\n}\n.marquee p {\n  overflow: hidden;\n  float: left;\n  animation: move linear 6s infinite;\n}\n.marquee span {\n  display: inline-block;\n  padding-left: 10px;\n}\n.marquee::before,\n.marquee::after {\n  position: absolute;\n  top: 0;\n  z-index: 1;\n  content: ' ';\n  width: 10px;\n  height: 100%;\n  animation: bgfadeIn linear 2s;\n}\n.marquee::before {\n  left: -2px;\n  background: linear-gradient(90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n.marquee::after {\n  right: -2px;\n  background: linear-gradient(-90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n@keyframes move {\n  0% {\n    transform: translateX(0);\n  }\n  100% {\n    transform: translateX(-50%);\n  }\n}\n.q-notice {\n  position: absolute;\n  width: 100%;\n  left: 0;\n  top: 0;\n  text-align: center;\n}\n.q-notice.is-auto {\n  pointer-events: none;\n  z-index: 10;\n}\n.q-notice.is-cover {\n  height: 100%;\n  background: rgba(255, 255, 255, 0.7);\n}\n.q-notice .item {\n  margin: 4px auto;\n}\n.q-notice .info {\n  pointer-events: initial;\n  min-width: 170px;\n  padding: 0 15px;\n  line-height: 29px;\n  height: 28px;\n  overflow: hidden;\n  white-space: nowrap;\n  display: inline-block;\n  color: rgba(255, 255, 255, 0.8);\n  background-color: #25283a;\n  box-shadow: 0px 2px 18px 2px rgba(172, 172, 172, 0.3);\n  border-radius: 2px;\n  position: relative;\n}\n.q-notice .info .icon-tip {\n  vertical-align: -3px;\n  margin-right: 2px;\n  width: 14px;\n}\n.q-notice .info [data-action] * {\n  pointer-events: none;\n}\n.q-notice .is-error .info {\n  color: #fff;\n  background-color: #f75559;\n}\n.q-notice .is-success .info {\n  color: #fff;\n  background-color: #00cb83;\n}\n.q-notice .is-close-able .info {\n  text-align: left;\n}\n.q-notice .is-close-able .btn-close {\n  width: 12px;\n  height: 12px;\n  color: #fff;\n  margin: 8px -5px 0 10px;\n  float: right;\n}\n.q-notice .is-close-able .btn-close:hover {\n  opacity: .8;\n}\n.q-notice .is-warning .info {\n  color: rgba(0, 1, 10, 0.93);\n  border: 0.5px solid #FFEBDA;\n  background-color: #FFF8F0;\n  box-shadow: 0px 16px 32px rgba(18, 19, 25, 0.16), 0px 0px 8px rgba(18, 19, 25, 0.08), 0px 0px 1px rgba(18, 19, 25, 0.08);\n}\n.ringing {\n  animation: ringing 2s ease;\n  animation-fill-mode: both;\n  animation-iteration-count: infinite;\n}\n@keyframes ringing {\n  10% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  15% {\n    -webkit-transform: rotate(-15deg);\n    transform: rotate(-15deg);\n  }\n  20% {\n    -webkit-transform: rotate(15deg);\n    transform: rotate(15deg);\n  }\n  25% {\n    -webkit-transform: rotate(-10deg);\n    transform: rotate(-10deg);\n    color: #2af2ac;\n  }\n  30% {\n    -webkit-transform: rotate(5deg);\n    transform: rotate(5deg);\n    color: #2af2ac;\n  }\n  35% {\n    -webkit-transform: rotate(-5deg);\n    transform: rotate(-5deg);\n  }\n  40% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n}\n.ctimer {\n  border-radius: 50%;\n  height: 40px;\n  overflow: hidden;\n  position: relative;\n  width: 40px;\n  background: rgba(255, 255, 255, 0.3);\n}\n.ctimer svg {\n  position: absolute;\n  left: 0;\n  z-index: 2;\n}\n.ctimer .hand {\n  position: absolute;\n  top: 0;\n  height: 100%;\n  overflow: hidden;\n  width: 50%;\n}\n.ctimer .hand span {\n  border: 20px solid rgba(255, 255, 255, 0.3);\n  border-bottom-color: transparent;\n  border-left-color: transparent;\n  border-radius: 50%;\n  display: block;\n  height: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  transform: rotate(225deg);\n  width: 0;\n}\n.ctimer .hand-left {\n  left: 0;\n  transform: rotate(180deg);\n}\n.ctimer .hand-right {\n  right: 0;\n}\n.ctimer .hand span {\n  animation-duration: var(--post-edit-time);\n  animation-iteration-count: 1;\n  animation-timing-function: linear;\n  animation-fill-mode: both;\n}\n.ctimer .hand-left span {\n  animation-name: spinleft;\n}\n.ctimer .hand-right span {\n  animation-name: spinright;\n}\n@keyframes spinleft {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(225deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\n@keyframes spinright {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(405deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\n.queue-info-container {\n  user-select: none;\n  -webkit-user-select: none;\n}\n.queue-info-container h2 {\n  margin: 0;\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 1.5;\n  padding: 10px 15px 5px;\n}\n.queue-info-container h2 .num {\n  float: right;\n}\n.queue-info-container .queue-list {\n  max-height: 234px;\n  overflow: auto;\n  padding: 5px 0;\n}\n.queue-info-container .queue-list li {\n  height: 30px;\n  line-height: 30px;\n  padding: 0 15px;\n  position: relative;\n  color: #262d3d;\n}\n.queue-info-container .queue-list li span {\n  position: absolute;\n  right: 15px;\n  top: 0;\n}\n.queue-info-container.is-calling .queue-list li {\n  color: #a1abc2;\n}\n",""])},function(e,t){e.exports="<%\n    var status = status || 'normal';\n    var isNormalState = status === 'normal' || status === 'over';\n%>\n<div class=\"queue-info-container bg-main <%=isNormalState ? '' : 'is-calling'%>\">\n    <h2 class=\"text-stress\">总排队人数 <span class=\"num\">-</span></h2>\n    <ul id=\"list\" class=\"queue-list\"></ul>\n</div>\n"},function(e,t){e.exports="<%\nvar list = queue && queue.list || [];\nfor(i=0; i<list.length; i++) {\n    var item = list[i];\n%>\n<li><%=item.queue_name%> <span><%=item.queue_count%></span></li>\n<%}%>"},function(e,t){e.exports="'use strict';\n\nvar qd = window.qd;\nvar render = window.render;\nvar listTpl = window.listTpl;\n\nfunction onShow() {\n    renderList();\n    qd.syncCountInQueue().catch(function (err) {});\n}\n\nqd.one('_refreshQueCount.queueFrame', renderList);\n\nfunction renderList() {\n    var state = qd.getState();\n    var html = render(listTpl)(state);\n    var count = state.queue && state.queue.count;\n    $('.num').text(count !== undefined ? count : '-');\n    $('#list').html(html);\n    window.onRefresh();\n}"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(18),o=r(i),a=n(24),s=r(a),l=n(599),c=r(l),u=n(600),d=r(u),f=n(601),p=r(f),h=n(602),g=r(h),m=n(26),v=r(m),b=n(27),_=function(e,t){var n=s.default.call(this.stator,{name:"historyListFrame",style:{width:336,background:"#fff"},autoHeight:".history-info-container",data:e,script:g.default,cssText:c.default.toString(),html:(0,v.default)(b)+d.default,props:{listTpl:p.default}});return new o.default(n,t)};t.default=_},function(e,t,n){t=e.exports=n(19)(!1),t.i(n(25),""),t.push([e.i,"h2 {\n  margin: 0;\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 1.5;\n  padding: 10px 15px 5px;\n  color: #262d3d;\n}\n.icon {\n  display: inline-block;\n  width: 16px;\n  overflow: hidden;\n  color: #a1abc2;\n}\n.icon svg {\n  width: 100%;\n}\n.icon.green:hover {\n  color: #01c480;\n}\na:hover .icon,\n.icon:hover {\n  color: #8490ae;\n}\n.drop {\n  overflow: hidden;\n  position: relative;\n  padding-right: 12px;\n}\n.drop .arrow {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 8px;\n  margin-left: 3px;\n}\n.icon.is-on,\n.text-stress {\n  color: #262d3d;\n}\n.text-hint {\n  color: #d4d8e1;\n}\n.green {\n  color: #00d48a;\n  border-color: #00d48a;\n}\n.red {\n  color: #f75559;\n}\n.blue {\n  color: #4a70ff;\n}\n.orange {\n  color: #ff8345;\n}\n.is-calling {\n  color: #a1abc2;\n}\n.is-calling h2 {\n  color: #f8f9fB;\n}\n.is-calling::-webkit-scrollbar-thumb,\n.is-calling ::-webkit-scrollbar-thumb {\n  background-color: #696c7c;\n}\n.is-calling::-webkit-scrollbar-thumb:hover,\n.is-calling ::-webkit-scrollbar-thumb:hover {\n  background-color: #50535f;\n}\n.is-calling .is-loading {\n  border: 2px solid #fff;\n  border-bottom-color: transparent;\n}\n.is-calling .text {\n  color: #a1abc2;\n}\n.is-calling .icon.is-on,\n.is-calling .text-stress {\n  color: #f8f9fB;\n}\n.is-calling .green {\n  color: #00cb83;\n  border-color: #00cb83;\n}\n.is-calling .red {\n  color: #e1464a;\n}\n.is-calling .blue {\n  color: #6283ff;\n}\n.is-calling.bg-main,\n.is-calling .bg-main {\n  background-position: 100% 50%;\n}\n.is-calling .bg-gap {\n  background-position: 100% 50%;\n}\n.is-calling .ck {\n  color: #f8f9fB;\n}\n.is-calling textarea,\n.is-calling input,\n.is-calling select,\n.is-calling .select,\n.is-calling .select .options {\n  border-color: #4a5264;\n  color: #f8f9fB;\n  background-color: #25283a;\n}\n.is-calling textarea:focus,\n.is-calling input:focus,\n.is-calling select:focus,\n.is-calling .select:focus,\n.is-calling .select .options:focus {\n  border-color: #8d96aa;\n}\n.is-calling textarea::placeholder,\n.is-calling input::placeholder,\n.is-calling select::placeholder,\n.is-calling .select::placeholder,\n.is-calling .select .options::placeholder {\n  color: #a1abc2;\n}\n.is-calling .select .options p:hover,\n.is-calling .select .options .selected {\n  background-color: #383a4a;\n}\n.is-calling .close {\n  color: #78849e;\n}\n.is-calling .close:hover {\n  color: #fff;\n}\n.is-calling input[type=checkbox] {\n  cursor: pointer;\n  position: relative;\n}\n.is-calling input[type=checkbox]::after {\n  position: absolute;\n  top: 0;\n  background-color: #1e2030;\n  color: #fff;\n  width: 14px;\n  height: 14px;\n  display: inline-block;\n  visibility: visible;\n  padding-left: 0px;\n  text-align: center;\n  content: ' ';\n  border-radius: 2px;\n  box-sizing: border-box;\n  border: 1px solid #4A5264;\n}\n.is-calling input[type=checkbox]:checked::after {\n  content: \"\";\n  border-color: #4A70FF;\n  background-color: #4A70FF;\n}\n.is-calling input[type=checkbox]:checked::before {\n  content: '';\n  position: absolute;\n  top: 1px;\n  left: 5px;\n  width: 3px;\n  height: 8px;\n  border: solid white;\n  border-width: 0 2px 2px 0;\n  transform: rotate(45deg);\n  z-index: 1;\n}\n.close {\n  position: absolute;\n  right: 0px;\n  top: 0px;\n  padding: 8px;\n  color: #a8abb3;\n}\n.close:hover {\n  color: #1e2300;\n}\n.close svg {\n  width: 14px;\n  height: 14px;\n}\n.bg-main {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #fff, #fff, #25283a, #25283a) left / cover;\n}\n.bg-gap {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #f4f7fb, #f4f7fb, #101328, #101328) left / cover;\n}\n.bgEaseIn {\n  background-position: 100% 50%;\n}\n.bgEaseOut {\n  background-position: 0% 50%;\n}\n.bg-main,\n.bg-gap {\n  background-size: 800% 800%;\n  animation-fill-mode: both;\n}\n@keyframes bgEaseIn {\n  0% {\n    background-position: 0% 50%;\n  }\n  100% {\n    background-position: 100% 50%;\n  }\n}\n@keyframes bgEaseOut {\n  0% {\n    background-position: 100% 50%;\n  }\n  100% {\n    background-position: 0% 50%;\n  }\n}\nbody {\n  margin: 0;\n  overflow: hidden;\n  font-size: 12px;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  color: #a1abc2;\n}\np {\n  margin: 0;\n}\ntextarea::placeholder,\ninput::placeholder {\n  color: #A1ABC2;\n}\n::-webkit-scrollbar {\n  width: 4px;\n  height: 8px;\n}\n::-webkit-scrollbar-thumb {\n  background-color: #f3f5fa;\n  border-radius: 8px;\n}\n::-webkit-scrollbar-thumb:hover {\n  background-color: #aaa;\n}\n::-webkit-scrollbar-track-piece {\n  background-color: transparent;\n}\nsvg {\n  fill: currentColor;\n}\na {\n  text-decoration: none;\n}\nul,\nli {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n.ck {\n  width: 9px;\n  height: 9px;\n  color: #262d3d;\n  position: absolute;\n  top: 50%;\n  right: 10px;\n  transform: translateY(-50%);\n  display: none;\n}\n.is-selected .ck {\n  display: inline-block;\n}\ninput,\ntextarea,\nselect,\n.select,\n.select .options {\n  font-size: 12px;\n  color: #262d3d;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  border-radius: 3px;\n  border: 1px solid #e1e6f0;\n  background-color: #fff;\n}\ninput:focus,\ntextarea:focus,\nselect:focus,\n.select:focus,\n.select .options:focus {\n  outline: 0;\n  border-color: #c5ccdb;\n}\nselect,\n.select,\n.select .options p {\n  padding: 0 5px;\n}\n.select {\n  min-height: 26px;\n  position: relative;\n  cursor: default;\n}\n.select .options {\n  position: absolute;\n  z-index: 1;\n  left: -1px;\n  top: 29px;\n  width: 100%;\n  max-height: 73px;\n  overflow: auto;\n}\n.select .options p:hover,\n.select .options p.selected {\n  background: #f1f5fb;\n}\n.select p {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.cls:after {\n  content: \"\";\n  font-size: 0;\n  display: block;\n  height: 0;\n  clear: both;\n  visibility: hidden;\n}\n.disabled {\n  pointer-events: none;\n  opacity: .3;\n}\n.hidden {\n  display: none!important;\n}\n.overlay {\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  background: rgba(255, 255, 255, 0.6);\n}\ninput::-webkit-outer-spin-button,\ninput::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n}\ninput[type=\"number\"] {\n  -moz-appearance: textfield;\n}\n.is-loading {\n  border-radius: 100%;\n  margin: 2px;\n  border: 2px solid #ccc;\n  border-bottom-color: transparent;\n  height: 12px;\n  width: 12px;\n  margin-top: -7px;\n  background: 0 0!important;\n  display: inline-block;\n  -webkit-animation: rotate .75s 0s linear infinite;\n  animation: rotate .75s 0s linear infinite;\n}\n@keyframes rotate {\n  0% {\n    -webkit-transform: rotate(0);\n    transform: rotate(0);\n  }\n  50% {\n    -webkit-transform: rotate(180deg);\n    transform: rotate(180deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n.marquee {\n  white-space: nowrap;\n  overflow: hidden;\n  width: 80px;\n  position: relative;\n}\n.marquee p {\n  overflow: hidden;\n  float: left;\n  animation: move linear 6s infinite;\n}\n.marquee span {\n  display: inline-block;\n  padding-left: 10px;\n}\n.marquee::before,\n.marquee::after {\n  position: absolute;\n  top: 0;\n  z-index: 1;\n  content: ' ';\n  width: 10px;\n  height: 100%;\n  animation: bgfadeIn linear 2s;\n}\n.marquee::before {\n  left: -2px;\n  background: linear-gradient(90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n.marquee::after {\n  right: -2px;\n  background: linear-gradient(-90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n@keyframes move {\n  0% {\n    transform: translateX(0);\n  }\n  100% {\n    transform: translateX(-50%);\n  }\n}\n.q-notice {\n  position: absolute;\n  width: 100%;\n  left: 0;\n  top: 0;\n  text-align: center;\n}\n.q-notice.is-auto {\n  pointer-events: none;\n  z-index: 10;\n}\n.q-notice.is-cover {\n  height: 100%;\n  background: rgba(255, 255, 255, 0.7);\n}\n.q-notice .item {\n  margin: 4px auto;\n}\n.q-notice .info {\n  pointer-events: initial;\n  min-width: 170px;\n  padding: 0 15px;\n  line-height: 29px;\n  height: 28px;\n  overflow: hidden;\n  white-space: nowrap;\n  display: inline-block;\n  color: rgba(255, 255, 255, 0.8);\n  background-color: #25283a;\n  box-shadow: 0px 2px 18px 2px rgba(172, 172, 172, 0.3);\n  border-radius: 2px;\n  position: relative;\n}\n.q-notice .info .icon-tip {\n  vertical-align: -3px;\n  margin-right: 2px;\n  width: 14px;\n}\n.q-notice .info [data-action] * {\n  pointer-events: none;\n}\n.q-notice .is-error .info {\n  color: #fff;\n  background-color: #f75559;\n}\n.q-notice .is-success .info {\n  color: #fff;\n  background-color: #00cb83;\n}\n.q-notice .is-close-able .info {\n  text-align: left;\n}\n.q-notice .is-close-able .btn-close {\n  width: 12px;\n  height: 12px;\n  color: #fff;\n  margin: 8px -5px 0 10px;\n  float: right;\n}\n.q-notice .is-close-able .btn-close:hover {\n  opacity: .8;\n}\n.q-notice .is-warning .info {\n  color: rgba(0, 1, 10, 0.93);\n  border: 0.5px solid #FFEBDA;\n  background-color: #FFF8F0;\n  box-shadow: 0px 16px 32px rgba(18, 19, 25, 0.16), 0px 0px 8px rgba(18, 19, 25, 0.08), 0px 0px 1px rgba(18, 19, 25, 0.08);\n}\n.ringing {\n  animation: ringing 2s ease;\n  animation-fill-mode: both;\n  animation-iteration-count: infinite;\n}\n@keyframes ringing {\n  10% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  15% {\n    -webkit-transform: rotate(-15deg);\n    transform: rotate(-15deg);\n  }\n  20% {\n    -webkit-transform: rotate(15deg);\n    transform: rotate(15deg);\n  }\n  25% {\n    -webkit-transform: rotate(-10deg);\n    transform: rotate(-10deg);\n    color: #2af2ac;\n  }\n  30% {\n    -webkit-transform: rotate(5deg);\n    transform: rotate(5deg);\n    color: #2af2ac;\n  }\n  35% {\n    -webkit-transform: rotate(-5deg);\n    transform: rotate(-5deg);\n  }\n  40% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n}\n.ctimer {\n  border-radius: 50%;\n  height: 40px;\n  overflow: hidden;\n  position: relative;\n  width: 40px;\n  background: rgba(255, 255, 255, 0.3);\n}\n.ctimer svg {\n  position: absolute;\n  left: 0;\n  z-index: 2;\n}\n.ctimer .hand {\n  position: absolute;\n  top: 0;\n  height: 100%;\n  overflow: hidden;\n  width: 50%;\n}\n.ctimer .hand span {\n  border: 20px solid rgba(255, 255, 255, 0.3);\n  border-bottom-color: transparent;\n  border-left-color: transparent;\n  border-radius: 50%;\n  display: block;\n  height: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  transform: rotate(225deg);\n  width: 0;\n}\n.ctimer .hand-left {\n  left: 0;\n  transform: rotate(180deg);\n}\n.ctimer .hand-right {\n  right: 0;\n}\n.ctimer .hand span {\n  animation-duration: var(--post-edit-time);\n  animation-iteration-count: 1;\n  animation-timing-function: linear;\n  animation-fill-mode: both;\n}\n.ctimer .hand-left span {\n  animation-name: spinleft;\n}\n.ctimer .hand-right span {\n  animation-name: spinright;\n}\n@keyframes spinleft {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(225deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\n@keyframes spinright {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(405deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\n.history-info-container {\n  user-select: none;\n  -webkit-user-select: none;\n  padding: 16px;\n  position: relative;\n}\n.history-info-container .empty {\n  display: flex;\n  height: 100%;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n}\n.history-info-container .empty .msg-svg {\n  width: 100px;\n  height: 100px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.history-info-container .empty .msg-info {\n  font-size: 14px;\n  line-height: 20px;\n}\n.history-info-container .history-title {\n  margin-bottom: 16px;\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 20px;\n  color: rgba(0, 1, 10, 0.93);\n}\n.history-info-container #list {\n  margin-top: 12px;\n  height: 280px;\n  overflow: auto;\n  margin-bottom: 48px;\n}\n.history-info-container #list .tel-history-list-item {\n  padding: 8px;\n  height: 60px;\n  box-sizing: border-box;\n  border-radius: 3px;\n  display: flex;\n}\n.history-info-container #list .tel-history-list-item:hover {\n  background: rgba(36, 56, 97, 0.05);\n  cursor: pointer;\n}\n.history-info-container #list .tel-history-list-item .info {\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  font-size: 14px;\n  line-height: 20px;\n}\n.history-info-container #list .tel-history-list-item .info .info-top {\n  display: flex;\n  color: rgba(0, 1, 10, 0.93);\n}\n.history-info-container #list .tel-history-list-item .info .info-top .call-icon {\n  margin-left: 6px;\n  width: 14px;\n  height: 14px;\n  position: relative;\n  top: 2px;\n}\n.history-info-container #list .tel-history-list-item .info .info-bottom {\n  display: flex;\n  max-width: 210px;\n}\n.history-info-container #list .tel-history-list-item .info .info-bottom .name {\n  margin-right: 8px;\n  max-width: 118px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n}\n.history-info-container #list .tel-history-list-item .info .info-bottom .highlight-text {\n  color: #4A70FF;\n}\n.history-info-container #list .tel-history-list-item .result {\n  text-align: right;\n  color: rgba(0, 1, 10, 0.93);\n}\n.history-info-container #list .item-selected,\n.history-info-container #list .item-selected:hover {\n  background: #F1F6FF;\n}\n.history-info-container .action-btn {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  padding: 16px;\n  text-align: right;\n  width: 100%;\n  box-sizing: border-box;\n  font-size: 0px;\n}\n.history-info-container .action-btn button {\n  padding: 6px 16px;\n  box-sizing: border-box;\n  height: 32px;\n  border-radius: 3px;\n  font-size: 14px;\n  line-height: 20px;\n  cursor: pointer;\n}\n.history-info-container .action-btn .button-normal {\n  background: #FFFFFF;\n  border: 1px solid rgba(17, 32, 70, 0.13);\n  margin-left: 8px;\n}\n.history-info-container .action-btn .button-disable {\n  border: 1px solid rgba(18, 42, 79, 0.08);\n  background: rgba(54, 79, 129, 0.04);\n  color: rgba(6, 21, 66, 0.2);\n  cursor: not-allowed;\n}\n.history-info-container .action-btn .button-primary {\n  background: #4A70FF;\n  border: 0;\n  color: #FFFFFF;\n  cursor: pointer;\n}\n.history-info-container .search-input {\n  width: 100%;\n  display: flex;\n  height: 32px;\n  border: 1px solid rgba(17, 32, 70, 0.13);\n  border-radius: 3px;\n}\n.history-info-container .search-input input {\n  flex: 1;\n  border: none;\n  font-weight: 400;\n  font-size: 14px;\n  line-height: 20px;\n  color: #262d3d;\n  padding: 6px 8px;\n  min-width: 50px;\n}\n.history-info-container .search-input .right-action {\n  display: flex;\n}\n.history-info-container .search-input .right-action .right-action-item {\n  box-sizing: border-box;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.history-info-container .search-input .right-action .right-action-item svg {\n  width: 14px;\n  height: 14px;\n  display: block;\n  fill: rgba(1, 11, 50, 0.41);\n}\n.history-info-container .search-input .right-action .right-action-clear {\n  width: 24px;\n  display: none;\n}\n.history-info-container .search-input .right-action .right-action-clear svg:hover {\n  cursor: pointer;\n  fill: rgba(3, 10, 38, 0.65);\n}\n.history-info-container .search-input .right-action .right-action-search {\n  width: 32px;\n}\n.history-info-container .search-input .right-action .right-action-search:hover {\n  cursor: pointer;\n}\n.history-info-container .search-input:hover {\n  border: 1px solid rgba(6, 21, 66, 0.2);\n}\n.history-info-container .search-input:hover .right-action-search {\n  width: 33px;\n  background: rgba(36, 56, 97, 0.05);\n  border-left: 1px solid rgba(6, 21, 66, 0.2);\n}\n.history-info-container .search-input-withvalue:hover .right-action .right-action-clear {\n  display: flex;\n}\n.history-info-container .search-input-focus,\n.history-info-container .search-input-focus:hover {\n  border: 1px solid #4A70FF;\n}\n.history-info-container .search-input-focus .right-action .right-action-search,\n.history-info-container .search-input-focus:hover .right-action .right-action-search {\n  width: 32px;\n  background: #4A70FF;\n  border-left: none;\n}\n.history-info-container .search-input-focus .right-action .right-action-search svg,\n.history-info-container .search-input-focus:hover .right-action .right-action-search svg {\n  fill: #FFFFFF;\n}\n.history-info-container .search-input-showclear .right-action .right-action-clear {\n  display: flex;\n}\n.history-info-container.is-calling {\n  background: #191B23;\n}\n.history-info-container.is-calling .search-input {\n  background: rgba(157, 179, 225, 0.05);\n  border: 1px solid rgba(189, 200, 255, 0.1);\n}\n.history-info-container.is-calling .search-input input {\n  color: #ffffff;\n  background: transparent;\n}\n.history-info-container.is-calling .search-input .right-action .right-action-item svg {\n  fill: rgba(217, 226, 252, 0.51);\n}\n.history-info-container.is-calling .search-input-focus,\n.history-info-container.is-calling .search-input-focus:hover {\n  border: 1px solid #4A70FF;\n}\n.history-info-container.is-calling .search-input-focus .right-action .right-action-search,\n.history-info-container.is-calling .search-input-focus:hover .right-action .right-action-search {\n  width: 32px;\n  background: #4A70FF;\n  border-left: none;\n}\n.history-info-container.is-calling .search-input-focus .right-action .right-action-search svg,\n.history-info-container.is-calling .search-input-focus:hover .right-action .right-action-search svg {\n  fill: #FFFFFF;\n}\n.history-info-container.is-calling #list .info .info-top {\n  color: rgba(250, 252, 255, 0.98);\n}\n.history-info-container.is-calling #list .info .info-bottom {\n  color: rgba(217, 226, 252, 0.51);\n}\n.history-info-container.is-calling #list .result {\n  color: rgba(250, 252, 255, 0.98);\n}\n.history-info-container.is-calling #list .tel-history-list-item:hover {\n  background: rgba(157, 179, 225, 0.05);\n}\n.history-info-container.is-calling #list .item-selected,\n.history-info-container.is-calling #list .item-selected:hover {\n  background: #313655;\n}\n.history-info-container.is-calling .history-title {\n  color: rgba(250, 252, 255, 0.98);\n}\n.history-info-container.is-calling .action-btn .button-disable {\n  background: rgba(157, 179, 225, 0.03);\n  border: 1px solid rgba(157, 179, 225, 0.05);\n  border-radius: 3px;\n  color: rgba(198, 211, 251, 0.27);\n}\n.history-info-container.is-calling .action-btn .button-normal {\n  background: #191B23;\n  border: 1px solid rgba(189, 200, 255, 0.1);\n  border-radius: 3px;\n  color: rgba(250, 252, 255, 0.98);\n}\n",""])},function(e,t){e.exports='<%\n    var status = status || \'normal\';\n    var isNormalState = status === \'normal\' || status === \'over\';\n%>\n<div class="history-info-container bg-main <%=isNormalState ? \'\' : \'is-calling\'%>">\n    <div class="history-title">最近通话记录</div>\n    <div class="search-input">\n        <input type="text" placeholder="电话号码" class="search-input-content"></input>\n        <div class="right-action">\n            <div class="right-action-clear right-action-item">\n                <svg class="icon-input-clear" viewBox="0 0 14 14"><use xlink:href="#input-clear"></use></svg>\n            </div>\n            <div class="right-action-search right-action-item">\n                <svg class="icon-input-search" viewBox="0 0 14 14"><use xlink:href="#input-search"></use></svg>\n            </div>\n        </div>\n    </div>\n    <div id="list"></div>\n    <div class="action-btn">\n        <button class="button-disable button-comfirm">确定</button>\n        <button class="button-normal button-cancel">取消</button>\n    </div>\n</div>\n'},function(e,t){e.exports='<%\nvar list = historyData.records || [];\nvar telResult = [\'\', \'接通\', \'客户未接通\', \'坐席未接通\', \'客户语音导航挂机\', \'客户排队放弃\', \'客户振铃放弃\', \'呼损\', \'其他\'];\nvar telStatusIcon = [\'in\', \'out\'];\nvar isNormalState = status === \'normal\' || status === \'over\';\nif (list.length === 0) {%>\n    <div class="empty">\n        <div class="msg-svg">\n            <svg class="icon-default-search empty-svg" viewBox="0 0 100 100"><use xlink:href="#default-search<%=isNormalState ? \'\' : \'-dark\'%>"></use></svg>\n        </div>\n        <div class="msg-info">暂无符合条件的电话</div>\n    </div>\n<%} else {\n    for (var i = 0; i < list.length; i++) {\n        var item = list[i];\n    %>\n        <li class="tel-history-list-item" data-date="<%=item.date%>" data-tel="<%=item.tel%>">\n            <div class="info">\n                <div class="info-top">\n                    <div class="date">\n                        <%=format(\'Y-m-d H:i\', item.date)%>\n                    </div>\n                    <div class="status">\n                        <svg class="call-icon" viewBox="0 0 14 14"><use xlink:href="#call-<%=telStatusIcon[item.telStatus]%>"></use></svg>\n                    </div>\n                </div>\n                <div class="info-bottom">\n                    <div class="name">\n                        <%=item.name || \'-\'%>\n                    </div>\n                    <div class="tel">\n                        <%==highLight(item.tel.toString(), keyword)%>\n                    </div>\n                </div>\n            </div>\n            <div class="result"><%=item.telResult%></div>\n        </li>\n    <%}%>\n<%}%>\n'},function(e,t){e.exports="'use strict';\n\nvar render = window.render;\nvar listTpl = window.listTpl;\nvar date = null;\nvar tel = null;\nvar $latestSelected = null;\nvar telHistoryList = { records: [] };\nvar nowSearch = '';\n\nfunction onShow() {\n    initSearchInput();\n    initList();\n    getHistory();\n    initActionBtns();\n    initEmptySvg();\n}\n\nvar getValue = function getValue() {\n    var $searchInputContent = $('.search-input-content');\n    return $searchInputContent.elems[0].value || '';\n};\n\nvar initSearchInput = function initSearchInput() {\n    var $searchInput = $('.search-input');\n    var $searchInputContent = $('.search-input-content');\n    var $searchClearBtn = $('.icon-input-clear');\n    var $searchSearchBtn = $('.right-action-search');\n    $searchInputContent.bind('focus', function (e) {\n        $searchInput.addClass('search-input-focus');\n        if (getValue()) {\n            $searchInput.addClass('search-input-showclear');\n        }\n    });\n    $searchInputContent.bind('keyup', function (e) {\n        if (getValue()) {\n            $searchInput.addClass('search-input-showclear');\n            $searchInput.addClass('search-input-withvalue');\n        } else {\n            $searchInput.removeClass('search-input-showclear');\n            $searchInput.removeClass('search-input-withvalue');\n        }\n        if (e.keyCode === 13) {\n            $searchSearchBtn.elems[0].click();\n        }\n    });\n    $searchInputContent.bind('blur', function (e) {\n        $searchInput.removeClass('search-input-focus');\n        $searchInput.removeClass('search-input-showclear');\n    });\n    $searchClearBtn.bind('click', function (e) {\n        $searchInputContent.elems[0].value = '';\n        $searchInput.removeClass('search-input-withvalue');\n        $searchInputContent.elems[0].focus();\n        $searchSearchBtn.elems[0].click();\n    });\n    $searchSearchBtn.bind('click', function (e) {\n        nowSearch = getValue();\n        getHistory(nowSearch);\n    });\n};\n\nfunction renderList() {\n    var html = render(listTpl)({\n        historyData: telHistoryList,\n        format: qd.format,\n        highLight: highLight,\n        keyword: nowSearch,\n        status: qd.getState('status')\n    });\n    var $List = $('#list');\n    $List.html(html);\n    window.onRefresh();\n}\n\nfunction getHistory(keyword) {\n    qd.handle({\n        action: 'telHistoryList',\n        params: {\n            kfext: qd.getState('callKfext'),\n            numOrCallid: keyword || '',\n            index: 1,\n            count: 50\n        },\n        success: function success(res) {\n            var data = {\n                records: (res.data.records || []).map(function (item) {\n                    return {\n                        date: item.datetime,\n                        name: item.type ? item.contact : item.caller,\n                        tel: qd.formatTel((item.type ? item.contact_number : item.caller_number) || '').replaceAll(' ', ''),\n                        telStatus: item.type,\n                        telResult: item.call_result\n                    };\n                })\n            };\n            telHistoryList = data || { records: [] };\n            renderList();\n        },\n        fail: function fail(err) {\n            notice.error(err.msg || '获取历史记录失败');\n            telHistoryList = { records: [] };\n            renderList();\n        }\n    });\n}\n\nfunction initList() {\n    var $List = $('#list');\n    var $comfirmBtn = $('.button-comfirm');\n    var $cancelBtn = $('.button-cancel');\n    $List.bind('click', function (e) {\n        var ele = e.target;\n        while (ele.parentElement && $List.elems[0].contains(ele) && ele.nodeName !== 'LI') {\n            ele = ele.parentElement;\n        }\n        var $ele = $(ele);\n        if ($ele && ele.nodeName === 'LI') {\n            $latestSelected && $latestSelected.removeClass('item-selected');\n            $latestSelected = $ele;\n            $ele.addClass('item-selected');\n            date = $ele.prop('data-date');\n            tel = $ele.prop('data-tel');\n            if (tel) {\n                $comfirmBtn.addClass('button-primary');\n                $comfirmBtn.removeClass('button-disable');\n            } else {\n                $comfirmBtn.removeClass('button-primary');\n                $comfirmBtn.addClass('button-disable');\n            }\n        }\n    });\n}\n\nvar initActionBtns = function initActionBtns() {\n    var $List = $('#list');\n    var $comfirmBtn = $('.button-comfirm');\n    var $cancelBtn = $('.button-cancel');\n    $comfirmBtn.bind('click', function (e) {\n        if ($comfirmBtn.hasClass('button-disable')) {\n            return;\n        }\n        qd.trigger('_msgTelNumber', tel && String(tel) || '');\n        qd.hidePage('historyListFrame');\n    });\n    $cancelBtn.bind('click', function (e) {\n        qd.hidePage('historyListFrame');\n    });\n};\n\nvar initEmptySvg = function initEmptySvg() {\n    qd.one('stateChange._historyListEmpty', function (e, status) {\n        var isCallingState = qd.isCallingState(status);\n        var $emptySvg = $('.empty-svg');\n        isCallingState && $emptySvg && $emptySvg.html('<use xlink:href=\"#default-search-dark\"></use>');\n    });\n};"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(18),o=r(i),a=n(24),s=r(a),l=n(604),c=r(l),u=n(605),d=r(u),f=n(606),p=r(f),h=n(26),g=r(h),m=n(27),v=function(e,t){var n=s.default.call(this.stator,{name:"messageTemplateFrame",style:{width:520,background:"#fff"},autoHeight:".message-template-info-container",data:e,script:p.default,cssText:c.default.toString(),html:(0,g.default)(m)+d.default,props:{}});return new o.default(n,t)};t.default=v},function(e,t,n){t=e.exports=n(19)(!1),t.i(n(25),""),t.push([e.i,"h2 {\n  margin: 0;\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 1.5;\n  padding: 10px 15px 5px;\n  color: #262d3d;\n}\n.icon {\n  display: inline-block;\n  width: 16px;\n  overflow: hidden;\n  color: #a1abc2;\n}\n.icon svg {\n  width: 100%;\n}\n.icon.green:hover {\n  color: #01c480;\n}\na:hover .icon,\n.icon:hover {\n  color: #8490ae;\n}\n.drop {\n  overflow: hidden;\n  position: relative;\n  padding-right: 12px;\n}\n.drop .arrow {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 8px;\n  margin-left: 3px;\n}\n.icon.is-on,\n.text-stress {\n  color: #262d3d;\n}\n.text-hint {\n  color: #d4d8e1;\n}\n.green {\n  color: #00d48a;\n  border-color: #00d48a;\n}\n.red {\n  color: #f75559;\n}\n.blue {\n  color: #4a70ff;\n}\n.orange {\n  color: #ff8345;\n}\n.is-calling {\n  color: #a1abc2;\n}\n.is-calling h2 {\n  color: #f8f9fB;\n}\n.is-calling::-webkit-scrollbar-thumb,\n.is-calling ::-webkit-scrollbar-thumb {\n  background-color: #696c7c;\n}\n.is-calling::-webkit-scrollbar-thumb:hover,\n.is-calling ::-webkit-scrollbar-thumb:hover {\n  background-color: #50535f;\n}\n.is-calling .is-loading {\n  border: 2px solid #fff;\n  border-bottom-color: transparent;\n}\n.is-calling .text {\n  color: #a1abc2;\n}\n.is-calling .icon.is-on,\n.is-calling .text-stress {\n  color: #f8f9fB;\n}\n.is-calling .green {\n  color: #00cb83;\n  border-color: #00cb83;\n}\n.is-calling .red {\n  color: #e1464a;\n}\n.is-calling .blue {\n  color: #6283ff;\n}\n.is-calling.bg-main,\n.is-calling .bg-main {\n  background-position: 100% 50%;\n}\n.is-calling .bg-gap {\n  background-position: 100% 50%;\n}\n.is-calling .ck {\n  color: #f8f9fB;\n}\n.is-calling textarea,\n.is-calling input,\n.is-calling select,\n.is-calling .select,\n.is-calling .select .options {\n  border-color: #4a5264;\n  color: #f8f9fB;\n  background-color: #25283a;\n}\n.is-calling textarea:focus,\n.is-calling input:focus,\n.is-calling select:focus,\n.is-calling .select:focus,\n.is-calling .select .options:focus {\n  border-color: #8d96aa;\n}\n.is-calling textarea::placeholder,\n.is-calling input::placeholder,\n.is-calling select::placeholder,\n.is-calling .select::placeholder,\n.is-calling .select .options::placeholder {\n  color: #a1abc2;\n}\n.is-calling .select .options p:hover,\n.is-calling .select .options .selected {\n  background-color: #383a4a;\n}\n.is-calling .close {\n  color: #78849e;\n}\n.is-calling .close:hover {\n  color: #fff;\n}\n.is-calling input[type=checkbox] {\n  cursor: pointer;\n  position: relative;\n}\n.is-calling input[type=checkbox]::after {\n  position: absolute;\n  top: 0;\n  background-color: #1e2030;\n  color: #fff;\n  width: 14px;\n  height: 14px;\n  display: inline-block;\n  visibility: visible;\n  padding-left: 0px;\n  text-align: center;\n  content: ' ';\n  border-radius: 2px;\n  box-sizing: border-box;\n  border: 1px solid #4A5264;\n}\n.is-calling input[type=checkbox]:checked::after {\n  content: \"\";\n  border-color: #4A70FF;\n  background-color: #4A70FF;\n}\n.is-calling input[type=checkbox]:checked::before {\n  content: '';\n  position: absolute;\n  top: 1px;\n  left: 5px;\n  width: 3px;\n  height: 8px;\n  border: solid white;\n  border-width: 0 2px 2px 0;\n  transform: rotate(45deg);\n  z-index: 1;\n}\n.close {\n  position: absolute;\n  right: 0px;\n  top: 0px;\n  padding: 8px;\n  color: #a8abb3;\n}\n.close:hover {\n  color: #1e2300;\n}\n.close svg {\n  width: 14px;\n  height: 14px;\n}\n.bg-main {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #fff, #fff, #25283a, #25283a) left / cover;\n}\n.bg-gap {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #f4f7fb, #f4f7fb, #101328, #101328) left / cover;\n}\n.bgEaseIn {\n  background-position: 100% 50%;\n}\n.bgEaseOut {\n  background-position: 0% 50%;\n}\n.bg-main,\n.bg-gap {\n  background-size: 800% 800%;\n  animation-fill-mode: both;\n}\n@keyframes bgEaseIn {\n  0% {\n    background-position: 0% 50%;\n  }\n  100% {\n    background-position: 100% 50%;\n  }\n}\n@keyframes bgEaseOut {\n  0% {\n    background-position: 100% 50%;\n  }\n  100% {\n    background-position: 0% 50%;\n  }\n}\nbody {\n  margin: 0;\n  overflow: hidden;\n  font-size: 12px;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  color: #a1abc2;\n}\np {\n  margin: 0;\n}\ntextarea::placeholder,\ninput::placeholder {\n  color: #A1ABC2;\n}\n::-webkit-scrollbar {\n  width: 4px;\n  height: 8px;\n}\n::-webkit-scrollbar-thumb {\n  background-color: #f3f5fa;\n  border-radius: 8px;\n}\n::-webkit-scrollbar-thumb:hover {\n  background-color: #aaa;\n}\n::-webkit-scrollbar-track-piece {\n  background-color: transparent;\n}\nsvg {\n  fill: currentColor;\n}\na {\n  text-decoration: none;\n}\nul,\nli {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n.ck {\n  width: 9px;\n  height: 9px;\n  color: #262d3d;\n  position: absolute;\n  top: 50%;\n  right: 10px;\n  transform: translateY(-50%);\n  display: none;\n}\n.is-selected .ck {\n  display: inline-block;\n}\ninput,\ntextarea,\nselect,\n.select,\n.select .options {\n  font-size: 12px;\n  color: #262d3d;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  border-radius: 3px;\n  border: 1px solid #e1e6f0;\n  background-color: #fff;\n}\ninput:focus,\ntextarea:focus,\nselect:focus,\n.select:focus,\n.select .options:focus {\n  outline: 0;\n  border-color: #c5ccdb;\n}\nselect,\n.select,\n.select .options p {\n  padding: 0 5px;\n}\n.select {\n  min-height: 26px;\n  position: relative;\n  cursor: default;\n}\n.select .options {\n  position: absolute;\n  z-index: 1;\n  left: -1px;\n  top: 29px;\n  width: 100%;\n  max-height: 73px;\n  overflow: auto;\n}\n.select .options p:hover,\n.select .options p.selected {\n  background: #f1f5fb;\n}\n.select p {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.cls:after {\n  content: \"\";\n  font-size: 0;\n  display: block;\n  height: 0;\n  clear: both;\n  visibility: hidden;\n}\n.disabled {\n  pointer-events: none;\n  opacity: .3;\n}\n.hidden {\n  display: none!important;\n}\n.overlay {\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  background: rgba(255, 255, 255, 0.6);\n}\ninput::-webkit-outer-spin-button,\ninput::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n}\ninput[type=\"number\"] {\n  -moz-appearance: textfield;\n}\n.is-loading {\n  border-radius: 100%;\n  margin: 2px;\n  border: 2px solid #ccc;\n  border-bottom-color: transparent;\n  height: 12px;\n  width: 12px;\n  margin-top: -7px;\n  background: 0 0!important;\n  display: inline-block;\n  -webkit-animation: rotate .75s 0s linear infinite;\n  animation: rotate .75s 0s linear infinite;\n}\n@keyframes rotate {\n  0% {\n    -webkit-transform: rotate(0);\n    transform: rotate(0);\n  }\n  50% {\n    -webkit-transform: rotate(180deg);\n    transform: rotate(180deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n.marquee {\n  white-space: nowrap;\n  overflow: hidden;\n  width: 80px;\n  position: relative;\n}\n.marquee p {\n  overflow: hidden;\n  float: left;\n  animation: move linear 6s infinite;\n}\n.marquee span {\n  display: inline-block;\n  padding-left: 10px;\n}\n.marquee::before,\n.marquee::after {\n  position: absolute;\n  top: 0;\n  z-index: 1;\n  content: ' ';\n  width: 10px;\n  height: 100%;\n  animation: bgfadeIn linear 2s;\n}\n.marquee::before {\n  left: -2px;\n  background: linear-gradient(90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n.marquee::after {\n  right: -2px;\n  background: linear-gradient(-90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n@keyframes move {\n  0% {\n    transform: translateX(0);\n  }\n  100% {\n    transform: translateX(-50%);\n  }\n}\n.q-notice {\n  position: absolute;\n  width: 100%;\n  left: 0;\n  top: 0;\n  text-align: center;\n}\n.q-notice.is-auto {\n  pointer-events: none;\n  z-index: 10;\n}\n.q-notice.is-cover {\n  height: 100%;\n  background: rgba(255, 255, 255, 0.7);\n}\n.q-notice .item {\n  margin: 4px auto;\n}\n.q-notice .info {\n  pointer-events: initial;\n  min-width: 170px;\n  padding: 0 15px;\n  line-height: 29px;\n  height: 28px;\n  overflow: hidden;\n  white-space: nowrap;\n  display: inline-block;\n  color: rgba(255, 255, 255, 0.8);\n  background-color: #25283a;\n  box-shadow: 0px 2px 18px 2px rgba(172, 172, 172, 0.3);\n  border-radius: 2px;\n  position: relative;\n}\n.q-notice .info .icon-tip {\n  vertical-align: -3px;\n  margin-right: 2px;\n  width: 14px;\n}\n.q-notice .info [data-action] * {\n  pointer-events: none;\n}\n.q-notice .is-error .info {\n  color: #fff;\n  background-color: #f75559;\n}\n.q-notice .is-success .info {\n  color: #fff;\n  background-color: #00cb83;\n}\n.q-notice .is-close-able .info {\n  text-align: left;\n}\n.q-notice .is-close-able .btn-close {\n  width: 12px;\n  height: 12px;\n  color: #fff;\n  margin: 8px -5px 0 10px;\n  float: right;\n}\n.q-notice .is-close-able .btn-close:hover {\n  opacity: .8;\n}\n.q-notice .is-warning .info {\n  color: rgba(0, 1, 10, 0.93);\n  border: 0.5px solid #FFEBDA;\n  background-color: #FFF8F0;\n  box-shadow: 0px 16px 32px rgba(18, 19, 25, 0.16), 0px 0px 8px rgba(18, 19, 25, 0.08), 0px 0px 1px rgba(18, 19, 25, 0.08);\n}\n.ringing {\n  animation: ringing 2s ease;\n  animation-fill-mode: both;\n  animation-iteration-count: infinite;\n}\n@keyframes ringing {\n  10% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  15% {\n    -webkit-transform: rotate(-15deg);\n    transform: rotate(-15deg);\n  }\n  20% {\n    -webkit-transform: rotate(15deg);\n    transform: rotate(15deg);\n  }\n  25% {\n    -webkit-transform: rotate(-10deg);\n    transform: rotate(-10deg);\n    color: #2af2ac;\n  }\n  30% {\n    -webkit-transform: rotate(5deg);\n    transform: rotate(5deg);\n    color: #2af2ac;\n  }\n  35% {\n    -webkit-transform: rotate(-5deg);\n    transform: rotate(-5deg);\n  }\n  40% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n}\n.ctimer {\n  border-radius: 50%;\n  height: 40px;\n  overflow: hidden;\n  position: relative;\n  width: 40px;\n  background: rgba(255, 255, 255, 0.3);\n}\n.ctimer svg {\n  position: absolute;\n  left: 0;\n  z-index: 2;\n}\n.ctimer .hand {\n  position: absolute;\n  top: 0;\n  height: 100%;\n  overflow: hidden;\n  width: 50%;\n}\n.ctimer .hand span {\n  border: 20px solid rgba(255, 255, 255, 0.3);\n  border-bottom-color: transparent;\n  border-left-color: transparent;\n  border-radius: 50%;\n  display: block;\n  height: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  transform: rotate(225deg);\n  width: 0;\n}\n.ctimer .hand-left {\n  left: 0;\n  transform: rotate(180deg);\n}\n.ctimer .hand-right {\n  right: 0;\n}\n.ctimer .hand span {\n  animation-duration: var(--post-edit-time);\n  animation-iteration-count: 1;\n  animation-timing-function: linear;\n  animation-fill-mode: both;\n}\n.ctimer .hand-left span {\n  animation-name: spinleft;\n}\n.ctimer .hand-right span {\n  animation-name: spinright;\n}\n@keyframes spinleft {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(225deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\n@keyframes spinright {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(405deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\n.message-template-info-container {\n  user-select: none;\n  -webkit-user-select: none;\n  padding: 16px;\n  position: relative;\n}\n.message-template-info-container .msg-template-title {\n  margin-bottom: 16px;\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 20px;\n  color: rgba(0, 1, 10, 0.93);\n}\n.message-template-info-container .empty {\n  display: flex;\n  height: 100%;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n}\n.message-template-info-container .empty .msg-svg {\n  width: 100px;\n  height: 100px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.message-template-info-container .empty .msg-info {\n  font-size: 14px;\n  line-height: 20px;\n}\n.message-template-info-container .message-template-container {\n  height: 364px;\n  margin-bottom: 48px;\n  display: flex;\n}\n.message-template-info-container .message-template-container .template-content {\n  display: flex;\n}\n.message-template-info-container .message-template-container .hidden {\n  display: none;\n}\n.message-template-info-container .message-template-container .template-left {\n  box-sizing: border-box;\n  height: 100%;\n  width: 188px;\n  border-right: 1px solid rgba(17, 32, 70, 0.13);\n  padding-right: 12px;\n}\n.message-template-info-container .message-template-container .template-left .search-input {\n  margin-bottom: 12px;\n}\n.message-template-info-container .message-template-container .template-left .item-selected,\n.message-template-info-container .message-template-container .template-left .item-selected:hover {\n  background: #F1F6FF;\n}\n.message-template-info-container .message-template-container .template-left .item-disabled,\n.message-template-info-container .message-template-container .template-left .item-disabled:hover {\n  color: rgba(6, 21, 66, 0.2);\n  cursor: default;\n  background: transparent;\n}\n.message-template-info-container .message-template-container .template-left #list {\n  height: 316px;\n  overflow: auto;\n}\n.message-template-info-container .message-template-container .template-left #list .highlight-text {\n  color: 4A70FF;\n}\n.message-template-info-container .message-template-container .template-left .category-item .arrow-tree {\n  width: 12px;\n  height: 12px;\n  fill: rgba(1, 11, 50, 0.41);\n}\n.message-template-info-container .message-template-container .template-left li {\n  border-radius: 3px;\n  height: 28px;\n  margin-bottom: 4px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  font-size: 14px;\n  line-height: 28px;\n  color: rgba(0, 1, 10, 0.93);\n  align-items: center;\n  box-sizing: border-box;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n.message-template-info-container .message-template-container .template-left li:hover {\n  background: rgba(36, 56, 97, 0.05);\n  cursor: pointer;\n}\n.message-template-info-container .message-template-container .template-left .load-more {\n  height: 28px;\n  margin-bottom: 4px;\n  font-size: 14px;\n  line-height: 20px;\n  color: #4A70FF;\n  display: flex;\n  align-items: center;\n}\n.message-template-info-container .message-template-container .template-left .load-more:hover {\n  cursor: pointer;\n}\n.message-template-info-container .message-template-container .template-left .category-children .load-more,\n.message-template-info-container .message-template-container .template-left .category-children li {\n  margin-left: 32px;\n}\n.message-template-info-container .message-template-container .template-right {\n  flex: 1;\n  overflow: auto;\n}\n.message-template-info-container .message-template-container .template-right .template-title-box {\n  padding: 8px 16px;\n  font-size: 12px;\n  line-height: 16px;\n}\n.message-template-info-container .message-template-container .template-right .template-box {\n  padding: 12px 16px;\n  color: rgba(0, 1, 10, 0.93);\n  font-weight: 400;\n  font-size: 14px;\n  line-height: 20px;\n  background: #ECEEF1;\n  border-radius: 20px;\n  width: 284px;\n  margin-left: 16px;\n  margin-bottom: 16px;\n  box-sizing: border-box;\n  position: relative;\n}\n.message-template-info-container .message-template-container .template-right .template-box .template-text a {\n  color: #4A70FF;\n}\n.message-template-info-container .message-template-container .template-right .template-box .template-text .highlight-text {\n  color: 4A70FF;\n}\n.message-template-info-container .message-template-container .template-right .template-box:before {\n  content: \"\";\n  position: absolute;\n  width: 23px;\n  height: 20px;\n  bottom: 0;\n  left: -23px;\n  border-right: 11px solid #ECEEF1;\n  border-radius: 0 0 20px 0;\n}\n.message-template-info-container .message-template-container .template-right .template-triggers {\n  margin-left: 16px;\n}\n.message-template-info-container .message-template-container .template-right .template-triggers .trigger {\n  display: flex;\n  margin-bottom: 4px;\n}\n.message-template-info-container .message-template-container .template-right .template-triggers .trigger .name {\n  flex: 1;\n  line-height: 32px;\n  font-size: 14px;\n}\n.message-template-info-container .message-template-container .template-right .template-triggers .trigger .detail {\n  width: 235px;\n  display: flex;\n  flex-direction: column;\n}\n.message-template-info-container .message-template-container .template-right .template-triggers .trigger .detail .client-attr-trigger {\n  width: 100%;\n  box-sizing: border-box;\n  height: 32px;\n  border: 1px solid rgba(17, 32, 70, 0.13);\n  border-radius: 3px;\n  padding: 6px 8px;\n  font-size: 14px;\n  line-height: 20px;\n  margin-bottom: 4px;\n}\n.message-template-info-container .message-template-container .template-right .template-triggers .trigger .detail .client-attr-trigger .trigger-arrow {\n  width: 12px;\n  height: 12px;\n  float: right;\n  padding-top: 2px;\n}\n.message-template-info-container .message-template-container .template-right .template-triggers .trigger .detail .client-attr-trigger .trigger-text {\n  display: inline-block;\n  max-width: 200px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.message-template-info-container .message-template-container .template-right .template-triggers .trigger .detail .client-attr-trigger .trigger-selected {\n  color: rgba(0, 1, 10, 0.93);\n}\n.message-template-info-container .message-template-container .template-right .template-triggers .trigger .detail .client-attr-trigger:hover {\n  border: 1px solid rgba(6, 21, 66, 0.2);\n}\n.message-template-info-container .message-template-container .template-right .template-triggers .trigger .detail .open-pop,\n.message-template-info-container .message-template-container .template-right .template-triggers .trigger .detail .open-pop:hover {\n  border: 1px solid #4A70FF;\n}\n.message-template-info-container .message-template-container .template-right .template-triggers .trigger .detail .attr-msg {\n  font-size: 12px;\n  line-height: 16px;\n}\n.message-template-info-container .message-template-container .no-access {\n  display: flex;\n  flex-direction: column;\n  text-align: center;\n  justify-content: center;\n  width: 100%;\n}\n.message-template-info-container .message-template-container .no-access .icon-default-setting {\n  width: 100px;\n  height: 100px;\n}\n.message-template-info-container .action-btn {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  padding: 16px;\n  text-align: right;\n  width: 100%;\n  box-sizing: border-box;\n  font-size: 0px;\n}\n.message-template-info-container .action-btn button {\n  padding: 6px 16px;\n  box-sizing: border-box;\n  height: 32px;\n  border-radius: 3px;\n  font-size: 14px;\n  line-height: 20px;\n  cursor: pointer;\n}\n.message-template-info-container .action-btn .button-normal {\n  background: #FFFFFF;\n  border: 1px solid rgba(17, 32, 70, 0.13);\n  margin-left: 8px;\n}\n.message-template-info-container .action-btn .button-disable {\n  border: 1px solid rgba(18, 42, 79, 0.08);\n  background: rgba(54, 79, 129, 0.04);\n  color: rgba(6, 21, 66, 0.2);\n  cursor: not-allowed;\n}\n.message-template-info-container .action-btn .button-primary {\n  background: #4A70FF;\n  border: 0;\n  color: #FFFFFF;\n  cursor: pointer;\n}\n.message-template-info-container .search-input {\n  width: 100%;\n  display: flex;\n  height: 32px;\n  border: 1px solid rgba(17, 32, 70, 0.13);\n  border-radius: 3px;\n}\n.message-template-info-container .search-input input {\n  flex: 1;\n  border: none;\n  font-weight: 400;\n  font-size: 14px;\n  line-height: 20px;\n  color: #262d3d;\n  padding: 6px 8px;\n  min-width: 50px;\n}\n.message-template-info-container .search-input .right-action {\n  display: flex;\n}\n.message-template-info-container .search-input .right-action .right-action-item {\n  box-sizing: border-box;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.message-template-info-container .search-input .right-action .right-action-item svg {\n  width: 14px;\n  height: 14px;\n  display: block;\n  fill: rgba(1, 11, 50, 0.41);\n}\n.message-template-info-container .search-input .right-action .right-action-clear {\n  width: 24px;\n  display: none;\n}\n.message-template-info-container .search-input .right-action .right-action-clear svg:hover {\n  cursor: pointer;\n  fill: rgba(3, 10, 38, 0.65);\n}\n.message-template-info-container .search-input .right-action .right-action-search {\n  width: 32px;\n}\n.message-template-info-container .search-input .right-action .right-action-search:hover {\n  cursor: pointer;\n}\n.message-template-info-container .search-input:hover {\n  border: 1px solid rgba(6, 21, 66, 0.2);\n}\n.message-template-info-container .search-input:hover .right-action-search {\n  width: 33px;\n  background: rgba(36, 56, 97, 0.05);\n  border-left: 1px solid rgba(6, 21, 66, 0.2);\n}\n.message-template-info-container .search-input-withvalue:hover .right-action .right-action-clear {\n  display: flex;\n}\n.message-template-info-container .search-input-focus,\n.message-template-info-container .search-input-focus:hover {\n  border: 1px solid #4A70FF;\n}\n.message-template-info-container .search-input-focus .right-action .right-action-search,\n.message-template-info-container .search-input-focus:hover .right-action .right-action-search {\n  width: 32px;\n  background: #4A70FF;\n  border-left: none;\n}\n.message-template-info-container .search-input-focus .right-action .right-action-search svg,\n.message-template-info-container .search-input-focus:hover .right-action .right-action-search svg {\n  fill: #FFFFFF;\n}\n.message-template-info-container .search-input-showclear .right-action .right-action-clear {\n  display: flex;\n}\n.message-template-info-container.is-calling {\n  background: #191B23;\n}\n.message-template-info-container.is-calling .msg-template-title {\n  color: rgba(250, 252, 255, 0.98);\n}\n.message-template-info-container.is-calling .template-left {\n  border-right: 1px solid rgba(189, 200, 255, 0.1);\n}\n.message-template-info-container.is-calling .template-left .category-item,\n.message-template-info-container.is-calling .template-left li {\n  color: rgba(250, 252, 255, 0.98);\n}\n.message-template-info-container.is-calling .template-left .category-item .arrow-tree,\n.message-template-info-container.is-calling .template-left li .arrow-tree {\n  fill: rgba(217, 226, 252, 0.51);\n}\n.message-template-info-container.is-calling .template-left .category-item:hover,\n.message-template-info-container.is-calling .template-left li:hover {\n  background: rgba(157, 179, 225, 0.05);\n}\n.message-template-info-container.is-calling .template-left .item-selected,\n.message-template-info-container.is-calling .template-left .item-selected:hover {\n  background: #313655;\n}\n.message-template-info-container.is-calling .template-left .item-disabled,\n.message-template-info-container.is-calling .template-left .item-disabled:hover {\n  color: rgba(198, 211, 251, 0.27);\n  cursor: default;\n  background: transparent;\n}\n.message-template-info-container.is-calling .template-right .template-title-box {\n  color: rgba(217, 226, 252, 0.51);\n}\n.message-template-info-container.is-calling .template-right .template-box {\n  background: #232530;\n  color: rgba(250, 252, 255, 0.98);\n}\n.message-template-info-container.is-calling .template-right .template-box a {\n  color: #668AFF;\n}\n.message-template-info-container.is-calling .template-right .template-box:before {\n  border-color: #232530;\n}\n.message-template-info-container.is-calling .template-right .template-triggers {\n  color: rgba(217, 226, 252, 0.51);\n}\n.message-template-info-container.is-calling .template-right .template-triggers .trigger .detail .client-attr-trigger {\n  border: 1px solid rgba(189, 200, 255, 0.1);\n}\n.message-template-info-container.is-calling .template-right .template-triggers .trigger .detail .client-attr-trigger .trigger-selected {\n  color: rgba(250, 252, 255, 0.98);\n}\n.message-template-info-container.is-calling .template-right .template-triggers .trigger .detail .client-attr-trigger:hover {\n  border: 1px solid rgba(189, 200, 255, 0.1);\n}\n.message-template-info-container.is-calling .action-btn .button-disable {\n  background: rgba(157, 179, 225, 0.03);\n  border: 1px solid rgba(157, 179, 225, 0.05);\n  border-radius: 3px;\n  color: rgba(198, 211, 251, 0.27);\n}\n.message-template-info-container.is-calling .action-btn .button-normal {\n  background: #191B23;\n  border: 1px solid rgba(189, 200, 255, 0.1);\n  border-radius: 3px;\n  color: rgba(250, 252, 255, 0.98);\n}\n.message-template-info-container.is-calling .search-input {\n  background: rgba(157, 179, 225, 0.05);\n  border: 1px solid rgba(189, 200, 255, 0.1);\n}\n.message-template-info-container.is-calling .search-input input {\n  color: #ffffff;\n  background: transparent;\n}\n.message-template-info-container.is-calling .search-input .right-action .right-action-item svg {\n  fill: rgba(217, 226, 252, 0.51);\n}\n.message-template-info-container.is-calling .search-input-focus,\n.message-template-info-container.is-calling .search-input-focus:hover {\n  border: 1px solid #4A70FF;\n}\n.message-template-info-container.is-calling .search-input-focus .right-action .right-action-search,\n.message-template-info-container.is-calling .search-input-focus:hover .right-action .right-action-search {\n  width: 32px;\n  background: #4A70FF;\n  border-left: none;\n}\n.message-template-info-container.is-calling .search-input-focus .right-action .right-action-search svg,\n.message-template-info-container.is-calling .search-input-focus:hover .right-action .right-action-search svg {\n  fill: #FFFFFF;\n}\n",""])},function(e,t){e.exports='<%\n    var status = status || \'normal\';\n    var isNormalState = status === \'normal\' || status === \'over\';\n    var msgCategory = [\n        {type: 0, label: \'营销短信\', key: \'marketing\'},\n        {type: 1, label: \'通知短信\', key: \'notice\'}\n    ];\n%>\n<div class="message-template-info-container bg-main <%=isNormalState ? \'\' : \'is-calling\'%>">\n    <div class="msg-template-title">选择发送内容</div>\n    <div class="message-template-container">\n        <div class="template-content">\n            <div class="template-left">\n                <div class="search-input">\n                    <input type="text" placeholder="模板名称/短信内容" class="search-input-content"></input>\n                    <div class="right-action">\n                        <div class="right-action-clear right-action-item">\n                            <svg class="icon-input-clear" viewBox="0 0 14 14"><use xlink:href="#input-clear"></use></svg>\n                        </div>\n                        <div class="right-action-search right-action-item">\n                            <svg class="icon-input-search" viewBox="0 0 14 14"><use xlink:href="#input-search"></use></svg>\n                        </div>\n                    </div>\n                </div>\n                <ul id="list">\n                    <div id="normal-display">\n                        <%for (var i = 0; i < msgCategory.length; i++) {\n                            var item = msgCategory[i];\n                        %>\n                            <li class="category-item list-item" data-key=<%=item.key%>>\n                                <svg class="icon arrow-tree" viewBox="0 0 12 12"><use xlink:href="#arrow_right_small_line"></use></svg>\n                                <svg class="icon arrow-tree hidden" viewBox="0 0 12 12"><use xlink:href="#arrow_down_small_line"></use></svg>\n                                <%=item.label%>\n                            </li>\n                            <div class="category-children hidden" id="<%=\'group-\' + item.key%>">\n                                <ul id="<%=\'ul-\' + item.key%>"></ul>\n                                <div class="load-more hidden" data-key=<%=item.key%>>加载更多</div>\n                            </div>\n                        <%}%>\n                    </div>\n                    <div id="group-search" class="hidden">\n                        <ul id="ul-search"></ul>\n                        <div class="load-more hidden" data-key="search">加载更多</div>\n                        <div class="empty hidden">\n                            <div class="msg-svg">\n                                <svg class="icon-default-search empty-svg" viewBox="0 0 100 100"><use xlink:href="#default-search<%=isNormalState ? \'\' : \'-dark\'%>"></use></svg>\n                            </div>\n                            <div class="msg-info">暂无符合条件的短信</div>\n                        </div>\n                    </div>\n                </ui>\n            </div>\n            <div class="template-right hidden">\n                <div class="template-title-box">模板：<span class="template-title"></span></div>\n                <div class="template-box">\n                    <div class="template-text">\n                    </div>\n                </div>\n                <div class="template-triggers"></div>\n            </div>\n        </div>\n        <div class="no-access hidden">\n            <div class="info-img">\n                <svg class="icon-default-setting empty-svg-setting" viewBox="0 0 100 100"><use xlink:href="#default_setting<%=isNormalState ? \'\' : \'-dark\'%>"></use></svg>\n            </div>\n            <div class="info1">请联系管理员先在「企点账户中心」-「企业管理」-「第三方账</div>\n            <div class="info2">号」-「短信账号」中完成账号配置</div>\n        </div>\n    </div>\n    <div class="action-btn">\n        <button class="button-disable button-comfirm">确定</button>\n        <button class="button-normal button-cancel">取消</button>\n    </div>\n</div>\n'},function(e,t){e.exports="'use strict';\n\nvar qd = window.qd;\nvar count = 15;\nvar msgTempData = {};\nvar nowSearch = '';\nvar msgTempStatus = {\n    marketing: {\n        type: 0,\n        index: 1,\n        more: false,\n        listLength: 0,\n        total: 0\n    },\n    notice: {\n        type: 1,\n        index: 1,\n        more: false,\n        listLength: 0,\n        total: 0\n    },\n    search: {\n        type: -1,\n        index: 1,\n        more: false,\n        listLength: 0,\n        total: 0\n    }\n};\n\nvar latestTemp = qd.getState('finishedMsgTemp') || qd.getState('latestTemp', true) || {\n    temp: {},\n    detail: []\n};\nif (qd.getState('msgTempAccess')) {\n    latestTemp = {\n        temp: {},\n        detail: []\n    };\n}\n\nvar $currentSelectedItem = null;\nvar $latestedSelect = null;\nvar currentSelectedTemp = latestTemp.temp || {};\nvar currentSelectedDetail = latestTemp.detail || [];\nvar currentSelectAttrIndex = -1;\nvar tel = '';\n\nfunction onShow(e, params) {\n    tel = params ? params.tel || '' : '';\n    initSearchInput();\n    var msgTempStatusIndex = 0;\n\n    var _loop = function _loop(category) {\n        if (category !== 'search') {\n            setTimeout(function () {\n                getMsgTemplateList(category);\n            }, msgTempStatusIndex * 200);\n        }\n        msgTempStatusIndex++;\n    };\n\n    for (var category in msgTempStatus) {\n        _loop(category);\n    }\n    listAction();\n    initActionBtns();\n    renderTempDetail();\n    checkTempFinish();\n    initEmptySvg();\n}\n\nvar getValue = function getValue() {\n    var $searchInputContent = $('.search-input-content');\n    return $searchInputContent.elems[0].value || '';\n};\n\nvar initSearchInput = function initSearchInput() {\n    var $searchInput = $('.search-input');\n    var $searchInputContent = $('.search-input-content');\n    var $searchClearBtn = $('.icon-input-clear');\n    var $searchSearchBtn = $('.right-action-search');\n    $searchInputContent.bind('focus', function (e) {\n        $searchInput.addClass('search-input-focus');\n        if (getValue()) {\n            $searchInput.addClass('search-input-showclear');\n        }\n    });\n    $searchInputContent.bind('keyup', function (e) {\n        if (getValue()) {\n            $searchInput.addClass('search-input-showclear');\n            $searchInput.addClass('search-input-withvalue');\n        } else {\n            $searchInput.removeClass('search-input-showclear');\n            $searchInput.removeClass('search-input-withvalue');\n        }\n        if (e.keyCode === 13) {\n            $searchSearchBtn.elems[0].click();\n        }\n    });\n    $searchInputContent.bind('blur', function (e) {\n        $searchInput.removeClass('search-input-focus');\n        $searchInput.removeClass('search-input-showclear');\n    });\n    $searchClearBtn.bind('click', function (e) {\n        $searchInputContent.elems[0].value = '';\n        $searchInput.removeClass('search-input-withvalue');\n        $searchInputContent.elems[0].focus();\n        $searchSearchBtn.elems[0].click();\n    });\n    $searchSearchBtn.bind('click', function (e) {\n        nowSearch = getValue();\n        handleSearch();\n    });\n};\n\nvar getMsgTemplateList = function getMsgTemplateList(category) {\n    var keyword = nowSearch;\n    var $ul = $('#ul-' + category);\n    qd.handle({\n        action: 'msgTemplateList',\n        params: {\n            keyword: keyword || '',\n            count: count,\n            type: msgTempStatus[category].type,\n            index: msgTempStatus[category].index\n        },\n        success: function success(res) {\n            var $noAccess = $('.no-access');\n            var $templateContent = $('.template-content');\n            var access = res.data.access;\n            qd.setState('msgTempAccess', access);\n            if (access) {\n                $templateContent.addClass('hidden');\n                $noAccess.removeClass('hidden');\n            }\n            var list = res.data.records || [];\n            msgTempStatus[category].listLength += list.length;\n            msgTempStatus[category].total = res.data.total;\n            if (msgTempStatus[category].listLength >= msgTempStatus[category].total || list.length < count) {\n                msgTempStatus[category].more = false;\n            } else {\n                msgTempStatus[category].more = true;\n            }\n            var $moreBtn = $('#group-' + category + ' .load-more');\n            if (msgTempStatus[category].more) {\n                $moreBtn.removeClass('hidden');\n            } else {\n                $moreBtn.addClass('hidden');\n            }\n            var $empty = $('#group-search .empty');\n            if (category === 'search' && !list.length && msgTempStatus[category].index === 1) {\n                $empty.removeClass('hidden');\n            } else {\n                $empty.addClass('hidden');\n            }\n            list.length && renderList(category, list);\n            msgTempStatus[category].index++;\n        },\n        fail: function fail(err) {\n            notice.error(err.msg || '获取短信模板失败');\n        }\n    });\n};\n\nvar renderList = function renderList(category, list) {\n    var $ul = $('#ul-' + category);\n    var lis = '';\n    var keyword = nowSearch;\n    var getSelectedItem = false;\n    list.forEach(function (item) {\n        var disabled = Boolean(item.sence) || item.placeHolderRes && item.placeHolderRes.length;\n        item.text = item.whole_content;\n        msgTempData[item.id] = item;\n        var currentSelectedTempId = currentSelectedTemp.id || '';\n        if (!$currentSelectedItem && currentSelectedTempId && item.id === currentSelectedTempId) {\n            lis += '<li title=\"' + (disabled ? '暂不支持发送带变量的短信' : '') + '\" class=\"' + (disabled ? 'item-disabled ' : '') + 'item-selected\" data-id=\"' + item.id + '\">' + highLight(item.name, keyword) + '</li>';\n            getSelectedItem = true;\n        } else {\n            lis += '<li title=\"' + (disabled ? '暂不支持发送带变量的短信' : '') + '\" class=\"' + (disabled ? 'item-disabled' : '') + '\" data-id=\"' + item.id + '\">' + highLight(item.name, keyword) + '</li>';\n        }\n    });\n    $ul.append(lis);\n    if (getSelectedItem) {\n        $currentSelectedItem = $('.item-selected');\n    }\n};\n\nvar handleSearch = function handleSearch() {\n    var keyword = nowSearch;\n    var $normal = $('#normal-display');\n    var $search = $('#group-search');\n    $currentSelectedItem = null;\n    renderTempDetail();\n    var reload = function reload(category) {\n        var $ul = $('#ul-' + category);\n        var ulEle = $ul.elems[0];\n        if (ulEle && ulEle.childNodes.length) {\n            while (ulEle.childNodes.length) {\n                ulEle.removeChild(ulEle.childNodes[0]);\n            }\n        }\n        msgTempStatus[category].index = 1;\n        msgTempStatus[category].more = false;\n        msgTempStatus[category].listLength = 0;\n        msgTempStatus[category].total = 0;\n        getMsgTemplateList(category);\n    };\n    if (keyword) {\n        $normal.addClass('hidden');\n        $search.removeClass('hidden');\n        reload('search');\n    } else {\n        $search.addClass('hidden');\n        $normal.removeClass('hidden');\n        for (var category in msgTempStatus) {\n            if (category !== 'search') {\n                reload(category);\n            }\n        }\n        var $categoryItems = $('.category-item');\n        $categoryItems.elems.forEach(function (item) {\n            var $arrowiRight = $(item.children[0]);\n            var $arrowDown = $(item.children[1]);\n            $arrowiRight.removeClass('hidden');\n            $arrowDown.addClass('hidden');\n            var key = $(item).prop('data-key');\n            var $categoryGroup = $('#group-' + key);\n            $categoryGroup && $categoryGroup.addClass('hidden');\n        });\n    }\n};\n\nvar listAction = function listAction() {\n    var $categoryItems = $('.category-item');\n    $categoryItems.elems.forEach(function (item) {\n        $(item).bind('click', function () {\n            var $arrowiRight = $(item.children[0]);\n            var $arrowDown = $(item.children[1]);\n            var visibleArray = [$arrowiRight, $arrowDown];\n            var key = $(item).prop('data-key');\n            if (key) {\n                var $categoryGroup = $('#group-' + key);\n                $categoryGroup && visibleArray.push($categoryGroup);\n            }\n            visibleArray.forEach(function (dom) {\n                if (dom.hasClass('hidden')) {\n                    dom.removeClass('hidden');\n                } else {\n                    dom.addClass('hidden');\n                }\n            });\n        });\n    });\n    var $loadMoreBtns = $('.load-more');\n    $loadMoreBtns.elems.forEach(function (item) {\n        $(item).bind('click', function () {\n            var key = $(item).prop('data-key');\n            getMsgTemplateList(key);\n        });\n    });\n    var $List = $('#list');\n    $List.bind('click', function (e) {\n        var ele = e.target;\n        while (ele.parentElement && $List.elems[0].contains(ele) && ele.nodeName !== 'LI') {\n            ele = ele.parentElement;\n        }\n        var $ele = $(ele);\n\n        if ($ele && !$ele.hasClass('category-item') && !$ele.hasClass('item-disabled') && ele.nodeName === 'LI') {\n            $currentSelectedItem && $currentSelectedItem.removeClass('item-selected');\n            $currentSelectedItem = $ele;\n            $ele.addClass('item-selected');\n            var id = $ele.prop('data-id');\n            $latestedSelect && $latestedSelect.removeClass('open-pop');\n\n            currentSelectedTemp = msgTempData[id];\n            currentSelectedDetail = [];\n\n            renderTempDetail();\n            checkTempFinish();\n        }\n    });\n};\n\nvar initActionBtns = function initActionBtns() {\n    var $comfirmBtn = $('.button-comfirm');\n    var $cancelBtn = $('.button-cancel');\n    $comfirmBtn.bind('click', function (e) {\n        if ($comfirmBtn.hasClass('button-disable')) {\n            return;\n        }\n        qd.setState('finishedMsgTemp', {\n            temp: currentSelectedTemp,\n            detail: currentSelectedDetail\n        });\n        qd.hidePage('messageTemplateFrame');\n        if (tel) {\n            qd.trigger('_messageTemplateFrameSend', tel);\n            return;\n        }\n        qd.trigger('_messageTemplateFrame');\n    });\n    $cancelBtn.bind('click', function (e) {\n        qd.hidePage('messageTemplateFrame');\n    });\n};\n\nvar renderTempDetail = function renderTempDetail() {\n    var $right = $('.template-right');\n    if (!currentSelectedTemp.id) {\n        $right.addClass('hidden');\n    } else {\n        $right.removeClass('hidden');\n\n        var $templateTitle = $('.template-title');\n        $templateTitle.html(currentSelectedTemp.name || '');\n\n        var $templateText = $('.template-text');\n        var keyword = nowSearch;\n        $templateText.html(highLight(currentSelectedTemp.text || '', keyword).replaceAll('&lt;a&gt;', '<a>').replaceAll('&lt;/a&gt;', '</a>'));\n\n        var $templateTriggers = $('.template-triggers');\n        var triggers = '';\n\n        $templateTriggers.html(triggers);\n        $('.client-attr-trigger').bind('click', function (e) {\n            var triggerIndex = $(e.target).prop('data-index');\n            qd.togglePage({\n                trigger: e.currentTarget,\n                offsetX: 305,\n                offsetY: 110,\n                name: 'clientAttrFrame',\n                params: {\n                    triggerIndex: triggerIndex,\n                    key: currentSelectedDetail[triggerIndex] ? currentSelectedDetail[triggerIndex].key || null : null\n                }\n            });\n        });\n        qd.one('_clientAttrFrameShow', function (e, index) {\n            $latestedSelect && $latestedSelect.removeClass('open-pop');\n            currentSelectAttrIndex = index;\n            var $trigger = $('.client-attr-trigger-' + index);\n            $trigger.addClass('open-pop');\n            $latestedSelect = $trigger;\n        });\n        qd.one('_clientAttrFrameHide', function () {\n            $latestedSelect && $latestedSelect.removeClass('open-pop');\n            currentSelectAttrIndex = -1;\n        });\n        qd.one('_clientAttrFrameComfirm', function (e, params) {\n            var index = params.triggerIndex || -1;\n            currentSelectedDetail[index].key = params.attr ? params.attr.key || '' : '';\n            currentSelectedDetail[index].label = params.attr ? params.attr.label || '' : '';\n            var $trigger = $('.client-attr-trigger-' + index + ' .trigger-text');\n            $trigger.html(currentSelectedDetail[index].label);\n            $trigger.addClass('trigger-selected');\n            checkTempFinish();\n        });\n    }\n};\n\nvar checkTempFinish = function checkTempFinish() {\n    var validate = Boolean(currentSelectedTemp.id);\n\n    var $comfirmBtn = $('.button-comfirm');\n    var $cancelBtn = $('.button-cancel');\n    if (validate) {\n        $comfirmBtn.addClass('button-primary');\n        $comfirmBtn.removeClass('button-disable');\n    } else {\n        $comfirmBtn.removeClass('button-primary');\n        $comfirmBtn.addClass('button-disable');\n    }\n};\n\nvar initEmptySvg = function initEmptySvg() {\n    qd.one('stateChange._historyListEmpty', function (e, status) {\n        var isCallingState = qd.isCallingState(status);\n        var $emptySvg = $('.empty-svg');\n        isCallingState && $emptySvg && $emptySvg.html('<use xlink:href=\"#default-search-dark\"></use>');\n        var $emptySvgSetting = $('.empty-svg-setting');\n        isCallingState && $emptySvgSetting && $emptySvgSetting.html('<use xlink:href=\"#default_setting-dark\"></use>');\n    });\n};"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(18),o=r(i),a=n(24),s=r(a),l=n(608),c=r(l),u=n(609),d=r(u),f=n(610),p=r(f),h=n(26),g=r(h),m=n(27),v=function(e,t){var n=s.default.call(this.stator,{name:"clientAttrFrame",style:{width:336,background:"#fff"},autoHeight:".client-attr-info-container",data:e,script:p.default,cssText:c.default.toString(),html:(0,g.default)(m)+d.default,props:{}});return new o.default(n,t)};t.default=v},function(e,t,n){t=e.exports=n(19)(!1),t.i(n(25),""),t.push([e.i,"h2 {\n  margin: 0;\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 1.5;\n  padding: 10px 15px 5px;\n  color: #262d3d;\n}\n.icon {\n  display: inline-block;\n  width: 16px;\n  overflow: hidden;\n  color: #a1abc2;\n}\n.icon svg {\n  width: 100%;\n}\n.icon.green:hover {\n  color: #01c480;\n}\na:hover .icon,\n.icon:hover {\n  color: #8490ae;\n}\n.drop {\n  overflow: hidden;\n  position: relative;\n  padding-right: 12px;\n}\n.drop .arrow {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 8px;\n  margin-left: 3px;\n}\n.icon.is-on,\n.text-stress {\n  color: #262d3d;\n}\n.text-hint {\n  color: #d4d8e1;\n}\n.green {\n  color: #00d48a;\n  border-color: #00d48a;\n}\n.red {\n  color: #f75559;\n}\n.blue {\n  color: #4a70ff;\n}\n.orange {\n  color: #ff8345;\n}\n.is-calling {\n  color: #a1abc2;\n}\n.is-calling h2 {\n  color: #f8f9fB;\n}\n.is-calling::-webkit-scrollbar-thumb,\n.is-calling ::-webkit-scrollbar-thumb {\n  background-color: #696c7c;\n}\n.is-calling::-webkit-scrollbar-thumb:hover,\n.is-calling ::-webkit-scrollbar-thumb:hover {\n  background-color: #50535f;\n}\n.is-calling .is-loading {\n  border: 2px solid #fff;\n  border-bottom-color: transparent;\n}\n.is-calling .text {\n  color: #a1abc2;\n}\n.is-calling .icon.is-on,\n.is-calling .text-stress {\n  color: #f8f9fB;\n}\n.is-calling .green {\n  color: #00cb83;\n  border-color: #00cb83;\n}\n.is-calling .red {\n  color: #e1464a;\n}\n.is-calling .blue {\n  color: #6283ff;\n}\n.is-calling.bg-main,\n.is-calling .bg-main {\n  background-position: 100% 50%;\n}\n.is-calling .bg-gap {\n  background-position: 100% 50%;\n}\n.is-calling .ck {\n  color: #f8f9fB;\n}\n.is-calling textarea,\n.is-calling input,\n.is-calling select,\n.is-calling .select,\n.is-calling .select .options {\n  border-color: #4a5264;\n  color: #f8f9fB;\n  background-color: #25283a;\n}\n.is-calling textarea:focus,\n.is-calling input:focus,\n.is-calling select:focus,\n.is-calling .select:focus,\n.is-calling .select .options:focus {\n  border-color: #8d96aa;\n}\n.is-calling textarea::placeholder,\n.is-calling input::placeholder,\n.is-calling select::placeholder,\n.is-calling .select::placeholder,\n.is-calling .select .options::placeholder {\n  color: #a1abc2;\n}\n.is-calling .select .options p:hover,\n.is-calling .select .options .selected {\n  background-color: #383a4a;\n}\n.is-calling .close {\n  color: #78849e;\n}\n.is-calling .close:hover {\n  color: #fff;\n}\n.is-calling input[type=checkbox] {\n  cursor: pointer;\n  position: relative;\n}\n.is-calling input[type=checkbox]::after {\n  position: absolute;\n  top: 0;\n  background-color: #1e2030;\n  color: #fff;\n  width: 14px;\n  height: 14px;\n  display: inline-block;\n  visibility: visible;\n  padding-left: 0px;\n  text-align: center;\n  content: ' ';\n  border-radius: 2px;\n  box-sizing: border-box;\n  border: 1px solid #4A5264;\n}\n.is-calling input[type=checkbox]:checked::after {\n  content: \"\";\n  border-color: #4A70FF;\n  background-color: #4A70FF;\n}\n.is-calling input[type=checkbox]:checked::before {\n  content: '';\n  position: absolute;\n  top: 1px;\n  left: 5px;\n  width: 3px;\n  height: 8px;\n  border: solid white;\n  border-width: 0 2px 2px 0;\n  transform: rotate(45deg);\n  z-index: 1;\n}\n.close {\n  position: absolute;\n  right: 0px;\n  top: 0px;\n  padding: 8px;\n  color: #a8abb3;\n}\n.close:hover {\n  color: #1e2300;\n}\n.close svg {\n  width: 14px;\n  height: 14px;\n}\n.bg-main {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #fff, #fff, #25283a, #25283a) left / cover;\n}\n.bg-gap {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #f4f7fb, #f4f7fb, #101328, #101328) left / cover;\n}\n.bgEaseIn {\n  background-position: 100% 50%;\n}\n.bgEaseOut {\n  background-position: 0% 50%;\n}\n.bg-main,\n.bg-gap {\n  background-size: 800% 800%;\n  animation-fill-mode: both;\n}\n@keyframes bgEaseIn {\n  0% {\n    background-position: 0% 50%;\n  }\n  100% {\n    background-position: 100% 50%;\n  }\n}\n@keyframes bgEaseOut {\n  0% {\n    background-position: 100% 50%;\n  }\n  100% {\n    background-position: 0% 50%;\n  }\n}\nbody {\n  margin: 0;\n  overflow: hidden;\n  font-size: 12px;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  color: #a1abc2;\n}\np {\n  margin: 0;\n}\ntextarea::placeholder,\ninput::placeholder {\n  color: #A1ABC2;\n}\n::-webkit-scrollbar {\n  width: 4px;\n  height: 8px;\n}\n::-webkit-scrollbar-thumb {\n  background-color: #f3f5fa;\n  border-radius: 8px;\n}\n::-webkit-scrollbar-thumb:hover {\n  background-color: #aaa;\n}\n::-webkit-scrollbar-track-piece {\n  background-color: transparent;\n}\nsvg {\n  fill: currentColor;\n}\na {\n  text-decoration: none;\n}\nul,\nli {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n.ck {\n  width: 9px;\n  height: 9px;\n  color: #262d3d;\n  position: absolute;\n  top: 50%;\n  right: 10px;\n  transform: translateY(-50%);\n  display: none;\n}\n.is-selected .ck {\n  display: inline-block;\n}\ninput,\ntextarea,\nselect,\n.select,\n.select .options {\n  font-size: 12px;\n  color: #262d3d;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  border-radius: 3px;\n  border: 1px solid #e1e6f0;\n  background-color: #fff;\n}\ninput:focus,\ntextarea:focus,\nselect:focus,\n.select:focus,\n.select .options:focus {\n  outline: 0;\n  border-color: #c5ccdb;\n}\nselect,\n.select,\n.select .options p {\n  padding: 0 5px;\n}\n.select {\n  min-height: 26px;\n  position: relative;\n  cursor: default;\n}\n.select .options {\n  position: absolute;\n  z-index: 1;\n  left: -1px;\n  top: 29px;\n  width: 100%;\n  max-height: 73px;\n  overflow: auto;\n}\n.select .options p:hover,\n.select .options p.selected {\n  background: #f1f5fb;\n}\n.select p {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.cls:after {\n  content: \"\";\n  font-size: 0;\n  display: block;\n  height: 0;\n  clear: both;\n  visibility: hidden;\n}\n.disabled {\n  pointer-events: none;\n  opacity: .3;\n}\n.hidden {\n  display: none!important;\n}\n.overlay {\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  background: rgba(255, 255, 255, 0.6);\n}\ninput::-webkit-outer-spin-button,\ninput::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n}\ninput[type=\"number\"] {\n  -moz-appearance: textfield;\n}\n.is-loading {\n  border-radius: 100%;\n  margin: 2px;\n  border: 2px solid #ccc;\n  border-bottom-color: transparent;\n  height: 12px;\n  width: 12px;\n  margin-top: -7px;\n  background: 0 0!important;\n  display: inline-block;\n  -webkit-animation: rotate .75s 0s linear infinite;\n  animation: rotate .75s 0s linear infinite;\n}\n@keyframes rotate {\n  0% {\n    -webkit-transform: rotate(0);\n    transform: rotate(0);\n  }\n  50% {\n    -webkit-transform: rotate(180deg);\n    transform: rotate(180deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n.marquee {\n  white-space: nowrap;\n  overflow: hidden;\n  width: 80px;\n  position: relative;\n}\n.marquee p {\n  overflow: hidden;\n  float: left;\n  animation: move linear 6s infinite;\n}\n.marquee span {\n  display: inline-block;\n  padding-left: 10px;\n}\n.marquee::before,\n.marquee::after {\n  position: absolute;\n  top: 0;\n  z-index: 1;\n  content: ' ';\n  width: 10px;\n  height: 100%;\n  animation: bgfadeIn linear 2s;\n}\n.marquee::before {\n  left: -2px;\n  background: linear-gradient(90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n.marquee::after {\n  right: -2px;\n  background: linear-gradient(-90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n@keyframes move {\n  0% {\n    transform: translateX(0);\n  }\n  100% {\n    transform: translateX(-50%);\n  }\n}\n.q-notice {\n  position: absolute;\n  width: 100%;\n  left: 0;\n  top: 0;\n  text-align: center;\n}\n.q-notice.is-auto {\n  pointer-events: none;\n  z-index: 10;\n}\n.q-notice.is-cover {\n  height: 100%;\n  background: rgba(255, 255, 255, 0.7);\n}\n.q-notice .item {\n  margin: 4px auto;\n}\n.q-notice .info {\n  pointer-events: initial;\n  min-width: 170px;\n  padding: 0 15px;\n  line-height: 29px;\n  height: 28px;\n  overflow: hidden;\n  white-space: nowrap;\n  display: inline-block;\n  color: rgba(255, 255, 255, 0.8);\n  background-color: #25283a;\n  box-shadow: 0px 2px 18px 2px rgba(172, 172, 172, 0.3);\n  border-radius: 2px;\n  position: relative;\n}\n.q-notice .info .icon-tip {\n  vertical-align: -3px;\n  margin-right: 2px;\n  width: 14px;\n}\n.q-notice .info [data-action] * {\n  pointer-events: none;\n}\n.q-notice .is-error .info {\n  color: #fff;\n  background-color: #f75559;\n}\n.q-notice .is-success .info {\n  color: #fff;\n  background-color: #00cb83;\n}\n.q-notice .is-close-able .info {\n  text-align: left;\n}\n.q-notice .is-close-able .btn-close {\n  width: 12px;\n  height: 12px;\n  color: #fff;\n  margin: 8px -5px 0 10px;\n  float: right;\n}\n.q-notice .is-close-able .btn-close:hover {\n  opacity: .8;\n}\n.q-notice .is-warning .info {\n  color: rgba(0, 1, 10, 0.93);\n  border: 0.5px solid #FFEBDA;\n  background-color: #FFF8F0;\n  box-shadow: 0px 16px 32px rgba(18, 19, 25, 0.16), 0px 0px 8px rgba(18, 19, 25, 0.08), 0px 0px 1px rgba(18, 19, 25, 0.08);\n}\n.ringing {\n  animation: ringing 2s ease;\n  animation-fill-mode: both;\n  animation-iteration-count: infinite;\n}\n@keyframes ringing {\n  10% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  15% {\n    -webkit-transform: rotate(-15deg);\n    transform: rotate(-15deg);\n  }\n  20% {\n    -webkit-transform: rotate(15deg);\n    transform: rotate(15deg);\n  }\n  25% {\n    -webkit-transform: rotate(-10deg);\n    transform: rotate(-10deg);\n    color: #2af2ac;\n  }\n  30% {\n    -webkit-transform: rotate(5deg);\n    transform: rotate(5deg);\n    color: #2af2ac;\n  }\n  35% {\n    -webkit-transform: rotate(-5deg);\n    transform: rotate(-5deg);\n  }\n  40% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n}\n.ctimer {\n  border-radius: 50%;\n  height: 40px;\n  overflow: hidden;\n  position: relative;\n  width: 40px;\n  background: rgba(255, 255, 255, 0.3);\n}\n.ctimer svg {\n  position: absolute;\n  left: 0;\n  z-index: 2;\n}\n.ctimer .hand {\n  position: absolute;\n  top: 0;\n  height: 100%;\n  overflow: hidden;\n  width: 50%;\n}\n.ctimer .hand span {\n  border: 20px solid rgba(255, 255, 255, 0.3);\n  border-bottom-color: transparent;\n  border-left-color: transparent;\n  border-radius: 50%;\n  display: block;\n  height: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  transform: rotate(225deg);\n  width: 0;\n}\n.ctimer .hand-left {\n  left: 0;\n  transform: rotate(180deg);\n}\n.ctimer .hand-right {\n  right: 0;\n}\n.ctimer .hand span {\n  animation-duration: var(--post-edit-time);\n  animation-iteration-count: 1;\n  animation-timing-function: linear;\n  animation-fill-mode: both;\n}\n.ctimer .hand-left span {\n  animation-name: spinleft;\n}\n.ctimer .hand-right span {\n  animation-name: spinright;\n}\n@keyframes spinleft {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(225deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\n@keyframes spinright {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(405deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\n.client-attr-info-container {\n  user-select: none;\n  -webkit-user-select: none;\n  padding: 16px;\n  position: relative;\n}\n.client-attr-info-container .empty {\n  display: flex;\n  height: 100%;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n}\n.client-attr-info-container .empty .msg-svg {\n  width: 100px;\n  height: 100px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.client-attr-info-container .empty .msg-info {\n  font-size: 14px;\n  line-height: 20px;\n}\n.client-attr-info-container .client-attr-title {\n  margin-bottom: 16px;\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 20px;\n  color: rgba(0, 1, 10, 0.93);\n}\n.client-attr-info-container #list {\n  margin-top: 12px;\n  height: 280px;\n  overflow: auto;\n  margin-bottom: 48px;\n}\n.client-attr-info-container #list .list-item {\n  padding: 4px;\n  font-size: 14px;\n  line-height: 20px;\n  box-sizing: border-box;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  border-radius: 3px;\n  color: rgba(0, 1, 10, 0.93);\n}\n.client-attr-info-container #list .list-item:hover {\n  background: rgba(36, 56, 97, 0.05);\n  cursor: pointer;\n}\n.client-attr-info-container #list .list-item .highlight-text {\n  color: #4A70FF;\n}\n.client-attr-info-container #list .item-selected,\n.client-attr-info-container #list .item-selected:hover {\n  background: #F1F6FF;\n}\n.client-attr-info-container #list .load-more {\n  color: #4A70FF;\n  cursor: pointer;\n  padding: 4px;\n  font-size: 14px;\n  line-height: 20px;\n}\n.client-attr-info-container .action-btn {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  padding: 16px;\n  text-align: right;\n  width: 100%;\n  box-sizing: border-box;\n  font-size: 0px;\n}\n.client-attr-info-container .action-btn button {\n  padding: 6px 16px;\n  box-sizing: border-box;\n  height: 32px;\n  border-radius: 3px;\n  font-size: 14px;\n  line-height: 20px;\n  cursor: pointer;\n}\n.client-attr-info-container .action-btn .button-normal {\n  background: #FFFFFF;\n  border: 1px solid rgba(17, 32, 70, 0.13);\n  margin-left: 8px;\n}\n.client-attr-info-container .action-btn .button-disable {\n  border: 1px solid rgba(18, 42, 79, 0.08);\n  background: rgba(54, 79, 129, 0.04);\n  color: rgba(6, 21, 66, 0.2);\n  cursor: not-allowed;\n}\n.client-attr-info-container .action-btn .button-primary {\n  background: #4A70FF;\n  border: 0;\n  color: #FFFFFF;\n  cursor: pointer;\n}\n.client-attr-info-container.is-calling .history-title {\n  color: rgba(250, 252, 255, 0.98);\n}\n.client-attr-info-container .search-input {\n  width: 100%;\n  display: flex;\n  height: 32px;\n  border: 1px solid rgba(17, 32, 70, 0.13);\n  border-radius: 3px;\n}\n.client-attr-info-container .search-input input {\n  flex: 1;\n  border: none;\n  font-weight: 400;\n  font-size: 14px;\n  line-height: 20px;\n  color: #262d3d;\n  padding: 6px 8px;\n  min-width: 50px;\n}\n.client-attr-info-container .search-input .right-action {\n  display: flex;\n}\n.client-attr-info-container .search-input .right-action .right-action-item {\n  box-sizing: border-box;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.client-attr-info-container .search-input .right-action .right-action-item svg {\n  width: 14px;\n  height: 14px;\n  display: block;\n  fill: rgba(1, 11, 50, 0.41);\n}\n.client-attr-info-container .search-input .right-action .right-action-clear {\n  width: 24px;\n  display: none;\n}\n.client-attr-info-container .search-input .right-action .right-action-clear svg:hover {\n  cursor: pointer;\n  fill: rgba(3, 10, 38, 0.65);\n}\n.client-attr-info-container .search-input .right-action .right-action-search {\n  width: 32px;\n}\n.client-attr-info-container .search-input .right-action .right-action-search:hover {\n  cursor: pointer;\n}\n.client-attr-info-container .search-input:hover {\n  border: 1px solid rgba(6, 21, 66, 0.2);\n}\n.client-attr-info-container .search-input:hover .right-action-search {\n  width: 33px;\n  background: rgba(36, 56, 97, 0.05);\n  border-left: 1px solid rgba(6, 21, 66, 0.2);\n}\n.client-attr-info-container .search-input-withvalue:hover .right-action .right-action-clear {\n  display: flex;\n}\n.client-attr-info-container .search-input-focus,\n.client-attr-info-container .search-input-focus:hover {\n  border: 1px solid #4A70FF;\n}\n.client-attr-info-container .search-input-focus .right-action .right-action-search,\n.client-attr-info-container .search-input-focus:hover .right-action .right-action-search {\n  width: 32px;\n  background: #4A70FF;\n  border-left: none;\n}\n.client-attr-info-container .search-input-focus .right-action .right-action-search svg,\n.client-attr-info-container .search-input-focus:hover .right-action .right-action-search svg {\n  fill: #FFFFFF;\n}\n.client-attr-info-container .search-input-showclear .right-action .right-action-clear {\n  display: flex;\n}\n.client-attr-info-container.is-calling {\n  background: #191B23;\n}\n.client-attr-info-container.is-calling .client-attr-title {\n  color: rgba(250, 252, 255, 0.98);\n}\n.client-attr-info-container.is-calling #list .list-item {\n  color: rgba(250, 252, 255, 0.98);\n}\n.client-attr-info-container.is-calling #list .list-item:hover {\n  background: rgba(157, 179, 225, 0.05);\n}\n.client-attr-info-container.is-calling #list .item-selected,\n.client-attr-info-container.is-calling #list .item-selected:hover {\n  background: #313655;\n}\n.client-attr-info-container.is-calling .action-btn .button-disable {\n  background: rgba(157, 179, 225, 0.03);\n  border: 1px solid rgba(157, 179, 225, 0.05);\n  border-radius: 3px;\n  color: rgba(198, 211, 251, 0.27);\n}\n.client-attr-info-container.is-calling .action-btn .button-normal {\n  background: #191B23;\n  border: 1px solid rgba(189, 200, 255, 0.1);\n  border-radius: 3px;\n  color: rgba(250, 252, 255, 0.98);\n}\n.client-attr-info-container.is-calling .search-input {\n  background: rgba(157, 179, 225, 0.05);\n  border: 1px solid rgba(189, 200, 255, 0.1);\n}\n.client-attr-info-container.is-calling .search-input input {\n  color: #ffffff;\n  background: transparent;\n}\n.client-attr-info-container.is-calling .search-input .right-action .right-action-item svg {\n  fill: rgba(217, 226, 252, 0.51);\n}\n.client-attr-info-container.is-calling .search-input-focus,\n.client-attr-info-container.is-calling .search-input-focus:hover {\n  border: 1px solid #4A70FF;\n}\n.client-attr-info-container.is-calling .search-input-focus .right-action .right-action-search,\n.client-attr-info-container.is-calling .search-input-focus:hover .right-action .right-action-search {\n  width: 32px;\n  background: #4A70FF;\n  border-left: none;\n}\n.client-attr-info-container.is-calling .search-input-focus .right-action .right-action-search svg,\n.client-attr-info-container.is-calling .search-input-focus:hover .right-action .right-action-search svg {\n  fill: #FFFFFF;\n}\n",""])},function(e,t){e.exports='<%\n    var status = status || \'normal\';\n    var isNormalState = status === \'normal\' || status === \'over\';\n%>\n<div class="client-attr-info-container bg-main <%=isNormalState ? \'\' : \'is-calling\'%>">\n    <div class="client-attr-title">客户库属性</div>\n    <div class="search-input">\n        <input type="text" placeholder="属性名称" class="search-input-content"></input>\n        <div class="right-action">\n            <div class="right-action-clear right-action-item">\n                <svg class="icon-input-clear" viewBox="0 0 14 14"><use xlink:href="#input-clear"></use></svg>\n            </div>\n            <div class="right-action-search right-action-item">\n                <svg class="icon-input-search" viewBox="0 0 14 14"><use xlink:href="#input-search"></use></svg>\n            </div>\n        </div>\n    </div>\n    <div id="list">\n        <ul class="list-ul">\n        </ul>\n        <div class="load-more hidden">加载更多</div>\n        <div class="empty hidden">\n            <div class="msg-svg">\n                <svg class="icon-default-search empty-svg" viewBox="0 0 100 100"><use xlink:href="#default-search<%=isNormalState ? \'\' : \'-dark\'%>"></use></svg>\n            </div>\n            <div class="msg-info">暂无符合条件的属性</div>\n        </div>\n    </div>\n    <div class="action-btn">\n        <button class="button-disable button-comfirm">确定</button>\n        <button class="button-normal button-cancel">取消</button>\n    </div>\n</div>\n'},function(e,t){e.exports="'use strict';\n\nvar $latestSelected = null;\nvar key = null;\nvar index = 1;\nvar count = 15;\nvar attrs = {};\nvar total = 0;\nvar listLength = 0;\nvar triggerIndex = -1;\nvar nowSearch = '';\n\nfunction onShow(e, params) {\n    triggerIndex = params ? params.triggerIndex : -1;\n    key = params ? params.key : null;\n    qd.trigger('_clientAttrFrameShow', triggerIndex);\n    initSearchInput();\n    initList();\n    initActionBtns();\n    getList();\n    loadMoreBtn();\n    initEmptySvg();\n}\n\nfunction onHide() {\n    qd.trigger('_clientAttrFrameHide');\n}\n\nvar getValue = function getValue() {\n    var $searchInputContent = $('.search-input-content');\n    return $searchInputContent.elems[0].value || '';\n};\n\nvar initSearchInput = function initSearchInput() {\n    var $searchInput = $('.search-input');\n    var $searchInputContent = $('.search-input-content');\n    var $searchClearBtn = $('.icon-input-clear');\n    var $searchSearchBtn = $('.right-action-search');\n    $searchInputContent.bind('focus', function (e) {\n        $searchInput.addClass('search-input-focus');\n        if (getValue()) {\n            $searchInput.addClass('search-input-showclear');\n        }\n    });\n    $searchInputContent.bind('keyup', function (e) {\n        if (getValue()) {\n            $searchInput.addClass('search-input-showclear');\n            $searchInput.addClass('search-input-withvalue');\n        } else {\n            $searchInput.removeClass('search-input-showclear');\n            $searchInput.removeClass('search-input-withvalue');\n        }\n        if (e.keyCode === 13) {\n            $searchSearchBtn.elems[0].click();\n        }\n    });\n    $searchInputContent.bind('blur', function (e) {\n        $searchInput.removeClass('search-input-focus');\n        $searchInput.removeClass('search-input-showclear');\n    });\n    $searchClearBtn.bind('click', function (e) {\n        $searchInputContent.elems[0].value = '';\n        $searchInput.removeClass('search-input-withvalue');\n        $searchInputContent.elems[0].focus();\n        $searchSearchBtn.elems[0].click();\n    });\n    $searchSearchBtn.bind('click', function (e) {\n        index = 1;\n        nowSearch = getValue();\n        getList();\n    });\n};\n\nvar initActionBtns = function initActionBtns() {\n    var $List = $('#list');\n    var $comfirmBtn = $('.button-comfirm');\n    var $cancelBtn = $('.button-cancel');\n    $comfirmBtn.bind('click', function (e) {\n        if ($comfirmBtn.hasClass('button-disable')) {\n            return;\n        }\n        qd.trigger('_clientAttrFrameComfirm', {\n            attr: attrs[key],\n            triggerIndex: triggerIndex\n        });\n        qd.hidePage('clientAttrFrame');\n    });\n    $cancelBtn.bind('click', function (e) {\n        qd.hidePage('clientAttrFrame');\n    });\n};\n\nfunction initList() {\n    var $List = $('#list');\n    var $comfirmBtn = $('.button-comfirm');\n    var $cancelBtn = $('.button-cancel');\n    $List.bind('click', function (e) {\n        var ele = e.target;\n        while (ele.parentElement && $List.elems[0].contains(ele) && ele.nodeName !== 'LI') {\n            ele = ele.parentElement;\n        }\n        var $ele = $(ele);\n        if ($ele && ele.nodeName === 'LI') {\n            $latestSelected && $latestSelected.removeClass('item-selected');\n            $latestSelected = $ele;\n            $ele.addClass('item-selected');\n            key = $ele.prop('data-key');\n            if (key) {\n                $comfirmBtn.addClass('button-primary');\n                $comfirmBtn.removeClass('button-disable');\n            } else {\n                $comfirmBtn.removeClass('button-primary');\n                $comfirmBtn.addClass('button-disable');\n            }\n        }\n    });\n    if (key) {\n        $comfirmBtn.addClass('button-primary');\n        $comfirmBtn.removeClass('button-disable');\n    } else {\n        $comfirmBtn.removeClass('button-primary');\n        $comfirmBtn.addClass('button-disable');\n    }\n}\n\nfunction getList() {\n    var keyword = nowSearch;\n    qd.handle({\n        action: 'clientList',\n        params: {\n            keyword: keyword || '',\n            index: index,\n            count: count\n        },\n        success: function success(res) {\n            total = res.total || 0;\n            var list = res.records || [];\n            renderList(list, index === 1);\n        },\n        fail: function fail(err) {\n            notice.error(err.msg || '获取客户库属性失败');\n        }\n    });\n}\n\nfunction renderList(list, reDraw) {\n    var keyword = nowSearch;\n    var $ul = $('#list .list-ul');\n    var $empty = $('#list .empty');\n    if (reDraw) {\n        listLength = 0;\n        $ul.html('');\n        if (!list.length) {\n            $empty.removeClass('hidden');\n        } else {\n            $empty.addClass('hidden');\n        }\n    }\n    var lis = '';\n    var initSelect = false;\n    list.forEach(function (item) {\n        attrs[item.key] = item;\n        var li = '<li class=\"list-item ' + (key === item.key ? 'item-selected' : '') + '\" data-key=\"' + item.key + '\">' + highLight(item.label, keyword) + '</li>';\n        lis += li;\n        if (key === item.key) {\n            initSelect = true;\n        }\n    });\n    $ul.append(lis);\n    if (initSelect) {\n        $latestSelected = $('.item-selected');\n    }\n    listLength += list.length;\n    var $loadMore = $('.load-more');\n    if (listLength >= total || list.length < count) {\n        $loadMore.addClass('hidden');\n    } else {\n        $loadMore.removeClass('hidden');\n        index++;\n    }\n}\n\nfunction loadMoreBtn() {\n    var $loadMore = $('.load-more');\n    $loadMore.bind('click', function () {\n        getList();\n    });\n}\n\nvar initEmptySvg = function initEmptySvg() {\n    qd.one('stateChange._historyListEmpty', function (e, status) {\n        var isCallingState = qd.isCallingState(status);\n        var $emptySvg = $('.empty-svg');\n        isCallingState && $emptySvg && $emptySvg.html('<use xlink:href=\"#default-search-dark\"></use>');\n    });\n};"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(18),o=r(i),a=n(24),s=r(a),l=n(59),c=n(612),u=r(c),d=n(613),f=r(d),p=n(614),h=r(p),g=n(615),m=r(g),v=n(26),b=r(v),_=n(27),y=function(e,t){var n=this,r=s.default.call(this.stator,{name:"callInfoFrame",data:e,style:{width:280},autoHeight:".callInfo-container",script:m.default,cssText:u.default.toString(),html:(0,b.default)(_)+f.default,props:{listTpl:h.default}});e.switchboardNumberFormatted=this.stator.getFormattedNumber(),e.routeType=l.routeType;var i=new o.default(r,t);return i.el.addEventListener("mouseenter",function(){n.stator.trigger("callInfoFrame.mouseenter")}),i.el.addEventListener("mouseleave",function(){n.stator.trigger("callInfoFrame.mouseleave")}),i};t.default=y},function(e,t,n){t=e.exports=n(19)(!1),t.i(n(25),""),t.push([e.i,"h2 {\n  margin: 0;\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 1.5;\n  padding: 10px 15px 5px;\n  color: #262d3d;\n}\n.icon {\n  display: inline-block;\n  width: 16px;\n  overflow: hidden;\n  color: #a1abc2;\n}\n.icon svg {\n  width: 100%;\n}\n.icon.green:hover {\n  color: #01c480;\n}\na:hover .icon,\n.icon:hover {\n  color: #8490ae;\n}\n.drop {\n  overflow: hidden;\n  position: relative;\n  padding-right: 12px;\n}\n.drop .arrow {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 8px;\n  margin-left: 3px;\n}\n.icon.is-on,\n.text-stress {\n  color: #262d3d;\n}\n.text-hint {\n  color: #d4d8e1;\n}\n.green {\n  color: #00d48a;\n  border-color: #00d48a;\n}\n.red {\n  color: #f75559;\n}\n.blue {\n  color: #4a70ff;\n}\n.orange {\n  color: #ff8345;\n}\n.is-calling {\n  color: #a1abc2;\n}\n.is-calling h2 {\n  color: #f8f9fB;\n}\n.is-calling::-webkit-scrollbar-thumb,\n.is-calling ::-webkit-scrollbar-thumb {\n  background-color: #696c7c;\n}\n.is-calling::-webkit-scrollbar-thumb:hover,\n.is-calling ::-webkit-scrollbar-thumb:hover {\n  background-color: #50535f;\n}\n.is-calling .is-loading {\n  border: 2px solid #fff;\n  border-bottom-color: transparent;\n}\n.is-calling .text {\n  color: #a1abc2;\n}\n.is-calling .icon.is-on,\n.is-calling .text-stress {\n  color: #f8f9fB;\n}\n.is-calling .green {\n  color: #00cb83;\n  border-color: #00cb83;\n}\n.is-calling .red {\n  color: #e1464a;\n}\n.is-calling .blue {\n  color: #6283ff;\n}\n.is-calling.bg-main,\n.is-calling .bg-main {\n  background-position: 100% 50%;\n}\n.is-calling .bg-gap {\n  background-position: 100% 50%;\n}\n.is-calling .ck {\n  color: #f8f9fB;\n}\n.is-calling textarea,\n.is-calling input,\n.is-calling select,\n.is-calling .select,\n.is-calling .select .options {\n  border-color: #4a5264;\n  color: #f8f9fB;\n  background-color: #25283a;\n}\n.is-calling textarea:focus,\n.is-calling input:focus,\n.is-calling select:focus,\n.is-calling .select:focus,\n.is-calling .select .options:focus {\n  border-color: #8d96aa;\n}\n.is-calling textarea::placeholder,\n.is-calling input::placeholder,\n.is-calling select::placeholder,\n.is-calling .select::placeholder,\n.is-calling .select .options::placeholder {\n  color: #a1abc2;\n}\n.is-calling .select .options p:hover,\n.is-calling .select .options .selected {\n  background-color: #383a4a;\n}\n.is-calling .close {\n  color: #78849e;\n}\n.is-calling .close:hover {\n  color: #fff;\n}\n.is-calling input[type=checkbox] {\n  cursor: pointer;\n  position: relative;\n}\n.is-calling input[type=checkbox]::after {\n  position: absolute;\n  top: 0;\n  background-color: #1e2030;\n  color: #fff;\n  width: 14px;\n  height: 14px;\n  display: inline-block;\n  visibility: visible;\n  padding-left: 0px;\n  text-align: center;\n  content: ' ';\n  border-radius: 2px;\n  box-sizing: border-box;\n  border: 1px solid #4A5264;\n}\n.is-calling input[type=checkbox]:checked::after {\n  content: \"\";\n  border-color: #4A70FF;\n  background-color: #4A70FF;\n}\n.is-calling input[type=checkbox]:checked::before {\n  content: '';\n  position: absolute;\n  top: 1px;\n  left: 5px;\n  width: 3px;\n  height: 8px;\n  border: solid white;\n  border-width: 0 2px 2px 0;\n  transform: rotate(45deg);\n  z-index: 1;\n}\n.close {\n  position: absolute;\n  right: 0px;\n  top: 0px;\n  padding: 8px;\n  color: #a8abb3;\n}\n.close:hover {\n  color: #1e2300;\n}\n.close svg {\n  width: 14px;\n  height: 14px;\n}\n.bg-main {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #fff, #fff, #25283a, #25283a) left / cover;\n}\n.bg-gap {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #f4f7fb, #f4f7fb, #101328, #101328) left / cover;\n}\n.bgEaseIn {\n  background-position: 100% 50%;\n}\n.bgEaseOut {\n  background-position: 0% 50%;\n}\n.bg-main,\n.bg-gap {\n  background-size: 800% 800%;\n  animation-fill-mode: both;\n}\n@keyframes bgEaseIn {\n  0% {\n    background-position: 0% 50%;\n  }\n  100% {\n    background-position: 100% 50%;\n  }\n}\n@keyframes bgEaseOut {\n  0% {\n    background-position: 100% 50%;\n  }\n  100% {\n    background-position: 0% 50%;\n  }\n}\nbody {\n  margin: 0;\n  overflow: hidden;\n  font-size: 12px;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  color: #a1abc2;\n}\np {\n  margin: 0;\n}\ntextarea::placeholder,\ninput::placeholder {\n  color: #A1ABC2;\n}\n::-webkit-scrollbar {\n  width: 4px;\n  height: 8px;\n}\n::-webkit-scrollbar-thumb {\n  background-color: #f3f5fa;\n  border-radius: 8px;\n}\n::-webkit-scrollbar-thumb:hover {\n  background-color: #aaa;\n}\n::-webkit-scrollbar-track-piece {\n  background-color: transparent;\n}\nsvg {\n  fill: currentColor;\n}\na {\n  text-decoration: none;\n}\nul,\nli {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n.ck {\n  width: 9px;\n  height: 9px;\n  color: #262d3d;\n  position: absolute;\n  top: 50%;\n  right: 10px;\n  transform: translateY(-50%);\n  display: none;\n}\n.is-selected .ck {\n  display: inline-block;\n}\ninput,\ntextarea,\nselect,\n.select,\n.select .options {\n  font-size: 12px;\n  color: #262d3d;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  border-radius: 3px;\n  border: 1px solid #e1e6f0;\n  background-color: #fff;\n}\ninput:focus,\ntextarea:focus,\nselect:focus,\n.select:focus,\n.select .options:focus {\n  outline: 0;\n  border-color: #c5ccdb;\n}\nselect,\n.select,\n.select .options p {\n  padding: 0 5px;\n}\n.select {\n  min-height: 26px;\n  position: relative;\n  cursor: default;\n}\n.select .options {\n  position: absolute;\n  z-index: 1;\n  left: -1px;\n  top: 29px;\n  width: 100%;\n  max-height: 73px;\n  overflow: auto;\n}\n.select .options p:hover,\n.select .options p.selected {\n  background: #f1f5fb;\n}\n.select p {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.cls:after {\n  content: \"\";\n  font-size: 0;\n  display: block;\n  height: 0;\n  clear: both;\n  visibility: hidden;\n}\n.disabled {\n  pointer-events: none;\n  opacity: .3;\n}\n.hidden {\n  display: none!important;\n}\n.overlay {\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  background: rgba(255, 255, 255, 0.6);\n}\ninput::-webkit-outer-spin-button,\ninput::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n}\ninput[type=\"number\"] {\n  -moz-appearance: textfield;\n}\n.is-loading {\n  border-radius: 100%;\n  margin: 2px;\n  border: 2px solid #ccc;\n  border-bottom-color: transparent;\n  height: 12px;\n  width: 12px;\n  margin-top: -7px;\n  background: 0 0!important;\n  display: inline-block;\n  -webkit-animation: rotate .75s 0s linear infinite;\n  animation: rotate .75s 0s linear infinite;\n}\n@keyframes rotate {\n  0% {\n    -webkit-transform: rotate(0);\n    transform: rotate(0);\n  }\n  50% {\n    -webkit-transform: rotate(180deg);\n    transform: rotate(180deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n.marquee {\n  white-space: nowrap;\n  overflow: hidden;\n  width: 80px;\n  position: relative;\n}\n.marquee p {\n  overflow: hidden;\n  float: left;\n  animation: move linear 6s infinite;\n}\n.marquee span {\n  display: inline-block;\n  padding-left: 10px;\n}\n.marquee::before,\n.marquee::after {\n  position: absolute;\n  top: 0;\n  z-index: 1;\n  content: ' ';\n  width: 10px;\n  height: 100%;\n  animation: bgfadeIn linear 2s;\n}\n.marquee::before {\n  left: -2px;\n  background: linear-gradient(90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n.marquee::after {\n  right: -2px;\n  background: linear-gradient(-90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n@keyframes move {\n  0% {\n    transform: translateX(0);\n  }\n  100% {\n    transform: translateX(-50%);\n  }\n}\n.q-notice {\n  position: absolute;\n  width: 100%;\n  left: 0;\n  top: 0;\n  text-align: center;\n}\n.q-notice.is-auto {\n  pointer-events: none;\n  z-index: 10;\n}\n.q-notice.is-cover {\n  height: 100%;\n  background: rgba(255, 255, 255, 0.7);\n}\n.q-notice .item {\n  margin: 4px auto;\n}\n.q-notice .info {\n  pointer-events: initial;\n  min-width: 170px;\n  padding: 0 15px;\n  line-height: 29px;\n  height: 28px;\n  overflow: hidden;\n  white-space: nowrap;\n  display: inline-block;\n  color: rgba(255, 255, 255, 0.8);\n  background-color: #25283a;\n  box-shadow: 0px 2px 18px 2px rgba(172, 172, 172, 0.3);\n  border-radius: 2px;\n  position: relative;\n}\n.q-notice .info .icon-tip {\n  vertical-align: -3px;\n  margin-right: 2px;\n  width: 14px;\n}\n.q-notice .info [data-action] * {\n  pointer-events: none;\n}\n.q-notice .is-error .info {\n  color: #fff;\n  background-color: #f75559;\n}\n.q-notice .is-success .info {\n  color: #fff;\n  background-color: #00cb83;\n}\n.q-notice .is-close-able .info {\n  text-align: left;\n}\n.q-notice .is-close-able .btn-close {\n  width: 12px;\n  height: 12px;\n  color: #fff;\n  margin: 8px -5px 0 10px;\n  float: right;\n}\n.q-notice .is-close-able .btn-close:hover {\n  opacity: .8;\n}\n.q-notice .is-warning .info {\n  color: rgba(0, 1, 10, 0.93);\n  border: 0.5px solid #FFEBDA;\n  background-color: #FFF8F0;\n  box-shadow: 0px 16px 32px rgba(18, 19, 25, 0.16), 0px 0px 8px rgba(18, 19, 25, 0.08), 0px 0px 1px rgba(18, 19, 25, 0.08);\n}\n.ringing {\n  animation: ringing 2s ease;\n  animation-fill-mode: both;\n  animation-iteration-count: infinite;\n}\n@keyframes ringing {\n  10% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  15% {\n    -webkit-transform: rotate(-15deg);\n    transform: rotate(-15deg);\n  }\n  20% {\n    -webkit-transform: rotate(15deg);\n    transform: rotate(15deg);\n  }\n  25% {\n    -webkit-transform: rotate(-10deg);\n    transform: rotate(-10deg);\n    color: #2af2ac;\n  }\n  30% {\n    -webkit-transform: rotate(5deg);\n    transform: rotate(5deg);\n    color: #2af2ac;\n  }\n  35% {\n    -webkit-transform: rotate(-5deg);\n    transform: rotate(-5deg);\n  }\n  40% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n}\n.ctimer {\n  border-radius: 50%;\n  height: 40px;\n  overflow: hidden;\n  position: relative;\n  width: 40px;\n  background: rgba(255, 255, 255, 0.3);\n}\n.ctimer svg {\n  position: absolute;\n  left: 0;\n  z-index: 2;\n}\n.ctimer .hand {\n  position: absolute;\n  top: 0;\n  height: 100%;\n  overflow: hidden;\n  width: 50%;\n}\n.ctimer .hand span {\n  border: 20px solid rgba(255, 255, 255, 0.3);\n  border-bottom-color: transparent;\n  border-left-color: transparent;\n  border-radius: 50%;\n  display: block;\n  height: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  transform: rotate(225deg);\n  width: 0;\n}\n.ctimer .hand-left {\n  left: 0;\n  transform: rotate(180deg);\n}\n.ctimer .hand-right {\n  right: 0;\n}\n.ctimer .hand span {\n  animation-duration: var(--post-edit-time);\n  animation-iteration-count: 1;\n  animation-timing-function: linear;\n  animation-fill-mode: both;\n}\n.ctimer .hand-left span {\n  animation-name: spinleft;\n}\n.ctimer .hand-right span {\n  animation-name: spinright;\n}\n@keyframes spinleft {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(225deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\n@keyframes spinright {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(405deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\n.callInfo-container {\n  background-color: #fff;\n  max-height: 370px;\n  overflow: auto;\n}\n.callInfo-container .callInfo-list {\n  margin: 0 15px;\n  overflow: auto;\n  padding-bottom: 10px;\n  border-bottom: 1px solid #f4f7fb;\n}\n.callInfo-container .callInfo-list li {\n  height: 20px;\n  line-height: 20px;\n  padding: 0;\n  position: relative;\n}\n.callInfo-container .callInfo-list li span {\n  position: absolute;\n  right: 5px;\n  left: 100px;\n  top: 0;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  color: #262d3d;\n}\n.callInfo-container .loading {\n  text-align: center;\n  min-height: 50px;\n}\n.callInfo-container .loading .is-loading {\n  margin-top: 17px;\n}\n.callInfo-container .ivr-info {\n  padding-top: 5px;\n}\n.callInfo-container .ivr-info .time {\n  margin-left: 15px;\n  color: #262d3d;\n}\n.callInfo-container .ivr-info .tree {\n  overflow: hidden;\n  padding: 15px;\n}\n.callInfo-container .ivr-info .tree li {\n  border-left: 1px solid #a1abc2;\n  margin-left: 85px;\n  padding: 0 0 10px 10px;\n  line-height: 1;\n  color: #262d3d;\n  line-height: 14px;\n}\n.callInfo-container .ivr-info .tree li:last-child {\n  padding-bottom: 0;\n}\n.callInfo-container .ivr-info .tree li::after {\n  display: block;\n  content: '';\n  clear: both;\n}\n.callInfo-container .ivr-info .tree .dot {\n  width: 80px;\n  margin-left: -107px;\n  margin-right: 27px;\n  text-align: right;\n  color: #a1abc2;\n  float: left;\n}\n.callInfo-container .ivr-info .tree .info {\n  position: relative;\n  width: 100%;\n  float: right;\n}\n.callInfo-container .ivr-info .tree .info::before {\n  position: absolute;\n  left: -13px;\n  top: 4px;\n  content: ' ';\n  width: 5px;\n  height: 5px;\n  border-radius: 100%;\n  overflow: hidden;\n  background-color: #a1abc2;\n}\n.callInfo-container.is-calling .callInfo-list {\n  border-bottom-color: #4a5264;\n}\n.callInfo-container.is-calling .callInfo-list span {\n  color: #f8f9fB;\n}\n.callInfo-container.is-calling .ivr-info .time {\n  color: #f8f9fB;\n}\n.callInfo-container.is-calling .ivr-info .tree li {\n  color: #f8f9fB;\n  border-left-color: #a1abc2;\n}\n.callInfo-container.is-calling .ivr-info .dot {\n  color: #a1abc2;\n}\n.callInfo-container.is-calling .ivr-info .info::before {\n  background-color: #a1abc2;\n}\n",""])},function(e,t){e.exports="<%\n    var status = status || 'normal';\n    var isNormalState = status === 'normal' || status === 'over';\n    var nextState = nextState || {};\n%>\n<div class=\"callInfo-container bg-main <%=isNormalState ? '' : 'is-calling'%>\">\n    <h2>通话信息</h2>\n    <ul id=\"list\" class=\"callInfo-list\">\n        <%if(nextState.Queuetimes) {%>\n        <li>\n            排队次数 <span><%=nextState.Queuetimes%>次</span>\n        </li>\n        <%}%>\n\n        <%if(nextState.Inqueueduration) {%>\n        <li>排队时长 <span><%=nextState.Inqueueduration%>s</span></li>\n        <%}%>\n\n        <%if(nextState.RouteType !== undefined) {\n            nextState.RouteType = nextState.RouteType > 4 ? 5 : nextState.RouteType;    \n        %>\n        <li>路由规则 <span><%=routeType[nextState.RouteType]%></span></li>\n        <%}%>\n\n        <%if(nextState.IvrTime) {%>\n        <li>IVR停留时长 <span><%=nextState.IvrTime%>s</span></li>\n        <%}%>\n\n        <%if(nextState.CalloutTaskName) {%>\n        <li>外呼任务 <span><%=nextState.CalloutTaskName%>s</span></li>\n        <%}%>\n\n        <%if(switchboardNumberFormatted) {%>\n        <li><%=direction === 'callin' ? '呼入' : '呼出'%>总机号码 <span><%=switchboardNumberFormatted%></span></li>\n        <%}%>\n\n    </ul>\n    \n    <div id=\"ivrlist\">\n        <div class=\"loading\"><span class=\"is-loading\"></span></div>\n    </div>\n</div>\n"},function(e,t){e.exports="<%if (ivrList.length) {%>\n<div class=\"ivr-info\">\n    <h2>IVR操作信息</h2>\n    <span class=\"time\"><%=format('Y-m-d', ivrTime)%></span>\n    <ul class=\"tree\">\n        <%for(i=0; i<ivrList.length; i++) {\n            var item = ivrList[i];\n        %>\n        <li>\n            <span class=\"dot\"><%=typeof item.time == 'string' ? item.time : format('H:i:s', item.time)%></span>\n            <span class=\"info\"><%=item.role || ''%><%=item.name || ''%><%=item.data || ''%></span>\n        </li>\n        <%}%>\n    </ul>\n</div>\n<%}%>"},function(e,t){e.exports="'use strict';\n\nvar qd = window.qd;\nvar render = window.render;\nvar listTpl = window.listTpl;\n\nvar $dom = null;\nvar id = -1;\n\nfunction onShow() {\n    var state = qd.getState();\n    var direction = state.direction;\n    qd.getIvrEventList({\n        callid: state.callid,\n        cache: 3600,\n        success: function success(res) {\n            renderInfo(res);\n        },\n        fail: function fail() {\n            renderInfo({ node: [] });\n        }\n    });\n}\n\nfunction renderInfo(ivr) {\n    var state = qd.getState();\n    state.ivrList = ivr.node;\n    state.ivrTime = ivr.timestamp;\n    state.format = qd.format;\n    var html = render(listTpl)(state);\n    $('#ivrlist').html(html);\n    window.onRefresh();\n}\n\nsetTimeout(function () {\n    qd._debug() && console.log('log from callInfoFrame');\n}, 1000);"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(18),o=r(i),a=n(24),s=r(a),l=n(617),c=r(l),u=n(618),d=r(u),f=n(619),p=r(f),h=n(26),g=r(h),m=n(27),v=function(e,t){return new o.default(s.default.call(this.stator,{name:"callPanelFrame",moveable:!0,style:{width:184,height:290},data:e,script:p.default,cssText:c.default.toString(),html:(0,g.default)(m)+d.default}),t)};t.default=v},function(e,t,n){t=e.exports=n(19)(!1),t.i(n(25),""),t.push([e.i,"h2 {\n  margin: 0;\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 1.5;\n  padding: 10px 15px 5px;\n  color: #262d3d;\n}\n.icon {\n  display: inline-block;\n  width: 16px;\n  overflow: hidden;\n  color: #a1abc2;\n}\n.icon svg {\n  width: 100%;\n}\n.icon.green:hover {\n  color: #01c480;\n}\na:hover .icon,\n.icon:hover {\n  color: #8490ae;\n}\n.drop {\n  overflow: hidden;\n  position: relative;\n  padding-right: 12px;\n}\n.drop .arrow {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 8px;\n  margin-left: 3px;\n}\n.icon.is-on,\n.text-stress {\n  color: #262d3d;\n}\n.text-hint {\n  color: #d4d8e1;\n}\n.green {\n  color: #00d48a;\n  border-color: #00d48a;\n}\n.red {\n  color: #f75559;\n}\n.blue {\n  color: #4a70ff;\n}\n.orange {\n  color: #ff8345;\n}\n.is-calling {\n  color: #a1abc2;\n}\n.is-calling h2 {\n  color: #f8f9fB;\n}\n.is-calling::-webkit-scrollbar-thumb,\n.is-calling ::-webkit-scrollbar-thumb {\n  background-color: #696c7c;\n}\n.is-calling::-webkit-scrollbar-thumb:hover,\n.is-calling ::-webkit-scrollbar-thumb:hover {\n  background-color: #50535f;\n}\n.is-calling .is-loading {\n  border: 2px solid #fff;\n  border-bottom-color: transparent;\n}\n.is-calling .text {\n  color: #a1abc2;\n}\n.is-calling .icon.is-on,\n.is-calling .text-stress {\n  color: #f8f9fB;\n}\n.is-calling .green {\n  color: #00cb83;\n  border-color: #00cb83;\n}\n.is-calling .red {\n  color: #e1464a;\n}\n.is-calling .blue {\n  color: #6283ff;\n}\n.is-calling.bg-main,\n.is-calling .bg-main {\n  background-position: 100% 50%;\n}\n.is-calling .bg-gap {\n  background-position: 100% 50%;\n}\n.is-calling .ck {\n  color: #f8f9fB;\n}\n.is-calling textarea,\n.is-calling input,\n.is-calling select,\n.is-calling .select,\n.is-calling .select .options {\n  border-color: #4a5264;\n  color: #f8f9fB;\n  background-color: #25283a;\n}\n.is-calling textarea:focus,\n.is-calling input:focus,\n.is-calling select:focus,\n.is-calling .select:focus,\n.is-calling .select .options:focus {\n  border-color: #8d96aa;\n}\n.is-calling textarea::placeholder,\n.is-calling input::placeholder,\n.is-calling select::placeholder,\n.is-calling .select::placeholder,\n.is-calling .select .options::placeholder {\n  color: #a1abc2;\n}\n.is-calling .select .options p:hover,\n.is-calling .select .options .selected {\n  background-color: #383a4a;\n}\n.is-calling .close {\n  color: #78849e;\n}\n.is-calling .close:hover {\n  color: #fff;\n}\n.is-calling input[type=checkbox] {\n  cursor: pointer;\n  position: relative;\n}\n.is-calling input[type=checkbox]::after {\n  position: absolute;\n  top: 0;\n  background-color: #1e2030;\n  color: #fff;\n  width: 14px;\n  height: 14px;\n  display: inline-block;\n  visibility: visible;\n  padding-left: 0px;\n  text-align: center;\n  content: ' ';\n  border-radius: 2px;\n  box-sizing: border-box;\n  border: 1px solid #4A5264;\n}\n.is-calling input[type=checkbox]:checked::after {\n  content: \"\";\n  border-color: #4A70FF;\n  background-color: #4A70FF;\n}\n.is-calling input[type=checkbox]:checked::before {\n  content: '';\n  position: absolute;\n  top: 1px;\n  left: 5px;\n  width: 3px;\n  height: 8px;\n  border: solid white;\n  border-width: 0 2px 2px 0;\n  transform: rotate(45deg);\n  z-index: 1;\n}\n.close {\n  position: absolute;\n  right: 0px;\n  top: 0px;\n  padding: 8px;\n  color: #a8abb3;\n}\n.close:hover {\n  color: #1e2300;\n}\n.close svg {\n  width: 14px;\n  height: 14px;\n}\n.bg-main {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #fff, #fff, #25283a, #25283a) left / cover;\n}\n.bg-gap {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #f4f7fb, #f4f7fb, #101328, #101328) left / cover;\n}\n.bgEaseIn {\n  background-position: 100% 50%;\n}\n.bgEaseOut {\n  background-position: 0% 50%;\n}\n.bg-main,\n.bg-gap {\n  background-size: 800% 800%;\n  animation-fill-mode: both;\n}\n@keyframes bgEaseIn {\n  0% {\n    background-position: 0% 50%;\n  }\n  100% {\n    background-position: 100% 50%;\n  }\n}\n@keyframes bgEaseOut {\n  0% {\n    background-position: 100% 50%;\n  }\n  100% {\n    background-position: 0% 50%;\n  }\n}\nbody {\n  margin: 0;\n  overflow: hidden;\n  font-size: 12px;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  color: #a1abc2;\n}\np {\n  margin: 0;\n}\ntextarea::placeholder,\ninput::placeholder {\n  color: #A1ABC2;\n}\n::-webkit-scrollbar {\n  width: 4px;\n  height: 8px;\n}\n::-webkit-scrollbar-thumb {\n  background-color: #f3f5fa;\n  border-radius: 8px;\n}\n::-webkit-scrollbar-thumb:hover {\n  background-color: #aaa;\n}\n::-webkit-scrollbar-track-piece {\n  background-color: transparent;\n}\nsvg {\n  fill: currentColor;\n}\na {\n  text-decoration: none;\n}\nul,\nli {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n.ck {\n  width: 9px;\n  height: 9px;\n  color: #262d3d;\n  position: absolute;\n  top: 50%;\n  right: 10px;\n  transform: translateY(-50%);\n  display: none;\n}\n.is-selected .ck {\n  display: inline-block;\n}\ninput,\ntextarea,\nselect,\n.select,\n.select .options {\n  font-size: 12px;\n  color: #262d3d;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  border-radius: 3px;\n  border: 1px solid #e1e6f0;\n  background-color: #fff;\n}\ninput:focus,\ntextarea:focus,\nselect:focus,\n.select:focus,\n.select .options:focus {\n  outline: 0;\n  border-color: #c5ccdb;\n}\nselect,\n.select,\n.select .options p {\n  padding: 0 5px;\n}\n.select {\n  min-height: 26px;\n  position: relative;\n  cursor: default;\n}\n.select .options {\n  position: absolute;\n  z-index: 1;\n  left: -1px;\n  top: 29px;\n  width: 100%;\n  max-height: 73px;\n  overflow: auto;\n}\n.select .options p:hover,\n.select .options p.selected {\n  background: #f1f5fb;\n}\n.select p {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.cls:after {\n  content: \"\";\n  font-size: 0;\n  display: block;\n  height: 0;\n  clear: both;\n  visibility: hidden;\n}\n.disabled {\n  pointer-events: none;\n  opacity: .3;\n}\n.hidden {\n  display: none!important;\n}\n.overlay {\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  background: rgba(255, 255, 255, 0.6);\n}\ninput::-webkit-outer-spin-button,\ninput::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n}\ninput[type=\"number\"] {\n  -moz-appearance: textfield;\n}\n.is-loading {\n  border-radius: 100%;\n  margin: 2px;\n  border: 2px solid #ccc;\n  border-bottom-color: transparent;\n  height: 12px;\n  width: 12px;\n  margin-top: -7px;\n  background: 0 0!important;\n  display: inline-block;\n  -webkit-animation: rotate .75s 0s linear infinite;\n  animation: rotate .75s 0s linear infinite;\n}\n@keyframes rotate {\n  0% {\n    -webkit-transform: rotate(0);\n    transform: rotate(0);\n  }\n  50% {\n    -webkit-transform: rotate(180deg);\n    transform: rotate(180deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n.marquee {\n  white-space: nowrap;\n  overflow: hidden;\n  width: 80px;\n  position: relative;\n}\n.marquee p {\n  overflow: hidden;\n  float: left;\n  animation: move linear 6s infinite;\n}\n.marquee span {\n  display: inline-block;\n  padding-left: 10px;\n}\n.marquee::before,\n.marquee::after {\n  position: absolute;\n  top: 0;\n  z-index: 1;\n  content: ' ';\n  width: 10px;\n  height: 100%;\n  animation: bgfadeIn linear 2s;\n}\n.marquee::before {\n  left: -2px;\n  background: linear-gradient(90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n.marquee::after {\n  right: -2px;\n  background: linear-gradient(-90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n@keyframes move {\n  0% {\n    transform: translateX(0);\n  }\n  100% {\n    transform: translateX(-50%);\n  }\n}\n.q-notice {\n  position: absolute;\n  width: 100%;\n  left: 0;\n  top: 0;\n  text-align: center;\n}\n.q-notice.is-auto {\n  pointer-events: none;\n  z-index: 10;\n}\n.q-notice.is-cover {\n  height: 100%;\n  background: rgba(255, 255, 255, 0.7);\n}\n.q-notice .item {\n  margin: 4px auto;\n}\n.q-notice .info {\n  pointer-events: initial;\n  min-width: 170px;\n  padding: 0 15px;\n  line-height: 29px;\n  height: 28px;\n  overflow: hidden;\n  white-space: nowrap;\n  display: inline-block;\n  color: rgba(255, 255, 255, 0.8);\n  background-color: #25283a;\n  box-shadow: 0px 2px 18px 2px rgba(172, 172, 172, 0.3);\n  border-radius: 2px;\n  position: relative;\n}\n.q-notice .info .icon-tip {\n  vertical-align: -3px;\n  margin-right: 2px;\n  width: 14px;\n}\n.q-notice .info [data-action] * {\n  pointer-events: none;\n}\n.q-notice .is-error .info {\n  color: #fff;\n  background-color: #f75559;\n}\n.q-notice .is-success .info {\n  color: #fff;\n  background-color: #00cb83;\n}\n.q-notice .is-close-able .info {\n  text-align: left;\n}\n.q-notice .is-close-able .btn-close {\n  width: 12px;\n  height: 12px;\n  color: #fff;\n  margin: 8px -5px 0 10px;\n  float: right;\n}\n.q-notice .is-close-able .btn-close:hover {\n  opacity: .8;\n}\n.q-notice .is-warning .info {\n  color: rgba(0, 1, 10, 0.93);\n  border: 0.5px solid #FFEBDA;\n  background-color: #FFF8F0;\n  box-shadow: 0px 16px 32px rgba(18, 19, 25, 0.16), 0px 0px 8px rgba(18, 19, 25, 0.08), 0px 0px 1px rgba(18, 19, 25, 0.08);\n}\n.ringing {\n  animation: ringing 2s ease;\n  animation-fill-mode: both;\n  animation-iteration-count: infinite;\n}\n@keyframes ringing {\n  10% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  15% {\n    -webkit-transform: rotate(-15deg);\n    transform: rotate(-15deg);\n  }\n  20% {\n    -webkit-transform: rotate(15deg);\n    transform: rotate(15deg);\n  }\n  25% {\n    -webkit-transform: rotate(-10deg);\n    transform: rotate(-10deg);\n    color: #2af2ac;\n  }\n  30% {\n    -webkit-transform: rotate(5deg);\n    transform: rotate(5deg);\n    color: #2af2ac;\n  }\n  35% {\n    -webkit-transform: rotate(-5deg);\n    transform: rotate(-5deg);\n  }\n  40% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n}\n.ctimer {\n  border-radius: 50%;\n  height: 40px;\n  overflow: hidden;\n  position: relative;\n  width: 40px;\n  background: rgba(255, 255, 255, 0.3);\n}\n.ctimer svg {\n  position: absolute;\n  left: 0;\n  z-index: 2;\n}\n.ctimer .hand {\n  position: absolute;\n  top: 0;\n  height: 100%;\n  overflow: hidden;\n  width: 50%;\n}\n.ctimer .hand span {\n  border: 20px solid rgba(255, 255, 255, 0.3);\n  border-bottom-color: transparent;\n  border-left-color: transparent;\n  border-radius: 50%;\n  display: block;\n  height: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  transform: rotate(225deg);\n  width: 0;\n}\n.ctimer .hand-left {\n  left: 0;\n  transform: rotate(180deg);\n}\n.ctimer .hand-right {\n  right: 0;\n}\n.ctimer .hand span {\n  animation-duration: var(--post-edit-time);\n  animation-iteration-count: 1;\n  animation-timing-function: linear;\n  animation-fill-mode: both;\n}\n.ctimer .hand-left span {\n  animation-name: spinleft;\n}\n.ctimer .hand-right span {\n  animation-name: spinright;\n}\n@keyframes spinleft {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(225deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\n@keyframes spinright {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(405deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\nbody {\n  overflow: hidden;\n}\n.dia-container {\n  height: 270px;\n  padding: 20px 0 0 0;\n  white-space: nowrap;\n  user-select: none;\n  -webkit-user-select: none;\n}\n.dia-container .switchboard {\n  position: absolute;\n  left: 12px;\n  top: 30px;\n  padding-right: 8px;\n  color: #a8abb3;\n  cursor: pointer;\n  z-index: 2;\n}\n.dia-container .switchboard::after {\n  content: ' ';\n  position: absolute;\n  right: 0;\n  top: 5px;\n  width: 0;\n  height: 0;\n  border: 3px solid transparent;\n  border-top-color: #a8abb3;\n}\n.dia-container .switchboard:hover {\n  color: #555;\n}\n.dia-container .switchboard:hover::after {\n  border-top-color: #555;\n}\n.dia-container .switchboard svg {\n  width: 12px;\n  height: 12px;\n}\n.dia-container .call {\n  width: 35px;\n  height: 35px;\n  position: absolute;\n  left: 50%;\n  bottom: 13px;\n  transform: translateX(-50%);\n  margin-top: -17px;\n  color: #00d48a;\n}\n.dia-container .call:hover {\n  color: #00cb83;\n}\n.dia-container .call.is-disable,\n.dia-container .call.is-disable:hover {\n  opacity: .45;\n  pointer-events: none;\n  cursor: default;\n}\n.dia-container .dia-res-display {\n  height: 30px;\n  width: 63%;\n  margin: 0 auto;\n  text-align: center;\n  white-space: nowrap;\n}\n.dia-container .dia-res-display .dia-res-number {\n  display: inline-block;\n  text-align: center;\n  width: 100%;\n  margin: 0 auto;\n  padding: 0;\n  height: 30px;\n  font-size: 16px;\n  line-height: 30px;\n  vertical-align: middle;\n  white-space: nowrap;\n  outline: none;\n  background: none;\n  border: 0px;\n}\n.dia-container .dia-res-display .dia-res-number:focus {\n  outline: none;\n}\n.dia-container.is-calling .switchboard:hover {\n  color: #fff;\n}\n.dia-container.is-calling .dia-number-container td div {\n  color: #fff;\n  border: 1px solid #4a5264;\n  background-color: #101328;\n}\n.dia-container.is-calling .dia-number-container td div:hover {\n  background-color: #383a4a;\n}\n@keyframes shrink {\n  0%,\n  100% {\n    opacity: 0;\n  }\n  50% {\n    opacity: 1;\n  }\n}\n.dia-number-container {\n  height: 185px;\n  width: 65%;\n  margin: 0 auto;\n}\n.dia-number-container:hover {\n  cursor: pointer;\n}\n.dia-number-container td div {\n  text-align: center;\n  width: 35px;\n  height: 35px;\n  border-radius: 50%;\n  border: solid 1px #ebedf2;\n  margin: 0 auto;\n  line-height: 33px;\n}\n.dia-number-container td div:hover {\n  background: #f1f2f3;\n}\n.dia-number-container td div:active {\n  background: #e8eaec;\n}\n",""])},function(e,t){e.exports='<%\n    var status = status || \'normal\';\n    var isNormalState = status === \'normal\' || status === \'over\';\n%>\n<div class="dia-container bg-main <%=isNormalState ? \'\' : \'is-calling\'%>">\n    <a href="javascript:void(0);" class="close icon"><svg viewBox="0 0 12 12"><use xlink:href="#close"></use></svg></a>\n    <div class="switchboard"><svg viewBox="0 0 16 16"><use xlink:href="#switchboard"></use></svg></div>\n    <div class="dia-res-display">\n        <input type="text" class="dia-number-input dia-res-number" />\n    </div>\n    <table class="dia-number-container">\n        <tr>\n            <td class="number-1" val="1"><div>1</div></td>\n            <td class="number-2" val="2"><div>2</div></td>\n            <td class="number-3" val="3"><div>3</div></td>\n        </tr>\n        <tr>\n            <td class="number-4" val="4"><div>4</div></td>\n            <td class="number-5" val="5"><div>5</div></td>\n            <td class="number-6" val="6"><div>6</div></td>\n        </tr>\n        <tr>\n            <td class="number-7" val="7"><div>7</div></td>\n            <td class="number-8" val="8"><div>8</div></td>\n            <td class="number-9" val="9"><div>9</div></td>\n        </tr>\n        <tr>\n            <td class="number-*" val="*"><div>*</div></td>\n            <td class="number-0" val="0"><div>0</div></td>\n            <td class="number-#" val="#"><div>#</div></td>\n        </tr>\n    </table>\n\n    <a href="javascript:;" class="call icon is-disable"><svg viewBox="0 0 34 34"><use xlink:href="#call-answer"></use></svg></a>\n</div>\n'},function(e,t){e.exports="'use strict';\n\nvar qd = window.qd;\nvar $input = $('.dia-res-number');\nvar inputEl = $input.elems[0];\nvar $call = $('.call');\nvar VALID_INPUT = /^[0-9#\\*]+$/;\nvar telReg = /^\\s*\\+?(\\d+[-\\s]*){3,}$/;\n\nqd._debug() && console.log('log from callPanelFrame');\n\nfunction onShow() {\n    inputEl.value = '';\n    inputEl.focus();\n}\n\nfunction onHide() {\n    qd.trigger('_callPanelFrameHide');\n}\n\n$('.dia-number-container').bind('click', function (e) {\n    if (e.target && e.target.nodeName.toUpperCase() === 'DIV') {\n        var $dom = $(e.target.parentNode);\n        var number = $dom.prop('val');\n        var tel = qd.formatTel(inputEl.value + number);\n        var pass = telReg.test(tel);\n        inputEl.value = tel;\n        $call[pass ? 'removeClass' : 'addClass']('is-disable');\n        inputEl.focus();\n    }\n});\n\n$input.bind('input', function () {\n    var val = this.value;\n    if (val && !VALID_INPUT.test(val)) {\n        val = val.replace(/[^0-9#\\*]/g, '');\n    }\n    if (!/[#\\*]/.test(val)) {\n        val = qd.formatTel(val);\n    }\n    this.value = val;\n});\n\n$input.bind('keypress', function (e) {\n    e.keyCode === 13 && makeCall();\n});\n\n$input.bind('keyup', function (e) {\n    var pass = telReg.test(this.value);\n    $call[pass ? 'removeClass' : 'addClass']('is-disable');\n\n    if (e.keyCode === 13) {\n        makeCall();\n    }\n});\n\n$call.bind('click', makeCall);\n\nfunction makeCall() {\n    var phone = inputEl.value.replace(/\\s*/g, '');\n    if (phone) {\n        qd.dial(phone, true);\n        qd.hidePage('callPanelFrame');\n    }\n}\n\n$('.close').bind('click', function () {\n    qd.hidePage('switchboardFrame');\n    qd.hidePage('callPanelFrame');\n});\n\n$('.switchboard').bind('click', function (e) {\n    qd.togglePage({\n        trigger: e.currentTarget,\n        name: 'switchboardFrame',\n        relativePage: 'callPanelFrame'\n    });\n    e.stopPropagation();\n});\n\ndocument.addEventListener('click', function () {\n    inputEl.focus();\n    qd.hidePage('switchboardFrame');\n});"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(18),o=r(i),a=n(24),s=r(a),l=n(621),c=r(l),u=n(622),d=r(u),f=n(623),p=r(f),h=n(624),g=r(h),m=n(26),v=r(m),b=n(101),_=n(27),y=void 0;(0,b.setBeforeCreateHooks)("remarkFrame",function(e){var t=this.stator.getState("callid");if(this.isPageExist("remarkFrame")){if(y!==t)return this.stator.showTip("请先关闭上一通电话的备注"),!1;this.stator.trigger("_remarkTabChange",e)}y=t,this.stator.trigger("_remark.hide")});var w=function(e,t){return new o.default(s.default.call(this.stator,{name:"remarkFrame",moveable:!0,style:{width:280,height:330},autoHeight:!0,data:e,script:g.default,cssText:c.default.toString(),html:(0,v.default)(_)+d.default,props:{listTpl:p.default}}),t)};t.default=w},function(e,t,n){t=e.exports=n(19)(!1),t.i(n(25),""),t.push([e.i,"h2 {\n  margin: 0;\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 1.5;\n  padding: 10px 15px 5px;\n  color: #262d3d;\n}\n.icon {\n  display: inline-block;\n  width: 16px;\n  overflow: hidden;\n  color: #a1abc2;\n}\n.icon svg {\n  width: 100%;\n}\n.icon.green:hover {\n  color: #01c480;\n}\na:hover .icon,\n.icon:hover {\n  color: #8490ae;\n}\n.drop {\n  overflow: hidden;\n  position: relative;\n  padding-right: 12px;\n}\n.drop .arrow {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 8px;\n  margin-left: 3px;\n}\n.icon.is-on,\n.text-stress {\n  color: #262d3d;\n}\n.text-hint {\n  color: #d4d8e1;\n}\n.green {\n  color: #00d48a;\n  border-color: #00d48a;\n}\n.red {\n  color: #f75559;\n}\n.blue {\n  color: #4a70ff;\n}\n.orange {\n  color: #ff8345;\n}\n.is-calling {\n  color: #a1abc2;\n}\n.is-calling h2 {\n  color: #f8f9fB;\n}\n.is-calling::-webkit-scrollbar-thumb,\n.is-calling ::-webkit-scrollbar-thumb {\n  background-color: #696c7c;\n}\n.is-calling::-webkit-scrollbar-thumb:hover,\n.is-calling ::-webkit-scrollbar-thumb:hover {\n  background-color: #50535f;\n}\n.is-calling .is-loading {\n  border: 2px solid #fff;\n  border-bottom-color: transparent;\n}\n.is-calling .text {\n  color: #a1abc2;\n}\n.is-calling .icon.is-on,\n.is-calling .text-stress {\n  color: #f8f9fB;\n}\n.is-calling .green {\n  color: #00cb83;\n  border-color: #00cb83;\n}\n.is-calling .red {\n  color: #e1464a;\n}\n.is-calling .blue {\n  color: #6283ff;\n}\n.is-calling.bg-main,\n.is-calling .bg-main {\n  background-position: 100% 50%;\n}\n.is-calling .bg-gap {\n  background-position: 100% 50%;\n}\n.is-calling .ck {\n  color: #f8f9fB;\n}\n.is-calling textarea,\n.is-calling input,\n.is-calling select,\n.is-calling .select,\n.is-calling .select .options {\n  border-color: #4a5264;\n  color: #f8f9fB;\n  background-color: #25283a;\n}\n.is-calling textarea:focus,\n.is-calling input:focus,\n.is-calling select:focus,\n.is-calling .select:focus,\n.is-calling .select .options:focus {\n  border-color: #8d96aa;\n}\n.is-calling textarea::placeholder,\n.is-calling input::placeholder,\n.is-calling select::placeholder,\n.is-calling .select::placeholder,\n.is-calling .select .options::placeholder {\n  color: #a1abc2;\n}\n.is-calling .select .options p:hover,\n.is-calling .select .options .selected {\n  background-color: #383a4a;\n}\n.is-calling .close {\n  color: #78849e;\n}\n.is-calling .close:hover {\n  color: #fff;\n}\n.is-calling input[type=checkbox] {\n  cursor: pointer;\n  position: relative;\n}\n.is-calling input[type=checkbox]::after {\n  position: absolute;\n  top: 0;\n  background-color: #1e2030;\n  color: #fff;\n  width: 14px;\n  height: 14px;\n  display: inline-block;\n  visibility: visible;\n  padding-left: 0px;\n  text-align: center;\n  content: ' ';\n  border-radius: 2px;\n  box-sizing: border-box;\n  border: 1px solid #4A5264;\n}\n.is-calling input[type=checkbox]:checked::after {\n  content: \"\";\n  border-color: #4A70FF;\n  background-color: #4A70FF;\n}\n.is-calling input[type=checkbox]:checked::before {\n  content: '';\n  position: absolute;\n  top: 1px;\n  left: 5px;\n  width: 3px;\n  height: 8px;\n  border: solid white;\n  border-width: 0 2px 2px 0;\n  transform: rotate(45deg);\n  z-index: 1;\n}\n.close {\n  position: absolute;\n  right: 0px;\n  top: 0px;\n  padding: 8px;\n  color: #a8abb3;\n}\n.close:hover {\n  color: #1e2300;\n}\n.close svg {\n  width: 14px;\n  height: 14px;\n}\n.bg-main {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #fff, #fff, #25283a, #25283a) left / cover;\n}\n.bg-gap {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #f4f7fb, #f4f7fb, #101328, #101328) left / cover;\n}\n.bgEaseIn {\n  background-position: 100% 50%;\n}\n.bgEaseOut {\n  background-position: 0% 50%;\n}\n.bg-main,\n.bg-gap {\n  background-size: 800% 800%;\n  animation-fill-mode: both;\n}\n@keyframes bgEaseIn {\n  0% {\n    background-position: 0% 50%;\n  }\n  100% {\n    background-position: 100% 50%;\n  }\n}\n@keyframes bgEaseOut {\n  0% {\n    background-position: 100% 50%;\n  }\n  100% {\n    background-position: 0% 50%;\n  }\n}\nbody {\n  margin: 0;\n  overflow: hidden;\n  font-size: 12px;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  color: #a1abc2;\n}\np {\n  margin: 0;\n}\ntextarea::placeholder,\ninput::placeholder {\n  color: #A1ABC2;\n}\n::-webkit-scrollbar {\n  width: 4px;\n  height: 8px;\n}\n::-webkit-scrollbar-thumb {\n  background-color: #f3f5fa;\n  border-radius: 8px;\n}\n::-webkit-scrollbar-thumb:hover {\n  background-color: #aaa;\n}\n::-webkit-scrollbar-track-piece {\n  background-color: transparent;\n}\nsvg {\n  fill: currentColor;\n}\na {\n  text-decoration: none;\n}\nul,\nli {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n.ck {\n  width: 9px;\n  height: 9px;\n  color: #262d3d;\n  position: absolute;\n  top: 50%;\n  right: 10px;\n  transform: translateY(-50%);\n  display: none;\n}\n.is-selected .ck {\n  display: inline-block;\n}\ninput,\ntextarea,\nselect,\n.select,\n.select .options {\n  font-size: 12px;\n  color: #262d3d;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  border-radius: 3px;\n  border: 1px solid #e1e6f0;\n  background-color: #fff;\n}\ninput:focus,\ntextarea:focus,\nselect:focus,\n.select:focus,\n.select .options:focus {\n  outline: 0;\n  border-color: #c5ccdb;\n}\nselect,\n.select,\n.select .options p {\n  padding: 0 5px;\n}\n.select {\n  min-height: 26px;\n  position: relative;\n  cursor: default;\n}\n.select .options {\n  position: absolute;\n  z-index: 1;\n  left: -1px;\n  top: 29px;\n  width: 100%;\n  max-height: 73px;\n  overflow: auto;\n}\n.select .options p:hover,\n.select .options p.selected {\n  background: #f1f5fb;\n}\n.select p {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.cls:after {\n  content: \"\";\n  font-size: 0;\n  display: block;\n  height: 0;\n  clear: both;\n  visibility: hidden;\n}\n.disabled {\n  pointer-events: none;\n  opacity: .3;\n}\n.hidden {\n  display: none!important;\n}\n.overlay {\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  background: rgba(255, 255, 255, 0.6);\n}\ninput::-webkit-outer-spin-button,\ninput::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n}\ninput[type=\"number\"] {\n  -moz-appearance: textfield;\n}\n.is-loading {\n  border-radius: 100%;\n  margin: 2px;\n  border: 2px solid #ccc;\n  border-bottom-color: transparent;\n  height: 12px;\n  width: 12px;\n  margin-top: -7px;\n  background: 0 0!important;\n  display: inline-block;\n  -webkit-animation: rotate .75s 0s linear infinite;\n  animation: rotate .75s 0s linear infinite;\n}\n@keyframes rotate {\n  0% {\n    -webkit-transform: rotate(0);\n    transform: rotate(0);\n  }\n  50% {\n    -webkit-transform: rotate(180deg);\n    transform: rotate(180deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n.marquee {\n  white-space: nowrap;\n  overflow: hidden;\n  width: 80px;\n  position: relative;\n}\n.marquee p {\n  overflow: hidden;\n  float: left;\n  animation: move linear 6s infinite;\n}\n.marquee span {\n  display: inline-block;\n  padding-left: 10px;\n}\n.marquee::before,\n.marquee::after {\n  position: absolute;\n  top: 0;\n  z-index: 1;\n  content: ' ';\n  width: 10px;\n  height: 100%;\n  animation: bgfadeIn linear 2s;\n}\n.marquee::before {\n  left: -2px;\n  background: linear-gradient(90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n.marquee::after {\n  right: -2px;\n  background: linear-gradient(-90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n@keyframes move {\n  0% {\n    transform: translateX(0);\n  }\n  100% {\n    transform: translateX(-50%);\n  }\n}\n.q-notice {\n  position: absolute;\n  width: 100%;\n  left: 0;\n  top: 0;\n  text-align: center;\n}\n.q-notice.is-auto {\n  pointer-events: none;\n  z-index: 10;\n}\n.q-notice.is-cover {\n  height: 100%;\n  background: rgba(255, 255, 255, 0.7);\n}\n.q-notice .item {\n  margin: 4px auto;\n}\n.q-notice .info {\n  pointer-events: initial;\n  min-width: 170px;\n  padding: 0 15px;\n  line-height: 29px;\n  height: 28px;\n  overflow: hidden;\n  white-space: nowrap;\n  display: inline-block;\n  color: rgba(255, 255, 255, 0.8);\n  background-color: #25283a;\n  box-shadow: 0px 2px 18px 2px rgba(172, 172, 172, 0.3);\n  border-radius: 2px;\n  position: relative;\n}\n.q-notice .info .icon-tip {\n  vertical-align: -3px;\n  margin-right: 2px;\n  width: 14px;\n}\n.q-notice .info [data-action] * {\n  pointer-events: none;\n}\n.q-notice .is-error .info {\n  color: #fff;\n  background-color: #f75559;\n}\n.q-notice .is-success .info {\n  color: #fff;\n  background-color: #00cb83;\n}\n.q-notice .is-close-able .info {\n  text-align: left;\n}\n.q-notice .is-close-able .btn-close {\n  width: 12px;\n  height: 12px;\n  color: #fff;\n  margin: 8px -5px 0 10px;\n  float: right;\n}\n.q-notice .is-close-able .btn-close:hover {\n  opacity: .8;\n}\n.q-notice .is-warning .info {\n  color: rgba(0, 1, 10, 0.93);\n  border: 0.5px solid #FFEBDA;\n  background-color: #FFF8F0;\n  box-shadow: 0px 16px 32px rgba(18, 19, 25, 0.16), 0px 0px 8px rgba(18, 19, 25, 0.08), 0px 0px 1px rgba(18, 19, 25, 0.08);\n}\n.ringing {\n  animation: ringing 2s ease;\n  animation-fill-mode: both;\n  animation-iteration-count: infinite;\n}\n@keyframes ringing {\n  10% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  15% {\n    -webkit-transform: rotate(-15deg);\n    transform: rotate(-15deg);\n  }\n  20% {\n    -webkit-transform: rotate(15deg);\n    transform: rotate(15deg);\n  }\n  25% {\n    -webkit-transform: rotate(-10deg);\n    transform: rotate(-10deg);\n    color: #2af2ac;\n  }\n  30% {\n    -webkit-transform: rotate(5deg);\n    transform: rotate(5deg);\n    color: #2af2ac;\n  }\n  35% {\n    -webkit-transform: rotate(-5deg);\n    transform: rotate(-5deg);\n  }\n  40% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n}\n.ctimer {\n  border-radius: 50%;\n  height: 40px;\n  overflow: hidden;\n  position: relative;\n  width: 40px;\n  background: rgba(255, 255, 255, 0.3);\n}\n.ctimer svg {\n  position: absolute;\n  left: 0;\n  z-index: 2;\n}\n.ctimer .hand {\n  position: absolute;\n  top: 0;\n  height: 100%;\n  overflow: hidden;\n  width: 50%;\n}\n.ctimer .hand span {\n  border: 20px solid rgba(255, 255, 255, 0.3);\n  border-bottom-color: transparent;\n  border-left-color: transparent;\n  border-radius: 50%;\n  display: block;\n  height: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  transform: rotate(225deg);\n  width: 0;\n}\n.ctimer .hand-left {\n  left: 0;\n  transform: rotate(180deg);\n}\n.ctimer .hand-right {\n  right: 0;\n}\n.ctimer .hand span {\n  animation-duration: var(--post-edit-time);\n  animation-iteration-count: 1;\n  animation-timing-function: linear;\n  animation-fill-mode: both;\n}\n.ctimer .hand-left span {\n  animation-name: spinleft;\n}\n.ctimer .hand-right span {\n  animation-name: spinright;\n}\n@keyframes spinleft {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(225deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\n@keyframes spinright {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(405deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\n.remark {\n  overflow: hidden;\n  user-select: none;\n  -webkit-user-select: none;\n}\n.remark.is-calling h2 {\n  color: #f8f9fB;\n}\n.remark.is-calling .btn-save {\n  background-color: #6283ff;\n  border: 1px solid #6283ff;\n}\n.remark.is-calling .btn-save:hover {\n  background-color: #4a70ff;\n}\n.remark.is-calling .btn-cancel {\n  color: #fff;\n  border: 1px solid #4a5264;\n  background-color: #101328;\n}\n.remark.is-calling .btn-cancel:hover {\n  background-color: #383a4a;\n}\n.remark.is-calling .content {\n  background-color: #333544;\n  color: #f8f9fB;\n}\n.remark.is-calling .tab {\n  border-bottom: 1px solid transparent;\n  background-color: #25283a;\n}\n.remark.is-calling .tab a,\n.remark.is-calling .tab .t_item {\n  color: #a1abc2;\n}\n.remark.is-calling .tab .is-selected,\n.remark.is-calling .tab a:hover,\n.remark.is-calling .tab .t_item:hover {\n  color: #f8f9fB;\n}\n.remark.is-calling #remarks {\n  background-color: #0f1328;\n}\n.remark.is-calling .wraper .name {\n  color: #f8f9fB;\n}\nh2 {\n  font-size: 14px;\n  color: #262d3d;\n}\nh2 span {\n  color: #6c7280;\n  font-size: 12px;\n  font-weight: normal;\n  margin-left: 10px;\n}\n.tab {\n  height: 40px;\n  line-height: 39px;\n  position: relative;\n  text-align: center;\n  background-color: #f4f7fb;\n  transition: background-color 0.15s linear;\n}\n.tab a,\n.tab .t_item {\n  display: inline-block;\n  text-align: center;\n  color: #1d2331;\n  font-size: 14px;\n  padding: 0 5px;\n  margin: 0 8px;\n}\n.tab .is-selected,\n.tab a:hover,\n.tab .t_item:hover {\n  color: #0067ed;\n}\n.tab .pointer {\n  width: 25%;\n  height: 3px;\n  display: block;\n  overflow: hidden;\n  background-color: #00cb83;\n  position: absolute;\n  left: 0;\n  bottom: -1px;\n  transition: transform 0.2s ease-out;\n  transform: translate3d(-100%, 0, 0);\n}\n.btn-action {\n  text-align: right;\n}\n.btn-save,\n.btn-cancel {\n  display: inline-block;\n  width: 54px;\n  line-height: 19px;\n  height: 20px;\n  text-align: center;\n  margin: 10px auto 0;\n  border-radius: 2px;\n}\n.btn-save {\n  color: #fff;\n  background-color: #4a70ff;\n  border: 1px solid #4a70ff;\n}\n.btn-save:hover {\n  background-color: #6283ff;\n}\n.btn-cancel {\n  color: #a1abc2;\n  border: 1px solid #e1e6f0;\n  background-color: #fff;\n  margin-left: 8px;\n}\n.btn-cancel:hover {\n  background-color: #f4f7fb;\n}\n.btn-save {\n  position: relative;\n}\n.btn-save.saving {\n  text-indent: -20000px;\n}\n.btn-save.saving::after {\n  content: ' ';\n  border-radius: 100%;\n  margin: 2px;\n  border: 2px solid #fff;\n  border-bottom-color: transparent;\n  height: 8px;\n  width: 8px;\n  margin: -5px 0 0 -4px;\n  background: 0 0!important;\n  display: inline-block;\n  -webkit-animation: rotate .75s 0s linear infinite;\n  animation: rotate .75s 0s linear infinite;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n}\n.btn-save.disabled {\n  pointer-events: none;\n  opacity: .4;\n}\n.wraper {\n  padding: 10px 15px 15px;\n}\n.wraper textarea {\n  padding: 5px;\n  font-size: 12px;\n  line-height: 1.4;\n  width: 100%;\n  min-height: 232px;\n  resize: none;\n  overflow: hidden;\n}\n.wraper ul {\n  width: 100%;\n  height: auto;\n  min-height: 140px;\n}\n.wraper ul li {\n  padding-bottom: 10px;\n}\n.wraper ul .empty {\n  position: absolute;\n  left: 50%;\n  top: 40%;\n  transform: translateX(-50%);\n  color: #a8abb3;\n  width: inherit;\n}\n.wraper .name {\n  display: inline-block;\n  max-width: 40%;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  color: #262d3d;\n}\n.wraper .time {\n  float: right;\n  color: #6c7280;\n}\n.wraper .content {\n  background-color: #fbfbfb;\n  padding: 10px;\n  margin-top: 8px;\n  word-break: break-word;\n  color: #262d3d;\n}\n.wraper .writeRemark-container {\n  position: relative;\n}\n.wraper .limit {\n  position: absolute;\n  right: 8px;\n  bottom: 5px;\n  color: #a8abb3;\n}\n.wraper .limit i {\n  font-style: normal;\n}\n.wraper .limit .warn {\n  color: red;\n}\n.wraper .empty {\n  text-align: center;\n}\n.catRemark {\n  overflow: auto;\n  padding-bottom: 5;\n}\n#remarks {\n  height: 290px;\n  overflow: auto;\n}\n",""])},function(e,t){e.exports='<%\n    var status = status || \'normal\';\n    var isNormalState = status === \'normal\' || status === \'over\';\n%>\n<div class="remark bg-main <%=isNormalState ? \'\' : \'is-calling\'%>">\n    <div class="tab">\n        <a index="0" href="javascript:;" name="catRemark" title="最多展示10条">查看备注</a>\n        <a index="1" href="javascript:;" name="writeRemark">填写备注</a>\n        <i class="pointer"></i>\n    </div>\n    <div id="remarks">\n        <span class="loading"></span>\n    </div>\n    <a href="javascript:void(0);" class="close icon"><svg viewBox="0 0 12 12"><use xlink:href="#close"></use></svg></a>\n</div>\n'},function(e,t){e.exports='<%if (tab === 1) {%>\n    <div class="wraper writeRemark">\n        <div class="writeRemark-container">\n            <textarea <%=status === \'calling\' ? \'disabled\' : \'\' %> maxlength="200" autofocus placeholder="请输入备注(被咨询人或被转接人可查看)" id="msg"><%=remark%></textarea>\n            <span class="limit"><i>0</i>/200</span>\n        </div>\n        <div class="btn-action">\n            <a class="btn-save <%=status === \'calling\' ? \'disabled\' : \'\' %>" href="javascript:;">保存</a>\n            <a class="btn-cancel" href="javascript:;">取消</a>\n        </div>\n    </div>\n<%} else {%>\n    <div class="wraper catRemark">\n        <div class="catRemark-container">\n            <ul class="remarks">\n            <%\n            var records = records || [];\n            if (records.length === 0) {   \n            %>\n                <li class="empty">暂无备注信息</li>\n            <%} else {\n            for(i=0; i<records.length; i++) {\n                var item = records[i];\n            %>\n            <li>\n                <span class="name"><%=item.name || \'-\'%></span>\n                <span class="time"><%=format(\'Y-m-d H:i:s\', item.timeStamp)%></span>\n                <div class="content"><%=decodeURIComponent(item.msg)%></div>\n            </li>\n            <%}}%>\n            </ul>\n        </div>\n    </div>\n<%}%>\n'},function(e,t){e.exports="'use strict';\n\nvar qd = window.qd;\nvar render = window.render;\nvar listTpl = window.listTpl;\n\nqd._debug() && console.log('log from remark');\n\nvar $limit;\nvar $textarea;\nvar $btnSave;\nvar $msg;\nvar callid = qd.getState('callid');\nvar $pointer = $('.pointer');\nvar $taba = $('.tab a');\n\nfunction onShow(data, tab) {\n    setTab($taba.eq(tab || 0).elems[0]);\n}\n\nfunction onHide() {\n    qd.trigger('_remarkFrameHide');\n}\n\nfunction setTab(tab) {\n    var width = tab.clientWidth;\n    var left = tab.offsetLeft;\n    var index = +tab.getAttribute('index');\n    $taba.removeClass('is-selected');\n    tab.classList.add('is-selected');\n    $pointer.css({\n        width: width,\n        transform: 'translate3d(' + left + 'px, 0, 0)'\n    });\n\n    if (index === 0) {\n        qd.trigger('_remarkRead');\n        getCallRemarks();\n    } else {\n        renderTpl({ tab: 1, remark: qd.getState('remark') });\n    }\n}\n$taba.bind('click', function (e) {\n    setTab(this);\n});\n\nfunction count() {\n    var len = $textarea.elems[0].value.length;\n    $limit.text(len);\n    $limit[len > 200 ? 'addClass' : 'removeClass']('warn');\n}\n\nfunction getCallRemarks() {\n    $('.loading').css('display', 'block');\n    qd.getCallRemarks({\n        callid: callid,\n        success: function success(res) {\n            renderTpl(res);\n        },\n        complete: function complete() {\n            $('.loading').css('display', 'none');\n        }\n    });\n    qd.trigger('_remarkRead');\n}\n\nvar $frame = $('#remarks');\nfunction renderTpl(data) {\n    var html;\n    data.format = qd.format;\n    data.decodeURIComponent = decodeURIComponent;\n    html = render(listTpl)(data);\n    $frame.html(html);\n\n\n    if (data.tab == 1) {\n        $limit = $('.remark i');\n        $textarea = $('textarea');\n        $btnSave = $('.btn-save');\n        $msg = $('#msg');\n        count();\n\n        $textarea.bind('keyup', count);\n        $textarea.bind('change', count);\n        $('.btn-cancel').bind('click', function (e) {\n            qd.hidePage('remarkFrame');\n        });\n\n        $btnSave.bind('click', saveRemark);\n\n        $msg.bind('keypress', function (e) {\n            if (e.ctrlKey && e.keyCode === 13) {\n                saveRemark();\n            }\n        });\n        $('#msg, .btn-save, .btn-cancel, .close').bind('mousedown', function (e) {\n            e.stopPropagation();\n        });\n    }\n}\n\nqd.one('stateChange.remarkFrame', function (e, state) {\n    if (state !== 'calling' && $textarea) {\n        $textarea.elems[0].removeAttribute('disabled');\n        $btnSave.removeClass('disabled');\n    }\n});\n\nfunction saveRemark() {\n    var msg = $msg.elems[0].value;\n    var state = qd.getState();\n    if (msg.trim() === '') {\n        notice.error('请填写备注内容');\n        return;\n    }\n    $btnSave.addClass('saving');\n    qd.writeCallRemarks({\n        callid: callid,\n        type: state.remark ? 1 : 0,\n        msg: encodeURIComponent(msg), success: function success() {\n            qd.showTip((state.remark ? '更新' : '保存') + '\\u5907\\u6CE8\\u4FE1\\u606F\\u6210\\u529F', 'success');\n            qd.hidePage('remarkFrame');\n\n            qd.setState({\n                remark: callid === state.callid ? msg : ''\n            });\n        },\n        fail: function fail(err) {\n            $btnSave.removeClass('saving');\n            notice.error(err.msg || '保存备注信息失败');\n        }\n    });\n}\n\n$('.close').bind('click', function (e) {\n    qd.hidePage('remarkFrame');\n});\n\nqd.one('debug.remarkFrame', function () {\n    console.log('remark page');\n});"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(18),o=r(i),a=n(24),s=r(a),l=n(626),c=r(l),u=n(627),d=r(u),f=n(628),p=r(f),h=n(26),g=r(h),m=n(27),v=function(e,t){var n=e.status,r="normal"===n||"over"===n,i=s.default.call(this.stator,{name:"netWorkStateFrame",style:{width:200,background:"#fff"},animateCss:{in:["qd__animated","qd__fadeInUp"],out:["qd__animated","qd__fadeOutDown"]},autoHeight:".net-container",data:e,script:p.default,cssText:c.default.toString(),html:(0,g.default)(m)+'<div class="net-container bg-main '+(r?"":"is-calling")+'"></div>',props:{stateTpl:d.default}});return new o.default(i,t)};t.default=v},function(e,t,n){t=e.exports=n(19)(!1),t.i(n(25),""),t.push([e.i,"h2 {\n  margin: 0;\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 1.5;\n  padding: 10px 15px 5px;\n  color: #262d3d;\n}\n.icon {\n  display: inline-block;\n  width: 16px;\n  overflow: hidden;\n  color: #a1abc2;\n}\n.icon svg {\n  width: 100%;\n}\n.icon.green:hover {\n  color: #01c480;\n}\na:hover .icon,\n.icon:hover {\n  color: #8490ae;\n}\n.drop {\n  overflow: hidden;\n  position: relative;\n  padding-right: 12px;\n}\n.drop .arrow {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 8px;\n  margin-left: 3px;\n}\n.icon.is-on,\n.text-stress {\n  color: #262d3d;\n}\n.text-hint {\n  color: #d4d8e1;\n}\n.green {\n  color: #00d48a;\n  border-color: #00d48a;\n}\n.red {\n  color: #f75559;\n}\n.blue {\n  color: #4a70ff;\n}\n.orange {\n  color: #ff8345;\n}\n.is-calling {\n  color: #a1abc2;\n}\n.is-calling h2 {\n  color: #f8f9fB;\n}\n.is-calling::-webkit-scrollbar-thumb,\n.is-calling ::-webkit-scrollbar-thumb {\n  background-color: #696c7c;\n}\n.is-calling::-webkit-scrollbar-thumb:hover,\n.is-calling ::-webkit-scrollbar-thumb:hover {\n  background-color: #50535f;\n}\n.is-calling .is-loading {\n  border: 2px solid #fff;\n  border-bottom-color: transparent;\n}\n.is-calling .text {\n  color: #a1abc2;\n}\n.is-calling .icon.is-on,\n.is-calling .text-stress {\n  color: #f8f9fB;\n}\n.is-calling .green {\n  color: #00cb83;\n  border-color: #00cb83;\n}\n.is-calling .red {\n  color: #e1464a;\n}\n.is-calling .blue {\n  color: #6283ff;\n}\n.is-calling.bg-main,\n.is-calling .bg-main {\n  background-position: 100% 50%;\n}\n.is-calling .bg-gap {\n  background-position: 100% 50%;\n}\n.is-calling .ck {\n  color: #f8f9fB;\n}\n.is-calling textarea,\n.is-calling input,\n.is-calling select,\n.is-calling .select,\n.is-calling .select .options {\n  border-color: #4a5264;\n  color: #f8f9fB;\n  background-color: #25283a;\n}\n.is-calling textarea:focus,\n.is-calling input:focus,\n.is-calling select:focus,\n.is-calling .select:focus,\n.is-calling .select .options:focus {\n  border-color: #8d96aa;\n}\n.is-calling textarea::placeholder,\n.is-calling input::placeholder,\n.is-calling select::placeholder,\n.is-calling .select::placeholder,\n.is-calling .select .options::placeholder {\n  color: #a1abc2;\n}\n.is-calling .select .options p:hover,\n.is-calling .select .options .selected {\n  background-color: #383a4a;\n}\n.is-calling .close {\n  color: #78849e;\n}\n.is-calling .close:hover {\n  color: #fff;\n}\n.is-calling input[type=checkbox] {\n  cursor: pointer;\n  position: relative;\n}\n.is-calling input[type=checkbox]::after {\n  position: absolute;\n  top: 0;\n  background-color: #1e2030;\n  color: #fff;\n  width: 14px;\n  height: 14px;\n  display: inline-block;\n  visibility: visible;\n  padding-left: 0px;\n  text-align: center;\n  content: ' ';\n  border-radius: 2px;\n  box-sizing: border-box;\n  border: 1px solid #4A5264;\n}\n.is-calling input[type=checkbox]:checked::after {\n  content: \"\";\n  border-color: #4A70FF;\n  background-color: #4A70FF;\n}\n.is-calling input[type=checkbox]:checked::before {\n  content: '';\n  position: absolute;\n  top: 1px;\n  left: 5px;\n  width: 3px;\n  height: 8px;\n  border: solid white;\n  border-width: 0 2px 2px 0;\n  transform: rotate(45deg);\n  z-index: 1;\n}\n.close {\n  position: absolute;\n  right: 0px;\n  top: 0px;\n  padding: 8px;\n  color: #a8abb3;\n}\n.close:hover {\n  color: #1e2300;\n}\n.close svg {\n  width: 14px;\n  height: 14px;\n}\n.bg-main {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #fff, #fff, #25283a, #25283a) left / cover;\n}\n.bg-gap {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #f4f7fb, #f4f7fb, #101328, #101328) left / cover;\n}\n.bgEaseIn {\n  background-position: 100% 50%;\n}\n.bgEaseOut {\n  background-position: 0% 50%;\n}\n.bg-main,\n.bg-gap {\n  background-size: 800% 800%;\n  animation-fill-mode: both;\n}\n@keyframes bgEaseIn {\n  0% {\n    background-position: 0% 50%;\n  }\n  100% {\n    background-position: 100% 50%;\n  }\n}\n@keyframes bgEaseOut {\n  0% {\n    background-position: 100% 50%;\n  }\n  100% {\n    background-position: 0% 50%;\n  }\n}\nbody {\n  margin: 0;\n  overflow: hidden;\n  font-size: 12px;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  color: #a1abc2;\n}\np {\n  margin: 0;\n}\ntextarea::placeholder,\ninput::placeholder {\n  color: #A1ABC2;\n}\n::-webkit-scrollbar {\n  width: 4px;\n  height: 8px;\n}\n::-webkit-scrollbar-thumb {\n  background-color: #f3f5fa;\n  border-radius: 8px;\n}\n::-webkit-scrollbar-thumb:hover {\n  background-color: #aaa;\n}\n::-webkit-scrollbar-track-piece {\n  background-color: transparent;\n}\nsvg {\n  fill: currentColor;\n}\na {\n  text-decoration: none;\n}\nul,\nli {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n.ck {\n  width: 9px;\n  height: 9px;\n  color: #262d3d;\n  position: absolute;\n  top: 50%;\n  right: 10px;\n  transform: translateY(-50%);\n  display: none;\n}\n.is-selected .ck {\n  display: inline-block;\n}\ninput,\ntextarea,\nselect,\n.select,\n.select .options {\n  font-size: 12px;\n  color: #262d3d;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  border-radius: 3px;\n  border: 1px solid #e1e6f0;\n  background-color: #fff;\n}\ninput:focus,\ntextarea:focus,\nselect:focus,\n.select:focus,\n.select .options:focus {\n  outline: 0;\n  border-color: #c5ccdb;\n}\nselect,\n.select,\n.select .options p {\n  padding: 0 5px;\n}\n.select {\n  min-height: 26px;\n  position: relative;\n  cursor: default;\n}\n.select .options {\n  position: absolute;\n  z-index: 1;\n  left: -1px;\n  top: 29px;\n  width: 100%;\n  max-height: 73px;\n  overflow: auto;\n}\n.select .options p:hover,\n.select .options p.selected {\n  background: #f1f5fb;\n}\n.select p {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.cls:after {\n  content: \"\";\n  font-size: 0;\n  display: block;\n  height: 0;\n  clear: both;\n  visibility: hidden;\n}\n.disabled {\n  pointer-events: none;\n  opacity: .3;\n}\n.hidden {\n  display: none!important;\n}\n.overlay {\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  background: rgba(255, 255, 255, 0.6);\n}\ninput::-webkit-outer-spin-button,\ninput::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n}\ninput[type=\"number\"] {\n  -moz-appearance: textfield;\n}\n.is-loading {\n  border-radius: 100%;\n  margin: 2px;\n  border: 2px solid #ccc;\n  border-bottom-color: transparent;\n  height: 12px;\n  width: 12px;\n  margin-top: -7px;\n  background: 0 0!important;\n  display: inline-block;\n  -webkit-animation: rotate .75s 0s linear infinite;\n  animation: rotate .75s 0s linear infinite;\n}\n@keyframes rotate {\n  0% {\n    -webkit-transform: rotate(0);\n    transform: rotate(0);\n  }\n  50% {\n    -webkit-transform: rotate(180deg);\n    transform: rotate(180deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n.marquee {\n  white-space: nowrap;\n  overflow: hidden;\n  width: 80px;\n  position: relative;\n}\n.marquee p {\n  overflow: hidden;\n  float: left;\n  animation: move linear 6s infinite;\n}\n.marquee span {\n  display: inline-block;\n  padding-left: 10px;\n}\n.marquee::before,\n.marquee::after {\n  position: absolute;\n  top: 0;\n  z-index: 1;\n  content: ' ';\n  width: 10px;\n  height: 100%;\n  animation: bgfadeIn linear 2s;\n}\n.marquee::before {\n  left: -2px;\n  background: linear-gradient(90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n.marquee::after {\n  right: -2px;\n  background: linear-gradient(-90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n@keyframes move {\n  0% {\n    transform: translateX(0);\n  }\n  100% {\n    transform: translateX(-50%);\n  }\n}\n.q-notice {\n  position: absolute;\n  width: 100%;\n  left: 0;\n  top: 0;\n  text-align: center;\n}\n.q-notice.is-auto {\n  pointer-events: none;\n  z-index: 10;\n}\n.q-notice.is-cover {\n  height: 100%;\n  background: rgba(255, 255, 255, 0.7);\n}\n.q-notice .item {\n  margin: 4px auto;\n}\n.q-notice .info {\n  pointer-events: initial;\n  min-width: 170px;\n  padding: 0 15px;\n  line-height: 29px;\n  height: 28px;\n  overflow: hidden;\n  white-space: nowrap;\n  display: inline-block;\n  color: rgba(255, 255, 255, 0.8);\n  background-color: #25283a;\n  box-shadow: 0px 2px 18px 2px rgba(172, 172, 172, 0.3);\n  border-radius: 2px;\n  position: relative;\n}\n.q-notice .info .icon-tip {\n  vertical-align: -3px;\n  margin-right: 2px;\n  width: 14px;\n}\n.q-notice .info [data-action] * {\n  pointer-events: none;\n}\n.q-notice .is-error .info {\n  color: #fff;\n  background-color: #f75559;\n}\n.q-notice .is-success .info {\n  color: #fff;\n  background-color: #00cb83;\n}\n.q-notice .is-close-able .info {\n  text-align: left;\n}\n.q-notice .is-close-able .btn-close {\n  width: 12px;\n  height: 12px;\n  color: #fff;\n  margin: 8px -5px 0 10px;\n  float: right;\n}\n.q-notice .is-close-able .btn-close:hover {\n  opacity: .8;\n}\n.q-notice .is-warning .info {\n  color: rgba(0, 1, 10, 0.93);\n  border: 0.5px solid #FFEBDA;\n  background-color: #FFF8F0;\n  box-shadow: 0px 16px 32px rgba(18, 19, 25, 0.16), 0px 0px 8px rgba(18, 19, 25, 0.08), 0px 0px 1px rgba(18, 19, 25, 0.08);\n}\n.ringing {\n  animation: ringing 2s ease;\n  animation-fill-mode: both;\n  animation-iteration-count: infinite;\n}\n@keyframes ringing {\n  10% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  15% {\n    -webkit-transform: rotate(-15deg);\n    transform: rotate(-15deg);\n  }\n  20% {\n    -webkit-transform: rotate(15deg);\n    transform: rotate(15deg);\n  }\n  25% {\n    -webkit-transform: rotate(-10deg);\n    transform: rotate(-10deg);\n    color: #2af2ac;\n  }\n  30% {\n    -webkit-transform: rotate(5deg);\n    transform: rotate(5deg);\n    color: #2af2ac;\n  }\n  35% {\n    -webkit-transform: rotate(-5deg);\n    transform: rotate(-5deg);\n  }\n  40% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n}\n.ctimer {\n  border-radius: 50%;\n  height: 40px;\n  overflow: hidden;\n  position: relative;\n  width: 40px;\n  background: rgba(255, 255, 255, 0.3);\n}\n.ctimer svg {\n  position: absolute;\n  left: 0;\n  z-index: 2;\n}\n.ctimer .hand {\n  position: absolute;\n  top: 0;\n  height: 100%;\n  overflow: hidden;\n  width: 50%;\n}\n.ctimer .hand span {\n  border: 20px solid rgba(255, 255, 255, 0.3);\n  border-bottom-color: transparent;\n  border-left-color: transparent;\n  border-radius: 50%;\n  display: block;\n  height: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  transform: rotate(225deg);\n  width: 0;\n}\n.ctimer .hand-left {\n  left: 0;\n  transform: rotate(180deg);\n}\n.ctimer .hand-right {\n  right: 0;\n}\n.ctimer .hand span {\n  animation-duration: var(--post-edit-time);\n  animation-iteration-count: 1;\n  animation-timing-function: linear;\n  animation-fill-mode: both;\n}\n.ctimer .hand-left span {\n  animation-name: spinleft;\n}\n.ctimer .hand-right span {\n  animation-name: spinright;\n}\n@keyframes spinleft {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(225deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\n@keyframes spinright {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(405deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\n.net-container {\n  user-select: none;\n  -webkit-user-select: none;\n  background-color: #fff;\n  min-height: 60px;\n  padding: 10px 15px;\n  font-size: 12px;\n}\n.net-container h2 {\n  color: #00cb83;\n  font-size: 14px;\n  margin: 0;\n  font-weight: normal;\n  padding: 0;\n}\n.net-container h2.level-3 {\n  color: #ff8345;\n}\n.net-container h2.level-2,\n.net-container h2.level-1 {\n  color: #e1464a;\n}\n.net-container ul {\n  padding-top: 8px;\n}\n.net-container li {\n  text-align: right;\n  line-height: 22px;\n  min-height: 22px;\n  font-weight: 300;\n}\n.net-container li label {\n  float: left;\n  font-weight: normal;\n}\n.net-container li p {\n  color: #262d3d;\n}\n.net-container li svg {\n  width: 12px;\n  height: 12px;\n  vertical-align: -1px;\n  margin-right: -2px;\n}\n.net-container.is-calling {\n  background-color: #020205;\n}\n.net-container.is-calling li p,\n.net-container.is-calling li svg {\n  color: #f8f9fB;\n}\n",""])},function(e,t){e.exports='<%\n    level = level || 5;\n    var title = level > 3 ? \'网络状况正常\' : (level === 3 ? \'网络状况一般\' : \'网络状况不佳\');\n%>\n<h2 class="level-<%=level%>"><%=title%></h2>\n<ul>\n    <li>\n        <label>当前接入方式</label>\n        <p>电脑音频</p>\n    </li>\n    <li>\n        <label>延迟</label>\n        <p><%=(rtt || rtt == 0) ? Math.floor(rtt) + \'ms\' : \'未知\'%></p>\n    </li>\n    <li>\n        <label>丢包率</label>\n        <%if (packageLostUp || packageLostUp == 0) {%>\n        <p>\n            <svg style="margin-right: -3px" viewBox="0 0 12 12"><use xlink:href="#arrow-up"></use></svg>\n            <%=Math.floor(packageLostUp * 100)%>%\n        </p>\n        <%}%>\n        <%if (packageLostDown || packageLostDown == 0) {%>\n        <p>\n            <svg viewBox="0 0 12 12"><use xlink:href="#arrow-down"></use></svg>\n            <%=Math.floor(packageLostDown * 100)%>%\n        </p>\n        <%}%>\n        <%if (packageLostDown === undefined && packageLostUp === undefined) {%>\n        <p>未知</p>\n        <%}%>\n    </li>\n</ul>'},function(e,t){e.exports="'use strict';\n\nvar qd = window.qd;\nvar render = window.render;\nvar stateTpl = window.stateTpl;\n\nfunction onShow() {\n    var netWorkStatus = qd.getState('netWorkStatus') || {};\n    renderState(netWorkStatus);\n}\n\nfunction onHide() {\n    qd.off('syncNetWorkState.networkStateFrame');\n}\n\nfunction renderState(data) {\n    var html = void 0;\n\n    data.Math = Math;\n    html = render(stateTpl)(data);\n    $('.net-container').html(html);\n    window.onRefresh();\n}\n\nqd.one('syncNetWorkState.networkStateFrame', function (e, res) {\n    renderState(res);\n});"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(18),o=r(i),a=n(24),s=r(a),l=n(303),c=r(l),u=n(96),d=n(215),f=n(630),p=r(f),h=n(631),g=r(h),m=n(632),v=r(m),b=n(26),_=r(b),y=n(27),w=function(e,t){return new o.default(s.default.call(this.stator,{name:"detectFrame",moveable:!0,style:{width:320,height:281},data:e,script:v.default,cssText:p.default.toString(),html:(0,_.default)(y)+g.default,props:{SoundMeter:function(){return c.default},Player:function(){return u.Player},getMicroMedia:function(){return d.getMicroMedia},stopMedia:function(){return d.stopMedia},getMicrophones:function(){return d.getMicrophones},getSpeakers:function(){return d.getSpeakers}}}),t)};t.default=w},function(e,t,n){t=e.exports=n(19)(!1),t.i(n(25),""),t.push([e.i,"h2 {\n  margin: 0;\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 1.5;\n  padding: 10px 15px 5px;\n  color: #262d3d;\n}\n.icon {\n  display: inline-block;\n  width: 16px;\n  overflow: hidden;\n  color: #a1abc2;\n}\n.icon svg {\n  width: 100%;\n}\n.icon.green:hover {\n  color: #01c480;\n}\na:hover .icon,\n.icon:hover {\n  color: #8490ae;\n}\n.drop {\n  overflow: hidden;\n  position: relative;\n  padding-right: 12px;\n}\n.drop .arrow {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 8px;\n  margin-left: 3px;\n}\n.icon.is-on,\n.text-stress {\n  color: #262d3d;\n}\n.text-hint {\n  color: #d4d8e1;\n}\n.green {\n  color: #00d48a;\n  border-color: #00d48a;\n}\n.red {\n  color: #f75559;\n}\n.blue {\n  color: #4a70ff;\n}\n.orange {\n  color: #ff8345;\n}\n.is-calling {\n  color: #a1abc2;\n}\n.is-calling h2 {\n  color: #f8f9fB;\n}\n.is-calling::-webkit-scrollbar-thumb,\n.is-calling ::-webkit-scrollbar-thumb {\n  background-color: #696c7c;\n}\n.is-calling::-webkit-scrollbar-thumb:hover,\n.is-calling ::-webkit-scrollbar-thumb:hover {\n  background-color: #50535f;\n}\n.is-calling .is-loading {\n  border: 2px solid #fff;\n  border-bottom-color: transparent;\n}\n.is-calling .text {\n  color: #a1abc2;\n}\n.is-calling .icon.is-on,\n.is-calling .text-stress {\n  color: #f8f9fB;\n}\n.is-calling .green {\n  color: #00cb83;\n  border-color: #00cb83;\n}\n.is-calling .red {\n  color: #e1464a;\n}\n.is-calling .blue {\n  color: #6283ff;\n}\n.is-calling.bg-main,\n.is-calling .bg-main {\n  background-position: 100% 50%;\n}\n.is-calling .bg-gap {\n  background-position: 100% 50%;\n}\n.is-calling .ck {\n  color: #f8f9fB;\n}\n.is-calling textarea,\n.is-calling input,\n.is-calling select,\n.is-calling .select,\n.is-calling .select .options {\n  border-color: #4a5264;\n  color: #f8f9fB;\n  background-color: #25283a;\n}\n.is-calling textarea:focus,\n.is-calling input:focus,\n.is-calling select:focus,\n.is-calling .select:focus,\n.is-calling .select .options:focus {\n  border-color: #8d96aa;\n}\n.is-calling textarea::placeholder,\n.is-calling input::placeholder,\n.is-calling select::placeholder,\n.is-calling .select::placeholder,\n.is-calling .select .options::placeholder {\n  color: #a1abc2;\n}\n.is-calling .select .options p:hover,\n.is-calling .select .options .selected {\n  background-color: #383a4a;\n}\n.is-calling .close {\n  color: #78849e;\n}\n.is-calling .close:hover {\n  color: #fff;\n}\n.is-calling input[type=checkbox] {\n  cursor: pointer;\n  position: relative;\n}\n.is-calling input[type=checkbox]::after {\n  position: absolute;\n  top: 0;\n  background-color: #1e2030;\n  color: #fff;\n  width: 14px;\n  height: 14px;\n  display: inline-block;\n  visibility: visible;\n  padding-left: 0px;\n  text-align: center;\n  content: ' ';\n  border-radius: 2px;\n  box-sizing: border-box;\n  border: 1px solid #4A5264;\n}\n.is-calling input[type=checkbox]:checked::after {\n  content: \"\";\n  border-color: #4A70FF;\n  background-color: #4A70FF;\n}\n.is-calling input[type=checkbox]:checked::before {\n  content: '';\n  position: absolute;\n  top: 1px;\n  left: 5px;\n  width: 3px;\n  height: 8px;\n  border: solid white;\n  border-width: 0 2px 2px 0;\n  transform: rotate(45deg);\n  z-index: 1;\n}\n.close {\n  position: absolute;\n  right: 0px;\n  top: 0px;\n  padding: 8px;\n  color: #a8abb3;\n}\n.close:hover {\n  color: #1e2300;\n}\n.close svg {\n  width: 14px;\n  height: 14px;\n}\n.bg-main {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #fff, #fff, #25283a, #25283a) left / cover;\n}\n.bg-gap {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #f4f7fb, #f4f7fb, #101328, #101328) left / cover;\n}\n.bgEaseIn {\n  background-position: 100% 50%;\n}\n.bgEaseOut {\n  background-position: 0% 50%;\n}\n.bg-main,\n.bg-gap {\n  background-size: 800% 800%;\n  animation-fill-mode: both;\n}\n@keyframes bgEaseIn {\n  0% {\n    background-position: 0% 50%;\n  }\n  100% {\n    background-position: 100% 50%;\n  }\n}\n@keyframes bgEaseOut {\n  0% {\n    background-position: 100% 50%;\n  }\n  100% {\n    background-position: 0% 50%;\n  }\n}\nbody {\n  margin: 0;\n  overflow: hidden;\n  font-size: 12px;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  color: #a1abc2;\n}\np {\n  margin: 0;\n}\ntextarea::placeholder,\ninput::placeholder {\n  color: #A1ABC2;\n}\n::-webkit-scrollbar {\n  width: 4px;\n  height: 8px;\n}\n::-webkit-scrollbar-thumb {\n  background-color: #f3f5fa;\n  border-radius: 8px;\n}\n::-webkit-scrollbar-thumb:hover {\n  background-color: #aaa;\n}\n::-webkit-scrollbar-track-piece {\n  background-color: transparent;\n}\nsvg {\n  fill: currentColor;\n}\na {\n  text-decoration: none;\n}\nul,\nli {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n.ck {\n  width: 9px;\n  height: 9px;\n  color: #262d3d;\n  position: absolute;\n  top: 50%;\n  right: 10px;\n  transform: translateY(-50%);\n  display: none;\n}\n.is-selected .ck {\n  display: inline-block;\n}\ninput,\ntextarea,\nselect,\n.select,\n.select .options {\n  font-size: 12px;\n  color: #262d3d;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  border-radius: 3px;\n  border: 1px solid #e1e6f0;\n  background-color: #fff;\n}\ninput:focus,\ntextarea:focus,\nselect:focus,\n.select:focus,\n.select .options:focus {\n  outline: 0;\n  border-color: #c5ccdb;\n}\nselect,\n.select,\n.select .options p {\n  padding: 0 5px;\n}\n.select {\n  min-height: 26px;\n  position: relative;\n  cursor: default;\n}\n.select .options {\n  position: absolute;\n  z-index: 1;\n  left: -1px;\n  top: 29px;\n  width: 100%;\n  max-height: 73px;\n  overflow: auto;\n}\n.select .options p:hover,\n.select .options p.selected {\n  background: #f1f5fb;\n}\n.select p {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.cls:after {\n  content: \"\";\n  font-size: 0;\n  display: block;\n  height: 0;\n  clear: both;\n  visibility: hidden;\n}\n.disabled {\n  pointer-events: none;\n  opacity: .3;\n}\n.hidden {\n  display: none!important;\n}\n.overlay {\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  background: rgba(255, 255, 255, 0.6);\n}\ninput::-webkit-outer-spin-button,\ninput::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n}\ninput[type=\"number\"] {\n  -moz-appearance: textfield;\n}\n.is-loading {\n  border-radius: 100%;\n  margin: 2px;\n  border: 2px solid #ccc;\n  border-bottom-color: transparent;\n  height: 12px;\n  width: 12px;\n  margin-top: -7px;\n  background: 0 0!important;\n  display: inline-block;\n  -webkit-animation: rotate .75s 0s linear infinite;\n  animation: rotate .75s 0s linear infinite;\n}\n@keyframes rotate {\n  0% {\n    -webkit-transform: rotate(0);\n    transform: rotate(0);\n  }\n  50% {\n    -webkit-transform: rotate(180deg);\n    transform: rotate(180deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n.marquee {\n  white-space: nowrap;\n  overflow: hidden;\n  width: 80px;\n  position: relative;\n}\n.marquee p {\n  overflow: hidden;\n  float: left;\n  animation: move linear 6s infinite;\n}\n.marquee span {\n  display: inline-block;\n  padding-left: 10px;\n}\n.marquee::before,\n.marquee::after {\n  position: absolute;\n  top: 0;\n  z-index: 1;\n  content: ' ';\n  width: 10px;\n  height: 100%;\n  animation: bgfadeIn linear 2s;\n}\n.marquee::before {\n  left: -2px;\n  background: linear-gradient(90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n.marquee::after {\n  right: -2px;\n  background: linear-gradient(-90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n@keyframes move {\n  0% {\n    transform: translateX(0);\n  }\n  100% {\n    transform: translateX(-50%);\n  }\n}\n.q-notice {\n  position: absolute;\n  width: 100%;\n  left: 0;\n  top: 0;\n  text-align: center;\n}\n.q-notice.is-auto {\n  pointer-events: none;\n  z-index: 10;\n}\n.q-notice.is-cover {\n  height: 100%;\n  background: rgba(255, 255, 255, 0.7);\n}\n.q-notice .item {\n  margin: 4px auto;\n}\n.q-notice .info {\n  pointer-events: initial;\n  min-width: 170px;\n  padding: 0 15px;\n  line-height: 29px;\n  height: 28px;\n  overflow: hidden;\n  white-space: nowrap;\n  display: inline-block;\n  color: rgba(255, 255, 255, 0.8);\n  background-color: #25283a;\n  box-shadow: 0px 2px 18px 2px rgba(172, 172, 172, 0.3);\n  border-radius: 2px;\n  position: relative;\n}\n.q-notice .info .icon-tip {\n  vertical-align: -3px;\n  margin-right: 2px;\n  width: 14px;\n}\n.q-notice .info [data-action] * {\n  pointer-events: none;\n}\n.q-notice .is-error .info {\n  color: #fff;\n  background-color: #f75559;\n}\n.q-notice .is-success .info {\n  color: #fff;\n  background-color: #00cb83;\n}\n.q-notice .is-close-able .info {\n  text-align: left;\n}\n.q-notice .is-close-able .btn-close {\n  width: 12px;\n  height: 12px;\n  color: #fff;\n  margin: 8px -5px 0 10px;\n  float: right;\n}\n.q-notice .is-close-able .btn-close:hover {\n  opacity: .8;\n}\n.q-notice .is-warning .info {\n  color: rgba(0, 1, 10, 0.93);\n  border: 0.5px solid #FFEBDA;\n  background-color: #FFF8F0;\n  box-shadow: 0px 16px 32px rgba(18, 19, 25, 0.16), 0px 0px 8px rgba(18, 19, 25, 0.08), 0px 0px 1px rgba(18, 19, 25, 0.08);\n}\n.ringing {\n  animation: ringing 2s ease;\n  animation-fill-mode: both;\n  animation-iteration-count: infinite;\n}\n@keyframes ringing {\n  10% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  15% {\n    -webkit-transform: rotate(-15deg);\n    transform: rotate(-15deg);\n  }\n  20% {\n    -webkit-transform: rotate(15deg);\n    transform: rotate(15deg);\n  }\n  25% {\n    -webkit-transform: rotate(-10deg);\n    transform: rotate(-10deg);\n    color: #2af2ac;\n  }\n  30% {\n    -webkit-transform: rotate(5deg);\n    transform: rotate(5deg);\n    color: #2af2ac;\n  }\n  35% {\n    -webkit-transform: rotate(-5deg);\n    transform: rotate(-5deg);\n  }\n  40% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n}\n.ctimer {\n  border-radius: 50%;\n  height: 40px;\n  overflow: hidden;\n  position: relative;\n  width: 40px;\n  background: rgba(255, 255, 255, 0.3);\n}\n.ctimer svg {\n  position: absolute;\n  left: 0;\n  z-index: 2;\n}\n.ctimer .hand {\n  position: absolute;\n  top: 0;\n  height: 100%;\n  overflow: hidden;\n  width: 50%;\n}\n.ctimer .hand span {\n  border: 20px solid rgba(255, 255, 255, 0.3);\n  border-bottom-color: transparent;\n  border-left-color: transparent;\n  border-radius: 50%;\n  display: block;\n  height: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  transform: rotate(225deg);\n  width: 0;\n}\n.ctimer .hand-left {\n  left: 0;\n  transform: rotate(180deg);\n}\n.ctimer .hand-right {\n  right: 0;\n}\n.ctimer .hand span {\n  animation-duration: var(--post-edit-time);\n  animation-iteration-count: 1;\n  animation-timing-function: linear;\n  animation-fill-mode: both;\n}\n.ctimer .hand-left span {\n  animation-name: spinleft;\n}\n.ctimer .hand-right span {\n  animation-name: spinright;\n}\n@keyframes spinleft {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(225deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\n@keyframes spinright {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(405deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\nbody {\n  overflow: hidden;\n  font-size: 12px;\n}\n.detect-container {\n  padding: 15px 20px 0;\n  min-height: 266px;\n  white-space: nowrap;\n  background-color: #fff;\n  user-select: none;\n  -webkit-user-select: none;\n}\n.detect-container input:hover {\n  background-color: #f4f7fb;\n}\n.detect-container h1 {\n  margin: 0 0 8px;\n  font-size: 14px;\n  font-weight: 400;\n}\n.detect-container li {\n  padding: 5px 0 5px 56px;\n  color: #888;\n  position: relative;\n  line-height: 30px;\n}\n.detect-container li label {\n  position: absolute;\n  left: 0;\n  top: 5px;\n}\n.detect-container li p {\n  line-height: 26px;\n}\n.detect-container li input {\n  width: 80px;\n  height: 30px;\n  text-align: center;\n  font-size: 12px;\n  transform: translateX(-3px);\n}\n.detect-container li select {\n  height: 30px;\n  width: 225px;\n}\n.detect-container li .bar {\n  display: inline-block;\n  vertical-align: -5px;\n  height: 20px;\n  width: 144px;\n  position: relative;\n  overflow: hidden;\n}\n.detect-container li .bar i {\n  float: left;\n  width: 4px;\n  height: 20px;\n  border-radius: 2px;\n  background-color: #eee;\n  margin-right: 4px;\n}\n.detect-container li .bar.active {\n  position: absolute;\n  top: 0;\n  left: -144px;\n  transform: translate3d(0, 0, 0);\n}\n.detect-container li .bar.active i {\n  background-color: #00d48a;\n}\n.detect-container .speaker {\n  border-top: 1px solid #eee;\n  padding-top: 10px;\n  margin-top: 3px;\n}\n.detect-container.is-calling .speaker {\n  border-top-color: #4a5264;\n}\n.detect-container.is-calling li {\n  color: #a1abc2;\n}\n.detect-container.is-calling li .bar i {\n  background-color: #585c67;\n}\n.detect-container.is-calling li .bar.active i {\n  background-color: #00cb83;\n}\n.detect-container.is-calling input:hover {\n  background-color: #101328;\n}\n",""])},function(e,t){e.exports='<%\n    var status = status || \'normal\';\n    var isNormalState = status === \'normal\' || status === \'over\';\n%>\n<div class="detect-container bg-main <%=isNormalState ? \'\' : \'is-calling\'%>">\n    <a href="javascript:void(0);" class="close icon"><svg viewBox="0 0 12 12"><use xlink:href="#close"></use></svg></a>\n    <h1 class="text-stress">音频输入输出设置</h1>\n    <ul class="microphone">\n        <li>\n            <label>麦克风</label>\n            <div id="microphones" class="select">\n                <p class="name"></p>\n                <div class="options hidden"></div>\n            </div>\n        </li>\n        <li>\n            <label>测试</label>\n            <span id="micBar" class="bar">\n                <i></i><i></i><i></i><i></i><i></i><i></i><i></i>\n                <i></i><i></i><i></i><i></i><i></i><i></i><i></i>\n                <i></i><i></i><i></i><i></i>\n                <span class="active bar">\n                    <i></i><i></i><i></i><i></i><i></i><i></i><i></i>\n                    <i></i><i></i><i></i><i></i><i></i><i></i><i></i>\n                    <i></i><i></i><i></i><i></i>\n                </span>\n            </span>\n            <input type="button" class="btn-mic" value="麦克风测试"></input>\n            <p>请点击麦克风测试，说话进行试听</p>\n        </li>\n    </ul>\n    <ul class="speaker">\n        <li>\n            <label>扬声器</label>\n            <div id="speakers" class="select">\n                <p class="name"></p>\n                <div class="options hidden"></div>\n            </div>\n        </li>\n        <li>\n            <label>测试</label>\n            <span id="spkBar" class="bar">\n                <i></i><i></i><i></i><i></i><i></i><i></i><i></i>\n                <i></i><i></i><i></i><i></i><i></i><i></i><i></i>\n                <i></i><i></i><i></i><i></i>\n                <span class="active bar">\n                    <i></i><i></i><i></i><i></i><i></i><i></i><i></i>\n                    <i></i><i></i><i></i><i></i><i></i><i></i><i></i>\n                    <i></i><i></i><i></i><i></i>\n                </span>\n            </span>\n            <input type="button" class="btn-spk" value="扬声器测试"></input>\n            <p>请点击扬声器测试，试听声音</p>\n        </li>\n    </ul>\n</div>\n'},function(e,t){e.exports="'use strict';\n\nvar qd = window.qd;\nvar SoundMeter = window.SoundMeter;\nvar Player = window.Player;\nvar getMicroMedia = window.getMicroMedia;\nvar stopMedia = window.stopMedia;\nvar getMicrophones = window.getMicrophones;\nvar getSpeakers = window.getSpeakers;\nvar notice = window.notice;\nvar testMusic = 'https://qidian-rhino-1251316161.cos.ap-guangzhou.myqcloud.com/jssdk/count.mp3';\nvar canExchange = qd.env.inClient || qd._getOptions().mode === 'webrtc';\n\nvar playerMic = new Player();\nvar playerSpk = new Player({\n    autoplay: true,\n    src: testMusic\n});\nvar micStream = null;\nvar devicesInputDefault = qd.getState('devicesInputDefault') || 'default';\nvar devicesOutputDefault = qd.getState('devicesOutputDefault') || 'default';\nvar devicesInput = qd.getState('devicesInput');\nvar devicesOutput = qd.getState('devicesOutput');\nvar renderDevices = function renderDevices(el, list, selected) {\n    var options = '';\n    var name = '';\n    if (list.length) {\n        list.forEach(function (item) {\n            options += '<p data-value=\\'' + item.deviceId + '\\' \\n                    class=\"' + (selected === item.deviceId ? 'selected' : '') + '\"\\n                >' + item.label + '</p>';\n            selected === item.deviceId && (name = item.label);\n        });\n    } else {\n        name = '未找到相关设备';\n        options = '<p>' + name + '</p>';\n        el.classList.add('disabled');\n    }\n    el.querySelector('.options').innerHTML = options;\n    el.querySelector('.name').innerHTML = name;\n};\nvar select = document.querySelector('#microphones');\nvar selectSpk = document.querySelector('#speakers');\nqd.one('selectChange.microphones', function (e, id) {\n    stopMicTesting(true).then(function () {\n        startMicTesting(id);\n    });\n    qd.setState('devicesInputDefault', id, true);\n    canExchange && notice.success('切换麦克风设备成功');\n});\nqd.one('selectChange.speakers', function (e, id) {\n    stopSpkTesting(true).then(function () {\n        playerSpk.setSinkId && playerSpk.setSinkId(id);\n        startSpkTesting();\n    });\n    qd.setState('devicesOutputDefault', id, true);\n    canExchange && notice.success('切换外放设备成功');\n});\n$('.select .name').bind('click', function (e) {\n    var parent = $(this).findParent('div');\n    var $currOption = $(parent).find('.options');\n    $('.select .options').each(function (el) {\n        $currOption.elems[0] !== el && el.classList.add('hidden');\n    });\n    $currOption.toggleClass('hidden');\n    e.stopPropagation();\n});\n$('.select .options').bind('click', function (e) {\n    var parent = this.parentNode;\n    var $name = parent.querySelector('.name');\n    var name = parent.id;\n    if (e.target.nodeName === 'P') {\n        if (e.target.classList.contains('selected')) {\n            return;\n        }\n        $(parent).find('.options p').removeClass('selected');\n        $(e.target).addClass('selected');\n        $name.textContent = e.target.textContent;\n        qd.trigger('selectChange.' + name, e.target.dataset.value);\n    }\n});\n$('.select').bind('mousedown', function (e) {\n    e.stopPropagation();\n});\n$(document).bind('click', function () {\n    $('.select .options').addClass('hidden');\n});\nif (devicesInput) {\n    renderDevices(select, devicesInput, devicesInputDefault);\n} else {\n    getMicrophones().then(function (mics) {\n        renderDevices(select, mics, devicesInputDefault);\n    });\n}\nif (devicesOutput) {\n    renderDevices(selectSpk, devicesOutput, devicesOutputDefault);\n} else {\n    getSpeakers().then(function (spks) {\n        renderDevices(selectSpk, spks, devicesOutputDefault);\n    });\n}\n\nvar soundMeterMic = new SoundMeter('mic');\nvar soundMeterSpk = new SoundMeter('spk');\nvar sourceSpk = soundMeterSpk.getMediaElementSource(playerSpk.el);\nvar $micBar = $('#micBar .active');\nvar $spkBar = $('#spkBar .active');\nvar micTesting = 0;\nqd.one('detectError.detectFrame', function (e, err) {\n    notice.error(err.message);\n});\nvar startMicTesting = function startMicTesting(deviceId) {\n    getMicroMedia.call(qd, deviceId).then(function (stream) {\n        playerMic.play(stream).then(function () {\n            maxVolumn = 0;\n            micStream = stream;\n            micTesting = Date.now();\n            $('.btn-mic').elems[0].value = '停止测试';\n            soundMeterMic.connectToSource(stream);\n        });\n    });\n};\nvar stopMicTesting = function stopMicTesting(silent) {\n    playerMic.pause();\n    soundMeterMic.stop();\n    return stopMedia(micStream).then(function () {\n        var duration = Date.now() - micTesting;\n        micStream = null;\n        $('.btn-mic').elems[0].value = '麦克风测试';\n        $micBar.css('transform', 'translate3d(0, 0, 0)');\n        if (!silent && micTesting) {\n            if (maxVolumn > 0) {\n                notice.success('麦克风设备检测通过');\n            } else if (duration < 3000) {\n                notice.info('设备检测请保持3秒以上');\n            } else {\n                notice.error('耳麦设备连接出错');\n            }\n        }\n        micTesting = 0;\n    });\n};\nvar spkTesting = 0;\nvar startSpkTesting = function startSpkTesting() {\n    playerSpk.play().then(function () {\n        maxVolumnSpk = 0;\n        spkTesting = Date.now();\n        $('.btn-spk').elems[0].value = '停止测试';\n        soundMeterSpk.connectToSource(sourceSpk);\n    });\n};\nvar stopSpkTesting = function stopSpkTesting(silent) {\n    playerSpk.pause();\n    return soundMeterSpk.stop().then(function () {\n        var duration = Date.now() - spkTesting;\n        $('.btn-spk').elems[0].value = '扬声器测试';\n        $spkBar.css('transform', 'translate3d(0, 0, 0)');\n        if (!silent && spkTesting) {\n            if (maxVolumnSpk > 0) {\n                notice.success('扬声器设备检测通过');\n            } else if (duration < 3000) {\n                notice.info('设备检测请保持3秒以上');\n            } else {\n                notice.error('扬声器设备连接出错');\n            }\n        }\n        spkTesting = 0;\n    });\n};\n\nvar maxVolumn = 0;\nsoundMeterMic.one('decibelChange', function (e, volume) {\n    requestAnimationFrame(function () {\n        var num = Math.ceil(18 * volume);\n        maxVolumn = Math.max(maxVolumn, num);\n        $micBar.css('transform', 'translate3d(' + num * 8 + 'px, 0, 0)');\n    });\n});\n\nvar maxVolumnSpk = 0;\nsoundMeterSpk.one('decibelChange', function (e, volume) {\n    requestAnimationFrame(function () {\n        var num = Math.ceil(18 * volume);\n        maxVolumnSpk = Math.max(maxVolumnSpk, num);\n        $spkBar.css('transform', 'translate3d(' + num * 8 + 'px, 0, 0)');\n    });\n});\n\n$('.btn-mic').bind('click', function (e) {\n    if (micStream) {\n        stopMicTesting();\n        return;\n    }\n\n    startMicTesting();\n});\n\n$('.btn-spk').bind('click', function (e) {\n    if (spkTesting) {\n        stopSpkTesting();\n        return;\n    }\n\n    startSpkTesting();\n});\n\nplayerSpk.el.onended = stopSpkTesting;\n\nfunction onHide() {\n    qd.trigger('_detectFrameHide');\n}\n\n$('.close').bind('click', function () {\n    qd.trigger('_detectFrameHide');\n    qd.hidePage('detectFrame');\n    stopMicTesting();\n    stopSpkTesting();\n});\n\nqd.one('debug.detectFrame', function () {\n    console.log('detect page');\n});\n\nqd._debug() && console.log('log from detectFrame');"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(18),o=r(i),a=n(24),s=r(a),l=n(634),c=r(l),u=n(635),d=r(u),f=n(636),p=r(f),h=n(637),g=r(h),m=n(26),v=r(m),b=n(101),_=n(27),y=void 0;(0,b.setBeforeCreateHooks)("callOnTimeFrame",function(e){var t=this.stator.getState("callid");if(this.isPageExist("callOnTimeFrame")&&y!==t)return this.stator.showTip("请先关闭上一通电话的预约回呼"),!1;y=t});var w=function(e,t){return new o.default(s.default.call(this.stator,{name:"callOnTimeFrame",moveable:!0,style:{width:280,height:357},data:e,script:g.default,cssText:c.default.toString(),html:(0,v.default)(_)+d.default,props:{contentTpl:p.default}}),t)};t.default=w},function(e,t,n){t=e.exports=n(19)(!1),t.i(n(25),""),t.push([e.i,"h2 {\n  margin: 0;\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 1.5;\n  padding: 10px 15px 5px;\n  color: #262d3d;\n}\n.icon {\n  display: inline-block;\n  width: 16px;\n  overflow: hidden;\n  color: #a1abc2;\n}\n.icon svg {\n  width: 100%;\n}\n.icon.green:hover {\n  color: #01c480;\n}\na:hover .icon,\n.icon:hover {\n  color: #8490ae;\n}\n.drop {\n  overflow: hidden;\n  position: relative;\n  padding-right: 12px;\n}\n.drop .arrow {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 8px;\n  margin-left: 3px;\n}\n.icon.is-on,\n.text-stress {\n  color: #262d3d;\n}\n.text-hint {\n  color: #d4d8e1;\n}\n.green {\n  color: #00d48a;\n  border-color: #00d48a;\n}\n.red {\n  color: #f75559;\n}\n.blue {\n  color: #4a70ff;\n}\n.orange {\n  color: #ff8345;\n}\n.is-calling {\n  color: #a1abc2;\n}\n.is-calling h2 {\n  color: #f8f9fB;\n}\n.is-calling::-webkit-scrollbar-thumb,\n.is-calling ::-webkit-scrollbar-thumb {\n  background-color: #696c7c;\n}\n.is-calling::-webkit-scrollbar-thumb:hover,\n.is-calling ::-webkit-scrollbar-thumb:hover {\n  background-color: #50535f;\n}\n.is-calling .is-loading {\n  border: 2px solid #fff;\n  border-bottom-color: transparent;\n}\n.is-calling .text {\n  color: #a1abc2;\n}\n.is-calling .icon.is-on,\n.is-calling .text-stress {\n  color: #f8f9fB;\n}\n.is-calling .green {\n  color: #00cb83;\n  border-color: #00cb83;\n}\n.is-calling .red {\n  color: #e1464a;\n}\n.is-calling .blue {\n  color: #6283ff;\n}\n.is-calling.bg-main,\n.is-calling .bg-main {\n  background-position: 100% 50%;\n}\n.is-calling .bg-gap {\n  background-position: 100% 50%;\n}\n.is-calling .ck {\n  color: #f8f9fB;\n}\n.is-calling textarea,\n.is-calling input,\n.is-calling select,\n.is-calling .select,\n.is-calling .select .options {\n  border-color: #4a5264;\n  color: #f8f9fB;\n  background-color: #25283a;\n}\n.is-calling textarea:focus,\n.is-calling input:focus,\n.is-calling select:focus,\n.is-calling .select:focus,\n.is-calling .select .options:focus {\n  border-color: #8d96aa;\n}\n.is-calling textarea::placeholder,\n.is-calling input::placeholder,\n.is-calling select::placeholder,\n.is-calling .select::placeholder,\n.is-calling .select .options::placeholder {\n  color: #a1abc2;\n}\n.is-calling .select .options p:hover,\n.is-calling .select .options .selected {\n  background-color: #383a4a;\n}\n.is-calling .close {\n  color: #78849e;\n}\n.is-calling .close:hover {\n  color: #fff;\n}\n.is-calling input[type=checkbox] {\n  cursor: pointer;\n  position: relative;\n}\n.is-calling input[type=checkbox]::after {\n  position: absolute;\n  top: 0;\n  background-color: #1e2030;\n  color: #fff;\n  width: 14px;\n  height: 14px;\n  display: inline-block;\n  visibility: visible;\n  padding-left: 0px;\n  text-align: center;\n  content: ' ';\n  border-radius: 2px;\n  box-sizing: border-box;\n  border: 1px solid #4A5264;\n}\n.is-calling input[type=checkbox]:checked::after {\n  content: \"\";\n  border-color: #4A70FF;\n  background-color: #4A70FF;\n}\n.is-calling input[type=checkbox]:checked::before {\n  content: '';\n  position: absolute;\n  top: 1px;\n  left: 5px;\n  width: 3px;\n  height: 8px;\n  border: solid white;\n  border-width: 0 2px 2px 0;\n  transform: rotate(45deg);\n  z-index: 1;\n}\n.close {\n  position: absolute;\n  right: 0px;\n  top: 0px;\n  padding: 8px;\n  color: #a8abb3;\n}\n.close:hover {\n  color: #1e2300;\n}\n.close svg {\n  width: 14px;\n  height: 14px;\n}\n.bg-main {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #fff, #fff, #25283a, #25283a) left / cover;\n}\n.bg-gap {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #f4f7fb, #f4f7fb, #101328, #101328) left / cover;\n}\n.bgEaseIn {\n  background-position: 100% 50%;\n}\n.bgEaseOut {\n  background-position: 0% 50%;\n}\n.bg-main,\n.bg-gap {\n  background-size: 800% 800%;\n  animation-fill-mode: both;\n}\n@keyframes bgEaseIn {\n  0% {\n    background-position: 0% 50%;\n  }\n  100% {\n    background-position: 100% 50%;\n  }\n}\n@keyframes bgEaseOut {\n  0% {\n    background-position: 100% 50%;\n  }\n  100% {\n    background-position: 0% 50%;\n  }\n}\nbody {\n  margin: 0;\n  overflow: hidden;\n  font-size: 12px;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  color: #a1abc2;\n}\np {\n  margin: 0;\n}\ntextarea::placeholder,\ninput::placeholder {\n  color: #A1ABC2;\n}\n::-webkit-scrollbar {\n  width: 4px;\n  height: 8px;\n}\n::-webkit-scrollbar-thumb {\n  background-color: #f3f5fa;\n  border-radius: 8px;\n}\n::-webkit-scrollbar-thumb:hover {\n  background-color: #aaa;\n}\n::-webkit-scrollbar-track-piece {\n  background-color: transparent;\n}\nsvg {\n  fill: currentColor;\n}\na {\n  text-decoration: none;\n}\nul,\nli {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n.ck {\n  width: 9px;\n  height: 9px;\n  color: #262d3d;\n  position: absolute;\n  top: 50%;\n  right: 10px;\n  transform: translateY(-50%);\n  display: none;\n}\n.is-selected .ck {\n  display: inline-block;\n}\ninput,\ntextarea,\nselect,\n.select,\n.select .options {\n  font-size: 12px;\n  color: #262d3d;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  border-radius: 3px;\n  border: 1px solid #e1e6f0;\n  background-color: #fff;\n}\ninput:focus,\ntextarea:focus,\nselect:focus,\n.select:focus,\n.select .options:focus {\n  outline: 0;\n  border-color: #c5ccdb;\n}\nselect,\n.select,\n.select .options p {\n  padding: 0 5px;\n}\n.select {\n  min-height: 26px;\n  position: relative;\n  cursor: default;\n}\n.select .options {\n  position: absolute;\n  z-index: 1;\n  left: -1px;\n  top: 29px;\n  width: 100%;\n  max-height: 73px;\n  overflow: auto;\n}\n.select .options p:hover,\n.select .options p.selected {\n  background: #f1f5fb;\n}\n.select p {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.cls:after {\n  content: \"\";\n  font-size: 0;\n  display: block;\n  height: 0;\n  clear: both;\n  visibility: hidden;\n}\n.disabled {\n  pointer-events: none;\n  opacity: .3;\n}\n.hidden {\n  display: none!important;\n}\n.overlay {\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  background: rgba(255, 255, 255, 0.6);\n}\ninput::-webkit-outer-spin-button,\ninput::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n}\ninput[type=\"number\"] {\n  -moz-appearance: textfield;\n}\n.is-loading {\n  border-radius: 100%;\n  margin: 2px;\n  border: 2px solid #ccc;\n  border-bottom-color: transparent;\n  height: 12px;\n  width: 12px;\n  margin-top: -7px;\n  background: 0 0!important;\n  display: inline-block;\n  -webkit-animation: rotate .75s 0s linear infinite;\n  animation: rotate .75s 0s linear infinite;\n}\n@keyframes rotate {\n  0% {\n    -webkit-transform: rotate(0);\n    transform: rotate(0);\n  }\n  50% {\n    -webkit-transform: rotate(180deg);\n    transform: rotate(180deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n.marquee {\n  white-space: nowrap;\n  overflow: hidden;\n  width: 80px;\n  position: relative;\n}\n.marquee p {\n  overflow: hidden;\n  float: left;\n  animation: move linear 6s infinite;\n}\n.marquee span {\n  display: inline-block;\n  padding-left: 10px;\n}\n.marquee::before,\n.marquee::after {\n  position: absolute;\n  top: 0;\n  z-index: 1;\n  content: ' ';\n  width: 10px;\n  height: 100%;\n  animation: bgfadeIn linear 2s;\n}\n.marquee::before {\n  left: -2px;\n  background: linear-gradient(90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n.marquee::after {\n  right: -2px;\n  background: linear-gradient(-90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n@keyframes move {\n  0% {\n    transform: translateX(0);\n  }\n  100% {\n    transform: translateX(-50%);\n  }\n}\n.q-notice {\n  position: absolute;\n  width: 100%;\n  left: 0;\n  top: 0;\n  text-align: center;\n}\n.q-notice.is-auto {\n  pointer-events: none;\n  z-index: 10;\n}\n.q-notice.is-cover {\n  height: 100%;\n  background: rgba(255, 255, 255, 0.7);\n}\n.q-notice .item {\n  margin: 4px auto;\n}\n.q-notice .info {\n  pointer-events: initial;\n  min-width: 170px;\n  padding: 0 15px;\n  line-height: 29px;\n  height: 28px;\n  overflow: hidden;\n  white-space: nowrap;\n  display: inline-block;\n  color: rgba(255, 255, 255, 0.8);\n  background-color: #25283a;\n  box-shadow: 0px 2px 18px 2px rgba(172, 172, 172, 0.3);\n  border-radius: 2px;\n  position: relative;\n}\n.q-notice .info .icon-tip {\n  vertical-align: -3px;\n  margin-right: 2px;\n  width: 14px;\n}\n.q-notice .info [data-action] * {\n  pointer-events: none;\n}\n.q-notice .is-error .info {\n  color: #fff;\n  background-color: #f75559;\n}\n.q-notice .is-success .info {\n  color: #fff;\n  background-color: #00cb83;\n}\n.q-notice .is-close-able .info {\n  text-align: left;\n}\n.q-notice .is-close-able .btn-close {\n  width: 12px;\n  height: 12px;\n  color: #fff;\n  margin: 8px -5px 0 10px;\n  float: right;\n}\n.q-notice .is-close-able .btn-close:hover {\n  opacity: .8;\n}\n.q-notice .is-warning .info {\n  color: rgba(0, 1, 10, 0.93);\n  border: 0.5px solid #FFEBDA;\n  background-color: #FFF8F0;\n  box-shadow: 0px 16px 32px rgba(18, 19, 25, 0.16), 0px 0px 8px rgba(18, 19, 25, 0.08), 0px 0px 1px rgba(18, 19, 25, 0.08);\n}\n.ringing {\n  animation: ringing 2s ease;\n  animation-fill-mode: both;\n  animation-iteration-count: infinite;\n}\n@keyframes ringing {\n  10% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  15% {\n    -webkit-transform: rotate(-15deg);\n    transform: rotate(-15deg);\n  }\n  20% {\n    -webkit-transform: rotate(15deg);\n    transform: rotate(15deg);\n  }\n  25% {\n    -webkit-transform: rotate(-10deg);\n    transform: rotate(-10deg);\n    color: #2af2ac;\n  }\n  30% {\n    -webkit-transform: rotate(5deg);\n    transform: rotate(5deg);\n    color: #2af2ac;\n  }\n  35% {\n    -webkit-transform: rotate(-5deg);\n    transform: rotate(-5deg);\n  }\n  40% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n}\n.ctimer {\n  border-radius: 50%;\n  height: 40px;\n  overflow: hidden;\n  position: relative;\n  width: 40px;\n  background: rgba(255, 255, 255, 0.3);\n}\n.ctimer svg {\n  position: absolute;\n  left: 0;\n  z-index: 2;\n}\n.ctimer .hand {\n  position: absolute;\n  top: 0;\n  height: 100%;\n  overflow: hidden;\n  width: 50%;\n}\n.ctimer .hand span {\n  border: 20px solid rgba(255, 255, 255, 0.3);\n  border-bottom-color: transparent;\n  border-left-color: transparent;\n  border-radius: 50%;\n  display: block;\n  height: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  transform: rotate(225deg);\n  width: 0;\n}\n.ctimer .hand-left {\n  left: 0;\n  transform: rotate(180deg);\n}\n.ctimer .hand-right {\n  right: 0;\n}\n.ctimer .hand span {\n  animation-duration: var(--post-edit-time);\n  animation-iteration-count: 1;\n  animation-timing-function: linear;\n  animation-fill-mode: both;\n}\n.ctimer .hand-left span {\n  animation-name: spinleft;\n}\n.ctimer .hand-right span {\n  animation-name: spinright;\n}\n@keyframes spinleft {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(225deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\n@keyframes spinright {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(405deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\n.call-on-time {\n  padding: 0 15px 15px;\n  overflow: hidden;\n  user-select: none;\n  -webkit-user-select: none;\n}\n.call-on-time input,\n.call-on-time h2,\n.call-on-time h3 {\n  margin: 0;\n}\n.call-on-time h2,\n.call-on-time h3 {\n  display: block;\n  font-size: 14px;\n  font-weight: normal;\n  color: #262d3d;\n  padding: 15px 0 8px;\n}\n.call-on-time h2 .icon,\n.call-on-time h3 .icon {\n  vertical-align: -3px;\n  cursor: pointer;\n}\n.call-on-time h2 .icon.delete-trigger,\n.call-on-time h3 .icon.delete-trigger {\n  border-radius: 100%;\n  background-color: #eceff1;\n  color: #a1abc2;\n}\n.call-on-time h2 .icon.delete-trigger:hover,\n.call-on-time h3 .icon.delete-trigger:hover {\n  color: #666;\n}\n.call-on-time h3 {\n  font-size: 12px;\n}\n.call-on-time .writeRemark-container {\n  position: relative;\n}\n.call-on-time .writeRemark-container.view textarea {\n  min-height: 152px;\n}\n.call-on-time .tab {\n  padding: 7px 0;\n}\n.call-on-time .tab input {\n  margin: 0 3px 0 0;\n  vertical-align: -2px;\n}\n.call-on-time .tab-content {\n  padding: 8px 0;\n}\n.call-on-time .tab-content input {\n  width: 130px;\n  font-size: 12px;\n  padding: 0 0 0 5px;\n  line-height: 23px;\n}\n.call-on-time .tab-content input::-webkit-outer-spin-button,\n.call-on-time .tab-content input::-webkit-inner-spin-button {\n  -webkit-appearance: none!important;\n  margin: 0;\n}\n.call-on-time .tab-content .timer,\n.call-on-time .tab-content .later {\n  height: 25px;\n}\n.call-on-time .tab-content .timer {\n  white-space: nowrap;\n  line-height: 25px;\n}\n.call-on-time .tab-content .timer select {\n  width: 38px;\n  margin-left: 5px;\n}\n.call-on-time textarea {\n  padding: 10px;\n  font-size: 12px;\n  line-height: 1.4;\n  width: 100%;\n  min-height: 158px;\n  resize: none;\n  overflow: hidden;\n}\n.call-on-time .limit {\n  position: absolute;\n  right: 8px;\n  bottom: 3px;\n  color: #c5ccdb;\n}\n.call-on-time .limit i {\n  font-style: normal;\n}\n.call-on-time .limit .warn {\n  color: #e1464a;\n}\n.call-on-time li {\n  min-height: 20px;\n  line-height: 21px;\n  padding-left: 70px;\n}\n.call-on-time li label {\n  float: left;\n  width: 70px;\n  margin-left: -70px;\n  color: #a1abc2;\n}\n.call-on-time.is-calling h2,\n.call-on-time.is-calling h3 {\n  color: #f8f9fB;\n}\n.call-on-time.is-calling .btn-save {\n  background-color: #6283ff;\n  border: 1px solid #6283ff;\n}\n.call-on-time.is-calling .btn-save:hover {\n  background-color: #4a70ff;\n  border-color: #4a70ff;\n}\n.call-on-time.is-calling .btn-cancel {\n  color: #fff;\n  border: 1px solid #4a5264;\n  background-color: #101328;\n}\n.call-on-time.is-calling .btn-cancel:hover {\n  background-color: #383a4a;\n}\n.call-on-time.is-calling .status {\n  color: #30384b;\n  background-color: #808798;\n}\n.call-on-time.is-calling .status::before {\n  background-color: #00cb83;\n}\n.call-on-time.is-calling .status.dated::before {\n  background-color: #e1464a;\n}\n.call-on-time.is-calling .status.dated-done::before {\n  background-color: #ff8345;\n}\n.call-on-time.is-calling .status.done::before {\n  background-color: #a1abc2;\n}\n.call-on-time.is-calling .icon.delete-trigger {\n  color: #fff;\n  background: #585c67;\n}\n.call-on-time.is-calling .icon.delete-trigger:hover {\n  color: #fff;\n  opacity: .8;\n}\n.call-on-time.is-calling .icon.green:hover {\n  opacity: .8;\n}\n.call-on-time.is-calling .datepick {\n  color: #fff;\n  background: #585c67;\n}\n.call-on-time.is-calling .datepick:hover {\n  color: #fff;\n  opacity: .8;\n}\n.call-on-time.is-calling .btn-delete {\n  color: #f8f9fB;\n  background-color: #25283a;\n  border-color: #4a5264;\n}\n.call-on-time.is-calling .btn-delete:hover {\n  background-color: #383a4a;\n}\n.call-on-time.is-calling .limit {\n  color: #4a5264;\n}\n.call-on-time .datepick {\n  display: inline-block;\n  width: 16px;\n  height: 16px;\n  overflow: hidden;\n  border-radius: 100%;\n  text-align: center;\n  background: #eceff1;\n  vertical-align: -4px;\n  margin-left: 2px;\n  cursor: pointer;\n}\n.call-on-time .datepick svg {\n  width: 14px;\n  height: 13px;\n  margin-top: 1px;\n}\n.call-on-time .datepick:hover {\n  color: #666;\n}\n.btn-action {\n  text-align: right;\n}\n.btn-action .view-all {\n  float: left;\n  margin-top: 12px;\n}\n.btn-action .view-all:hover {\n  text-decoration: underline;\n}\n.btn-save,\n.btn-cancel {\n  display: inline-block;\n  width: 54px;\n  line-height: 19px;\n  height: 20px;\n  text-align: center;\n  margin: 10px auto 0;\n  border-radius: 2px;\n}\n.btn-save {\n  color: #fff;\n  background-color: #4a70ff;\n  border: 1px solid #4a70ff;\n}\n.btn-save:hover {\n  background-color: #6283ff;\n}\n.btn-cancel {\n  color: #a1abc2;\n  border: 1px solid #e1e6f0;\n  background-color: #fff;\n  margin-left: 8px;\n}\n.btn-cancel:hover {\n  background-color: #f4f7fb;\n}\n.btn-save {\n  position: relative;\n}\n.btn-save.saving {\n  text-indent: -20000px;\n}\n.btn-save.saving::after {\n  content: ' ';\n  border-radius: 100%;\n  margin: 2px;\n  border: 2px solid #fff;\n  border-bottom-color: transparent;\n  height: 8px;\n  width: 8px;\n  margin: -5px 0 0 -4px;\n  background: 0 0!important;\n  display: inline-block;\n  -webkit-animation: rotate .75s 0s linear infinite;\n  animation: rotate .75s 0s linear infinite;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n}\n.btn-save.disabled {\n  pointer-events: none;\n  opacity: .4;\n}\n.status {\n  display: inline-block;\n  padding: 0 5px 0 16px;\n  position: relative;\n  border-radius: 3px;\n  font-weight: normal;\n  background-color: #edf0f7;\n  transform: scale(0.8);\n  line-height: 17px;\n  margin-left: -5px;\n}\n.status::before {\n  content: ' ';\n  position: absolute;\n  left: 5px;\n  top: 50%;\n  margin-top: -4px;\n  width: 6px;\n  height: 6px;\n  overflow: hidden;\n  border-radius: 4px;\n  background-color: #00d48a;\n}\n.status.dated::before {\n  background-color: #f75559;\n}\n.status.dated-done::before {\n  background-color: #ff8345;\n}\n.status.done::before {\n  background-color: #a1abc2;\n}\n.btn-delete {\n  position: absolute;\n  left: 130px;\n  top: 30px;\n  line-height: 28px;\n  padding: 0 10px;\n  color: #262d3d;\n  background-color: #fff;\n  border: 1px solid #E1E6F0;\n  box-shadow: 0px 0px 4px rgba(30, 36, 49, 0.04), 0px 8px 16px rgba(30, 36, 49, 0.08);\n  border-radius: 3px;\n  cursor: pointer;\n}\n.btn-delete:hover {\n  background-color: #f4f7fb;\n}\n",""])},function(e,t){e.exports='<%\n    var status = status || \'normal\';\n    var isNormalState = status === \'normal\' || status === \'over\';\n%>\n<div class="call-on-time bg-main <%=isNormalState ? \'\' : \'is-calling\'%>">\n    <div id="content"></div>\n    <a href="javascript:void(0);" class="close icon"><svg viewBox="0 0 12 12"><use xlink:href="#close"></use></svg></a>\n</div>\n'},function(e,t){e.exports='<%\nvar state = [\'待完成\', \'已完成\', \'过期已完成\', \'过期未完成\'];\nvar clz = [\'\', \'done\', \'dated-done\', \'dated\'];\n%>\n\n<%if (fromList) {%>\n    <h2>\n        预约回呼计划\n        <span title="立即回呼" class="btn-call green icon">\n            <svg viewBox="0 0 12 12"><use xlink:href="#call-answer"></use></svg>\n        </span>\n        <span class="delete-trigger icon">\n            <svg viewBox="0 0 12 12"><use xlink:href="#delete"></use></svg>\n        </span>\n    </h2>\n    <span class="hidden btn-delete" data-id="<%=id%>">删除计划</span>\n\n    <ul class="text-stress">\n        <li>\n            <label>客户姓名</label>\n            <%=customerName%>\n        </li>\n        <li>\n            <label>电话号码</label>\n            <%=formatTel(customerPhone)%>\n        </li>\n        <li>\n            <label>回呼时间</label>\n            <span class="datetime"><%=timeType === 1 ? `${time}分钟后` : format(\'Y-m-d H:i\', time)%></span>\n            <span class="icon datepick"><svg viewBox="0 0 16 16"><use xlink:href="#basic_calendar_line"></use></svg></span>\n        </li>\n        <li>\n            <label>回呼状态</label>\n            <span class="status <%=clz[status]%>"><%=state[status]%></span>\n        </li>\n    </ul>\n\n<%} else {%>\n    <h2>预约回呼</h2>\n    <div class="tab">\n        <label><input type="radio" name="type" value="1" <%=!timeType || timeType == 1 ? \'checked="true"\' : \'\'%> /> 稍后回呼</label>\n        <label style="float: right"><input type="radio" name="type" value="2" <%=timeType == 2 ? \'checked="true"\' : \'\'%> /> 指定时间点回呼</label>\n    </div>\n    <div class="tab-content">\n        <div class="later" style="display: <%=!timeType || timeType == 1 ? \'block\' : \'none\'%>">\n            <input type="number" id="later" value="<%=!timeType || timeType == 1 ? time : \'\'%>" placeholder="请输入大于0的整数" /> 分钟后回呼\n        </div>\n        <div class="timer" style="display: <%=timeType == 2 ? \'block\' : \'none\'%>;">\n            <input type="text" id="date" readonly value="<%=`${year}-${month}-${day} ${hour}:${minute}`%>" />\n        </div>\n    </div>\n<%}%>\n\n<h3>预约备注</h3>\n<div class="writeRemark-container <%=fromList ? \'view\' : \'\'%>">\n    <textarea maxlength="200" autofocus placeholder="请填入备注内容(选填)" id="msg"><%=remarks%></textarea>\n    <span class="limit"><i>0</i>/200</span>\n</div>\n\n<div class="btn-action">\n    <a class="btn-save" href="javascript:;">保存</a>\n    <a class="btn-cancel" href="javascript:;">取消</a>\n</div>\n'},function(e,t){e.exports="'use strict';\n\nvar qd = window.qd;\nvar render = window.render;\nvar contentTpl = window.contentTpl;\n\nqd._debug() && console.log('log from callOnTime');\n\nvar $content = $('#content');\nvar callid = qd.getState('callid');\nvar $btnSave;\nvar $msg;\nvar $later;\nvar $timer;\nvar callbackType = 1;\nvar $limit;\nvar $textarea;\nvar currentData = {};\nvar dateSelected = {};\n\nfunction onShow(stats, id) {\n    var data = { timeType: 1 };\n    if (id) {\n        var scheduleData = qd.getState('scheduleData');\n        var list = scheduleData.records || [];\n        var data = {};\n        for (var i = 0; i < list.length; i++) {\n            if (list[i].id == id) {\n                data = list[i];\n                break;\n            }\n        }\n        data.fromList = true;\n        callid = data.callid;\n        currentData = data;\n    } else {\n        var state = qd.getState();\n        data.remarks = state.callbackRemark;\n        data.timeType = state.callbackType;\n        data.time = state.callbackTimer;\n    }\n\n    renderState(data);\n}\n\nfunction onHide() {\n    qd.trigger('_callOnTimeFrameHide');\n}\n\nfunction renderState(data) {\n    var html;\n    var scheduleData = qd.getState('scheduleData') || {};\n    var formattedTime = qd.format('Y-m-d-H-i', data.time && data.timeType !== 1 ? data.time : Date.now() + 600000).split('-');\n    data.year = formattedTime[0];\n    data.month = formattedTime[1];\n    data.day = formattedTime[2];\n    data.hour = formattedTime[3];\n    data.minute = formattedTime[4];\n    data.format = qd.format;\n    data.formatTel = qd.formatTel;\n    data.url = scheduleData.url;\n    callbackType = data.timeType || 1;\n\n    html = render(contentTpl)(data);\n    $content.html(html);\n    $limit = $('.limit i');\n    $textarea = $('textarea');\n    $btnSave = $('.btn-save');\n    $msg = $('#msg');\n    $later = $('.later');\n    $timer = $('.timer');\n    count();\n\n    $('.tab input').bind('click', function (e) {\n        callbackType = parseInt(e.currentTarget.value);\n        $later.css('display', callbackType === 1 ? 'block' : 'none');\n        $timer.css('display', callbackType === 1 ? 'none' : 'block');\n        callbackType === 1 ? $('#later').elems[0].focus() : $('#date').elems[0].focus();\n    });\n\n    $btnSave.bind('click', saveCallOnTime);\n\n    $msg.bind('keypress', function (e) {\n        if (e.ctrlKey && e.keyCode === 13) {\n            saveCallOnTime();\n        }\n    });\n    $('#msg, #later, .timer input, .btn-save, .btn-cancel, .close, .btn-delete, .delete-trigger, .btn-call').bind('mousedown', function (e) {\n        e.stopPropagation();\n    });\n    $textarea.bind('keyup', count);\n    $textarea.bind('change', count);\n\n    $('#date, .datepick').bind('click', function (e) {\n        e.stopPropagation();\n        qd.showPage({\n            trigger: e.target,\n            name: 'datePickerFrame',\n            params: dateSelected.YYYY ? dateSelected : data\n        });\n    });\n\n    $('.btn-cancel').bind('click', function (e) {\n        qd.hidePage('callOnTimeFrame');\n    });\n\n    qd.env.inClient && $('.view-all').bind('click', function (e) {\n        qd.trigger('_openUrl.client', this.href);\n        e.preventDefault();\n    });\n\n    $('.btn-call').bind('click', function () {\n        if (qd.isCallingState()) {\n            notice.error('请电话结束后再发起新通话');\n            return;\n        }\n        qd.handle({\n            action: 'call',\n            params: {\n                id: currentData.id\n            },\n            success: function success() {\n                qd.hidePage('callOnTimeFrame');\n            },\n            fail: function fail(err) {\n                notice.error(err.msg || '回呼失败');\n            }\n        });\n    });\n\n    $('.delete-trigger').bind('click', function (e) {\n        e.stopPropagation();\n        $('.btn-delete').toggleClass('hidden');\n    });\n\n    $('.btn-delete').bind('click', function () {\n        qd.handle({\n            action: 'deleteScheduleList',\n            params: {\n                id: [currentData.id]\n            },\n            success: function success() {\n                qd.trigger('_deleteSchedules', [currentData.id]);\n                qd.showTip('删除回呼计划成功', 'success');\n                qd.hidePage('callOnTimeFrame');\n            },\n            fail: function fail(err) {\n                notice.error(err.msg || '删除失败');\n            }\n        });\n    });\n}\n\nfunction count() {\n    var len;\n    len = $textarea.elems[0].value.length;\n    $limit.text(len);\n    $limit[len > 200 ? 'addClass' : 'removeClass']('warn');\n}\n\nfunction saveCallOnTime() {\n    var state = qd.getState();\n    var msg = $msg.elems[0].value;\n    var params;\n    var time;\n    var timer;\n\n    if (currentData.id) {\n        params = {\n            callid: callid,\n            id: currentData.id,\n            remarks: msg\n        };\n        if (dateSelected.YYYY) {\n            params.timeType = 2;\n            timer = +new Date(dateSelected.YYYY + '/' + dateSelected.MM + '/' + dateSelected.DD + ' ' + dateSelected.hh + ':' + dateSelected.mm);\n            params.time = Math.floor(timer / 1000);\n        }\n    } else {\n        var later = $('#later').elems[0].value;\n        timer = +new Date($('#date').elems[0].value);\n        time = callbackType === 1 ? later : Math.floor(timer / 1000);\n\n        if (!time) {\n            callbackType === 1 && $('#later').elems[0].focus();\n            notice.error('请填写预约回呼时间');\n            return;\n        }\n\n        params = {\n            callid: callid,\n            showNumber: +!state.isNumberHidden,\n            id: state.callbackOnTimeSaveId || 0,\n            executor: '' + (state.callKfext || state.kfext),\n            remarks: msg,\n            timeType: callbackType,\n            time: time };\n    }\n\n    $btnSave.addClass('saving');\n    qd.handle({\n        action: 'writeCallbackOnTime',\n        params: params,\n        success: function success(res) {\n            qd.showTip((state.callbackOnTimeSaveId ? '更新' : '保存') + '\\u9884\\u7EA6\\u56DE\\u547C\\u4FE1\\u606F\\u6210\\u529F', 'success');\n            qd.hidePage('callOnTimeFrame');\n\n            if (currentData.id) {\n                if (params.time) {\n                    currentData.status = 0;\n                }\n                qd.assign(currentData, params);\n                qd.trigger('_schedulesInfoChanged', currentData.id);\n            } else {\n                var callbackOnTimeSaveId = res.data && res.data.id;\n\n                qd.setState({\n                    callbackType: callbackType,\n                    callbackTimer: time,\n                    callbackOnTimeSaveId: callbackOnTimeSaveId,\n                    callbackRemark: callid === state.callid ? msg : ''\n                });\n                qd.trigger('_callbackOnTimeSaved');\n            }\n        },\n        fail: function fail(err) {\n            $btnSave.removeClass('saving');\n            notice.error(err.msg || '保存预约回呼信息失败');\n        }\n    });\n}\n\nqd.one('_dateChange.callOnTime', function (e, date) {\n    var dateStr = date.YYYY + '-' + date.MM + '-' + date.DD + ' ' + date.hh + ':' + date.mm;\n    dateSelected = date;\n    if (currentData.id) {\n        $('.datetime').text(dateStr);\n    } else {\n        $('#date').elems[0].value = dateStr;\n    }\n});\n\ndocument.addEventListener('click', function () {\n    qd.hidePage('datePickerFrame');\n    $('.btn-delete').addClass('hidden');\n});\n\n$('.close').bind('click', function (e) {\n    qd.hidePage('callOnTimeFrame');\n});\n\nqd.one('debug.callOnTimeFrame', function () {\n    console.log('callOnTime page');\n});"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(18),o=r(i),a=n(24),s=r(a),l=n(639),c=r(l),u=n(640),d=r(u),f=n(641),p=r(f),h=n(642),g=r(h),m=n(643),v=r(m),b=n(26),_=r(b),y=n(27),w=function(e,t){var n=s.default.call(this.stator,{name:"customerInfoFrame",data:e,style:{width:280},autoHeight:".customerInfo-container",script:v.default,cssText:c.default.toString(),html:(0,_.default)(y)+d.default,props:{apiTpl:p.default,trackTpl:g.default}});return new o.default(n,t)};t.default=w},function(e,t,n){t=e.exports=n(19)(!1),t.i(n(25),""),t.push([e.i,"h2 {\n  margin: 0;\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 1.5;\n  padding: 10px 15px 5px;\n  color: #262d3d;\n}\n.icon {\n  display: inline-block;\n  width: 16px;\n  overflow: hidden;\n  color: #a1abc2;\n}\n.icon svg {\n  width: 100%;\n}\n.icon.green:hover {\n  color: #01c480;\n}\na:hover .icon,\n.icon:hover {\n  color: #8490ae;\n}\n.drop {\n  overflow: hidden;\n  position: relative;\n  padding-right: 12px;\n}\n.drop .arrow {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 8px;\n  margin-left: 3px;\n}\n.icon.is-on,\n.text-stress {\n  color: #262d3d;\n}\n.text-hint {\n  color: #d4d8e1;\n}\n.green {\n  color: #00d48a;\n  border-color: #00d48a;\n}\n.red {\n  color: #f75559;\n}\n.blue {\n  color: #4a70ff;\n}\n.orange {\n  color: #ff8345;\n}\n.is-calling {\n  color: #a1abc2;\n}\n.is-calling h2 {\n  color: #f8f9fB;\n}\n.is-calling::-webkit-scrollbar-thumb,\n.is-calling ::-webkit-scrollbar-thumb {\n  background-color: #696c7c;\n}\n.is-calling::-webkit-scrollbar-thumb:hover,\n.is-calling ::-webkit-scrollbar-thumb:hover {\n  background-color: #50535f;\n}\n.is-calling .is-loading {\n  border: 2px solid #fff;\n  border-bottom-color: transparent;\n}\n.is-calling .text {\n  color: #a1abc2;\n}\n.is-calling .icon.is-on,\n.is-calling .text-stress {\n  color: #f8f9fB;\n}\n.is-calling .green {\n  color: #00cb83;\n  border-color: #00cb83;\n}\n.is-calling .red {\n  color: #e1464a;\n}\n.is-calling .blue {\n  color: #6283ff;\n}\n.is-calling.bg-main,\n.is-calling .bg-main {\n  background-position: 100% 50%;\n}\n.is-calling .bg-gap {\n  background-position: 100% 50%;\n}\n.is-calling .ck {\n  color: #f8f9fB;\n}\n.is-calling textarea,\n.is-calling input,\n.is-calling select,\n.is-calling .select,\n.is-calling .select .options {\n  border-color: #4a5264;\n  color: #f8f9fB;\n  background-color: #25283a;\n}\n.is-calling textarea:focus,\n.is-calling input:focus,\n.is-calling select:focus,\n.is-calling .select:focus,\n.is-calling .select .options:focus {\n  border-color: #8d96aa;\n}\n.is-calling textarea::placeholder,\n.is-calling input::placeholder,\n.is-calling select::placeholder,\n.is-calling .select::placeholder,\n.is-calling .select .options::placeholder {\n  color: #a1abc2;\n}\n.is-calling .select .options p:hover,\n.is-calling .select .options .selected {\n  background-color: #383a4a;\n}\n.is-calling .close {\n  color: #78849e;\n}\n.is-calling .close:hover {\n  color: #fff;\n}\n.is-calling input[type=checkbox] {\n  cursor: pointer;\n  position: relative;\n}\n.is-calling input[type=checkbox]::after {\n  position: absolute;\n  top: 0;\n  background-color: #1e2030;\n  color: #fff;\n  width: 14px;\n  height: 14px;\n  display: inline-block;\n  visibility: visible;\n  padding-left: 0px;\n  text-align: center;\n  content: ' ';\n  border-radius: 2px;\n  box-sizing: border-box;\n  border: 1px solid #4A5264;\n}\n.is-calling input[type=checkbox]:checked::after {\n  content: \"\";\n  border-color: #4A70FF;\n  background-color: #4A70FF;\n}\n.is-calling input[type=checkbox]:checked::before {\n  content: '';\n  position: absolute;\n  top: 1px;\n  left: 5px;\n  width: 3px;\n  height: 8px;\n  border: solid white;\n  border-width: 0 2px 2px 0;\n  transform: rotate(45deg);\n  z-index: 1;\n}\n.close {\n  position: absolute;\n  right: 0px;\n  top: 0px;\n  padding: 8px;\n  color: #a8abb3;\n}\n.close:hover {\n  color: #1e2300;\n}\n.close svg {\n  width: 14px;\n  height: 14px;\n}\n.bg-main {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #fff, #fff, #25283a, #25283a) left / cover;\n}\n.bg-gap {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #f4f7fb, #f4f7fb, #101328, #101328) left / cover;\n}\n.bgEaseIn {\n  background-position: 100% 50%;\n}\n.bgEaseOut {\n  background-position: 0% 50%;\n}\n.bg-main,\n.bg-gap {\n  background-size: 800% 800%;\n  animation-fill-mode: both;\n}\n@keyframes bgEaseIn {\n  0% {\n    background-position: 0% 50%;\n  }\n  100% {\n    background-position: 100% 50%;\n  }\n}\n@keyframes bgEaseOut {\n  0% {\n    background-position: 100% 50%;\n  }\n  100% {\n    background-position: 0% 50%;\n  }\n}\nbody {\n  margin: 0;\n  overflow: hidden;\n  font-size: 12px;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  color: #a1abc2;\n}\np {\n  margin: 0;\n}\ntextarea::placeholder,\ninput::placeholder {\n  color: #A1ABC2;\n}\n::-webkit-scrollbar {\n  width: 4px;\n  height: 8px;\n}\n::-webkit-scrollbar-thumb {\n  background-color: #f3f5fa;\n  border-radius: 8px;\n}\n::-webkit-scrollbar-thumb:hover {\n  background-color: #aaa;\n}\n::-webkit-scrollbar-track-piece {\n  background-color: transparent;\n}\nsvg {\n  fill: currentColor;\n}\na {\n  text-decoration: none;\n}\nul,\nli {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n.ck {\n  width: 9px;\n  height: 9px;\n  color: #262d3d;\n  position: absolute;\n  top: 50%;\n  right: 10px;\n  transform: translateY(-50%);\n  display: none;\n}\n.is-selected .ck {\n  display: inline-block;\n}\ninput,\ntextarea,\nselect,\n.select,\n.select .options {\n  font-size: 12px;\n  color: #262d3d;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  border-radius: 3px;\n  border: 1px solid #e1e6f0;\n  background-color: #fff;\n}\ninput:focus,\ntextarea:focus,\nselect:focus,\n.select:focus,\n.select .options:focus {\n  outline: 0;\n  border-color: #c5ccdb;\n}\nselect,\n.select,\n.select .options p {\n  padding: 0 5px;\n}\n.select {\n  min-height: 26px;\n  position: relative;\n  cursor: default;\n}\n.select .options {\n  position: absolute;\n  z-index: 1;\n  left: -1px;\n  top: 29px;\n  width: 100%;\n  max-height: 73px;\n  overflow: auto;\n}\n.select .options p:hover,\n.select .options p.selected {\n  background: #f1f5fb;\n}\n.select p {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.cls:after {\n  content: \"\";\n  font-size: 0;\n  display: block;\n  height: 0;\n  clear: both;\n  visibility: hidden;\n}\n.disabled {\n  pointer-events: none;\n  opacity: .3;\n}\n.hidden {\n  display: none!important;\n}\n.overlay {\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  background: rgba(255, 255, 255, 0.6);\n}\ninput::-webkit-outer-spin-button,\ninput::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n}\ninput[type=\"number\"] {\n  -moz-appearance: textfield;\n}\n.is-loading {\n  border-radius: 100%;\n  margin: 2px;\n  border: 2px solid #ccc;\n  border-bottom-color: transparent;\n  height: 12px;\n  width: 12px;\n  margin-top: -7px;\n  background: 0 0!important;\n  display: inline-block;\n  -webkit-animation: rotate .75s 0s linear infinite;\n  animation: rotate .75s 0s linear infinite;\n}\n@keyframes rotate {\n  0% {\n    -webkit-transform: rotate(0);\n    transform: rotate(0);\n  }\n  50% {\n    -webkit-transform: rotate(180deg);\n    transform: rotate(180deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n.marquee {\n  white-space: nowrap;\n  overflow: hidden;\n  width: 80px;\n  position: relative;\n}\n.marquee p {\n  overflow: hidden;\n  float: left;\n  animation: move linear 6s infinite;\n}\n.marquee span {\n  display: inline-block;\n  padding-left: 10px;\n}\n.marquee::before,\n.marquee::after {\n  position: absolute;\n  top: 0;\n  z-index: 1;\n  content: ' ';\n  width: 10px;\n  height: 100%;\n  animation: bgfadeIn linear 2s;\n}\n.marquee::before {\n  left: -2px;\n  background: linear-gradient(90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n.marquee::after {\n  right: -2px;\n  background: linear-gradient(-90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n@keyframes move {\n  0% {\n    transform: translateX(0);\n  }\n  100% {\n    transform: translateX(-50%);\n  }\n}\n.q-notice {\n  position: absolute;\n  width: 100%;\n  left: 0;\n  top: 0;\n  text-align: center;\n}\n.q-notice.is-auto {\n  pointer-events: none;\n  z-index: 10;\n}\n.q-notice.is-cover {\n  height: 100%;\n  background: rgba(255, 255, 255, 0.7);\n}\n.q-notice .item {\n  margin: 4px auto;\n}\n.q-notice .info {\n  pointer-events: initial;\n  min-width: 170px;\n  padding: 0 15px;\n  line-height: 29px;\n  height: 28px;\n  overflow: hidden;\n  white-space: nowrap;\n  display: inline-block;\n  color: rgba(255, 255, 255, 0.8);\n  background-color: #25283a;\n  box-shadow: 0px 2px 18px 2px rgba(172, 172, 172, 0.3);\n  border-radius: 2px;\n  position: relative;\n}\n.q-notice .info .icon-tip {\n  vertical-align: -3px;\n  margin-right: 2px;\n  width: 14px;\n}\n.q-notice .info [data-action] * {\n  pointer-events: none;\n}\n.q-notice .is-error .info {\n  color: #fff;\n  background-color: #f75559;\n}\n.q-notice .is-success .info {\n  color: #fff;\n  background-color: #00cb83;\n}\n.q-notice .is-close-able .info {\n  text-align: left;\n}\n.q-notice .is-close-able .btn-close {\n  width: 12px;\n  height: 12px;\n  color: #fff;\n  margin: 8px -5px 0 10px;\n  float: right;\n}\n.q-notice .is-close-able .btn-close:hover {\n  opacity: .8;\n}\n.q-notice .is-warning .info {\n  color: rgba(0, 1, 10, 0.93);\n  border: 0.5px solid #FFEBDA;\n  background-color: #FFF8F0;\n  box-shadow: 0px 16px 32px rgba(18, 19, 25, 0.16), 0px 0px 8px rgba(18, 19, 25, 0.08), 0px 0px 1px rgba(18, 19, 25, 0.08);\n}\n.ringing {\n  animation: ringing 2s ease;\n  animation-fill-mode: both;\n  animation-iteration-count: infinite;\n}\n@keyframes ringing {\n  10% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  15% {\n    -webkit-transform: rotate(-15deg);\n    transform: rotate(-15deg);\n  }\n  20% {\n    -webkit-transform: rotate(15deg);\n    transform: rotate(15deg);\n  }\n  25% {\n    -webkit-transform: rotate(-10deg);\n    transform: rotate(-10deg);\n    color: #2af2ac;\n  }\n  30% {\n    -webkit-transform: rotate(5deg);\n    transform: rotate(5deg);\n    color: #2af2ac;\n  }\n  35% {\n    -webkit-transform: rotate(-5deg);\n    transform: rotate(-5deg);\n  }\n  40% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n}\n.ctimer {\n  border-radius: 50%;\n  height: 40px;\n  overflow: hidden;\n  position: relative;\n  width: 40px;\n  background: rgba(255, 255, 255, 0.3);\n}\n.ctimer svg {\n  position: absolute;\n  left: 0;\n  z-index: 2;\n}\n.ctimer .hand {\n  position: absolute;\n  top: 0;\n  height: 100%;\n  overflow: hidden;\n  width: 50%;\n}\n.ctimer .hand span {\n  border: 20px solid rgba(255, 255, 255, 0.3);\n  border-bottom-color: transparent;\n  border-left-color: transparent;\n  border-radius: 50%;\n  display: block;\n  height: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  transform: rotate(225deg);\n  width: 0;\n}\n.ctimer .hand-left {\n  left: 0;\n  transform: rotate(180deg);\n}\n.ctimer .hand-right {\n  right: 0;\n}\n.ctimer .hand span {\n  animation-duration: var(--post-edit-time);\n  animation-iteration-count: 1;\n  animation-timing-function: linear;\n  animation-fill-mode: both;\n}\n.ctimer .hand-left span {\n  animation-name: spinleft;\n}\n.ctimer .hand-right span {\n  animation-name: spinright;\n}\n@keyframes spinleft {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(225deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\n@keyframes spinright {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(405deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\n.customerInfo-container {\n  user-select: none;\n  -webkit-user-select: none;\n  background-color: #fff;\n  max-height: 380px;\n  overflow: auto;\n}\n.customerInfo-container .async-info {\n  position: relative;\n  text-align: center;\n  min-height: 50px;\n}\n.customerInfo-container .async-info .is-loading {\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  margin: -8px 0 0 -8px;\n}\n.customerInfo-container h2 {\n  text-align: left;\n}\n.customerInfo-container .customerInfo-list {\n  text-align: left;\n  margin: 0 15px;\n  overflow: auto;\n  padding-bottom: 10px;\n  border-bottom: 1px solid #f4f7fb;\n  color: #262d3d;\n}\n.customerInfo-container .customerInfo-list:last-child {\n  border-bottom: 0;\n}\n.customerInfo-container .customerInfo-list li {\n  min-height: 20px;\n  line-height: 20px;\n  padding-left: 75px;\n}\n.customerInfo-container .customerInfo-list li label {\n  float: left;\n  margin-left: -75px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  color: #a1abc2;\n  max-width: 75px;\n}\n.customerInfo-container .customerInfo-list li.error-tip {\n  text-align: center;\n  padding: 15px;\n  color: rgba(255, 255, 255, 0.8);\n}\n.customerInfo-container .history {\n  text-align: left;\n  margin: 0 15px;\n}\n.customerInfo-container .history .item {\n  padding-bottom: 12px;\n  line-height: 20px;\n}\n.customerInfo-container .history .info {\n  margin-bottom: 3px;\n  color: #262d3d;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.customerInfo-container .history .icon {\n  width: 10px;\n  height: 10px;\n  vertical-align: -1px;\n  margin-right: 3px;\n}\n.customerInfo-container .history label {\n  float: left;\n  width: 40px;\n}\n.customerInfo-container .history label.tag {\n  text-align: center;\n  background-color: #40495d;\n  color: #c5ccdb;\n  border-radius: 3px;\n  transform: scale(0.8);\n  padding: 0 3px;\n  margin-left: -5px;\n  margin-top: -1px;\n  line-height: 20px;\n  height: 20px;\n}\n.customerInfo-container.is-calling .customerInfo-list {\n  color: #f8f9fB;\n  border-bottom-color: #4a5264;\n}\n.customerInfo-container.is-calling .customerInfo-list li.error-tip {\n  padding: 5px 15px;\n  color: #6c7280;\n}\n.customerInfo-container.is-calling .customerInfo-list li label {\n  color: #a1abc2;\n}\n.customerInfo-container.is-calling .history .info {\n  color: #f8f9fB;\n}\n.customerInfo-container.is-calling .history label.tag {\n  background-color: #40495d;\n  color: #c5ccdb;\n}\n",""])},function(e,t){e.exports="<%\n    var status = status || 'normal';\n    var isNormalState = status === 'normal' || status === 'over';\n    var nextState = nextState || {};\n%>\n<div class=\"customerInfo-container bg-main <%=isNormalState ? '' : 'is-calling'%>\">\n    <h2>来电信息</h2>\n    <ul class=\"customerInfo-list\">\n        <li>\n            <label>历史来电</label>\n            <%=nextState.Historycallcount ? `${nextState.Historycallcount}次` : '...'%>\n        </li>\n\n        <li>\n            <label>最近来电</label>\n            <%=nextState.Lastcalltime ? format('m-d H:i', nextState.Lastcalltime) : '...'%>\n        </li>\n    </ul>\n\n    <%if (withApi || withTrack) {%>\n    <div class=\"async-info\">\n        <span class=\"is-loading\"></span>\n    </div>\n    <%}%>\n</div>\n"},function(e,t){e.exports='<h2>企业自定义信息</h2>\n<ul class="customerInfo-list">\n<%\nif (records) {\n    for(i=0; i<records.length; i++) {\n        var item = records[i];\n        var label = decodeURIComponent(item.label);\n%>\n    <li>\n        <label title="<%=label%>"><%=label%></label>\n        <%=decodeURIComponent(item.content)%>\n    </li>\n<%\n    }\n}\nelse {\n%>\n    <li class="error-tip">\n        内容加载失败\n    </li>\n<%}%>\n</ul>'},function(e,t){e.exports='<%\nvar device = [\'\', \'pc\', \'mobile\'];\nif (track) {\n%>\n\n<%\nvar summary = track.summary;\nif (summary) {\n%>\n<h2>客户来源</h2>\n<ul class="customerInfo-list">\n    <% if (summary.viewMost) {%>\n    <li>\n        <label>浏览最多</label>\n        <%= summary.viewMost%>\n    </li>\n    <%}%>\n\n    <% if (summary.hotSearch) {%>\n    <li>\n        <label>热搜词</label>\n        <%=summary.hotSearch ? summary.hotSearch.join(\'、\') : \'-\'%>\n    </li>\n    <%}%>\n\n    <% if (summary.from) {%>\n    <li>\n        <label>广告来源</label>\n        <%=summary.from%>\n    </li>\n    <%}%>\n</ul>\n<%}%>\n\n<%\nif (track.records) {\n%>\n<h2>客户轨迹</h2>\n<ul class="history">\n    <%for (var i = 0; i < track.records.length; i++) {\n        var item = track.records[i];    \n    %>\n    <li class="item">\n        <div class="info">\n            <label class="tag"><svg class="icon" viewBox="0 0 20 20"><use xlink:href="#device_<%=device[item.device || 1]%>"></use></svg><%=item.device === 1 ? \'电脑\' : \'手机\'%></label>\n            <span class="time"><%= item.date%></span>\n            <%= item.from%>\n        </div>\n        <ul>\n            <%for (var j =0; j < item.history.length; j++) {\n                var subItem = item.history[j];\n            %>\n            <li>\n                <label><%= format(\'H:i\', subItem.timeStamp)%></label>\n                <%= subItem.title%>\n            </li>\n            <%}%>\n        </ul>\n    </li>\n    <%}%>\n</ul>\n<%}%>\n\n<%} else{%>\n<h2>客户轨迹</h2>\n<ul class="customerInfo-list">\n    <li class="error-tip">\n        内容加载失败\n    </li>\n</ul>\n<%}%>'},function(e,t){e.exports="'use strict';\n\nvar qd = window.qd;\nvar render = window.render;\nvar apiTpl = window.apiTpl;\nvar trackTpl = window.trackTpl;\n\nvar $container = $('.async-info');\nvar apiHtml = '';\nvar trackHtml = '';\nvar rendering = 0;\n\nfunction onShow() {\n    var state = qd.getState();\n    state.withApi && renderApiInfo();\n    state.withTrack && renderTrackerInfo();\n}\n\nfunction renderApiInfo() {\n    ++rendering;\n    qd.getApiInfo({\n        cache: 3600,\n        success: function success(res) {\n            var records = res.records || [];\n            apiHtml = render(apiTpl)({ records: records, decodeURIComponent: decodeURIComponent });\n        },\n        fail: function fail() {\n            apiHtml = render(apiTpl)({ records: null, decodeURIComponent: decodeURIComponent });\n        },\n        complete: renderInfo\n    });\n}\n\nfunction renderTrackerInfo() {\n    ++rendering;\n    qd.syncCustomerInfo().then(function (res) {\n        var track = res.track || {};\n        trackHtml = render(trackTpl)({\n            track: track,\n            format: qd.format\n        });\n    }).catch(function () {\n        trackHtml = render(trackTpl)({ track: null });\n    }).finally(renderInfo);\n}\n\nfunction renderInfo() {\n    --rendering;\n    if (!rendering) {\n        $container.html(apiHtml + trackHtml);\n        window.onRefresh();\n    }\n}\n\nqd._debug() && console.log('log from customerInfoFrame');\n\nqd.one('debug.customerInfoFrame', function () {\n    console.log('customerInfo page');\n});"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(8),o=r(i),a=n(18),s=r(a),l=n(24),c=r(l),u=n(645),d=r(u),f=n(646),p=r(f),h=n(647),g=r(h),m=n(648),v=r(m),b=n(26),_=r(b),y=n(101),w=n(27);(0,y.setPositionHook)("scheduleFrame",function(e){var t=this.stator.getState().isCollapsed;return(0,o.default)({},e,t?{offsetX:0,offsetY:6}:{})});var x=function(e,t){var n=c.default.call(this.stator,{name:"scheduleFrame",style:{width:280,background:"#fff"},autoHeight:".schedule-info-container",data:e,script:v.default,cssText:d.default.toString(),html:(0,_.default)(w)+p.default,props:{listTpl:g.default}});return new s.default(n,t)};t.default=x},function(e,t,n){t=e.exports=n(19)(!1),t.i(n(25),""),t.push([e.i,"h2 {\n  margin: 0;\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 1.5;\n  padding: 10px 15px 5px;\n  color: #262d3d;\n}\n.icon {\n  display: inline-block;\n  width: 16px;\n  overflow: hidden;\n  color: #a1abc2;\n}\n.icon svg {\n  width: 100%;\n}\n.icon.green:hover {\n  color: #01c480;\n}\na:hover .icon,\n.icon:hover {\n  color: #8490ae;\n}\n.drop {\n  overflow: hidden;\n  position: relative;\n  padding-right: 12px;\n}\n.drop .arrow {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 8px;\n  margin-left: 3px;\n}\n.icon.is-on,\n.text-stress {\n  color: #262d3d;\n}\n.text-hint {\n  color: #d4d8e1;\n}\n.green {\n  color: #00d48a;\n  border-color: #00d48a;\n}\n.red {\n  color: #f75559;\n}\n.blue {\n  color: #4a70ff;\n}\n.orange {\n  color: #ff8345;\n}\n.is-calling {\n  color: #a1abc2;\n}\n.is-calling h2 {\n  color: #f8f9fB;\n}\n.is-calling::-webkit-scrollbar-thumb,\n.is-calling ::-webkit-scrollbar-thumb {\n  background-color: #696c7c;\n}\n.is-calling::-webkit-scrollbar-thumb:hover,\n.is-calling ::-webkit-scrollbar-thumb:hover {\n  background-color: #50535f;\n}\n.is-calling .is-loading {\n  border: 2px solid #fff;\n  border-bottom-color: transparent;\n}\n.is-calling .text {\n  color: #a1abc2;\n}\n.is-calling .icon.is-on,\n.is-calling .text-stress {\n  color: #f8f9fB;\n}\n.is-calling .green {\n  color: #00cb83;\n  border-color: #00cb83;\n}\n.is-calling .red {\n  color: #e1464a;\n}\n.is-calling .blue {\n  color: #6283ff;\n}\n.is-calling.bg-main,\n.is-calling .bg-main {\n  background-position: 100% 50%;\n}\n.is-calling .bg-gap {\n  background-position: 100% 50%;\n}\n.is-calling .ck {\n  color: #f8f9fB;\n}\n.is-calling textarea,\n.is-calling input,\n.is-calling select,\n.is-calling .select,\n.is-calling .select .options {\n  border-color: #4a5264;\n  color: #f8f9fB;\n  background-color: #25283a;\n}\n.is-calling textarea:focus,\n.is-calling input:focus,\n.is-calling select:focus,\n.is-calling .select:focus,\n.is-calling .select .options:focus {\n  border-color: #8d96aa;\n}\n.is-calling textarea::placeholder,\n.is-calling input::placeholder,\n.is-calling select::placeholder,\n.is-calling .select::placeholder,\n.is-calling .select .options::placeholder {\n  color: #a1abc2;\n}\n.is-calling .select .options p:hover,\n.is-calling .select .options .selected {\n  background-color: #383a4a;\n}\n.is-calling .close {\n  color: #78849e;\n}\n.is-calling .close:hover {\n  color: #fff;\n}\n.is-calling input[type=checkbox] {\n  cursor: pointer;\n  position: relative;\n}\n.is-calling input[type=checkbox]::after {\n  position: absolute;\n  top: 0;\n  background-color: #1e2030;\n  color: #fff;\n  width: 14px;\n  height: 14px;\n  display: inline-block;\n  visibility: visible;\n  padding-left: 0px;\n  text-align: center;\n  content: ' ';\n  border-radius: 2px;\n  box-sizing: border-box;\n  border: 1px solid #4A5264;\n}\n.is-calling input[type=checkbox]:checked::after {\n  content: \"\";\n  border-color: #4A70FF;\n  background-color: #4A70FF;\n}\n.is-calling input[type=checkbox]:checked::before {\n  content: '';\n  position: absolute;\n  top: 1px;\n  left: 5px;\n  width: 3px;\n  height: 8px;\n  border: solid white;\n  border-width: 0 2px 2px 0;\n  transform: rotate(45deg);\n  z-index: 1;\n}\n.close {\n  position: absolute;\n  right: 0px;\n  top: 0px;\n  padding: 8px;\n  color: #a8abb3;\n}\n.close:hover {\n  color: #1e2300;\n}\n.close svg {\n  width: 14px;\n  height: 14px;\n}\n.bg-main {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #fff, #fff, #25283a, #25283a) left / cover;\n}\n.bg-gap {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #f4f7fb, #f4f7fb, #101328, #101328) left / cover;\n}\n.bgEaseIn {\n  background-position: 100% 50%;\n}\n.bgEaseOut {\n  background-position: 0% 50%;\n}\n.bg-main,\n.bg-gap {\n  background-size: 800% 800%;\n  animation-fill-mode: both;\n}\n@keyframes bgEaseIn {\n  0% {\n    background-position: 0% 50%;\n  }\n  100% {\n    background-position: 100% 50%;\n  }\n}\n@keyframes bgEaseOut {\n  0% {\n    background-position: 100% 50%;\n  }\n  100% {\n    background-position: 0% 50%;\n  }\n}\nbody {\n  margin: 0;\n  overflow: hidden;\n  font-size: 12px;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  color: #a1abc2;\n}\np {\n  margin: 0;\n}\ntextarea::placeholder,\ninput::placeholder {\n  color: #A1ABC2;\n}\n::-webkit-scrollbar {\n  width: 4px;\n  height: 8px;\n}\n::-webkit-scrollbar-thumb {\n  background-color: #f3f5fa;\n  border-radius: 8px;\n}\n::-webkit-scrollbar-thumb:hover {\n  background-color: #aaa;\n}\n::-webkit-scrollbar-track-piece {\n  background-color: transparent;\n}\nsvg {\n  fill: currentColor;\n}\na {\n  text-decoration: none;\n}\nul,\nli {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n.ck {\n  width: 9px;\n  height: 9px;\n  color: #262d3d;\n  position: absolute;\n  top: 50%;\n  right: 10px;\n  transform: translateY(-50%);\n  display: none;\n}\n.is-selected .ck {\n  display: inline-block;\n}\ninput,\ntextarea,\nselect,\n.select,\n.select .options {\n  font-size: 12px;\n  color: #262d3d;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  border-radius: 3px;\n  border: 1px solid #e1e6f0;\n  background-color: #fff;\n}\ninput:focus,\ntextarea:focus,\nselect:focus,\n.select:focus,\n.select .options:focus {\n  outline: 0;\n  border-color: #c5ccdb;\n}\nselect,\n.select,\n.select .options p {\n  padding: 0 5px;\n}\n.select {\n  min-height: 26px;\n  position: relative;\n  cursor: default;\n}\n.select .options {\n  position: absolute;\n  z-index: 1;\n  left: -1px;\n  top: 29px;\n  width: 100%;\n  max-height: 73px;\n  overflow: auto;\n}\n.select .options p:hover,\n.select .options p.selected {\n  background: #f1f5fb;\n}\n.select p {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.cls:after {\n  content: \"\";\n  font-size: 0;\n  display: block;\n  height: 0;\n  clear: both;\n  visibility: hidden;\n}\n.disabled {\n  pointer-events: none;\n  opacity: .3;\n}\n.hidden {\n  display: none!important;\n}\n.overlay {\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  background: rgba(255, 255, 255, 0.6);\n}\ninput::-webkit-outer-spin-button,\ninput::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n}\ninput[type=\"number\"] {\n  -moz-appearance: textfield;\n}\n.is-loading {\n  border-radius: 100%;\n  margin: 2px;\n  border: 2px solid #ccc;\n  border-bottom-color: transparent;\n  height: 12px;\n  width: 12px;\n  margin-top: -7px;\n  background: 0 0!important;\n  display: inline-block;\n  -webkit-animation: rotate .75s 0s linear infinite;\n  animation: rotate .75s 0s linear infinite;\n}\n@keyframes rotate {\n  0% {\n    -webkit-transform: rotate(0);\n    transform: rotate(0);\n  }\n  50% {\n    -webkit-transform: rotate(180deg);\n    transform: rotate(180deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n.marquee {\n  white-space: nowrap;\n  overflow: hidden;\n  width: 80px;\n  position: relative;\n}\n.marquee p {\n  overflow: hidden;\n  float: left;\n  animation: move linear 6s infinite;\n}\n.marquee span {\n  display: inline-block;\n  padding-left: 10px;\n}\n.marquee::before,\n.marquee::after {\n  position: absolute;\n  top: 0;\n  z-index: 1;\n  content: ' ';\n  width: 10px;\n  height: 100%;\n  animation: bgfadeIn linear 2s;\n}\n.marquee::before {\n  left: -2px;\n  background: linear-gradient(90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n.marquee::after {\n  right: -2px;\n  background: linear-gradient(-90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n@keyframes move {\n  0% {\n    transform: translateX(0);\n  }\n  100% {\n    transform: translateX(-50%);\n  }\n}\n.q-notice {\n  position: absolute;\n  width: 100%;\n  left: 0;\n  top: 0;\n  text-align: center;\n}\n.q-notice.is-auto {\n  pointer-events: none;\n  z-index: 10;\n}\n.q-notice.is-cover {\n  height: 100%;\n  background: rgba(255, 255, 255, 0.7);\n}\n.q-notice .item {\n  margin: 4px auto;\n}\n.q-notice .info {\n  pointer-events: initial;\n  min-width: 170px;\n  padding: 0 15px;\n  line-height: 29px;\n  height: 28px;\n  overflow: hidden;\n  white-space: nowrap;\n  display: inline-block;\n  color: rgba(255, 255, 255, 0.8);\n  background-color: #25283a;\n  box-shadow: 0px 2px 18px 2px rgba(172, 172, 172, 0.3);\n  border-radius: 2px;\n  position: relative;\n}\n.q-notice .info .icon-tip {\n  vertical-align: -3px;\n  margin-right: 2px;\n  width: 14px;\n}\n.q-notice .info [data-action] * {\n  pointer-events: none;\n}\n.q-notice .is-error .info {\n  color: #fff;\n  background-color: #f75559;\n}\n.q-notice .is-success .info {\n  color: #fff;\n  background-color: #00cb83;\n}\n.q-notice .is-close-able .info {\n  text-align: left;\n}\n.q-notice .is-close-able .btn-close {\n  width: 12px;\n  height: 12px;\n  color: #fff;\n  margin: 8px -5px 0 10px;\n  float: right;\n}\n.q-notice .is-close-able .btn-close:hover {\n  opacity: .8;\n}\n.q-notice .is-warning .info {\n  color: rgba(0, 1, 10, 0.93);\n  border: 0.5px solid #FFEBDA;\n  background-color: #FFF8F0;\n  box-shadow: 0px 16px 32px rgba(18, 19, 25, 0.16), 0px 0px 8px rgba(18, 19, 25, 0.08), 0px 0px 1px rgba(18, 19, 25, 0.08);\n}\n.ringing {\n  animation: ringing 2s ease;\n  animation-fill-mode: both;\n  animation-iteration-count: infinite;\n}\n@keyframes ringing {\n  10% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  15% {\n    -webkit-transform: rotate(-15deg);\n    transform: rotate(-15deg);\n  }\n  20% {\n    -webkit-transform: rotate(15deg);\n    transform: rotate(15deg);\n  }\n  25% {\n    -webkit-transform: rotate(-10deg);\n    transform: rotate(-10deg);\n    color: #2af2ac;\n  }\n  30% {\n    -webkit-transform: rotate(5deg);\n    transform: rotate(5deg);\n    color: #2af2ac;\n  }\n  35% {\n    -webkit-transform: rotate(-5deg);\n    transform: rotate(-5deg);\n  }\n  40% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n}\n.ctimer {\n  border-radius: 50%;\n  height: 40px;\n  overflow: hidden;\n  position: relative;\n  width: 40px;\n  background: rgba(255, 255, 255, 0.3);\n}\n.ctimer svg {\n  position: absolute;\n  left: 0;\n  z-index: 2;\n}\n.ctimer .hand {\n  position: absolute;\n  top: 0;\n  height: 100%;\n  overflow: hidden;\n  width: 50%;\n}\n.ctimer .hand span {\n  border: 20px solid rgba(255, 255, 255, 0.3);\n  border-bottom-color: transparent;\n  border-left-color: transparent;\n  border-radius: 50%;\n  display: block;\n  height: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  transform: rotate(225deg);\n  width: 0;\n}\n.ctimer .hand-left {\n  left: 0;\n  transform: rotate(180deg);\n}\n.ctimer .hand-right {\n  right: 0;\n}\n.ctimer .hand span {\n  animation-duration: var(--post-edit-time);\n  animation-iteration-count: 1;\n  animation-timing-function: linear;\n  animation-fill-mode: both;\n}\n.ctimer .hand-left span {\n  animation-name: spinleft;\n}\n.ctimer .hand-right span {\n  animation-name: spinright;\n}\n@keyframes spinleft {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(225deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\n@keyframes spinright {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(405deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\n.schedule-info-container {\n  user-select: none;\n  -webkit-user-select: none;\n}\n.schedule-info-container h1 {\n  margin: 0;\n  padding: 15px 15px 5px;\n  font-weight: 500;\n  font-size: 14px;\n}\n.schedule-info-container .schedule-list {\n  max-height: 290px;\n  overflow: auto;\n  padding-bottom: 10px;\n}\n.schedule-info-container .schedule-list-item {\n  height: 30px;\n  line-height: 30px;\n  padding: 0 15px;\n  position: relative;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.schedule-info-container .schedule-list-item:hover {\n  cursor: pointer;\n  background: #f1f5fb;\n}\n.schedule-info-container .schedule-list-item:hover .btn-call {\n  visibility: visible;\n}\n.schedule-info-container .schedule-list-item .status {\n  display: inline-block;\n  width: 6px;\n  height: 6px;\n  overflow: hidden;\n  border-radius: 100%;\n  vertical-align: 1px;\n  margin-left: 7px;\n  background-color: #00d48a;\n}\n.schedule-info-container .schedule-list-item .status.dated {\n  background-color: #f75559;\n}\n.schedule-info-container .schedule-list-item .status.dated-done {\n  background-color: #ff8345;\n}\n.schedule-info-container .schedule-list-item .status.done {\n  background-color: #a1abc2;\n}\n.schedule-info-container .schedule-list-item .name,\n.schedule-info-container .schedule-list-item .btn-call {\n  float: right;\n}\n.schedule-info-container .schedule-list-item .btn-call {\n  margin: 7px -5px 0 8px;\n  width: 16px;\n  height: 16px;\n  visibility: hidden;\n}\n.schedule-info-container .schedule-list-item .disabled {\n  pointer-events: none;\n}\n.schedule-info-container .is-loading {\n  display: none;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  border-color: #0067ed;\n  margin-left: -8px;\n  border-bottom-color: transparent;\n}\n.schedule-info-container .tip {\n  padding: 10px 0 5px;\n  color: #a1abc2;\n  text-align: center;\n}\n.schedule-info-container .tip a:hover {\n  text-decoration: underline;\n}\n.schedule-info-container .empty {\n  height: 66px;\n  text-align: center;\n  color: #a1abc2;\n  line-height: 66px;\n}\n.schedule-info-container.is-calling .schedule-list-item:hover {\n  background-color: #383a4a;\n}\n.schedule-info-container.is-calling .schedule-list .status {\n  background-color: #00cb83;\n}\n.schedule-info-container.is-calling .schedule-list .status.dated {\n  background-color: #e1464a;\n}\n",""])},function(e,t){e.exports="<%\n    var status = status || 'normal';\n    var isNormalState = status === 'normal' || status === 'over';\n%>\n<div class=\"schedule-info-container bg-main <%=isNormalState ? '' : 'is-calling'%>\">\n    <h1 class=\"text-stress\">今日预约回呼计划</h1>\n    <ul id=\"list\" class=\"schedule-list\"></ul>\n    <span class=\"is-loading\"></span>\n</div>\n"},function(e,t){e.exports='<%\nvar MAX = 50;\nvar list = scheduleData.records || [];\nvar clz = [\'\', \'done\', \'dated-done\', \'dated\'];\nif (list.length === 0) {%>\n    <div class="empty"><%=scheduleData.errorMsg ? scheduleData.errorMsg : \'暂无预约回呼计划\'%></div>\n<%} else {\n    for (var i = 0; i < list.length; i++) {\n        var item = list[i];\n    %>\n        <li class="schedule-list-item" data-id="<%=item.id%>">\n            <span class="time"><%=format(\'m-d H:i\', item.time)%></span>\n            <span class="status <%=clz[item.status]%>"></span>\n            <span class="btn-call"><svg class="icon green" viewBox="0 0 12 12"><use data-id="<%=item.id%>" xlink:href="#call-answer"></use></svg></span>\n            <span class="name"><%=item.customerName%></span>\n        </li>\n    <%}%>\n    <%if (scheduleData.total > MAX) {%>\n        <div class="tip">\n            仅展示前<%=MAX%>项，<a class="blue view-all" href="<%=scheduleData.url%>" target="_blank">查看全部</a>\n        </div>\n    <%}%>\n<%}%>\n'},function(e,t){e.exports="'use strict';\n\nvar qd = window.qd;\nvar render = window.render;\nvar listTpl = window.listTpl;\nvar count = 50;\n\nsetTimeout(function () {\n    qd._debug() && console.log('log from scheduleFrame');\n}, 1000);\n\nfunction onShow() {\n    renderList();\n}\n\nfunction renderList() {\n    var scheduleData = qd.getState('scheduleData') || {};\n    var list = scheduleData.records || [];\n    var total = scheduleData.total;\n    var url = scheduleData.url;\n    var html = '';\n    html = render(listTpl)({\n        scheduleData: scheduleData,\n        format: qd.format\n    });\n    $('#list').html(html);\n    window.onRefresh();\n}\n\nfunction bindEvents() {\n    $('#list').bind('click', function (e) {\n        if (e.target.nodeName === 'use') {\n            var id = e.target.dataset.id;\n            e.stopPropagation();\n            if (qd.isCallingState()) {\n                notice.error('请在本次通话结束后，再发起新通话');\n                return;\n            }\n            qd.handle({\n                action: 'call',\n                params: {\n                    id: id\n                },\n                success: function success() {\n                    qd.hidePage();\n                },\n                fail: function fail(err) {\n                    qd.showTip(err.msg || '发起预约回呼出错');\n                }\n            });\n        } else if (qd.env.inClient && e.target.nodeName === 'A') {\n            qd.trigger('_openUrl.client', e.target.href);\n            e.preventDefault();\n        } else {\n            var el = $(e.target).findParent('li');\n            if (el) {\n                var id = el.dataset.id;\n                qd.showPage({\n                    trigger: e.target,\n                    name: 'callOnTimeFrame',\n                    params: id\n                });\n            }\n        }\n    });\n}\nbindEvents();"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(18),o=r(i),a=n(24),s=r(a),l=n(650),c=r(l),u=n(651),d=r(u),f=n(653),p=r(f),h=n(26),g=r(h),m=n(27),v=function(e,t){var n=e.status,r="normal"===n||"over"===n,i=s.default.call(this.stator,{name:"datePickerFrame",moveable:!0,style:{width:369,height:292},animateCss:{in:["qd__animated","qd__fadeInUp"],out:["qd__animated","qd__fadeOutDown"]},data:e,script:p.default,cssText:d.default.toString(),html:(0,g.default)(m)+'\n            <div class="datepicker-container bg-main '+(r?"":"is-calling")+'">\n                <div id="datepicker"></div>\n                <div class="btn-action">\n                    <a class="btn-save" href="javascript:;">确定</a>\n                    <a class="btn-cancel" href="javascript:;">取消</a>\n                </div>\n            </div>',props:{jeDate:function(){return c.default}}});return new o.default(i,t)};t.default=v},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__,_typeof2=__webpack_require__(28),_typeof3=_interopRequireDefault(_typeof2);!function(e,t){__WEBPACK_AMD_DEFINE_FACTORY__=t,void 0!==(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__)&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}(0,function(){function DateTime(e,t){var n=this,r=new Date,i=["FullYear","Month","Date","Hours","Minutes","Seconds"],o=jet.extend({YYYY:null,MM:null,DD:null,hh:r.getHours(),mm:r.getMinutes(),ss:r.getSeconds()},t),a=void 0==t?r:new Date(o.YYYY,o.MM,o.DD,o.hh,o.mm,o.ss);(e||[]).length>0&&jet.each(e,function(e,t){a["set"+i[e]]("Month"==i[e]?parseInt(t)-1:parseInt(t))}),n.reDate=function(){return new DateTime},n.GetValue=function(){return a},n.GetYear=function(){return a.getFullYear()},n.GetMonth=function(){return a.getMonth()+1},n.GetDate=function(){return a.getDate()},n.GetHours=function(){return a.getHours()},n.GetMinutes=function(){return a.getMinutes()},n.GetSeconds=function(){return a.getSeconds()}}function jeDatePick(e,t){var n={language:{name:"cn",month:["01","02","03","04","05","06","07","08","09","10","11","12"],weeks:["日","一","二","三","四","五","六"],times:["小时","分钟","秒数"],timetxt:["时间选择","开始时间","结束时间"],backtxt:"返回日期",clear:"清空",today:"现在",yes:"确定"},format:"YYYY-MM-DD hh:mm:ss",minDate:"1900-01-01 00:00:00",maxDate:"2099-12-31 23:59:59",isShow:!0,multiPane:!0,onClose:!0,range:!1,trigger:"click",position:[],valiDate:[],isinitVal:!1,initDate:{},isTime:!0,isClear:!0,isToday:!0,isYes:!0,festival:!1,fixed:!0,zIndex:2099,method:{},theme:{},shortcut:[],donefun:null,before:null,succeed:null};this.$opts=jet.extend(n,t||{}),this.valCell=$Q(e),this.format=this.$opts.format,null!=this.valCell?this.init():alert(e+"  ID或类名不存在!"),jet.extend(this,this.$opts.method),delete this.$opts.method}function jeLunar(e,t,n){function r(e){var t=function(e,t){return new Date(31556925974.7*(e-1900)+6e4*o[t]+Date.UTC(1900,0,6,2,5)).getUTCDate()},n=function(e){var t,n=348;for(t=32768;t>8;t>>=1)n+=i[e-1900]&t?1:0;return n+g(e)},r=function(e){return a.charAt(e%10)+s.charAt(e%12)},g=function(e){return m(e)?65536&i[e-1900]?30:29:0},m=function(e){return 15&i[e-1900]},v=function(e,t){return i[e-1900]&65536>>t?30:29},b=function(e){var t,r=0,i=0,o=new Date(1900,0,31),a=(e-o)/864e5;for(this.dayCyl=a+40,this.monCyl=14,t=1900;t<2050&&a>0;t++)i=n(t),a-=i,this.monCyl+=12;for(a<0&&(a+=i,t--,this.monCyl-=12),this.year=t,this.yearCyl=t-1864,r=m(t),this.isLeap=!1,t=1;t<13&&a>0;t++)r>0&&t==r+1&&0==this.isLeap?(--t,this.isLeap=!0,i=g(this.year)):i=v(this.year,t),1==this.isLeap&&t==r+1&&(this.isLeap=!1),a-=i,0==this.isLeap&&this.monCyl++;0==a&&r>0&&t==r+1&&(this.isLeap?this.isLeap=!1:(this.isLeap=!0,--t,--this.monCyl)),a<0&&(a+=i,--t,--this.monCyl),this.month=t,this.day=a+1},_=function(e){return e<10?"0"+(0|e):e},y=function(e,t){var n=e;return t.replace(/dd?d?d?|MM?M?M?|yy?y?y?/g,function(e){switch(e){case"yyyy":var t="000"+n.getFullYear();return t.substring(t.length-4);case"dd":return _(n.getDate());case"d":return n.getDate().toString();case"MM":return _(n.getMonth()+1);case"M":return n.getMonth()+1}})};this.isToday=!1,this.isRestDay=!1,this.solarYear=y(e,"yyyy"),this.solarMonth=y(e,"M"),this.solarDate=y(e,"d"),this.solarWeekDay=e.getDay(),this.inWeekDays="星期"+u.charAt(this.solarWeekDay);var w=new b(e);this.lunarYear=w.year,this.shengxiao=l.charAt((this.lunarYear-4)%12),this.lunarMonth=w.month,this.lunarIsLeapMonth=w.isLeap,this.lnongMonth=this.lunarIsLeapMonth?"闰"+f[w.month-1]:f[w.month-1],this.lunarDate=w.day,this.showInLunar=this.lnongDate=function(e,t){var n;switch(t){case 10:n="初十";break;case 20:n="二十";break;case 30:n="三十";break;default:n=d.charAt(Math.floor(t/10)),n+=u.charAt(t%10)}return n}(this.lunarMonth,this.lunarDate),1==this.lunarDate&&(this.showInLunar=this.lnongMonth+"月"),this.ganzhiYear=r(w.yearCyl),this.ganzhiMonth=r(w.monCyl),this.ganzhiDate=r(w.dayCyl++),this.jieqi="",this.restDays=0,t(this.solarYear,2*(this.solarMonth-1))==y(e,"d")&&(this.showInLunar=this.jieqi=c[2*(this.solarMonth-1)]),t(this.solarYear,2*(this.solarMonth-1)+1)==y(e,"d")&&(this.showInLunar=this.jieqi=c[2*(this.solarMonth-1)+1]),"清明"==this.showInLunar&&(this.showInLunar="清明节",this.restDays=1),this.solarFestival=p[y(e,"MM")+y(e,"dd")],void 0===this.solarFestival?this.solarFestival="":/\*(\d)/.test(this.solarFestival)&&(this.restDays=parseInt(RegExp.$1),this.solarFestival=this.solarFestival.replace(/\*\d/,"")),this.showInLunar=""==this.solarFestival?this.showInLunar:this.solarFestival,this.lunarFestival=h[this.lunarIsLeapMonth?"00":_(this.lunarMonth)+_(this.lunarDate)],void 0===this.lunarFestival?this.lunarFestival="":/\*(\d)/.test(this.lunarFestival)&&(this.restDays=this.restDays>parseInt(RegExp.$1)?this.restDays:parseInt(RegExp.$1),this.lunarFestival=this.lunarFestival.replace(/\*\d/,"")),12==this.lunarMonth&&this.lunarDate==v(this.lunarYear,12)&&(this.lunarFestival=h["0100"],this.restDays=1),this.showInLunar=""==this.lunarFestival?this.showInLunar:this.lunarFestival}var i=[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42448,83315,21200,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46496,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,21952,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19415,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448],o=[0,21208,43467,63836,85337,107014,128867,150921,173149,195551,218072,240693,263343,285989,308563,331033,353350,375494,397447,419210,440795,462224,483532,504758],a="甲乙丙丁戊己庚辛壬癸",s="子丑寅卯辰巳午未申酉戌亥",l="鼠牛虎兔龙蛇马羊猴鸡狗猪",c=["小寒","大寒","立春","雨水","惊蛰","春分","清明","谷雨","立夏","小满","芒种","夏至","小暑","大暑","立秋","处暑","白露","秋分","寒露","霜降","立冬","小雪","大雪","冬至"],u="日一二三四五六七八九十",d="初十廿卅",f=["正","二","三","四","五","六","七","八","九","十","十一","腊"],p={"0101":"*1元旦节","0202":"湿地日","0214":"情人节","0308":"妇女节","0312":"植树节","0315":"消费者权益日","0401":"愚人节","0422":"地球日","0501":"*1劳动节","0504":"青年节","0512":"护士节","0518":"博物馆日","0520":"母亲节","0601":"儿童节","0623":"奥林匹克日","0630":"父亲节","0701":"建党节","0801":"建军节","0903":"抗战胜利日","0910":"教师节",1001:"*3国庆节",1201:"艾滋病日",1224:"平安夜",1225:"圣诞节"},h={"0100":"除夕","0101":"*2春节","0115":"元宵节","0505":"*1端午节","0707":"七夕节","0715":"中元节","0815":"*1中秋节","0909":"*1重阳节",1015:"下元节",1208:"腊八节",1223:"小年"};return new r(new Date(e,t,n))}var doc=document,win=window,jet={},doc=document,regymdzz="YYYY|MM|DD|hh|mm|ss|zz",gr=/\-/g,regymd="YYYY|MM|DD|hh|mm|ss|zz".replace("|zz",""),parseInt=function(e){return win.parseInt(e,10)},$Q=function(e,t){return t=t||doc,e.nodeType?e:t.querySelector(e)},jeDate=function(e,t){var n="function"==typeof t?t():t;return doc=t.doc,win=t.win,new jeDatePick(e,n)};jeDate.dateVer="V6.5.0",jeDate.extend=jet.extend=function(){var e,t,n,r=arguments[0],i=1,o=arguments.length;for("boolean"==typeof r&&(r,r=arguments[1]||{},i=2),"object"!==(void 0===r?"undefined":(0,_typeof3.default)(r))&&"function"!=typeof r&&(r={}),o===i&&(r=this,--i);i<o;i++)if(null!=(e=arguments[i]))for(t in e)r[t],n=e[t],r!==n&&void 0!==n&&(r[t]=n);return r},jeDate.nowDate=function(e,t){return t=t||"YYYY-MM-DD hh:mm:ss",isNaN(e)||(e={DD:e}),jet.parse(jet.getDateTime(e),t)},jeDate.convert=function(e){e.format=e.format||"YYYY-MM-DD hh:mm:ss",e.addval=e.addval||[];var t=jet.reMatch(e.format),n={};jet.each(jet.reMatch(e.val),function(e,r){n[t[e]]=parseInt(r)});var r=new DateTime(e.addval,n);return{YYYY:r.GetYear(),MM:r.GetMonth(),DD:r.GetDate(),hh:r.GetHours(),mm:r.GetMinutes(),ss:r.GetSeconds()}},jeDate.valText=function(e,t){return jet.valText(e,t)},jeDate.timeStampDate=function(e,t){t=t||"YYYY-MM-DD hh:mm:ss";var n=/^(-)?\d{1,10}$/.test(e)||/^(-)?\d{1,13}$/.test(e);if(/^[1-9]*[1-9][0-9]*$/.test(e)&&n){var r=parseInt(e);if(/^(-)?\d{1,10}$/.test(r))r*=1e3;else if(/^(-)?\d{1,13}$/.test(r))r*=1e3;else{if(!/^(-)?\d{1,14}$/.test(r))return void alert("时间戳格式不正确");r*=100}var i=new Date(r);return jet.parse({YYYY:i.getFullYear(),MM:jet.digit(i.getMonth()+1),DD:jet.digit(i.getDate()),hh:jet.digit(i.getHours()),mm:jet.digit(i.getMinutes()),ss:jet.digit(i.getSeconds())},t)}var o=jet.reMatch(e),a=new Date(o[0],o[1]-1,o[2],o[3]||0,o[4]||0,o[5]||0);return Math.round(a.getTime()/1e3)},jeDate.getLunar=function(e){var t=jeLunar(e.YYYY,parseInt(e.MM)-1,e.DD);return{nM:t.lnongMonth,nD:t.lnongDate,cY:parseInt(t.solarYear),cM:parseInt(t.solarMonth),cD:parseInt(t.solarDate),cW:t.inWeekDays,nW:t.solarWeekDay}},jeDate.parse=jet.parse=function(e,t){return t.replace(new RegExp(regymdzz,"g"),function(t,n){return"zz"==t?"00":jet.digit(e[t])})},jet.extend(jet,{isType:function(e,t){return Object.prototype.toString.call(e)=="[object "+function(e){return e=e.toLowerCase(),e.replace(/\b(\w)|\s(\w)/g,function(e){return e.toUpperCase()})}(t)+"]"},each:function(e,t,n){var r,i=0,o=e.length;if(void 0===o||"function"===e){for(r in e)if(!1===t.call(e[r],r,e[r]))break}else for(;i<o&&!1!==t.call(e[i],i,e[i++]););return e},on:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),!0):e.attachEvent?e.attachEvent("on"+t,n):void(e["on"+t]=n)},isObj:function(e){for(var t in e)return!0;return!1},trim:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},reMatch:function(e){var t=[],n="",r=/(^\w{4}|\w{2}\B)/g;return n=jet.isNum(e)?e.replace(r,"$1-"):/^[A-Za-z]+$/.test(e)?e.replace(r,"$1-"):e,jet.each(n.match(/\w+|d+/g),function(e,n){t.push(jet.isNum(n)?parseInt(n):n)}),t},equals:function(e,t){if(!t)return!1;if(e.length!=t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]instanceof Array&&t[n]instanceof Array){if(!e[n].equals(t[n]))return!1}else if(e[n]!=t[n])return!1;return!0},docScroll:function(e){return e=e?"scrollLeft":"scrollTop",document.body[e]|document.documentElement[e]},docArea:function(e){return document.documentElement[e?"clientWidth":"clientHeight"]},digit:function(e){return e<10?"0"+(0|e):e},isNum:function(e){return!!/^[+-]?\d*\.?\d*$/.test(e)},getDaysNum:function(e,t){var n=31,r=e%100!=0&&e%4==0||e%400==0;switch(parseInt(t)){case 2:n=r?29:28;break;case 4:case 6:case 9:case 11:n=30}return n},getYM:function(e,t,n){var r=new Date(e,t-1);return r.setMonth(t-1+n),{y:r.getFullYear(),m:r.getMonth()+1}},prevMonth:function(e,t,n){return jet.getYM(e,t,0-(n||1))},nextMonth:function(e,t,n){return jet.getYM(e,t,n||1)},setCss:function(e,t){for(var n in t)e.style[n]=t[n]},html:function(e,t){return void 0===t?e&&1===e.nodeType?e.innerHTML:void 0:void 0!==t&&1==t?e&&1===e.nodeType?e.outerHTML:void 0:e.innerHTML=t},text:function(e,t){var n=document.all?"innerText":"textContent";return void 0===t?e&&1===e.nodeType?e[n]:void 0:e[n]=t},val:function(e,t){if(void 0===t)return e&&1===e.nodeType&&void 0!==e.value?e.value:void 0;t=null==t?"":t+"",e.value=t},attr:function(e,t){return e.getAttribute(t)},hasClass:function(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},stopPropagation:function(e){e&&e.stopPropagation?e.stopPropagation():win.event.cancelBubble=!0},template:function(e,t){var n=/[^\w\-\.:]/.test(e)?e:document.getElementById(e).innerHTML,r=function(e){var t="";for(var n in e)t+="var "+n+'= $D["'+n+'"];';return t};return function(e,t){var n="var $out='"+e.replace(/[\r\n]/g,"").replace(/^(.+?)\{\%|\%\}(.+?)\{\%|\%\}(.+?)$/g,function(e){return e.replace(/(['"])/g,"\\$1")}).replace(/\{\%\s*=\s*(.+?)\%\}/g,"';$out+=$1;$out+='").replace(/\{\%(.+?)\%\}/g,"';$1;$out+='")+"';return new String($out);",i=r(t);return new new Function("$D",i+n)(t)+""}(n,t)},isValDiv:function(e){return/textarea|input/.test(e.tagName.toLocaleLowerCase())},valText:function(e,t){var n=$Q(e),r=jet.isValDiv(n)?"val":"text";if(void 0==t)return jet[r](n);jet[r](n,t)},isBool:function(e){return void 0==e||1==e},getDateTime:function(e){var t=new DateTime,n=jet.extend({YYYY:null,MM:null,DD:null,hh:0,mm:0,ss:0},e),r={YYYY:"FullYear",MM:"Month",DD:"Date",hh:"Hours",mm:"Minutes",ss:"Seconds"};return jet.each(["ss","mm","hh","DD","MM","YYYY"],function(e,i){if(!jet.isNum(parseInt(n[i])))return null;var o=t.GetValue();(parseInt(n[i])||0==parseInt(n[i]))&&o["set"+r[i]](t["Get"+r[i]]()+("MM"==i?-1:0)+parseInt(n[i]))}),{YYYY:t.GetYear(),MM:t.GetMonth(),DD:t.GetDate(),hh:t.GetHours(),mm:t.GetMinutes(),ss:t.GetSeconds()}}});var searandom=function(){for(var e="",t=[1,2,3,4,5,6,7,8,9,0],n=0;n<8;n++)e+=t[Math.round(Math.random()*(t.length-1))];return e},jefix="jefixed",ymdzArr=jet.reMatch(regymdzz),elx="#jedate";return jet.extend(jeDatePick.prototype,{init:function(){var e,t=this,n=t.$opts,r=(new Date,n.trigger),i=n.initDate||[],o=n.range,a=(void 0==n.zIndex||n.zIndex,jet.isBool(n.isShow)),s=void 0!=n.isinitVal&&0!=n.isinitVal;if(t.setDatas(),n.before&&n.before(t.valCell),s&&r&&a){if(i[1]){var l=jet.getDateTime(i[0]);e=[{YYYY:l.YYYY,MM:jet.digit(l.MM),DD:jet.digit(l.DD),hh:jet.digit(l.hh),mm:jet.digit(l.mm),ss:jet.digit(l.ss)}]}else e=t.getValue(jet.isObj(i[0])?i[0]:{});o||t.setValue([e[0]],n.format,!0)}var c=function(){var e=jet.reMatch(t.format),n=""!=t.getValue(),r=[],i=7==t.dlen?"hh:mm:ss":"YYYY-MM"+(t.dlen<=2?"":"-DD"),s=t.valCell.value;if(s){s=s.substr(0,11);var l=[jet.parse(jet.getDateTime({}),i)];l=l[0];var c=new Date(s).setHours("0"),u=new Date(l).setHours("0"),d=parseInt((c-u)/1e3/3600/24),f={DD:d};t.selectValue=[jet.parse(jet.getDateTime(f),i)]}else t.selectValue=[jet.parse(jet.getDateTime({}),i)];if(n&&a){var p=t.getValue().split(o);jet.each(new Array(o?2:1),function(t){r[t]={},jet.each(jet.reMatch(p[t]),function(n,i){r[t][e[n]]=parseInt(i)})}),o&&(t.selectValue=p)}else{var h=t.getValue({})[0],g=jet.nextMonth(h.YYYY,h.MM||jet.getDateTime({}).MM);t.dlen>2&&t.dlen<=6&&(g.y,g.m);r=[h]}return t.selectDate=r,r},u=[];t.minDate="",t.maxDate="",a&&r||(u=c()),a&&r?r&&jet.on(t.valCell,r,function(){if(!(document.querySelectorAll(elx).length>0)){var e=c();t.minDate=jet.isType(n.minDate,"function")?n.minDate(t):n.minDate,t.maxDate=jet.isType(n.maxDate,"function")?n.maxDate(t):n.maxDate,t.storeData(e[0],e[1]),t.renderDate()}}):(t.minDate=jet.isType(n.minDate,"function")?n.minDate(t):n.minDate,t.maxDate=jet.isType(n.maxDate,"function")?n.maxDate(t):n.maxDate,t.storeData(u[0],u[1]),t.renderDate(),n.succeed&&n.succeed(t.dateCell))},setDatas:function(){var e=this,t=e.$opts,n=t.range,r=[],i=jet.isBool(t.isShow),o=t.multiPane;e.$data=jet.extend({year:!1,month:!1,day:!0,time:!1,timebtn:!1},{shortcut:[],lang:t.language,yaerlist:[],monthlist:[[],[]],ymlist:[[],[]],daylist:[[],[]],clear:t.isClear,today:!n&&t.isToday,yes:t.isYes,pane:o?1:2}),t.shortcut.length>0&&(jet.each(t.shortcut,function(e,t){var n=[],i=jet.isType(t.val,"function")?t.val():t.val;if(jet.isType(i,"object")){for(var o in i)n.push(o+":"+i[o]);r.push(jet.extend({},{name:t.name,val:"{"+n.join("#")+"}"}))}}),e.$data.shortcut=r),e.dlen=function(){var t=jet.reMatch(e.format),n=[];jet.each(ymdzArr,function(e,r){jet.each(t,function(e,t){r==t&&n.push(t)})});var r=n.length;return"hh"==n[0]&&r<=3?7:r}(),e.$data.dlen=e.dlen,e.timeInspect=!1,1==e.dlen?jet.extend(e.$data,{year:!0,day:!1}):2==e.dlen?jet.extend(e.$data,{month:!0,day:!1}):e.dlen>3&&e.dlen<=6?e.$data.timebtn=!0:7==e.dlen&&jet.extend(e.$data,{day:!1,time:!0}),i||(e.$data.clear=!1,e.$data.yes=!1)},renderDate:function(){var e=this,t=e.$opts,n=jet.isBool(t.isShow),r=n?elx:elx+searandom(),i={zIndex:void 0==t.zIndex?1e4:t.zIndex};if(void 0==e.dateCell&&(e.dateCell=document.createElement("div"),e.dateCell.id=r.replace(/\#/g,""),e.dateCell.className=elx.replace(/\#/g,"")+" "+(t.shortcut.length>0?" leftmenu":""),e.dateCell.setAttribute("author","chen guojun")),jet.html(e.dateCell,jet.template(e.dateTemplate(),e.$data)),jet.isObj(t.theme)){var o=document.createElement("style"),a=".jedate"+searandom(),s=t.theme,l="background-color:"+s.bgcolor,c="color:"+(void 0==s.color?"#FFFFFF":s.color),u=void 0==s.pnColor?"":"color:"+s.pnColor+";";e.dateCell.className=e.dateCell.className+" "+a.replace(/^./g,""),o.setAttribute("type","text/css"),o.innerHTML=a+" .jedate-menu p:hover{"+l+";"+c+";}"+a+" .jedate-header em{"+c+";}"+a+" .jedate-content .yeartable td.action span,"+a+" .jedate-content .monthtable td.action span,"+a+" .jedate-content .yeartable td.action span:hover,"+a+" .jedate-content .monthtable td.action span:hover{"+l+";border:1px "+s.bgcolor+" solid;"+c+";}"+a+" .jedate-content .daystable td.action,"+a+" .jedate-content .daystable td.action:hover,"+a+" .jedate-content .daystable td.action .lunar,"+a+" .jedate-header,"+a+" .jedate-time .timeheader,"+a+" .jedate-time .hmslist ul li.action,"+a+" .jedate-time .hmslist ul li.action:hover,"+a+" .jedate-time .hmslist ul li.disabled.action,"+a+" .jedate-footbtn .timecon,"+a+" .jedate-footbtn .btnscon span{"+l+";"+c+";}"+a+" .jedate-content .daystable td.other,"+a+" .jedate-content .daystable td.other .nolunar,"+a+" .jedate-content .daystable td.other .lunar{"+u+"}"+a+" .jedate-content .daystable td.contain,"+a+" .jedate-content .daystable td.contain:hover{background-"+u+"}",e.dateCell.appendChild(o)}e.compileBindNode(e.dateCell),document.querySelectorAll(r).length>0&&document.body.removeChild($Q(r)),n?document.body.appendChild(e.dateCell):e.valCell.appendChild(e.dateCell),jet.setCss(e.dateCell,jet.extend({position:n?1==t.fixed?"absolute":"fixed":"relative"},n?i:{})),e.methodEventBind(),(7==e.dlen||e.dlen>3&&e.dlen<=6)&&e.locateScroll(),t.festival&&"cn"==t.language.name&&e.showFestival(),n&&(e.dateOrien(e.dateCell,e.valCell),e.blankArea())},setValue:function(e,t,n){var r,i=this,o=i.valCell;if(t=t||i.format,"string"==typeof e&&""!=e){var a=e.split(i.$opts.range),s=[];jet.each(a,function(e,n){var r=jet.reMatch(n),i={};jet.each(jet.reMatch(t),function(e,t){i[t]=r[e]}),s.push(i)}),r=s}else r=e;var l=i.parseValue(r,t);return 0!=n&&jet.valText(o,l),l},getValue:function(e){var t,n=this,r=n.valCell,i=n.$opts,o=(new DateTime).reDate(),a=o.GetYear(),s=o.GetMonth(),l=o.GetDate(),c=o.GetHours(),u=o.GetMinutes(),d=o.GetSeconds();if(void 0==e&&jet.isBool(i.isShow))t=jet.valText(r);else{var f=jet.isBool(i.isShow)?""==jet.valText(r):!jet.isBool(i.isShow),p=jet.extend({YYYY:null,MM:null,DD:null},e||{}),h=[],g=new Array(2),m=function(e){return[void 0==p[e]||null==p[e],p[e]]},v=[{YYYY:a,MM:s,DD:l,hh:c,mm:u,ss:d,zz:"00"},{YYYY:a,MM:s,DD:l,hh:c,mm:u,ss:d,zz:"00"}];if(f)jet.each(g,function(e){var t={};jet.each(ymdzArr,function(n,r){t[r]=parseInt(m(r)[0]?v[e][r]:m(r)[1])}),h.push(jet.extend(v[e],t))});else{var b=0!=i.range,_=n.getValue(),y=_.split(i.range),w=jet.reMatch(n.format);jet.each(g,function(t){var n={},r=b?jet.reMatch(y[t]):jet.reMatch(_);jet.each(w,function(e,t){n[t]=r[e]});var i=jet.extend(n,e||{});h.push(jet.extend(v[t],i))})}t=h}return t},storeData:function(e,t){t=t||{};var n,r=this,i=r.$opts,o=i.multiPane,a=r.valCell,s=(new Date).getDate(),l=(r.$data,jet.isObj(t)),c={yearlist:[],monthlist:[[],[]],daylist:[],daytit:[],timelist:[]},u=null==e.DD?s:e.DD,d=null==t.DD?s:t.DD,f={hh:e.hh,mm:e.mm,ss:e.ss},p={hh:t.hh||0,mm:t.mm||0,ss:t.ss||0};if(c.yearlist.push(r.eachYear(parseInt(e.YYYY),1)),0==o){var h=l?t.YYYY:e.YYYY;c.yearlist.push(r.eachYear(parseInt(h),2))}if(c.monthlist[0]=r.eachMonth(e.YYYY,0),0==o){l?t.YYYY:e.YYYY;c.monthlist[1]=r.eachMonth(e.YYYY+1,1)}if(c.daylist.push(r.eachDays(e.YYYY,e.MM,u,0)),c.daytit.push({YYYY:e.YYYY,MM:e.MM}),0==o){var g=jet.nextMonth(e.YYYY,e.MM);c.daylist.push(r.eachDays(g.y,g.m,d,1)),c.daytit.push({YYYY:g.y,MM:g.m})}r.selectTime=[f,p],c.timelist.push(r.eachTime(f,1)),0==o&&(n=7==r.dlen&&i.range&&!l?f:p,7==r.dlen&&i.range&&""==jet.valText(a)&&(r.selectTime[1]=jet.extend(p,f)),c.timelist.push(r.eachTime(n,2))),jet.extend(r.$data,c)},dateTemplate:function(){var e=this,t=e.$opts,n=t.multiPane,r="",i="",o=t.language,a="cn"==o.name?"年":"",s="cn"==o.name?"月":"",l=function(){var t=[],r=n?"11":"23";return 1==e.dlen?t=["{%=yearlist[i][0].y-"+r+"%}","{%=yearlist[i][yearlist[i].length-1].y%}"]:2==e.dlen?t=n?["{%=yearlist[0][0].y-1%}","{%=yearlist[0][0].y+1%}"]:["{%=yearlist[i][0].y-"+r+"%}","{%=yearlist[i][yearlist[i].length-1].y%}"]:e.dlen>2&&e.dlen<=6&&(t=["{%=yearlist[0][0].y-1%}","{%=yearlist[0][0].y+1%}"]),t}(),c='<em class="yearprev yprev jedatefont" @on="yearBtn(lprev,'+l[0]+')"><svg class="icon" viewBox="0 0 12 12"><use xlink:href="#arrow_double_left_line"></use></svg></em>',u=(l[2],l[3],'<em class="yearnext ynext jedatefont" @on="yearBtn(rnext,'+l[1]+')"><svg class="icon" viewBox="0 0 12 12"><use xlink:href="#arrow_double_left_line"></use></svg></em>'),d='{% if(dlen>2){ %}<em class="monthprev mprev jedatefont" @on="monthBtn(mprev,{%=daytit[i].YYYY%}-{%=daytit[i].MM%})"><svg class="icon" viewBox="0 0 12 12"><use xlink:href="#arrow_left_small_line"></use></svg></em>{% } %}',f='{% if(dlen>2){ %}<em class="monthnext mnext jedatefont" @on="monthBtn(mnext,{%=daytit[i].YYYY%}-{%=daytit[i].MM%})"><svg class="icon" viewBox="0 0 12 12"><use xlink:href="#arrow_left_small_line"></use></svg></em>{% } %}',p='<table class="yeartable year{%= i==0 ? "left":"right"%}" style="display:{%=year ? "block":"none"%};"><tbody><tr>{% for(var y=0;y<=11;y++){ %}<td class="{%=yearlist[i][y].style%}" @on="yearClick({%=yearlist[i][y].y%})"><span>{%=yearlist[i][y].y%}'+a+"</span></td>{% if((y+1)%3==0){ %} </tr>{% } %} {% } %} </tbody></table>",h='<table class="monthtable month{%= i==0 ? "left":"right"%}" style="display:{%=month ? "block":"none"%};"><tbody><tr>{% for(var m=0;m<=11;m++){ %}<td class="{%=monthlist[i][m].style%}" ym="{%=monthlist[i][m].y%}-{%=monthlist[i][m].m%}" @on="monthClick({%=monthlist[i][m].y%}-{%=monthlist[i][m].m%})"><span>{%=monthlist[i][m].m%}'+s+"</span></td>{% if((m+1)%3==0){ %} </tr>{% } %} {% } %} </tbody></table>",g='<table class="daystable days{%= i==0 ? "left":"right"%}" style="display:{%=day ? "block":"none"%};"><thead><tr>{% for(var w=0;w<lang.weeks.length;w++){ %} <th>{%=lang.weeks[w]%}</th> {% } %}</tr></thead><tbody><tr>{% for(var d=0;d<=41;d++){ %}<td class="{%=daylist[i][d].style%}" ymd="{%=daylist[i][d].ymd%}" @on="daysClick({%=daylist[i][d].ymd%})">{%=daylist[i][d].day%}</td>{% if((d+1)%7==0){ %} </tr>{% } %} {% } %} </tbody></table>',m='<div class="jedate-time">{% for(var h=0;h<timelist.length;h++){ %}<div class="timepane"><div class="timecontent"><div class="hmslist">{% for(var t=0;t<timelist[h].length;t++){ %}{%if (timelist[h][t].length) {%}<div class="hmsauto"><ul>{% for(var s=0;s<timelist[h][t].length;s++){ %}<li class="{%=timelist[h][t][s].style%}" @on="hmsClick({%= h %},{%= h>0?3+t:t %})">{%= timelist[h][t][s].hms < 10 ? "0" + timelist[h][t][s].hms :timelist[h][t][s].hms %}</li>{% } %}</ul></div>{% }} %}</div></div></div>{% } %}</div>',v=t.shortcut.length>0?"{% for(var s=0;s<shortcut.length;s++){ %}<p @on=shortClick({%= shortcut[s].val %})>{%=shortcut[s].name%}</p>{% } %}":"",b=function(){var t="";return 1==e.dlen?t='<span class="ymbtn">{%=yearlist[i][0].y%}'+a+" ~ {%=yearlist[i][yearlist[i].length-1].y%}"+a+"</span>":2==e.dlen?t='<span class="ymbtn" @on="yearShow({%=yearlist[0][i].y%})">{%=yearlist[0][i].y%}'+a+"</span>":e.dlen>2&&e.dlen<=6&&(t='<span class="ymbtn" @on="monthShow({%=daytit[i].MM%})">{%=daytit[i].MM%}'+s+'</span><span class="ymbtn" @on="yearShow({%=daytit[i].YYYY%})">{%=daytit[i].YYYY%}'+a+"</span>"),t}(),_=function(){var t="";return 1==e.dlen?t=n?[c+u]:[c,u]:2==e.dlen?t=n?[c+u]:[c,u]:e.dlen>2&&e.dlen<=6?t=n?[c+d+f+u]:[c+d,f+u]:7==e.dlen&&(t=""),t}();1==e.dlen?r=p:2==e.dlen?r=p+h:3==e.dlen?r=p+h+g:e.dlen>3&&e.dlen<=6?(r=p+h+g,i=m):7==e.dlen&&(i=m);return'<div class="jedate-menu" style="display:{%=shortcut.length>0 ? "block":"none"%};">'+v+'</div><div class="jedate-wrap">{% for(var i=0;i<pane;i++){ %}<div class="jedate-pane"><div class="jedate-header">{% if(i==0){ %}'+_[0]+"{% }else{ %}"+_[1]+"{% } %}"+b+'</div><div class="jedate-content{%= i==1?" bordge":"" %}">'+r+"</div></div>{% } %}</div>"+i+'<div class="jedate-footbtn"><div class="btnscon">{% if(today){ %}<i class="today text-stress" @on="nowBtn">{%=lang.today%}</i>{% } %}</div></div><div class="jedate-tips"></div>'},compileBindNode:function(e){var t=this,n=function(e){var t=/\(.*\)/.exec(e);return t?(t=t[0],e=e.replace(t,""),t=t.replace(/[\(\)\'\"]/g,"").split(",")):t=[],[e,t]};jet.each(e.childNodes,function(e,r){if(1===r.nodeType){t.$opts.festival||r.removeAttribute("ymd"),t.compileBindNode(r);var i=r.getAttribute("@on");if(null!=i){var o=n(i);jet.on(r,"click",function(){t[o[0]]&&t[o[0]].apply(r,o[1])}),r.removeAttribute("@on")}}})},methodEventBind:function methodEventBind(){var that=this,opts=that.$opts,multi=opts.multiPane,DTS=that.$data,result=(new DateTime).reDate(),dateY=result.GetYear(),dateM=result.GetMonth(),dateD=result.GetDate(),range=opts.range,elCell=that.dateCell;jet.extend(that,{yearBtn:function(e,t){var n=t.split("#"),r=(jet.reMatch(n[0]),that.selectTime),i=[jet.extend({YYYY:parseInt(t),MM:dateM,DD:dateD},r[0]),{}],o=that.parseValue([i[0]],that.format);that.storeData(i[0],i[1]),that.renderDate(),opts.toggle&&opts.toggle({elem:that.valCell,val:o,date:i[0]})},yearShow:function(e){return},monthBtn:function(e,t){var n,r,i=jet.reMatch(t),o=that.selectTime,a=[],s=parseInt(i[0]),l=parseInt(i[1]);if(range)"mprev"==e?(n=jet.prevMonth(s,l),r=jet.nextMonth(n.y,n.m)):(r=jet.nextMonth(s,l),n=jet.prevMonth(r.y,r.m)),a=[jet.extend({YYYY:n.y,MM:n.m,DD:dateD},o[0]),{YYYY:r.y,MM:r.m,DD:dateD}];else{var c="mprev"==e?jet.prevMonth(s,l):jet.nextMonth(s,l);a=[jet.extend({YYYY:c.y,MM:c.m,DD:dateD},o[0]),{}]}var u=that.parseValue([a[0]],that.format);that.storeData(a[0],a[1]),that.renderDate(),opts.toggle&&opts.toggle({elem:that.valCell,val:u,date:a[0]})},monthShow:function(e){return},shortClick:function shortClick(val){var reval=val.replace(/\#/g,","),evobj=eval("("+reval+")"),gval=jet.getDateTime(evobj),tmval=that.selectTime;if(that.selectValue=[jet.parse(gval,"YYYY-MM-DD")],that.selectDate=[{YYYY:gval.YYYY,MM:gval.MM,DD:gval.DD}],that.selectTime=[{hh:gval.hh,mm:gval.mm,ss:gval.ss}],tmval=that.selectTime,opts.onClose){var nYM=jet.nextMonth(gval.YYYY,gval.MM),ymarr=[{YYYY:gval.YYYY,MM:gval.MM,DD:gval.DD},{YYYY:nYM.y,MM:nYM.m,DD:null}];that.storeData(jet.extend(ymarr[0],tmval[0]),jet.extend(ymarr[1],tmval[1])),that.renderDate()}else that.setValue(gval,that.format),that.closeDate()},yearClick:function(e){if(!jet.hasClass(this,"disabled")){var t="",n=that.dlen;if(range&&1==n){var r=that.selectValue.length;if(that.selectDate=2==r?[{YYYY:parseInt(e),MM:dateM}]:[{YYYY:that.selectDate[0].YYYY,MM:that.selectDate[0].MM},{YYYY:parseInt(e),MM:dateM}],that.selectValue=2==r?[e+"-"+jet.digit(dateM)]:[that.selectValue[0],e+"-"+jet.digit(dateM)],2==that.selectValue.length){var i=[that.selectValue[0],that.selectValue[1]],o=[{},{}];i.sort(function(e,t){return e>t?1:-1}),that.selectValue=i,jet.each(i,function(e,t){jet.each(jet.reMatch(t),function(t,n){o[e][ymdzArr[t]]=n})}),that.selectDate=o}}else n>1&&n<=6?t=parseInt(e):(that.selectValue=[e+"-"+jet.digit(dateM)],that.selectDate=[{YYYY:parseInt(e),MM:dateM}]);DTS.year=1==n,DTS.month=n<3,DTS.day=n>2&&n<=6;var a=n>1&&n<=6?t:parseInt(that.selectDate[0].YYYY);that.storeData(jet.extend({YYYY:a,MM:dateM,DD:dateD},that.selectTime[0]),{}),that.renderDate()}},monthClick:function(e){if(!jet.hasClass(this,"disabled")){var t=jet.reMatch(e),n=[{},{}],r=that.selectValue.length;if(range){if(that.selectDate=2==r?[{YYYY:t[0],MM:t[1]}]:[{YYYY:that.selectDate[0].YYYY,MM:that.selectDate[0].MM},{YYYY:parseInt(e),MM:t[1]}],that.selectValue=2==r?[e]:[that.selectValue[0],e],2==that.selectValue.length){var i=[that.selectValue[0],that.selectValue[1]];i.sort(function(e,t){return e>t?1:-1}),that.selectValue=i,jet.each(i,function(e,t){jet.each(jet.reMatch(t),function(t,r){n[e][ymdzArr[t]]=r})}),that.selectDate=n}}else that.selectValue=[e],that.selectDate=[{YYYY:t[0],MM:t[1]}];that.dlen>2&&(DTS.year=!1,DTS.month=!1),DTS.day=that.dlen>2&&that.dlen<=6,that.storeData(jet.extend({YYYY:parseInt(that.selectDate[0].YYYY),MM:parseInt(that.selectDate[0].MM),DD:dateD},that.selectTime[0]),{}),that.renderDate()}},daysClick:function(e){if(!jet.hasClass(this,"disabled")){var t,n,r=that.selectTime,i=jet.reMatch(e),o=that.selectValue.length,a="",s=[{},{}];if(range){if(1==o){var l=[that.selectValue[0],e];l.sort(function(e,t){return e>t?1:-1}),that.selectValue=l,jet.each(l,function(e,t){jet.each(jet.reMatch(t),function(t,n){s[e][ymdzArr[t]]=n})}),that.selectDate=s}else that.selectValue=[e],s=[{YYYY:i[0],MM:i[1],DD:i[2]}],that.selectDate=[{YYYY:i[0],MM:i[1],DD:i[2]},{}];t=jet.nextMonth(s[0].YYYY,s[0].MM),n=[{YYYY:s[0].YYYY,MM:s[0].MM,DD:s[0].DD},{YYYY:t.y,MM:t.m,DD:null}],that.storeData(jet.extend(n[0],r[0]),jet.extend(n[1],r[1])),that.renderDate()}else that.selectValue=[e],that.selectDate=[{YYYY:i[0],MM:i[1],DD:i[2]},{YYYY:i[0],MM:i[1],DD:i[2]}],jet.each(new Array(0==range?1:2),function(e){jet.each(i,function(t,n){s[e][ymdzArr[t]]=n}),jet.extend(s[e],r[e])}),opts.onClose?(that.storeData(jet.extend(s[0],r[0]),jet.extend(s[1],r[1])),that.renderDate()):(a=that.setValue(s,that.format),that.closeDate(),opts.donefun&&opts.donefun.call(that,{elem:that.valCell,val:a,date:s}))}},hmsClick:function(e,t){var n=parseInt(t),r=parseInt(jet.text(this)),i=parseInt(e),o="action",a=["hh","mm","ss"],s=$Q(".jedate-time",that.dateCell).querySelectorAll("ul")[n],l=that.$data.timelist[0].length;if(!jet.hasClass(this,"disabled")){jet.each(s.childNodes,function(e,t){var n=new RegExp("(^|\\s+)action(\\s+|$)","g");t.className=n.test(t.className)?t.className.replace(n,""):t.className}),that.selectTime[i][1==i?a[n-l]:a[n]]=r,this.className=this.className+o;s.querySelector("."+o);if(7==that.dlen&&0==e&&range&&!multi){var c=that.getValue({}),u=jet.nextMonth(c[0].YYYY,c[0].MM),d=that.selectTime;that.storeData({YYYY:c[0].YYYY,MM:c[0].MM,DD:null,hh:d[0].hh,mm:d[0].mm,ss:d[0].ss},{YYYY:u.y,MM:u.m,DD:null,hh:d[1].hh,mm:d[1].mm,ss:d[1].ss}),that.renderDate()}}},timeBtn:function(){var e=$Q(".jedate-time",elCell),t="none"==e.style.display;jet.text(this,t?opts.language.backtxt:opts.language.timetxt[0]),jet.setCss(e,{display:t?"block":"none"})},clearBtn:function(){jet.valText(that.valCell,""),that.selectDate=[jet.parse(jet.getDateTime({}),"YYYY-MM-DD hh:mm:ss")],that.closeDate(),opts.clearfun&&opts.clearfun.call(that)},nowBtn:function(){var e,t=jet.getDateTime({}),n=jet.nextMonth(t.YYYY,t.MM);that.selectDate=[t],e=opts.isShow?that.setValue([t],that.format,!0):jet.parse(t,that.format),opts.onClose&&range||!opts.isShow?(that.storeData(t,{YYYY:n.y,MM:n.m,DD:null,hh:0,mm:0,ss:0}),that.renderDate()):that.closeDate(),opts.donefun&&opts.donefun.call(that,{elem:that.valCell,val:e,date:t})},setDefaultDate:function(e){var t;e=jet.extend({YYYY:null,MM:null,DD:null,hh:0,mm:0,ss:0},e),t=jet.nextMonth(e.YYYY,e.MM),that.selectDate=[e],that.storeData(e,{YYYY:t.y,MM:t.m,DD:null,hh:0,mm:0,ss:0}),that.renderDate()},sureBtn:function(){var e=that.selectValue.length>1?[{},{}]:[{}],t="",n=that.selectTime,r=function(e){var t=void 0==e.hh?0:e.hh,n=void 0==e.mm?0:e.mm,r=void 0==e.ss?0:e.ss;return parseInt(jet.digit(t)+""+jet.digit(n)+jet.digit(r))};if(range){if(that.selectValue.length>1){var i=that.selectValue;i.sort(function(e,t){return e>t?1:-1}),jet.each(i,function(t,r){jet.each(jet.reMatch(r),function(n,r){e[t][ymdzArr[n]]=r}),jet.extend(e[t],n[t])})}else 7==that.dlen&&n.length>1&&(e=n);var o=r(n[0])>=r(n[1]),a=that.selectValue,s="";if(void 0!=a[1]&&(s=a[0].replace(/\-/g,"")==a[1].replace(/\-/g,"")),1==a.length&&that.dlen<7)return void that.tips("cn"==opts.language.name?"未选结束日期":"Please select the end date");if(7==that.dlen&&o||s&&o)return void that.tips("cn"==opts.language.name?"结束时间必须大于开始时间":"The end time must be greater than the start time")}else jet.each(new Array(0==range?1:2),function(t){7!=that.dlen&&jet.each(jet.reMatch(that.selectValue[0]),function(n,r){e[t][ymdzArr[n]]=r}),jet.extend(e[t],n[t])});t=that.setValue(e,that.format,!!opts.isShow),opts.isShow&&that.closeDate(),opts.donefun&&opts.donefun.call(that,{elem:that.valCell,val:t,date:e})},blankArea:function(){jet.on(document,"mouseup",function(e){jet.stopPropagation(e),that.closeDate()}),jet.on($Q(elx),"mouseup",function(e){jet.stopPropagation(e)})}})},eachYear:function(e,t){var n,r=this,i=(r.$opts,parseInt(e)),o=[],a="",s=r.selectDate,l=jet.reMatch(r.minDate),c=jet.reMatch(r.maxDate);n=1==t?i:r.yindex,r.yindex=1==t?12+i:12+r.yindex;for(var u=void 0==s[1]?"":s[1].YYYY;n<r.yindex;n++)a=n==s[0].YYYY||n==u?"action":n>s[0].YYYY&&n<u?"contain":n<l[0]||n>c[0]?"disabled":"",o.push({style:a,y:n});return o},eachMonth:function(e,t){var n=this,r=n.$opts,i=(r.range,[]),o=n.selectDate,a="",s=r.language.month,l=jet.reMatch(n.minDate),c=jet.reMatch(n.maxDate),u=parseInt(l[0]+""+jet.digit(l[1])),d=parseInt(c[0]+""+jet.digit(c[1])),f=parseInt(o[0].YYYY+""+jet.digit(o[0].MM)),p=o[1]?parseInt(o[1].YYYY+""+jet.digit(o[1].MM)):0;return jet.each(s,function(t,n){var r=parseInt(e+""+jet.digit(n));a=r==f||r==p?"action":r>f&&r<p?"contain":r<u||r>d?"disabled":"",i.push({style:a,y:e,m:n})}),i},eachDays:function(e,t,n,r){for(var i=this,o=0,a=[],s=i.$opts,l=(jet.isBool(s.multiPane),new Date(e,t-1,1).getDay()||7),c=(s.range,jet.getDaysNum(e,t)),u=i.selectDate,d=jet.prevMonth(e,t),f=(jet.isBool(s.isShow),jet.getDaysNum(e,d.m)),p=jet.nextMonth(e,t),h=(i.valCell,s.language),g=s.valiDate||[],m=jet.reMatch(i.minDate),v=parseInt(m[0]+""+jet.digit(m[1])+jet.digit(m[2])),b=jet.reMatch(i.maxDate),_=parseInt(b[0]+""+jet.digit(b[1])+jet.digit(b[2])),y=u[0]?parseInt(u[0].YYYY+""+jet.digit(u[0].MM)+jet.digit(u[0].DD)):"",w=u[1]?parseInt(u[1].YYYY+""+jet.digit(u[1].MM)+jet.digit(u[1].DD)):"",x=function(e,t,n){var r=s.marks;return jet.isType(r,"array")&&r.length>0&&function(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1}(r,e+"-"+jet.digit(t)+"-"+jet.digit(n))?'<i class="marks"></i>':""},k=function(e,t,n){var r="";if(1==s.festival&&"cn"==h.name){var i=jeLunar(e,t-1,n),o=i.solarFestival||i.lunarFestival;r='<p><span class="solar">'+n+'</span><span class="lunar">'+(""!=(o&&i.jieqi)?o:i.jieqi||i.showInLunar)+"</span></p>"}else r='<p class="nolunar">'+n+"</p>";return r},S=function(e,t,n,r){var i=parseInt(e+""+jet.digit(t)+jet.digit(n));if(r){if(i>=v&&i<=_)return!0}else if(v>i||_<i)return!0},C=function(e,t){if(g.length>0&&""!=g[0])if(/\%/g.test(g[0])){var n=g[0].replace(/\%/g,"").split(","),r=[];jet.each(n,function(e,t){r.push(jet.digit(parseInt(t)))});var o=0==function(e,t){for(var n in t)if(t[n]==e)return!0;return!1}(jet.digit(e),r);t=jet.isBool(g[1])?o?" disabled":t:o?t:" disabled"}else{var a=i.dateRegExp(g[0]),s=a.test(jet.digit(e));t=jet.isBool(g[1])?s?" disabled":t:s?t:" disabled"}return t},T=f-l+1;T<=f;T++,o++){var E=x(d.y,d.m,T),I=S(d.y,d.m,T,!1)?"disabled":"other";I=C(T,I),a.push({style:I,ymd:d.y+"-"+jet.digit(d.m)+"-"+jet.digit(T),day:k(d.y,d.m,T)+E})}for(var A=1;A<=c;A++,o++){var R=x(e,t,A),O="",L=parseInt(e+""+jet.digit(t)+jet.digit(A)),P=L>y,M=L<w;O=S(e,t,A,!0)?L==y||L==w?" action":P&&M?" contain":"":" disabled",O=C(A,O),a.push({style:"normal"+O,ymd:e+"-"+jet.digit(t)+"-"+jet.digit(A),day:k(e,t,A)+R})}for(var $=1,N=42-o;$<=N;$++){var D=x(p.y,p.m,$),F=S(p.y,p.m,$,!1)?"disabled":"other";F=C($,F),a.push({style:F,ymd:p.y+"-"+jet.digit(p.m)+"-"+jet.digit($),day:k(p.y,p.m,$)+D})}return a},eachTime:function(e,t){var n=this,r=n.$opts,i=r.range,o=r.multiPane,a=[],s=[],l=["hh","mm","ss"],c=[],u="",d=n.format,f=jet.trim(n.minDate).replace(/\s+/g," "),p=jet.trim(n.maxDate).replace(/\s+/g," "),h=f.split(" "),g=p.split(" ");return n.dlen>3&&/\:/.test(h)&&/\:/.test(g)&&(a=jet.reMatch(/\s/.test(f)&&n.dlen>3?h[1]:f),s=jet.reMatch(/\s/.test(p)&&n.dlen>3?g[1]:p)),jet.each([24,60,60],function(r,f){c[r]=[];var p=void 0==a[r]||0==a[r]?e[l[r]]:a[r],g=""==n.getValue()?p:e[l[r]];n.dlen>3&&/\:/.test(h)&&1==t&&(n.selectTime[0][l[r]]=g);for(var m=0;m<f;m++){var v=new RegExp(l[r],"g").test(d);v&&(u=m==g?v?"action":"disabled":!v||!i&&o&&(m<a[r]||m>s[r])?"disabled":o?"":1==t&&m<a[r]||2==t&&m>s[r]?"disabled":"",c[r].push({style:u,hms:m}))}}),c},closeDate:function(){var e=$Q(elx),t=$Q("#jedatetipscon");e&&document.body.removeChild(e),t&&document.body.removeChild(t),this.setDatas()},parseValue:function(e,t){var n=this,r=[],i=n.$opts,o=i.range;return jet.each(e,function(e,n){r.push(jet.parse(n,t))}),0==o?r[0]:r.join(o)},dateRegExp:function dateRegExp(valArr){var enval=valArr.split(",")||[],regs="",doExp=function doExp(val){var arr,tmpEval,regs=/#?\{(.*?)\}/;for(val+="";null!=(arr=regs.exec(val));)arr.lastIndex=arr.index+arr[1].length+arr[0].length-arr[1].length-1,tmpEval=parseInt(eval(arr[1])),tmpEval<0&&(tmpEval="9700"+-tmpEval),val=val.substring(0,arr.index)+tmpEval+val.substring(arr.lastIndex+1);return val};if(enval&&enval.length>0){for(var i=0;i<enval.length;i++)regs+=doExp(enval[i]),i!=enval.length-1&&(regs+="|");regs=regs?new RegExp("(?:"+regs+")"):null}else regs=null;return regs},showFestival:function(){var e=this,t=e.$opts;jet.each(e.dateCell.querySelectorAll(".daystable td"),function(n,r){var i=jet.reMatch(jet.attr(r,"ymd")),o=document.createElement("div");r.removeAttribute("ymd"),jet.on(r,"mouseover",function(){var n=new jeLunar(i[0],i[1]-1,i[2]);if(!$Q("#jedatetipscon")){o.id=o.className="jedatetipscon";var r="<p>"+n.solarYear+"年"+n.solarMonth+"月"+n.solarDate+"日 "+n.inWeekDays+'</p><p class="red">农历：'+n.shengxiao+"年 "+n.lnongMonth+"月"+n.lnongDate+"</p><p>"+n.ganzhiYear+"年 "+n.ganzhiMonth+"月 "+n.ganzhiDate+"日</p>",a=""!=(n.solarFestival||n.lunarFestival)?'<p class="red">节日：'+n.solarFestival+n.lunarFestival+"</p>":"",s=""!=n.jieqi?'<p class="red">'+(""!=n.jieqi?"节气："+n.jieqi:"")+"</p>":"",l=""!=(n.solarFestival||n.lunarFestival||n.jieqi)?a+s:"";jet.html(o,r+l),document.body.appendChild(o);var c=e.lunarOrien(o,this);jet.setCss(o,{zIndex:void 0==t.zIndex?10005:t.zIndex+5,top:c.top,left:c.left,position:"absolute",display:"block"})}}),jet.on(r,"mouseout",function(){document.body.removeChild($Q("#jedatetipscon"))})}),1!==e.dateCell.nodeType||jet.hasClass(e.dateCell,"grid")||(e.dateCell.className=e.dateCell.className+" grid")},lunarOrien:function(e,t,n){var r,i,o,a,s=t.getBoundingClientRect(),l=e.offsetWidth,c=e.offsetHeight;return i=s.right+l/1.5>=jet.docArea(!0)?s.right-l:s.left+(n?0:jet.docScroll(!0)),r=s.bottom+c/1<=jet.docArea()?s.bottom-1:s.top>c/1.5?s.top-c-1:jet.docArea()-c,i+l>jet.docArea(!0)&&(i=s.left-(l-s.width)),o=Math.max(r+(n?0:jet.docScroll())+1,1)+"px",a=i+"px",{top:o,left:a}},dateOrien:function(e,t,n){var r,i,o,a,s=this,l=s.$opts.fixed?t.getBoundingClientRect():e.getBoundingClientRect(),i=l.left,r=l.bottom;if(s.$opts.fixed){var c=e.offsetWidth,u=e.offsetHeight;i+c>jet.docArea(!0)&&(i-=c-l.width),r+u>jet.docArea()&&(r=l.top>u?l.top-u-2:jet.docArea()-u-1),o=Math.max(r+(n?0:jet.docScroll())+1,1)+"px",a=i+"px"}else o="50%",a="50%",e.style.cssText="marginTop:"+-l.height/2+";marginLeft:"+-l.width/2;jet.setCss(e,{top:o,left:a})},tips:function(e,t){var n,r=this,i=$Q(".jedate-tips",r.dateCell);jet.html(i,e||""),jet.setCss(i,{display:"block"}),clearTimeout(n),n=setTimeout(function(){jet.html(i,""),jet.setCss(i,{display:"none"})},1e3*(t||2.5))},locateScroll:function(){var e=this,t=$Q(".jedate-time",e.dateCell).querySelectorAll("ul");jet.each(t,function(e,t){var n=t.querySelector(".action");t.scrollTop=n?n.offsetTop-103:0})}}),jeDate})},function(e,t,n){t=e.exports=n(19)(!1),t.i(n(25),""),t.i(n(652),""),t.push([e.i,"h2 {\n  margin: 0;\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 1.5;\n  padding: 10px 15px 5px;\n  color: #262d3d;\n}\n.icon {\n  display: inline-block;\n  width: 16px;\n  overflow: hidden;\n  color: #a1abc2;\n}\n.icon svg {\n  width: 100%;\n}\n.icon.green:hover {\n  color: #01c480;\n}\na:hover .icon,\n.icon:hover {\n  color: #8490ae;\n}\n.drop {\n  overflow: hidden;\n  position: relative;\n  padding-right: 12px;\n}\n.drop .arrow {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 8px;\n  margin-left: 3px;\n}\n.icon.is-on,\n.text-stress {\n  color: #262d3d;\n}\n.text-hint {\n  color: #d4d8e1;\n}\n.green {\n  color: #00d48a;\n  border-color: #00d48a;\n}\n.red {\n  color: #f75559;\n}\n.blue {\n  color: #4a70ff;\n}\n.orange {\n  color: #ff8345;\n}\n.is-calling {\n  color: #a1abc2;\n}\n.is-calling h2 {\n  color: #f8f9fB;\n}\n.is-calling::-webkit-scrollbar-thumb,\n.is-calling ::-webkit-scrollbar-thumb {\n  background-color: #696c7c;\n}\n.is-calling::-webkit-scrollbar-thumb:hover,\n.is-calling ::-webkit-scrollbar-thumb:hover {\n  background-color: #50535f;\n}\n.is-calling .is-loading {\n  border: 2px solid #fff;\n  border-bottom-color: transparent;\n}\n.is-calling .text {\n  color: #a1abc2;\n}\n.is-calling .icon.is-on,\n.is-calling .text-stress {\n  color: #f8f9fB;\n}\n.is-calling .green {\n  color: #00cb83;\n  border-color: #00cb83;\n}\n.is-calling .red {\n  color: #e1464a;\n}\n.is-calling .blue {\n  color: #6283ff;\n}\n.is-calling.bg-main,\n.is-calling .bg-main {\n  background-position: 100% 50%;\n}\n.is-calling .bg-gap {\n  background-position: 100% 50%;\n}\n.is-calling .ck {\n  color: #f8f9fB;\n}\n.is-calling textarea,\n.is-calling input,\n.is-calling select,\n.is-calling .select,\n.is-calling .select .options {\n  border-color: #4a5264;\n  color: #f8f9fB;\n  background-color: #25283a;\n}\n.is-calling textarea:focus,\n.is-calling input:focus,\n.is-calling select:focus,\n.is-calling .select:focus,\n.is-calling .select .options:focus {\n  border-color: #8d96aa;\n}\n.is-calling textarea::placeholder,\n.is-calling input::placeholder,\n.is-calling select::placeholder,\n.is-calling .select::placeholder,\n.is-calling .select .options::placeholder {\n  color: #a1abc2;\n}\n.is-calling .select .options p:hover,\n.is-calling .select .options .selected {\n  background-color: #383a4a;\n}\n.is-calling .close {\n  color: #78849e;\n}\n.is-calling .close:hover {\n  color: #fff;\n}\n.is-calling input[type=checkbox] {\n  cursor: pointer;\n  position: relative;\n}\n.is-calling input[type=checkbox]::after {\n  position: absolute;\n  top: 0;\n  background-color: #1e2030;\n  color: #fff;\n  width: 14px;\n  height: 14px;\n  display: inline-block;\n  visibility: visible;\n  padding-left: 0px;\n  text-align: center;\n  content: ' ';\n  border-radius: 2px;\n  box-sizing: border-box;\n  border: 1px solid #4A5264;\n}\n.is-calling input[type=checkbox]:checked::after {\n  content: \"\";\n  border-color: #4A70FF;\n  background-color: #4A70FF;\n}\n.is-calling input[type=checkbox]:checked::before {\n  content: '';\n  position: absolute;\n  top: 1px;\n  left: 5px;\n  width: 3px;\n  height: 8px;\n  border: solid white;\n  border-width: 0 2px 2px 0;\n  transform: rotate(45deg);\n  z-index: 1;\n}\n.close {\n  position: absolute;\n  right: 0px;\n  top: 0px;\n  padding: 8px;\n  color: #a8abb3;\n}\n.close:hover {\n  color: #1e2300;\n}\n.close svg {\n  width: 14px;\n  height: 14px;\n}\n.bg-main {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #fff, #fff, #25283a, #25283a) left / cover;\n}\n.bg-gap {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #f4f7fb, #f4f7fb, #101328, #101328) left / cover;\n}\n.bgEaseIn {\n  background-position: 100% 50%;\n}\n.bgEaseOut {\n  background-position: 0% 50%;\n}\n.bg-main,\n.bg-gap {\n  background-size: 800% 800%;\n  animation-fill-mode: both;\n}\n@keyframes bgEaseIn {\n  0% {\n    background-position: 0% 50%;\n  }\n  100% {\n    background-position: 100% 50%;\n  }\n}\n@keyframes bgEaseOut {\n  0% {\n    background-position: 100% 50%;\n  }\n  100% {\n    background-position: 0% 50%;\n  }\n}\nbody {\n  margin: 0;\n  overflow: hidden;\n  font-size: 12px;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  color: #a1abc2;\n}\np {\n  margin: 0;\n}\ntextarea::placeholder,\ninput::placeholder {\n  color: #A1ABC2;\n}\n::-webkit-scrollbar {\n  width: 4px;\n  height: 8px;\n}\n::-webkit-scrollbar-thumb {\n  background-color: #f3f5fa;\n  border-radius: 8px;\n}\n::-webkit-scrollbar-thumb:hover {\n  background-color: #aaa;\n}\n::-webkit-scrollbar-track-piece {\n  background-color: transparent;\n}\nsvg {\n  fill: currentColor;\n}\na {\n  text-decoration: none;\n}\nul,\nli {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n.ck {\n  width: 9px;\n  height: 9px;\n  color: #262d3d;\n  position: absolute;\n  top: 50%;\n  right: 10px;\n  transform: translateY(-50%);\n  display: none;\n}\n.is-selected .ck {\n  display: inline-block;\n}\ninput,\ntextarea,\nselect,\n.select,\n.select .options {\n  font-size: 12px;\n  color: #262d3d;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  border-radius: 3px;\n  border: 1px solid #e1e6f0;\n  background-color: #fff;\n}\ninput:focus,\ntextarea:focus,\nselect:focus,\n.select:focus,\n.select .options:focus {\n  outline: 0;\n  border-color: #c5ccdb;\n}\nselect,\n.select,\n.select .options p {\n  padding: 0 5px;\n}\n.select {\n  min-height: 26px;\n  position: relative;\n  cursor: default;\n}\n.select .options {\n  position: absolute;\n  z-index: 1;\n  left: -1px;\n  top: 29px;\n  width: 100%;\n  max-height: 73px;\n  overflow: auto;\n}\n.select .options p:hover,\n.select .options p.selected {\n  background: #f1f5fb;\n}\n.select p {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.cls:after {\n  content: \"\";\n  font-size: 0;\n  display: block;\n  height: 0;\n  clear: both;\n  visibility: hidden;\n}\n.disabled {\n  pointer-events: none;\n  opacity: .3;\n}\n.hidden {\n  display: none!important;\n}\n.overlay {\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  background: rgba(255, 255, 255, 0.6);\n}\ninput::-webkit-outer-spin-button,\ninput::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n}\ninput[type=\"number\"] {\n  -moz-appearance: textfield;\n}\n.is-loading {\n  border-radius: 100%;\n  margin: 2px;\n  border: 2px solid #ccc;\n  border-bottom-color: transparent;\n  height: 12px;\n  width: 12px;\n  margin-top: -7px;\n  background: 0 0!important;\n  display: inline-block;\n  -webkit-animation: rotate .75s 0s linear infinite;\n  animation: rotate .75s 0s linear infinite;\n}\n@keyframes rotate {\n  0% {\n    -webkit-transform: rotate(0);\n    transform: rotate(0);\n  }\n  50% {\n    -webkit-transform: rotate(180deg);\n    transform: rotate(180deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n.marquee {\n  white-space: nowrap;\n  overflow: hidden;\n  width: 80px;\n  position: relative;\n}\n.marquee p {\n  overflow: hidden;\n  float: left;\n  animation: move linear 6s infinite;\n}\n.marquee span {\n  display: inline-block;\n  padding-left: 10px;\n}\n.marquee::before,\n.marquee::after {\n  position: absolute;\n  top: 0;\n  z-index: 1;\n  content: ' ';\n  width: 10px;\n  height: 100%;\n  animation: bgfadeIn linear 2s;\n}\n.marquee::before {\n  left: -2px;\n  background: linear-gradient(90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n.marquee::after {\n  right: -2px;\n  background: linear-gradient(-90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n@keyframes move {\n  0% {\n    transform: translateX(0);\n  }\n  100% {\n    transform: translateX(-50%);\n  }\n}\n.q-notice {\n  position: absolute;\n  width: 100%;\n  left: 0;\n  top: 0;\n  text-align: center;\n}\n.q-notice.is-auto {\n  pointer-events: none;\n  z-index: 10;\n}\n.q-notice.is-cover {\n  height: 100%;\n  background: rgba(255, 255, 255, 0.7);\n}\n.q-notice .item {\n  margin: 4px auto;\n}\n.q-notice .info {\n  pointer-events: initial;\n  min-width: 170px;\n  padding: 0 15px;\n  line-height: 29px;\n  height: 28px;\n  overflow: hidden;\n  white-space: nowrap;\n  display: inline-block;\n  color: rgba(255, 255, 255, 0.8);\n  background-color: #25283a;\n  box-shadow: 0px 2px 18px 2px rgba(172, 172, 172, 0.3);\n  border-radius: 2px;\n  position: relative;\n}\n.q-notice .info .icon-tip {\n  vertical-align: -3px;\n  margin-right: 2px;\n  width: 14px;\n}\n.q-notice .info [data-action] * {\n  pointer-events: none;\n}\n.q-notice .is-error .info {\n  color: #fff;\n  background-color: #f75559;\n}\n.q-notice .is-success .info {\n  color: #fff;\n  background-color: #00cb83;\n}\n.q-notice .is-close-able .info {\n  text-align: left;\n}\n.q-notice .is-close-able .btn-close {\n  width: 12px;\n  height: 12px;\n  color: #fff;\n  margin: 8px -5px 0 10px;\n  float: right;\n}\n.q-notice .is-close-able .btn-close:hover {\n  opacity: .8;\n}\n.q-notice .is-warning .info {\n  color: rgba(0, 1, 10, 0.93);\n  border: 0.5px solid #FFEBDA;\n  background-color: #FFF8F0;\n  box-shadow: 0px 16px 32px rgba(18, 19, 25, 0.16), 0px 0px 8px rgba(18, 19, 25, 0.08), 0px 0px 1px rgba(18, 19, 25, 0.08);\n}\n.ringing {\n  animation: ringing 2s ease;\n  animation-fill-mode: both;\n  animation-iteration-count: infinite;\n}\n@keyframes ringing {\n  10% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  15% {\n    -webkit-transform: rotate(-15deg);\n    transform: rotate(-15deg);\n  }\n  20% {\n    -webkit-transform: rotate(15deg);\n    transform: rotate(15deg);\n  }\n  25% {\n    -webkit-transform: rotate(-10deg);\n    transform: rotate(-10deg);\n    color: #2af2ac;\n  }\n  30% {\n    -webkit-transform: rotate(5deg);\n    transform: rotate(5deg);\n    color: #2af2ac;\n  }\n  35% {\n    -webkit-transform: rotate(-5deg);\n    transform: rotate(-5deg);\n  }\n  40% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n}\n.ctimer {\n  border-radius: 50%;\n  height: 40px;\n  overflow: hidden;\n  position: relative;\n  width: 40px;\n  background: rgba(255, 255, 255, 0.3);\n}\n.ctimer svg {\n  position: absolute;\n  left: 0;\n  z-index: 2;\n}\n.ctimer .hand {\n  position: absolute;\n  top: 0;\n  height: 100%;\n  overflow: hidden;\n  width: 50%;\n}\n.ctimer .hand span {\n  border: 20px solid rgba(255, 255, 255, 0.3);\n  border-bottom-color: transparent;\n  border-left-color: transparent;\n  border-radius: 50%;\n  display: block;\n  height: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  transform: rotate(225deg);\n  width: 0;\n}\n.ctimer .hand-left {\n  left: 0;\n  transform: rotate(180deg);\n}\n.ctimer .hand-right {\n  right: 0;\n}\n.ctimer .hand span {\n  animation-duration: var(--post-edit-time);\n  animation-iteration-count: 1;\n  animation-timing-function: linear;\n  animation-fill-mode: both;\n}\n.ctimer .hand-left span {\n  animation-name: spinleft;\n}\n.ctimer .hand-right span {\n  animation-name: spinright;\n}\n@keyframes spinleft {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(225deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\n@keyframes spinright {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(405deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\n.datepicker-container .btn-action {\n  text-align: right;\n  position: absolute;\n  right: 10px;\n  bottom: 11px;\n}\n.datepicker-container .btn-action .view-all {\n  float: left;\n  margin-top: 12px;\n}\n.datepicker-container .btn-action .view-all:hover {\n  text-decoration: underline;\n}\n.datepicker-container .btn-save,\n.datepicker-container .btn-cancel {\n  display: inline-block;\n  width: 54px;\n  line-height: 19px;\n  height: 20px;\n  text-align: center;\n  margin: 0 auto;\n  border-radius: 2px;\n}\n.datepicker-container .btn-save {\n  color: #fff;\n  background-color: #4a70ff;\n  border: 1px solid #4a70ff;\n}\n.datepicker-container .btn-save:hover {\n  background-color: #6283ff;\n}\n.datepicker-container .btn-cancel {\n  color: #a1abc2;\n  border: 1px solid #e1e6f0;\n  background-color: #fff;\n  margin-left: 8px;\n}\n.datepicker-container .btn-cancel:hover {\n  background-color: #f4f7fb;\n}\n.datepicker-container .btn-save {\n  position: relative;\n}\n.datepicker-container .btn-save.saving {\n  text-indent: -20000px;\n}\n.datepicker-container .btn-save.saving::after {\n  content: ' ';\n  border-radius: 100%;\n  margin: 2px;\n  border: 2px solid #fff;\n  border-bottom-color: transparent;\n  height: 8px;\n  width: 8px;\n  margin: -5px 0 0 -4px;\n  background: 0 0!important;\n  display: inline-block;\n  -webkit-animation: rotate .75s 0s linear infinite;\n  animation: rotate .75s 0s linear infinite;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n}\n.datepicker-container .btn-save.disabled {\n  pointer-events: none;\n  opacity: .4;\n}\n.datepicker-container.is-calling h2 {\n  color: #f8f9fB;\n}\n.datepicker-container.is-calling .btn-save {\n  background-color: #6283ff;\n  border: 1px solid #6283ff;\n}\n.datepicker-container.is-calling .btn-save:hover {\n  background-color: #4a70ff;\n}\n.datepicker-container.is-calling .btn-cancel {\n  color: #fff;\n  border: 1px solid #4a5264;\n  background-color: #101328;\n}\n.datepicker-container.is-calling .btn-cancel:hover {\n  background-color: #383a4a;\n}\n.datepicker-container.is-calling .jedate {\n  color: #f8f9fB;\n}\n.datepicker-container.is-calling .jedate .jedate-content .daystable td.normal .nolunar,\n.datepicker-container.is-calling .jedate .jedate-content .daystable th {\n  color: #f8f9fB;\n}\n.datepicker-container.is-calling .jedate-content .daystable td.other .nolunar {\n  color: #6c7280;\n}\n.datepicker-container.is-calling .jedate .jedate-content .daystable td:hover p {\n  background-color: #383a4a;\n}\n.datepicker-container.is-calling .jedate .jedate-content .daystable td.action .nolunar {\n  background: #6283ff;\n}\n.datepicker-container.is-calling .jedate-time .hmslist div.hmsauto ul li:hover {\n  background-color: #383a4a;\n}\n.datepicker-container.is-calling .jedate .jedate-time .hmslist .hmsauto li.action,\n.datepicker-container.is-calling .jedate .jedate-time .hmslist .hmsauto li.action:hover {\n  background-color: #383a4a;\n  color: #f8f9fB;\n}\n.datepicker-container.is-calling .jedate-header {\n  color: #f8f9fB;\n}\n",""])},function(e,t,n){t=e.exports=n(19)(!1),t.push([e.i,'/**\r\n @Name : jeDate V6.5.0 日期控件\r\n @Author: chen guojun\r\n @QQ群：516754269\r\n @官网：http://www.jemui.com/ 或 https://github.com/singod/jeDate\r\n */\r\n.jedatefont {font-family:"jedatefont" !important;font-style:normal;-webkit-font-smoothing: antialiased;-moz-osx-font-smoothing: grayscale;}\r\n.jedate{height:auto; width: 100%; user-select: none; color: #262d3d;font-size:12px; cursor:default;margin: 0;padding: 0;overflow: hidden;position: relative;border-radius:4px;display: inline-block;}\r\n.jedate *{margin: 0;padding: 0;list-style-type:none;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;font-style:normal;}\r\n\r\n.jedate table thead,.jedate table td{border: 0;}\r\n.jedate ul,.jedate ol,.jedate li,.jedate dl{list-style-type:none;font-style:normal;font-weight: 300;}\r\n\r\n.jedate .icon{width: 11px; height: 11px;}\r\n.jedate .yearprev{left:5px;font-size: 14px;}\r\n.jedate .monthprev{left:30px;font-size: 14px;}\r\n.jedate .yearnext{right:5px;font-size: 14px;transform: rotate(180deg);}\r\n.jedate .monthnext{right:30px;font-size: 14px;transform: rotate(180deg);}\r\n.jedate .jedate-tips{position: absolute; top: 40%; left: 50%;z-index: 800; width: 200px; margin-left: -100px; line-height: 20px; padding: 15px; text-align: center; font-size: 12px; color: #ff0000;background-color: #FFFEF4;border: 1px rgb(247, 206, 57) solid;display: none;}\r\n.jedate .jedate-hmsmask{width:100%;display: block;background-color: rgba(0,0,0,.7);position: absolute;top: 0;left:0;right:0;bottom: 36px;z-index: 100;}\r\n.jedatetipscon{color:#333; float:left; overflow:hidden;background-color: #FFFEF4; line-height:22px;padding:6px;border: 1px rgb(247, 206, 57) solid;font-style:normal;font-size:12px;font-weight: 300;}\r\n.jedatetipscon p{padding: 0;margin: 0;font-size:12px;}\r\n.jedatetipscon p.red{color: #ff0000;}\r\n\r\n.jedate.leftmenu{padding-left: 90px;}\r\n.jedate .jedate-menu{width:90px;position: absolute;top: 0;left:0;bottom: 0;z-index: 10;background: #f2f2f2;border-right: 1px solid #efefef;border-radius: 4px 0 0 4px;overflow:auto;display: block;padding:4px 0;}\r\n.jedate .jedate-menu p{height: 30px;line-height: 30px;padding-left: 8px;overflow:hidden;font-size: 12px;cursor: pointer;}\r\n.jedate .jedate-menu p:hover{background-color: #00A680;color:#FFFFFF;}\r\n.jedate .jedate-wrap{min-width:230px;overflow: hidden;}\r\n.jedate .jedate-pane{width: 230px;float: left;overflow: hidden;}\r\n.jedate .jedate-header{width:100%;height:36px;line-height: 36px;float: left;background-color: #f2f2f2;text-align: center;font-size: 14px;padding: 0 50px;position: relative;}\r\n.jedate .jedate-header em{\r\n    width: 25px;\r\n    padding: 5px;\r\n    line-height: 36px;\r\n    position: absolute;\r\n    color: #666;\r\n    top: 7px;\r\n    background-repeat: no-repeat;\r\n    background-position: center center;\r\n    cursor: pointer;\r\n}\r\n.jedate .jedate-header .ymbtn{padding: 8px;border-radius: 4px;font-size: 14px;}\r\n/* .jedate .jedate-header em:hover,.jedate .jedate-header .ymbtn:hover{color: #00A680;} */\r\n.jedate .jedate-content{width:100%;height: 220px;float: left;padding: 5px;overflow: hidden;}\r\n.jedate .jedate-content.bordge{border-left: 1px #e9e9e9 solid;}\r\n.jedate .jedate-content .yeartable,.jedate .jedate-content .monthtable{width: 100%;border-collapse: collapse;border-spacing: 0;border: 1px solid #fff;}\r\n.jedate .jedate-content .yeartable td,.jedate .jedate-content .monthtable td{width:73px;height: 51px;line-height: 51px;text-align:center; position:relative; overflow:hidden;font-size: 14px;}\r\n.jedate .jedate-content .yeartable td span,.jedate .jedate-content .monthtable td span{padding: 8px 10px;border: 1px solid #fff;}\r\n.jedate .jedate-content .yeartable td.action span,.jedate .jedate-content .monthtable td.action span,\r\n.jedate .jedate-content .yeartable td.action span:hover,.jedate .jedate-content .monthtable td.action span:hover{background-color:#00A680;border:1px #00A680 solid;color:#fff;}\r\n.jedate .jedate-content .yeartable td span:hover,.jedate .jedate-content .monthtable td span:hover{background-color:#f2f2f2;border: 1px #f2f2f2 solid;}\r\n.jedate .jedate-content .yeartable td.disabled span,.jedate .jedate-content .monthtable td.disabled span,\r\n.jedate .jedate-content .yeartable td.disabled span:hover,.jedate .jedate-content .monthtable td.disabled span:hover{color:#bbb;border: 1px solid #fff;}\r\n.jedate .jedate-content .yeartable td.contain span,.jedate .jedate-content .monthtable td.contain span,\r\n.jedate .jedate-content .yeartable td.contain span:hover,.jedate .jedate-content .monthtable td.contain span:hover{background-color: #D0F0E3;border:1px #D0F0E3 solid;}\r\n\r\n.jedate.grid .daystable thead,.jedate.grid .daystable td{border: 0;}\r\n.jedate .jedate-content .daystable{width: 100%;border-collapse: collapse;border-spacing: 0;border: 0;}\r\n.jedate .jedate-content .daystable thead{}\r\n.jedate .jedate-content .daystable th{width:31px;height:27px;  text-align:center; position:relative; overflow:hidden;font-size: 13px;font-weight: 500; color:#262d3d; }\r\n.jedate .jedate-content .daystable td{width:31px;height:30px;  text-align:center; position:relative; overflow:hidden;font-size: 13px;}\r\n.jedate .jedate-content .daystable td .nolunar{line-height:29px;font-size: 13px;}\r\n.jedate .jedate-content .daystable td .solar{height:14px;line-height:14px;font-size: 13px;padding-top: 2px;display: block;}\r\n.jedate .jedate-content .daystable td .lunar{height:15px;line-height:15px;font-size: 13px;overflow:hidden;display: block;color: #888;transform: scale(.95);}\r\n.jedate .jedate-content .daystable td.normal .nolunar{color:#262d3d;}\r\n.jedate .jedate-content .daystable td.action .nolunar,.jedate .jedate-content .daystable td.action:hover .nolunar,\r\n.jedate .jedate-content .daystable td.action .lunar{background-color: #4a70ff;color:#fff; border-radius: 3px; line-height: 25px; width: 25px; margin: 0 auto;}\r\n.jedate .jedate-content .daystable td.other,.jedate .jedate-content .daystable td.other .nolunar,.jedate .jedate-content .daystable td.other .lunar{color: #262d3d;}\r\n.jedate .jedate-content .daystable td.disabled,.jedate .jedate-content .daystable td.disabled .nolunar,.jedate .jedate-content .daystable td.disabled .lunar{ color:#c5ccdb;}\r\n.jedate .jedate-content .daystable td.contain,.jedate .jedate-content .daystable td.contain:hover{background-color: #00DDAA;color:#fff;}\r\n.jedate .jedate-content .daystable td.disabled:hover{}\r\n.jedate .jedate-content .daystable td:hover p{background-color:#f2f2f2; border-radius: 3px; line-height: 25px; width: 25px; margin: 0 auto;}\r\n.jedate .jedate-content .daystable td.red{ color:#ff0000;}\r\n.jedate .jedate-content .daystable td .marks{ width:5px; height:5px; background-color:#ff0000; -webkit-border-radius:50%;border-radius:50%; position:absolute; right:2px; top:4px;}\r\n.jedate .jedate-content .daystable td.action .marks{ width:5px; height:5px;  -webkit-border-radius:50%;border-radius:50%; position:absolute; right:2px; top:4px;}\r\n\r\n.jedate .jedate-time{overflow: hidden;padding-bottom: 4px; position: absolute;top:10px; right: 0; bottom: 45px; z-index: 150;}\r\n.jedate .jedate-time .timepane{width:140px;float:left;}\r\n.jedate .jedate-time .timeheader{width: 100%;float:left;height: 36px;line-height: 36px;background-color: #f2f2f2;text-align: center;font-size: 14px;position: relative;}\r\n.jedate .jedate-time .timecontent{width: 100%;float:left;}\r\n.jedate .jedate-time .hmstitle{width: 211px;margin: 0 auto;overflow: hidden;padding-top: 4px;text-align: center;}\r\n.jedate .jedate-time .hmstitle p{width: 33.33%;float:left;height: 30px;line-height: 30px;font-size: 13px;}\r\n.jedate .jedate-time .hmslist{width: 112px; margin: 0 auto;overflow: hidden;text-align: center;}\r\n.jedate .jedate-time .hmslist .hmsauto{height: 100%; width:56px;text-align: center; float: left;}\r\n.jedate .jedate-time .hmslist ul {width: 56px;height: 100%; float: left;overflow: auto;}\r\n.jedate .jedate-time .hmslist ul li {width: 100%; text-align: center;height: 32px;line-height: 32px;font-size: 13px;}\r\n.jedate .jedate-time .hmslist ul li:hover{background-color: #F2F2F2;}\r\n.jedate .jedate-time .hmslist .hmsauto li.action,.jedate-time .hmslist div.hmsauto ul li.action:hover{background-color: #e0ebfd;color:#262d3d;}\r\n.jedate .jedate-time .hmslist ul li.disabled{ background-color: #fbfbfb;color:#ccc;}\r\n.jedate .jedate-time .hmslist ul li.disabled.action{ background-color: #00A680;color:#FFFFFF;filter:Alpha(opacity=30);opacity:.3; }\r\n\r\n.jedate .jedate-footbtn{height: 36px;padding: 0 6px;overflow: hidden;}\r\n.jedate .jedate-footbtn .timecon{line-height:28px;padding:0 5px;background-color:#00A680;color:#fff;display:block;float: left;font-size: 12px;margin-top:4px;border-radius:4px;overflow: hidden;}\r\n.jedate .jedate-footbtn .btnscon{line-height:28px;display:block;float: left;font-size: 12px;border-radius:4px;overflow: hidden; width: 230px;}\r\n.jedate .jedate-footbtn .btnscon i{font-style: normal;display:inline-block;padding:0 5px;height:28px;line-height:28px;text-align:center;overflow:hidden;}\r\n.jedate .jedate-footbtn .btnscon .today{font-weight: 500; font-size: 13px; margin-left: 6px; background: none;}',""])},function(e,t){e.exports="\"use strict\";\n\nvar qd = window.qd;\nvar render = window.render;\nvar jeDate = window.jeDate;\n\nfunction onShow(state, data) {\n    var data = data || {};\n    var custom = jeDate(\"#datepicker\", {\n        isShow: false,\n        format: 'YYYY-MM-DD hh:mm',\n        theme: { bgcolor: \"transparent\", color: \"#262d3d\", pnColor: \"#c5ccdb\" },\n        doc: document,\n        win: window\n    });\n\n    if (data.YYYY || data.year) {\n        custom.setDefaultDate(data.YYYY ? data : { YYYY: data.year, MM: data.month, DD: data.day, hh: data.hour, mm: data.minute });\n    }\n\n    $('.btn-save').bind('click', function () {\n        qd.trigger('_dateChange', qd.assign({}, custom.selectDate[0], custom.selectTime[0]));\n        qd.hidePage('datePickerFrame');\n    });\n    $('.btn-cancel').bind('click', function () {\n        qd.hidePage('datePickerFrame');\n    });\n    $('.btn-save, .btn-cancel').bind('mousedown', function (e) {\n        e.stopPropagation();\n        e.preventDefault();\n    });\n}\n\nqd._debug() && console.log('log from datePickerFrame');"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(59),o=n(18),a=r(o),s=n(24),l=r(s),c=n(259),u=n(655),d=r(u),f=n(656),p=r(f),h=n(657),g=r(h),m=n(26),v=r(m),b=n(27),_=function(e,t){return new a.default(l.default.call(this.stator,{name:"customerOperationsFrame",style:{width:200},autoHeight:".customerOperations-container",data:e,script:g.default,cssText:d.default.toString(),html:(0,v.default)(b)+p.default,props:{ANSWER_TYPE:i.answerType,openUrl:function(){return c.openUrl}}}),t)};t.default=_},function(e,t,n){t=e.exports=n(19)(!1),t.i(n(25),""),t.push([e.i,"h2 {\n  margin: 0;\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 1.5;\n  padding: 10px 15px 5px;\n  color: #262d3d;\n}\n.icon {\n  display: inline-block;\n  width: 16px;\n  overflow: hidden;\n  color: #a1abc2;\n}\n.icon svg {\n  width: 100%;\n}\n.icon.green:hover {\n  color: #01c480;\n}\na:hover .icon,\n.icon:hover {\n  color: #8490ae;\n}\n.drop {\n  overflow: hidden;\n  position: relative;\n  padding-right: 12px;\n}\n.drop .arrow {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 8px;\n  margin-left: 3px;\n}\n.icon.is-on,\n.text-stress {\n  color: #262d3d;\n}\n.text-hint {\n  color: #d4d8e1;\n}\n.green {\n  color: #00d48a;\n  border-color: #00d48a;\n}\n.red {\n  color: #f75559;\n}\n.blue {\n  color: #4a70ff;\n}\n.orange {\n  color: #ff8345;\n}\n.is-calling {\n  color: #a1abc2;\n}\n.is-calling h2 {\n  color: #f8f9fB;\n}\n.is-calling::-webkit-scrollbar-thumb,\n.is-calling ::-webkit-scrollbar-thumb {\n  background-color: #696c7c;\n}\n.is-calling::-webkit-scrollbar-thumb:hover,\n.is-calling ::-webkit-scrollbar-thumb:hover {\n  background-color: #50535f;\n}\n.is-calling .is-loading {\n  border: 2px solid #fff;\n  border-bottom-color: transparent;\n}\n.is-calling .text {\n  color: #a1abc2;\n}\n.is-calling .icon.is-on,\n.is-calling .text-stress {\n  color: #f8f9fB;\n}\n.is-calling .green {\n  color: #00cb83;\n  border-color: #00cb83;\n}\n.is-calling .red {\n  color: #e1464a;\n}\n.is-calling .blue {\n  color: #6283ff;\n}\n.is-calling.bg-main,\n.is-calling .bg-main {\n  background-position: 100% 50%;\n}\n.is-calling .bg-gap {\n  background-position: 100% 50%;\n}\n.is-calling .ck {\n  color: #f8f9fB;\n}\n.is-calling textarea,\n.is-calling input,\n.is-calling select,\n.is-calling .select,\n.is-calling .select .options {\n  border-color: #4a5264;\n  color: #f8f9fB;\n  background-color: #25283a;\n}\n.is-calling textarea:focus,\n.is-calling input:focus,\n.is-calling select:focus,\n.is-calling .select:focus,\n.is-calling .select .options:focus {\n  border-color: #8d96aa;\n}\n.is-calling textarea::placeholder,\n.is-calling input::placeholder,\n.is-calling select::placeholder,\n.is-calling .select::placeholder,\n.is-calling .select .options::placeholder {\n  color: #a1abc2;\n}\n.is-calling .select .options p:hover,\n.is-calling .select .options .selected {\n  background-color: #383a4a;\n}\n.is-calling .close {\n  color: #78849e;\n}\n.is-calling .close:hover {\n  color: #fff;\n}\n.is-calling input[type=checkbox] {\n  cursor: pointer;\n  position: relative;\n}\n.is-calling input[type=checkbox]::after {\n  position: absolute;\n  top: 0;\n  background-color: #1e2030;\n  color: #fff;\n  width: 14px;\n  height: 14px;\n  display: inline-block;\n  visibility: visible;\n  padding-left: 0px;\n  text-align: center;\n  content: ' ';\n  border-radius: 2px;\n  box-sizing: border-box;\n  border: 1px solid #4A5264;\n}\n.is-calling input[type=checkbox]:checked::after {\n  content: \"\";\n  border-color: #4A70FF;\n  background-color: #4A70FF;\n}\n.is-calling input[type=checkbox]:checked::before {\n  content: '';\n  position: absolute;\n  top: 1px;\n  left: 5px;\n  width: 3px;\n  height: 8px;\n  border: solid white;\n  border-width: 0 2px 2px 0;\n  transform: rotate(45deg);\n  z-index: 1;\n}\n.close {\n  position: absolute;\n  right: 0px;\n  top: 0px;\n  padding: 8px;\n  color: #a8abb3;\n}\n.close:hover {\n  color: #1e2300;\n}\n.close svg {\n  width: 14px;\n  height: 14px;\n}\n.bg-main {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #fff, #fff, #25283a, #25283a) left / cover;\n}\n.bg-gap {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #f4f7fb, #f4f7fb, #101328, #101328) left / cover;\n}\n.bgEaseIn {\n  background-position: 100% 50%;\n}\n.bgEaseOut {\n  background-position: 0% 50%;\n}\n.bg-main,\n.bg-gap {\n  background-size: 800% 800%;\n  animation-fill-mode: both;\n}\n@keyframes bgEaseIn {\n  0% {\n    background-position: 0% 50%;\n  }\n  100% {\n    background-position: 100% 50%;\n  }\n}\n@keyframes bgEaseOut {\n  0% {\n    background-position: 100% 50%;\n  }\n  100% {\n    background-position: 0% 50%;\n  }\n}\nbody {\n  margin: 0;\n  overflow: hidden;\n  font-size: 12px;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  color: #a1abc2;\n}\np {\n  margin: 0;\n}\ntextarea::placeholder,\ninput::placeholder {\n  color: #A1ABC2;\n}\n::-webkit-scrollbar {\n  width: 4px;\n  height: 8px;\n}\n::-webkit-scrollbar-thumb {\n  background-color: #f3f5fa;\n  border-radius: 8px;\n}\n::-webkit-scrollbar-thumb:hover {\n  background-color: #aaa;\n}\n::-webkit-scrollbar-track-piece {\n  background-color: transparent;\n}\nsvg {\n  fill: currentColor;\n}\na {\n  text-decoration: none;\n}\nul,\nli {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n.ck {\n  width: 9px;\n  height: 9px;\n  color: #262d3d;\n  position: absolute;\n  top: 50%;\n  right: 10px;\n  transform: translateY(-50%);\n  display: none;\n}\n.is-selected .ck {\n  display: inline-block;\n}\ninput,\ntextarea,\nselect,\n.select,\n.select .options {\n  font-size: 12px;\n  color: #262d3d;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  border-radius: 3px;\n  border: 1px solid #e1e6f0;\n  background-color: #fff;\n}\ninput:focus,\ntextarea:focus,\nselect:focus,\n.select:focus,\n.select .options:focus {\n  outline: 0;\n  border-color: #c5ccdb;\n}\nselect,\n.select,\n.select .options p {\n  padding: 0 5px;\n}\n.select {\n  min-height: 26px;\n  position: relative;\n  cursor: default;\n}\n.select .options {\n  position: absolute;\n  z-index: 1;\n  left: -1px;\n  top: 29px;\n  width: 100%;\n  max-height: 73px;\n  overflow: auto;\n}\n.select .options p:hover,\n.select .options p.selected {\n  background: #f1f5fb;\n}\n.select p {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.cls:after {\n  content: \"\";\n  font-size: 0;\n  display: block;\n  height: 0;\n  clear: both;\n  visibility: hidden;\n}\n.disabled {\n  pointer-events: none;\n  opacity: .3;\n}\n.hidden {\n  display: none!important;\n}\n.overlay {\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  background: rgba(255, 255, 255, 0.6);\n}\ninput::-webkit-outer-spin-button,\ninput::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n}\ninput[type=\"number\"] {\n  -moz-appearance: textfield;\n}\n.is-loading {\n  border-radius: 100%;\n  margin: 2px;\n  border: 2px solid #ccc;\n  border-bottom-color: transparent;\n  height: 12px;\n  width: 12px;\n  margin-top: -7px;\n  background: 0 0!important;\n  display: inline-block;\n  -webkit-animation: rotate .75s 0s linear infinite;\n  animation: rotate .75s 0s linear infinite;\n}\n@keyframes rotate {\n  0% {\n    -webkit-transform: rotate(0);\n    transform: rotate(0);\n  }\n  50% {\n    -webkit-transform: rotate(180deg);\n    transform: rotate(180deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n.marquee {\n  white-space: nowrap;\n  overflow: hidden;\n  width: 80px;\n  position: relative;\n}\n.marquee p {\n  overflow: hidden;\n  float: left;\n  animation: move linear 6s infinite;\n}\n.marquee span {\n  display: inline-block;\n  padding-left: 10px;\n}\n.marquee::before,\n.marquee::after {\n  position: absolute;\n  top: 0;\n  z-index: 1;\n  content: ' ';\n  width: 10px;\n  height: 100%;\n  animation: bgfadeIn linear 2s;\n}\n.marquee::before {\n  left: -2px;\n  background: linear-gradient(90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n.marquee::after {\n  right: -2px;\n  background: linear-gradient(-90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n@keyframes move {\n  0% {\n    transform: translateX(0);\n  }\n  100% {\n    transform: translateX(-50%);\n  }\n}\n.q-notice {\n  position: absolute;\n  width: 100%;\n  left: 0;\n  top: 0;\n  text-align: center;\n}\n.q-notice.is-auto {\n  pointer-events: none;\n  z-index: 10;\n}\n.q-notice.is-cover {\n  height: 100%;\n  background: rgba(255, 255, 255, 0.7);\n}\n.q-notice .item {\n  margin: 4px auto;\n}\n.q-notice .info {\n  pointer-events: initial;\n  min-width: 170px;\n  padding: 0 15px;\n  line-height: 29px;\n  height: 28px;\n  overflow: hidden;\n  white-space: nowrap;\n  display: inline-block;\n  color: rgba(255, 255, 255, 0.8);\n  background-color: #25283a;\n  box-shadow: 0px 2px 18px 2px rgba(172, 172, 172, 0.3);\n  border-radius: 2px;\n  position: relative;\n}\n.q-notice .info .icon-tip {\n  vertical-align: -3px;\n  margin-right: 2px;\n  width: 14px;\n}\n.q-notice .info [data-action] * {\n  pointer-events: none;\n}\n.q-notice .is-error .info {\n  color: #fff;\n  background-color: #f75559;\n}\n.q-notice .is-success .info {\n  color: #fff;\n  background-color: #00cb83;\n}\n.q-notice .is-close-able .info {\n  text-align: left;\n}\n.q-notice .is-close-able .btn-close {\n  width: 12px;\n  height: 12px;\n  color: #fff;\n  margin: 8px -5px 0 10px;\n  float: right;\n}\n.q-notice .is-close-able .btn-close:hover {\n  opacity: .8;\n}\n.q-notice .is-warning .info {\n  color: rgba(0, 1, 10, 0.93);\n  border: 0.5px solid #FFEBDA;\n  background-color: #FFF8F0;\n  box-shadow: 0px 16px 32px rgba(18, 19, 25, 0.16), 0px 0px 8px rgba(18, 19, 25, 0.08), 0px 0px 1px rgba(18, 19, 25, 0.08);\n}\n.ringing {\n  animation: ringing 2s ease;\n  animation-fill-mode: both;\n  animation-iteration-count: infinite;\n}\n@keyframes ringing {\n  10% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  15% {\n    -webkit-transform: rotate(-15deg);\n    transform: rotate(-15deg);\n  }\n  20% {\n    -webkit-transform: rotate(15deg);\n    transform: rotate(15deg);\n  }\n  25% {\n    -webkit-transform: rotate(-10deg);\n    transform: rotate(-10deg);\n    color: #2af2ac;\n  }\n  30% {\n    -webkit-transform: rotate(5deg);\n    transform: rotate(5deg);\n    color: #2af2ac;\n  }\n  35% {\n    -webkit-transform: rotate(-5deg);\n    transform: rotate(-5deg);\n  }\n  40% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n}\n.ctimer {\n  border-radius: 50%;\n  height: 40px;\n  overflow: hidden;\n  position: relative;\n  width: 40px;\n  background: rgba(255, 255, 255, 0.3);\n}\n.ctimer svg {\n  position: absolute;\n  left: 0;\n  z-index: 2;\n}\n.ctimer .hand {\n  position: absolute;\n  top: 0;\n  height: 100%;\n  overflow: hidden;\n  width: 50%;\n}\n.ctimer .hand span {\n  border: 20px solid rgba(255, 255, 255, 0.3);\n  border-bottom-color: transparent;\n  border-left-color: transparent;\n  border-radius: 50%;\n  display: block;\n  height: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  transform: rotate(225deg);\n  width: 0;\n}\n.ctimer .hand-left {\n  left: 0;\n  transform: rotate(180deg);\n}\n.ctimer .hand-right {\n  right: 0;\n}\n.ctimer .hand span {\n  animation-duration: var(--post-edit-time);\n  animation-iteration-count: 1;\n  animation-timing-function: linear;\n  animation-fill-mode: both;\n}\n.ctimer .hand-left span {\n  animation-name: spinleft;\n}\n.ctimer .hand-right span {\n  animation-name: spinright;\n}\n@keyframes spinleft {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(225deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\n@keyframes spinright {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(405deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\nbody {\n  background: none;\n}\n.customerOperations-container {\n  background-color: #fff;\n  user-select: none;\n  -webkit-user-select: none;\n  padding: 10px 0;\n}\n.customerOperations-container .item {\n  padding: 0;\n  margin: 0 20px;\n}\n.customerOperations-container .item .inner {\n  height: 30px;\n  padding: 0 20px 0 20px;\n  margin: 0 -20px;\n  line-height: 30px;\n  position: relative;\n}\n.customerOperations-container .item .inner .icon {\n  width: 14px;\n  vertical-align: -3px;\n  margin-right: 5px;\n  color: #E1E4EB;\n}\n.customerOperations-container .item .inner .new {\n  position: relative;\n  overflow: visible;\n}\n.customerOperations-container .item .inner .new::after {\n  content: ' ';\n  border: 3px solid red;\n  width: 0;\n  height: 0;\n  border-radius: 100%;\n  position: absolute;\n  right: -3px;\n  top: 0px;\n}\n.customerOperations-container .item .inner:hover {\n  background: #f1f5fb;\n  cursor: pointer;\n}\n.customerOperations-container .item .inner .text-stress {\n  display: inline-block;\n  vertical-align: middle;\n}\n.customerOperations-container .item .inner .ck {\n  right: 20px;\n}\n.customerOperations-container .item .hide {\n  display: none;\n}\n.customerOperations-container.is-calling .item .inner {\n  color: #f8f9fB;\n}\n.customerOperations-container.is-calling .item .inner:hover {\n  background: #383a4a;\n}\n.customerOperations-container.is-calling .item .inner.is-selected .text-stress {\n  color: #fff;\n}\n",""])},function(e,t){e.exports='<%\n    var CALLTYPE_CONSULT = 2;\n    var status = status || \'normal\';\n    var isNormalState = status === \'normal\' || status === \'over\';\n    var isNormalCall =  callType === 1 || role === \'b2\';\n    var isConsulting = callType == CALLTYPE_CONSULT;\n    var isClient = mode === \'client\';\n    var workorder = workorder || {status: 0};\n    var dialog = workorder.dialog || {status: 0};\n%>\n<div class="customerOperations-container bg-main <%=isNormalState ? \'\' : \'is-calling\'%>">\n    <ul>\n        <%if(isNormalCall && !isNumberHidden && !isConsulting && (withAddCL && customerType === 0 && isClient || withAddMyList && customerType === 1)) { %>\n        <li class="item btn_join">\n            <div class="inner">\n                <span class="icon"><svg viewBox="0 0 12 12"><use xlink:href="#c-add-custom"></use></svg></span>\n                <span class="text-stress">加入<%=customerType === 0 ? \'客户库\' : \'我的客户\'%></span>\n            </div>\n        </li>\n        <%} else if(withProfile && customerType === 2 && isNormalCall && isClient && !isNumberHidden && !isConsulting) {%>\n        <li class="item btn_card">\n            <div class="inner">\n                <span class="icon"><svg viewBox="0 0 12 12"><use xlink:href="#c-icard"></use></svg></span>\n                <span class="text-stress">查看客户资料</span>\n            </div>\n        </li>\n        <%}%>\n        <%if (callType && [1,2,3].indexOf(callType) > -1) {\n            var abled = status !== \'connect\' && status !== \'calling\';    \n        %>\n        <li class="item" title="<%=abled ? \'\' : \'请先接听，再填写备注\'%>">\n            <div class="inner remark <%=abled ? \'\' : \'disabled\'%>">\n                <span class="icon <%=remarkUnread ? \'new\' : \'\'%>"><svg viewBox="0 0 12 12"><use xlink:href="#c-add-remark"></use></svg></span>\n                <span class="text-stress">添加通话备注</span>\n            </div>\n        </li>\n        <%}%>\n        <%if(role === \'b1\' || role === \'b2\' && status === \'multi\'){\n            var albed = \'online|postEdit|multi|hold\'.indexOf(status) > -1;\n        %>\n        <li class="item" title="<%=abled ? \'\' : \'请先接听，再添加预约回呼\'%>">\n            <div class="inner callback <%=abled ? \'\' : \'disabled\'%>">\n                <span class="icon <%=scheduleUnread ? \'new\' : \'\'%>"><svg viewBox="0 0 12 12"><use xlink:href="#<%=callbackOnTimeSaveId ? \'c-schedule\' : \'c-add-schedule\'%>"></use></svg></span>\n                <span class="text-stress">添加预约回呼</span>\n            </div>\n        </li>\n        <%}%>\n        <%if (workorder && workorder.status) {%>\n        <li class="item workorder">\n            <div class="inner">\n                <span class="icon"><svg viewBox="0 0 12 12"><use xlink:href="#c-order"></use></svg></span>\n                <span class="text-stress"><%=workorder.title || \'浏览器弹屏\'%></span>\n            </div>\n        </li>\n        <%}%>\n        <%if (dialog && dialog.status) {%>\n        <li class="item dialog">\n            <div class="inner">\n                <span class="icon"><svg viewBox="0 0 12 12"><use xlink:href="#c-orderpop"></use></svg></span>\n                <span class="text-stress"><%=dialog.title || \'电话条弹屏\'%></span>\n            </div>\n        </li>\n        <%}%>\n        <%if (withAsr) {%>\n        <li class="item asr">\n            <div class="inner">\n                <span class="icon"><svg viewBox="0 0 12 12"><use xlink:href="#asr-manual"></use></svg></span>\n                <span class="text-stress">开启实时转文字</span>\n            </div>\n        </li>\n        <%}%>\n        <li class="item msg">\n            <div class="inner">\n                <span class="icon"><svg viewBox="0 0 12 12"><use xlink:href="#basic_email_line"></use></svg></span>\n                <span class="text-stress">发短信</span>\n            </div>\n        </li>\n    </ul>\n</div>\n'},function(e,t){e.exports="'use strict';\n\nvar qd = window.qd;\nvar openUrl = window.openUrl;\n\nfunction onShow() {\n    bindCustomerAction();\n}\n\nfunction onHide() {\n    qd.trigger('_customerOperationsFrameHide');\n}\n\nfunction bindCustomerAction() {\n    $('.remark').bind('click', function (e) {\n        qd.togglePage({\n            name: 'remarkFrame',\n            show: true,\n            params: 1\n        });\n    });\n\n    $('.callback').bind('click', function (e) {\n        qd.togglePage({\n            trigger: e.currentTarget,\n            name: 'callOnTimeFrame',\n            show: true\n        });\n    });\n\n    $('.btn_card').bind('click', function (e) {\n        qd.showInfoCard({\n            customerId: qd.getState('cuin')\n        });\n        qd.hidePage('customerOperationsFrame');\n    });\n\n    $('.btn_join').bind('click', function (e) {\n        var state = qd.getState();\n        var type = state.customerType;\n        if (type === 0) {\n            qd.showAddCustomerPanel({\n                tel: state.tel\n            });\n        } else if (type === 1) {\n            qd.addCustomerBase({\n                type: 2,\n                customerId: state.cuin,\n                success: function success(res) {\n                    qd.setState('customerType', 2);\n                    qd.showTip('已成功加入我的客户', 'success');\n                },\n                fail: function fail(err) {\n                    qd.showTip(err.msg || '加入我的客户失败', 'error');\n                }\n            });\n        }\n        qd.hidePage('customerOperationsFrame');\n    });\n\n    $('.workorder').bind('click', function () {\n        openUrl.call(qd);\n        qd.hidePage('customerOperationsFrame');\n    });\n\n    $('.dialog').bind('click', function (e) {\n        qd.togglePage({\n            name: 'orderPopFrame',\n            show: true\n        });\n    });\n\n    $('.asr').bind('click', function (e) {\n        qd.togglePage({\n            name: 'asrFrame',\n            show: true\n        });\n    });\n\n    $('.msg').bind('click', function (e) {\n        var tel = qd.formatTel(qd.getState('tel') || '') || '';\n        qd.togglePage({\n            trigger: e.currentTarget,\n            offsetX: 282,\n            offsetY: -25,\n            name: 'messageTemplateFrame',\n            params: {\n                tel: tel\n            }\n        });\n    });\n\n    qd.once('stateChange.orderPop', function (e, state) {\n        if (state === 'online' || state === 'postEdit') {\n            $('.remark, .callback').removeClass('disabled');\n        }\n    });\n}"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(18),o=r(i),a=n(24),s=r(a),l=n(659),c=r(l),u=n(660),d=r(u),f=n(661),p=r(f),h=n(662),g=r(h),m=n(663),v=r(m),b=n(26),_=r(b),y=n(27),w=function(e,t){return new o.default(s.default.call(this.stator,{name:"asrFrame",style:{width:460,height:660},moveable:!0,data:e,script:v.default,cssText:c.default.toString(),html:(0,_.default)(y)+d.default,props:{tabTpl:p.default,messageTpl:g.default}}),t)};t.default=w},function(e,t,n){t=e.exports=n(19)(!1),t.i(n(25),""),t.push([e.i,"h2 {\n  margin: 0;\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 1.5;\n  padding: 10px 15px 5px;\n  color: #262d3d;\n}\n.icon {\n  display: inline-block;\n  width: 16px;\n  overflow: hidden;\n  color: #a1abc2;\n}\n.icon svg {\n  width: 100%;\n}\n.icon.green:hover {\n  color: #01c480;\n}\na:hover .icon,\n.icon:hover {\n  color: #8490ae;\n}\n.drop {\n  overflow: hidden;\n  position: relative;\n  padding-right: 12px;\n}\n.drop .arrow {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 8px;\n  margin-left: 3px;\n}\n.icon.is-on,\n.text-stress {\n  color: #262d3d;\n}\n.text-hint {\n  color: #d4d8e1;\n}\n.green {\n  color: #00d48a;\n  border-color: #00d48a;\n}\n.red {\n  color: #f75559;\n}\n.blue {\n  color: #4a70ff;\n}\n.orange {\n  color: #ff8345;\n}\n.is-calling {\n  color: #a1abc2;\n}\n.is-calling h2 {\n  color: #f8f9fB;\n}\n.is-calling::-webkit-scrollbar-thumb,\n.is-calling ::-webkit-scrollbar-thumb {\n  background-color: #696c7c;\n}\n.is-calling::-webkit-scrollbar-thumb:hover,\n.is-calling ::-webkit-scrollbar-thumb:hover {\n  background-color: #50535f;\n}\n.is-calling .is-loading {\n  border: 2px solid #fff;\n  border-bottom-color: transparent;\n}\n.is-calling .text {\n  color: #a1abc2;\n}\n.is-calling .icon.is-on,\n.is-calling .text-stress {\n  color: #f8f9fB;\n}\n.is-calling .green {\n  color: #00cb83;\n  border-color: #00cb83;\n}\n.is-calling .red {\n  color: #e1464a;\n}\n.is-calling .blue {\n  color: #6283ff;\n}\n.is-calling.bg-main,\n.is-calling .bg-main {\n  background-position: 100% 50%;\n}\n.is-calling .bg-gap {\n  background-position: 100% 50%;\n}\n.is-calling .ck {\n  color: #f8f9fB;\n}\n.is-calling textarea,\n.is-calling input,\n.is-calling select,\n.is-calling .select,\n.is-calling .select .options {\n  border-color: #4a5264;\n  color: #f8f9fB;\n  background-color: #25283a;\n}\n.is-calling textarea:focus,\n.is-calling input:focus,\n.is-calling select:focus,\n.is-calling .select:focus,\n.is-calling .select .options:focus {\n  border-color: #8d96aa;\n}\n.is-calling textarea::placeholder,\n.is-calling input::placeholder,\n.is-calling select::placeholder,\n.is-calling .select::placeholder,\n.is-calling .select .options::placeholder {\n  color: #a1abc2;\n}\n.is-calling .select .options p:hover,\n.is-calling .select .options .selected {\n  background-color: #383a4a;\n}\n.is-calling .close {\n  color: #78849e;\n}\n.is-calling .close:hover {\n  color: #fff;\n}\n.is-calling input[type=checkbox] {\n  cursor: pointer;\n  position: relative;\n}\n.is-calling input[type=checkbox]::after {\n  position: absolute;\n  top: 0;\n  background-color: #1e2030;\n  color: #fff;\n  width: 14px;\n  height: 14px;\n  display: inline-block;\n  visibility: visible;\n  padding-left: 0px;\n  text-align: center;\n  content: ' ';\n  border-radius: 2px;\n  box-sizing: border-box;\n  border: 1px solid #4A5264;\n}\n.is-calling input[type=checkbox]:checked::after {\n  content: \"\";\n  border-color: #4A70FF;\n  background-color: #4A70FF;\n}\n.is-calling input[type=checkbox]:checked::before {\n  content: '';\n  position: absolute;\n  top: 1px;\n  left: 5px;\n  width: 3px;\n  height: 8px;\n  border: solid white;\n  border-width: 0 2px 2px 0;\n  transform: rotate(45deg);\n  z-index: 1;\n}\n.close {\n  position: absolute;\n  right: 0px;\n  top: 0px;\n  padding: 8px;\n  color: #a8abb3;\n}\n.close:hover {\n  color: #1e2300;\n}\n.close svg {\n  width: 14px;\n  height: 14px;\n}\n.bg-main {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #fff, #fff, #25283a, #25283a) left / cover;\n}\n.bg-gap {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #f4f7fb, #f4f7fb, #101328, #101328) left / cover;\n}\n.bgEaseIn {\n  background-position: 100% 50%;\n}\n.bgEaseOut {\n  background-position: 0% 50%;\n}\n.bg-main,\n.bg-gap {\n  background-size: 800% 800%;\n  animation-fill-mode: both;\n}\n@keyframes bgEaseIn {\n  0% {\n    background-position: 0% 50%;\n  }\n  100% {\n    background-position: 100% 50%;\n  }\n}\n@keyframes bgEaseOut {\n  0% {\n    background-position: 100% 50%;\n  }\n  100% {\n    background-position: 0% 50%;\n  }\n}\nbody {\n  margin: 0;\n  overflow: hidden;\n  font-size: 12px;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  color: #a1abc2;\n}\np {\n  margin: 0;\n}\ntextarea::placeholder,\ninput::placeholder {\n  color: #A1ABC2;\n}\n::-webkit-scrollbar {\n  width: 4px;\n  height: 8px;\n}\n::-webkit-scrollbar-thumb {\n  background-color: #f3f5fa;\n  border-radius: 8px;\n}\n::-webkit-scrollbar-thumb:hover {\n  background-color: #aaa;\n}\n::-webkit-scrollbar-track-piece {\n  background-color: transparent;\n}\nsvg {\n  fill: currentColor;\n}\na {\n  text-decoration: none;\n}\nul,\nli {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n.ck {\n  width: 9px;\n  height: 9px;\n  color: #262d3d;\n  position: absolute;\n  top: 50%;\n  right: 10px;\n  transform: translateY(-50%);\n  display: none;\n}\n.is-selected .ck {\n  display: inline-block;\n}\ninput,\ntextarea,\nselect,\n.select,\n.select .options {\n  font-size: 12px;\n  color: #262d3d;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  border-radius: 3px;\n  border: 1px solid #e1e6f0;\n  background-color: #fff;\n}\ninput:focus,\ntextarea:focus,\nselect:focus,\n.select:focus,\n.select .options:focus {\n  outline: 0;\n  border-color: #c5ccdb;\n}\nselect,\n.select,\n.select .options p {\n  padding: 0 5px;\n}\n.select {\n  min-height: 26px;\n  position: relative;\n  cursor: default;\n}\n.select .options {\n  position: absolute;\n  z-index: 1;\n  left: -1px;\n  top: 29px;\n  width: 100%;\n  max-height: 73px;\n  overflow: auto;\n}\n.select .options p:hover,\n.select .options p.selected {\n  background: #f1f5fb;\n}\n.select p {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.cls:after {\n  content: \"\";\n  font-size: 0;\n  display: block;\n  height: 0;\n  clear: both;\n  visibility: hidden;\n}\n.disabled {\n  pointer-events: none;\n  opacity: .3;\n}\n.hidden {\n  display: none!important;\n}\n.overlay {\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  background: rgba(255, 255, 255, 0.6);\n}\ninput::-webkit-outer-spin-button,\ninput::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n}\ninput[type=\"number\"] {\n  -moz-appearance: textfield;\n}\n.is-loading {\n  border-radius: 100%;\n  margin: 2px;\n  border: 2px solid #ccc;\n  border-bottom-color: transparent;\n  height: 12px;\n  width: 12px;\n  margin-top: -7px;\n  background: 0 0!important;\n  display: inline-block;\n  -webkit-animation: rotate .75s 0s linear infinite;\n  animation: rotate .75s 0s linear infinite;\n}\n@keyframes rotate {\n  0% {\n    -webkit-transform: rotate(0);\n    transform: rotate(0);\n  }\n  50% {\n    -webkit-transform: rotate(180deg);\n    transform: rotate(180deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n.marquee {\n  white-space: nowrap;\n  overflow: hidden;\n  width: 80px;\n  position: relative;\n}\n.marquee p {\n  overflow: hidden;\n  float: left;\n  animation: move linear 6s infinite;\n}\n.marquee span {\n  display: inline-block;\n  padding-left: 10px;\n}\n.marquee::before,\n.marquee::after {\n  position: absolute;\n  top: 0;\n  z-index: 1;\n  content: ' ';\n  width: 10px;\n  height: 100%;\n  animation: bgfadeIn linear 2s;\n}\n.marquee::before {\n  left: -2px;\n  background: linear-gradient(90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n.marquee::after {\n  right: -2px;\n  background: linear-gradient(-90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n@keyframes move {\n  0% {\n    transform: translateX(0);\n  }\n  100% {\n    transform: translateX(-50%);\n  }\n}\n.q-notice {\n  position: absolute;\n  width: 100%;\n  left: 0;\n  top: 0;\n  text-align: center;\n}\n.q-notice.is-auto {\n  pointer-events: none;\n  z-index: 10;\n}\n.q-notice.is-cover {\n  height: 100%;\n  background: rgba(255, 255, 255, 0.7);\n}\n.q-notice .item {\n  margin: 4px auto;\n}\n.q-notice .info {\n  pointer-events: initial;\n  min-width: 170px;\n  padding: 0 15px;\n  line-height: 29px;\n  height: 28px;\n  overflow: hidden;\n  white-space: nowrap;\n  display: inline-block;\n  color: rgba(255, 255, 255, 0.8);\n  background-color: #25283a;\n  box-shadow: 0px 2px 18px 2px rgba(172, 172, 172, 0.3);\n  border-radius: 2px;\n  position: relative;\n}\n.q-notice .info .icon-tip {\n  vertical-align: -3px;\n  margin-right: 2px;\n  width: 14px;\n}\n.q-notice .info [data-action] * {\n  pointer-events: none;\n}\n.q-notice .is-error .info {\n  color: #fff;\n  background-color: #f75559;\n}\n.q-notice .is-success .info {\n  color: #fff;\n  background-color: #00cb83;\n}\n.q-notice .is-close-able .info {\n  text-align: left;\n}\n.q-notice .is-close-able .btn-close {\n  width: 12px;\n  height: 12px;\n  color: #fff;\n  margin: 8px -5px 0 10px;\n  float: right;\n}\n.q-notice .is-close-able .btn-close:hover {\n  opacity: .8;\n}\n.q-notice .is-warning .info {\n  color: rgba(0, 1, 10, 0.93);\n  border: 0.5px solid #FFEBDA;\n  background-color: #FFF8F0;\n  box-shadow: 0px 16px 32px rgba(18, 19, 25, 0.16), 0px 0px 8px rgba(18, 19, 25, 0.08), 0px 0px 1px rgba(18, 19, 25, 0.08);\n}\n.ringing {\n  animation: ringing 2s ease;\n  animation-fill-mode: both;\n  animation-iteration-count: infinite;\n}\n@keyframes ringing {\n  10% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  15% {\n    -webkit-transform: rotate(-15deg);\n    transform: rotate(-15deg);\n  }\n  20% {\n    -webkit-transform: rotate(15deg);\n    transform: rotate(15deg);\n  }\n  25% {\n    -webkit-transform: rotate(-10deg);\n    transform: rotate(-10deg);\n    color: #2af2ac;\n  }\n  30% {\n    -webkit-transform: rotate(5deg);\n    transform: rotate(5deg);\n    color: #2af2ac;\n  }\n  35% {\n    -webkit-transform: rotate(-5deg);\n    transform: rotate(-5deg);\n  }\n  40% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n}\n.ctimer {\n  border-radius: 50%;\n  height: 40px;\n  overflow: hidden;\n  position: relative;\n  width: 40px;\n  background: rgba(255, 255, 255, 0.3);\n}\n.ctimer svg {\n  position: absolute;\n  left: 0;\n  z-index: 2;\n}\n.ctimer .hand {\n  position: absolute;\n  top: 0;\n  height: 100%;\n  overflow: hidden;\n  width: 50%;\n}\n.ctimer .hand span {\n  border: 20px solid rgba(255, 255, 255, 0.3);\n  border-bottom-color: transparent;\n  border-left-color: transparent;\n  border-radius: 50%;\n  display: block;\n  height: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  transform: rotate(225deg);\n  width: 0;\n}\n.ctimer .hand-left {\n  left: 0;\n  transform: rotate(180deg);\n}\n.ctimer .hand-right {\n  right: 0;\n}\n.ctimer .hand span {\n  animation-duration: var(--post-edit-time);\n  animation-iteration-count: 1;\n  animation-timing-function: linear;\n  animation-fill-mode: both;\n}\n.ctimer .hand-left span {\n  animation-name: spinleft;\n}\n.ctimer .hand-right span {\n  animation-name: spinright;\n}\n@keyframes spinleft {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(225deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\n@keyframes spinright {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(405deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\n.input {\n  height: 32px;\n  padding: 9px 10px 0;\n  position: relative;\n}\n.input .icon-search {\n  position: absolute;\n  left: 17px;\n  top: 16px;\n}\n.input input {\n  width: 100%;\n  height: 30px;\n  line-height: 30px;\n  padding: 0 24px 0 28px;\n  font-size: 12px;\n  border-radius: 2px;\n}\n.input input:focus {\n  outline: none;\n}\n.input .clear {\n  color: #a8abb3;\n  position: absolute;\n  right: 2px;\n  top: 3px;\n  padding: 5px;\n  margin: 10px 10px 0 0;\n  display: block;\n  cursor: pointer;\n}\n.input .clear:hover {\n  color: #1e2300;\n}\n.transfer,\n.consult {\n  overflow: hidden;\n  user-select: none;\n  -webkit-user-select: none;\n}\n.tab {\n  height: 40px;\n  line-height: 39px;\n  position: relative;\n  text-align: center;\n  background-color: #f4f7fb;\n  transition: background-color 0.15s linear;\n}\n.tab a,\n.tab .t_item {\n  display: inline-block;\n  text-align: center;\n  color: #1d2331;\n  font-size: 14px;\n  padding: 0 5px;\n  margin: 0 8px;\n}\n.tab .is-selected,\n.tab a:hover,\n.tab .t_item:hover {\n  color: #0067ed;\n}\n.tab .pointer {\n  width: 25%;\n  height: 3px;\n  display: block;\n  overflow: hidden;\n  background-color: #00cb83;\n  position: absolute;\n  left: 0;\n  bottom: -1px;\n  transition: transform 0.2s ease-out;\n  transform: translate3d(-100%, 0, 0);\n}\n.title {\n  height: 27px;\n  line-height: 28px;\n  border-bottom: 1px solid #25283a;\n  text-align: center;\n  position: relative;\n}\n.title .aleft {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 10px;\n  height: 10px;\n}\n.title .aleft:hover {\n  color: #fff;\n}\n.title .aleft,\n.title .icon-ivr {\n  display: none;\n}\n.title.goback .aleft,\n.title.goback .icon-ivr {\n  display: inline-block;\n}\n.icon-ivr,\n.aright,\n.aleft,\n.clear {\n  width: 12px;\n  height: 12px;\n  color: #a8abb3;\n  display: inline-block;\n  vertical-align: -2px;\n}\n.aright svg,\n.aleft svg,\n.clear svg {\n  float: left;\n}\n.icon-ivr {\n  margin-right: 3px;\n  color: #b3b5bc;\n}\n.aleft {\n  padding: 9px;\n  transform: rotate(180deg);\n  -ms-transform: rotate(180deg);\n}\n.aleft:hover {\n  color: #1d2331;\n}\n.recept-container {\n  height: 319px;\n}\n.employee-container {\n  overflow: hidden;\n}\n.container ul {\n  width: 100%;\n  height: 278px;\n  padding: 1px 0;\n  float: left;\n  overflow: auto;\n}\n.container li {\n  padding: 0 20px 0 15px;\n  line-height: 28px;\n  height: 28px;\n  position: relative;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  cursor: default;\n}\n.container li:hover {\n  background-color: #f5fafe;\n}\n.container li.transfer-tip {\n  margin: 5px 0 7px;\n  color: #A8ABB3;\n  width: 100%;\n  box-sizing: border-box;\n  text-align: center;\n  pointer-events: none;\n}\n.container li .gray {\n  color: #a8abb3;\n  margin-left: 6px;\n}\n.container .aright {\n  padding: 9px;\n  position: absolute;\n  right: 0;\n  top: 1px;\n  width: 8px;\n  height: 8px;\n}\n.container li.fivr {\n  cursor: pointer;\n}\n.container .loading .aright {\n  border-radius: 100%;\n  margin: 2px;\n  border: 2px solid #fff;\n  height: 8px;\n  width: 8px;\n  margin: -5px 0 0 -4px;\n  background: 0 0!important;\n  display: inline-block;\n  -webkit-animation: rotate .75s 0s linear infinite;\n  animation: rotate .75s 0s linear infinite;\n  top: 50%;\n  left: auto;\n  right: 9px;\n  border-color: #0067ed;\n  border-bottom-color: transparent;\n  padding: 0;\n}\n.empty {\n  color: #a8abb3;\n  width: 300px;\n  text-align: center;\n  position: absolute;\n  left: 0;\n  top: 50%;\n  margin-top: -10px;\n}\n.container .loading .aright svg {\n  display: none;\n}\n.container .status {\n  display: inline-block;\n  width: 6px;\n  height: 6px;\n  border-radius: 50%;\n  vertical-align: middle;\n  line-height: 10px;\n}\n.container .status.online {\n  background-color: #00cb83;\n}\n.container .status.invalid {\n  background-color: #e1464a;\n}\n.container .status.offline {\n  background-color: #a8abb3;\n}\n.container .btn_transfer,\n.container .btn_consult {\n  display: none;\n  text-align: center;\n  width: 40px;\n  height: 20px;\n  line-height: 20px;\n  color: #fff;\n  background-color: #6283ff;\n  position: absolute;\n  vertical-align: middle;\n  top: 0;\n  right: 0;\n  margin: 4px 10px 0;\n  border-radius: 2px;\n}\n.container .btn_transfer:hover,\n.container .btn_consult:hover {\n  background-color: #4a70ff;\n}\n.container li:hover .btn_transfer,\n.container li:hover .btn_consult {\n  display: block;\n}\n.callin.recept-container {\n  height: 254px;\n}\n.callin.recept-container ul {\n  height: 252px;\n}\n.recept-container {\n  transform: translate3d(0, 0, 0);\n  -webkit-transform: translate3d(0, 0, 0);\n  transition: transform 0.1s ease-out;\n}\n.recept-container.show-sub {\n  transform: translate3d(-280px, 0, 0);\n  -webkit-transform: translate3d(-280px, 0, 0);\n}\n.is-disabled {\n  color: #a8abb3;\n}\n.container .is-disabled:hover {\n  background-color: #fff;\n}\n.container .is-disabled:hover .btn_transfer,\n.container .is-disabled:hover .btn_consult {\n  display: none;\n}\n.green,\n.highlight-text {\n  color: #00cb83;\n}\n.outline {\n  padding-bottom: 25px;\n}\n.is-calling .outline,\n.is-calling .employees,\n.is-calling .receptiongroup,\n.is-calling .systemservice-container {\n  background-color: #101328;\n}\n.is-calling .container li:hover {\n  background-color: #383a4a;\n}\n.is-calling .container li.transfer-tip,\n.is-calling .container li.transfer-tip:hover {\n  background-color: transparent;\n  color: #6c7280;\n}\n.is-calling .input input {\n  background-color: transparent;\n}\n.is-calling .input .clear {\n  color: #a8abb3;\n}\n.is-calling .input .clear:hover {\n  color: #fff;\n}\n.is-calling .tab {\n  border-bottom: 1px solid transparent;\n  background-color: #25283a;\n}\n.is-calling .tab a,\n.is-calling .tab .t_item {\n  color: #a1abc2;\n}\n.is-calling .tab .is-selected,\n.is-calling .tab a:hover,\n.is-calling .tab .t_item:hover {\n  color: #f8f9fB;\n}\n.is-calling .bg-main {\n  background: transparent;\n}\n.bgEaseIn .tab {\n  background-color: transparent;\n}\n.btn-action {\n  display: inline-block;\n  width: 40px;\n  line-height: 20px;\n  height: 20px;\n  color: #fff;\n  margin: 16px auto 0;\n  border-radius: 2px;\n  background-color: #6283ff;\n}\n.btn-action:hover {\n  background-color: #4a70ff;\n}\nbody {\n  background: none;\n  user-select: none;\n  -webkit-user-select: none;\n}\n.asr-container {\n  height: 100%;\n}\n.asr-container .tab {\n  padding: 0 55px 0 15px;\n}\n.asr-container .tab .inner {\n  text-align: left;\n  display: flex;\n}\n.asr-container .tab .voice {\n  vertical-align: -3px;\n  color: #00cb83;\n  position: absolute;\n  left: 0;\n  top: 11px;\n}\n.asr-container .tab .t_item {\n  position: relative;\n  min-width: 45px;\n  padding: 0 15px 0 0;\n  margin: 0 13px 0 0;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  color: #a1abc2;\n  cursor: default;\n  direction: rtl;\n}\n.asr-container .tab .t_item .revert {\n  unicode-bidi: bidi-override;\n}\n.asr-container .tab .t_item:only-child {\n  padding-right: 5px;\n}\n.asr-container .tab .t_item:only-child .del {\n  display: none;\n}\n.asr-container .tab .t_item:hover {\n  opacity: .84;\n}\n.asr-container .tab .t_item:hover .del {\n  visibility: visible;\n}\n.asr-container .tab .t_item.is-selected {\n  color: #262d3d;\n}\n.asr-container .tab .t_item.is-current {\n  padding-left: 18px;\n}\n.asr-container .tab .t_item .del {\n  position: absolute;\n  right: 1px;\n  top: 0;\n  padding: 14px 0;\n  width: 12px;\n  height: 12px;\n  cursor: pointer;\n  visibility: hidden;\n}\n.asr-container .tab .t_item .del:hover {\n  color: #262d3d;\n}\n.asr-container .dialog {\n  height: 100%;\n  padding: 0 15px;\n}\n.asr-container .dialog .input {\n  padding: 8px 0;\n}\n.asr-container .dialog .icon-search {\n  left: 7px;\n  top: 15px;\n}\n.asr-container .dialog .clear {\n  top: 8px;\n  margin: 0;\n  right: 1px;\n  padding: 9px 6px;\n}\n.asr-container .dialog .dialog-message {\n  height: 570px;\n  margin-right: -15px;\n  padding-right: 15px;\n  overflow: auto;\n}\n.asr-container .dialog .dialog-message .highlight-text {\n  color: inherit;\n  background-color: rgba(0, 212, 138, 0.7);\n  padding: 0 1px;\n}\n.asr-container .dialog .dialog-message .avatar {\n  width: 36px;\n  height: 36px;\n  display: inline-block;\n  overflow: hidden;\n  color: #E8F2FD;\n  background-color: #A8BDE3;\n  border-radius: 100%;\n  text-align: center;\n}\n.asr-container .dialog .dialog-message .avatar img {\n  width: 36px;\n  height: 36px;\n  overflow: hidden;\n  border-radius: 100%;\n}\n.asr-container .dialog .dialog-message .avatar svg {\n  width: 36px;\n  height: 36px;\n}\n.asr-container .dialog .dialog-message .msg {\n  display: inline-block;\n  color: #232c3f;\n  border-radius: 0px 8px 8px 8px;\n  padding: 10px 15px;\n  background-color: #f3f5fa;\n  line-height: 20px;\n  min-height: 20px;\n  cursor: default;\n  user-select: text;\n  -webkit-user-select: text;\n}\n.asr-container .dialog .dialog-message .item {\n  position: relative;\n  padding: 0 75px 20px 45px;\n}\n.asr-container .dialog .dialog-message .item .avatar {\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n.asr-container .dialog .dialog-message .item .head {\n  line-height: 20px;\n  padding-right: 10px;\n  user-select: text;\n  -webkit-user-select: text;\n  cursor: default;\n}\n.asr-container .dialog .dialog-message .item .head .time {\n  margin-left: 5px;\n}\n.asr-container .dialog .dialog-message .item.self {\n  text-align: right;\n  padding-right: 45px;\n  padding-left: 75px;\n}\n.asr-container .dialog .dialog-message .item.self .avatar {\n  left: auto;\n  right: 0;\n}\n.asr-container .dialog .dialog-message .item.self .head {\n  text-align: right;\n  padding: 0 0 0 10px;\n}\n.asr-container .dialog .dialog-message .item.self .msg {\n  text-align: left;\n  border-radius: 8px 0px 8px 8px;\n  color: #f8f9fB;\n  background-color: #4A70FF;\n}\n.asr-container .btn-detail {\n  position: absolute;\n  right: 32px;\n  top: 0px;\n  padding: 8px 0;\n  color: #a8abb3;\n}\n.asr-container .btn-detail:hover {\n  color: #1e2300;\n}\n.asr-container .btn-detail svg {\n  width: 14px;\n  height: 14px;\n}\n.asr-container.is-calling .dialog {\n  background-color: #101328;\n}\n.asr-container.is-calling .dialog .dialog-message .msg {\n  color: #f8f9fB;\n  background-color: #4A5264;\n}\n.asr-container.is-calling .dialog .dialog-message .item .head {\n  color: #f8f9fB;\n}\n.asr-container.is-calling .tab .t_item.is-selected {\n  color: #f8f9fB;\n}\n.asr-container.is-calling .tab .t_item .del:hover {\n  color: #f8f9fB;\n}\n.asr-container.is-calling .btn-detail {\n  color: #78849e;\n}\n.asr-container.is-calling .btn-detail:hover {\n  color: #fff;\n}\n",""])},function(e,t){e.exports='<%\n    var status = status || \'normal\';\n    var isNormalState = status === \'normal\' || status === \'over\';\n    var url = [\n        \'\',\n        \'\',\n        \'https://oaadmin.qidian.qq.com\',\n        \'https://admin.qidian.qq.com\'\n    ];\n    path = \'/call/callDetail/callRecord\';\n    url = (url[accountEnv] || url[3]) + path;\n%>\n<div class="asr-container bg-main <%=isNormalState ? \'\' : \'is-calling\'%>">\n    <div id="content" class="content">\n        <div class="tab">\n            <div class="inner"></div>\n            <i class="pointer"></i>\n        </div>\n        <div class="dialog">\n            <div class="input">\n                <svg class="icon icon-search" viewBox="0 0 12 12"><use xlink:href="#basic_search_line"></use></svg>\n                <input class="keywords" type="text" placeholder="通话内容/关键词"/>\n                <a class="clear icon" href="javascript:;"><svg viewBox="0 0 12 12"><use xlink:href="#close"></use></svg></a>\n            </div>\n            <ul class="dialog-message"></ul>\n        </div>\n    </div>\n    <a title="查看全部通话记录" href="<%=url%>" target="_blank" class="btn-detail icon"><svg viewBox="0 0 12 12"><use xlink:href="#basic_detail_line"></use></svg></a>\n    <a href="javascript:void(0);" class="close icon"><svg viewBox="0 0 12 12"><use xlink:href="#close"></use></svg></a>\n    <div class="overlay hidden"></div>\n</div>\n'},function(e,t){e.exports='<%\nasrRecords = asrRecords || [];\nvar len = Math.min(asrRecords.length, 4);\nfor (var i=0; i<len; i++) {\n    var tab = asrRecords[i];    \n%>\n<span index="<%=i%>" class="t_item <%=i === curIndex ? \'is-selected\' : \'\'%> <%=tab.callid === callid ? \'is-current\' : \'\'%>">\n    <%if (tab.callid === callid) {%>\n    <svg class="icon voice" viewBox="0 0 12 12"><use xlink:href="#basic_volume_line"></use></svg>\n    <%}%>\n    <span class="<%=isTel(tab.customerName) ? \'revert\' : \'\'%>"><%=reverceStr(tab.customerName)%></span>\n    <svg class="icon del" viewBox="0 0 12 12"><use xlink:href="#close"></use></svg>\n</span>\n<%}%>'},function(e,t){e.exports='<%\nvar avatar = \'https://q2.qlogo.cn/g?b=qq&nk=\' + (callKfext || kfext) + \'&s=100\';\nif (isSingle) {\n    var isB = uint32_leg_type === 1;    \n%>\n    <li id="m_<%=uint32_index%>" class="item <%=isB ? \'self\' : \'\'%>">\n        <span class="avatar">\n            <%if (isB) {%>\n            <img width="36" height="36" src="<%=avatar%>" />\n            <%} else {%>\n                <svg viewBox="0 0 12 12"><use xlink:href="#avatar-c"></use></svg>\n            <%}%>\n        </span>\n        <div class="head">\n            <%=formatTel(isB ? name : customerName)%>\n            <span class="time"><%=format(\'H:i:s\', uint64_word_time)%></span>\n        </div>\n        <div class="msg">\n            <%if (keywords) {%>\n                <%==highLight(str_line_ctx, keywords)%>\n            <%} else {%>\n                <%=str_line_ctx%>\n            <%}%>\n        </div>\n    </li>\n<%} else {%>\n<%\n    asrRecords = asrRecords || [];\n    var data = asrRecords[curIndex] || {};\n    var records = data.records || [];\n    var cname = data.customerName;\n    for (var i=0; i<records.length; i++) {\n        var item = records[i];\n        if (item) {\n            var isB = item.uint32_leg_type === 1;\n%>\n    <li id="m_<%=item.uint32_index%>" class="item <%=isB ? \'self\' : \'\'%>">\n        <span class="avatar">\n            <%if (isB) {%>\n            <img width="36" height="36" src="<%=avatar%>" />\n            <%} else {%>\n                <svg viewBox="0 0 12 12"><use xlink:href="#avatar-c"></use></svg>\n            <%}%>\n        </span>\n        <div class="head">\n            <%=formatTel(isB ? name : cname)%>\n            <span class="time"><%=format(\'H:i:s\', item.uint64_word_time)%></span>\n        </div>\n        <div class="msg">\n            <%if (keywords) {%>\n                <%==highLight(item.str_line_ctx, keywords)%>\n            <%} else {%>\n                <%=item.str_line_ctx%>\n            <%}%>\n        </div>\n    </li>\n<%}\n}%>\n<%}%>'},function(e,t){e.exports="'use strict';\n\nvar qd = window.qd;\nvar tabTpl = window.tabTpl;\nvar messageTpl = window.messageTpl;\n\nvar maxLen = 4;\nvar $keywords = $('.keywords').elems[0];\nvar $message = $('.dialog-message');\nvar $overlay = $('.overlay');\nvar asrRecords = qd.getState('asrRecords') || [];\nvar curIndex = asrRecords.length ? asrRecords.length - 1 : 0;\nvar getCallStream = function getCallStream(callid) {\n    var asrRecords = qd.getState('asrRecords') || [];\n    var res = null;\n    callid = callid || qd.getState('callid');\n    for (var i = 0; i < asrRecords.length; i++) {\n        var item = asrRecords[i];\n        if (item.callid === callid) {\n            res = {\n                data: item,\n                index: i\n            };\n        }\n    }\n    return res;\n};\n\nfunction onShow() {\n    var $tab;\n    renderTab();\n    renderMessage();\n    $tab = $('.tab .t_item').eq(curIndex);\n    setTab($tab && $tab.elems[0]);\n}\n\nfunction onHide() {}\n\nfunction setTab(tab, onlyTab) {\n    if (!tab) {\n        $('.pointer').css({\n            width: 0,\n            transform: 'translate3d(-30px, 0, 0)'\n        });\n        return;\n    }\n    var asrRecords = qd.getState('asrRecords') || [];\n    var width = tab.clientWidth - (asrRecords.length > 1 ? 10 : 0);\n    var left = tab.offsetLeft;\n    $keywords.value = '';\n    $('.tab').find('.is-selected').removeClass('is-selected');\n    $(tab).addClass('is-selected');\n    curIndex = +tab.getAttribute('index');\n    $('.pointer').css({\n        width: width,\n        transform: 'translate3d(' + left + 'px, 0, 0)'\n    });\n    !onlyTab && renderMessage();\n}\n\n$message = $('.dialog-message');\nvar $tab = $('.tab .inner');\nvar isTelReg = /^[\\s|\\+]?[\\d\\s-]+$/;\nfunction isTel(str) {\n    return isTelReg.test(str);\n}\nfunction reverceStr(str) {\n    if (isTel(str)) {\n        str = qd.formatTel(str);\n        str = str.split('').reverse().join('');\n    }\n    return str;\n}\nfunction renderTab(dropCurrentIcon) {\n    var state = qd.getState();\n    state.curIndex = curIndex;\n    state.isTel = isTel;\n    state.reverceStr = reverceStr;\n    state.Math = Math;\n    dropCurrentIcon && (state.callid = '');\n    var tab = render(tabTpl)(state);\n    $tab.html(tab);\n}\nqd.one('_over.stateChange.asrFrame', function () {\n    var tab;\n    var onlyTab = true;\n    renderTab(true);\n    tab = $tab.find('.is-selected').elems[0];\n    if (!tab) {\n        var tabs = $tab.find('.t_item');\n        tab = tabs.length ? tab.eq(tabs.length - 1).elems[0] : null;\n        onlyTab = false;\n    }\n    setTab(tab, onlyTab);\n});\nfunction isAttachBottom() {\n    var el = $message.elems[0];\n    var stop = el.scrollTop;\n    var maxTop = el.scrollHeight - el.clientHeight;\n    if (maxTop - stop < 20) {\n        return true;\n    }\n    return false;\n}\nfunction renderMessage(data, toFirstKeywords) {\n    var state = qd.getState();\n    var current = getCallStream();\n    var records = current ? current.data.records : [];\n    var lastItem = records[records.length - 1] || {};\n    var isAtBottom = isAttachBottom();\n    var isSingle = !!data;\n\n    if (isSingle && data.uint32_index !== lastItem.uint32_index) {\n        data = undefined;\n        isSingle = false;\n    }\n    state.highLight = highLight;\n    state.keywords = $keywords.value;\n    state.curIndex = curIndex;\n    state.format = qd.format;\n    state.formatTel = qd.formatTel;\n    state.isSingle = isSingle;\n    var message = render(messageTpl)(qd.assign(state, data));\n    if (isSingle) {\n        $message.append(message);\n    } else {\n        $message.html(message);\n    }\n    var $k = $('.highlight-text');\n    if (toFirstKeywords && $k.elems.length && !state.isSingle) {\n        var li = $k.findParent('.item');\n        $message.elems[0].scrollTop = li.offsetTop - 90;\n    } else if (isAtBottom) {\n        $message.elems[0].scrollTop = 99999999;\n    }\n}\n\nvar accountEnv = qd.getState('accountEnv');\nvar url = ['', '', 'https://oaadmin.qidian.qq.com', 'https://admin.qidian.qq.com'];\nvar path = '/call/callDetail/callRecord';\nurl = (url[accountEnv] || url[3]) + path;\nqd.one('asrNewSession.asrPop', function (e, curRecorder) {\n    var asrRecords = qd.getState('asrRecords');\n    var asrmind = qd.getState('asrmind');\n    var onConfirm = function onConfirm() {\n        asrRecords.shift();\n        curIndex = maxLen - 1;\n        renderTab();\n        setTab($('.tab .t_item').eq(curIndex).elems[0]);\n        $overlay.addClass('hidden');\n    };\n    if (asrRecords.length > maxLen) {\n        if (asrmind) {\n            onConfirm();\n        } else {\n            $overlay.removeClass('hidden');\n            qd.confirm({\n                trigger: $('.close').elems[0],\n                msg: '最多显示4个实时转文字标签页， \\n是否自动关闭最早的标签页，以展示当前通话内容？',\n                check: {\n                    tip: '始终自动关闭，不再提示',\n                    stateKey: 'asrmind' },\n                buttons: [{ text: '全部通话记录', action: 'openUrl', url: url }, { text: '关闭', action: 'confirm', warning: true }, { text: '取消', action: 'cancel' }],\n                confirm: onConfirm,\n                cancel: function cancel() {\n                    $overlay.addClass('hidden');\n                }\n            });\n        }\n    } else {\n        renderTab();\n        setTab($('.tab .t_item').eq(asrRecords.length - 1).elems[0]);\n    }\n});\n\nqd.one('asrChange.asrPop', function (e, isUpdate, data) {\n    var asrRecords = qd.getState('asrRecords');\n    if (isUpdate) {\n        $('#m_' + data.uint32_index).find('.msg').html(highLight(data.str_line_ctx, $keywords.value));\n        $message.elems[0].scrollTop = 99999999;\n    } else if (asrRecords[curIndex] && asrRecords[curIndex].callid === qd.getState('callid')) {\n            renderMessage(data);\n        }\n});\n\nqd.one('_customerInfoSynced.asrPop', function () {\n    var customerName = qd.getState('customerName');\n    if (customerName) {\n        var current = getCallStream();\n        if (current) {\n            var $tab = $('.tab .is-current');\n            current.data.customerName = customerName;\n            if ($tab.elems[0]) {\n                var $span = $tab.find('span');\n                $span[isTel(customerName) ? 'addClass' : 'removeClass']('revert');\n                $span.text(reverceStr(customerName));\n                setTab($tab.elems[0]);\n            }\n        }\n    }\n});\n\nqd.one('asrPopOut.asrPop', function () {\n    var asrRecords = qd.getState('asrRecords');\n    var len = asrRecords.length;\n    var tab;\n    curIndex = len - 1;\n    renderTab();\n    tab = $('.tab .t_item').eq(curIndex).elems[0];\n    setTab(tab);\n});\n\n$('.tab .inner').bind('click', function (e) {\n    var tab;\n    var clickEl;\n    var toDel = false;\n    var asrRecords = qd.getState('asrRecords');\n    if ($(e.target).is('.inner')) {\n        return;\n    }\n    if ($(e.target).is('.t_item')) {\n        tab = e.target;\n    } else {\n        tab = $(e.target).findParent('.t_item') || $(e.target).elems[0];\n        if ($(e.target).is('.del') || (clickEl = $(e.target).findParent('svg')) && clickEl.classList.contains('del')) {\n            toDel = true;\n        }\n    }\n\n    if (toDel) {\n        var $rTab = $(tab);\n        var index = +tab.getAttribute('index');\n        var delSelected = false;\n        var delCurrent = false;\n        var len = 0;\n        if ($rTab.is('.is-current')) {\n            delCurrent = true;\n        }\n        if ($rTab.is('.is-selected')) {\n            delSelected = true;\n        }\n        $rTab.remove();\n        !delCurrent && asrRecords.splice(index, 1);\n        var $taba = $('.tab .t_item');\n        $taba.each(function (el, idx) {\n            el.setAttribute('index', idx);\n        });\n        len = $taba.elems.length;\n        tab = delSelected ? $taba.elems[len - 1] : $('.tab .is-selected').elems[0];\n        setTab(tab);\n    } else {\n        setTab(tab);\n    }\n});\n\n$('.clear').bind('click', function () {\n    $keywords.focus();\n    if ($keywords.value === '') {\n        return;\n    }\n    $keywords.value = '';\n    renderMessage();\n});\n\nvar onClose = function onClose() {\n    var asrRecords = qd.getState('asrRecords') || [];\n    var end = !qd.isCallingState('', true) ? 0 : 1;\n    qd.hidePage('asrFrame');\n    asrRecords.splice(0, asrRecords.length - end);\n};\n$('.close').bind('click', function (e) {\n    var tabLen = $('.tab .t_item').elems.length;\n    if (tabLen > 1) {\n        $overlay.removeClass('hidden');\n        qd.confirm({\n            trigger: e.currentTarget,\n            msg: '已打开多个标签页，全部关闭？',\n            buttons: [{ text: '全部关闭', action: 'confirm', warning: true }, { text: '取消', action: 'cancel' }],\n            confirm: function confirm() {\n                onClose();\n                $overlay.addClass('hidden');\n            },\n            cancel: function cancel() {\n                $overlay.addClass('hidden');\n            }\n        });\n    } else {\n        onClose();\n    }\n});\n\n$('.btn-detail').bind('click', function (e) {\n    var target = e.currentTarget;\n    if (qd.env.inClient) {\n        qd.trigger('_openUrl', target.href);\n    } else {\n        return;\n    }\n    e.preventDefault();\n});\n\n$('.keywords').bind('mousedown', function (e) {\n    e.stopPropagation();\n});\n$('.keywords').bind('keypress', function (e) {\n    if (e.keyCode === 13) {\n        renderMessage(undefined, true);\n    }\n});\n$('.dialog-message').bind('mousedown', function (e) {\n    var classList = e.target.classList;\n    if (classList.contains('head') || classList.contains('msg') || classList.contains('highlight-text')) {\n        e.stopPropagation();\n    }\n});\n\n$('body').bind('click', function () {\n    qd.hidePage();\n});\n\nqd.one('debug.asrFrame', function () {\n    console.log('asrFrame page');\n});\n\nsetTimeout(function () {\n    qd._debug() && console.log('log from asrFrame');\n}, 1000);"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(8),o=r(i),a=n(18),s=r(a),l=n(24),c=r(l),u=n(665),d=r(u),f=n(666),p=r(f),h=n(667),g=r(h),m=n(668),v=r(m),b=n(26),_=r(b),y=n(27),w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.params||{},r=n.style;return new s.default(c.default.call(this.stator,{name:"confirmFrame",style:(0,o.default)({width:280,zIndex:999},r),autoHeight:".confirm-container",moveable:!0,data:e,script:v.default,cssText:d.default.toString(),html:(0,_.default)(y)+p.default,props:{contentTpl:g.default}}),t)};t.default=w},function(e,t,n){t=e.exports=n(19)(!1),t.i(n(25),""),t.push([e.i,"h2 {\n  margin: 0;\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 1.5;\n  padding: 10px 15px 5px;\n  color: #262d3d;\n}\n.icon {\n  display: inline-block;\n  width: 16px;\n  overflow: hidden;\n  color: #a1abc2;\n}\n.icon svg {\n  width: 100%;\n}\n.icon.green:hover {\n  color: #01c480;\n}\na:hover .icon,\n.icon:hover {\n  color: #8490ae;\n}\n.drop {\n  overflow: hidden;\n  position: relative;\n  padding-right: 12px;\n}\n.drop .arrow {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 8px;\n  margin-left: 3px;\n}\n.icon.is-on,\n.text-stress {\n  color: #262d3d;\n}\n.text-hint {\n  color: #d4d8e1;\n}\n.green {\n  color: #00d48a;\n  border-color: #00d48a;\n}\n.red {\n  color: #f75559;\n}\n.blue {\n  color: #4a70ff;\n}\n.orange {\n  color: #ff8345;\n}\n.is-calling {\n  color: #a1abc2;\n}\n.is-calling h2 {\n  color: #f8f9fB;\n}\n.is-calling::-webkit-scrollbar-thumb,\n.is-calling ::-webkit-scrollbar-thumb {\n  background-color: #696c7c;\n}\n.is-calling::-webkit-scrollbar-thumb:hover,\n.is-calling ::-webkit-scrollbar-thumb:hover {\n  background-color: #50535f;\n}\n.is-calling .is-loading {\n  border: 2px solid #fff;\n  border-bottom-color: transparent;\n}\n.is-calling .text {\n  color: #a1abc2;\n}\n.is-calling .icon.is-on,\n.is-calling .text-stress {\n  color: #f8f9fB;\n}\n.is-calling .green {\n  color: #00cb83;\n  border-color: #00cb83;\n}\n.is-calling .red {\n  color: #e1464a;\n}\n.is-calling .blue {\n  color: #6283ff;\n}\n.is-calling.bg-main,\n.is-calling .bg-main {\n  background-position: 100% 50%;\n}\n.is-calling .bg-gap {\n  background-position: 100% 50%;\n}\n.is-calling .ck {\n  color: #f8f9fB;\n}\n.is-calling textarea,\n.is-calling input,\n.is-calling select,\n.is-calling .select,\n.is-calling .select .options {\n  border-color: #4a5264;\n  color: #f8f9fB;\n  background-color: #25283a;\n}\n.is-calling textarea:focus,\n.is-calling input:focus,\n.is-calling select:focus,\n.is-calling .select:focus,\n.is-calling .select .options:focus {\n  border-color: #8d96aa;\n}\n.is-calling textarea::placeholder,\n.is-calling input::placeholder,\n.is-calling select::placeholder,\n.is-calling .select::placeholder,\n.is-calling .select .options::placeholder {\n  color: #a1abc2;\n}\n.is-calling .select .options p:hover,\n.is-calling .select .options .selected {\n  background-color: #383a4a;\n}\n.is-calling .close {\n  color: #78849e;\n}\n.is-calling .close:hover {\n  color: #fff;\n}\n.is-calling input[type=checkbox] {\n  cursor: pointer;\n  position: relative;\n}\n.is-calling input[type=checkbox]::after {\n  position: absolute;\n  top: 0;\n  background-color: #1e2030;\n  color: #fff;\n  width: 14px;\n  height: 14px;\n  display: inline-block;\n  visibility: visible;\n  padding-left: 0px;\n  text-align: center;\n  content: ' ';\n  border-radius: 2px;\n  box-sizing: border-box;\n  border: 1px solid #4A5264;\n}\n.is-calling input[type=checkbox]:checked::after {\n  content: \"\";\n  border-color: #4A70FF;\n  background-color: #4A70FF;\n}\n.is-calling input[type=checkbox]:checked::before {\n  content: '';\n  position: absolute;\n  top: 1px;\n  left: 5px;\n  width: 3px;\n  height: 8px;\n  border: solid white;\n  border-width: 0 2px 2px 0;\n  transform: rotate(45deg);\n  z-index: 1;\n}\n.close {\n  position: absolute;\n  right: 0px;\n  top: 0px;\n  padding: 8px;\n  color: #a8abb3;\n}\n.close:hover {\n  color: #1e2300;\n}\n.close svg {\n  width: 14px;\n  height: 14px;\n}\n.bg-main {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #fff, #fff, #25283a, #25283a) left / cover;\n}\n.bg-gap {\n  transition: background-position 0.3s ease-out;\n  background: linear-gradient(60deg, #f4f7fb, #f4f7fb, #101328, #101328) left / cover;\n}\n.bgEaseIn {\n  background-position: 100% 50%;\n}\n.bgEaseOut {\n  background-position: 0% 50%;\n}\n.bg-main,\n.bg-gap {\n  background-size: 800% 800%;\n  animation-fill-mode: both;\n}\n@keyframes bgEaseIn {\n  0% {\n    background-position: 0% 50%;\n  }\n  100% {\n    background-position: 100% 50%;\n  }\n}\n@keyframes bgEaseOut {\n  0% {\n    background-position: 100% 50%;\n  }\n  100% {\n    background-position: 0% 50%;\n  }\n}\nbody {\n  margin: 0;\n  overflow: hidden;\n  font-size: 12px;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  color: #a1abc2;\n}\np {\n  margin: 0;\n}\ntextarea::placeholder,\ninput::placeholder {\n  color: #A1ABC2;\n}\n::-webkit-scrollbar {\n  width: 4px;\n  height: 8px;\n}\n::-webkit-scrollbar-thumb {\n  background-color: #f3f5fa;\n  border-radius: 8px;\n}\n::-webkit-scrollbar-thumb:hover {\n  background-color: #aaa;\n}\n::-webkit-scrollbar-track-piece {\n  background-color: transparent;\n}\nsvg {\n  fill: currentColor;\n}\na {\n  text-decoration: none;\n}\nul,\nli {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n.ck {\n  width: 9px;\n  height: 9px;\n  color: #262d3d;\n  position: absolute;\n  top: 50%;\n  right: 10px;\n  transform: translateY(-50%);\n  display: none;\n}\n.is-selected .ck {\n  display: inline-block;\n}\ninput,\ntextarea,\nselect,\n.select,\n.select .options {\n  font-size: 12px;\n  color: #262d3d;\n  font-family: 'PingFang SC', 'microsoft yahei', arial, status-bar;\n  border-radius: 3px;\n  border: 1px solid #e1e6f0;\n  background-color: #fff;\n}\ninput:focus,\ntextarea:focus,\nselect:focus,\n.select:focus,\n.select .options:focus {\n  outline: 0;\n  border-color: #c5ccdb;\n}\nselect,\n.select,\n.select .options p {\n  padding: 0 5px;\n}\n.select {\n  min-height: 26px;\n  position: relative;\n  cursor: default;\n}\n.select .options {\n  position: absolute;\n  z-index: 1;\n  left: -1px;\n  top: 29px;\n  width: 100%;\n  max-height: 73px;\n  overflow: auto;\n}\n.select .options p:hover,\n.select .options p.selected {\n  background: #f1f5fb;\n}\n.select p {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.cls:after {\n  content: \"\";\n  font-size: 0;\n  display: block;\n  height: 0;\n  clear: both;\n  visibility: hidden;\n}\n.disabled {\n  pointer-events: none;\n  opacity: .3;\n}\n.hidden {\n  display: none!important;\n}\n.overlay {\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  background: rgba(255, 255, 255, 0.6);\n}\ninput::-webkit-outer-spin-button,\ninput::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n}\ninput[type=\"number\"] {\n  -moz-appearance: textfield;\n}\n.is-loading {\n  border-radius: 100%;\n  margin: 2px;\n  border: 2px solid #ccc;\n  border-bottom-color: transparent;\n  height: 12px;\n  width: 12px;\n  margin-top: -7px;\n  background: 0 0!important;\n  display: inline-block;\n  -webkit-animation: rotate .75s 0s linear infinite;\n  animation: rotate .75s 0s linear infinite;\n}\n@keyframes rotate {\n  0% {\n    -webkit-transform: rotate(0);\n    transform: rotate(0);\n  }\n  50% {\n    -webkit-transform: rotate(180deg);\n    transform: rotate(180deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n.marquee {\n  white-space: nowrap;\n  overflow: hidden;\n  width: 80px;\n  position: relative;\n}\n.marquee p {\n  overflow: hidden;\n  float: left;\n  animation: move linear 6s infinite;\n}\n.marquee span {\n  display: inline-block;\n  padding-left: 10px;\n}\n.marquee::before,\n.marquee::after {\n  position: absolute;\n  top: 0;\n  z-index: 1;\n  content: ' ';\n  width: 10px;\n  height: 100%;\n  animation: bgfadeIn linear 2s;\n}\n.marquee::before {\n  left: -2px;\n  background: linear-gradient(90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n.marquee::after {\n  right: -2px;\n  background: linear-gradient(-90deg, #25283a, rgba(37, 40, 58, 0)) left / cover;\n}\n@keyframes move {\n  0% {\n    transform: translateX(0);\n  }\n  100% {\n    transform: translateX(-50%);\n  }\n}\n.q-notice {\n  position: absolute;\n  width: 100%;\n  left: 0;\n  top: 0;\n  text-align: center;\n}\n.q-notice.is-auto {\n  pointer-events: none;\n  z-index: 10;\n}\n.q-notice.is-cover {\n  height: 100%;\n  background: rgba(255, 255, 255, 0.7);\n}\n.q-notice .item {\n  margin: 4px auto;\n}\n.q-notice .info {\n  pointer-events: initial;\n  min-width: 170px;\n  padding: 0 15px;\n  line-height: 29px;\n  height: 28px;\n  overflow: hidden;\n  white-space: nowrap;\n  display: inline-block;\n  color: rgba(255, 255, 255, 0.8);\n  background-color: #25283a;\n  box-shadow: 0px 2px 18px 2px rgba(172, 172, 172, 0.3);\n  border-radius: 2px;\n  position: relative;\n}\n.q-notice .info .icon-tip {\n  vertical-align: -3px;\n  margin-right: 2px;\n  width: 14px;\n}\n.q-notice .info [data-action] * {\n  pointer-events: none;\n}\n.q-notice .is-error .info {\n  color: #fff;\n  background-color: #f75559;\n}\n.q-notice .is-success .info {\n  color: #fff;\n  background-color: #00cb83;\n}\n.q-notice .is-close-able .info {\n  text-align: left;\n}\n.q-notice .is-close-able .btn-close {\n  width: 12px;\n  height: 12px;\n  color: #fff;\n  margin: 8px -5px 0 10px;\n  float: right;\n}\n.q-notice .is-close-able .btn-close:hover {\n  opacity: .8;\n}\n.q-notice .is-warning .info {\n  color: rgba(0, 1, 10, 0.93);\n  border: 0.5px solid #FFEBDA;\n  background-color: #FFF8F0;\n  box-shadow: 0px 16px 32px rgba(18, 19, 25, 0.16), 0px 0px 8px rgba(18, 19, 25, 0.08), 0px 0px 1px rgba(18, 19, 25, 0.08);\n}\n.ringing {\n  animation: ringing 2s ease;\n  animation-fill-mode: both;\n  animation-iteration-count: infinite;\n}\n@keyframes ringing {\n  10% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  15% {\n    -webkit-transform: rotate(-15deg);\n    transform: rotate(-15deg);\n  }\n  20% {\n    -webkit-transform: rotate(15deg);\n    transform: rotate(15deg);\n  }\n  25% {\n    -webkit-transform: rotate(-10deg);\n    transform: rotate(-10deg);\n    color: #2af2ac;\n  }\n  30% {\n    -webkit-transform: rotate(5deg);\n    transform: rotate(5deg);\n    color: #2af2ac;\n  }\n  35% {\n    -webkit-transform: rotate(-5deg);\n    transform: rotate(-5deg);\n  }\n  40% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n}\n.ctimer {\n  border-radius: 50%;\n  height: 40px;\n  overflow: hidden;\n  position: relative;\n  width: 40px;\n  background: rgba(255, 255, 255, 0.3);\n}\n.ctimer svg {\n  position: absolute;\n  left: 0;\n  z-index: 2;\n}\n.ctimer .hand {\n  position: absolute;\n  top: 0;\n  height: 100%;\n  overflow: hidden;\n  width: 50%;\n}\n.ctimer .hand span {\n  border: 20px solid rgba(255, 255, 255, 0.3);\n  border-bottom-color: transparent;\n  border-left-color: transparent;\n  border-radius: 50%;\n  display: block;\n  height: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  transform: rotate(225deg);\n  width: 0;\n}\n.ctimer .hand-left {\n  left: 0;\n  transform: rotate(180deg);\n}\n.ctimer .hand-right {\n  right: 0;\n}\n.ctimer .hand span {\n  animation-duration: var(--post-edit-time);\n  animation-iteration-count: 1;\n  animation-timing-function: linear;\n  animation-fill-mode: both;\n}\n.ctimer .hand-left span {\n  animation-name: spinleft;\n}\n.ctimer .hand-right span {\n  animation-name: spinright;\n}\n@keyframes spinleft {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(225deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\n@keyframes spinright {\n  0% {\n    transform: rotate(225deg);\n  }\n  50% {\n    transform: rotate(405deg);\n  }\n  100% {\n    transform: rotate(405deg);\n  }\n}\nbody {\n  background: none;\n}\n.confirm-container {\n  color: #262d3d;\n  user-select: none;\n  -webkit-user-select: none;\n}\n.confirm-container .content {\n  padding: 15px;\n}\n.confirm-container .message {\n  line-height: 20px;\n  min-height: 40px;\n  padding-right: 15px;\n}\n.confirm-container .message input {\n  vertical-align: -1px;\n  margin: 0 2px 0 0;\n}\n.confirm-container .action {\n  text-align: right;\n  padding-top: 25px;\n}\n.confirm-container .action a {\n  display: inline-block;\n  font-size: 12px;\n  margin-left: 3px;\n  border-radius: 2px;\n  color: #a1abc2;\n  border: 1px solid #e1e6f0;\n  background-color: #fff;\n  cursor: pointer;\n  padding: 0 6px;\n  line-height: 20px;\n}\n.confirm-container .action a:hover {\n  background-color: #f4f7fb;\n}\n.confirm-container .action a.is-warning {\n  border-color: #F75559;\n  color: #fff;\n  background-color: #F75559;\n  line-height: 18px;\n  vertical-align: -1px;\n}\n.confirm-container .action a.is-warning:hover {\n  background-color: #fa6a6c;\n}\n.confirm-container.is-calling {\n  color: #f8f9fB;\n}\n.confirm-container.is-calling .action a {\n  color: #fff;\n  border: 1px solid #4a5264;\n  background-color: #101328;\n}\n.confirm-container.is-calling .action a:hover {\n  background-color: #383a4a;\n}\n.confirm-container.is-calling .action a.is-warning {\n  color: #fff;\n  border-color: #F75559;\n  background-color: #F75559;\n}\n.confirm-container.is-calling .action a.is-warning:hover {\n  background-color: #fa6a6c;\n}\n",""])},function(e,t){e.exports='<%\n    var status = status || \'normal\';\n    var isNormalState = status === \'normal\' || status === \'over\';\n%>\n<div class="confirm-container bg-main <%=isNormalState ? \'\' : \'is-calling\'%>">\n    <div id="content" class="content">\n        \n    </div>\n    <a href="javascript:void(0);" class="close icon"><svg viewBox="0 0 12 12"><use xlink:href="#close"></use></svg></a>\n</div>\n'},function(e,t){e.exports='<div class="message">\n    <p style="margin-bottom: 8px;"><%=msg%></p>\n    <%if (check) {%>\n    <label>\n        <input type="checkbox" id="check" data-key="<%=check.stateKey%>" />\n        <%=check.tip%>\n    </label>\n    <%}%>\n</div>\n<div class="action">\n    <%\n    var buttons = buttons || [];\n    for (var i = 0; i < buttons.length; i++) {\n        var button = buttons[i];\n    %>\n    <a class="<%= button.warning ? \'is-warning\' : \'\'%>" data-action="<%=button.action%>" href="<%=button.url || \'javascript:void(0)\'%>" target="_blank"><%=button.text%></a>\n    <%}%>\n</div>'},function(e,t){e.exports="'use strict';\n\nvar qd = window.qd;\nvar render = window.render;\nvar contentTpl = window.contentTpl;\nvar options = {};\nvar checked = false;\nvar stateKey = '';\n\nsetTimeout(function () {\n    qd._debug() && console.log('log from confirmFrame');\n}, 1000);\n\nfunction onShow(state, opts) {\n    var html = render(contentTpl)(opts || {});\n    options = opts || {};\n    $('#content').html(html);\n    bindEvents();\n    window.onRefresh();\n}\n\nfunction onHide() {}\n\nfunction hide() {\n    qd.hidePage('confirmFrame');\n}\n\nfunction confirm() {\n    if (stateKey) {\n        qd.setState(stateKey, checked, true, true);\n    }\n    options.confirm && options.confirm();\n    hide();\n}\n\nfunction cancel() {\n    options.cancel && options.cancel();\n    hide();\n}\n\nfunction bindEvents() {\n    if (options.check) {\n        stateKey = $('#check').elems[0].dataset.key;\n        $('#check').bind('click', function (e) {\n            checked = this.checked;\n        });\n    }\n\n    $('.action').bind('click', function (e) {\n        var target = e.target;\n        var dataset = target.dataset;\n\n        if (dataset.action === 'cancel') {\n            cancel();\n        } else if (dataset.action === 'confirm') {\n            confirm();\n        } else if (dataset.action === 'openUrl') {\n            if (qd.env.inClient) {\n                qd.trigger('_openUrl', target.href);\n            } else {\n                return;\n            }\n        }\n\n        e.preventDefault();\n    });\n}\n\n$('.close').bind('click', function (e) {\n    cancel();\n    hide();\n});"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(18),o=r(i),a=n(24),s=r(a),l=n(259),c="",u="",d=function(e,t){var n=this.stator,r=n.getState("workorder")||{},i=r.dialog||{},a=JSON.parse(n.getState("orderPopWinSize",!0)||"[]"),d=void 0;return u=c||l.getUrl.call(n,i.url),c="",d=new o.default(s.default.call(n,{name:"orderPopFrame",title:i.title||"电话条弹屏",src:u,style:{width:a[0]||460,height:a[1]||660},overlay:!0,moveable:!0,resizable:function(e,t){n.setState("orderPopWinSize","["+e+","+t+"]",!1,!0)},onopenurl:function(e){n.trigger("_openUrl",this.src),n.env.inClient&&e.preventDefault()},onremove:function(){n.hidePage("orderPopFrame")}}),t),n.one("_newPage.orderPopFrame",function(e){if((c=l.getUrl.call(n,i.url))!==u){var t=d.el.querySelector(".qd__title");d.showOverlay(),n.confirm({style:{width:240},ignoreRelative:!0,offsetX:(d.el.offsetWidth-240)/2,offsetY:(d.el.offsetHeight-300)/2,trigger:t,msg:"请您保存内容并关闭弹屏窗口，以查看当前通话弹屏",buttons:[{text:"知道了",action:"cancel"}],cancel:function(){d.hideOverlay()}})}}),n.one("_removePage.orderPopFrame",function(e){c&&u!==c&&n.showPage({name:"orderPopFrame"})}),d};t.default=d},function(e,t,n){var r=n(25);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(671)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){function r(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=h[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(u(r.parts[o],t))}else{for(var a=[],o=0;o<r.parts.length;o++)a.push(u(r.parts[o],t));h[r.id]={id:r.id,refs:1,parts:a}}}}function i(e,t){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],a=t.base?o[0]+t.base:o[0],s=o[1],l=o[2],c=o[3],u={css:s,media:l,sourceMap:c};r[a]?r[a].parts.push(u):n.push(r[a]={id:a,parts:[u]})}return n}function o(e,t){var n=m(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=_[_.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),_.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function a(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=_.indexOf(e);t>=0&&_.splice(t,1)}function s(e){var t=document.createElement("style");return e.attrs.type="text/css",c(t,e.attrs),o(e,t),t}function l(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",c(t,e.attrs),o(e,t),t}function c(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function u(e,t){var n,r,i,o;if(t.transform&&e.css){if(!(o=t.transform(e.css)))return function(){};e.css=o}if(t.singleton){var c=b++;n=v||(v=s(t)),r=d.bind(null,n,c,!1),i=d.bind(null,n,c,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=l(t),r=p.bind(null,n,t),i=function(){a(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(t),r=f.bind(null,n),i=function(){a(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}function d(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=w(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function f(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function p(e,t,n){var r=n.css,i=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||o)&&(r=y(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}var h={},g=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),m=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e.call(this,n)),t[n]}}(function(e){return document.querySelector(e)}),v=null,b=0,_=[],y=n(672);e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},t.attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=g()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=i(e,t);return r(n,t),function(e){for(var o=[],a=0;a<n.length;a++){var s=n[a],l=h[s.id];l.refs--,o.push(l)}if(e){r(i(e,t),t)}for(var a=0;a<o.length;a++){var l=o[a];if(0===l.refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete h[l.id]}}}};var w=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(i))return e;var o;return o=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")"})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(56),o=r(i),a=n(8),s=r(a),l=n(11),c=r(l),u=n(34),d=r(u),f=n(89),p=r(f),h=n(13),g=r(h),m=n(4),v=r(m),b=n(5),_=r(b),y=n(20),w=r(y),x=n(21),k=r(x),S=n(674),C=r(S),T=n(442),E=r(T),I=n(215),A=r(I),R=n(288),O=r(R),L=n(7),P=r(L),M=n(152),$=r(M),N=n(675),D=r(N),F=n(676),q=r(F),U=n(677),B=r(U),j=n(213),V=new P.default("WebRTC"),H=new P.default("ErrLog"),Y=new P.default("heartbeat"),z=void 0,G=!1,W=function(e){function t(){function e(){z&&z.ringPause&&z.ringPause()}var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments[1];(0,v.default)(this,t);var i=(0,w.default)(this,(t.__proto__||(0,g.default)(t)).call(this,n,r,!0)),o=r._getOptions(),a=r._platFormCounts=0,l={},u=new p.default,f=!1,h=0,m=!1,b=0,_=function(){var e=0,t=0;(0,d.default)(l).forEach(function(n){l[n]?++e:++t}),h=t,b=e},y=function(e){var t=[],n=e.filter(function(e,n){var r=void 0;if(e.url&&e.voipNumber&&e.platform){var i="sip"+n+"-"+e.platform+":"+Math.floor(16777215*Math.random()).toString(16);r=e.voipNumber+"@"+e.url,e.logName=i}else e.sdkAppId&&(r="trtc");return!!r&&(e.name=r,t.push(r),!0)});return(0,d.default)(l).forEach(function(e){-1===t.indexOf(e)&&(i.rtcInstances[e]&&(i.rtcInstances[e].destroy(),u.delete(i.rtcInstances[e].platform),delete i.rtcInstances[e]),delete l[e],delete S[e])}),r._platFormCounts=a=n.length,_(),r._webrtcReady=0,n},x=function(e,t){l[t]=!0===e,_(),h+b===a&&(r._webrtcReady=a===h?void 0:h?2:1,f||(f=!0,a>h&&(r.trigger("webrtcReady"),r.trigger("login"),V.$log("WebRTC is ready")))),V.$log("loginState, "+(0,c.default)(l)),a===h?(H.$error("all webrtc accounts login fail, logout self"),i.logout(),r.trigger("logout",{errCode:0}),r.trigger("_hideTip","recover"),r.trigger("_showTip",["电话线路有异常，需要重新登录","error",!0,!0,"sipoffline"])):h&&h+b===a?(m=!0,r.trigger("_hideTip","recover"),r.trigger("_showTip",["部分电话线路有异常，建议重新登录","error",!0,!0,"sipoffline"])):a===b&&(r.trigger("_hideTip","sipoffline"),m&&r.trigger("_showTip",["电话线路已恢复","success",!1,!1,"recover"]),m=!1)},k=function(){r._webrtcReady=void 0,f=!1},S={},T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];if(!e||n&&S[e])return void(e&&x(!0,e));if(t=(0,s.default)({devicesInputDefault:r.getState("devicesInputDefault")||"default",devicesOutputDefault:r.getState("devicesOutputDefault")||"default",loginDone:x},t),S[e]=!0,t.sdkAppId&&!i.rtcInstances[e]){var o=t.platform=4;u.add(o),i.rtcInstances[e]=new C.default(t,r)}else t.url&&t.voipNumber&&(u.add(t.platform),i.rtcInstances[e]=new E.default((0,s.default)({name:e},t),r));!n&&i.rtcInstances[e]&&(++a,r._platFormCounts=a)};if(i.name="webrtc",i.rtcInstances={},r._getLoginState=function(){return(0,s.default)({},l)},r._getPlatforms=function(){return u},r._getRTCInstance=function(){return(0,s.default)({},i.rtcInstances)},r._webrtcReady=0,r.one("logout.webrtc",k),P.default.$use($.default,{uin:o.kfext,url:o.reportUrl}),(0,A.default)(r),window.TRTC&&window.TRTC.checkSystemRequirements().then(function(e){e||(0,I.onNotSurpport)(r)}),n.sdkAppId&&T("trtc",n),n.sipAccounts){n.sipAccounts.forEach(function(e,t){if(e.url&&e.voipNumber&&e.platform){var n=e.voipNumber+"@"+e.url,r="sip"+t+"-"+e.platform+":"+Math.floor(16777215*Math.random()).toString(16);e.logName=r,T(n,e)}})}else if(n.url&&n.voipNumber){var R=n.voipNumber+"@"+n.url;T(R,n)}a||H.$error("请检查当前账号是否配置webrtc的码号"),r.one("_platFormSet.webrtc",function(e,t){t="client"!==t&&t,i.useRtcPlatform(t)}),i.agentMethods(),r.one("devicesInputDefault.change.webrtc",function(e,t){i.patchEveryPlatForms(function(e){e.setDeviceInPut(t)}),V.$log("麦克风设备切换："+t)}),r.one("devicesOutputDefault.change.webrtc",function(e,t){i.patchEveryPlatForms(function(e){e.setDeviceOutPut(t)}),V.$log("外放设备切换："+t)}),r.one("_normal.stateChange.webrtc",function(e,t){z&&z.hangup()}),r.one("rtcAccountsChange.webrtc",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Y.$log("rtcAccountsChange, accounts receive: "+(0,c.default)(t)),t=y(t),t.forEach(function(e){var t=e.name;t&&T(t,e,!0)}),r.report({apiName:"heartbeatAccountsChange",code:0,statusCode:0})}),r.one("rtcOnlineStateSync.webrtc",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=!1;(0,d.default)(l).forEach(function(e){var r=i.rtcInstances[e].platform;l[e]&&-1===t.indexOf(r)&&n.indexOf(r)>-1?(o=!0,i.rtcInstances[e].onwork()):!l[e]&&t.indexOf(r)>-1&&(o=!0,"trtc"===e?i.rtcInstances[e].login():i.rtcInstances[e].client.login(null,!0))}),o&&(Y.$log("rtcOnlineStateSync, enablePlatform: "+(0,c.default)(n)),r.report({apiName:"heartbeatOnlineStateSync",code:0,statusCode:0}))}),r.one("_online.stateChange.webrtc",e),r.one("_postEdit.stateChange.webrtc",e),r.one("_over.stateChange.webrtc",e),D.default.attachEvents(r);var O=(0,j.useKeepAlive)(o.appId);return o.keepAlive||!1!==o.keepAlive&&O?q.default.attachEvents(r):B.default.init(r),r.setState("isPageHidden",document.hidden),!G&&document.addEventListener("visibilitychange",function(){var e=document.hidden;r.setState("isPageHidden",e),V.$log("isPageHidden: "+e)}),G=!0,i}return(0,k.default)(t,e),(0,_.default)(t,[{key:"patchEveryPlatForms",value:function(e){var t=this;(0,o.default)(this.rtcInstances).forEach(function(n,r){e&&e(t.rtcInstances[n],r)})}},{key:"getInstance",value:function(e){return this.rtcInstances[e]}},{key:"useRtcPlatform",value:function(e){z=this.rtcInstances&&this.rtcInstances[e],z?z.agentMethods():O.default.prototype.useAgentMethods(!1)}},{key:"isAgentLogin",value:function(e){return this.agentOnWork(e)}},{key:"agentReset",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.success,r=t.fail;return t.success=function(i){n&&n.call(e,i),t.success=function(t){n&&n.call(e,t),e._off&&e.qd.trigger("agentReset",{errCode:0}),e._off=!1},t.fail=function(t){r&&r.call(e,t),e._off&&e.qd.trigger("agentReset",{errCode:-1}),e._off=!1},e._off=!0,e.agentOnWork(t)},t.fail=function(t){r&&r.call(e,t),e.qd.trigger("agentReset",{errCode:-1})},this.agentOffWork(t)}},{key:"logout",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};V.$log("logout"),this.agentOffWork(e)}},{key:"agentOnWork",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.platform;t.type=5,this.patchEveryPlatForms(function(r){n&&n!==r.platform||(t.platform=r.platform,e.apiCached.agentOnWork(t))}),V.$log("agentOnWork")}},{key:"agentOffWork",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.type=5,V.$log("agentOffWork"),this.apiCached.agentOffWork(e)}},{key:"agentSetWorkStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.type=4,V.$log("agentSetWorkStatus"),this.apiCached.agentSetWorkStatus(e)}},{key:"hold",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!this.qd.getState("mute")&&z&&z.setMuteState({isMute:e.hold},!0),this.apiCached.hold(e)}}]),t}(O.default);window.QDRTC=W,t.default=W},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(68),o=r(i),a=n(69),s=r(a),l=n(11),c=r(l),u=n(13),d=r(u),f=n(4),p=r(f),h=n(5),g=r(h),m=n(20),v=r(m),b=n(21),_=r(b),y=n(171),w=r(y),x=n(297),k=r(x),S=n(288),C=r(S),T=n(96),E=r(T),I=n(7),A=r(I),R=n(38),O=new A.default("TRTC"),L=new A.default("ErrLog"),P=void 0,M=void 0,$=void 0,N=void 0,D=void 0,F=function(e){function t(e,n){(0,p.default)(this,t);var r=(0,v.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e,n));r.name="trtc",r.platform=e.platform,r.pubFailCount=0,r.isCalling=!1;var i=e.trtcEnv,o=function(t){e.loginDone&&e.loginDone(t,r.name)};if(0===i)return o(),O.$warn("TRTC返回无效环境"),(0,v.default)(r);var a=r.onwork=function(e){n.stopRetry("agentOffWork"),r.agentOnWork({retry:3,label:r.name,success:function(){o(!0)},fail:function(){o(),e&&e()}}),O.$log("agentOnWork executed")},s=r.offwork=function(e){n.stopRetry("agentOnWork"),!e&&o(),n.agentOffWork({retry:3,type:5,label:r.name,platform:r.platform})};r.login=function(){a(s)};var l=function(){2===i?N?window.TRTC=N:N=window.TRTC:D?window.TRTC=D:D=window.TRTC,r.initSDK(e,a,n)};return n.one("_relogin.trtc",a),n.one("agentReset.trtc",function(e,t){o&&o(0===t.errCode)}),2===i?N?l():(0,w.default)(k.default+"trtc-4.14.5.js").then(l):D?l():(0,w.default)(k.default+"trtc-4.7.0.js").then(l),n.one("invite.trtc",function(e,t){var i=t.roomid,o=t.callid,a=n.getState(),s=1===t.calldirection;r.pubFailCount=0,n.setState({roomId:i,callid:o}),n.trigger("_platFormSet",r.name),O.$log("invite received, platFormSet to trtc"),(R.answerType.pstn!==a.answerType||s)&&r.reportStatus(2,t.callid,function(){n.trigger("newCalling",t),s?E.default.ring():r.answer()})}),n.one("hangup.trtc",function(e,t){r.reportStatus(10),r.hangup()}),n.one("_reset.trtc",r.destroy.bind(r)),$&&window.removeEventListener("unload",$),$=function(){r.isCalling&&(n.setState("status","normal",!1),r.reportStatus(0))},window.addEventListener("unload",$,!1),r}return(0,_.default)(t,e),(0,g.default)(t,[{key:"initSDK",value:function(e,t,n){var r=this,i=e.sdkAppId,o=e.userId,a=e.userSig,s=e.recordId,l=e.trtcEnv,u=window.TRTC;u.Logger.setLogLevel(u.Logger.LogLevel.DEBUG);var d=this.client=u.createClient({sdkAppId:+i,userId:o,userSig:a,mode:"rtc",pureAudioPushMode:1,recordId:s,bussinessInfo:(0,c.default)({Str_uc_params:{uc_biz_type:1e3}})}),f=["wss://test.rtc.qq.com:8687","wss://webrtc.qq.com:8687","wss://signaling.rtc.qq.com","wss://qcloud.rtc.qq.com:8687"];d.setProxyServer(f[l||1]),this.sdkAppId=i,setTimeout(t,0),d.on("error",function(e){16387===e.getCode()&&n.trigger("_showTip","由于网络原因，您当前的通话已中断");r.clear(),L.$error("trtc error ocur:"+e.toString())}),d.on("connection-state-changed",function(e){var t=e.state;"CONNECTED"===t?(n.trigger("_hideTip",!0),O.$log("connected")):"RECONNECTING"===t&&(n.trigger("_showTip",["媒体会话通路自动重连中...","tip",!0,!0]),O.$warn("reconnecting"))}),d.on("stream-added",function(e){var t=r.remoteStream=e.stream;t.setAudioOutput(r.deviceIdOutput);var n=document.createElement("div");t.stop(),t.play(n),O.$log("play remote stream")}),d.on("stream-removed",function(e){e.stream.stop(),O.$log("remote stream removed")}),d.on("stream-updated",function(e){var t=e.stream;t.setAudioOutput(r.deviceIdOutput);var n=document.createElement("div");t.stop(),t.play(n),O.$log("remote stream updated")})}},{key:"clear",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.unpublish();case 2:return e.next=4,this.client.leave();case 4:this.clearLocalStream();case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"createStream",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=void 0,e.next=3,this.unpublish();case 3:return this.clearLocalStream(),t=this.localStream=window.TRTC.createStream({audio:!0,video:!1,microphoneId:this.deviceId}),O.$log("createStream"),e.abrupt("return",t.initialize());case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"publish",value:function(e){var t=this,n=e.success,r=e.fail,i=e.complete,o=this.qd;this.createStream().then(function(){t.client.isPublishing_=!1,t.localStream?t.client.publish(t.localStream).then(function(){t.reportStatus(3,"",i,!1,n,r),O.$log("localStream publish success")}).catch(function(n){if(L.$error("trtc localStream publish error:"+n.toString()),t.pubFailCount>=3){t.clear(),o.syncState&&o.syncState(),o.trigger("_showTip","本地流发布出错了"),r&&r.call(o,{code:-1,msg:"本地流发布出错了"}),i&&i.call(o)}else++t.pubFailCount,O.$log("localStream publish fail, try to republish"),setTimeout(function(){t.isCalling&&t.publish(e)},10)}):O.$warn("localStream is empty")}).catch(function(e){var n=e.message;switch(e.name){case"NotReadableError":n="无法读取错误：请确保当前没有其他应用使用麦克风";break;case"NotAllowedError":n="拒绝错误：用户禁用了麦克风访问权限";break;case"NotFoundError":n="找不到错误：没有找到麦克风"}n&&o.trigger("_showTip",n),t.clear(),L.$error("trtc localStream Init:"+e.toString()),r&&r.call(o,{code:-1,msg:n}),i&&i.call(o)})}},{key:"unpublish",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.localStream){e.next=3;break}return O.$log("unpublish ignored"),e.abrupt("return");case 3:return e.prev=3,O.$log("unpublish localStream"),e.next=7,this.client.unpublish(this.localStream);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),L.$error("trtc unpublish localStream error");case 12:case"end":return e.stop()}},e,this,[[3,9]])}));return e}()},{key:"reportStatus",value:function(e,t,n,r,i,o){var a=this,s=this.qd.getState(),l=t||s.callid||"",c=s.roomId||l.split("-")[2],u=s.status;l&&c&&(O.$log("report, status:"+e+", callid:"+l+", roomid:"+c),e=r||0!==e||"calling"!==u||"callin"!==s.direction?e:4,clearTimeout(P),this.qd.statusReport({callid:l,roomid:c,status:e,sdkAppId:this.sdkAppId,success:i,fail:o,complete:function(){a.isCalling=2===e||3===e,4===e&&a.reportStatus(0,"",null,!0),n&&n()}}))}},{key:"clearLocalStream",value:function(){this.localStream&&(this.localStream.stop(),this.localStream.close(),this.localStream=null)}},{key:"joinRoom",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(){var t,n,r,i,a,s,l=this,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.client,n=this.qd.getState(),r=n.callid||"",i=n.roomId||r.split("-")[2]||"",a=c.fail,s=c.complete,t.join({roomId:parseInt(i,10)}).then(function(){return E.default.ringPause(),O.$log("join callback: join room success"),l.publish(c)}).catch(function(e){E.default.ringPause(),l.reportStatus(11),l.clear(),l.qd.syncState(),l.qd.trigger("_showTip","入房失败"),L.$error("trtc join room fail, "+e.message),a&&a.call(l.qd,{code:-1,msg:"入房失败"}),s&&s.call(l.qd)}),P=setTimeout(function(){E.default.ringPause(),l.reportStatus(0),l.clear(),O.$log("join room timeout"),a&&a.call(l.qd,{code:-1,msg:"入房超时"}),s&&s.call(l.qd)},2e4),O.$log("join room, "+i);case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"answer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=!0===t;O.$log("answer, with delay: "+(!0===n?"true":"false")),M&&clearTimeout(M),!0===n?M=setTimeout(function(){e.joinRoom()},4e4):this.joinRoom(t)}},{key:"hangup",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(){var t,n,r,i,a,s,l=this,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.client,n=this.qd.getState(),r=n.status,i=u.success,a=u.fail,s=u.complete,u.type=r&&"online"!==r?2:1,u.callid=n.callid,E.default.ringPause(),O.$log("hangup, "+(0,c.default)(u)),e.next=10,this.unpublish();case 10:t.leave().then(function(){l.clearLocalStream(),l.qd.setState("roomid",""),O.$log("client leave"),l.reportStatus(0,"",s,!1,i,a)}).catch(function(e){L.$error("trtc client leave error, "+(0,c.default)(e)),l.reportStatus(0,"",s,!1,i,a)}),P=setTimeout(function(){l.qd.setState("roomid",""),O.$log("hangup on timeout"),l.reportStatus(0,"",s,!1,i,a)},2e4);case 12:case"end":return e.stop()}},e,this)}));return e}()},{key:"setMuteState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=e.isMute,r=e.success,i=e.fail,o=e.complete;O.$log("setMuteState, "+(0,c.default)(e));try{this.localStream&&this.localStream[(n?"mute":"unmute")+"Audio"](),!t&&this.qd.trigger("muteState",{IsMute:n}),r&&r.call(this.qd,{code:0})}catch(e){i&&i.call(this.qd,{code:-1,msg:e.message})}o&&o.call(this.qd)}},{key:"setVolume",value:function(e){this.remoteStream&&this.remoteStream.setAudioVolume(e),O.$log("set volume "+e)}},{key:"agentOnWork",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.type=5,e.platform=e.platform||this.platform,O.$log("agentOnWork"),this.apiCached.agentOnWork(e)}},{key:"dialClick",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.qd.getState();e.sdkAppId=this.sdkAppId,e.roomid=t.roomId,O.$log("dialClick"),this.apiCached.dialClick(e)}},{key:"getNetWorkState",value:function(){var e=this,t={};this.client.getTransportStats().then(function(n){t.rtt=n.rtt,void 0!==t.packageLostDown&&e.qd.trigger("netWorkStatus",t)}),this.client.getRemoteAudioStats().then(function(n){for(var r in n){var i=n[r].packetsLost,o=i+n[r].packetsReceived;if(o){var a=i/o;t.packageLostDown=a}void 0!==t.rtt&&e.qd.trigger("netWorkStatus",t)}})}},{key:"setDeviceOutPut",value:function(e){this.deviceIdOutput=e}},{key:"setDeviceInPut",value:function(e){this.deviceId=e}},{key:"destroy",value:function(){O.$log("destroyed"),this.qd.off("."+this.name),this.client&&!this.isCalling&&this.client.destroy(),this.client=null}}]),t}(C.default);t.default=F},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(8),o=r(i),a=n(14),s=r(a),l=n(68),c=r(l),u=n(69),d=r(u),f=n(199),p=r(f),h=n(213),g=n(7),m=r(g),v=new m.default("Screen");t.default={attachEvents:function(e){var t=this,n=e._getOptions("appId"),r=void 0;v.$log("attach screen record events"),this.useProxy=(0,h.useScreenShareProxy)(n),e.one("newCalling.screen",function(n,i){var o=e.getState("withScreenRec"),a=e.getState("screenRec")||{},s=i.callid;o&&a.sdkAppId&&(t.stopRecord(),t.shareClient=null,t.defer=null,t.shareStream=null,t.remoteStream=null,r=t.startRecord(s,a))}),e.one("_over.stateChange.screen",function(){t.stopRecord()}),e.one("_sessionEnd.screen",function(){!e.isConnected()&&t.stopRecord()}),e.one("_streamReady.screen",function(){var n=(0,d.default)(c.default.mark(function n(i,o){return c.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t.shareClient&&t.shareStream&&r&&(r=r.then((0,d.default)(c.default.mark(function n(){var r,i,a;return c.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=o.remoteStreams[0].getAudioTrack(),i=o.localStreams[0].getAudioTrack(),t.remoteStream){n.next=16;break}return a=e.getState("screenRec")||{},t.remoteStream=p.default.createStream({userId:a.userId,audioSource:r}),v.$log("initialize remoteStream:audioTrackRemote"),n.next=8,t.remoteStream.initialize();case 8:return v.$log("publish remoteStream"),n.next=11,t.shareClient.publish(t.remoteStream,{isAuxiliary:!0});case 11:return v.$log("shareStream add audioTrackLocal"),n.next=14,t.shareStream.addTrack(i);case 14:n.next=22;break;case 16:return v.$log("replaceTrack remoteStream:audioTrackRemote"),n.next=19,t.remoteStream.replaceTrack(r);case 19:return v.$log("replaceTrack shareStream:audioTrackLocal"),n.next=22,t.shareStream.replaceTrack(i);case 22:case"end":return n.stop()}},n,t)}))));case 1:case"end":return n.stop()}},n,t)}));return function(e,t){return n.apply(this,arguments)}}())},startRecord:function(e,t){var n=this;return this.defer||(this.defer=new s.default(function(){var r=(0,d.default)(c.default.mark(function r(i,o){var a;return c.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return a=n.getTrtcClient(t,e),v.$log("start record screen"),r.prev=2,n.shareStream||(n.shareStream=p.default.createStream({screen:!0,userId:t.userId}),n.shareStream.on("screen-sharing-stopped",function(e){n.closeStream("shareStream",n.shareStream,n.shareClient)}),n.shareStream.setScreenProfile({width:3840,height:2160,frameRate:30,bitrate:9e3})),v.$log("join room: "+e),r.next=7,a.join({roomId:e});case 7:return r.next=9,n.shareStream.initialize();case 9:v.$log("publish shareStream"),a.publish(n.shareStream).then(i),r.next=17;break;case 13:r.prev=13,r.t0=r.catch(2),v.$error("error ocurred: "+r.t0.message),o();case 17:case"end":return r.stop()}},r,n,[[2,13]])}));return function(e,t){return r.apply(this,arguments)}}())),this.defer},stopRecord:function(){var e=this;return(0,d.default)(c.default.mark(function t(){var n,r,i;return c.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.shareClient,r=e.shareStream,i=e.remoteStream,!n){t.next=14;break}return e.shareClient=null,t.next=7,e.closeStream("shareStream",r,n);case 7:return t.next=9,e.closeStream("remoteStream",i,n);case 9:return t.next=11,n.leave();case 11:n.destroy(),n=null,v.$log("stop record screen");case 14:case"end":return t.stop()}},t,e)}))()},closeStream:function(e,t,n){var r=this;return new s.default(function(){var i=(0,d.default)(c.default.mark(function i(o){var a;return c.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!t||!n){r.next=19;break}if(v.$log("stop "+e),r.prev=2,a=t.getAudioTrack(),r.t0=a,!r.t0){r.next=8;break}return r.next=8,t.removeTrack(a);case 8:if(r.t1=t.getConnection(),!r.t1){r.next=12;break}return r.next=12,n.unpublish(t);case 12:r.next=17;break;case 14:r.prev=14,r.t2=r.catch(2),v.$log("unpublish "+e+" error as "+r.t2.message);case 17:t.stop(),t.close();case 19:o();case 20:case"end":return r.stop()}},i,r,[[2,14]])}));return function(e){return i.apply(this,arguments)}}())},getTrtcClient:function(e,t){return e.sdkAppId=+e.sdkAppId,this.shareClient=p.default.createClient((0,o.default)({useStringRoomId:!0,userDefineRecordId:e.userId+"_"+t,mode:"rtc"},e)),this.shareClient}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(96),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default={attachEvents:function(e){document.addEventListener("visibilitychange",function(){var t=document.hidden,n=e.isCallingState("",!0);t?!n&&e._isConfiged()&&i.default.playBg():i.default.stopBg()}),e.on("stateChange",function(t,n){e.isCallingState(n,!0)?i.default.stopBg():document.hidden&&e._isConfiged()&&i.default.playBg()})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(96),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default={init:function(e){var t=!1,n=function n(){var r=document.hidden,o=e.isCallingState("",!0);!t&&r&&e._isConfiged()&&!o&&(t=!1,document.removeEventListener("visibilitychange",n),i.default.playInteractTone())};document.addEventListener("visibilitychange",n),e.on("stateChange",function(t,n){e.isCallingState(n,!0)&&i.default.stopInteractTone()})}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.setSimpleMode=void 0;var i=n(14),o=r(i),a=n(360),s=r(a),l=n(443),c=r(l),u=n(465),d=r(u),f=n(285);window.Promise=window.Promise||o.default;var p=s.default.config,h=!1;t.setSimpleMode=function(e){h=e};(0,f.setUIProtocal)(),s.default.version+="-ui",s.default.extend(c.default,{config:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.muddled=!1,e.simple=h||e.simple,p.call(this,e)},mount:function(){u.createMainPage.call(this)}}),s.default.on("configsSetted",function(e,t){"webrtc"!==t.mode&&s.default.trigger("_platFormSet","client"),(0,d.default)(t.el||"#qd_agentbar",s.default)}),t.default=s.default},function(e,t,n){"use strict";function r(e,t){var n=void 0,r=function(){return"webrtc"===e._getOptions().mode},o=!1;if(e.one("configSuccess.webrtc",function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r()&&(e.rtc=new t(i,e),e._qdrtcCreated=!0,e.trigger("_qdrtcCreated"))}),e.one("configsSetted.webrtc",function(e,n){r()||(o=!1,t.prototype.useRtcPlatform("client"))}),e.one("newCalling.webrtc",function(t,r){var i=e.getState(),a=i.autoAnswer,s=1===r.calldirection;n=r.callid;try{o=r.isTccc,s&&a&&e.answer()}catch(t){}}),e.one("_monitor.stateChange.webrtc",function(){o&&e.setMuteState({isMute:1})}),e.one("_breakIn.stateChange.webrtc",function(){o&&e.setMuteState({isMute:0})}),e.one("_makecall.webrtc",function(t,o){var a=e.getState();r()&&i.answerType.pstn!==a.answerType&&o!==n&&e.answer(!0)}),window===top){var a=window.onbeforeunload;window.onbeforeunload=function(){return["normal","over"].indexOf(e.getState().status)>-1?a&&a():"当前电话还未结束，是否离开页面？"}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(38)},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(678),o=r(i),a=n(215),s=r(a),l=n(303),c=r(l),u=n(96),d=n(673),f=r(d),p=n(679),h=r(p),g=n(682);o.default.extend({SoundMeter:c.default,Player:u.Player,detect:s.default,getMicroMedia:a.getMicroMedia,stopMedia:a.stopMedia,getMicrophones:a.getMicrophones,getSpeakers:a.getSpeakers}),(0,h.default)(o.default,f.default),(0,g.registerSilent)(o.default),t.default=o.default},function(e,t,n){"use strict";function r(e){var t=function(){e.trigger("_showAudioAutoplayTip")};(0,i.registerSilentCb)(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.registerSilent=r;var i=n(96)}])});

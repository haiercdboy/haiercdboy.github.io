<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
<title> REST请求添加timeout超时参数支持、abort()方法</title>
<style>
.demo{
	color:#666;
	padding:20px;
	background:#eee;
}
</style>
</head>

<body>
<div id="container">
	<h1>
    REST请求添加timeout超时参数支持、abort()方法：
    </h1>
    <pre>
        <h2>//方法1： timeout参数：传入响应超时时间，超过这个响应时间后拿不到数据,即会执行fail()回调中的事件</h2>

        REST.read({
                url: '/ajax_abort',
                data: {
                    id: '20'
                },
               <b> timeout: 2000 //方法1： 传入响应超时时间，超过这个响应时间后拿不到数据,即会执行fail()回调中的事件</b>
            }).done(function(){
                alert("done");
            }).fail(function(data){
                <b>//timeout或手动abort()之后想要做的事，都可以写在fail()回调方法里</b>
                alert("fail or abort");
            });
    </pre>

    <pre>
         <h2>//方法2：手动调用abort方法并执行</h2>
            var myRest = REST.read({
                url: '/ajax_abort',
                data: {
                    id: '20'
                });

            <b>//方法2：手动调用REST(每一个REST都是一个promise实例)的xhr.abort方法</b>
            myRest.xhr.abort();
    </pre>
</div>

<script src="/static_proxy/Tea.js"></script>
<script>
Tea.config({
    base: "../js",
});

Tea.use("ajax_abort");
</script>

</body>
</html>
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
<title>demo</title>
<style>
body{
	margin: 0;
	background-color:#000;
}
img{
	position:absolute;
	left:0;
	top:0;
	margin-left:-50%;
	height:100%;
}
div.tea-page{
	overflow:hidden;
}
div.tea-page-prev{
	opacity: 0;
	transform: translateX(0) scale(.9) rotate(0);
}

div.tea-page-next{
	/*opacity: 0;*/
	transform: translateX(100%) rotate(360deg);
}

div.tea-page-in{
	transform: translateX(0) rotate(0);
}
</style>
</head>

<body>
<div data-src="http://icon.nipic.com/BannerPic/20160505/home/20160505091610.jpg"></div>
<div data-src="http://icon.nipic.com/BannerPic/20160509/home/20160509141329.jpg"></div>
<div data-src="http://icon.nipic.com/BannerPic/20160505/home/20160505103832.jpg"></div>
<div data-src="http://icon.nipic.com/BannerPic/20160225/home/20160225090848.jpg"></div>
<div data-src="http://icon.nipic.com/BannerPic/20160509/home/20160509141329.jpg"></div>
<div data-src="http://icon.nipic.com/BannerPic/20160505/home/20160505103832.jpg"></div>

<script src="http://bqq.gtimg.com/tea/latest/Tea.js"></script>
<script>
Tea.config({
    base: "../js",
});

Tea.use(["ui/widget/MobilePage", "ui/widget/Loading", "lib/zepto", "util/imageLoader"], function(MobilePage, Loading, $, imageLoader){
	$('body').on('touchmove', function(e){
		e.preventDefault();
	});
	
	var loading = function(page){
		new Loading({
			el: page,
			content: '',
			type: 'inline'
		});
	};
	
	var onPageShow = function(page){
		var $page = $('#' + page),
			src;
		
		if($page.data('loaded')) {
			return;
		}
		
		src = $page.data('src');
		loading($page);
		
		imageLoader(src, function(){
			$page.html('<img src="' + src + '" />');
			$page.data('loaded', true);
		});
	};
	
	var banner = new MobilePage({
		touchNext: true,
		touchBackRate: .2,
		//transition: 'Y'
	});
	
	banner.on('swiping', function(e, $pageOut, $pageIn, rate, move, offset){
		/*
		 * $pageOut：要移出的页面, 
		 * $pageIn：要移入的页面, 
		 * rate：滑动距离的百分比, 
		 * move：滑动距离, 
		 * offset：移入页面需要移动的距离
		 */
		
		var outId;
    	
    	if(move < 0){
	    	$pageOut.css({
	    		transform: 'scale(' + ((1-rate)*.1 + .9) + ')'
	    	});
	    	
    		$pageIn.css({
	    		transform: 'translateX(' + offset + 'px) scale(' + (rate*.5 + .5) + ') rotate(' + 360 * rate + 'deg)',
	    		opacity: rate
	    	});
    	} else {
    		outId = $pageOut[0].id;
    		
    		$pageIn.css({
	    		transform: 'translateX(' + offset + 'px) scale(' + (rate*.1 + .9) + ')',
	    		opacity: rate
	    	});
	    	
	    	outId === 'tea-page-1' ? $pageOut.css({
	    		opacity: (1-rate)*.2 + .8,
	    		transform: 'scale(' + ((1-rate)*.1 + .9) + ')'
	    	}) : $pageOut.css({
	    		opacity: 1-rate,
	    		transform: 'translateX(' + move + 'px) rotate(' + -360 * rate + 'deg) scale(' + (1-rate) + ')'
	    	});
    	}
	});
	
	banner.on('pageShow', function(e, id){
		onPageShow(id);
	});
	
	onPageShow('tea-page-1');
});
</script>

</body>
</html>